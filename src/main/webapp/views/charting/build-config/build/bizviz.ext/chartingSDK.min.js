/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function BizvizSDK(e){var a=[],t=[],r=[];function V(e){for(var t={},a=0;a<e.length;a++)for(var r in e[a]){t[r]||(t[r]=0);var o=getNumericComparableValue(e[a][r]);null==o||null===o||""===o||"null"==o||isNaN(o)||0==o.length||(t[r]=+t[r]+ +o)}return t}r.localtime="",r.dashboard_user={},r.dashboard_isopendoc=!1,r.dashboard_dashboardparameters={},this.calculation={NUMBER:{add:function(e,t){return+e+ +t},substract:function(e,t){return+e-+t},multiply:function(e,t){return e*t},division:function(e,t){return+e/t*1}},STRING:{concat:function(e,t){return e+""+t}},DATE:{getLocalDate:function(e){var e=new Date(e),t=e.getFullYear();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getDate()+", "+t+" "+e.getHours()+":"+e.getMinutes()}}},this.lastChangedItemMap={},this.init=function(e){sdk.dashboard=e,sdk.updateGlobalVariable("context",r,!1),sdk.updateGlobalVariable("dashboard",{},!0)},this.setLastChangedItem=function(e){this.lastChangedItemMap[e.key]=e,this.lastChangedItem=e},this.setContext=function(e,t,a){this.addContext(e,t,a)},this.addContext=function(e,t,a){r[e]=t,a||this.updateGlobalVariable("context",r,!1)},this.excelExport=function(e,t,a,r,o){var n=new ExportToPPTButton,i=(n.m_dashboard=this.getWidget(e[0]).m_dashboard,new Workbook),s=0,l=Array.isArray(a)?a:" ",r=r||a||"Dashboard",c=(showBlockUILoaderExcel(3e4,o),n.m_titleArray=[],1);if("single"!=n.m_excelsheet)for(var d=0;d<e.length;d++){var m,h,g,u,p=this.getWidget(e[d]);if(void 0!==(u="datagrid"!=p.m_objecttype&&"scorecard"!=p.m_objecttype&&"chart"!=p.m_objecttype&&"funnel"!=p.m_objecttype?u:p.plugin.getDetailData())&&void 0!==u.sheetDetail&&0<u.sheetDetail.length&&0<u.sheetDetail[0].length){var f=u.sheetDetail;if(0==l.length||null==l||null==l[d])f=u.sheetDetail;else for(var _=0;_<l[d].length;_++)for(var b=0;b<f.length;b++)l[d][_]==f[b][0]&&f.splice(b,1)}else f=[];for(b=0;b<f.length;b++)try{var y=f[b][0].replace(/_/g," "),C=y.charAt(0).toUpperCase()+y.slice(1);f[b][0]=C}catch(e){}if(void 0!==p.m_repeaterCharts&&0<p.m_repeaterCharts.length)for(var v=0;v<p.m_repeaterCharts.length;v++){var D=p.m_repeaterCharts[v];if(n.showChartData=new ShowChartData(D),IsBoolean(D.m_isDataSetavailable)&&!IsBoolean(D.m_isEmptySeries)&&(void 0===e||-1<e.indexOf(p.m_repeaterCharts[v].m_referenceid)))try{s++;for(var w=n.getExcelData(D),b=0;b<w[0].length;b++)try{var S=(k=w[0][b].replace(/_/g," ")).charAt(0).toUpperCase()+k.slice(1);w[0][b]=S}catch(e){}h=0<f.length?(m=[["Filters"]],[[""],["Data"]]):(m=[["Data"]],[]),g=m.concat(f,h,w),x=void 0!==t&&t[d]?t[d]+"_"+D.m_repeaterfieldvalue:p.m_referenceid+"_"+D.m_repeaterfieldvalue;try{-1<n.m_titleArray.indexOf(x)&&(x+=c,c++),n.m_titleArray.push(x)}catch(e){x=D.m_referenceid+"_"+D.m_repeaterfieldvalue}i.SheetNames.push(x),i.Sheets[x]=sheet_from_array_of_arrays(g)}catch(e){}}else if(("datagrid"==p.m_objecttype||"scorecard"==p.m_objecttype||"chart"==p.m_objecttype||"funnel"==p.m_objecttype)&&(n.showChartData=new ShowChartData(p),IsBoolean(p.m_isDataSetavailable))&&!IsBoolean(p.m_isEmptySeries)&&(void 0===e||-1<e.indexOf(p.m_referenceid)))try{s++;for(w=n.getExcelData(p),b=0;b<w[0].length;b++)try{var k,S=(k=w[0][b].replace(/_/g," ")).charAt(0).toUpperCase()+k.slice(1);w[0][b]=S}catch(e){}h=0<f.length?(m=[["Filters"]],[[""],["Data"]]):(m=[["Data"]],[]),g=m.concat(f,h,w),x=void 0!==t&&t[d]?t[d]:p.m_referenceid;try{-1<n.m_titleArray.indexOf(x)&&(x+=c,c++),n.m_titleArray.push(x)}catch(e){x=p.m_referenceid}i.SheetNames.push(x),i.Sheets[x]=sheet_from_array_of_arrays(g)}catch(e){}}else{for(var x=n.m_excelsheetname,F=[],d=0;d<n.m_dashboard.m_widgetsArray.length;d++){D=n.m_dashboard.m_widgetsArray[d];if(n.showChartData=new ShowChartData(D),void 0!==n.m_dashboard.m_widgetsArray[d].m_repeaterCharts&&0<n.m_dashboard.m_widgetsArray[d].m_repeaterCharts.length)for(v=0;v<n.m_dashboard.m_widgetsArray[d].m_repeaterCharts.length;v++){var I,D=n.m_dashboard.m_widgetsArray[d].m_repeaterCharts[v];n.showChartData=new ShowChartData(D),IsBoolean(D.m_isDataSetavailable)&&!IsBoolean(D.m_isEmptySeries)&&(void 0===e||-1<e.indexOf(n.m_dashboard.m_widgetsArray[d].m_repeaterCharts[v].m_objectid))&&(F[I=F.length]=[],F[I][0]=[],F[I][0]=D.m_referenceid,s++,w=n.getExcelData(D),(F=F.concat(w))[F.length]=[])}else IsBoolean(D.m_isDataSetavailable)&&!IsBoolean(D.m_isEmptySeries)&&(void 0===e||-1<e.indexOf(n.m_dashboard.m_widgetsArray[d].m_objectid))&&(F[I=F.length]=[],F[I][0]=[],F[I][0]=D.m_referenceid,s++,w=n.getExcelData(D),(F=F.concat(w))[F.length]=[])}i.SheetNames.push(x),i.Sheets[x]=sheet_from_array_of_arrays(F)}0<s?downloadXLSX(i,r):alertPopUpModal({type:"error",message:"Error occurred. No data available to download",timeout:"3000"}),hideBlockUILoader()},this.resetContext=function(){r=[]},this.removeContext=function(e){if(-1<$.inArray(e,t))throw o.errors.cannot_delete+" ("+e+")";delete r[e]},this.getContext=function(e){return r[e]},this.getContextMap=function(){return r},this.addContextExceptionKey=function(e){t.push(e)},this.getUserCustomProperty=function(t){var e,a;return e=r.dashboard_customproperties&&0<(a=r.dashboard_customproperties.filter(function(e){return e.key==t?e.value:""})).length?a[a.length-1].value:e},this.showComponent=function(e){this.changeVisibility(e,!0)},this.hideComponent=function(e){this.changeVisibility(e,!1)},this.hideAllComponentExcept=function(e){this.changeVisibilityExcept(this.dashboard,e,!1)},this.showAllComponentExcept=function(e){this.changeVisibilityExcept(this.dashboard,e,!0)},this.toggleComponents=function(e,t,a){null==this.getContext(a=null==a?"toggleComps":a)&&this.addContext(a,"arr1"),"arr1"==this.getContext(a)?(this.changeVisibility(e,!0),this.changeVisibility(t,!1),this.addContext(a,"arr2")):(this.changeVisibility(e,!1),this.changeVisibility(t,!0),this.addContext(a,"arr1"))},this.toggleGroups=function(e,t,a){null==this.getContext(a=null==a?"toggleComps":a)&&this.addContext(a,"arr1");var r=this;"arr1"==this.getContext(a)?(e.map(function(e){r.showGroup(e)}),t.map(function(e){r.hideGroup(e)}),this.addContext(a,"arr2")):(e.map(function(e){r.hideGroup(e)}),t.map(function(e){r.showGroup(e)}),this.addContext(a,"arr1"))},this.updateGlobalVariable=function(e,t,a){if(d()&&""!=this.dashboard)try{var r=h(this.dashboard.m_GlobalVariable.m_Variable,"m_key",e);if(null!=r){for(var o in t)if(t.hasOwnProperty(o))try{r.map[o]=t[o]}catch(e){}return null!=a&&IsBoolean(a)&&r.notify(),r.toSimplifiedObject()}}catch(e){}},this.getGlobalVariable=function(e){if(d()){e=h(this.dashboard.m_GlobalVariable.m_Variable,"m_key",e);if(null!=e)return e.toSimplifiedObject()}},this.executeScript=function(e,t){this.updateGlobalVariable(e,t,!0)},this.resetGlobalVariable=function(e,t,a){if(d()&&""!=this.dashboard){e=h(this.dashboard.m_GlobalVariable.m_Variable,"m_key",e);if(null!=e)return e.map={},null!=a&&a&&e.notify(),e.toSimplifiedObject()}},this.changeDashboardBGColor=function(e){d()&&(this.dashboard.m_AbsoluteLayout.m_gradients=e,this.dashboard.m_AbsoluteLayout.drawAbsoluteCanvas())},this.changeBGColor=function(e,t){d()&&null!=(e=this.getWidget(e))&&(t=g(t),e.m_gradients?e.m_gradients=t.join(","):e.m_bggradients&&(e.m_bggradients=t.join(",")),e.draw())},this.reload=function(e){if(d())try{e=g(e);var t=m(this.dashboard.m_DataProviders.m_dataurl,"m_id",e);l(t)}catch(e){throw o.errors.generic}},this.reloadAll=function(){if(d())try{l(this.dashboard.m_DataProviders.m_dataurl)}catch(e){throw o.errors.generic}},this.autoReload=function(){if(d())try{var a=this.lastChangedItem,e=this.dashboard.m_DataProviders.m_dataurl;e&&$.each(e,function(e,t){n(t,a)&&("ds"===t.m_type?(null!=dataManager&&dataManager.handleTimelyRefresh(t,frameworkController.setXMLResponseForDs.bind(frameworkController)),t.getDataFromConnection(t.getDataSetValues(),frameworkController.setXMLResponseForDs.bind(frameworkController))):(null!=dataManager&&dataManager.handleTimelyRefresh(t,frameworkController.setXMLResponse.bind(frameworkController)),t.getDataFromConnection(t.getDataSetValues(),frameworkController.setXMLResponse.bind(frameworkController))))})}catch(e){throw o.errors.generic}},this.reloadDataset=function(e){if(d())try{e=g(e);var t=[];if("string"==typeof e)(t=m(this.dashboard.m_dataSetsArray,"m_id",e))&&$.each(t,function(e,t){t.getDataStore()&&t.refreshDataFromConnection(frameworkController.renderComponentsWithDataSet)});else if("object"==typeof e)for(var a=0;a<e.length;a++)(t=m(this.dashboard.m_dataSetsArray,"m_id",[e[a]]))&&$.each(t,function(e,t){t.getDataStore()&&t.refreshDataFromConnection(frameworkController.renderComponentsWithDataSet)})}catch(e){throw o.errors.generic}},this.clearTimelyRefresh=function(e){if(null!=dataManager)if(""===e)dataManager.clearAllTimelyRefresh();else for(var t=0;t<e.length;t++)dataManager.clearTimelyRefresh(e[t])},this.getWidget=function(e){return h(this.dashboard.m_widgetsArray,"m_referenceid",e)},this.getWidgetByName=function(t){var e=$.grep(this.dashboard.m_widgetsArray,function(e){return e.m_objectname==t});return 0<e.length?e:void 0},this.getWidgetByType=function(t){var e=$.grep(this.dashboard.m_widgetsArray,function(e){return e.m_objecttype==t});return 0<e.length?e:void 0},this.getWidgetById=function(t){var e=$.grep(this.dashboard.m_widgetsArray,function(e){return"draggableDiv"+e.m_objectid==t});return 0<e.length?e:void 0},this.getWidgetByClass=function(t){var e=$.grep(this.dashboard.m_widgetsArray,function(e){return-1<e.m_objectclass.split(" ").indexOf(t)});return 0<e.length?e:void 0},this.getWidgetByAttribute=function(t,a){var r={"data-id":"m_referenceid","data-name":"m_objectname","data-type":"m_objecttype"},e=$.grep(this.dashboard.m_widgetsArray,function(e){return e[r[t]]==a});return 0<e.length?e:void 0},this.getChartContextHash=function(e){e=this.getWidget(e);return e&&e.ctx?{message:"success",data:e.ctx.hash({loose:!0})}:{message:"failure",data:""}},this.getChartCanvasDataUrl=function(e){e=this.getWidget(e);return e&&e.draggableCanvas&&e.draggableCanvas[0]?{message:"success",data:e.draggableCanvas[0].toDataURL()}:{message:"failure",data:""}},this.getValue=function(e){if(d()){e=this.getWidget(e);if(null!=e&&"function"==typeof e.getDataProvider)return e.getDataProvider()}},this.setValue=function(e,t,a){if(d()){e=this.getWidget(e);if(null!=e)try{e.setDataProvider(t),"hslider"==e.m_objecttype||"vslider"==e.m_objecttype?e.setDataProvider(+t-+e.m_minimum):e.setDataProvider(t),!a||"bullet"!=e.m_objecttype&&"gauge"!=e.m_objecttype&&"semigauge"!=e.m_objecttype&&"date"!=e.m_objecttype&&"URLButton"!=e.m_objecttype||e.setTargetValue(a),e.drawObject()}catch(e){}}},this.createHorizontalSlices=function(e,t,a){d()&&null!=(e=this.getWidget(e))&&"rectangle"==e.m_componenttype&&e.fillHorizontalStack(t,a)},this.createVerticalSlices=function(e,t,a){d()&&null!=(e=this.getWidget(e))&&"rectangle"==e.m_componenttype&&e.fillVerticalStack(t,a)},this.fillHorizontalByPercentage=function(e,t){d()&&null!=(e=this.getWidget(e))&&"rectangle"==e.m_componenttype&&e.fillHorizontalByPercentage(t)},this.fillVerticalByPercentage=function(e,t){d()&&null!=(e=this.getWidget(e))&&"rectangle"==e.m_componenttype&&e.fillVerticalByPercentage(t)},this.getDivElementFromComponetId=function(e){e=this.getWidget(e);if(null!=e)return $("#draggableDiv"+e.m_objectId)[0]},this.getDivIdFromComponetId=function(e){e=this.getWidget(e);if(null!=e)return"draggableDiv"+e.m_objectId},this.applyStyle=function(e,t,a){$(e).css(t,a)},this.applyGroupStyles=function(e,t){for(var a=0;a<e.length;a++){var r=".g_"+e[a];$(r).css(t)}},this.applyStyles=function(e,t){$(e).css(t)},this.setAfterRenderCallBack=function(e,t){this.getWidget(e).m_onafterrendercallback=t},this.setBestFitLine=function(e,t){var a=sdk.getWidget(e);if(void 0!==a)try{for(var r=0;r<a.m_dataset.Fields.length;r++)for(var o=0;o<t.length;o++)a.m_dataset.Fields[r].Name===t[o].FieldName&&(a.m_dataset.Fields[r].BestFitLine=t[o].EnableLine,a.m_dataset.Fields[r].BestFitLineWidth=t[o].LineWidth,a.m_dataset.Fields[r].BestFitLineColor=t[o].LineColor,a.m_dataset.Fields[r].BestFitLineType=t[o].LineType)}catch(e){}},this.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},this.setTop=function(e,t){e=this.getWidget(e);null!=e&&$("#draggableDiv"+e.m_objectId).css({top:t+"px"})},this.setLeft=function(e,t){e=this.getWidget(e);null!=e&&$("#draggableDiv"+e.m_objectId).css({left:t+"px"})},this.getTop=function(e){e=this.getWidget(e);if(null!=e)return $("#draggableDiv"+e.m_objectId).css("top")},this.getLeft=function(e){e=this.getWidget(e);if(null!=e)return $("#draggableDiv"+e.m_objectId).css("left")},this.applyGroupToComponent=function(e,t){var a=this,r=(t=g(t),0),o="g_"+e;return $.each(t,function(e,t){t=a.getDivIdFromComponetId(t);$("#"+t).addClass(o),r++}),0<r&&this.dashboard.pushUniqueToAvailableGroups(o),0<r},this.removeGroupFromComponent=function(e,t){var a=this,r=(t=g(t),0),o="g_"+e;return $.each(t,function(e,t){t=a.getDivIdFromComponetId(t);$("#"+t).removeClass(o),r++}),0<r},this.hideGroup=function(e){var a=this;if("string"==typeof e)$(".g_"+e).each(function(e){var t=$.data(this,"referenceID");a.hideComponent(t)});else if("object"==typeof e)for(var t=0;t<e.length;t++)$(".g_"+e[t]).each(function(e){var t=$.data(this,"referenceID");a.hideComponent(t)})},this.showGroup=function(e){var a=this;if("string"==typeof e)$(".g_"+e).each(function(e){var t=$.data(this,"referenceID");a.showComponent(t)});else if("object"==typeof e)for(var t=0;t<e.length;t++)$(".g_"+e[t]).each(function(e){var t=$.data(this,"referenceID");a.showComponent(t)})},this.getAllGroups=function(){if(d())return this.dashboard.getAllGroups()},this.changeVisibilityExcept=function(e,a,r){var o;d()&&(o=""==a||null==a,a=g(a),$.each(this.dashboard.m_widgetsArray,function(e,t){!o&&c(t.m_referenceid,a)?r?t.hideWidget():t.showWidget():r?t.showWidget():t.hideWidget()}))},this.changeVisibility=function(e,t){if(d()){e=g(e);for(var a=0;a<e.length;a++)try{var r=this.getWidget(e[a]);null!=r&&(t?r.showWidget():r.hideWidget())}catch(e){}}},this.setGraphicsProperty=function(e,t,a){d()&&null!=(e=this.getWidget(e))&&"svg_shape"==e.m_componenttype&&(e["m_"+t]=a,e.draw())},this.getGraphicsProperty=function(e,t){if(d()){e=this.getWidget(e);if(null!=e&&"svg_shape"==e.m_componenttype)return e["m_"+t]}},this.freezeHeader=function(e){for(i=0;i<e.length;i++){for(var t=e[i],o=$(".g_"+t),n={},a=$(".draggablesParentDiv").offset(),r=this.dashboard.m_widgetsArray.length-i,s=0;s<o.length;s++){var l=$(o[s]).position(),c=($(o[s])[0]&&"none"==$(o[s])[0].style.display&&($(o[s])[0].style.display="block",l=$(o[s]).position(),$(o[s])[0].style.display="none"),+l.left+ +a.left);n[o[s].id]=+l.left,sdk.applyStyles(o[s],{position:"fixed",left:c+"px","z-index":r})}$(document).scroll(function(e){for(var t=$(".draggablesParentDiv").offset(),a=0;a<o.length;a++){var r=n[o[a].id]+ +t.left-$(window).scrollLeft();$(o[a]).css("left",r)}}),$(window).resize(function(){for(var e=$(".draggablesParentDiv").offset(),t=0;t<o.length;t++){var a=n[o[t].id]+ +e.left-$(window).scrollLeft();$(o[t]).css("left",a)}})}},this.applyDatasetToRadioButton=function(e,t,a){var r=this.getWidget(e);if(null!=r&&null!=t&&null!=a&&(r.m_values=[],this.isArray(t))){for(var o=0;o<t.length;o++){var n=new Values;n.setLabel(t[o][a.labelField]),n.setValue(t[o][a.valueField]),n.setUncheckedValue(void 0),r.m_values.push(n)}r.draw()}},this.getComponentDataset=function(e){var t=this.getWidget(e);if(t&&""!=t.m_datasetid)for(var a=0;a<this.dashboard.m_dataSetsArray.length;a++)if(this.dashboard.m_dataSetsArray[a].m_id==t.m_datasetid)return this.dashboard.m_dataSetsArray[a]},this.applyFieldUpdates=function(e,t){var a=this.getComponentDataset(e);if(a)for(var r=0;r<a.m_fieldsJson.length;r++)for(var o=0;o<t.length;o++)if(a.m_fieldsJson[r].Name==t[o].name)for(var n in t[o].properties)if(t[o].properties.hasOwnProperty(n))if("object"==typeof t[o].properties[n])for(var i in t[o].properties[n])t[o].properties[n].hasOwnProperty(i)&&(a.m_fieldsJson[r][n][i]=t[o].properties[n][i]);else a.m_fieldsJson[r][n]=t[o].properties[n]},this.applyChartUpdates=function(r,o){try{$.each(this.dashboard.m_widgetsArray,function(e,t){if(c(t.m_referenceid,r))for(var a in o)o.hasOwnProperty(a)&&(t[a]=o[a])})}catch(e){}},this.applyAutoManipulator=function(e,t,a,r,o){var n=this.getComponentDataset(e);n&&null!=t&&null!=a&&null!=r&&null!=o&&(t=(""+t).split(","),n.m_AutoManipulator.m_enable=!0,n.m_AutoManipulator.m_categorygroup=t[0],n.m_AutoManipulator.m_subcategorygroup=t[1],n.m_AutoManipulator.m_seriesgroup=a,n.m_AutoManipulator.m_valuefield=r,(t=this.getWidget(e)).m_categoryColors||(t.m_categoryColors=new CategoryColors),t.m_categoryColors.m_categorydefaultcolorset=o,t.m_categoryColors.m_categorydefaultcolor="#F89406",t.m_categoryColors.m_showcolorsfromcategoryname=!1)},this.removeAutoManipulator=function(e){e=this.getComponentDataset(e);e&&(e.m_AutoManipulator.m_enable=!1,e.m_AutoManipulator.m_categorygroup="",e.m_AutoManipulator.m_subcategorygroup="",e.m_AutoManipulator.m_seriesgroup="",e.m_AutoManipulator.m_valuefield="")},this.applyAggregation=function(e,t,a,r){e=this.getComponentDataset(e);e&&null!=t&&null!=a&&null!=r&&(e.m_Aggregation.m_enable=!0,e.m_Aggregation.m_groupbynode=t,e.m_Aggregation.m_summaryfields=a,e.m_Aggregation.m_summaryoperations=r)},this.removeAggregation=function(e){e=this.getComponentDataset(e);e&&(e.m_Aggregation.m_enable=!1,e.m_Aggregation.m_groupbynode="",e.m_Aggregation.m_summaryfields="",e.m_Aggregation.m_summaryoperations="")},this.applyDataSetFilter=function(e,t){e=this.getComponentDataset(e);e&&(null!=t&&""!=t?"string"==typeof t?e.m_DataSetFilter.m_conditionsArr=t.split(","):"object"==typeof t&&(e.m_DataSetFilter.m_conditionsArr=t):"string"==typeof t&&(e.m_DataSetFilter.m_conditionsArr=t))},this.updateFilterChips=function(e){for(var t=this.getWidget(e),a=(t.m_removedChipParentValues=[],t.m_savedfilterschips=[],[]),r=0;r<t.m_assignedfilters.length;r++){var o=t.getChartObjectById(t.m_assignedfilters[r]),n=[];if(null!=o)switch(o.m_componenttype){case"combo_filter":for(var i=0;i<o.staticOptsValue.length;i++){var s=getStringARSC(o.staticOptsValue[i])+"-"+i,l=o.staticOptsValue[i],c=o.displayField[i];((o.m_checkboxstatus[s]||t.m_savedtext.includes(c))&&"multiselect"==o.m_selectiontype||o.m_checkboxstatus[s])&&(t.m_savedfilterschips.push({key:c,value:l,objectid:t.m_assignedfilters[r],objecttype:"combo_filter"}),a.push(c),n.push(c))}t.m_filterDisplayValues[t.m_assignedfilters[r]]=n;break;case"list_filter":for(i=0;i<o.value.length;i++){s=getStringARSC(o.value[i])+"-"+i,l=o.value[i],c=o.displayField[i];((o.m_checkboxstatus[s]||t.m_savedtext.includes(c))&&"multiselect"==o.m_selectiontype||o.m_checkboxstatus[s]||o.m_checkboxstatus[l]||o.m_updateFilterList.includes(l))&&(t.m_savedfilterschips.push({key:c,value:l,objectid:t.m_assignedfilters[r],objecttype:"list_filter"}),a.push(c),n.push(c))}t.m_filterDisplayValues[t.m_assignedfilters[r]]=n;break;case"radio_filter":i=o.m_selectedindex,s=getStringARSC(o.m_referenceid)+"-"+i,l=o.fieldNameValueMap.Value,c=o.fieldNameValueMap.Label;t.m_savedfilterschips.push({key:c,value:l,objectid:t.m_assignedfilters[r],objecttype:"radio_filter"}),t.m_filterDisplayValues[t.m_assignedfilters[r]]=n;break;case"hierarchical_combo":if(IsBoolean(o.m_allowmultipleselection))for(var d=0;d<o.finalArray.length;d++)o.m_currentIndexSelect.includes(o.finalArray[d].id.toString())&&(l=o.finalArray[d].name,c=o.finalArray[d].name,t.m_savedfilterschips.push({key:c,value:l,objectid:t.m_assignedfilters[r],objecttype:"hierarchical_combo"}),t.m_savedtext.push(c),a.push(c),n.push(c));else for(i=0;i<o.selectedRecordArray.length;i++){l=o.selectedRecordArray[i],c=o.selectedRecordArray[i];t.m_savedfilterschips.push({key:c,value:l,objectid:t.m_assignedfilters[r],objecttype:"hierarchical_combo"}),t.m_savedtext.push(c),a.push(c),n.push(c)}t.m_filterDisplayValues[t.m_assignedfilters[r]]=n;break;case"date_picker":var m,h,s=getStringARSC(o.m_referenceid);0!=o.m_nodefaultdate&&!o.fieldNameValueMap||(c=o.fieldNameValueMap?(l=o.fieldNameValueMap.Value,o.fieldNameValueMap.Value):(m=(new Date).toLocaleDateString(),l=(h=this.getWidget(s)).getFormattedDate(m,o.m_formatstring),h.getFormattedDate(m,o.m_formatstring)),t.m_savedfilterschips.push({key:c,value:l,objectid:t.m_assignedfilters[r],objecttype:"date_picker"}),a.push(c),n.push(c))}}t.m_savedtext=a,t.drawObject()},this.updateDashboardTheme=function(e){if(d())for(var t="dark"==e?{dashboard:{bgColor:"#000000",opacity:"1"},component:{bgColor:"#262626",bgBorderColor:"#262626",titleBgColor:"#262626,#262626",opacity:"1",fontColor:"#FFFFFF",selectionColor:"#317BDB",selectionFontColor:"#FFFFFF",axisFontColor:"#EAEAEA",axisLabelFontColor:"#EAEAEA",axisLineColor:"#EFF0F0"}}:{dashboard:{bgColor:"#FFFFFF",opacity:"1"},component:{bgColor:"#FFFFFF",bgBorderColor:"#EFF0F0",titleBgColor:"#EFF0F0,#EFF0F0",opacity:"1",fontColor:"#000000",selectionColor:"#FFFFFF",selectionFontColor:"#000000",axisFontColor:"#000000",axisLabelFontColor:"#494950",axisLineColor:"#EFF0F0"}},a=(this.dashboard.m_AbsoluteLayout.m_gradients=t.dashboard.bgColor,this.dashboard.m_AbsoluteLayout.drawAbsoluteCanvas(),this.dashboard.m_dashboardjson.Niv.Dashboard.AbsoluteLayout.Object),r=0;r<a.length;r++){var o=this.getWidget(a[r].referenceID);if(null!=o)switch(colors=t.component.bgColor,o.m_gradients?o.m_gradients=colors:o.m_bggradients&&(o.m_bggradients=colors),a[r].objectType){case"chart":o.m_bordercolor=t.component.bgBorderColor,o.m_title.m_fontcolor&&(o.m_title.m_fontcolor=t.component.fontColor),o.m_fontcolor&&(o.m_fontcolor=t.component.fontColor),o.m_gradientcolor=t.component.titleBgColor,o.m_xAxis&&(o.m_xAxis.m_fontcolor=t.component.axisFontColor,o.m_xAxis.m_labelfontcolor=t.component.axisLabelFontColor,o.m_xAxis.m_lineaxiscolor=t.component.axisLineColor),o.m_yAxis&&(o.m_yAxis.m_fontcolor=t.component.axisFontColor,o.m_yAxis.m_labelfontcolor=t.component.axisLabelFontColor,o.m_yAxis.m_lineaxiscolor=t.component.axisLineColor),o.draw();break;case"filter":o.m_selectioncolor=t.component.selectionColor,o.m_selectionfontcolor=t.component.selectionFontColor,o.m_fontcolor=t.component.fontColor,o.m_bgcolor=t.component.bgColor,o.m_backgroundcolor=t.component.bgColor,o.m_chromecolor=t.component.bgColor,o.draw();break;case"datagrid":o.m_headerchromecolor=t.component.bgColor,o.m_headerfontcolor=t.component.fontColor,o.m_title.m_gradientColor=t.component.bgColor,o.m_title.m_fontcolor=t.component.fontColor,o.draw();break;case"label":o.m_color=t.component.fontColor,o.m_backgroundcolor=t.component.bgColor,o.draw();break;default:o.m_fontcolor&&(o.m_fontcolor=t.component.fontColor),o.m_bgcolor&&(o.m_bgcolor=t.component.bgColor),o.m_color&&(o.m_color=t.component.fontColor),o.m_backgroundcolor&&(o.m_backgroundcolor=t.component.bgColor),o.m_chromecolor&&(o.m_chromecolor=t.component.bgColor),o.draw()}}},this.applyDrill=function(e,t,a){this.dashboard.m_drillcomps=e,this.dashboard.m_dataobj=t,this.dashboard.m_drillcomp=t.drillComponent,e=g(e);for(var r=0;r<e.length;r++){var o,n=this.getWidget(e[r]),i=(comp=n.m_componenttype,t.drillIndex);for(o in t)if("group_bar_chart"==t.drillComponent.fieldNameValueMap.drillComponent.chartJson.componentType||"group_column_chart"==t.drillComponent.fieldNameValueMap.drillComponent.chartJson.componentType){if(IsBoolean(t.drillComponent.m_subCategoryVisibleArr[o])){var s=t[o],l=o;break}}else if("scattered_plot_chart"==t.drillComponent.fieldNameValueMap.drillComponent.chartJson.componentType){if(IsBoolean(t.drillComponent.m_seriesVisibleArr[o])){s=t[o],l=o;break}}else if(IsBoolean(t.drillComponent.m_categoryVisibleArr[o])){s=t[o],l=o;break}switch(comp){case"bar_chart":for(var c=0;c<n.m_noofseries;c++)for(var d=0;d<n.m_categoryData[0].length;d++)t.drillComponent.m_categoryData[0].length==n.m_dataProvider.length?d==i||n.m_dataProvider[d][l]==s||IsBoolean(t.drillComponent.m_drilltoggle)?$("#stackgrp"+n.m_objectid+"s"+c+"c"+d).css("opacity","1"):$("#stackgrp"+n.m_objectid+"s"+c+"c"+d).css("opacity","0.5"):n.m_dataProvider[d][l]==s||IsBoolean(t.drillComponent.m_drilltoggle)?$("#stackgrp"+n.m_objectid+"s"+c+"c"+d).css("opacity","1"):$("#stackgrp"+n.m_objectid+"s"+c+"c"+d).css("opacity","0.5");break;case"bubble_chart":for(c=0;c<n.m_seriesData[0].length;c++)for(d=0;d<n.m_categoryData.length;d++)t.drillComponent.m_categoryData.length==n.m_dataProvider.length?d==i||n.m_dataProvider[d][l]==s||IsBoolean(t.drillComponent.m_drilltoggle)?n.m_transparencyarr[c][d]=1:n.m_transparencyarr[c][d]=.5:n.m_dataProvider[d][l]==s||IsBoolean(t.drillComponent.m_drilltoggle)?n.m_transparencyarr[c][d]=1:n.m_transparencyarr[c][d]=.5;n.initializeBubble(),n.drawChart();break;case"timeline_chart":n.m_drillcomptoggle=t.drillComponent.m_drilltoggle,n.m_slidercatarr=[];for(c=0;c<n.m_seriesData.length;c++)for(d=0;d<n.SerData[0].length;d++){var m=void 0!==n.m_columnSeries[n.m_seriesNames[c]]?"topRoundedStack"+n.svgContainerId+c+d:"linestack"+n.svgContainerId+c+d,h=void 0!==n.m_columnSeries[n.m_seriesNames[c]]?"topRoundedStack_stackgrpslider"+n.svgContainerId+c+d:"linestack"+n.svgContainerId+c+d;IsBoolean(!n.m_showslider)?t.drillComponent.m_categoryData[0].length==n.m_dataProvider.length?(m=void 0!==n.m_columnSeries[n.m_seriesNames[c]]?"topRoundedStack"+n.svgContainerId+c+d:"linestack"+n.svgContainerId+c+d,d==i||n.m_dataProvider[d][l]==s||IsBoolean(t.drillComponent.m_drilltoggle)?$("#"+m).css("opacity","1"):$("#"+m).css("opacity","0.5")):n.m_dataProvider[d][l]==s||IsBoolean(t.drillComponent.m_drilltoggle)?$("#"+m).css("opacity","1"):$("#"+m).css("opacity","0.5"):t.drillComponent.m_categoryData[0].length==n.m_dataProvider.length?d==i||n.m_dataProvider[d][l]==s?($("#"+m).css("opacity","1"),$("#"+h).css("opacity","1"),n.m_slidercatarr.push(d)):IsBoolean(t.drillComponent.m_drilltoggle)?($("#"+m).css("opacity","1"),$("#"+h).css("opacity","1")):($("#"+m).css("opacity","0.5"),$("#"+h).css("opacity","0.5"),n.m_slidercatarr.push(d)):n.m_dataProvider[d][l]==s?($("#topRoundedStack"+n.svgContainerId+c+d).css("opacity","1"),$("#topRoundedStack_stackgrpslider"+n.svgContainerId+c+d).css("opacity","1"),n.m_slidercatarr.push(d)):IsBoolean(t.drillComponent.m_drilltoggle)?($("#topRoundedStack"+n.svgContainerId+c+d).css("opacity","1"),$("#topRoundedStack_stackgrpslider"+n.svgContainerId+c+d).css("opacity","1")):($("#topRoundedStack"+n.svgContainerId+c+d).css("opacity","0.5"),$("#topRoundedStack_stackgrpslider"+n.svgContainerId+c+d).css("opacity","0.5"),n.m_slidercatarr.push(d))}break;case"group_bar_chart":case"group_column_chart":for(c=0;c<n.m_seriesData.length;c++)for(d=0;d<n.m_categoryData[0].length;d++)t.drillComponent.m_categoryData[0].length==n.m_dataProvider.length?d==i||n.m_dataProvider[d][l]==s||n.m_categoryData[0][d]==s||IsBoolean(t.drillComponent.m_drilltoggle)?$("#stackgrp"+n.m_objectid+c+d).css("opacity","1"):$("#stackgrp"+n.m_objectid+c+d).css("opacity","0.5"):n.m_dataProvider[d][l]==s||n.m_categoryData[0][d]==s||IsBoolean(t.drillComponent.m_drilltoggle)?$("#stackgrp"+n.m_objectid+c+d).css("opacity","1"):$("#stackgrp"+n.m_objectid+c+d).css("opacity","0.5");break;case"scattered_plot_chart":for(c=0;c<n.m_seriesData.length;c++)for(d=0;d<n.m_categoryData[0].length;d++)t.drillComponent.m_categoryData[0].length==n.m_dataProvider.length?d==i||n.m_dataProvider[d][l]==s||IsBoolean(t.drillComponent.m_drilltoggle)?$("#scatterplot"+n.m_objectid+c+d).css("opacity","1"):$("#scatterplot"+n.m_objectid+c+d).css("opacity","0.5"):n.m_dataProvider[d][l]==s||IsBoolean(t.drillComponent.m_drilltoggle)?$("#scatterplot"+n.m_objectid+c+d).css("opacity","1"):$("#scatterplot"+n.m_objectid+c+d).css("opacity","0.5");break;case"mixed_chart":for(c=0;c<n.m_seriesData[0].length;c++)for(d=0;d<n.m_seriesNames.length;d++)t.drillComponent.m_categoryData.length==n.m_dataProvider.length?c==i||n.m_dataProvider[c][l]==s||IsBoolean(t.drillComponent.m_drilltoggle)?n.m_transparencyarr[n.m_seriesNames[d]][c]=1:n.m_transparencyarr[n.m_seriesNames[d]][c]=.5:n.m_dataProvider[c][l]==s||IsBoolean(t.drillComponent.m_drilltoggle)?n.m_transparencyarr[n.m_seriesNames[d]][c]=1:n.m_transparencyarr[n.m_seriesNames[d]][c]=.5;n.instanciateSeries(n.seriesDataMap),n.drawChart();break;case"line_chart":for(c=0;c<n.m_seriesData[0].length;c++)for(d=0;d<n.m_seriesNames.length;d++)t.drillComponent.m_categoryData.length==n.m_dataProvider.length?c==i||n.m_dataProvider[c][l]==s||IsBoolean(t.drillComponent.m_drilltoggle)?n.m_transparencyarr[n.m_seriesNames[d]][c]=1:n.m_transparencyarr[n.m_seriesNames[d]][c]=.5:n.m_dataProvider[c][l]==s||IsBoolean(t.drillComponent.m_drilltoggle)?n.m_transparencyarr[n.m_seriesNames[d]][c]=1:n.m_transparencyarr[n.m_seriesNames[d]][c]=.5;n.initializeCalculation(),n.drawChart();break;case"column_stack_chart":for(c=0;c<n.m_seriesData[0].length;c++)for(d=0;d<n.m_seriesNames.length;d++)t.drillComponent.m_categoryData.length==n.m_dataProvider.length?c==i||n.m_dataProvider[c][l]==s||IsBoolean(t.drillComponent.m_drilltoggle)?n.m_transparencyarr[n.m_seriesNames[d]][c]=1:n.m_transparencyarr[n.m_seriesNames[d]][c]=.5:n.m_dataProvider[c][l]==s||IsBoolean(t.drillComponent.m_drilltoggle)?n.m_transparencyarr[n.m_seriesNames[d]][c]=1:n.m_transparencyarr[n.m_seriesNames[d]][c]=.5;n.m_stackWidth=n.m_calculation.getBarWidth(),n.initializeColumns(),n.drawChart()}}"column_stack_chart"!=t.drillComponent.m_componenttype&&"line_chart"!=t.drillComponent.m_componenttype&&"mixed_chart"!=t.drillComponent.m_componenttype&&"bubble_chart"!=t.drillComponent.m_componenttype||(t.drillComponent.m_drilltoggle=!0)},this.removeDataSetFilter=function(e){e=this.getComponentDataset(e);e&&(e.m_DataSetFilter.m_conditionsArr="")},this.appendRows=function(e,t){e=this.getComponentDataset(e);if(e&&null!=t&&""!=t&&"object"==typeof t)try{e.setAppendRowsEnable(!0),e.setAppendRows(t)}catch(e){}},this.updateDatasetOperationOrder=function(e,a){var r;e&&(r=this,$.each(e,function(e,t){t=r.getComponentDataset(t);t&&t.setOperationOrder(a)}))},this.sortData=function(e,t,a,r){try{this.applyArraySort(this.getGlobalVariable(e).attributes.data,t,a,r);var o=h(this.dashboard.m_DataProviders.m_dataurl,"m_id",e);if(o)for(var n=0;n<o.m_associateddataset.length;n++)this.reloadDataset(o.m_associateddataset[n].id)}catch(e){}},this.applyArraySort=function(e,t,a,r){try{var o="desc"!=a.toLowerCase(),n=r?parseFloat:void 0;e.sort(s(t,!o,n))}catch(e){}},this.getAggregatedDataSet=function(e,t,a,r){if(null==e)return{};var o=e;try{if(null==t&&null==a&&null==r)return V(o);if(null!=t&&""!=t&&null==r&&""!=r&&""!=a){switch(t.split(",")[0].toLowerCase()){case"sum":return V(o);case"avg":for(var n,i=o,s={},l=0;l<i.length;l++)for(var c in i[l]){s[c]||(s[c]=0);var d=getNumericComparableValue(i[l][c]);null==d||null===d||""===d||"null"==d||isNaN(d)||0==d.length||(s[c]=+s[c]+ +d)}for(n in s)0!=s&&0!=i.length&&(s[n]=(s[n]/i.length).toFixed(2));return s;case"max":if(null==a){for(var m=o,h={},g=0;g<m.length;g++)for(var u in m[g]){var p=getNumericComparableValue(m[g][u]);h[u]||(h[u]=p),null==p||null===p||""===p||"null"==p||isNaN(p)||0==p.length||+h[u]<=+p&&(h[u]=+p)}return h}for(var f=o,_=a,b={},y=0;y<f.length;y++)for(var C in f[y]){var v=getNumericComparableValue(f[y][C]);b[C]||(b[C]=v),null==v||null===v||""===v||"null"==v||isNaN(v)||0==v.length||C!=_||+v>=+b[C]&&(b=f[y])}return b;case"min":if(null==a){for(var D=o,w={},S=0;S<D.length;S++)for(var k in D[S]){var x=getNumericComparableValue(D[S][k]);w[k]||(w[k]=x),null==x||null===x||""===x||"null"==x||isNaN(x)||0==x.length||+x<=w[k]&&(w[k]=+x)}return w}for(var F=o,M=a,I={},A=0;A<F.length;A++)for(var B in F[A]){var P=getNumericComparableValue(F[A][B]);I[B]||(I[B]=P),null==P||null===P||""===P||"null"==P||isNaN(P)||0==P.length||B!=M||+P<=I[B]&&(I=F[A])}return I;case"count":for(var $=o,j={},L=0;L<$.length;L++)for(var N in $[L])j[N]||(j[N]=0),j[N]=$.length;return j;default:return V(o)}return o(o)}}catch(e){}return o},this.setPieIndicator=function(e,t,a,r){var o,n=this.getWidget(e);if(n&&"Pie"==n.m_type){try{var i=n.m_seriescolor.split(",");if(i.length<r.length)for(var s=i.length,l=0;s<r.length;s++,l++)i[s]=i[l];for(var c=0;c<r.length;c++)if(a)for(var d=0;d<a.length;d++)r[c][t]==a[d].name&&(i[c]=a[d].color);n.m_seriescolor=i.join(",")}catch(e){}try{a&&n.getCategoryColors()&&(n.getCategoryColors().categoryColorsObject=n.getCategoryColors().categoryColorsObject||{},o=n.getCategoryColors().categoryColorsObject,a.map(function(e){o[e.name]=e.color}),this.setCategoryColors(e,o))}catch(e){}}},this.setCategoryColors=function(e,t){e=this.getWidget(e);if(e)try{var a,r=[];if(IsBoolean(e.m_isrepeater)){if(e.chartJson&&e.chartJson.Chart&&e.chartJson.Chart.CategoryColors){for(var o in t)t.hasOwnProperty(o)&&r.push({categoryName:o,color:t[o],seriesName:""});0<e.chartJson.Chart.CategoryColors.CategoryColor.length?(r=$.extend(e.chartJson.Chart.CategoryColors.CategoryColor,r),e.chartJson.Chart.CategoryColors.CategoryColor=e.chartJson.Chart.CategoryColors.CategoryColor.concat(r)):e.chartJson.Chart.CategoryColors={categoryDefaultColor:"#7F7F7F",categoryDefaultColorSet:"#7F7F7F",showColorsFromCategoryName:"true",CategoryColor:r}}}else try{for(var n in t)t.hasOwnProperty(n)&&((a=new CategoryColor).setCategoryName(n),a.setColor(t[n]),r.push(a));e.m_categoryColors.m_categorydefaultcolorset=e.m_categoryColors.m_categorydefaultcolorset||"#FFF",e.m_categoryColors.m_categoryColor=e.m_categoryColors.m_categoryColor.concat(r),e.m_categoryColors.cateogryNameColorMap=$.extend(e.m_categoryColors.cateogryNameColorMap,t),e.m_categoryColors.m_showcolorsfromcategoryname=!0}catch(e){}}catch(e){}},this.setCategoryColorSet=function(e,t){e=this.getWidget(e);if(e&&e.getCategoryColors())try{e.getCategoryColors().m_categorydefaultcolorset=t.join(),e.getCategoryColors().setCategoryDefaultColorSet()}catch(e){}},this.pushLog=function(e,t){t=t||"Info";t="["+(new Date).toISOString().replace("T"," ").replace("Z","")+"] ["+t+"] "+e;return a.push(t),t},this.clearLog=function(){a=[]},this.printLogInConsole=function(){},this.log=function(e){IsBoolean(dGlobals.isDevMode)},this.getConnection=function(e){return h(this.dashboard.m_DataProviders.m_dataurl,"m_id",e)},this.getConnectionJSON=function(e){return h(this.dashboard.m_dashboardjson.Niv.Dashboard.DataProviders.DataURL,"id",e)},this.getConnectionDetails=function(){var e=[],t=this.dashboard.m_dashboardjson.Niv.Dashboard.DataProviders.DataURL;if(t)for(var a=0;a<t.length;a++)e[a]={dataSourceName:t[a].dataSourceName,selectedDataSourceID:t[a].selectedDataSourceID,selectedServiceID:t[a].selectedServiceID,url:t[a].url,queryName:t[a].queryName,nividhQueryName:t[a].nividhQueryName,dataSourceType:t[a].dataSourceType,hostName:t[a].hostName,databaseName:t[a].databaseName,Type:t[a].Type,availableFieldSet:t[a].availableFieldSet,availableConditionSet:t[a].availableConditionSet,connectionName:t[a].connectionName};return e},this.getDashboardJSON=function(){return this.dashboard.m_dashboardjson.Niv.Dashboard},this.exportDashboardJSON=function(){var a=this,e=appRootPath+"designer/views/designer/";$.ajax({url:e+"resources/data/dashboard.data",success:function(e){var t,e=JSON.parse(e);e.Dashboard=a.getDashboardJSON();try{e.Dashboard.backendId="",e.Dashboard.workspaceId="",e.Dashboard.versionDetails.publishDocId=0,e.Dashboard.versionDetails.publishedVersions=[]}catch(e){}e=JSON.stringify({dashboardJson:e}),(isIE=!!document.documentMode)?(t=new Blob([e]),window.navigator.msSaveBlob(t,"dashboard.bvzx")):(isSafari=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"))?(t="data:application/...,"+encodeURIComponent(e),location.replace(t)):(t=new Blob([e],{type:"text/plain"}),e=URL.createObjectURL(t),$("#exportAnchor").remove(),(t=document.createElement("a")).setAttribute("id","exportAnchor"),(t=document.body.appendChild(t)).setAttribute("download","dashboard.bvzx"),t.setAttribute("href",e),$(t)[0].click(),$("#exportAnchor").remove())},error:function(){}})},this.getConnectionData=function(e){try{return e&&this.getLastChangedItem(e)&&this.getLastChangedItem(e).attributes.data||[]}catch(e){return[]}},this.getAnnotationConnectionData=function(e){try{if("ds"===e.m_type)return e.getDataFromConnection(e.getDataSetValues(),frameworkController.setXMLResponseForDs.bind(frameworkController));e.getDataFromConnection(e.getDataSetValues(),frameworkController.setXMLResponse.bind(frameworkController))}catch(e){return[]}},this.getConnectionSummary=function(e){try{return e&&this.getLastChangedItem(e)&&this.getLastChangedItem(e).attributes.FrameworkComponent.status.summary||"No summary"}catch(e){return"No summary"}},this.getConnectionGraphs=function(e){try{return e&&this.getLastChangedItem(e)&&this.getLastChangedItem(e).attributes.FrameworkComponent.status.graph||"No graph"}catch(e){return"No graph"}},this.getWebSocketResponse=function(e){var t={state:"",message:""};try{var a=this.getLastChangedItem(e);return e&&a&&a.attributes.FrameworkComponent.status&&(t.state=a.attributes.FrameworkComponent.status.state,t.message=a.attributes.FrameworkComponent.status.message),t}catch(e){return t}},this.closeWebSocket=function(e){e=m(this.dashboard.m_DataProviders.m_dataurl,"m_id",e);e&&$.each(e,function(e,t){if(t&&t.getWebService()&&t.getWebService().getWebSocket())try{t.getWebService().getWebSocket().close()}catch(e){}})},this.setSkipFilterValues=function(e,a){e=m(this.dashboard.m_DataProviders.m_dataurl,"m_id",e);e&&$.each(e,function(e,t){t&&(t.m_skipfiltervalues=t.m_skipfiltervalues.concat(a))})},this.setFilterSelectedIndex=function(e,t){var a=this.getWidget(e);if(a&&t&&0<t.length)try{switch(a.m_componenttype){case"hierarchical_combo":"Multiple"==a.m_hierarchylevel&&IsBoolean(a.m_allowmultipleselection)?a.m_currentIndexSelect=t:a.m_currentIndexSelect=t[0];break;case"radio_filter":a.m_selectedindex=t[0];break;case"list_filter":IsBoolean(a.m_allowmultipleselection)||IsBoolean(a.m_enabledualselectionlist)?a.m_selectedindex=t:a.m_selectedindex=t[0];break;case"combo_filter":"multiselect"==a.m_selectiontype?a.m_selectedindex=t:a.m_selectedindex=t[0];break;default:a.m_selectedindex=t}}catch(e){}},this.getLastChangedItem=function(e){var t=this.lastChangedItemMap[e];if(e){e=this.lastChangedItemMap[e.toLowerCase()];if(null==t&&null!=e)return e}return t},this.importFont=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},this.applyGlobalFont=function(e){var t;e&&e.fontFamily&&IsBoolean(e.useGlobalFont)&&(""!==e.url&&this.importFont(e.url),(t=this.dashboard.m_AbsoluteLayout).m_useglobalfont=IsBoolean(e.useGlobalFont),t.m_fontfamily=e.fontFamily,e={useGlobal:t.m_useglobalfont,fontFamily:t.m_fontfamily,useFontFromUrl:t.m_usefontfromurl,fontUrl:t.m_fonturl},setGlobalFont(e))},this.loadOpenDoc=function(t,a){var r="?";if(t?r+=$.map(Object.getOwnPropertyNames(t),function(e){return[e,t[e]].join("=")}).join("&"):r="",!parent.parent.$(".iframeStyle")[0])return a?window.open(a+r,"_self"):window.open(appRootPath+"opendocument.html?"+r,"_self"),{success:!0};try{return $(parent.parent.$(".iframeStyle")[0]).attr("src","views/opendocument/opendocument.html"+r),{success:!0}}catch(e){return a?window.open(a+r,"_self"):window.open(appRootPath+"opendocument.html?"+r,"_self"),{success:!0}}},this.applyLanguageMapping=function(e){e&&(""!==this.dashboard.m_LanguageMapping?(null!=e.isEnabled&&(this.dashboard.m_LanguageMapping.m_enable=IsBoolean(e.isEnabled),dGlobals.langMap.isEnabled=IsBoolean(e.isEnabled)),null!=e.language&&(this.dashboard.m_LanguageMapping.m_language=e.language,dGlobals.langMap.language=e.language||""),null!=e.id&&(this.dashboard.m_LanguageMapping.m_mappingid=e.id,dGlobals.langMap.id=e.id||""),null!=e.name&&(this.dashboard.m_LanguageMapping.m_mappingname=e.name,dGlobals.langMap.name=e.name||""),null!=e.hideBrackets&&(this.dashboard.m_LanguageMapping.m_hidebrackets=!!IsBoolean(e.hideBrackets),dGlobals.langMap.hideBrackets=!!IsBoolean(e.hideBrackets))):(dGlobals.langMap.isEnabled=IsBoolean(e.isEnabled),dGlobals.langMap.language=e.language||"",dGlobals.langMap.name=e.name||"",dGlobals.langMap.hideBrackets=!!IsBoolean(e.hideBrackets)))},this.getNumberFormatedValue=function(t,a){try{return(+t).toLocaleString(navigator.userLanguage||navigator.language,{maximumFractionDigits:a})}catch(e){return(+t).toFixed(a).toLocaleString()}},this.getLayoutType=function(){return this.dashboard.m_AbsoluteLayout.m_layouttype},this.getCurrencyConversionRates=function(a,r){$.ajax({url:"//api.fixer.io/latest?base="+(a||"USD"),success:function(e,t){t&&e?(this.setContext("currencyConversionRate",e.rates,!1),r&&r(e)):r&&r({base:a,rates:{}})}})},this.setStatusMessage=function(e){null==e&&(e={type:"info",message:"Status Message",timeout:"3000"}),alertPopUpModal(e)},this.startDashboardTour=function(t){if(t)try{var e,a={WatermarkDivOverflow:$("#WatermarkDiv").css("overflow"),draggablesParentDivOverflow:$(".draggablesParentDiv").css("overflow")},r={name:t.name,steps:t.steps,storage:!1,backdrop:!0,animation:!1,onStart:function(e){$("#WatermarkDiv").css("overflow",""),"AbsoluteLayout"!==dGlobals.layoutType&&$(".draggablesParentDiv").css("overflow","").removeClass("iPhoneScrollBar").removeClass("mobileViewCSS"),t.onStart&&t.onStart()},onEnd:function(e){$("#WatermarkDiv").css("overflow",a.WatermarkDivOverflow),"AbsoluteLayout"!==dGlobals.layoutType&&$(".draggablesParentDiv").css("overflow",a.draggablesParentDivOverflow).addClass("iPhoneScrollBar").addClass("mobileViewCSS"),t.onEnd&&t.onEnd()},onPause:function(e){$("#WatermarkDiv").css("overflow",""),"AbsoluteLayout"!==dGlobals.layoutType&&$(".draggablesParentDiv").css("overflow","").removeClass("iPhoneScrollBar").removeClass("mobileViewCSS"),t.onPause&&t.onPause()},template:'<div class="popover tour"><div class="arrow">&nbsp;</div><h3 class="popover-title">&nbsp;</h3><div class="popover-content">&nbsp;</div><div class="popover-navigation"><button class="btn btn-default" data-role="prev">&laquo; Prev</button> <button class="btn btn-default" data-role="next">Next &raquo;</button><button class="btn btn-default" data-role="pause-resume">Pause</button> <button class="btn btn-default" data-role="end">End tour</button></div></div>'};for(e in t)t.hasOwnProperty(e)&&"onStart"!=e&&"onEnd"!=e&&(r[e]=t[e]);var o=new Tour(r);o.ended()?o.restart():(o.init(),o.start())}catch(e){}},this.injectCSSRules=function(e){try{$("<div />",{html:"&shy;<style>"+e+"</style>"}).appendTo("body")}catch(e){}},this.controlAction=function(e,t){var a=this.getWidget(e);if(void 0!==a)try{for(var r in t)for(var o in t[r])a.m_chartactions[r][o]=t[r][o]}catch(e){}},this.enableGoogleAnalytics=function(t){if(t&&t.enable)try{var e=window,a=document,r="dataLayer";e[r]=e[r]||[],e[r].push({"gtm.start":(new Date).getTime(),event:"gtm.js"}),e=a.getElementsByTagName("script")[0],(r=a.createElement("script")).async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-T7KD2Z8",e.parentNode.insertBefore(r,e),document.body.insertAdjacentHTML("beforeend",'<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T7KD2Z8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>');loadScript({urls:["https://www.googletagmanager.com/gtag/js?id="+t.token],type:"script",async:"false",cbArgs:"",eCB:"",sCB:function(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",t.token||"UA-133684628-1")}})}catch(e){}},this.refreshCache=function(){if(void 0!==pageInPortal)try{var e=getUrlParameters(),t=JSON.parse(localStorage.getItem("dbCacheMap"));delete t[e.docid],localStorage.setItem("dbCacheMap",JSON.stringify(t)),parser.dashboardJson.Niv.Dashboard.enableCache=!1,parser.parseDashboardJSON(),frameworkController.onBeforeDashboardLoad()}catch(e){}},this.dataHash=function(e){return sha256(e)},this.createExportComponentForReportBurst=function(){var a=parser.dashboard.m_id,r=parser.dashboard,o=parser.dashboard.m_reportburstbutton;$.ajax({url:appRootPath+designerContextRoot+"views/designer/resources/bizvizchart-themes/default-theme/singleValuedComponent/ExportToPPTButton.data",success:function(e){var e=JSON.parse(e).ExportToPPTButton,t=$("#draggablesParentDiv"+a),t=ReflectUtil.newInstance("ExportToPPTButton",t,2e3);t.m_dashboard=r,e.Properties.Object.objectID=o,e.Properties.Object.referenceID=o,e.Properties.Object.x="0",e.Properties.Object.y="0",e.Properties.Object.height="1",e.Properties.Object.width="1",e.Properties.Object.ExportPPTButton.exportWindow="false",e.Properties.Object.ExportPPTButton.mode="pdf",e.Properties.Object.ExportPPTButton.exportAllCompSeperatelyInPdf="false",parser.dashboard.m_widgetsArray.push(t),t.setProperty(e.Properties),t.m_pptheading="",t.m_pptsubheading="",t.draw()}})},this.filterReportBurst=function(){var e,t=frameworkController.getQueryStrings();for(e in t)if(void 0!==e&&""!==e&&-1<e.indexOf(".")){var a=e.split(".")[0],r=[],o={},n=(o[e.split(".")[1]]=t[e],0<t[e].indexOf(",")?r=t[e].split(","):r.push(t[e]),this.getWidget(a));if(n&&r&&0<r.length)try{switch(n.m_componenttype){case"hierarchical_combo":this.updateGlobalVariable(a,o,!0);break;case"list_filter":case"combo_filter":if("multiselect"==n.m_selectiontype){for(var i=[],s=0,l=0;s<n.m_seriesData.length;s++)n.m_seriesData[s][0]==r[l]&&(i.push(s),l++);n.m_selectedindex=i}else{for(i=[],s=0;s<n.m_seriesData.length;s++)if(n.m_seriesData[s][0]==r[0]){i.push(s);break}n.m_selectedindex=i[0]}this.reloadDataset([a])}}catch(e){}}};var s=function(t,a,r){var o=r?function(e){return r(e[t])}:function(e){return e[t]};return a=a?-1:1,function(e,t){return e=o(e),t=o(t),a*((t<e)-(e<t))}},o={errors:{generic:"Error Occured in user script execution",not_implemented:"Not implemented",cannot_delete:"Cannot Delete reserved context keys",re_initialized:"SDK reinitialised, cannot perform operations.",unexpected_parameters:"Unexpected parameters sent to {method}."}},n=function(e,t){var a,r=e.m_con.clauseMap;for(a in r)if(r.hasOwnProperty(a)){var o=t.key+".";if(-1<r[a].indexOf(o))return!0}return!1},l=function(e){$.each(e,function(e,t){"ds"===t.m_type?(null!=dataManager&&dataManager.handleTimelyRefresh(t,frameworkController.setXMLResponseForDs.bind(frameworkController)),t.getDataFromConnection(t.getDataSetValues(),frameworkController.setXMLResponseForDs.bind(frameworkController))):(null!=dataManager&&dataManager.handleTimelyRefresh(t,frameworkController.setXMLResponse.bind(frameworkController)),t.getDataFromConnection(t.getDataSetValues(),frameworkController.setXMLResponse.bind(frameworkController)))})},c=function(e,t){return _.contains(_.map(t,function(e){return e.toLowerCase()}),e.toLowerCase())},g=function(e){return $.isArray(e)?e:[e]},d=function(){if(""==this.dashboard)throw o.errors.re_initialized;return!0},m=function(r,o,e){var n=[];if($.each(e,function(e,t){var a=$.grep(r,function(e){return void 0!==t&&e[o].toLowerCase()==t.toLowerCase()});a[0]&&n.push(a[0])}),0<n.length)return n},h=function(e,t,a){e=$.grep(e,function(e){return void 0!==a&&e[t].toLowerCase()==a.toLowerCase()});if(0<e.length)return e[0]}}var bizviz=new BizvizSDK,sdk=bizviz;function UserScriptExecuter(){}parent.window.BIZVIZ=parent.window.BIZVIZ||{},parent.window.BIZVIZ.designer=parent.window.BIZVIZ.designer||{},parent.window.BIZVIZ.designer.sdk=sdk,UserScriptExecuter.prototype.execute=function(userScript,changedItem){if(this.validateSuccess(userScript)){var prevChangedItem=bizviz.lastChangedItem,$self=changedItem.attributes;bizviz.setLastChangedItem(changedItem);try{sdk.pushLog("Execution Init"),sdk.pushLog("Source - "+changedItem.key),sdk.pushLog(userScript,"EXEC"),eval(userScript),prevChangedItem&&bizviz.setLastChangedItem(prevChangedItem)}catch(e){sdk.pushLog("Message : "+e,"ERROR")}}},UserScriptExecuter.prototype.validateSuccess=function(e){return!0};
//# sourceMappingURL=chartingSDK.min.js.map