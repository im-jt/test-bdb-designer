/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function BarChart(t,i){this.base=Chart,this.base(),this.m_x=680,this.m_y=320,this.m_width=300,this.m_height=260,this.m_barWidth=10,this.m_categoryData=[],this.m_seriesData=[],this.m_categoryNames=[],this.m_seriesNames=[],this.m_barSeriesArray=[],this.m_xPositionArray=[],this.m_yPositionArray=[],this.m_barWidth="",this.m_barHeightArray=[],this.m_seriesVisiblityPosition,this.m_showpercentvalue=!1,this.m_showmarkingorpercentvalue=!1,this.m_showPercentValueFlag=!0,this.m_seriesInitializeFlag=!0,this.m_calculation=new BarCalculation,this.noOfRows=1,this.m_xAxis=new BarXAxis,this.m_yAxis=new BarYAxis,this.m_title=new svgTitle(this),this.m_subTitle=new svgSubTitle,this.m_chartContainer=t,this.m_zIndex=i,this.m_showhorizontalmarkerline=!1,this.m_maxbarwidth=40,this.m_enableanimation="false",this.m_baranimationduration=.5,this.m_stackborderwidth="0",this.m_stackbordercolor="#ffffff",this.m_enablestackshadow="false",this.m_stackshadowcolor="#000000",this.m_stackshadowopacity="0.3",this.m_canvastype="svg",this.m_stacksvgtype="rect",this.m_controlbarwidth="auto",this.m_stackborderradius="0",this.m_yaxislabellines="2",this.enableDrillHighlighter="false",this.m_drilltoggle=!0,this.origonalXposition="",this.updateflag=!1,this.m_showslider=!1,this.timeLineSliderFlag=!1,this.m_showslidermarker=!0,this.m_showslidertext=!1,this.m_sliderhandlerbgcolor="#ccffff",this.m_sliderselectbgcolor="#cccccc",this.m_slidercontainerbgcolor="#ccffff",this.m_slidercontainerbordercolor="#bbbbbb",this.m_sliderbordercolor="#cccccc",this.m_sliderbghandle="#ffffff",this.m_slideropacityhandle="0.0",this.m_sliderbgselection="#cccccc",this.m_slideropacityselection="0.5",this.m_sliderbgcontainer="#ecf0f1",this.m_slideropacitycontainer="0.0",this.m_sliderbgscrollbar="#b0b0b0",this.m_slideropacityscrollbar="0.7",this.m_sliderLastIndex=0,this.m_sliderposition="default",this.m_sliderheightratio=7,this.m_sliderrangeflag=!0,this.m_sliderrangevalue=10,this.m_sliderheight=63,this.sliderMargin=70,this.m_slideronmaxmize=!1,this.m_showxaxisthreshold=!1,this.m_minimumxaxisthreshold="0",this.m_maximumxaxisthreshold="50",this.m_minimumxaxisthresholdline=!0,this.m_xaxisthresholdlinewidth="1",this.m_minimumthresholdstrokecolor="#00FF00",this.m_maximumthresholdstrokecolor="#FF0000",this.m_xaxisthresholdstrokecolor="#000000",this.m_thresholdlinetype="straight",this.m_enablethresholdfill=!1,this.m_fillBelowLowerThreshold="#ffea00",this.m_fillBetweenThreshold="#00FF00",this.m_fillAboveUpperThreshold="#ff0000",this.m_thresholdfillcolor="#ffea00,#00FF00,#ff0000",this.m_thresholdfilllevel="low,middle,top",this.m_thresholdfillopacity="0.3,0.3,0.3",this.m_thresholdfilllabel="Low,Middle,Top",this.m_thresholdfilllabelcolor="#000000,#000000,#000000",this.m_fillBelowThresholdOpacity=.3,this.m_fillBetweenThresholdOpacity=.3,this.m_fillUpperThresholdOpacity=.3,this.m_BelowThresholdLabel="Low",this.m_BetweenThresholdLabel="Middle",this.m_UpperThresholdLabel="Top",this.m_BelowThresholdLabelColor="#000000",this.m_BetweenThresholdLabelColor="#000000",this.m_UpperThresholdLabelColor="#000000"}function BarCalculation(){this.xPositionArray=[],this.yAxisPixelArray=[],this.xPositionMap={},this.yPositionMap={},this.barGap=10,this.m_xAxisText="",this.m_numberOfMarkers=6,this.minSliderIndex="",this.maxSliderIndex=""}function BarSeries(){this.xPixel=[],this.yPixelArray=[],this.stackHeightArray=[],this.stackColorArray=[],this.barStackArray=[],this.ctx="",this.m_chart="",this.m_chartbase=""}function BarStack(){this.stackXPixel,this.stackYPixel,this.stackWidth,this.stackHeight,this.stackColor,this.strokeColor,this.ctx="",this.m_chartbase=""}function BarXAxis(){this.base=Xaxis,this.base(),this.m_showlinexaxis="true",this.m_linexaxiscolor="",this.m_textUtil=new TextUtil,this.m_util=new Util,this.ctx="",this.noOfRows=1}function BarYAxis(){this.base=Yaxis,this.base(),this.m_showlineyaxis="true",this.m_lineyaxiscolor="",this.m_textUtil=new TextUtil,this.m_yAxisText,this.ctx}BarChart.prototype=new Chart,BarChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},BarChart.prototype.ParseJsonAttributes=function(t,i){for(var e in this.chartJson=t)if("Chart"==e)for(var s in t[e])switch(s){case"xAxis":for(var a in t[e][s]){var r=this.getNodeAttributeName(a);i.m_xAxis[r]=t[e][s][a]}break;case"yAxis":for(var h in t[e][s]){var r=this.getNodeAttributeName(h);i.m_yAxis[r]=t[e][s][h]}break;case"Title":for(var o in t[e][s]){var r=this.getNodeAttributeName(o);i.m_title[r]=t[e][s][o]}break;case"SubTitle":for(var l in t[e][s]){r=this.getNodeAttributeName(l);i.m_subTitle[r]=t[e][s][l]}break;case"CategoryColors":var n,m=new CategoryColors;for(n in this.setCategoryColors(m),t[e][s])if("CategoryColor"===n){var c=this.getArrayOfSingleLengthJson(t[e][s][n]);m.cateogryNameColorMap=new Object;for(var d=0;d<c.length;d++){var _,g=new CategoryColor;for(_ in m.setCategoryColor(g),c[d])g[r=this.getNodeAttributeName(_)]=c[d][_];m.cateogryNameColorMap[g.getCategoryName()]=g.getColor()}}else{r=this.getNodeAttributeName(n);i.m_categoryColors[r]=t[e][s][n]}m.setCategoryDefaultColorSet();break;case"ConditionalColors":if(""!=t[e][s])for(var p=new ConditionalColors,x=(this.setConditionalColors(p),this.getArrayOfSingleLengthJson(t[e][s].ConditionalColor)),d=0;d<x.length;d++){var u,y=new ConditionalColor;for(u in p.setConditionalColor(y),x[d])y[r=this.getNodeAttributeName(u)]=x[d][u]}break;default:i[r=this.getNodeAttributeName(s)]=t[e][s]}else i[r=this.getNodeAttributeName(e)]=t[e]},BarChart.prototype.getDataProvider=function(){return this.m_dataProvider},BarChart.prototype.getCategoryNames=function(){return this.m_categoryNames},BarChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},BarChart.prototype.setStartX=function(){var t=this.getBorderToDescriptionMargin(),i=this.getYAxisDescriptionMargin(),e=this.getDescriptionToLabelMargin(),s=this.getLabelToAxisMargin(),a=this.getYAxisLabelMargin(),r=this.getLeftLabelSpace(),h=this.getLeftSpace();IsBoolean(this.m_showslider)&&this.m_sliderheight;IsBoolean(this.scaleFlag)?this.m_startX=+this.m_x:this.m_startX=+this.m_x+ +t+ +i+ +e+ +a+ +s+ +r+ +h},BarChart.prototype.getLeftSpace=function(){var t=this.getUnitValue(),t=this.getCalculatedSpace(t);return(+this.getPrecisionSpace()+ +t)/2},BarChart.prototype.getLeftLabelSpace=function(){var t=0;return this.setLabelWidth(),t=IsBoolean(this.m_xAxis.getLabelTilted())&&-70<+this.m_xAxis.m_labelrotation&&this.m_xAxis.m_labelrotation<0?this.getLabelWidth()/2+this.getLabelPrecisionMargin()/2+this.getLabelSecondFormatterMargin()/2:t},BarChart.prototype.getYAxisLabelMargin=function(){var t=0;if(this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),!IsBoolean(this.isEmptyCategory)){for(var t=this.ctx.measureText(this.m_categoryData[0][0]).width,i=1,e=this.m_categoryData[0].length;i<e;i++)t<this.ctx.measureText(this.m_categoryData[0][i]).width&&(t=this.ctx.measureText(this.m_categoryData[0][i]).width);t>this.m_width/4&&(t=this.m_width/4)}return t},BarChart.prototype.setStartY=function(){var t=this.getChartMargin(),i=this.getXAxisLabelMarginForBar();this.m_startY=+this.m_y+ +this.m_height-+t-+i},BarChart.prototype.getXAxisLabelMarginForBar=function(){var t,i,e,s,a,r;return this.noOfRows=1,r=(a=IsBoolean(this.m_xAxis.getLabelTilted())?(e=this.m_xAxis.m_labelrotation*(Math.PI/180),t=this.getLabelFormatterMargin(),i=(i=1.5*this.fontScaling(this.m_xAxis.getLabelFontSize())*this.noOfRows)<=(e=this.getLabelWidth()*Math.abs(e))?e:i,e=this.getLabelSignMargin(),s=this.getLabelPrecisionMargin(),this.getLabelSecondFormatterMargin()):(this.noOfRows=this.setNumberOfRows(),t=0,i=1.5*this.fontScaling(this.m_xAxis.getLabelFontSize())*this.noOfRows,s=e=0),this.getXAxisDescriptionMargin()),+t+ +i+ +e+ +s+ +a+ +r},BarChart.prototype.setNumberOfRows=function(){this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily);var t,i,e,s=1,a=(""+this.min).length<=(""+this.max).length?this.max:this.min;return IsBoolean(this.isEmptySeries)||(a="100%"==this.m_charttype?100:a,t=this.m_xAxisMarkersArray.length,t=(this.getEndX()-this.getStartX())/t,a=this.m_util.updateTextWithFormatter(a,"",this.m_precision),i=this.getUnitValue(),e=this.getSecondUnitValue(),this.ctx.measureText(a=a+""+i+(e="auto"==e?"K":e)).width>t&&(s="auto"==this.m_skipxaxislabels?2:1,s=1)),s},BarChart.prototype.getSecondUnitValue=function(){var t="";return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_xAxis.getLeftaxisFormater())&&"none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(t=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit())),t},BarChart.prototype.getUnitValue=function(){var t="";return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_xAxis.getLeftaxisFormater())&&"none"!=this.m_formater&&""!=this.m_formater&&"none"!=this.m_unit&&""!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit)),t},BarChart.prototype.getLabelFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_xAxis.getLeftaxisFormater())&&"none"!=this.m_formater&&""!=this.m_formater&&"none"!=this.m_unit&&""!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),this.ctx.beginPath(),this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.m_xAxis.getLabelFontSize()+"px "+this.m_xAxis.getLabelFontFamily(),i=this.ctx.measureText(t).width,this.ctx.closePath()),i},BarChart.prototype.getLabelWidth=function(){return this.m_labelwidth},BarChart.prototype.setLabelWidth=function(){for(var t=[],i=this.m_labelwidth=0;i<this.m_xAxisMarkersArray.length;i++){var e,s="100%"==this.m_charttype?100:this.m_xAxisMarkersArray[i];IsBoolean(this.m_fixedlabel)||(IsBoolean(this.m_xAxis.getLeftaxisFormater())&&("none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(e=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?s=getNumberFormattedNumericValue(+s,this.m_precision,this.m_unit):"auto"==this.getSecondaryUnit()?s=getNumberFormattedNumericValue(+s):"none"!==this.getSecondaryUnit()&&(s=this.m_util.updateTextWithFormatter(s,e,this.m_precision))),0!==s)&&"default"!==this.m_precision&&(s=this.m_xAxis.setPrecision(s,this.m_precision)),s=getFormattedNumberWithCommas(s,this.m_numberformatter),this.ctx.beginPath(),this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily),t[i]=this.ctx.measureText(s).width,this.ctx.closePath())}this.m_labelwidth=getMaxValueFromArray(t)},BarChart.prototype.getLabelSignMargin=function(){var t=0,i=0,e=this.min;return e<0&&(this.ctx.beginPath(),this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily(),i=this.ctx.measureText(e).width,this.ctx.closePath()),t=this.getLabelWidth()<i?this.ctx.measureText("-").width:t},BarChart.prototype.getLabelPrecisionMargin=function(){var t=5;if(!IsBoolean(this.m_fixedlabel)&&IsBoolean(this.m_xAxis.getLeftaxisFormater())&&"none"!=this.m_precision&&""!=this.m_precision&&0!=this.m_precision){this.ctx.beginPath(),this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();for(var i=".",e=0;e<this.m_precision;e++)i+="0";t=this.ctx.measureText(i).width,this.ctx.closePath()}return t},BarChart.prototype.getLabelSecondFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_xAxis.getLeftaxisFormater())&&"none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(t="auto"!=this.getSecondaryUnit()?this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()):"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?getNumberFormattedSymbol(+this.max,this.m_unit):"K",this.ctx.font=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily),i=this.ctx.measureText(t).width),i},BarChart.prototype.setEndX=function(){var t=+this.getBorderToLegendMargin()+ +this.getVerticalLegendMargin()+ +this.getVerticalLegendToXAxisMargin()+ +this.getRightLabelTextSpace()+ +this.getRightSpace(),i=IsBoolean(this.m_showslider)?this.m_sliderheight:0;this.m_endX=+this.m_x+ +this.m_width-t-+i,this.m_endX=IsBoolean(this.scaleFlag)?i:this.m_endX},BarChart.prototype.getRightSpace=function(){var t=this.getPrecisionSpace(),i=this.getUnitValue(),e=this.getSecondUnitValue();return(+t+ +this.getCalculatedSpace(i)+ +this.getCalculatedSpace(e))/2},BarChart.prototype.getCalculatedSpace=function(t){return this.ctx.measureText(t).width},BarChart.prototype.getPrecisionSpace=function(){for(var t="",i=0;i<this.m_precision;i++)t+=0;return this.ctx.measureText(t).width},BarChart.prototype.getRightLabelTextSpace=function(){var t=0;return t=IsBoolean(this.m_xAxis.getLabelTilted())&&0<+this.m_xAxis.m_labelrotation&&this.m_xAxis.m_labelrotation<80?+this.getLabelWidth()+ +this.getLabelPrecisionMargin()+this.getLabelSecondFormatterMargin()/2:t},BarChart.prototype.setEndY=function(){this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()+this.getMarginForTooltip()},BarChart.prototype.getCounterFlagForSeriesVisiblity=function(){for(var t=0,i=0,e=this.m_seriesData.length;i<e;i++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[i]])&&(t++,this.m_seriesVisiblityPosition=i);return 1==t},BarChart.prototype.setFields=function(t){for(var i=[],e=[],s=0,a=(this.m_fieldsJson=t).length;s<a;s++)switch(this.getProperAttributeNameValue(t[s],"Type")){case"Category":i.push(t[s]);break;case"Series":case"CalculatedField":e.push(t[s])}this.setCategory(i),this.setSeries(e)},BarChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryFieldColor=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr={};for(var i=0,e=0,s=t.length;e<s;e++){this.m_allCategoryNames[e]=this.getProperAttributeNameValue(t[e],"Name");var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allCategoryDisplayNames[e]=a,this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]])&&0==this.m_categoryNames.length&&(this.m_categoryNames[i]=this.getProperAttributeNameValue(t[e],"Name"),this.m_categoryDisplayNames[i]=a,this.m_categoryFieldColor[i]=this.getProperAttributeNameValue(t[e],"Color"),i++)}},BarChart.prototype.setSeries=function(t){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors=[],this.m_legendNames=[],this.m_seriesVisibleArr={},this.m_allSeriesDisplayNames=[],this.m_allSeriesNames=[],this.m_plotTrasparencyArray=[],this.m_seriesDataLabelProperty=[];var i=0;this.legendMap={};for(var e=0,s=t.length;e<s;e++){var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allSeriesDisplayNames[e]=a,this.m_allSeriesNames[e]=this.getProperAttributeNameValue(t[e],"Name"),this.m_seriesVisibleArr[this.m_allSeriesNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),IsBoolean(this.m_seriesVisibleArr[this.m_allSeriesNames[e]])&&(this.m_seriesDisplayNames[i]=a,this.m_seriesNames[i]=this.getProperAttributeNameValue(t[e],"Name"),this.m_legendNames[i]=a,this.m_seriesColors[i]=convertColorToHex(this.getProperAttributeNameValue(t[e],"Color")),this.m_seriesDataLabelProperty[i]=this.getProperAttributeNameValue(t[e],"DataLabelCustomProperties"),void 0!==this.m_seriesDataLabelProperty[i]?(IsBoolean(this.m_seriesDataLabelProperty[i].useFieldColor)&&(this.m_seriesDataLabelProperty[i].dataLabelFontColor=this.m_seriesColors[i]),void 0!==this.m_seriesDataLabelProperty[i].showPercentValue&&IsBoolean(this.m_seriesDataLabelProperty[i].showPercentValue)&&"100%"==this.m_charttype&&(this.m_seriesDataLabelProperty[i].datalabelField=this.m_seriesNames[i]),IsBoolean(this.m_seriesDataLabelProperty[i].dataLabelUseComponentFormater)&&(this.m_seriesDataLabelProperty[i].datalabelFormaterCurrency=this.m_unit,this.m_seriesDataLabelProperty[i].datalabelFormaterPrecision=this.m_precision,this.m_seriesDataLabelProperty[i].datalabelFormaterPosition=this.m_signposition,this.m_seriesDataLabelProperty[i].datalabelFormaterUnit=this.m_secondaryunit)):this.m_seriesDataLabelProperty[i]=this.getDataLabelProperties(),a=this.getProperAttributeNameValue(t[e],"PlotTransparency"),this.m_plotTrasparencyArray[i]=null!=a&&null!==a&&""!==a?a:1,a={seriesName:this.m_seriesNames[i],displayName:this.m_seriesDisplayNames[i],color:this.m_seriesColors[i],shape:"cube",index:i},this.legendMap[this.m_seriesNames[i]]=a,i++)}this.setLegendsIntialLoad(this.m_defaultlegendfields)},BarChart.prototype.getLegendInfo=function(){return this.legendMap},BarChart.prototype.getAllSeriesNames=function(){return this.m_allSeriesNames},BarChart.prototype.getAllCategoryNames=function(){return this.m_allCategoryNames},BarChart.prototype.getSeriesNames=function(){return this.m_seriesNames},BarChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},BarChart.prototype.getSeriesColors=function(){return this.m_seriesColors},BarChart.prototype.setLegendNames=function(t){this.m_legendNames=t},BarChart.prototype.getLegendNames=function(){return this.m_legendNames},BarChart.prototype.getCategoryColorsForAction=function(){return this.m_categoryFieldColor},BarChart.prototype.getSeriesColorsForAction=function(){return this.m_seriesColors},BarChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0,i=this.getAllCategoryNames().length;t<i;t++)this.m_allfieldsName.push(this.getAllCategoryNames()[t]);for(var e=0,s=this.getAllSeriesNames().length;e<s;e++)this.m_allfieldsName.push(this.getAllSeriesNames()[e])},BarChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},BarChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var t=0,i=this.getCategoryDisplayNames().length;t<i;t++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[t]);for(var e=0,s=this.getSeriesDisplayNames().length;e<s;e++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[e])},BarChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},BarChart.prototype.setCategorySeriesData=function(){this.m_categoryData=[],this.m_seriesData=[],this.m_seriesDataForToolTip=[],this.m_displaySeriesDataFlag=[],this.m_seriesDataForDataLabel=[],this.m_seriesDataLabelPropertyOverlaid=[];for(var t=0,i=this.getDataProvider().length;t<i;t++){var e=this.getDataProvider()[t];if(this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var s=0,a=this.getCategoryNames().length;s<a;s++){this.m_categoryData[s]||(this.m_categoryData[s]=[]);var r=this.getValidFieldDataFromRecord(e,this.getCategoryNames()[s]);this.m_categoryData[s][t]=r}}this.m_displaySeriesDataFlag[t]=[];for(var h=0,o=0,l=this.getSeriesNames().length;h<l;h++){this.m_seriesData[h]||(this.m_seriesData[h]=[],this.m_seriesDataForToolTip[h]=[]);var n,r=this.getValidFieldDataFromRecord(e,this.getSeriesNames()[h]);this.m_displaySeriesDataFlag[t][h]=!0,isNaN(r)&&(this.m_displaySeriesDataFlag[t][h]=!1,r=getNumericComparableValue(r)),IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[h]])&&(this.m_seriesDataForDataLabel[o]||(this.m_seriesDataForDataLabel[o]=[]),this.m_seriesDataLabelPropertyOverlaid[o]=this.m_seriesDataLabelProperty[h],n=this.getValidFieldDataFromRecord(e,this.m_seriesDataLabelProperty[h].datalabelField),this.m_seriesDataForDataLabel[o][t]=n,o++),this.m_seriesData[h][t]=r,this.m_seriesDataForToolTip[h][t]=r}}this.CatData=this.m_categoryData,this.SerData=this.m_seriesData,this.SerDataLabel=this.m_seriesDataLabel},BarChart.prototype.setCategoryData=function(){if(this.m_categoryData=[],this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var t=0,i=this.getCategoryNames().length;t<i;t++)this.m_categoryData[t]=this.getDataFromJSON(this.getCategoryNames()[t])}},BarChart.prototype.getCategoryData=function(){return this.m_categoryData},BarChart.prototype.setSeriesData=function(){this.m_seriesData=[];for(var t=0,i=this.getSeriesNames().length;t<i;t++)this.m_seriesData.push(this.getDataFromJSON(this.getSeriesNames()[t]))},BarChart.prototype.getSeriesData=function(){return this.m_seriesData},BarChart.prototype.setSeriesColor=function(t){this.m_seriesColor=t},BarChart.prototype.getDataFromJSON=function(t){var i=[],e=this.getDataProvider();if(IsBoolean(!this.timeLineSliderFlag))for(var s=this.getDataProvider().length,a=0;a<s;a++)null==e[a][t]?i[a]="":i[a]=e[a][t];else for(var a=this.firstIndex,r=0;a<=this.lastIndex;a++)e[a]&&null!=e[a][t]&&"undefined"!==e[a][t]?i[r]=e[a][t]:i[r]="",r++;return i},BarChart.prototype.getSeriesColor=function(){return this.m_seriesColor},BarChart.prototype.init=function(){this.updateSeriesDataWithCommaSeperators(),IsBoolean(!this.timeLineSliderFlag)&&(this.updateflag=!1,this.setCategorySeriesData(),(this.firstIndex=0)<this.m_categoryData.length)&&(this.lastIndex=this.m_categoryData[0].length-1,this.m_conditionalcolorswithoutslider=this.getConditionalColors().getConditionalColorsForConditionsForMixedTime(this.getSeriesNames(),this.getSeriesColors(),this.m_seriesData,this),this.m_conditionalcolorswithslider=this.m_conditionalcolorswithoutslider),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.isSeriesDataEmpty(),this.setShowSeries(this.getAllFieldsName()),this.visibleSeriesInfo=this.getVisibleSeriesData(this.getSeriesData()),this.createSVG(),this.initMouseClickEventForSVG(this.svgContainerId),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),!IsBoolean(this.m_isEmptySeries)&&IsBoolean(this.isVisibleSeries())&&(this.setPercentageForHundred(),this.initializeCalculation(),this.m_xAxis.init(this,this.m_calculation),this.m_yAxis.init(this,this.m_calculation)),this.initializeToolTipProperty(),this.m_tooltip.init(this)},BarChart.prototype.updateSeriesDataWithCommaSeperators=function(){this.m_displaySeriesDataFlag=[];for(var t=0,i=this.m_seriesData.length;t<i;t++){this.m_displaySeriesDataFlag[t]=[];for(var e=0,s=this.m_seriesData[t].length;e<s;e++)this.m_displaySeriesDataFlag[t][e]=!0,isNaN(this.m_seriesData[t][e])&&(this.m_displaySeriesDataFlag[t][e]=!1,this.m_seriesData[t][e]=getNumericComparableValue(this.m_seriesData[t][e]))}},BarChart.prototype.drawChart=function(){this.drawChartFrame();this.drawTitle(),this.drawSubTitle(),this.drawLegends();var t,i,e,s=this.IsDrawingPossible();IsBoolean(s.permission)?(this.drawXAxis(),this.drawYAxis(),this.drawBarChart(),this.drawDataLabel(),this.drawThreshold(),IsBoolean(!this.timeLineSliderFlag)&&IsBoolean(this.m_showslider)&&(this.getBGGradientColorToScale(),IsBoolean(this.m_sliderrangeflag)&&(t=this.m_dataProvider.length,i=this.m_sliderrangevalue,this.m_sliderrange=i<=t?100*i/t:100),this.setMinMaxSliderIndex(),this.drawslider(),this.drawRangeSelector(),this.scaleFlag=!0,i=getDuplicateObject(this),this.initScaleChart(i),this.drawScaleChart(i,this.svgTimeScaleId),this.scaleFlag=!1,this.m_designMode||(this.timeLineSliderFlag=!0,t=this.getStartY()-this.getEndY(),i=null!=this.m_sliderwidthperc?this.m_sliderwidthperc*t:"auto"==this.m_sliderrange?3*t/10:+this.m_sliderrange*t/100,IsBoolean(!this.m_slideronmaxmize)||null==this.m_sliderleftperc?"left"==this.m_sliderposition?this.updatechart(this.getEndY(),+this.getEndY()+i):"right"!=this.m_sliderposition&&IsBoolean(this.m_isCurrentDate)&&this.currentDateIndex<this.lastIndex?(e=0==this.currentDateIndex?this.tempLeft:+this.getStartY()+this.tempLeft-.01,this.updatechart(e,e+i)):this.updatechart(+this.getEndY()+(t-i),this.getStartY()):(e=+this.getEndY()+this.m_sliderleftperc*t,this.updatechart(e,e+i))))):this.drawSVGMessage(s.message)},BarChart.prototype.getBGGradientColorToScale=function(){for(var t=this,i=($("#"+t.svgTimeScaleId).empty(),document.createElementNS(NS,"linearGradient")),e=(i.setAttribute("id","gradient1"+t.m_objectid),i.setAttribute("gradientTransform","rotate("+this.m_bggradientrotation+")"),$("#"+t.svgTimeScaleId).append(i),this.getBgGradients().split(",")),s=100/(e.length-1!=0?e.length-1:1),a=0,r=e.length;a<=r-1;a++){var h=document.createElementNS(NS,"stop");h.setAttribute("offset",a*s+"%"),h.setAttribute("stop-color",hex2rgb(convertColorToHex(e[a]),this.m_bgalpha)),h.setAttribute("stop-opacity",this.m_bgalpha),$(i).append(h)}var o=drawSVGRect(0,0,this.sliderMargin,this.m_width,"");$(o).attr("id","GradientScaleRect"+t.m_objectid),$(o).css("opacity","0"),$(o).attr("fill","url(#gradient1"+t.m_objectid+")"),$("#"+t.svgTimeScaleId).append(o)},BarChart.prototype.sliderAxisCalculation=function(t,i){this.tempLeft=t-i;for(var e=new Date,s=0,a=this.CatData[0].length;s<a;s++){var r,h=new Date(this.CatData[0][s]);if(e.setHours(0,0,0,0)===h.setHours(0,0,0,0)){this.m_isCurrentDate=!0,this.currentDateIndex=s;for(var o=0;o<this.m_seriesNames.length;o++)if(IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[o]])){r=this.m_seriesNames[o];break}this.tempLeft=this.m_calculation.xPositionMap[r][s]-+this.getStartY(),this.tempLeft+i>t||this.currentDateIndex==this.lastIndex?this.tempLeft=t-i:(this.tempLeft<this.getStartY()||0==this.currentDateIndex)&&(this.tempLeft=+this.getStartY());break}}return this.tempLeft},BarChart.prototype.setMinMaxSliderIndex=function(){this.minSliderIndex=this.m_calculation.minSliderIndex,this.maxSliderIndex=this.m_calculation.maxSliderIndex},BarChart.prototype.initScaleChart=function(t){t.m_y=0,this.tempTitle=t.m_title.m_showtitle,this.tempSubTitle=t.m_subTitle.m_showsubtitle,t.m_title.m_showtitle=!1,t.m_showmaximizebutton=!0,t.m_showgradient=!1,t.m_showrangeselector=!1,t.setCategorySeriesData(),t.setAllFieldsName(),t.setAllFieldsDisplayName(),t.setColorsForSeries(),t.m_tooltip.init(t),IsBoolean(t.m_isEmptySeries)||(this.setPercentageForHundred(),t.initializeCalculation())},BarChart.prototype.updateDragChartFromSlider=function(t,i){if(!IsBoolean(this.updateflag)){for(var e=0,s=this.m_seriesNames.length;e<s&&!IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[e]]);e++);for(var a=0;a<this.m_calculation.getYPositionArray().length;a++)this.origonalXposition=this.m_calculation.getYPositionArray()[a];this.updateflag=!0}var r=[],h=[],o=[],l={},n={};r[0]=[],this.m_sliderindexes=[];for(var m=0,c=this.SerData.length;m<c;m++)h[m]=[],o[m]=[],l[this.m_seriesNames[m]]=[],n[this.m_seriesNames[m]]=[],this.m_sliderindexes[m]=[];this.m_sliderLastIndex=0<this.origonalXposition.length?this.origonalXposition.length-1:this.origonalXposition.length;for(var a=0,d=this.origonalXposition.length;a<d;a++)if(t<+this.origonalXposition[a]&&i>+this.origonalXposition[a]){r[0].push(this.CatData[0][a]);for(var m=0,_=this.SerData.length;m<_;m++)h[m].push(this.SerData[m][a]),this.m_sliderLastIndex=a,this.m_sliderindexes[m].push(a)}else if(+this.origonalXposition[a]>i)break;1<=r[0].length?(this.m_afterslider=!0,this.m_categoryData=r,this.m_seriesData=h,this.m_seriesDataLabel=o,this.m_conditionalcolorswithslider=l,this.m_plotradiusarray=n,this.startDate=r[0][0],this.endDate=r[0][r[0].length-1],this.m_overlappeddatalabelarrayY=[],this.m_overlappeddatalabelarrayX=[],this.init(),this.drawChart(),this.m_afterslider=!1):(this.startDate=r[0][0],this.endDate=r[0][0])},BarChart.prototype.drawScaleChart=function(t){t.drawScaleBar(),this.m_title.m_showtitle=this.tempTitle,this.m_subTitle.m_showsubtitle=this.tempSubTitle},BarChart.prototype.drawScaleBar=function(){if("gradient1"==this.m_chartbase)for(var t=0,i=this.visibleSeriesInfo.seriesName.length;t<i;t++)for(var e=0,s=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].xPixel.length;e<s;e++)this.createGradient1(this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].barStackArray[e].stackColor,t,e);else if("gradient2"==this.m_chartbase)for(var t=0,a=this.visibleSeriesInfo.seriesName.length;t<a;t++)for(e=0,s=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].xPixel.length;e<s;e++)this.createGradient2(this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].barStackArray[e].stackColor,t,e);else if("gradient3"==this.m_chartbase)for(t=0,a=this.visibleSeriesInfo.seriesName.length;t<a;t++)for(e=0,s=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].xPixel.length;e<s;e++)this.createGradient3(this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].barStackArray[e].stackColor,t,e);for(var r=0,a=this.visibleSeriesInfo.seriesName.length;r<a;r++){var h=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[r]];this.createStackGroupForSlider(h,"stackgrpslider",r,this.visibleSeriesInfo.seriesName[r]),h.drawBarSeries(r)}},BarChart.prototype.updatechart=function(t,i){this.updateDragChartFromSlider(t,i)},BarChart.prototype.sliderTextBox=function(){var t,i,e=this,s=this.getEndY(),a=this.getStartY()-this.getEndY(),r=(i=""==this.m_sliderTextField||null==this.m_sliderTextField?(t=e.CatData[0][0],e.CatData[0][e.CatData[0].length-1]):(t=e.m_dataProvider[0][this.m_sliderTextField],e.m_dataProvider[e.m_dataProvider.length-1][this.m_sliderTextField]),document.createElement("div")),s=(r.setAttribute("id","textdiv"+e.m_objectid),r.setAttribute("style","top:"+(s-this.fontScaling(this.m_yAxis.getLabelFontSize()))+"px;height:"+(2*this.fontScaling(this.m_yAxis.getLabelFontSize())+a)+"px; width:0px18px; position:absolute; display:flex; flex-direction:column;"),$(r).css({"font-family":selectGlobalFont(this.m_yAxis.getLabelFontFamily()),color:convertColorToHex(this.m_yAxis.getLabelFontColor()),"font-style":this.m_yAxis.getLabelFontStyle(),"font-size":this.fontScaling(this.m_yAxis.getLabelFontSize())+"px","font-weight":this.m_yAxis.getLabelFontWeight(),"text-decoration":this.m_yAxis.getLabelTextDecoration()}),this.m_sliderheightratio<5&&$(r).css({display:"none"}),document.createElement("div")),a=document.createElement("div");s.setAttribute("style","width:"+7*this.m_sliderheightratio+"px;overflow:hidden; white-space:nowrap;position: absolute;top: -4px;text-overflow:ellipsis;"),a.setAttribute("style","width:"+7*this.m_sliderheightratio+"px;overflow:hidden; white-space:nowrap;text-overflow:ellipsis;position: absolute;bottom: -6px"),r.append(s),r.append(a),""==this.m_sliderStartText&&""==this.m_sliderEndText?(s.innerHTML=t+":",a.innerHTML=i+":"):(s.innerHTML=this.m_sliderStartText+t,a.innerHTML=this.m_sliderEndText+i),$("#svgTimeScaleDiv"+e.m_objectid).append(r)},BarChart.prototype.drawslider=function(){$("#rangeslider"+this.m_objectid).remove(),IsBoolean(this.m_showslider)&&this.jquerySliderImplementation()},BarChart.prototype.jquerySliderImplementation=function(){var e,s=this,t=(this.getStartY(),this.getStartY()-this.getEndY()),a=null!=s.m_sliderwidthperc?s.m_sliderwidthperc*t:"auto"==this.m_sliderrange?3*t/10:+this.m_sliderrange*t/100,i=(IsBoolean(!s.m_slideronmaxmize)||null==this.m_sliderleftperc?"left"==this.m_sliderposition?e=+this.getStartY():"right"==this.m_sliderposition?e=t-a:(e=this.sliderAxisCalculation(t,a),0===this.currentDateIndex&&(e=this.sliderAxisCalculation(t,a)-+this.getStartY())):e=this.m_sliderleftperc*t,document.createElement("div")),r=(i.setAttribute("id","newSilderBody"+s.m_objectid),i.setAttribute("class","newSilderBody"),i.setAttribute("style","height:"+t+"px; width:"+this.m_sliderheight+"px; position:relative;top:"+this.getEndY()+"px;"),$(i).css({background:hex2rgb(this.m_sliderbordercolor,this.m_slideropacitycontainer),border:"1px solid "+hex2rgb(this.m_sliderbordercolor,this.m_sliderborderopacity)}),$("#svgTimeScaleDiv"+s.m_objectid).append(i),document.createElement("div")),h=(r.setAttribute("id","silderSelecterdiv"+s.m_objectid),r.setAttribute("class","easyui-draggable"),hex2rgb(this.m_sliderbordercolor,this.m_slideropacityselection)),h=(r.setAttribute("style","position:absolute;top:0px; height:"+a+"px; width:"+this.m_sliderheight+"px;  background:"+h+";cursor:move;"),$(r).css({"border-left":"1px solid "+hex2rgb(this.m_sliderbordercolor,this.m_sliderborderopacity),"border-right":"1px solid "+hex2rgb(this.m_sliderbordercolor,this.m_sliderborderopacity)}),"left"!=s.m_sliderposition&&$(r).css({top:e+"px"}),$(i).append(r),document.createElement("div")),i=(h.setAttribute("id","leftHandle"+s.m_objectid),$(r).append(h),hex2rgb(this.m_sliderbordercolor,this.m_sliderborderopacity)),h=($("#leftHandle"+s.m_objectid).attr("style","position:absolute;top:-2px;left:"+this.m_sliderheight/4+"px;height:5px;width:"+this.m_sliderheight/2.5+"px;border:1px solid "+i+";background:#F6F7F2;"),document.createElement("div")),i=(h.setAttribute("id","rightHandle"+s.m_objectid),$(r).append(h),hex2rgb(this.m_sliderbordercolor,this.m_sliderborderopacity));$("#rightHandle"+s.m_objectid).attr("style","position:absolute;left:"+this.m_sliderheight/4+"px;bottom:-2px;height:5px;width:"+this.m_sliderheight/2.5+"px;border:1px solid "+i+";background:#F6F7F2;"),$("#silderSelecterdiv"+s.m_objectid).draggable({axis:"y",containment:"#newSilderBody"+s.m_objectid,start:function(t,i){a=$(this).height()},drag:function(t,i){e=+$(this).position().top,s.updatechart(e,+e+ +a)},stop:function(t,i){e=+$(this).position().top,s.updatechart(e,+e+ +a)}}),$("#silderSelecterdiv"+s.m_objectid).resizable({axis:"y",containment:"#newSilderBody"+s.m_objectid,handles:"n,s",start:function(t,i){},resize:function(t,i){e=+i.position.top,15<(a=i.size.height)&&s.updatechart(e,+e+ +a)},stop:function(t,i){e=+i.position.top,a=i.size.height,s.updatechart(e,+e+ +a),s.resetSelectorToNormal()}}),$("#silderSelecterdiv"+s.m_objectid).draggable({axis:"v",containment:"#newSilderBody"+s.m_objectid,onStartDrag:function(t,i){a=$(t.data.target).outerHeight(),s.updatechart(e,+e+ +a)},onDrag:function(t,i){constrain(t),e=+s.getEndY()+ +$(this).position().top,s.updatechart(e,+e+ +a)},onStopDrag:function(t,i){constrain(t),e=+s.getEndY()+ +$(this).position().top,s.m_sliderleftperc=+$(this).position().top/(+s.getStartY()-+s.getEndY()),s.updatechart(e,+e+ +a)}}),$("#silderSelecterdiv"+s.m_objectid).resizable({minHeight:15,fit:!0,axis:"v",containment:"#newSilderBody"+s.m_objectid,maxHeight:t,handles:"n,s",onStartResize:function(t,i){},onResize:function(t,i){constrainResizable(t),e=+s.getEndY()+ +$(this).position().top,15<(a=t.data.height)&&s.updatechart(e,+e+ +a)},onStopResize:function(t,i){constrainResizable(t),$(this).css({top:t.data.top,height:t.data.height}),e=+s.getEndY()+ +$(this).position().top,a=t.data.height,s.m_sliderleftperc=+$(this).position().top/(+s.getStartY()-+s.getEndY()),s.m_sliderwidthperc=a/(+s.getStartY()-+s.getEndY()),s.updatechart(e,+e+ +a),s.resetSelectorToNormal()}}),IsBoolean(this.m_showslidertext)&&this.sliderTextBox()},BarChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},BarChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.createSVG(),$("#draggableCanvas"+this.m_objectid).hide(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEventForSVG(this.svgContainerId)},BarChart.prototype.createSVG=function(){var t,i=this,e=(this.svgContainerId="svgContainer"+i.m_objectid,$("#"+i.svgContainerId).remove(),document.createElementNS("http://www.w3.org/2000/svg","svg"));e.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.setAttribute("width",this.m_width),this.m_sliderheight=this.m_height/4,IsBoolean(this.getShowLegends())&&this.minWHRatio();IsBoolean(this.m_showslider)&&(IsBoolean(this.m_designMode)||IsBoolean(this.m_isDataSetavailable))&&(t=(t=this.m_height/4)<7*this.m_sliderheightratio?t<40?3*this.m_sliderheightratio:6*this.m_sliderheightratio:7*this.m_sliderheightratio,this.sliderMargin=t,!IsBoolean(this.getShowLegends())||IsBoolean(this.m_fixedlegend)||"horizontalBottomLeft"!=this.m_legendposition&&"horizontalBottomCenter"!=this.m_legendposition&&"horizontalBottomRight"!=this.m_legendposition?this.m_sliderheight=t-2:this.m_sliderheight=t),IsBoolean(this.m_showslider)&&e.setAttribute("width",this.m_width-this.m_sliderheight-10),e.setAttribute("height",this.m_height),e.setAttribute("id",this.svgContainerId),$("#draggableDiv"+i.m_objectid).append(e),IsBoolean(this.m_showslider)&&(IsBoolean(this.m_isDataSetavailable)||IsBoolean(this.m_designMode))?IsBoolean(!this.timeLineSliderFlag)&&($("#svgTimeScaleDiv"+i.m_objectid).remove(),this.getMarginForTitle(),IsBoolean(this.m_subTitle.m_showsubtitle)&&this.m_subTitle.m_titleMargin,(t=document.createElement("div")).setAttribute("id","svgTimeScaleDiv"+i.m_objectid),t.style.position="absolute",t.style.zIndex=i.m_zIndex,t.style.right="0px",t.style.top="0px",$("#draggableDiv"+i.m_objectid).append(t),this.svgTimeScaleId="svgTimeScale"+i.m_objectid,$("#"+i.svgTimeScaleId).remove(),(e=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("xlink","http://www.w3.org/1999/xlink"),this.getStartY(),this.getEndY(),e.setAttribute("height",this.m_height),e.setAttribute("width",this.m_sliderheight),this.m_sliderheightratio<=2&&e.setAttribute("display","none"),e.setAttribute("id",this.svgTimeScaleId),e.setAttribute("class","svg_chart_container"),$("#svgTimeScaleDiv"+i.m_objectid).append(e)):($("#svgTimeScaleDiv"+i.m_objectid).remove(),$("#rangeSelector"+i.m_objectid).remove())},BarChart.prototype.initializeCalculation=function(){var t=this.updateSeriesData(this.visibleSeriesInfo.seriesData),i=this.updateSeriesData(this.m_categoryData);this.calculateMinimumMaximum(t),this.setChartDrawingArea(),this.m_calculation.init(this,i,this.visibleSeriesInfo.seriesData),this.m_xPositionArray=this.m_calculation.getXPositionArray(),this.m_yPositionArray=this.m_calculation.getYPositionArray(),this.m_barWidth=this.m_calculation.getbarWidth(),this.m_noofseries=this.m_calculation.xAxisData.length,this.m_barGap=this.m_calculation.getBarGap(),this.m_barWidthArray=this.m_calculation.getstackHeightArray(),IsBoolean(this.getCounterFlagForSeriesVisiblity())&&IsBoolean(this.m_showmarkingorpercentvalue)?(this.m_percentageArray=!IsBoolean(this.m_showpercentvalue)||IsBoolean(this.getCheckedAllPosContainigZero())?this.getPercentage():this.getRoundValue(this.getPercentage(),100),this.m_showPerCentageFlag=!0):(this.m_percentageArray=this.getArrayWhenPercentFlagIsFalse(),this.m_seriesInitializeFlag=!1),this.setColorsForSeries(),this.initializeBars(),this.initializeDataLabel(),this.setThresholdFillColors()},BarChart.prototype.calculateMinimumMaximum=function(t){var i=IsBoolean(this.m_isRepeaterPart)&&IsBoolean(this.m_parentObj.m_repeatercommonmarker)?this.getAllSeriesDataForRepeater():t,i="clustered"==this.m_charttype.toLowerCase()||"overlaid"==this.m_charttype.toLowerCase()||"stacked"==this.m_charttype.toLowerCase()&&1===t[0].length?this.calculateMinMaxValue(i):this.calculateFinalMinMaxValue(t),t=i.min,i=i.max,t=this.getCalculateNiceScale(t,i,this.m_basezero,this.m_autoaxissetup,this.m_minimumaxisvalue,this.m_maximumaxisvalue,this.m_width);this.min=t.min,this.max=t.max,this.m_numberOfMarkers=t.markerArray.length,this.m_xAxisText=t.step,this.m_xAxisMarkersArray=t.markerArray},BarChart.prototype.calculateFinalMinMaxValue=function(t){var i=0,e=0;if("stacked"==this.m_charttype.toLowerCase()||""==this.m_charttype.toLowerCase())for(var s=0,a=t.length;s<a;s++){for(var r=0,h=0,o=0,l=t[s].length;o<l;o++)0<=t[s][o]?r=+r+ +(isNaN(t[s][o])?0:t[s][o]):h=+h+ +(isNaN(t[s][o])?0:t[s][o]);i<=r&&(i=+r),+h<e&&(e=+h)}else if("100%"==this.m_charttype){for(var n=!1,s=0,a=t.length;s<a;s++)for(var o=0,m=t[s].length;o<m;o++)if(t[s][o]<0){n=!0;break}i=100,e=IsBoolean(n)?-100:0}return{max:i,min:e}},BarChart.prototype.getCheckedAllPosContainigZero=function(){for(var t=!0,i=0,e=this.m_seriesData[this.m_seriesVisiblityPosition].length;i<e;i++)0!=this.m_seriesData[this.m_seriesVisiblityPosition][i]&&(t=!1);return t},BarChart.prototype.getArrayWhenPercentFlagIsFalse=function(){for(var t=[],i=0,e=this.m_seriesData.length;i<e;i++)t[i]=0;return t},BarChart.prototype.getPercentage=function(){for(var t=[],i=this.getSumOfSeriesData(),e=0,s=this.m_seriesData[this.m_seriesVisiblityPosition].length;e<s;e++)IsBoolean(this.m_showpercentvalue)?(0<this.m_seriesData[this.m_seriesVisiblityPosition][e]?t[e]=this.m_seriesData[this.m_seriesVisiblityPosition][e]/i*100:t[e]=0,this.m_showPercentValueFlag=!0):t[e]=this.m_seriesData[this.m_seriesVisiblityPosition][e];return t},BarChart.prototype.getSumOfSeriesData=function(){for(var t=0,i=0,e=this.m_seriesData[this.m_seriesVisiblityPosition].length;i<e;i++)"NaN"==this.m_seriesData[this.m_seriesVisiblityPosition][i]&&(this.m_seriesData[this.m_seriesVisiblityPosition][i]=0),0<this.m_seriesData[this.m_seriesVisiblityPosition][i]&&(t=+t+ +this.m_seriesData[this.m_seriesVisiblityPosition][i]);return t},BarChart.prototype.getAllSeriesDataForRepeater=function(){for(var t=[],i=0;i<this.m_parentObj.m_seriesNames.length;i++)if(t[i]=[],IsBoolean(this.m_parentObj.m_seriesVisibleArr[this.m_parentObj.m_seriesNames[i]]))for(var e=0;e<this.m_parentObj.m_dataProvider.length;e++){var s=removeCommaFromSrting(this.m_parentObj.m_dataProvider[e][this.m_parentObj.m_seriesNames[i]]);t[i][e]=s}return t=this.getUpdateSeriesDataWithCategory(t)},BarChart.prototype.initializeBars=function(){this.m_barSeriesArray={},"clustered"==this.m_charttype&&(this.m_barWidth=this.m_barWidth*this.clusteredbarpadding);for(var t=0,i=this.visibleSeriesInfo.seriesName.length;t<i;t++)this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]]=new BarSeries,this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].init(this.m_xPositionArray[t],this.m_yPositionArray[t],this.m_barWidth,this.m_barWidthArray[t],this.m_percentageArray,this.getColorsForSeries()[t],this.m_strokecolor,this.m_showmarkingorpercentvalue,this.m_showPercentValueFlag,this.m_seriesInitializeFlag,this.m_plotTrasparencyArray[t],this)},BarChart.prototype.initializeDataLabel=function(){this.m_valueTextSeries={};for(var t,i,e=0,s=0;s<this.m_seriesNames.length;s++)this.m_seriesDataForDataLabel[s]=this.visibleSeriesInfo.seriesData[s],IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[s]])&&("overlaid"!=this.m_charttype.toLowerCase()&&!IsBoolean(this.m_seriesDataLabelProperty[s].showDataLabel)||(this.m_datalablebackgroundrect=!!IsBoolean(this.m_seriesDataLabelProperty[s].datalabelBackgroundRect)||this.m_datalablebackgroundrect,this.m_valueTextSeries[this.m_seriesNames[s]]=new ValueTextSeries,"100%"==this.m_charttype&&void 0!==this.m_seriesDataLabelProperty[e].showPercentValue&&IsBoolean(this.m_seriesDataLabelProperty[e].showPercentValue)&&(this.m_seriesDataForDataLabel[e]=this.getPercentageForHundred()[e]),t="overlaid"==this.m_charttype.toLowerCase()?this.m_seriesDataLabelPropertyOverlaid[e]:this.m_seriesDataLabelProperty[s],i="overlaid"==this.m_charttype.toLowerCase()?this.m_actualseriesdatamap[e]:this.m_seriesData[s],this.m_valueTextSeries[this.m_seriesNames[s]].init(this.m_xPositionArray[e],this.m_yPositionArray[e],this,this.m_seriesDataForDataLabel[e],t,i,this.m_barWidth,this.m_barWidthArray[e])),e++)},BarChart.prototype.getColorsForSeries=function(){return this.m_seriesColorsArray},BarChart.prototype.setColorsForSeries=function(){if(this.m_seriesColorsArray=[],IsBoolean(this.m_enablecolorfromdrill)&&IsBoolean(this.m_startDrill))for(var t=0,i=this.visibleSeriesInfo.seriesData.length;t<i;t++){this.m_seriesColorsArray[t]=[];for(var e=0,s=this.visibleSeriesInfo.seriesData[t].length;e<s;e++)this.m_seriesColorsArray[t][e]=this.m_drillColor}else if("overlaid"==this.m_charttype||"Overlaid"==this.m_charttype)this.m_seriesColorsArray=this.m_calculation.getSeriesColorForOverlaid();else if(!IsBoolean(this.m_designMode)&&""!=this.getCategoryColors()&&0<this.getCategoryColors().getCategoryColor().length&&IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName()))for(var a=this.getCategoryColors().getCategoryColorsForCategoryNames(this.getCategoryData()[0],this.m_categoryFieldColor),t=0,i=this.visibleSeriesInfo.seriesData.length;t<i;t++){this.m_seriesColorsArray[t]=[];for(e=0,s=this.visibleSeriesInfo.seriesData[t].length;e<s;e++)this.m_seriesColorsArray[t][e]=a[e]}else if(IsBoolean(this.m_designMode)||""==this.getCategoryColors()||IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName())&&0!=this.getCategoryColors().getCategoryColor().length||""==this.getConditionalColors()||null==this.getConditionalColors()||!(0<this.getConditionalColors().getConditionalColor().length))for(var r=this.visibleSeriesInfo.seriesColor,t=0,i=this.visibleSeriesInfo.seriesData.length;t<i;t++){this.m_seriesColorsArray[t]=[];for(e=0,s=this.visibleSeriesInfo.seriesData[t].length;e<s;e++)this.m_seriesColorsArray[t][e]=r[t]}else for(var h=this.getConditionalColors().getConditionalColorsForConditions(this.visibleSeriesInfo.seriesName,this.visibleSeriesInfo.seriesColor,this.visibleSeriesInfo.seriesData,this),t=0,i=this.visibleSeriesInfo.seriesData.length;t<i;t++){this.m_seriesColorsArray[t]=[];for(var e=0,s=this.visibleSeriesInfo.seriesData[t].length;e<s;e++)this.m_seriesColorsArray[t][e]=h[t][e]}},BarChart.prototype.updateSeriesData=function(t){var i=[];if(null!=t&&null!==t&&""!==t&&0!=t.length)for(var e=0,s=t[0].length;e<s;e++){i[e]=[];for(var a=0,r=t.length;a<r;a++)i[e][a]=t[a][e]}return i},BarChart.prototype.drawObject=function(){this.drawSVGObject(),IsBoolean(!this.timeLineSliderFlag)&&this.getBGGradientColorToScale()},BarChart.prototype.draw=function(){this.timeLineSliderFlag=!1,Chart.prototype.draw.call(this)},BarChart.prototype.drawTitle=function(){this.m_title.draw()},BarChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},BarChart.prototype.drawXAxis=function(){this.createXAxisMarkerLabelGroup("xaxislabelgrp"),this.m_xAxis.markXaxis(),this.m_xAxis.drawXAxis()},BarChart.prototype.drawYAxis=function(){IsBoolean(this.m_showhorizontalmarkerline)&&(this.createHorizontalLineGroup("horizontallinegrp"),this.m_yAxis.horizontalMarkerLines()),IsBoolean(this.m_showmarkerline)&&(this.createVerticalLineGroup("verticallinegrp"),this.m_yAxis.drawVerticalLine()),IsBoolean(this.m_zeromarkerline)&&!IsBoolean(this.m_basezero)&&IsBoolean(this.m_yAxis.hasNegativeXaxisMarker(this.m_xAxisMarkersArray))&&this.m_yAxis.zeroMarkerLine(),this.createTickGroup("yaxistickgrp"),this.m_yAxis.drawTickMarks(),this.createYAxisMarkerLabelGroup("yaxislabelgrp"),this.m_yAxis.markYaxis(),this.m_yAxis.drawYAxis()},BarChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawSVGFrame(),this.getBGGradientColorToContainer()},BarChart.prototype.getBGGradientColorToContainer=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","defs"),i=document.createElementNS(NS,"filter"),e=(i.setAttribute("id","stackShadow"+this.m_objectid),document.createElementNS(NS,"feOffset")),s=(e.setAttribute("dx","0"),e.setAttribute("dy","0"),e.setAttribute("result","offOut"),e.setAttribute("in","SourceGraphic"),document.createElementNS(NS,"feGaussianBlur")),a=(s.setAttribute("result","blurOut"),s.setAttribute("in","offOut"),s.setAttribute("stdDeviation","1"),document.createElementNS(NS,"feColorMatrix")),r=(a.setAttribute("in","blurOut"),a.setAttribute("result","color-out"),a.setAttribute("type","matrix"),a.setAttribute("values",hex2Matrix(this.m_stackshadowcolor,this.m_stackshadowopacity)),document.createElementNS(NS,"feBlend"));r.setAttribute("in","SourceGraphic"),r.setAttribute("in2","color-out"),r.setAttribute("mode","normal"),i.appendChild(e),i.appendChild(s),i.appendChild(a),i.appendChild(r),t.appendChild(i),$("#"+this.svgContainerId).append(t)},BarChart.prototype.drawBarChart=function(){if("gradient1"==this.m_chartbase)for(var t=0,i=this.visibleSeriesInfo.seriesName.length;t<i;t++)for(var e=0,s=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].xPixel.length;e<s;e++)this.createGradient1(this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].barStackArray[e].stackColor,t,e);else if("gradient2"==this.m_chartbase)for(var t=0,a=this.visibleSeriesInfo.seriesName.length;t<a;t++)for(e=0,s=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].xPixel.length;e<s;e++)this.createGradient2(this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].barStackArray[e].stackColor,t,e);else if("gradient3"==this.m_chartbase)for(t=0,a=this.visibleSeriesInfo.seriesName.length;t<a;t++)for(e=0,s=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].xPixel.length;e<s;e++)this.createGradient3(this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].barStackArray[e].stackColor,t,e);for(var r=0,a=this.visibleSeriesInfo.seriesName.length;r<a;r++){var h=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[r]];this.createStackGroup(h,"stackgrp",r,this.visibleSeriesInfo.seriesName[r]),h.drawBarSeries(r)}},BarChart.prototype.drawDataLabel=function(){for(var t,i=0,e=this.m_seriesNames.length;i<e;i++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[i]])&&(t=this.m_valueTextSeries[this.m_seriesNames[i]],"overlaid"!=this.m_charttype.toLowerCase()&&!IsBoolean(this.m_seriesDataLabelProperty[i].showDataLabel)||(this.createDataLabelGroup(t,"datalabelgrp",i,this.m_seriesNames[i]),t.drawValueTextSeries()))},BarChart.prototype.drawThreshold=function(){var t,i,e,s;IsBoolean(this.m_showxaxisthreshold)&&(t=+getNumericComparableValue(this.m_xAxis.m_chart.m_xAxisMarkersArray[0]),i=+getNumericComparableValue(this.m_xAxis.m_chart.m_xAxisMarkersArray[this.m_xAxis.m_chart.m_xAxisMarkersArray.length-1]),this.m_minimumxaxisthreshold=IsBoolean(this.m_minimumxaxisthresholdline)?this.m_minimumxaxisthreshold:this.m_xAxis.m_chart.m_xAxis.m_xAxisActualMarkersArray[0],e=1/(i-t)*(+this.m_endX-+this.m_startX),s={},IsBoolean(this.m_autoaxissetup)&&IsBoolean(this.m_basezero)?(+this.m_minimumxaxisthreshold<t&&(this.m_minimumxaxisthreshold=t),+this.m_maximumxaxisthreshold>i&&(this.m_maximumxaxisthreshold=i),+this.m_maximumxaxisthreshold<t&&(this.m_maximumxaxisthreshold=t),+this.m_minimumxaxisthreshold>i&&(this.m_minimumxaxisthreshold=i),+this.m_minimumxaxisthreshold<t&&+this.m_maximumxaxisthreshold>i?(s.x1=+this.m_startX,s.y1=+this.m_startY,s.x2=+this.m_startX,s.y2=+this.m_endY,s.X1=+this.m_endX,s.Y1=+this.m_startY,s.X2=+this.m_endX):+this.m_minimumxaxisthreshold<t?(s.x1=+this.m_startX,s.y1=+this.m_startY,s.x2=+this.m_startX,s.y2=+this.m_endY,s.X1=+this.m_startX+this.m_maximumxaxisthreshold*e,s.Y1=+this.m_startY,s.X2=+this.m_startX+this.m_maximumxaxisthreshold*e):+this.m_maximumxaxisthreshold>i?(s.x1=+this.m_startX+this.m_minimumxaxisthreshold*e,s.y1=+this.m_startY,s.x2=+this.m_startX+this.m_minimumxaxisthreshold*e,s.y2=+this.m_endY,s.X1=+this.m_endX,s.Y1=+this.m_startY,s.X2=+this.m_endX):(s.x1=+this.m_startX+this.m_minimumxaxisthreshold*e,s.y1=+this.m_startY,s.x2=+this.m_startX+this.m_minimumxaxisthreshold*e,s.y2=+this.m_endY,s.X1=+this.m_startX+this.m_maximumxaxisthreshold*e,s.Y1=+this.m_startY,s.X2=+this.m_startX+this.m_maximumxaxisthreshold*e),s.Y2=+this.m_endY):s=this.thresholdXAxisCalculation(t,i,e),this.m_fillcolorarray=[],hex2rgb(this.m_markercolor,this.m_markertransparency),IsBoolean(this.m_minimumxaxisthresholdline)&&this.drawLineBetweenPoints(t,i,this.m_minimumxaxisthreshold,this.m_xaxisthresholdlinewidth,.5,this.m_minimumthresholdstrokecolor,s.x1,s.y1,s.x2,s.y2),this.drawLineBetweenPoints(t,i,this.m_maximumxaxisthreshold,this.m_xaxisthresholdlinewidth,.5,this.m_maximumthresholdstrokecolor,s.X1,s.Y1,s.X2,s.Y2),this.fillColorBetweenPoints(this.m_fillcolorarray,.5,.5,"#ffffff",s.x1,s.y2,s.X2-s.x1,s.Y1-s.Y2))},BarChart.prototype.thresholdXAxisCalculation=function(t,i,e){var s={};return t<0?(i<0||(+this.m_minimumxaxisthreshold<t&&(this.m_minimumxaxisthreshold=t),+this.m_maximumxaxisthreshold>i&&(this.m_maximumxaxisthreshold=i),+this.m_maximumxaxisthreshold<t&&(this.m_maximumxaxisthreshold=t),+this.m_minimumxaxisthreshold>i&&(this.m_minimumxaxisthreshold=i)),+this.m_minimumxaxisthreshold<+t&&+this.m_maximumxaxisthreshold>+i?(s.x1=+this.m_startX,s.y1=+this.m_startY,s.x2=+this.m_startX,s.y2=+this.m_endY,s.X1=+this.m_endX,s.Y1=+this.m_startY,s.X2=+this.m_endX):+this.m_minimumxaxisthreshold<+t?(s.x1=+this.m_startX,s.y1=+this.m_startY,s.x2=+this.m_startX,s.y2=+this.m_endY,s.X1=+this.m_startX+this.m_maximumxaxisthreshold*e-t*e,s.Y1=+this.m_startY,s.X2=+this.m_startX+this.m_maximumxaxisthreshold*e-t*e):+this.m_maximumxaxisthreshold>+i?(s.x1=+this.m_startX+this.m_minimumxaxisthreshold*e-t*e,s.y1=+this.m_startY,s.x2=+this.m_startX+this.m_minimumxaxisthreshold*e-t*e,s.y2=+this.m_endY,s.X1=+this.m_endX,s.Y1=+this.m_startY,s.X2=+this.m_endX):(s.x1=+this.m_startX+this.m_minimumxaxisthreshold*e-t*e,s.y1=+this.m_startY,s.x2=+this.m_startX+this.m_minimumxaxisthreshold*e-t*e,s.y2=+this.m_endY,s.X1=+this.m_startX+this.m_maximumxaxisthreshold*e-t*e,s.Y1=+this.m_startY,s.X2=+this.m_startX+this.m_maximumxaxisthreshold*e-t*e),s.Y2=+this.m_endY):i<0||(+this.m_minimumxaxisthreshold<t&&(this.m_minimumxaxisthreshold=t),+this.m_maximumxaxisthreshold>i&&(this.m_maximumxaxisthreshold=i),+this.m_maximumxaxisthreshold<t&&(this.m_maximumxaxisthreshold=t),+this.m_minimumxaxisthreshold>i&&(this.m_minimumxaxisthreshold=i),+this.m_minimumxaxisthreshold<+t&&+this.m_maximumxaxisthreshold>+i?(s.x1=+this.m_startX,s.y1=+this.m_startY,s.x2=+this.m_startX,s.y2=+this.m_endY,s.X1=+this.m_endX,s.Y1=+this.m_startY,s.X2=+this.m_endX):+this.m_minimumxaxisthreshold<+t?(s.x1=+this.m_startX,s.y1=+this.m_startY,s.x2=+this.m_startX,s.y2=+this.m_endY,s.X1=+this.m_startX+this.m_maximumxaxisthreshold*e-t*e,s.Y1=+this.m_startY,s.X2=+this.m_startX+this.m_maximumxaxisthreshold*e-t*e):+this.m_maximumxaxisthreshold>+i?(s.x1=+this.m_startX+this.m_minimumxaxisthreshold*e-t*e,s.y1=+this.m_startY,s.x2=+this.m_startX+this.m_minimumxaxisthreshold*e-t*e,s.y2=+this.m_endY,s.X1=+this.m_endX,s.Y1=+this.m_startY,s.X2=+this.m_endX):(s.x1=+this.m_startX+this.m_minimumxaxisthreshold*e-t*e,s.y1=+this.m_startY,s.x2=+this.m_startX+this.m_minimumxaxisthreshold*e-t*e,s.y2=+this.m_endY,s.X1=+this.m_startX+this.m_maximumxaxisthreshold*e-t*e,s.Y1=+this.m_startY,s.X2=+this.m_startX+this.m_maximumxaxisthreshold*e-t*e),s.Y2=+this.m_endY),s},BarChart.prototype.drawLineBetweenPoints=function(t,i,e,s,a,r,h,o,l,n,m){h&&h!=1/0&&l!=1/0&&l&&(r=hex2rgb(r,m),(m=document.createElementNS("http://www.w3.org/2000/svg","line")).setAttribute("x1",h),m.setAttribute("y1",o),m.setAttribute("x2",l),m.setAttribute("y2",n),m.setAttribute("stroke",r),m.setAttribute("stroke-width",s),$("#"+this.svgContainerId).append(m),t<e)&&e<i&&this.m_fillcolorarray.push({X1:h,Y1:o,X2:l,Y2:n})},BarChart.prototype.fillColorBetweenPoints=function(t,i,e,s,a,r,h,o){if(IsBoolean(this.m_enablethresholdfill)&&0<t.length){for(var l=t[0].X1,n=t[0].X1,m=1;m<t.length;m++)(c=t[m]).X1<l&&(l=c.X1),c.X1>n&&(n=c.X1);var c,d=(c=t[0]).Y1,_=c.Y2,g=Math.min(d,_),d=Math.max(d,_),_=Math.min(n,this.m_startX),p=(Math.max(n,this.m_startX),l-_),d=d-g,x=_+p/2,u=g+d/2,y=hex2rgb(this.m_fillBelowLowerThreshold,+this.m_fillBelowThresholdOpacity),_=drawSVGRect(_,g,p,d,y),_=($("#"+this.svgContainerId).append(_),drawSVGText(x,u,this.m_BelowThresholdLabel,hex2rgb(this.m_BelowThresholdLabelColor,1),"center","middle",0));_.setAttribute("style","font-family:"+selectGlobalFont(this.m_statusfontfamily)+";font-style:none;font-size:16px;font-weight:normal;text-decoration:none;");this.ctx.measureText(this.m_BelowThresholdLabel).width<=p&&$("#"+this.svgContainerId).append(_);x=l,p=n-x,y=hex2rgb(this.m_fillBetweenThreshold,+this.m_fillBetweenThresholdOpacity),_=drawSVGRect(x,g,p,d,y);$("#"+this.svgContainerId).append(_);0<p&&((_=drawSVGText(x+p/2,u,this.m_BetweenThresholdLabel,hex2rgb(this.m_BetweenThresholdLabelColor,1),"center","middle",0)).setAttribute("style","font-family:"+selectGlobalFont(this.m_statusfontfamily)+";font-style:none;font-size:16px;font-weight:normal;text-decoration:none;"),this.ctx.measureText(this.m_BetweenThresholdLabel).width<=p)&&$("#"+this.svgContainerId).append(_);x=Math.min(n,this.m_endX),p=Math.max(n,this.m_endX)-x,_=x+p/2,y=hex2rgb(this.m_fillAboveUpperThreshold,+this.m_fillUpperThresholdOpacity),x=drawSVGRect(x,g,p,d,y),g=($("#"+this.svgContainerId).append(x),drawSVGText(_,u,this.m_UpperThresholdLabel,hex2rgb(this.m_UpperThresholdLabelColor,1),"center","middle",0));g.setAttribute("style","font-family:"+selectGlobalFont(this.m_statusfontfamily)+";font-style:none;font-size:16px;font-weight:normal;text-decoration:none;"),this.ctx.measureText(this.m_UpperThresholdLabel).width<=p&&$("#"+this.svgContainerId).append(g)}},BarChart.prototype.setThresholdFillColors=function(){var t,i,e,s;0<this.m_thresholdfillcolor.length&&(t=this.m_thresholdfillcolor.split(","),this.m_thresholdfilllevel.split(","),i=this.m_thresholdfillopacity.split(","),e=this.m_thresholdfilllabel.split(","),s=this.m_thresholdfilllabelcolor.split(","),this.m_fillBelowLowerThreshold=t[0],this.m_fillBetweenThreshold=t[1],this.m_fillAboveUpperThreshold=t[2],this.m_fillBelowThresholdOpacity=i[0],this.m_fillBetweenThresholdOpacity=i[1],this.m_fillUpperThresholdOpacity=i[2],this.m_BelowThresholdLabel=e[0],this.m_BetweenThresholdLabel=e[1],this.m_UpperThresholdLabel=e[2],this.m_BelowThresholdLabelColor=s[0],this.m_BetweenThresholdLabelColor=s[1],this.m_UpperThresholdLabelColor=s[2])},BarChart.prototype.getArraySUM=function(t){for(var i=0,e=0,s=t.length;e<s;e++)t[e]<0&&(t[e]=-1*t[e]),isNaN(t[e])||(i=+i+ +t[e]);return i},BarChart.prototype.getUpdateSeriesDataWithCategory=function(t){for(var i=[],e=0,s=t[0].length;e<s;e++){i[e]=[];for(var a=0,r=t.length;a<r;a++)i[e][a]=t[a][e]}return i},BarChart.prototype.setPercentageForHundred=function(){for(var t=this.getUpdateSeriesDataWithCategory(this.visibleSeriesInfo.seriesData),i=(this.m_SeriesDataInPerForHundredChart,[]),e=0,s=t.length;e<s;e++){var a=this.getArraySUM(t[e]);i[e]=[];for(var r=0,h=t[e].length;r<h;r++)""===t[e][r]||isNaN(t[e][r])?i[e][r]=0:i[e][r]=t[e][r]/a*100}0<i.length&&(this.m_SeriesDataInPerForHundredChart=this.getUpdateSeriesDataForHundredPercentageChart(i))},BarChart.prototype.getUpdateSeriesDataForHundredPercentageChart=function(t){for(var i=[],e=0,s=t[0].length;e<s;e++){i[e]=[];for(var a=0,r=t.length;a<r;a++)i[e][a]=t[a][e]}for(e=0,s=this.visibleSeriesInfo.seriesData.length;e<s;e++)for(var a=0,h=this.visibleSeriesInfo.seriesData[e].length;a<h;a++)isNaN(this.visibleSeriesInfo.seriesData[e][a])||+this.visibleSeriesInfo.seriesData[e][a]<0&&(i[e][a]=-1*i[e][a]);return i},BarChart.prototype.getPercentageForHundred=function(){return this.m_SeriesDataInPerForHundredChart},BarChart.prototype.getVisibleActualSeriesData=function(){for(var t=[],i=0,e=0;this.visibleSeriesInfo.seriesData.length>e;e++)this.m_seriesDataForToolTip[e]=this.visibleSeriesInfo.seriesData[e],t[i]=[],t[i]=this.m_seriesDataForToolTip[e],i++;return t},BarChart.prototype.getToolTipData=function(t,i){var e;if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries())&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType)){var s="clustered"==this.m_charttype?this.m_barWidth*this.m_yPositionArray.length:this.m_barWidth,a="";if(t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY()){for(var r=this.getVisibleActualSeriesData(),h=(this.yPositions=this.m_calculation.getYPositionforToolTip(),this.getPercentageForHundred()),o=0,l=this.yPositions.length;o<l;o++)if(i<=+this.yPositions[o]+ +s&&i>=+this.yPositions[o]){if((e={cat:""}).data=new Array,e.cat=this.getCategoryData()[0][o],"Default"==this.m_customtextboxfortooltip.dataTipType){for(var n=0,m=0,c=r.length;n<c;n++){var d=[],_=(d[0]={shape:this.legendMap[this.getSeriesNames()[n]].shape},IsBoolean(this.m_enablecolorfromdrill)&&IsBoolean(this.m_startDrill)?d[0].color="overlaid"!=this.m_charttype?this.getColorsForSeries()[n][o]:this.m_drillColor:d[0].color="overlaid"!=this.m_charttype?this.getColorsForSeries()[n][o]:this.visibleSeriesInfo.seriesColor[n],d[1]=this.visibleSeriesInfo.seriesDisplayName[n],a=""==r[n][o]||isNaN(r[n][o])||null==r[n][o]||"null"==r[n][o]?r[n][o]:(_=+r[n][o])%1!=0&&"default"!==this.m_tooltipprecision?_.toFixed(this.m_tooltipprecision):+r[n][o],this.getUpdatedFormatterForToolTip(a,this.visibleSeriesInfo.seriesName[n]));if(d[2]=_,"100%"==this.m_charttype&&1<this.getSeriesDisplayNames().length){"auto"==this.m_tooltipproperties.tooltippercentprecision?0==countDecimal(h[n][o].toString())?d[3]=h[n][o]+"%":(d[3]=h[n][o].toFixed(2),d[3]=d[3]%1==0?(+d[3]).toFixed()+"%":d[3]+"%"):d[3]=h[n][o].toFixed(this.m_tooltipproperties.tooltippercentprecision)+"%";for(var g=0,p=0;p<=n;p++)isNaN(r[p][o])||(g+=+r[p][o]);for(var x=0,u=0;u<=n;u++)isNaN(h[u][o])||(x+=h[u][o]);IsBoolean(this.m_tooltipproperties.showcummulativesum)&&(d[4]=this.getNumberWithCommas(g)),IsBoolean(this.m_tooltipproperties.showcummulativepercent)&&(d[5]=x.toFixed(2)+"%")}e.data[m]=d,m++}e.highlightIndex=this.getDrillColor(t,i),IsBoolean(this.m_controlledtooltip)&&(e=this.updateTooltipData(e));break}e=this.getDataProvider()[o]}}else this.hideToolTip()}return e},BarChart.prototype.getDrillColor=function(t,i){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&(this.xPositionArr=this.m_calculation.getXPositionArray(),this.yAxisDataArray=this.m_calculation.getYPositionArray(),this.m_barWidthArray=this.m_calculation.getstackHeightArray(),t>=this.getStartX())&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY()){var e,s="stacked"==this.m_charttype?0:this.m_drillminstackheight;if(IsBoolean(this.m_basezero)&&(e=this.getVisibleActualSeriesData()),"overlaid"!=this.m_charttype){for(var a=0,r=this.yAxisDataArray.length;a<r;a++)for(var h,o=0,l=this.yAxisDataArray[a].length;o<l;o++)if(m=+this.m_barWidthArray[a][o]<0?(h=+this.m_barWidthArray[a][o]<-s?+this.m_barWidthArray[a][o]:-s,n=+this.xPositionArr[a][o],+this.xPositionArr[a][o]+h):(h=IsBoolean(this.m_basezero)&&+e[a][o]<0?0:+this.m_barWidthArray[a][o]>s?+this.m_barWidthArray[a][o]:s,n=+this.xPositionArr[a][o]+h,+this.xPositionArr[a][o]),t<=n&&m<=t&&i<=+this.yAxisDataArray[a][o]+ +this.m_barWidth&&i>=+this.yAxisDataArray[a][o])return a}else for(a=this.yAxisDataArray.length-1;0<=a;a--)for(var n,m,o=this.yAxisDataArray[a].length-1;0<=o;o--)if(m=+this.m_barWidthArray[a][o]<0?(h=+this.m_barWidthArray[a][o]<-s?+this.m_barWidthArray[a][o]:-s,n=+this.xPositionArr[a][o],+this.xPositionArr[a][o]+h):(h=IsBoolean(this.m_basezero)&&+e[a][o]<0?0:+this.m_barWidthArray[a][o]>s?+this.m_barWidthArray[a][o]:s,n=+this.xPositionArr[a][o]+h,+this.xPositionArr[a][o]),t<=n&&m<=t&&i<=+this.yAxisDataArray[a][o]+ +this.m_barWidth&&i>=+this.yAxisDataArray[a][o])return this.m_calculation.m_originalindexforoverlaiddata[2][a][o]}},BarChart.prototype.getDrillDataPoints=function(t,i){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries())&&(this.xPositionArr=this.m_calculation.getXPositionArray(),this.yAxisDataArray=this.m_calculation.getYPositionArray(),this.m_barWidthArray=this.m_calculation.getstackHeightArray(),t>=this.getStartX())&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY()){var e,s=!1,a="stacked"==this.m_charttype?0:this.m_drillminstackheight;if(IsBoolean(this.m_basezero)&&(e=this.getVisibleActualSeriesData()),"overlaid"!=this.m_charttype){for(var r=0,h=this.yAxisDataArray.length;r<h;r++)for(var o,l=0,n=this.yAxisDataArray[r].length;l<n;l++)if(A=+this.m_barWidthArray[r][l]<0?(o=+this.m_barWidthArray[r][l]<-a?+this.m_barWidthArray[r][l]:-a,f=+this.xPositionArr[r][l],+this.xPositionArr[r][l]+o):(o=IsBoolean(this.m_basezero)&&+e[r][l]<0?0:+this.m_barWidthArray[r][l]>a?+this.m_barWidthArray[r][l]:a,f=+this.xPositionArr[r][l]+o,+this.xPositionArr[r][l]),t<=f&&A<=t&&i<=+this.yAxisDataArray[r][l]+ +this.m_barWidth&&i>=+this.yAxisDataArray[r][l]){for(var m=this.getFieldNameValueMap(l),c=this.getColorsForSeries()[r][l],d=this.visibleSeriesInfo.seriesName[r],_=this.visibleSeriesInfo.seriesDisplayName[r],g=m[d],p=(m.drillField=d,m.drillDisplayField=_,m.drillValue=g,s=!0,m.drillIndex=l,this.m_categoryNames),x=[],l=0;l<p.length;l++)x.push(m[p[l]]);return m.drillCategoryNames=p,m.drillCategory=x,IsBoolean(this.m_drilltoggle)?this.m_drilltoggle=!1:this.m_drilltoggle=!0,{drillRecord:m,drillColor:c}}if("stacked"==this.m_charttype&&!s)for(var u=0,h=this.yPositions.length;u<h;u++)if(i<=+this.yPositions[u]+ +this.m_barWidth&&i>=+this.yPositions[u])for(var y=0,b=this.xPositionArr.length;y<b;y++)if(t>=this.xPositionArr[y][u]&&t<=this.xPositionArr[y][u]+this.m_drillminstackheight||t<=this.xPositionArr[y][u]+this.m_barWidthArray[y][u]&&t>=this.xPositionArr[y][u]-this.m_drillminstackheight)return m=this.getFieldNameValueMap(u),c=this.m_drillColor,g=_=d="",m.drillField=d,m.drillDisplayField=_,m.drillValue=g,s=!0,{drillRecord:m,drillColor:c}}else for(r=this.yAxisDataArray.length-1;0<=r;r--)for(var f,A,l=this.yAxisDataArray[r].length-1;0<=l;l--)if(A=+this.m_barWidthArray[r][l]<0?(o=+this.m_barWidthArray[r][l]<-a?+this.m_barWidthArray[r][l]:-a,f=+this.xPositionArr[r][l],+this.xPositionArr[r][l]+o):(o=IsBoolean(this.m_basezero)&&+e[r][l]<0?0:+this.m_barWidthArray[r][l]>a?+this.m_barWidthArray[r][l]:a,f=+this.xPositionArr[r][l]+o,+this.xPositionArr[r][l]),t<=f&&A<=t&&i<=+this.yAxisDataArray[r][l]+ +this.m_barWidth&&i>=+this.yAxisDataArray[r][l])return m=this.getFieldNameValueMap(l),c=this.getColorsForSeries()[r][l],d=this.visibleSeriesInfo.seriesName[this.m_calculation.m_originalindexforoverlaiddata[2][r][l]],_=this.visibleSeriesInfo.seriesDisplayName[this.m_calculation.m_originalindexforoverlaiddata[2][r][l]],g=m[d],m.drillField=d,m.drillDisplayField=_,m.drillValue=g,m.drillIndex=l,IsBoolean(this.m_drilltoggle)?this.m_drilltoggle=!1:this.m_drilltoggle=!0,{drillRecord:m,drillColor:c}}},BarCalculation.prototype.init=function(t,i,e){this.m_chart=t,this.yAxisData=i,this.xAxisData=e,"clustered"==this.m_chart.m_charttype?this.m_maxbarwidth=this.m_chart.m_maxbarwidth*(1+.5*(this.xAxisData.length-1)):this.m_maxbarwidth=this.m_chart.m_maxbarwidth,this.m_chartType=this.m_chart.getChartType(),"stacked"!=this.m_chartType.toLowerCase()&&"100%"!=this.m_chartType&&""!=this.m_chartType||(this.xAxisData=this.setStackedData(this.xAxisData)),this.barGap=10,this.startX=this.m_chart.getStartX(),this.startY=this.m_chart.getStartY(),this.endX=this.m_chart.getEndX(),this.endY=this.m_chart.getEndY(),this.calculateBarWidth(),this.setRatio(),this.setXPositionArray(),this.setYPositionArray()},BarCalculation.prototype.getStartX=function(){return+this.startX},BarCalculation.prototype.getMaxValue=function(){return this.m_chart.max},BarCalculation.prototype.getMinValue=function(){return this.m_chart.min},BarCalculation.prototype.getXAxisText=function(){return this.m_chart.m_xAxisText},BarCalculation.prototype.getXAxisMarkersArray=function(){return this.m_chart.m_xAxisMarkersArray},BarCalculation.prototype.calculateBarWidth=function(){var t,i=this.yAxisData.length,e=(this.barGap,+this.getDrawHeight()),i=(t="auto"!=this.m_chart.m_controlbarwidth&&this.m_chart.m_controlbarwidth<e/i?this.m_chart.m_controlbarwidth:(t=e/i)*this.m_chart.m_barwidth/100,new Date(this.maxDate).getTime()),i=isNaN(i)?.001:i,s=new Date(this.minDate).getTime(),a=(s=isNaN(s)?0:s,this.getDataFrequencyInMS(this.yAxisData)),i=e/(i-s+a)*a;this.minSliderIndex=0,this.maxSliderIndex=parseInt(e/i),this.setBarWidth(t),this.setColumnGap(t)},BarCalculation.prototype.getDataFrequencyInMS=function(t){for(var i,e=new Date(isNaN(t[0])?t[0]:+t[0]),s=new Date(isNaN(t[1])?t[1]:+t[1]),a=Math.abs(Math.floor(e.getTime()-s.getTime())),r=t.length,h=0;h<r;h++)1<=h&&(e=new Date(isNaN(t[h-1])?t[h-1]:+t[h-1]),s=new Date(isNaN(t[h])?t[h]:+t[h]),a=(i=Math.abs(Math.floor(e.getTime()-s.getTime())))<(a=0===a&&0!==i?i:a)&&0!=i?i:a);return a/864e5==28||a/864e5==29?2592e6:a},BarCalculation.prototype.setBarWidth=function(t){this.barWidth=t,"clustered"==this.m_chart.m_charttype.toLowerCase()&&(this.barWidth/=this.xAxisData.length)},BarCalculation.prototype.setColumnGap=function(t){t*=this.yAxisData.length,t=this.getDrawHeight()-t;this.barGap=t/+this.yAxisData.length},BarCalculation.prototype.drawBaseLine=function(){ctx.beginPath(),ctx.lineWidth="0.4",ctx.strokeStyle="#000",ctx.moveTo(this.getStartX(),this.startY),ctx.lineTo(this.getStartX(),this.endY),ctx.stroke(),ctx.closePath()},BarCalculation.prototype.setStackedData=function(t){for(var i=[],e=0,s=t.length;e<s;e++){i[e]=[];for(var a=0,r=t[e].length;a<r;a++)isNaN(t[e][a])?i[e][a]=0:i[e][a]=t[e][a]}return i},BarCalculation.prototype.setRatio=function(){this.ratio=this.getDrawWidth()/(this.getMaxValue()-this.getMinValue())},BarCalculation.prototype.setRatioForHundredPercent=function(){this.m_hundredPercentsRatios=[];for(var t=0,i=this.xAxisData[0].length;t<i;t++){for(var e=0,s=0,a=this.xAxisData.length;s<a;s++)e=+e+ +this.xAxisData[s][t];0==e&&(e=1),this.m_hundredPercentsRatios[t]=this.getDrawWidth()/e}},BarCalculation.prototype.getDrawHeight=function(){return this.drawHeight=this.startY-this.endY,this.drawHeight},BarCalculation.prototype.getDrawWidth=function(){return this.drawWidth=+this.endX-+this.startX,this.drawWidth},BarCalculation.prototype.getBarGap=function(){return this.barGap},BarCalculation.prototype.getbarWidth=function(){return this.barWidth},BarCalculation.prototype.getRatio=function(){return this.ratio},BarCalculation.prototype.getRatioForHundredPercent=function(t){return this.m_hundredPercentsRatios[t]},BarCalculation.prototype.getXPositionArray=function(){return this.xPositionArray},BarCalculation.prototype.setXPositionArray=function(){this.xPositionArray=[],this.stackHeightArray=[];var t,i=[],e=[],s=[];this.m_startX=this.getStartX(),this.m_xAxisData=this.xAxisData,"overlaid"==this.m_chart.m_charttype.toLowerCase()&&(t=this.arrangeDataForOverlaid(),this.setSeriesColorForOverlaid(t[1]),this.m_chart.m_actualseriesdatamap=getDuplicateObject(this.xAxisData),this.xAxisData=t[0],this.m_chart.m_seriesDataForDataLabel=t[3],this.m_chart.m_seriesDataLabelPropertyOverlaid=t[4]);for(var a=0,r=this.xAxisData.length;a<r;a++){this.xPositionArray[a]=[],this.stackHeightArray[a]=[];var h="100%"===this.m_chartType?this.m_chart.getPercentageForHundred():this.xAxisData,o=(i[a]=[],this.getRatio());e[a]=[],s[a]=[],this.stackHeightArray[a]=[];for(var l,n,m=0,c=this.xAxisData[a].length;m<c;m++)"clustered"==this.m_chart.m_charttype.toLowerCase()||"overlaid"==this.m_chart.m_charttype.toLowerCase()?(+this.xAxisData[a][m]>this.getMaxValue()&&(this.xAxisData[a][m]=this.getMaxValue()),+this.xAxisData[a][m]<this.getMinValue()&&(this.xAxisData[a][m]=this.getMinValue()),n=this.getMaxValue()<0?(l=this.getStartX()+Math.abs(this.getMinValue()-this.getMaxValue())*o,this.xAxisData[a][m]-this.getMaxValue()):this.getMinValue()<0?(l=this.getStartX()+Math.abs(this.getMinValue())*o,this.xAxisData[a][m]):(l=this.getStartX(),this.xAxisData[a][m]-this.getMinValue()),this.xPositionArray[a][m]=+l,this.stackHeightArray[a][m]=+n*o):(isNaN(h[a][m])&&(h[a][m]=""),0==a?0<=+h[a][m]?(0<+this.m_chart.m_minimumaxisvalue&&!IsBoolean(this.m_chart.isAxisSetup())?i[a][m]=this.m_startX:i[a][m]=this.m_startX-o*this.getMinValue(),e[a][m]=i[a][m]+h[a][m]*o,s[a][m]=+i[a][m]):(i[a][m]=this.m_startX-o*this.getMinValue(),s[a][m]=i[a][m]+h[a][m]*o*1,e[a][m]=+this.m_startX-o*this.getMinValue()):0<=this.m_xAxisData[a][m]?(e[a][m]=e[a-1][m],s[a][m]=s[a-1][m],i[a][m]=+e[a][m],e[a][m]=+i[a][m]+h[a][m]*o):(s[a][m]=s[a-1][m],e[a][m]=e[a-1][m],i[a][m]=+s[a][m],s[a][m]=+i[a][m]+h[a][m]*o),this.xPositionArray[a][m]=i[a][m],1==this.xAxisData.length?0<=this.m_chart.min?this.stackHeightArray[a][m]=o*(+h[a][m]-Math.abs(+this.m_chart.min)):this.stackHeightArray[a][m]=o*(+h[a][m]+Math.abs(+this.m_chart.max)):this.stackHeightArray[a][m]=o*h[a][m]*1,this.xPositionArray[a][m]>this.m_chart.getEndX()&&(this.xPositionArray[a][m]=this.m_chart.getEndX()),this.xPositionArray[a][m]<this.m_chart.getStartX()&&(this.xPositionArray[a][m]=this.m_chart.getStartX()),n=this.xPositionArray[a][m]+this.stackHeightArray[a][m],this.getStartX()>n&&(this.stackHeightArray[a][m]=this.stackHeightArray[a][m]+(this.getStartX()-n)),n>this.m_chart.getEndX()&&(this.stackHeightArray[a][m]=this.m_chart.getEndX()-this.xPositionArray[a][m]))}this.xPositionMap=this.xPositionArray},BarCalculation.prototype.setSeriesColorForOverlaid=function(t){this.SeriesColorForOverlaid=t},BarCalculation.prototype.getSeriesColorForOverlaid=function(){return this.SeriesColorForOverlaid},BarCalculation.prototype.arrangeDataForOverlaid=function(){this.m_originalindexforoverlaiddata=[];for(var t=this.m_chart.visibleSeriesInfo.seriesColor,i=[],e=[],s=[],a=[],r=[],h=0,o=this.xAxisData[0].length;h<o;h++){i[h]=[],e[h]=[],s[h]=[],a[h]=[],r[h]=[];for(var l=0,n=this.xAxisData.length;l<n;l++)i[h][l]=isNaN(this.xAxisData[l][h])?0:+this.xAxisData[l][h],e[h][l]=t[l],s[h][l]=l,a[h][l]=this.m_chart.m_seriesDataForDataLabel[l][h],r[h][l]=this.m_chart.m_seriesDataLabelPropertyOverlaid[l]}var m=this.sortingDataWithColor(i,e,s,a,r),m=this.arrengeSeriesDataandColor(m);return this.m_originalindexforoverlaiddata=m},BarCalculation.prototype.sortingDataWithColor=function(t,i,e,s,a){for(var r=[],h=0,o=t.length;h<o;h++){r[h]=[];for(var l=0,n=t[h].length;l<n;l++)r[h][l]=[],r[h][l][0]=+t[h][l],r[h][l][1]=i[h][l],r[h][l][2]=e[h][l],r[h][l][3]=s[h][l],r[h][l][4]=a[h][l]}for(var m=0,o=r.length;m<o;m++)r[m].sort(function(t,i){return i[0]-t[0]});for(var c=[],d=0,o=r.length;d<o;d++){var _=0;c[d]=[];for(var g=0,n=r[d].length;g<n;g++)+r[d][g][0]<0&&(c[d][_++]=r[d][g]);c[d].sort(function(t,i){return t[0]-i[0]});for(var p=0,g=0,x=r[d].length;g<x;g++)+r[d][g][0]<0&&(r[d][g]=c[d][p++])}return r},BarCalculation.prototype.arrengeSeriesDataandColor=function(t){for(var i=[],e=[],s=[],a=[],r=[],h=0,o=t.length;h<o;h++){i[h]=[],e[h]=[],s[h]=[],a[h]=[],r[h]=[];for(var l=0,n=t[h].length;l<n;l++)i[h][l]=t[h][l][0],e[h][l]=t[h][l][1],s[h][l]=t[h][l][2],a[h][l]=t[h][l][3],r[h][l]=t[h][l][4]}for(var m=[],c=[],d=[],_=[],g=[],p=0,o=i[0].length;p<o;p++){m[p]=[],c[p]=[],d[p]=[],_[p]=[],g[p]=[];for(var x=0,n=i.length;x<n;x++)m[p][x]=+i[x][p],c[p][x]=e[x][p],d[p][x]=s[x][p],_[p][x]=a[x][p],g[p][x]=r[x][p]}return[m,c,d,_,g]},BarCalculation.prototype.getYPositionArray=function(){return this.yPositionArray},BarCalculation.prototype.setYPositionArray=function(){this.yPositionArray=[];for(var t=(this.getbarWidth()-this.getbarWidth()*this.m_chart.clusteredbarpadding)/2,i=0,e=this.xAxisData[0].length;i<e;i++){this.yPositionArray[i]=[];for(var s=0,a=this.xAxisData.length;s<a;s++)"clustered"==this.m_chart.m_charttype.toLowerCase()?this.yPositionArray[i][s]=+this.startY-this.getbarWidth()*(a-s)-this.getBarGap()/2-this.getbarWidth()*this.xAxisData.length*(e-1-i)-this.getBarGap()*(e-1-i)+t:this.yPositionArray[i][s]=this.startY-this.getBarGap()*(e-1-i)-+this.getbarWidth()-this.getBarGap()/2-this.getbarWidth()*(e-1-i)}this.yPositionArray=convertArrayType(this.yPositionArray),this.yPositionMap=this.yPositionArray},BarCalculation.prototype.getYPositionforToolTip=function(){for(var t=[],i=this.getYPositionArray(),e=0,s=i[0].length;e<s;e++)t.push(i[0][e]);return t},BarCalculation.prototype.getstackHeightArray=function(){return this.stackHeightArray},BarCalculation.prototype.getYAxisText=function(){return this.yAxisData},BarCalculation.prototype.getYAxisMarkersArray=function(){return this.yAxisData},BarSeries.prototype.init=function(t,i,e,s,a,r,h,o,l,n,m,c){this.m_chart=c,this.ctx=this.m_chart.ctx,this.m_chartbase=this.m_chart.m_chartbase,this.xPixel=t,this.yPixelArray=i,this.stackWidth=e,this.stackHeightArray=s,this.stackPercentArray=a,this.stackColorArray=r,this.strokecolor=h,this.m_stackMarkingOnTopOfBarFlag=o,this.m_stackShowPercentValueFlag=l,this.m_stackSeriesInitializeFlag=n,this.m_plotTrasparency=m;for(var d=0,_=this.xPixel.length;d<_;d++)this.barStackArray[d]=new BarStack,this.barStackArray[d].init(this.xPixel[d],this.yPixelArray[d],this.stackWidth,this.stackHeightArray[d],this.stackPercentArray[d],this.stackColorArray[d],this.strokecolor,this.ctx,c,this.m_chartbase,this.m_stackMarkingOnTopOfBarFlag,this.m_stackShowPercentValueFlag,this.m_stackSeriesInitializeFlag,this.m_plotTrasparency)},BarSeries.prototype.drawBarSeries=function(t){for(var i=0,e=this.xPixel.length;i<e;i++)this.barStackArray[i].drawBarStack(t,i)},BarStack.prototype.init=function(t,i,e,s,a,r,h,o,l,n,m,c,d,_){this.ctx=o,this.m_chart=l,this.m_chartbase=n,this.stackXPixel=t,this.stackYPixel=i,this.stackWidth=e,this.stackHeight=s,this.stackPercentValue=a,this.strokeColor=h||"#cccccc",this.stackColor=convertColorToHex(r),this.m_showPercentageFlag=m,this.m_stackShowPercentValueFlag=c,this.m_stackSeriesInitializeFlag=d,this.m_stackPlotTrasparency=_},BarStack.prototype.drawBarStack=function(t,h){var o=this,i=o.m_chart.scaleFlag?"stackgrpslider"+t+o.m_chart.m_objectid:"stackgrp"+t+o.m_chart.m_objectid;this.ctx.beginPath(),this.ctx.save(),this.ctx.strokeStyle=this.strokeColor,this.ctx.lineWidth=.5;switch(this.m_chartbase){case"rectangle":this.stackHeight<0&&(this.stackXPixel=this.stackXPixel+this.stackHeight,this.stackHeight=Math.abs(this.stackHeight)),this.makeCuboid(this.stackXPixel,this.stackYPixel,this.stackWidth,this.stackHeight,this.stackColor),this.ctx.fillStyle=hex2rgb(this.stackColor,this.m_stackPlotTrasparency),(e=drawSVGRect(this.stackXPixel,this.stackYPixel,this.stackHeight,this.stackWidth,hex2rgb(this.stackColor,this.m_stackPlotTrasparency))).setAttribute("style","stroke-width:0.5px; stroke:"+this.strokeColor+";"),$("#"+i).append(e);break;case"chevron":0!==this.stackHeight&&this.makeChevron(this.stackXPixel,this.stackYPixel,this.stackWidth,this.stackHeight,hex2rgb(this.stackColor,this.m_stackPlotTrasparency),this.strokeColor,t);break;case"gradient1":case"gradient2":this.stackHeight<0&&(this.stackXPixel=this.stackXPixel+this.stackHeight);l=this.stackHeight,n=(this.stackHeight=0<l?this.stackHeight-(this.stackHeight>2*this.m_chart.m_stackborderwidth?+this.m_chart.m_stackborderwidth:0):Math.abs(this.stackHeight)>2*this.m_chart.m_stackborderwidth?this.stackHeight+ +this.m_chart.m_stackborderwidth:this.stackHeight,this.stackXPixel=Math.abs(l)>2*this.m_chart.m_stackborderwidth?this.stackXPixel+.5*this.m_chart.m_stackborderwidth:this.stackXPixel,this.stackWidth);this.stackWidth=this.stackWidth-(this.stackWidth>2*this.m_chart.m_stackborderwidth?+this.m_chart.m_stackborderwidth:0),"path"===o.m_chart.m_stacksvgtype?this.drawSVGPathBar(this,i,"url(#gradient"+o.m_chart.m_objectid+t+h+")",l,n):(e=drawSVGRect(this.stackXPixel,this.stackYPixel,Math.abs(this.stackHeight),this.stackWidth,""),Math.abs(l)>2*this.m_chart.m_stackborderwidth&&Math.abs(n)>2*this.m_chart.m_stackborderwidth&&(e.setAttribute("style","stroke-width:"+this.m_chart.m_stackborderwidth+"px; stroke:"+this.m_chart.m_stackbordercolor+"; stroke-opacity : 1;"),IsBoolean(this.m_chart.m_enablestackshadow))&&!IsBoolean(this.m_chart.isPropertyBrowserCompatible())&&2<this.stackWidth&&2<Math.abs(this.stackHeight)&&($(e).attr("filter","url(#stackShadow"+o.m_chart.m_objectid+")"),e.setAttribute("shape-rendering","crispEdges")),$(e).attr("rx",this.m_chart.m_stackborderradius),$(e).attr("ry",this.m_chart.m_stackborderradius),e.setAttribute("fill","url(#gradient"+o.m_chart.m_objectid+t+h+")"),s=!!document.documentMode,IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_baranimationduration&&!s&&(a=drawSVGStackAnimation(0,"width",Math.abs(this.stackHeight),this.m_chart.m_baranimationduration),r=drawSVGStackAnimation(Math.abs(this.stackHeight)+this.stackXPixel,"x",this.stackXPixel,this.m_chart.m_baranimationduration),$(e).append(a),this.stackHeight<0)&&$(e).append(r),$(e).attr("class","timeSeries-stackHighlighter"),$("#"+i).append(e));break;case"gradient3":this.stackHeight<0&&(this.stackXPixel=this.stackXPixel+this.stackHeight);l=this.stackHeight,n=(this.stackHeight=0<l?this.stackHeight-(this.stackHeight>2*this.m_chart.m_stackborderwidth?+this.m_chart.m_stackborderwidth:0):Math.abs(this.stackHeight)>2*this.m_chart.m_stackborderwidth?this.stackHeight+ +this.m_chart.m_stackborderwidth:this.stackHeight,this.stackXPixel=Math.abs(l)>2*this.m_chart.m_stackborderwidth?this.stackXPixel+.5*this.m_chart.m_stackborderwidth:this.stackXPixel,this.stackWidth);this.stackWidth=this.stackWidth-(this.stackWidth>2*this.m_chart.m_stackborderwidth?+this.m_chart.m_stackborderwidth:0),"path"===o.m_chart.m_stacksvgtype?this.drawSVGPathBar(this,i,"url(#gradient"+o.m_chart.m_objectid+t+h+")",l,n):((e=drawSVGRect(this.stackXPixel,this.stackYPixel,Math.abs(this.stackHeight),this.stackWidth,"")).setAttribute("fill","url(#gradient"+o.m_chart.m_objectid+t+h+")"),Math.abs(l)>2*this.m_chart.m_stackborderwidth&&Math.abs(n)>2*this.m_chart.m_stackborderwidth&&(e.setAttribute("style","stroke-width:"+this.m_chart.m_stackborderwidth+"px; stroke:"+this.m_chart.m_stackbordercolor+"; stroke-opacity : 1;"),IsBoolean(this.m_chart.m_enablestackshadow))&&!IsBoolean(this.m_chart.isPropertyBrowserCompatible())&&2<this.stackWidth&&2<Math.abs(this.stackHeight)&&($(e).attr("filter","url(#stackShadow"+o.m_chart.m_objectid+")"),e.setAttribute("shape-rendering","crispEdges")),$(e).attr("rx",this.m_chart.m_stackborderradius),$(e).attr("ry",this.m_chart.m_stackborderradius),s=!!document.documentMode,IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_baranimationduration&&!s&&(a=drawSVGStackAnimation(0,"width",Math.abs(this.stackHeight),this.m_chart.m_baranimationduration),r=drawSVGStackAnimation(Math.abs(this.stackHeight)+this.stackXPixel,"x",this.stackXPixel,this.m_chart.m_baranimationduration),$(e).append(a),this.stackHeight<0)&&$(e).append(r),$(e).attr("class","timeSeries-stackHighlighter"),$("#"+i).append(e));break;default:this.stackHeight<0&&(this.stackXPixel=this.stackXPixel+this.stackHeight);var e,s,a,r,l=this.stackHeight,n=(this.stackHeight=0<l?this.stackHeight-(this.stackHeight>2*this.m_chart.m_stackborderwidth?+this.m_chart.m_stackborderwidth:0):Math.abs(this.stackHeight)>2*this.m_chart.m_stackborderwidth?this.stackHeight+ +this.m_chart.m_stackborderwidth:this.stackHeight,this.stackXPixel=Math.abs(l)>2*this.m_chart.m_stackborderwidth?this.stackXPixel+.5*this.m_chart.m_stackborderwidth:this.stackXPixel,this.stackWidth);this.stackWidth=this.stackWidth-(this.stackWidth>2*this.m_chart.m_stackborderwidth?+this.m_chart.m_stackborderwidth:0),"path"===o.m_chart.m_stacksvgtype?this.drawSVGPathBar(this,i,hex2rgb(this.stackColor,this.m_stackPlotTrasparency),l,n):(e=drawSVGRect(this.stackXPixel,this.stackYPixel,Math.abs(this.stackHeight),this.stackWidth,hex2rgb(this.stackColor,this.m_stackPlotTrasparency)),Math.abs(l)>2*this.m_chart.m_stackborderwidth&&Math.abs(n)>2*this.m_chart.m_stackborderwidth&&(e.setAttribute("style","stroke-width:"+this.m_chart.m_stackborderwidth+"px; stroke:"+this.m_chart.m_stackbordercolor+"; stroke-opacity : 1;"),IsBoolean(this.m_chart.m_enablestackshadow))&&!IsBoolean(this.m_chart.isPropertyBrowserCompatible())&&2<this.stackWidth&&2<Math.abs(this.stackHeight)&&($(e).attr("filter","url(#stackShadow"+o.m_chart.m_objectid+")"),e.setAttribute("shape-rendering","crispEdges")),$(e).attr("rx",this.m_chart.m_stackborderradius),$(e).attr("ry",this.m_chart.m_stackborderradius),s=!!document.documentMode,IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_baranimationduration&&!s&&(a=drawSVGStackAnimation(0,"width",Math.abs(this.stackHeight),this.m_chart.m_baranimationduration),r=drawSVGStackAnimation(Math.abs(this.stackHeight)+this.stackXPixel,"x",this.stackXPixel,this.m_chart.m_baranimationduration),$(e).append(a),this.stackHeight<0)&&$(e).append(r),$(e).attr("class","timeSeries-stackHighlighter"),$(e).attr("id","stackgrp"+o.m_chart.m_objectid+"s"+t+"c"+h),$("#"+i).append(e),e.addEventListener("click",function(t){this.id;for(var i=h,e=0;e<o.m_chart.m_seriesData.length;e++)for(var s,a=o.m_chart.m_allSeriesNames[e],r=0;r<o.m_chart.m_categoryData[0].length;r++)IsBoolean(o.m_chart.enableDrillHighlighter)&&(s=void 0!==o.m_chart.m_barSeriesArray[a]?"stackgrp"+o.m_chart.m_objectid+"s"+e+"c"+r:"linestack"+o.m_chart.m_objectid+"s"+e+"c"+r,i!=r&&"1"==$("#"+s).css("opacity")&&IsBoolean(o.m_chart.m_drilltoggle)?$("#"+s).css("opacity","0.5"):$("#"+s).css("opacity","1"))}))}IsBoolean(this.m_stackSeriesInitializeFlag)&&this.drawText(),this.ctx.restore(),this.ctx.closePath()},BarStack.prototype.drawSVGPathBar=function(t,i,e,s,a){var r,h=" ",o=Math.abs(s)>+t.m_chart.m_stackborderradius?+t.m_chart.m_stackborderradius:0,l="";""!=(l=0<+t.stackHeight?"M "+t.stackXPixel+h+t.stackYPixel+h+"h"+h+(t.stackHeight-o)+h+"a"+h+o+h+o+h+0+h+0+h+1+h+o+h+o+h+"v"+h+(t.stackWidth-2*o)+h+"a"+h+o+h+o+h+0+h+0+h+1+h+-o+h+o+h+"h"+h+(o-t.stackHeight)+h+"z":"M "+Math.abs(t.stackXPixel+Math.abs(t.stackHeight))+h+t.stackYPixel+h+"h"+h+(t.stackHeight+o)+h+"a"+h+o+h+o+h+0+h+0+h+0+h+-o+h+o+h+"v"+h+(t.stackWidth-2*o)+h+"a"+h+o+h+o+h+0+h+0+h+0+h+o+h+o+h+"h"+h+(Math.abs(t.stackHeight)-o)+h+"v"+h+-t.stackWidth+h)&&0<Math.abs(t.stackHeight)&&(o=document.createElementNS("http://www.w3.org/2000/svg","g"),h=document.createElementNS("http://www.w3.org/2000/svg","g"),(r=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",l),l=!!document.documentMode,IsBoolean(t.m_chart.m_enableanimation)&&0<t.m_chart.m_baranimationduration&&!l&&(r.setAttribute("class","barchart-rounded-bar"),l=0<+t.stackHeight?t.stackXPixel:t.stackXPixel+Math.abs(t.stackHeight),r.setAttribute("style","animation: barchart-rounded-bar "+t.m_chart.m_baranimationduration+"s linear forwards; transform-origin: "+l+"px center;")),Math.abs(s)>2*t.m_chart.m_stackborderwidth&&Math.abs(a)>+t.m_chart.m_stackborderradius?o.setAttribute("style","stroke:"+t.m_chart.m_stackbordercolor+"; stroke-width:"+t.m_chart.m_stackborderwidth+";fill:"+e+";"):o.setAttribute("style","stroke:"+t.m_chart.m_stackbordercolor+"; stroke-width:0;fill:"+e+";"),$(h).attr("class","timeSeries-stackHighlighter"),$(h).append(r),$(o).append(h),$("#"+i).append(o))},BarStack.prototype.drawText=function(){var t=IsBoolean(this.m_stackShowPercentValueFlag)?parseInt(this.stackPercentValue)+"%":parseInt(this.stackPercentValue);IsBoolean(this.m_showPercentageFlag)&&(this.ctx.fillStyle="black",this.ctx.fillText(t,+this.stackXPixel+ +this.stackHeight+15,+this.stackYPixel+this.stackWidth/2*1+1))},BarStack.prototype.createGradient=function(){var t=this.ctx.createLinearGradient(this.stackXPixel,this.stackYPixel,this.stackXPixel,+this.stackYPixel+ +this.stackWidth),i=hex2rgb(this.stackColor,.6),e=hex2rgb(this.stackColor,.7);return t.addColorStop(0,this.stackColor),t.addColorStop(.3,i),t.addColorStop(.7,e),t.addColorStop(1,this.stackColor),t},BarChart.prototype.createGradient1=function(t,i,e){for(var s=this.scaleFlag?this.svgTimeScaleId:this.svgContainerId,a=document.createElementNS(NS,"linearGradient"),s=(a.setAttribute("x1","0%"),a.setAttribute("x2","0%"),a.setAttribute("y1","0%"),a.setAttribute("y2","100%"),a.setAttribute("id","gradient"+this.m_objectid+i+e),$("#"+s).append(a),hex2rgb(t,this.m_plotTrasparencyArray[i])),r=[s,ColorLuminance(t,.2),s],h=100/(r.length-1!=0?r.length-1:1),e=0,o=r.length;e<=o-1;e++){var l=document.createElementNS(NS,"stop");l.setAttribute("offset",e*h+"%"),l.setAttribute("stop-color",r[e]),l.setAttribute("stop-opacity",1),$(a).append(l)}},BarChart.prototype.createGradient2=function(t,i,e){for(var s=this.scaleFlag?this.svgTimeScaleId:this.svgContainerId,a=document.createElementNS(NS,"linearGradient"),i=(a.setAttribute("x1","0%"),a.setAttribute("x2","0%"),a.setAttribute("y1","0%"),a.setAttribute("y2","100%"),a.setAttribute("id","gradient"+this.m_objectid+i+e),$("#"+s).append(a),hex2rgb(t,this.m_stackPlotTrasparency)),r=[i,i,ColorLuminance(t,-.15),i,i],h=100/(r.length-1!=0?r.length-1:1),e=0,o=r.length;e<=o-1;e++){var l=document.createElementNS(NS,"stop");l.setAttribute("offset",e*h+"%"),l.setAttribute("stop-color",r[e]),l.setAttribute("stop-opacity",1),$(a).append(l)}},BarChart.prototype.getText=function(t,i,e){var t=""+t,s=[],a=(this.ctx.font=e,this.ctx.measureText(t).width),r=t.split(" "),h="";if(i<a){for(var o=0;o<=r.length;o++){var l=h+r[o]+" ",n=this.ctx.measureText(l).width;if(s.length==this.m_yaxislabellines)break;if(i<n){if(0<o&&this.ctx.measureText(h).width>i){s.push(this.m_yAxis.getText(h,i,e));break}if(0==o&&this.ctx.measureText(r[o]).width>i){s.push(this.m_yAxis.getText(r[o],i,e));break}if(!IsBoolean(this.m_yAxis.m_yaxistextwrap)){s.push(h);break}s.push(h),h=r[o]+" "}else o==r.length&&n<i?s.push(h):h=l}s[this.m_yaxislabellines-1]&&this.ctx.measureText(s[this.m_yaxislabellines-1]).width>=i&&(s[this.m_yaxislabellines-1]=this.getText(s[this.m_yaxislabellines-1],i,e))}else s.push(t);return s},BarChart.prototype.drawSVGTextForCategory=function(t,i,e,s,a,r,h){var o=document.createElementNS(NS,"text");if(1==e.length)isNaN(t)||isNaN(i)||(o.setAttribute("x",t),o.setAttribute("y",i),o.setAttribute("fill",s),""!==h&&void 0!==h&&0!==h&&o.setAttribute("transform","rotate("+h+" "+t+","+i+")"),o.textContent=e,o.setAttribute("text-anchor",getSVGAlignment(a)),o.setAttribute("alignment-baseline",r));else if(!isNaN(t)&&!isNaN(i)){o.setAttribute("y",i),o.setAttribute("fill",s),""!==h&&void 0!==h&&0!==h&&o.setAttribute("transform","rotate("+h+" "+t+","+i+")"),o.setAttribute("text-anchor",getSVGAlignment(a)),o.setAttribute("alignment-baseline",r);for(var l=0;l<e.length;l++){var n=document.createElementNS(NS,"tspan");0==l?n.setAttribute("x",t):(n.setAttribute("x",t),n.setAttribute("dy",+this.fontScaling(this.m_yAxis.getLabelFontSize()))),n.textContent=e[l],o.appendChild(n)}}return o},BarChart.prototype.createGradient3=function(t,i,e){var s=this.scaleFlag?this.svgTimeScaleId:this.svgContainerId,a=document.createElementNS(NS,"linearGradient");a.setAttribute("x1","0%"),a.setAttribute("x2","0%"),a.setAttribute("y1","0%"),a.setAttribute("y2","100%"),a.setAttribute("id","gradient"+this.m_objectid+i+e),$("#"+s).append(a);for(var r=[t,t,hex2rgb(t,.35),t,t],h=100/(r.length-1!=0?r.length-1:1),e=0,o=r.length;e<=o-1;e++){var l=document.createElementNS(NS,"stop");l.setAttribute("offset",e*h+"%"),l.setAttribute("stop-color",r[e]),l.setAttribute("stop-opacity",1),$(a).append(l)}},BarStack.prototype.createGradient3=function(t,i,e,s,a){t=this.ctx.createLinearGradient(t,i,t,+i+ +e),i=hex2rgb(a,this.m_stackPlotTrasparency);return t.addColorStop(.1,i),t.addColorStop(.15,i),t.addColorStop(.5,ColorLuminance(a,.3)),t.addColorStop(.85,i),t.addColorStop(1,i),t},BarStack.prototype.makeCylinder=function(t,i,e,s,a){var r=hex2rgb(a,.6);this.ctx.beginPath(),this.ctx.strokeStyle="#fff",this.ctx.fillStyle=r,this.ctx.moveTo(t+s,i),this.ctx.bezierCurveTo(+t+ +s+e/3,+i+3,+t+ +s+2*e/3,+i+6,+t+ +s,+i+ +e),this.ctx.stroke(),this.ctx.strokeStyle=a,this.ctx.moveTo(t,i),this.ctx.bezierCurveTo(+t+ +s-e/3,+i+3,+t+ +s-2*e/3,+i+6,+t+ +s,+i+ +e),this.ctx.fill(),this.ctx.stroke(),this.ctx.closePath()},BarStack.prototype.makeCuboid=function(t,i,e,s,a){var r=this.m_chart.scaleFlag?this.m_chart.svgTimeScaleId:this.m_chart.svgContainerId,h=e/4,a=hex2rgb(a,this.m_stackPlotTrasparency),h=["M",t,i,"L",t+h,i-5,"L",t+h+s,i-5,"L",t+h+s,i-5+e,"L",t+s,i+e,"L",t+s,i,"L",t,i].join(" "),e=drawSVGPath();e.setAttribute("d",h),e.setAttribute("style","stroke-width:0.5px; stroke:#cccccc; fill:"+a+";"),$("#"+r).append(e)},BarStack.prototype.makeChevron=function(t,i,e,s,a,r,h){var o=this.m_chart.scaleFlag?this.m_chart.svgTimeScaleId:this.m_chart.svgContainerId,s=["M",t,i,"L",+t+ +(s=+s<e/2?e/2:s)-e/2,i,"L",+t+ +s,+i+e/2,"L",+t+ +s-e/2,+i+ +e,"L",t,+i+ +e,"L",+t+e/2,+i+e/2,"L",t,i].join(" "),e=drawSVGPath();e.setAttribute("d",s),e.setAttribute("style","stroke-width:0.5px; stroke:"+r+"; fill:"+a+";"),$("#"+o).append(e)},BarXAxis.prototype=new Xaxis,BarXAxis.prototype.init=function(t){this.m_chart=t,this.ctx=this.m_chart.ctx,this.m_startX=this.m_chart.getStartX(),this.m_startY=this.m_chart.getStartY(),this.m_endX=this.m_chart.getEndX(),this.m_endY=this.m_chart.getEndY(),this.m_xAxisData=this.m_chart.m_seriesData,this.m_axiscolor=convertColorToHex(this.m_chart.getAxisColor()),this.m_linexaxiscolor=""!=this.m_linexaxiscolor?convertColorToHex(this.m_linexaxiscolor):this.m_axiscolor,this.setLeftAxisFormatters(),this.setRightAxisFormatters(),this.noOfRows=this.m_chart.noOfRows},BarXAxis.prototype.getYaxisDivison=function(t){return(this.m_endY-this.m_startY)/t.length},BarXAxis.prototype.markXaxis=function(){for(var t=this.calculateAxisLineToTextGap(),i=this.m_chart.m_calculation.getXAxisMarkersArray(),e=(this.m_chart.getEndX()-this.m_chart.getStartX())/(i.length-1),s=i.length,a=[],r=0;r<s;r++){var h=i[r];h=this.getFormattedText(h,this.m_precision),a.push(h)}if(!isUniqueArray(a))for(var o=getDuplicatesFromArray(a),r=0;r<s;r++){var h=i[r],l=this.getFormattedText(h,this.m_precision);h="default"==this.m_precision&&"auto"==this.m_secondaryUnitSymbol&&0<Object.keys(o).length?this.getFormattedText(h,1):l,a[r]=h}for(var n,m,c,d,r=0,_=i.length;r<_;r++)r%this.m_chart.m_skipxaxislabels!=0&&"auto"!=this.m_chart.m_skipxaxislabels||(this.ctx.save(),this.ctx.measureText(h=a[r]).width,h=2==this.noOfRows?this.getText(""+h,(this.m_endX-this.m_startX)/i.length*2,this.getLabelFontProperties()):this.getText(""+h,(this.m_endX-this.m_startX)/i.length,this.getLabelFontProperties()),this.translateTextPosition(t,r,h,e),this.ctx.rotate(this.getLabelrotation()*Math.PI/180),m=this.calculateAxisToLabelMargin(r),d="center",n=+this.m_startX+e*r,m=+this.m_startY+t/2+ +m+this.calculateAxisLineToTextGap()/2,IsBoolean(this.m_chart.m_xAxis.getLabelTilted())&&(d=0<(c=this.getLabelrotation())&&c<=90?"left":c<0&&-90<=c?"right":"center"),h=drawSVGText(n,m,h,this.m_labelfontcolor,d,"middle",this.getLabelrotation()),$("#xaxislabelgrp"+this.m_chart.m_objectid).append(h),this.ctx.restore(),this.ctx.closePath());""!=this.getDescription()&&this.drawDescription()},BarXAxis.prototype.drawDescription=function(){var t=this,i=(convertColorToHex(this.getFontColor()),this.m_chart.m_allSeriesDisplayNames.join(", ")),i=IsBoolean(this.m_chart.m_xAxis.m_showdatasetdescription)?this.m_chart.formattedDescription(this.m_chart,i):this.getDescription(),i=drawSVGText(this.getXDesc(),this.getYDesc(),this.m_chart.formattedDescription(this.m_chart,i),convertColorToHex(this.getFontColor()),"middle","middle",0);$(i).css({"font-family":selectGlobalFont(t.getFontFamily()),"font-style":t.getFontStyle(),"font-size":t.m_chart.fontScaling(t.getFontSize())+"px","font-weight":t.getFontWeight(),"text-decoration":t.getTextDecoration()}),$("#"+t.m_chart.svgContainerId).append(i)},BarXAxis.prototype.drawXAxis=function(){var t,i,e,s,a;IsBoolean(this.m_showlinexaxis)&&(t=this.m_linexaxiscolor,a=+this.m_startX-1-this.m_chart.m_axistodrawingareamargin,i=+this.m_startY+1+this.m_chart.m_axistodrawingareamargin,e=+this.m_endX,s=+this.m_startY+1+this.m_chart.m_axistodrawingareamargin,a=drawSVGLine(a,i,e,s,.5,t),$("#"+this.m_chart.svgContainerId).append(a))},BarXAxis.prototype.translateTextPosition=function(t,i,e,s){var a=this.getLabelrotation(),s=(this.getLabelTextWidth(e),+this.m_startX+s*i),i=this.calculateAxisToLabelMargin(i),t=+this.m_startY+ +t+ +i;this.translateText(a,s,t,e)},BarXAxis.prototype.getFormattedText=function(t,i){var e,s,i="undefined"==i||null==i?this.m_chart.m_precision:i;return t%1!=0&&i<1?t=this.setPrecision(t,0):IsBoolean(this.m_isFormatter)||IsBoolean(this.m_isSecondaryFormatter)||"default"!==i&&(t=this.setPrecision(t,i)),"none"!=this.m_chart.m_formater&&""!=this.m_chart.m_formater||"none"!=this.m_chart.m_secondaryformater&&""!=this.m_chart.m_secondaryformater||(t=this.setPrecision(t,i)),IsBoolean(this.m_isFormatter)&&(t=this.m_util.updateTextWithFormatter(t,this.m_unitSymbol,i)),IsBoolean(this.m_isSecondaryFormatter)&&"Number"==this.m_chart.m_secondaryformater&&(t=this.m_util.updateTextWithFormatter(t,this.m_secondaryUnitSymbol,i)),IsBoolean(this.m_isSecondaryFormatter)&&(t="auto"!=this.m_secondaryUnitSymbol?(0!=i&&null!=i?t=this.setPrecision(t,i):t<1&&t%1!=0&&(t=this.setPrecision(t,2)),t=t%1==0&&"default"===this.m_precision?+t:t,this.addSecondaryFormater(t,this.m_secondaryUnitSymbol)):(e=getNumberFormattedSymbol(+t,this.m_chart.m_unit),s=getNumberFormattedNumericValue(+t,i,this.m_chart.m_unit),t=this.setPrecision(s,i),0!=i&&null!=i?t=this.setPrecision(t,i):t<1&&t%1!=0&&(t=this.setPrecision(t,2)),t=t%1==0&&"default"===this.m_precision?+t:t,this.addSecondaryFormater(t,e))),t=getFormattedNumberWithCommas(t,this.m_chart.m_numberformatter,this.m_chart.m_unit),t=IsBoolean(this.m_isFormatter)&&null!=this.m_unitSymbol?this.m_util.addFormatter(t,this.m_unitSymbol,this.m_formatterPosition,i):t},BarXAxis.prototype.setLeftAxisFormatters=function(){this.m_isFormatter=!1,this.m_isSecondaryFormatter=!1,IsBoolean(this.m_chart.getFixedLabel())||IsBoolean(this.getLeftaxisFormater())&&(this.setFormatter(),this.setSecondaryFormatter()),this.m_precision=this.m_chart.getPrecision()},BarXAxis.prototype.setRightAxisFormatters=function(){IsBoolean(this.m_chart.m_secondaryaxisshow)&&IsBoolean(this.getRightAxisFormater())&&this.setSecondAxisFormatter(),this.m_secondaryAxisPrecision=this.m_chart.m_secondaryaxisprecision},BarXAxis.prototype.setSecondAxisFormatter=function(){var t,i;this.m_secondAxisUnitSymbol="",this.m_secondAxisFormatterPosition="",this.m_isSecondAxisFormatter=!1,"none"==this.m_chart.m_secondaryaxisformater&&""==this.m_chart.m_secondaryaxisformater||(t=this.m_chart.m_secondaryaxisunit,i=this.m_chart.m_secondaryaxisformater,"none"!=t&&""!=t&&(this.m_isSecondAxisFormatter=!0,this.m_secondAxisUnitSymbol=this.m_util.getFormatterSymbol(i,t),this.m_secondAxisFormatterPosition=this.m_chart.m_secondaryaxissignposition))},BarXAxis.prototype.setFormatter=function(){var t,i;this.m_unitSymbol="",this.m_formatterPosition="",this.m_isFormatter=!1,"none"!=this.m_chart.m_formater&&""!=this.m_chart.m_formater&&(t=this.m_chart.getUnit(),i=this.m_chart.getFormater(),"none"!=t)&&""!=t&&(this.m_isFormatter=!0,this.m_unitSymbol=this.m_util.getFormatterSymbol(i,t),this.m_formatterPosition=this.m_chart.getSignPosition())},BarXAxis.prototype.setSecondaryFormatter=function(){var t,i;this.m_secondaryUnitSymbol="",this.m_secondaryFormatterPosition="",this.m_isSecondaryFormatter=!1,"none"!=this.m_chart.m_secondaryformater&&""!=this.m_chart.m_secondaryformater&&"Percent"!=this.m_chart.getUnit()&&(t=this.m_chart.getSecondaryUnit(),i=this.m_chart.getSecondaryFormater(),""!=t&&"none"!=t&&null!=t&&(this.m_isSecondaryFormatter=!0,this.m_secondaryUnitSymbol=this.m_util.getFormatterSymbol(i,t)),this.m_secondaryFormatterPosition="suffix")},BarXAxis.prototype.getSecondaryAxisFormattedText=function(t){return t=this.m_isSecondAxisFormatter?this.m_util.addFormatter(t,this.m_secondAxisUnitSymbol,this.m_secondAxisFormatterPosition):t},BarXAxis.prototype.setPrecision=function(t,i){return 0!==(t=+t)&&"default"!==i?t.toFixed(i):+t},BarXAxis.prototype.addSecondaryFormater=function(text,secondaryUnitSymbol){var textValue=text;try{eval("var formattedText = this.m_util.addUnitAs"+this.m_secondaryFormatterPosition+"(textValue,secondaryUnitSymbol);")}catch(e){}return formattedText.toString()},BarYAxis.prototype=new Yaxis,BarYAxis.prototype.init=function(t,i){this.m_chart=t,this.ctx=this.m_chart.ctx,this.m_chartCalculation=i,this.m_startX=this.m_chart.getStartX(),this.m_startY=this.m_chart.getStartY(),this.m_endX=this.m_chart.getEndX(),this.m_endY=this.m_chart.getEndY(),this.m_yAxisText=this.m_chartCalculation.getYAxisText(),this.m_yAxisMarkersArray=this.m_chartCalculation.getYAxisMarkersArray(),this.setLeftAxisFormatters(),this.setRightAxisFormatters(),this.m_isSecodaryAxis=!1,this.m_axiscolor=convertColorToHex(this.m_chart.getAxisColor()),this.m_lineyaxiscolor=""!=this.m_lineyaxiscolor?convertColorToHex(this.m_lineyaxiscolor):this.m_axiscolor},BarYAxis.prototype.markYaxis=function(t,i){this.drawAxisLabels(),""!=this.getDescription()&&this.drawDescription()},BarYAxis.prototype.drawAxisLabels=function(){for(var t=0,i=this.m_yAxisText.length;t<i;t++)this.ctx.beginPath(),this.ctx.save(),this.drawLabel(this.m_yAxisText[i-1-t],t),this.ctx.restore(),this.ctx.closePath()},BarYAxis.prototype.drawLabel=function(t,i){this.m_axislinetotextgap=IsBoolean(this.m_chart.m_updateddesign)?12:this.m_axislinetotextgap;var i=this.m_startY+this.getYaxisDivison()/2+this.getYaxisDivison()*i,e=(t=(IsBoolean(this.m_yaxistextwrap)?this.m_chart:this).getText(""+t,this.m_chart.m_width/4,this.getLabelFontProperties()),IsBoolean(this.m_chart.m_updateddesign),this.m_startX-this.m_axislinetotextgap),i=1==t.length?i:i+this.getYaxisDivison()/8;t=IsBoolean(this.m_yaxistextwrap)?this.m_chart.drawSVGTextForCategory(e,i,t,this.m_labelfontcolor,this.m_labeltextalign,"middle",this.getLabelrotation()):drawSVGText(e,i,t,this.m_labelfontcolor,this.m_labeltextalign,"middle",this.getLabelrotation()),$("#yaxislabelgrp"+this.m_chart.m_objectid).append(t)},BarYAxis.prototype.drawDescription=function(){var t=this,i=IsBoolean(this.m_chart.m_yAxis.m_showdatasetdescription)?this.m_chart.formattedDescription(this.m_chart,this.m_chart.m_allCategoryDisplayNames[0]):this.m_chart.formattedDescription(this.m_chart,this.getDescription()),i=drawSVGText(this.getXDesc(),this.getYDesc(),this.m_chart.formattedDescription(this.m_chart,i),convertColorToHex(this.m_fontcolor),"middle","middle",270);$(i).css({"font-family":selectGlobalFont(t.getFontFamily()),"font-style":t.getFontStyle(),"font-size":t.m_chart.fontScaling(t.getFontSize())+"px","font-weight":t.getFontWeight(),"text-decoration":t.getTextDecoration()}),$("#"+t.m_chart.svgContainerId).append(i)},BarYAxis.prototype.drawYAxis=function(){var t,i,e,s,a;IsBoolean(this.m_showlineyaxis)&&(t=this.m_lineyaxiscolor,a=+this.m_startX-this.m_chart.m_axistodrawingareamargin-1,i=+this.m_startY+1+this.m_chart.m_axistodrawingareamargin,e=+this.m_startX-this.m_chart.m_axistodrawingareamargin-1,s=+this.m_endY,a=drawSVGLine(a,i,e,s,.5,t),$("#"+this.m_chart.svgContainerId).append(a))},BarYAxis.prototype.getYaxisDivison=function(){return(this.m_endY-this.m_startY)/this.m_yAxisText.length},BarYAxis.prototype.horizontalMarkerLines=function(){for(var t=0,i=this.m_yAxisText.length;t<i;t++){var e=parseInt(+this.m_startX),s=parseInt(+this.m_startY+this.getYaxisDivison()/2+this.getYaxisDivison()*t),a=parseInt(+this.m_endX),r=parseInt(+this.m_startY+this.getYaxisDivison()/2+this.getYaxisDivison()*t),e=drawSVGLine(e,s,a,r,"0.5",hex2rgb(this.m_chart.m_markercolor,this.m_chart.m_markertransparency));$("#horizontallinegrp"+this.m_chart.m_objectid).append(e)}},BarYAxis.prototype.drawTickMarks=function(){if(IsBoolean(this.m_tickmarks))for(var t=0,i=this.m_yAxisText.length+1;t<i;t++){x1=parseInt(+this.m_startX),y1=parseInt(this.m_startY+this.getYaxisDivison()*t),x2=parseInt(this.m_startX-8),y2=parseInt(this.m_startY+this.getYaxisDivison()*t);var e=drawSVGLine(x1,y1,x2,y2,"0.5",this.m_categorymarkingcolor);$("#yaxistickgrp"+this.m_chart.m_objectid).append(e)}},BarYAxis.prototype.drawVerticalLine=function(){for(var t=this.m_chartCalculation.getXAxisMarkersArray(),i=(this.m_endX-this.m_startX)/(t.length-1),e=0,s=t.length;e<s;e++){x1=parseInt(this.m_startX+i*e),y1=parseInt(this.m_startY),x2=parseInt(this.m_startX+i*e),y2=parseInt(this.m_endY);var a=drawSVGLine(x1,y1,x2,y2,"0.5",hex2rgb(this.m_chart.m_markercolor,this.m_chart.m_markertransparency));$("#verticallinegrp"+this.m_chart.m_objectid).append(a)}},BarYAxis.prototype.zeroMarkerLine=function(){for(var t=this.m_chartCalculation.getXAxisMarkersArray(),i=(this.m_endX-this.m_startX)/(t.length-1),e=0,s=t.length;e<s;e++)if(0==t[e]){var a=drawSVGLine(parseInt(this.m_startX+i*e),parseInt(this.m_startY),parseInt(this.m_startX+i*e),parseInt(this.m_endY),"1",hex2rgb(this.m_chart.m_zeromarkercolor,this.m_chart.m_markertransparency));$("#"+this.m_chart.svgContainerId).append(a);break}},BarYAxis.prototype.hasNegativeXaxisMarker=function(t){var i=!1;return i=Array.isArray(t)&&0<t.length&&Math.min.apply(null,t)<0?!0:i};
//# sourceMappingURL=BarChart.min.js.map