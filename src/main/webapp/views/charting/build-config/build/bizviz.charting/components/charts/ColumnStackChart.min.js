/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function ColumnStackChart(t,e){this.base=Chart,this.base(),this.m_x=400,this.m_y=20,this.m_width=300,this.m_height=200,this.m_stackWidth="",this.m_generatexml="",this.m_seriesNames=[],this.m_categoryData=[],this.m_seriesData=[],this.m_ShowToolTipData=[],this.m_xPixelArray=[],this.m_yPixelArray=[],this.m_stackHeightArray=[],this.m_percentageArray=[],this.m_columnsArray={},this.m_valueTextSeries={},this.m_calculation=new ColumnCalculation,this.m_seriesVisiblityPosition,this.m_showpercentvalue=!1,this.m_showmarkingorpercentvalue=!1,this.noOfRows=1,this.m_chartContainer=t,this.m_zIndex=e,this.m_xAxis=new Xaxis,this.m_yAxis=new Yaxis,this.m_maxbarwidth=40,this.enableDrillHighlighter=!1,this.m_drilltoggle=!0}function ColumnCalculation(){this.m_xAxisPixelArray=[],this.m_yAxisPixelArray=[],this.SeriesColorForOverlaid=[],this.m_max=0,this.m_columnGap,this.m_numberOfMarkers=6,this.m_percentileValue,this.m_yAxisText,this.m_xpixelArray=[],this.m_ypixelArray=[],this.m_stackHeightArray=[],this.m_yAxisMarkersArray=[],this.m_toolTipDataForStacked,this.m_startX,this.m_startY,this.m_endX,this.m_endY,this.m_chartYMargin,this.m_chartEndXMargin,this.m_chartTitleMargin=0,this.m_chartSubTitleMargin=0,this.m_util=new Util,this.ctx="",this.m_maxbarwidth=40}function Columns(){this.m_xPixel=[],this.m_yPixelArray=[],this.m_stackHeightArray=[],this.m_stackColorArray=[],this.m_stackArray=[]}ColumnStackChart.prototype=new Chart,ColumnStackChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},ColumnStackChart.prototype.ParseJsonAttributes=function(t,e){for(var i in this.chartJson=t)if("Chart"==i)for(var s in t[i])switch(s){case"xAxis":for(var a in t[i][s]){var r=this.getNodeAttributeName(a);e.m_xAxis[r]=t[i][s][a]}break;case"yAxis":for(var o in t[i][s]){var r=this.getNodeAttributeName(o);e.m_yAxis[r]=t[i][s][o]}break;case"Title":for(var h in t[i][s]){var r=this.getNodeAttributeName(h);e.m_title[r]=t[i][s][h]}break;case"SubTitle":for(var l in t[i][s]){r=this.getNodeAttributeName(l);e.m_subTitle[r]=t[i][s][l]}break;case"CategoryColors":var n,m=new CategoryColors;for(n in this.setCategoryColors(m),t[i][s])if("CategoryColor"===n){var _=this.getArrayOfSingleLengthJson(t[i][s][n]);m.cateogryNameColorMap=new Object;for(var c=0,g=_.length;c<g;c++){var y,u=new CategoryColor;for(y in m.setCategoryColor(u),_[c])u[r=this.getNodeAttributeName(y)]=_[c][y];m.cateogryNameColorMap[u.getCategoryName()]=u.getColor()}}else{r=this.getNodeAttributeName(n);e.m_categoryColors[r]=t[i][s][n]}m.setCategoryDefaultColorSet();break;case"ConditionalColors":if(""!=t[i][s])for(var p=new ConditionalColors,C=(this.setConditionalColors(p),this.getArrayOfSingleLengthJson(t[i][s].ConditionalColor)),c=0,g=C.length;c<g;c++){var d,x=new ConditionalColor;for(d in p.setConditionalColor(x),C[c])x[r=this.getNodeAttributeName(d)]=C[c][d]}break;default:e[r=this.getNodeAttributeName(s)]=t[i][s]}else e[r=this.getNodeAttributeName(i)]=t[i]},ColumnStackChart.prototype.getDataProvider=function(){return this.m_dataProvider},ColumnStackChart.prototype.getCategoryNames=function(){return this.m_categoryNames},ColumnStackChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},ColumnStackChart.prototype.setStartX=function(){this.yaxisLabelFont=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),this.yaxisDescriptionFont=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily);var t=this.getBorderToDescriptionMargin(),e=this.getYAxisDescriptionMargin(),i=this.getDescriptionToLabelMargin(),s=this.getLabelToAxisMargin(),a=this.getYAxisLabelMargin();this.m_startX=+this.m_x+ +t+ +e+ +i+ +a+ +s},ColumnStackChart.prototype.getYAxisLabelMargin=function(){var t=this.getLabelFormatterMargin();return this.setLabelWidth(),+t+ +this.getLabelWidth()+ +this.getLabelSignMargin()+ +this.getLabelPrecisionMargin()+ +this.getLabelSecondFormatterMargin()},ColumnStackChart.prototype.getLabelFormatterMargin=function(){var t,e=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.m_formater&&""!=this.m_formater&&"none"!=this.m_unit&&""!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),e=this.ctx.measureText(t).width,this.ctx.closePath()),e},ColumnStackChart.prototype.getLabelWidth=function(){return this.m_labelwidth},ColumnStackChart.prototype.setLabelWidth=function(){var t=[];if((this.m_labelwidth=0)<this.fontScaling(this.m_yAxis.m_labelfontsize)){for(var e=0;e<this.m_yAxisMarkersArray.length;e++){var i,s="100%"==this.m_charttype?100:this.m_yAxisMarkersArray[e];IsBoolean(this.m_fixedlabel)||(IsBoolean(this.m_yAxis.getLeftaxisFormater())&&("none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(i=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?s=getNumberFormattedNumericValue(+s,this.m_precision,this.m_unit):"auto"==this.getSecondaryUnit()?s=getNumberFormattedNumericValue(+s):"none"!==this.getSecondaryUnit()&&(s=this.m_util.updateTextWithFormatter(s,i,this.m_precision))),0!==s)&&"default"!==this.m_precision&&(s=this.m_yAxis.setPrecision(s,this.m_precision)),s=getFormattedNumberWithCommas(s,this.m_numberformatter),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t[e]=this.ctx.measureText(s).width,this.ctx.closePath())}this.m_labelwidth=getMaxValueFromArray(t)}},ColumnStackChart.prototype.getLabelSignMargin=function(){var t=0,e=0,i=this.min;return i<0&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),e=this.ctx.measureText(i).width,this.ctx.closePath()),t=this.getLabelWidth()<e?this.ctx.measureText("-").width:t},ColumnStackChart.prototype.getLabelPrecisionMargin=function(){var t=5;return"auto"==this.getSecondaryUnit()&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t=this.ctx.measureText(".0").width,this.ctx.closePath()),t},ColumnStackChart.prototype.getLabelSecondFormatterMargin=function(){var t,e=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(t="auto"!=this.getSecondaryUnit()?this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()):"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?getNumberFormattedSymbol(+this.max,this.m_unit):"K",this.ctx.font=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily),e=this.ctx.measureText(t).width),e},ColumnStackChart.prototype.getFormatterMargin=function(){var t,e=0,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&("none"!=this.m_formater&&""!=this.m_formater&&""!=this.m_unit&&"none"!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),e=this.ctx.measureText(t).width),"none"!=this.getSecondaryFormater())&&""!=this.getSecondaryFormater()&&""!=this.getSecondaryUnit()&&"none"!=this.getSecondaryUnit()&&(secondunit=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),i=this.ctx.measureText(secondunit).width),+e+ +i+4},ColumnStackChart.prototype.setEndX=function(){var t=this.getBorderToLegendMargin(),e=this.getVerticalLegendMargin(),i=this.getVerticalLegendToXAxisMargin();this.m_endX=+this.m_x+ +this.m_width-(+t+ +e+ +i)},ColumnStackChart.prototype.setStartY=function(){var t=this.getChartMargin(),e=this.getXAxisLabelMargin(),i=this.getXAxisDescriptionMargin();this.m_startY=+this.m_y+ +this.m_height-(+t+ +e+ +i)},ColumnStackChart.prototype.getXAxisLabelMargin=function(){var t=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize),e=this.m_xAxis.m_labelrotation*(Math.PI/180);if(IsBoolean(this.m_xAxis.getLabelTilted())){this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();for(var i=1,s=this.m_categoryData[0].length;i<s;i++)t<Math.abs(this.ctx.measureText(this.m_categoryData[0][i]).width*e)&&(t=Math.abs(this.ctx.measureText(this.m_categoryData[0][i]).width*e));t>this.m_height/4&&(t=this.m_xAxis.getLabelrotation()<=70?this.m_height/4-5:this.m_height/4)}else{this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();var a=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize);this.noOfRows=this.setNoOfRows(),t=a*this.noOfRows}return t},ColumnStackChart.prototype.setNoOfRows=function(){this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily);var t=1;if(!IsBoolean(this.isEmptyCategory)){this.ctx.measureText(this.m_categoryData[0][0]).width;for(var e=(this.getEndX()-this.getStartX())/this.m_categoryData[0].length,i=1,s=this.m_categoryData[0].length;i<s;i++)this.ctx.measureText(this.m_categoryData[0][i]).width>e&&(t=2)}return t},ColumnStackChart.prototype.setEndY=function(){var t;"rectangle"==this.m_chartbase?(this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()+ +this.getSpaceForShowText(),t=this.m_height-this.m_startY,this.m_endY=this.m_endY=+this.m_height<=600?this.m_endY+t/4:this.m_endY+t/4+this.m_stackWidth/4):this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()+ +this.getSpaceForShowText()},ColumnStackChart.prototype.getSpaceForShowText=function(){return IsBoolean(this.getCounterFlagForSeriesVisiblity())&&IsBoolean(this.m_showmarkingorpercentvalue)&&(IsBoolean(this.m_subTitle.m_showsubtitle)||IsBoolean(this.getShowGradient()))?15:0},ColumnStackChart.prototype.getCounterFlagForSeriesVisiblity=function(){for(var t=0,e=0,i=this.m_seriesData.length;e<i;e++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[e]])&&(t++,this.m_seriesVisiblityPosition=e);return 1==t},ColumnStackChart.prototype.setFields=function(t){for(var e=[],i=[],s=0,a=(this.m_fieldsJson=t).length;s<a;s++)switch(this.getProperAttributeNameValue(t[s],"Type")){case"Category":e.push(t[s]);break;case"Series":case"CalculatedField":i.push(t[s])}this.setCategory(e),this.setSeries(i)},ColumnStackChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryFieldColor=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr={};for(var e=0,i=0,s=t.length;i<s;i++){this.m_allCategoryNames[i]=this.getProperAttributeNameValue(t[i],"Name");var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[i],"DisplayName"));this.m_allCategoryDisplayNames[i]=a,this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[i]]=this.getProperAttributeNameValue(t[i],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[i]])&&(this.m_categoryNames[e]=this.getProperAttributeNameValue(t[i],"Name"),this.m_categoryDisplayNames[e]=a,this.m_categoryFieldColor[e]=this.getProperAttributeNameValue(t[i],"Color"),e++)}},ColumnStackChart.prototype.setSeries=function(t){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors=[],this.m_legendNames=[],this.m_seriesVisibleArr={},this.m_allSeriesDisplayNames=[],this.m_allSeriesNames=[],this.m_plotTrasparencyArray=[],this.m_seriesDataLabelProperty=[];var e=0;this.legendMap={};for(var i=0,s=t.length;i<s;i++){var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[i],"DisplayName"));this.m_allSeriesDisplayNames[i]=a,this.m_allSeriesNames[i]=this.getProperAttributeNameValue(t[i],"Name"),this.m_seriesVisibleArr[this.m_allSeriesNames[i]]=this.getProperAttributeNameValue(t[i],"visible"),IsBoolean(this.m_seriesVisibleArr[this.m_allSeriesNames[i]])&&(this.m_seriesDisplayNames[e]=a,this.m_seriesNames[e]=this.getProperAttributeNameValue(t[i],"Name"),this.m_legendNames[e]=a,this.m_seriesColors[e]=convertColorToHex(this.getProperAttributeNameValue(t[i],"Color")),a=this.getProperAttributeNameValue(t[i],"PlotTransparency"),this.m_seriesDataLabelProperty[e]=this.getProperAttributeNameValue(t[i],"DataLabelCustomProperties"),void 0!==this.m_seriesDataLabelProperty[e]?(IsBoolean(this.m_seriesDataLabelProperty[e].useFieldColor)&&(this.m_seriesDataLabelProperty[e].dataLabelFontColor=this.m_seriesColors[e]),IsBoolean(this.m_seriesDataLabelProperty[e].dataLabelUseComponentFormater)&&(this.m_seriesDataLabelProperty[e].datalabelFormaterCurrency=this.m_unit,this.m_seriesDataLabelProperty[e].datalabelFormaterPrecision=this.m_precision,this.m_seriesDataLabelProperty[e].datalabelFormaterPosition=this.m_signposition,this.m_seriesDataLabelProperty[e].datalabelFormaterUnit=this.m_secondaryunit)):this.m_seriesDataLabelProperty[e]=this.getDataLabelProperties(),this.m_plotTrasparencyArray[e]=null!=a&&null!==a&&""!==a?a:1,a={seriesName:this.m_seriesNames[e],displayName:this.m_seriesDisplayNames[e],color:this.m_seriesColors[e],shape:"cube",index:e},this.legendMap[this.m_seriesNames[e]]=a,e++)}this.setLegendsIntialLoad(this.m_defaultlegendfields)},ColumnStackChart.prototype.getLegendInfo=function(){return this.legendMap},ColumnStackChart.prototype.getAllSeriesNames=function(){return this.m_allSeriesNames},ColumnStackChart.prototype.getAllCategoryNames=function(){return this.m_allCategoryNames},ColumnStackChart.prototype.getSeriesNames=function(){return this.m_seriesNames},ColumnStackChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},ColumnStackChart.prototype.getSeriesColors=function(){return this.m_seriesColors},ColumnStackChart.prototype.setLegendNames=function(t){this.m_legendNames=t},ColumnStackChart.prototype.getLegendNames=function(){return this.m_legendNames},ColumnStackChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0,e=this.getAllCategoryNames().length;t<e;t++)this.m_allfieldsName.push(this.getAllCategoryNames()[t]);for(var i=0,e=this.getAllSeriesNames().length;i<e;i++)this.m_allfieldsName.push(this.getAllSeriesNames()[i])},ColumnStackChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},ColumnStackChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var t=0,e=this.getCategoryDisplayNames().length;t<e;t++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[t]);for(var i=0,e=this.getSeriesDisplayNames().length;i<e;i++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[i])},ColumnStackChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},ColumnStackChart.prototype.setCategoryData=function(){if(this.m_categoryData=[],this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var t=0,e=this.getCategoryNames().length;t<e;t++)this.m_categoryData[t]=this.getDataFromJSON(this.getCategoryNames()[t])}},ColumnStackChart.prototype.getCategoryData=function(){return this.m_categoryData},ColumnStackChart.prototype.setSeriesData=function(){this.m_seriesData=[],this.m_ShowToolTipData=[];for(var t=0,e=this.getSeriesNames().length;t<e;t++)this.m_seriesData[t]=this.getDataFromJSON(this.getSeriesNames()[t]),this.m_ShowToolTipData[t]=this.getDataFromJSON(this.getSeriesNames()[t])},ColumnStackChart.prototype.getSeriesData=function(){return this.m_seriesData},ColumnStackChart.prototype.getSeriesToolTipData=function(){return this.m_ShowToolTipData},ColumnStackChart.prototype.setSeriesColor=function(t){this.m_seriesColor=t},ColumnStackChart.prototype.getSeriesColor=function(){return this.m_seriesColor},ColumnStackChart.prototype.init=function(){this.setCategoryData(),this.setSeriesData(),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.isSeriesDataEmpty(),this.setShowSeries(this.getAllFieldsName()),this.updateSeriesDataWithCommaSeperators(),this.visibleSeriesInfo=this.getVisibleSeriesData(this.getSeriesData()),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),IsBoolean(this.m_isEmptySeries)||!IsBoolean(this.isVisibleSeries())||IsBoolean(this.isEmptyCategory)||(this.setPercentageForHundred(),this.initializeCalculation(),this.m_xAxis.init(this,this.m_calculation),this.m_yAxis.init(this,this.m_calculation)),this.initializeToolTipProperty(),this.m_tooltip.init(this)},ColumnStackChart.prototype.updateSeriesDataWithCommaSeperators=function(){this.m_displaySeriesDataFlag=[];for(var t=0,e=this.m_ShowToolTipData.length;t<e;t++){this.m_displaySeriesDataFlag[t]=[];for(var i=0,s=this.m_ShowToolTipData[t].length;i<s;i++)this.m_displaySeriesDataFlag[t][i]=!0,isNaN(this.m_ShowToolTipData[t][i])&&(this.m_displaySeriesDataFlag[t][i]=!1,this.m_ShowToolTipData[t][i]=getNumericComparableValue(this.m_ShowToolTipData[t][i]),this.m_seriesData[t][i]=getNumericComparableValue(this.m_seriesData[t][i]))}},ColumnStackChart.prototype.getUpdateSeriesDataWithCategory=function(t){for(var e=[],i=0,s=t[0].length;i<s;i++){e[i]=[];for(var a=0,r=t.length;a<r;a++)e[i][a]=t[a][i]}return e},ColumnStackChart.prototype.setPercentageForHundred=function(){for(var t=this.getUpdateSeriesDataWithCategory(this.visibleSeriesInfo.seriesData),e=(this.m_SeriesDataInPerForHundredChart,this.m_SeriesDataInPerForHundredChartForToolTip,[]),i=0,s=t.length;i<s;i++){var a=this.getArraySUM(t[i]);e[i]=[];for(var r=0,o=t[i].length;r<o;r++)""===t[i][r]||isNaN(t[i][r])?e[i][r]=0:e[i][r]=t[i][r]/a*100}0<e.length&&(this.m_SeriesDataInPerForHundredChart=this.getUpdateSeriesDataForHundredPercentageChart(e)),this.m_SeriesDataInPerForHundredChartForToolTip=this.getUpdateSeriesDataForHundredPercentageChart(e)},ColumnStackChart.prototype.getUpdateSeriesDataForHundredPercentageChart=function(t){for(var e=[],i=0,s=t[0].length;i<s;i++){e[i]=[];for(var a=0,r=t.length;a<r;a++)e[i][a]=t[a][i]}for(i=0,s=this.visibleSeriesInfo.seriesData.length;i<s;i++)for(a=0,r=this.visibleSeriesInfo.seriesData[i].length;a<r;a++)isNaN(this.visibleSeriesInfo.seriesData[i][a])||+this.visibleSeriesInfo.seriesData[i][a]<0&&(e[i][a]=-1*e[i][a]);return e},ColumnStackChart.prototype.getArraySUM=function(t){for(var e=0,i=0,s=t.length;i<s;i++)t[i]<0&&(t[i]=-1*t[i]),isNaN(t[i])||(e=+e+ +t[i]);return e},ColumnStackChart.prototype.getPercentageForHundred=function(){return this.m_SeriesDataInPerForHundredChart},ColumnStackChart.prototype.getPercentageForHundredForToolTip=function(){return this.m_SeriesDataInPerForHundredChartForToolTip},ColumnStackChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.drawLegends();var t=this.IsDrawingPossible();IsBoolean(t.permission)?(this.drawXAxis(),this.drawYAxis(),this.drawColumnChart(),this.drawDataLabel()):this.drawMessage(t.message)},ColumnStackChart.prototype.initializeCalculation=function(){this.calculateMaxValue(),this.calculateFinalMinMax(),this.setChartDrawingArea();var t=this.updateCategoryData(this.m_categoryData);this.setSeriesDataLabel(),this.m_calculation.init(this,t,this.m_seriesData),this.m_xPixelArray=this.m_calculation.getxPixelArray(),this.m_yPixelArray=this.m_calculation.getyPixelArray(),this.m_stackWidth=this.m_calculation.getBarWidth(),this.m_stackHeightArray=this.m_calculation.getstackHeightArray(),IsBoolean(this.getCounterFlagForSeriesVisiblity())&&IsBoolean(this.m_showmarkingorpercentvalue)&&(this.m_percentageArray=!IsBoolean(this.m_showpercentvalue)||IsBoolean(this.getCheckedAllPosContainigZero())?this.getPercentage():this.getRoundValue(this.getPercentage(),100),this.m_showPerCentageFlag=!0),this.setColorsForSeries(),this.settransparency(),this.initializeColumns()},ColumnStackChart.prototype.calculateMaxValue=function(){this.m_chartType=this.getChartType();var t=this.visibleSeriesInfo.seriesData;if("clustered"==this.m_chartType.toLowerCase()||"overlaid"==this.m_chartType.toLowerCase()){this.calculateMax=0;for(var e=[],i=this.calculateMin=0,s=0,a=t.length;i<a;i++)for(var r=0,o=t[i].length;r<o;r++)isNaN(+t[i][r])||(e[s++]=t[i][r]);var h=e.sort(numOrdA);for(this.calculateMin=h[0],i=0,a=t.length;i<a;i++)for(r=0,o=t[i].length;r<o;r++)+t[i][r]>=this.calculateMax&&(this.calculateMax=+t[i][r]),+t[i][r]<=this.calculateMin&&(this.calculateMin=+t[i][r])}if("stacked"==this.m_chartType.toLowerCase()||""==this.m_chartType){this.calculateMax=0;for(e=[],i=this.calculateMin=0,s=0,a=t[0].length;i<a;i++){for(var l=0,n=0,r=0,o=t.length;r<o;r++)e[s++]=+t[r][i],0<+t[r][i]?l=+l+ +t[r][i]:n=+t[r][i]+ +n;l>=this.calculateMax&&(this.calculateMax=+l),+n<this.calculateMin&&(this.calculateMin=+n)}}if("100%"==this.m_chartType){for(var m=!1,i=0,a=t.length;i<a;i++)for(r=0,o=t[i].length;r<o;r++)if(t[i][r]<0){m=!0;break}this.calculateMax=100,this.calculateMin=IsBoolean(m)?-100:0}},ColumnStackChart.prototype.calculateFinalMinMax=function(){var t=this.calculateMin,e=this.calculateMax,t=this.getCalculateNiceScale(t,e,this.m_basezero,this.m_autoaxissetup,this.m_minimumaxisvalue,this.m_maximumaxisvalue,this.m_height);this.min=t.min,this.max=t.max,this.yAxisNoOfMarker=t.markerArray.length,this.yAxisText=t.step,this.m_yAxisMarkersArray=t.markerArray},ColumnStackChart.prototype.getCheckedAllPosContainigZero=function(){for(var t=!0,e=0,i=this.m_seriesData[this.m_seriesVisiblityPosition].length;e<i;e++)0!=this.m_seriesData[this.m_seriesVisiblityPosition][e]&&(t=!1);return t},ColumnStackChart.prototype.getPercentage=function(){for(var t=[],e=this.getSumOfSeriesData(),i=0,s=this.m_seriesData[this.m_seriesVisiblityPosition].length;i<s;i++)IsBoolean(this.m_showpercentvalue)?t[i]=0==this.m_seriesData[this.m_seriesVisiblityPosition][i]?0:this.m_seriesData[this.m_seriesVisiblityPosition][i]/e*100:t[i]=this.m_seriesData[this.m_seriesVisiblityPosition][i];return t},ColumnStackChart.prototype.getSumOfSeriesData=function(){for(var t=0,e=0,i=this.m_seriesData[this.m_seriesVisiblityPosition].length;e<i;e++)t=+t+ +this.m_seriesData[this.m_seriesVisiblityPosition][e];return t},ColumnStackChart.prototype.settransparency=function(){this.m_transparencyarr={};for(var t=0;t<this.m_seriesNames.length;t++){this.m_transparencyarr[this.m_seriesNames[t]]=[];for(var e=0;e<this.m_seriesData[0].length;e++)this.m_transparencyarr[this.m_seriesNames[t]][e]=this.m_plotTrasparencyArray[t]}},ColumnStackChart.prototype.initializeColumns=function(){"clustered"==this.m_charttype&&(this.m_stackWidth=this.m_stackWidth*this.clusteredbarpadding);for(var t,e,i=0,s=0,a=this.m_seriesNames.length;i<a;i++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[i]])&&(this.m_columnsArray[this.m_seriesNames[i]]=new Columns,this.m_columnsArray[this.m_seriesNames[i]].init(this.m_xPixelArray[s],this.m_yPixelArray[s],this.m_stackWidth,this.m_stackHeightArray[s],this.m_percentageArray,this.getColorsForSeries()[s],this.m_strokecolor,this.m_showgradient,this.m_showPerCentageFlag,this.m_showpercentvalue,this.m_transparencyarr[this.m_seriesNames[i]],this),"overlaid"!=this.m_charttype.toLowerCase()&&!IsBoolean(this.m_seriesDataLabelProperty[i].showDataLabel)||(this.m_valueTextSeries[this.m_seriesNames[i]]=new ValueTextSeries,t="overlaid"==this.m_charttype.toLowerCase()?this.m_seriesDataLabelPropertyOverlaid[s]:this.m_seriesDataLabelProperty[i],e="overlaid"==this.m_charttype.toLowerCase()?this.m_calculation.m_yAxisData[s]:this.m_seriesData[i],this.m_valueTextSeries[this.m_seriesNames[i]].init(this.m_xPixelArray[s],this.m_yPixelArray[s],this,this.m_seriesDataForDataLabel[s],t,e,this.m_stackWidth,this.m_stackHeightArray[s],this.m_shortname)),s++)},ColumnStackChart.prototype.setSeriesDataLabel=function(){this.m_seriesDataForDataLabel=[],this.m_seriesDataLabelPropertyOverlaid=[];for(var t=0,e=this.getDataProvider().length;t<e;t++)for(var i,s=this.getDataProvider()[t],a=0,r=0,o=this.getSeriesNames().length;a<o;a++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[a]])&&(this.m_seriesDataForDataLabel[r]||(this.m_seriesDataForDataLabel[r]=[]),this.m_seriesDataLabelPropertyOverlaid[r]=this.m_seriesDataLabelProperty[a],i=this.getValidFieldDataFromRecord(s,this.m_seriesDataLabelProperty[a].datalabelField),this.m_seriesDataForDataLabel[r][t]=i,r++)},ColumnStackChart.prototype.getSeriesColorforColumn=function(t){for(var e=this.getSeriesColors(),i=[],s=0,a=this.m_seriesData[t].length;s<a;s++)i.push(e[t]);return i},ColumnStackChart.prototype.getColorsForSeries=function(){return this.m_seriesColorsArray},ColumnStackChart.prototype.setColorsForSeries=function(){if(this.m_seriesColorsArray=[],IsBoolean(this.m_enablecolorfromdrill)&&IsBoolean(this.m_startDrill))for(var t=0,e=this.visibleSeriesInfo.seriesData.length;t<e;t++){this.m_seriesColorsArray[t]=[];for(var i=0,s=this.visibleSeriesInfo.seriesData[t].length;i<s;i++)this.m_seriesColorsArray[t][i]=this.m_drillColor}else if(!IsBoolean(this.m_designMode)&&""!=this.getCategoryColors()&&0<this.getCategoryColors().getCategoryColor().length&&IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName()))for(var a=this.getCategoryColors().getCategoryColorsForCategoryNames(this.getCategoryData()[0],this.m_categoryFieldColor),t=0,e=this.visibleSeriesInfo.seriesData.length;t<e;t++){this.m_seriesColorsArray[t]=[];for(i=0,s=this.visibleSeriesInfo.seriesData[t].length;i<s;i++)this.m_seriesColorsArray[t][i]=a[i]}else if(IsBoolean(this.m_designMode)||""==this.getCategoryColors()||IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName())&&0!=this.getCategoryColors().getCategoryColor().length||""==this.getConditionalColors()||null==this.getConditionalColors()||!(0<this.getConditionalColors().getConditionalColor().length))for(var r=this.visibleSeriesInfo.seriesColor,t=0;t<this.visibleSeriesInfo.seriesData.length;t++){this.m_seriesColorsArray[t]=[];for(i=0,s=this.visibleSeriesInfo.seriesData[t].length;i<s;i++)this.m_seriesColorsArray[t][i]=r[t]}else for(var o=this.getConditionalColors().getConditionalColorsForConditions(this.visibleSeriesInfo.seriesName,this.visibleSeriesInfo.seriesColor,this.visibleSeriesInfo.seriesData,this),t=0,e=this.visibleSeriesInfo.seriesData.length;t<e;t++){this.m_seriesColorsArray[t]=[];for(var i=0;i<this.visibleSeriesInfo.seriesData[t].length;i++)this.m_seriesColorsArray[t][i]=o[t][i]}},ColumnStackChart.prototype.updateCategoryData=function(t){var e=[];if(null!=t&&null!==t&&""!==t&&0!=t.length)for(var i=0,s=t[0].length;i<s;i++){e[i]=[];for(var a=0,r=t.length;a<r;a++)e[i][a]=t[a][i]}return e},ColumnStackChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},ColumnStackChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEvent()},ColumnStackChart.prototype.drawTitle=function(){this.m_title.draw()},ColumnStackChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},ColumnStackChart.prototype.drawXAxis=function(){this.m_xAxis.drawTickMarks(),this.m_xAxis.drawVerticalLine(),this.m_xAxis.markXaxis(),this.m_xAxis.drawXAxis()},ColumnStackChart.prototype.drawYAxis=function(){IsBoolean(this.m_showmarkerline)&&this.m_yAxis.horizontalMarkerLines(),IsBoolean(this.m_zeromarkerline)&&!IsBoolean(this.m_basezero)&&IsBoolean(this.m_yAxis.hasNegativeAxisMarker(this.m_yAxisMarkersArray))&&this.m_yAxis.zeroMarkerLine(),this.m_yAxis.markYaxis(),this.m_yAxis.drawYAxis()},ColumnStackChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},ColumnStackChart.prototype.drawColumnChart=function(){for(var t=0,e=this.visibleSeriesInfo.seriesName.length;t<e;t++)this.m_columnsArray[this.visibleSeriesInfo.seriesName[t]].drawColumns()},ColumnStackChart.prototype.drawDataLabel=function(){this.m_overlappeddatalabelarrayX=[],this.m_overlappeddatalabelarrayY=[];for(var t=0,e=this.m_seriesNames.length;t<e;t++)!IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[t]])||"overlaid"!=this.m_charttype.toLowerCase()&&!IsBoolean(this.m_seriesDataLabelProperty[t].showDataLabel)||this.m_valueTextSeries[this.m_seriesNames[t]].drawValueTextSeries()},ColumnStackChart.prototype.getXPositionforToolTip=function(){for(var t=[],e=this.m_calculation.getxPixelArray(),i=0,s=e[0].length;i<s;i++)t.push(e[0][i]);return t},ColumnStackChart.prototype.getToolTipData=function(t,e){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries())&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType)){var i="",s=this.getVisibleSeriesData(this.getSeriesToolTipData()).seriesData,a=this.m_calculation.getBarWidth()*this.m_xPixelArray.length;if("clustered"==this.m_charttype.toLowerCase()&&t>=this.getStartX()&&t<=this.getEndX()&&e<=this.getStartY()&&e>=this.getEndY()){this.xPositions=this.getXPositionforToolTip();for(var r=0,o=this.xPositions.length;r<o;r++)if(t<=+this.xPositions[r]+a&&t>=+this.xPositions[r]){if((_={cat:""}).data=new Array,_.cat=this.getCategoryData()[0][r],IsBoolean("Default"==this.m_customtextboxfortooltip.dataTipType)){for(var h=0,l=0,n=s.length;h<n;h++){(g=[])[0]={color:this.getColorsForSeries()[h][r],shape:this.legendMap[this.getSeriesNames()[h]].shape},g[1]=this.visibleSeriesInfo.seriesDisplayName[h],""==s[h][r]||isNaN(s[h][r])||null==s[h][r]||"null"==s[h][r]?(i=s[h][r],0):i=(y=+s[h][r])%1!=0&&"default"!==this.m_tooltipprecision?y.toFixed(this.m_tooltipprecision):+s[h][r];var m=this.getUpdatedFormatterForToolTip(i,this.visibleSeriesInfo.seriesName[h]);g[2]=m,_.data[l]=g,l++}_.highlightIndex=this.getDrillColor(t,e),IsBoolean(this.m_controlledtooltip)&&(_=this.updateTooltipData(_));break}_=this.getDataProvider()[r]}}else if(("stacked"==this.m_charttype.toLowerCase()||""==this.m_charttype.toLowerCase())&&t>=this.getStartX()&&t<=this.getEndX()&&e<=this.getStartY()&&e>=this.getEndY()){this.xPositions=this.getXPositionforToolTip();for(r=0,o=this.xPositions.length;r<o;r++)if(t<=+this.xPositions[r]+ +this.m_calculation.getBarWidth()&&t>=+this.xPositions[r]){if((_={cat:""}).data=new Array,_.cat=this.getCategoryData()[0][r],IsBoolean("Default"==this.m_customtextboxfortooltip.dataTipType)){for(h=0,l=0,n=s.length;h<n;h++){0;m=((g=[])[0]={color:this.getColorsForSeries()[h][r],shape:this.legendMap[this.getSeriesNames()[h]].shape},g[1]=this.visibleSeriesInfo.seriesDisplayName[h],""==s[h][r]||isNaN(s[h][r])||null==s[h][r]||"null"==s[h][r]?(i=s[h][r],0):i=(y=+s[h][r])%1!=0&&"default"!==this.m_tooltipprecision?y.toFixed(this.m_tooltipprecision):+s[h][r],this.getUpdatedFormatterForToolTip(i,this.visibleSeriesInfo.seriesName[h]));g[2]=m,_.data[l]=g,l++}_.highlightIndex=this.getDrillColor(t,e),IsBoolean(this.m_controlledtooltip)&&(_=this.updateTooltipData(_));break}_=this.getDataProvider()[r]}}else if(("overlaid"==this.m_charttype.toLowerCase()||"100%"==this.m_charttype)&&t>=this.getStartX()&&t<=this.getEndX()&&e<=this.getStartY()&&e>=this.getEndY()){this.xPositions=this.getXPositionforToolTip();for(r=0,o=this.xPositions.length;r<o;r++)if(t<=+this.xPositions[r]+ +this.m_calculation.getBarWidth()&&t>=+this.xPositions[r]){var _={},c=this.getPercentageForHundredForToolTip(),s=(_.cat="",_.data=new Array,_.cat=this.getCategoryData()[0][r],this.visibleSeriesInfo.seriesData);if(IsBoolean("Default"==this.m_customtextboxfortooltip.dataTipType)){for(h=0,l=0,n=s.length;h<n;h++){0;(g=[])[0]={shape:this.legendMap[this.getSeriesNames()[h]].shape},IsBoolean(this.m_enablecolorfromdrill)&&IsBoolean(this.m_startDrill)?g[0].color="overlaid"==this.m_charttype?this.m_drillColor:this.getColorsForSeries()[h][r]:g[0].color="overlaid"==this.m_charttype?this.visibleSeriesInfo.seriesColor[h]:this.getColorsForSeries()[h][r],g[1]=this.visibleSeriesInfo.seriesDisplayName[h],""==s[h][r]||isNaN(s[h][r])||null==s[h][r]||"null"==s[h][r]?(i=s[h][r],0):i=(y=+s[h][r])%1!=0&&"default"!==this.m_tooltipprecision?y.toFixed(this.m_tooltipprecision):+s[h][r];var g,m=this.getUpdatedFormatterForToolTip(i,this.visibleSeriesInfo.seriesName[h]);if(g[2]=m,"100%"==this.m_charttype&&1<this.getSeriesDisplayNames().length){for(var y=+s[h][r]<0?-1:1,u=("auto"==this.m_tooltipproperties.tooltippercentprecision?0==countDecimal((c[h][r]*y).toString())?g[3]=c[h][r]*y+"%":(g[3]=(c[h][r]*y).toFixed(2),g[3]%1==0?g[3]=(+g[3]).toFixed()+"%":g[3]=g[3]+"%"):g[3]=(c[h][r]*y).toFixed(this.m_tooltipproperties.tooltippercentprecision)+"%",0),p=0;p<=h;p++)isNaN(s[p][r])||(u+=+s[p][r]);for(var C=0,d=0;d<=h;d++)isNaN(c[d][r])||(C+=c[d][r]);IsBoolean(this.m_tooltipproperties.showcummulativesum)&&(g[4]=this.getNumberWithCommas(u)),IsBoolean(this.m_tooltipproperties.showcummulativepercent)&&(g[5]=C.toFixed(2)+"%")}_.data[l]=g,l++}_.highlightIndex=this.getDrillColor(t,e),IsBoolean(this.m_controlledtooltip)&&(_=this.updateTooltipData(_));break}_=this.getDataProvider()[r]}}else this.hideToolTip();return _}},ColumnStackChart.prototype.getDrillColor=function(t,e){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)){var i,s="stacked"==this.m_charttype?0:this.m_drillminstackheight;IsBoolean(this.m_basezero)&&(i=this.getVisibleSeriesData(this.getSeriesToolTipData()).seriesData);for(var a=0,r=this.m_xPixelArray.length;a<r;a++)for(var o=0,h=this.m_xPixelArray[a].length;o<h;o++)if(t<=+this.m_xPixelArray[a][o]+ +this.m_calculation.getBarWidth()&&t>=+this.m_xPixelArray[a][o])if("overlaid"!=this.m_charttype)for(var l=0,n=this.m_yPixelArray.length;l<n;l++){var m=0;if(!IsBoolean(this.m_basezero)&&Math.abs(+this.m_stackHeightArray[l][o])<s?m=+this.m_stackHeightArray[l][o]<0?s:-s:IsBoolean(this.m_basezero)&&(m=+i[l][o]<0?0:-s),e<=(+this.m_stackHeightArray[l][o]<0?(_=+this.m_yPixelArray[l][o]+ +this.m_stackHeightArray[l][o],+this.m_yPixelArray[l][o]+m):isNaN(+this.m_stackHeightArray[l][o])?(_=this.getGarbageDrillPoints().range1,this.getGarbageDrillPoints().range2):(_=+this.m_yPixelArray[l][o]+m,+this.m_yPixelArray[l][o]+ +this.m_stackHeightArray[l][o]))&&_<=e){if("clustered"!=this.m_charttype.toLowerCase())return l;if(t<=+this.m_xPixelArray[l][o]+ +this.m_stackWidth&&t>=+this.m_xPixelArray[l][o])return a}}else for(l=this.m_yPixelArray.length-1;0<=l;l--){var _,m=0;if(!IsBoolean(this.m_basezero)&&Math.abs(+this.m_stackHeightArray[l][o])<s?m=+this.m_stackHeightArray[l][o]<0?s:-s:IsBoolean(this.m_basezero)&&(m=+i[l][o]<0?0:-s),e<=(+this.m_stackHeightArray[l][o]<0?(_=+this.m_yPixelArray[l][o]+ +this.m_stackHeightArray[l][o],+this.m_yPixelArray[l][o]+m):isNaN(+this.m_stackHeightArray[l][o])?(_=this.getGarbageDrillPoints().range1,this.getGarbageDrillPoints().range2):(_=+this.m_yPixelArray[l][o]+m,+this.m_yPixelArray[l][o]+ +this.m_stackHeightArray[l][o]))&&_<=e)return this.m_calculation.m_originalindexforoverlaiddata[2][l][o]}}},ColumnStackChart.prototype.getGarbageDrillPoints=function(){var t,e,i=[],s="stacked"==this.m_charttype?0:this.m_drillminstackheight,a=-1==(i=this.m_yAxisMarkersArray).indexOf("0")?-1==i.indexOf(0)?"":i.indexOf(0):i.indexOf("0");return i=""!==a&&(a=+this.m_startY-this.m_calculation.m_chart.m_yAxis.getYAxisDiv()*a,!0)?(e=+a+-s,+a):(a=0<+i[0]?this.getStartY():this.getEndY(),t=0<+i[0]?0:s,e=a-(0<+i[0]?s:0),a+t),{range1:e,range2:i}},ColumnStackChart.prototype.getDrillDataPoints=function(t,e){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries())){var i,s="stacked"==this.m_charttype?0:this.m_drillminstackheight,a=!1;if(IsBoolean(this.m_basezero)&&(i=this.getVisibleSeriesData(this.getSeriesToolTipData()).seriesData),"overlaid"!=this.m_charttype){for(var r=0,o=this.m_xPixelArray.length;r<o;r++)for(var h=0,l=this.m_xPixelArray[r].length;h<l;h++)if(t<=+this.m_xPixelArray[r][h]+ +this.m_calculation.getBarWidth()&&t>=+this.m_xPixelArray[r][h])for(var n=0,m=this.m_yPixelArray.length;n<m;n++){var _=0;if(!IsBoolean(this.m_basezero)&&Math.abs(+this.m_stackHeightArray[n][h])<s?_=+this.m_stackHeightArray[n][h]<0?s:-s:IsBoolean(this.m_basezero)&&(_=+i[n][h]<0?0:-s),e<=(+this.m_stackHeightArray[n][h]<0?(f=+this.m_yPixelArray[n][h]+ +this.m_stackHeightArray[n][h],+this.m_yPixelArray[n][h]+_):isNaN(+this.m_stackHeightArray[n][h])?(f=this.getGarbageDrillPoints().range1,this.getGarbageDrillPoints().range2):(f=+this.m_yPixelArray[n][h]+_,+this.m_yPixelArray[n][h]+ +this.m_stackHeightArray[n][h]))&&f<=e&&t<=+this.m_xPixelArray[n][h]+ +this.m_stackWidth&&t>=+this.m_xPixelArray[n][h]){var c=this.getFieldNameValueMap(h);if(d="clustered"==this.m_charttype.toLowerCase()?(A=this.getColorsForSeries()[n][h],S=this.visibleSeriesInfo.seriesName[r],this.visibleSeriesInfo.seriesDisplayName[r]):(isNaN(+this.m_stackHeightArray[n][h]),A=this.getColorsForSeries()[n][h],S=this.visibleSeriesInfo.seriesName[n],this.visibleSeriesInfo.seriesDisplayName[n]),IsBoolean(this.enableDrillHighlighter)){for(var g=0;g<this.m_seriesNames.length;g++){for(var y=0;y<this.m_transparencyarr[this.m_seriesNames[g]].length;y++)IsBoolean(this.m_drilltoggle)?this.m_transparencyarr[this.m_seriesNames[g]][y]=.5:this.m_transparencyarr[this.m_seriesNames[g]][y]=1;this.m_transparencyarr[this.m_seriesNames[g]][h]=1}this.m_stackWidth=this.m_calculation.getBarWidth(),this.initializeColumns(),this.drawChart()}this.m_drilltoggle=!1;for(var u=c[S],p=this.m_categoryNames,C=[],g=0;g<p.length;g++)C.push(c[p[g]]);return c.drillField=S,c.drillDisplayField=d,c.drillValue=u,a=!0,c.drillIndex=h,c.drillCategoriesNames=p,c.drillCategory=C,{drillRecord:c,drillColor:A}}}if("stacked"==this.m_charttype&&!a)for(r=0,o=this.xPositions.length;r<o;r++)if(t<=+this.xPositions[r]+ +this.m_calculation.getBarWidth()&&t>=+this.xPositions[r])for(var d,x=0,l=this.m_yPixelArray.length;x<l;x++)if(e>=this.m_yPixelArray[x][r]&&e<=this.m_yPixelArray[x][r]+this.m_drillminstackheight||e<=this.m_yPixelArray[x][r]+this.m_stackHeightArray[x][r]&&e>=this.m_yPixelArray[x][r]-this.m_drillminstackheight)return c=this.getFieldNameValueMap(r),A=this.m_drillColor,u=d=S="",c.drillField=S,c.drillDisplayField=d,c.drillValue=u,a=!0,{drillRecord:c,drillColor:A}}else for(r=0,o=this.m_xPixelArray.length;r<o;r++)for(h=0,l=this.m_xPixelArray[r].length;h<l;h++)if(t<=+this.m_xPixelArray[r][h]+ +this.m_calculation.getBarWidth()&&t>=+this.m_xPixelArray[r][h])for(n=this.m_yPixelArray.length-1;0<=n;n--){var f,A,S,_=0;if(!IsBoolean(this.m_basezero)&&Math.abs(+this.m_stackHeightArray[n][h])<s?_=+this.m_stackHeightArray[n][h]<0?s:-s:IsBoolean(this.m_basezero)&&(_=+i[n][h]<0?0:-s),e<=(+this.m_stackHeightArray[n][h]<0?(f=+this.m_yPixelArray[n][h]+ +this.m_stackHeightArray[n][h],+this.m_yPixelArray[n][h]+_):isNaN(+this.m_stackHeightArray[n][h])?(f=this.getGarbageDrillPoints().range1,this.getGarbageDrillPoints().range2):(f=+this.m_yPixelArray[n][h]+_,+this.m_yPixelArray[n][h]+ +this.m_stackHeightArray[n][h]))&&f<=e)return c=this.getFieldNameValueMap(h),A=this.getColorsForSeries()[n][h],u=c[S=this.getSeriesNames()[this.m_calculation.m_originalindexforoverlaiddata[2][n][h]]],u=c[S],c.drillField=S,c.drillValue=u,{drillRecord:c,drillColor:A}}}},ColumnCalculation.prototype.init=function(t,e,i){this.m_chart=t,this.m_xAxisData=e,this.m_yAxisData=this.m_chart.visibleSeriesInfo.seriesData,"clustered"==this.m_chart.m_charttype.toLowerCase()?this.m_maxbarwidth=this.m_chart.m_maxbarwidth*(1+.5*(this.m_yAxisData.length-1)):this.m_maxbarwidth=this.m_chart.m_maxbarwidth,this.m_startX=this.m_chart.getStartX(),this.m_startY=this.m_chart.getStartY(),this.m_endX=this.m_chart.getEndX(),this.m_endY=this.m_chart.getEndY(),this.m_chartType=this.m_chart.getChartType(),this.setDrawHeight(),this.setDrawWidth(),this.m_columnGap=10,this.calculateBarWidth(),this.setRatio(),this.setxPixelArray(),"stacked"==this.m_chartType.toLowerCase()||"100%"==this.m_chartType.toLowerCase()||""==this.m_chartType.toLowerCase()?(this.setstackHeightArray(),this.setyPixelArray()):(this.setyPixelArray(),this.setstackHeightArray())},ColumnCalculation.prototype.getMaxValue=function(){return this.m_chart.max},ColumnCalculation.prototype.minValue=function(){return this.m_chart.min},ColumnCalculation.prototype.getYAxisText=function(){return this.m_chart.m_yAxisText},ColumnCalculation.prototype.getPercentile=function(t){t%=10;return t=10!==t?10-t:t},ColumnCalculation.prototype.getYAxisMarkersArray=function(){return this.m_chart.m_yAxisMarkersArray},ColumnCalculation.prototype.getDrawHeight=function(){return this.drawHeight},ColumnCalculation.prototype.setDrawHeight=function(){this.drawHeight=this.m_startY-this.m_endY},ColumnCalculation.prototype.getDrawWidth=function(){return this.drawWidth},ColumnCalculation.prototype.setDrawWidth=function(){this.drawWidth=+this.m_endX-+this.m_startX},ColumnCalculation.prototype.getRatio=function(){return this.ratio},ColumnCalculation.prototype.setRatio=function(){var t=this.getMaxValue()-this.minValue();this.ratio=0<t?this.getDrawHeight()/t:1},ColumnCalculation.prototype.calculateBarWidth=function(){var t=this.m_xAxisData.length,t=(this.m_columnGap,+this.getDrawWidth()/t*this.m_chart.m_barwidth/100);this.setBarWidth(t),this.setColumnGap(t)},ColumnCalculation.prototype.setBarWidth=function(t){this.barWidth=t,"clustered"==this.m_chartType.toLowerCase()&&this.setBarWidthForClustered()},ColumnCalculation.prototype.setColumnGap=function(t){t*=this.m_xAxisData.length,t=this.getDrawWidth()-t;this.m_columnGap=t/this.m_xAxisData.length},ColumnCalculation.prototype.setBarWidthForClustered=function(){this.barWidth/=this.m_yAxisData.length},ColumnCalculation.prototype.getBarWidth=function(){return this.barWidth},ColumnCalculation.prototype.getColumnGap=function(){return this.m_columnGap},ColumnCalculation.prototype.getxPixelArray=function(){return this.m_xPixelArray},ColumnCalculation.prototype.setxPixelArray=function(){for(var t=[],e=(this.getBarWidth()-this.getBarWidth()*this.m_chart.clusteredbarpadding)/2,i=0,s=this.m_yAxisData[0].length;i<s;i++){t[i]=[];for(var a=0,r=this.m_yAxisData.length;a<r;a++)"clustered"==this.m_chartType.toLowerCase()?t[i][a]=+this.m_startX+ +this.getBarWidth()*a+this.getColumnGap()/2+(+this.getBarWidth()*this.m_yAxisData.length+ +this.getColumnGap())*i+e:t[i][a]=+this.m_startX+ +this.getBarWidth()*i+this.getColumnGap()/2+ +this.getColumnGap()*i}this.m_xPixelArray=this.transformXPixelArray(t)},ColumnCalculation.prototype.transformXPixelArray=function(t){for(var e=[],i=0,s=this.m_yAxisData.length;i<s;i++){e[i]=[];for(var a=0,r=this.m_yAxisData[0].length;a<r;a++)e[i][a]=t[a][i]}return e},ColumnCalculation.prototype.getRatioForHundredPercent=function(t){return+this.m_hundredPercentsRatios[t]},ColumnCalculation.prototype.setyPixelArray=function(){"clustered"==this.m_chartType.toLowerCase()?this.m_ypixelArray=this.getYPixelArrayForClustered():"overlaid"==this.m_chartType.toLowerCase()?this.m_ypixelArray=this.getYPixelArrayForOverlaid():"stacked"!=this.m_chartType.toLowerCase()&&"100%"!=this.m_chartType&&""!=this.m_chartType||(this.m_ypixelArray=this.setyPixelArrayForStackedOrHundredPercent())},ColumnCalculation.prototype.getYPixelArrayForClustered=function(){for(var t=[],e=0,i=this.m_yAxisData.length;e<i;e++){t[e]=[];for(var s=0,a=this.m_yAxisData[e].length;s<a;s++){var r,o=this.getRatio(),h=this.minValue(),l=this.getMaxValue();this.m_yAxisData[e][s]>l&&(this.m_yAxisData[e][s]=l),this.m_yAxisData[e][s]<h&&(this.m_yAxisData[e][s]=h),+(l=h<0?(r=this.m_startY-Math.abs(h)*o,this.m_yAxisData[e][s]):(r=this.m_startY,this.m_yAxisData[e][s]-h))<0&&!IsBoolean(this.m_chart.isAxisSetup())&&0<+this.m_chart.m_minimumaxisvalue&&(l=0),t[e][s]=r-o*l-1}}return t},ColumnCalculation.prototype.setSeriesColorForOverlaid=function(t){this.SeriesColorForOverlaid=t},ColumnCalculation.prototype.getSeriesColorForOverlaid=function(){return this.SeriesColorForOverlaid},ColumnCalculation.prototype.getYPixelArrayForOverlaid=function(){for(var t=this.arrangeDataForOverlaid(),e=(this.setSeriesColorForOverlaid(t[1]),this.m_yAxisData=t[0],this.m_chart.m_seriesDataForDataLabel=t[3],this.m_chart.m_seriesDataLabelPropertyOverlaid=t[4],[]),i=0,s=this.m_yAxisData.length;i<s;i++){e[i]=[];for(var a=0,r=this.m_yAxisData[i].length;a<r;a++){this.getRatio();var o,h=this.getRatio(),l=this.minValue(),n=this.getMaxValue();this.m_yAxisData[i][a]>n&&(this.m_yAxisData[i][a]=n),this.m_yAxisData[i][a]<l&&(this.m_yAxisData[i][a]=l),+(n=l<0?(o=this.m_startY-Math.abs(l)*h,this.m_yAxisData[i][a]):(o=this.m_startY,this.m_yAxisData[i][a]-l))<0&&!IsBoolean(this.m_chart.isAxisSetup())&&0<+this.m_chart.m_minimumaxisvalue&&(n=0),e[i][a]=o-h*n-1}}return e},ColumnCalculation.prototype.arrangeDataForOverlaid=function(){this.m_originalindexforoverlaiddata=[];for(var t=this.m_chart.visibleSeriesInfo.seriesColor,e=[],i=[],s=[],a=[],r=[],o=0,h=this.m_yAxisData[0].length;o<h;o++){e[o]=[],a[o]=[],r[o]=[],i[o]=[],s[o]=[];for(var l=0,n=this.m_yAxisData.length;l<n;l++)e[o][l]=isNaN(this.m_yAxisData[l][o])?0:+this.m_yAxisData[l][o],i[o][l]=this.m_chart.m_seriesDataForDataLabel[l][o],s[o][l]=this.m_chart.m_seriesDataLabelPropertyOverlaid[l],a[o][l]=t[l],r[o][l]=l}var m=this.sortingDataWithColor(e,a,r,i,s),m=this.arrengeSeriesDataandColor(m);return this.m_originalindexforoverlaiddata=m},ColumnCalculation.prototype.sortingDataWithColor=function(t,e,i,s,a){for(var r=[],o=0,h=t.length;o<h;o++){r[o]=[];for(var l=0,n=t[o].length;l<n;l++)r[o][l]=[],r[o][l][0]=+t[o][l],r[o][l][1]=e[o][l],r[o][l][2]=i[o][l],r[o][l][3]=s[o][l],r[o][l][4]=a[o][l]}for(var m=0,h=r.length;m<h;m++)r[m].sort(function(t,e){return e[0]-t[0]});for(var _=[],c=0,h=r.length;c<h;c++){var g=0;_[c]=[];for(var y=0,n=r[c].length;y<n;y++)+r[c][y][0]<0&&(_[c][g++]=r[c][y]);_[c].sort(function(t,e){return t[0]-e[0]});for(var u=0,y=0,p=r[c].length;y<p;y++)+r[c][y][0]<0&&(r[c][y]=_[c][u++])}return r},ColumnCalculation.prototype.arrengeSeriesDataandColor=function(t){for(var e=[],i=[],s=[],a=[],r=[],o=0,h=t.length;o<h;o++){e[o]=[],i[o]=[],s[o]=[],a[o]=[],r[o]=[];for(var l=0,n=t[o].length;l<n;l++)e[o][l]=t[o][l][0],i[o][l]=t[o][l][1],s[o][l]=t[o][l][2],a[o][l]=t[o][l][3],r[o][l]=t[o][l][4]}for(var m=[],_=[],c=[],g=[],y=[],u=0,h=e[0].length;u<h;u++){m[u]=[],_[u]=[],c[u]=[],g[u]=[],y[u]=[];for(var p=0,n=e.length;p<n;p++)m[u][p]=+e[p][u],_[u][p]=i[p][u],c[u][p]=s[p][u],g[u][p]=a[p][u],y[u][p]=r[p][u]}return[m,_,c,g,y]},ColumnCalculation.prototype.setyPixelArrayForStackedOrHundredPercent=function(){for(var t=[],e=[],i=[],s="100%"===this.m_chartType?this.m_chart.getPercentageForHundred():this.m_yAxisData,a=0,r=s.length;a<r;a++){t[a]=[],e[a]=[],i[a]=[];for(var o=0,h=s[a].length;o<h;o++){isNaN(s[a][o])&&(s[a][o]="");var l=this.getRatio();0==a?0<=+s[a][o]?(0<+this.m_chart.m_minimumaxisvalue&&!IsBoolean(this.m_chart.isAxisSetup())?t[a][o]=this.m_startY-l*s[a][o]:t[a][o]=this.m_startY-l*s[a][o]+l*this.minValue(),e[a][o]=t[a][o],i[a][o]=+this.m_startY+l*this.minValue()):(t[a][o]=this.m_startY-l*s[a][o]+l*this.minValue(),i[a][o]=t[a][o],e[a][o]=+this.m_startY+l*this.minValue()):0<=this.m_yAxisData[a][o]?(e[a][o]=e[a-1][o],i[a][o]=i[a-1][o],t[a][o]=+e[a][o]-l*s[a][o],e[a][o]=+t[a][o]):(i[a][o]=i[a-1][o],e[a][o]=e[a-1][o],t[a][o]=+i[a][o]-l*s[a][o],i[a][o]=+t[a][o])}}return t},ColumnCalculation.prototype.getyPixelArray=function(){return this.m_ypixelArray},ColumnCalculation.prototype.calculationYpixcelForClusterTypeChart=function(){},ColumnCalculation.prototype.getstackHeightArray=function(){return this.m_stackHeightArray},ColumnCalculation.prototype.setstackHeightArray=function(){var t=[];if("stacked"==this.m_chartType.toLowerCase()||"100%"==this.m_chartType.toLowerCase()||""==this.m_chartType.toLowerCase())this.arrangeStackHeight();else{for(var e,i=this.getRatio(),s=this.minValue(),a=0,r=this.m_yAxisData.length;a<r;a++){t[a]=[];for(var o=0,h=this.m_yAxisData[a].length;o<h;o++)t[a][o]=this.getRatio(),"clustered"!==this.m_chartType.toLowerCase()&&"overlaid"!==this.m_chartType.toLowerCase()||(+(e=s<0?this.m_yAxisData[a][o]:this.m_yAxisData[a][o]-s)<0&&!IsBoolean(this.m_chart.isAxisSetup())&&0<+this.m_chart.m_minimumaxisvalue&&(e=0),t[a][o]=i*e)}this.m_stackHeightArray=t}},ColumnCalculation.prototype.arrangeStackHeight=function(){for(var t=[],e=[],i=(this.minValue(),"100%"===this.m_chartType?this.m_chart.getPercentageForHundred():this.m_yAxisData),s=0,a=i[0].length;s<a;s++)for(var r=0,o=(e[s]=[],0),h=!0,l=0,n=0,m=0,_=i.length;m<_;m++){var c,g=this.getRatio();0<=+i[m][s]?(+i[m][s]>+this.getMaxValue()&&IsBoolean(this.m_chart.isAxisSetup())?i[m][s]=0:IsBoolean(this.m_chart.isAxisSetup())||(+(o=+o+ +i[m][s])>+this.getMaxValue()&&0==r?(c=void 0!==e[s][m-1]?e[s][m-1]:0,i[m][s]=this.getMaxValue()-c,o=0,r++,h=!1):IsBoolean(h)||(i[m][s]=0)),l+=i[m][s],e[s][m]=l):(+i[m][s]<=+this.minValue()?i[m][s]=this.minValue()-n:+i[m][s]>=+this.minValue()&&0!==m&&i[m][s]>n&&"100%"!==this.m_chartType&&(i[m][s]=n<=this.minValue()?0:i[m][s]),"100%"==this.m_chartType&&+i[m][s]+n<this.minValue()&&(i[m][s]=0),n+=i[m][s],e[s][m]=Math.abs(n))}for(s=0,a=i.length;s<a;s++){t[s]=[];for(m=0,_=i[s].length;m<_;m++){g=this.getRatio();t[s][m]=this.getRatio(),t[s][m]=g*i[s][m]}}this.m_stackHeightArray=t},ColumnCalculation.prototype.calculateSum=function(t){for(var e=0,i=0,s=t.length;i<s;i++)e=+e+ +t[i];return e},Columns.prototype.init=function(t,e,i,s,a,r,o,h,l,n,m,_){this.m_showGradient=h,this.m_xPixel=t,this.m_yPixelArray=e,this.m_stackWidth=i,this.m_stackHeightArray=s,this.m_stackPercentageArray=a,this.m_stackColorArray=r,this.m_strokeColor=o,this.m_showPercentFlag=l,this.m_percentvalueFlag=n,this.m_plotTrasparencyArray=m,this.m_chart=_;for(var c=0,g=this.m_yPixelArray.length;c<g;c++)this.m_stackArray[c]=new Stack,this.m_stackArray[c].init(this.m_xPixel[c],this.m_yPixelArray[c],this.m_stackWidth,this.m_stackHeightArray[c],this.m_stackColorArray[c],this.m_strokeColor,this.m_showGradient,this.m_chart.ctx,this.m_chart.m_chartbase,this.m_stackPercentageArray[c],this.m_showPercentFlag,this.m_percentvalueFlag,this.m_plotTrasparencyArray[c],this.m_chart.visibleSeriesInfo.seriesData,this.m_chart)},Columns.prototype.drawColumns=function(){for(var t,e=0,i=this.m_yPixelArray.length;e<i;e++)this.isInRange(e)||null==(t=this.m_stackArray[e].m_stackHeight)||"null"==t||""==t||isNaN(t)||0==t||this.m_stackArray[e].drawStack()},Columns.prototype.isInRange=function(t){return this.m_yPixelArray[t]>=this.m_chart.getStartY()&&this.m_yPixelArray[t]<=this.m_chart.getEndY()};
//# sourceMappingURL=ColumnStackChart.min.js.map