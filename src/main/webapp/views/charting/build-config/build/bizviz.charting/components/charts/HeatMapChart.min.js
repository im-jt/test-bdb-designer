/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function HeatMapChart(t,e){this.base=Chart,this.base(),this.m_x=20,this.m_y=320,this.m_width=300,this.m_height=260,this.m_radius=1,this.m_seriesNames=[],this.m_categoryData=[],this.m_seriesData=[],this.m_max=[],this.m_range1=[],this.m_range2=[],this.m_color=[],this.m_CategoryDataSum=[],this.m_displayname=[],this.m_heatMapCell=[],this.m_rangeForLegend=[],this.m_range=[],this.m_ranges="",this.m_colorArray=[],this.m_seriesColorArray=[],this.m_color=[],this.m_displayname="ES,MS",this.m_ranges="0-20,20-100",this.m_colors="#cccccc,26265",this.m_legendDisplayNames="",this.m_showcelltext=!1,this.m_celltextcolor="#000000",this.m_celltextfontstyle="normal",this.m_celltextfontweight="normal",this.m_celltextfontsize="12",this.m_celltextfontfamily="Roboto",this.m_highervaluesaregood="true",this.m_titleBarHeight=25,this.m_subTitleBarHeight=25,this.m_xAxis=new HeatMapXaxis,this.m_yAxis=new HeatMapYaxis,this.m_title=new svgTitle(this),this.m_subTitle=new svgSubTitle,this.m_colorMap=new Object,this.noOfRows=1,this.m_leftSideSpace=65,this.m_heatMapCalculation=new HeatMapCalculation,this.m_chartContainer=t,this.m_zIndex=e,this.m_objectid="",this.m_defaultfillcolor="#e0dfdf",this.m_solidcolorfill=!1,this.m_heatanimationduration="0.5",this.m_animationoption="growFromCenter",this.m_canvastype="svg",this.m_luminance="0.5",this.m_xaxislabellines=3}function HeatMapCalculation(){this.m_xAxisPixelArray=[],this.m_yAxisPixelArray=[],this.SeriesColorForOverlaid=[],this.m_max=0,this.m_columnGap,this.m_numberOfMarkers=6,this.m_percentileValue,this.m_yAxisText,this.m_xpixelArray=[],this.m_ypixelArray=[],this.m_stackHeightArray=[],this.m_yAxisMarkersArray=[],this.m_startX,this.m_startY,this.m_endX,this.m_endY,this.m_chartYMargin,this.m_chartEndXMargin,this.m_chartTitleMargin=0,this.m_chartSubTitleMargin=0,this.m_util=new Util,this.ctx=""}function HeatMapXaxis(){this.base=Xaxis,this.base(),this.m_chart,this.m_chartCalculation,this.m_startX,this.m_startY,this.m_endX,this.m_endY,this.m_yAxisText=[],this.m_yAxisMarkersArray=[],this.m_labeltextalign="right",this.m_axislinetotextgap=2,this.m_unitSymbol,this.m_textUtil=new TextUtil,this.m_util=new Util,this.m_isSecondAxisFormatter=!1,this.ctx=""}function HeatMapYaxis(){this.base=Yaxis,this.base(),this.m_chart,this.m_chartCalculation,this.m_startX,this.m_startY,this.m_endX,this.m_endY,this.m_yAxisText=[],this.m_yAxisMarkersArray=[],this.m_labeltextalign="right",this.m_axislinetotextgap=2,this.m_unitSymbol,this.m_textUtil=new TextUtil,this.m_util=new Util,this.m_isSecondAxisFormatter=!1,this.ctx=""}function HeatMapCell(){this.m_xPosition,this.m_yPosition,this.m_cellWidth,this.m_cellHeight,this.m_cellColor,this.m_data,this.m_chart,this.ctx}HeatMapChart.prototype=new Chart,HeatMapChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},HeatMapChart.prototype.ParseJsonAttributes=function(t,e){for(var i in this.chartJson=t)if("Chart"==i)for(var a in t[i])switch(a){case"xAxis":for(var s in t[i][a]){var r=this.getNodeAttributeName(s);e.m_xAxis[r]=t[i][a][s]}break;case"yAxis":for(var h in t[i][a]){var r=this.getNodeAttributeName(h);e.m_yAxis[r]=t[i][a][h]}break;case"Title":for(var o in t[i][a]){var r=this.getNodeAttributeName(o);e.m_title[r]=t[i][a][o]}break;case"SubTitle":for(var n in t[i][a]){var r=this.getNodeAttributeName(n);e.m_subTitle[r]=t[i][a][n]}break;case"Legend":for(var m in t[i][a])e[r=this.getNodeAttributeName(m)]=t[i][a][m];break;default:e[r=this.getNodeAttributeName(a)]=t[i][a]}else e[r=this.getNodeAttributeName(i)]=t[i]},HeatMapChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},HeatMapChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.createSVG(),$("#draggableCanvas"+this.m_objectid).hide(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEventForSVG(this.svgContainerId)},HeatMapChart.prototype.createSVG=function(){var t=this,e=(this.svgContainerId="svgContainer"+t.m_objectid,$("#"+t.svgContainerId).remove(),document.createElementNS("http://www.w3.org/2000/svg","svg"));e.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.setAttribute("width",this.m_width),e.setAttribute("height",this.m_height),e.setAttribute("id",this.svgContainerId),$(e).css({width:this.m_width,height:this.m_height}),$("#draggableDiv"+t.m_objectid).append(e)},HeatMapChart.prototype.setFields=function(t){this.m_fieldsJson=t;for(var e=[],i=[],a=0;a<t.length;a++)switch(this.getProperAttributeNameValue(t[a],"Type")){case"Category":e.push(t[a]);break;case"Series":case"CalculatedField":i.push(t[a])}this.setCategory(e),this.setSeries(i)},HeatMapChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr={},this.m_categoryFieldColor=[];for(var e=0,i=0;i<t.length;i++){this.m_allCategoryNames[i]=this.getProperAttributeNameValue(t[i],"Name");var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[i],"DisplayName"));this.m_allCategoryDisplayNames[i]=a,this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[i]]=this.getProperAttributeNameValue(t[i],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[i]])&&(this.m_categoryNames[e]=this.getProperAttributeNameValue(t[i],"Name"),this.m_categoryFieldColor=this.getProperAttributeNameValue(t[i],"Color"),this.m_categoryDisplayNames[e]=a,e++)}},HeatMapChart.prototype.setSeries=function(t){this.m_seriesNames=[],this.m_allSeriesNames=[],this.m_visibleSeriesDisplayNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors=[],this.m_allSeriesDisplayNames=[],this.m_legendNames=[],this.m_seriesVisibleArr={},this.m_additionalField=[];var e=0;this.legendMap={};for(var i=0;i<t.length;i++){this.m_allSeriesNames[i]=this.getProperAttributeNameValue(t[i],"Name");var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[i],"DisplayName"));this.m_seriesDisplayNames[i]=a,this.m_allSeriesDisplayNames[i]=this.m_seriesDisplayNames[i],this.m_seriesVisibleArr[this.m_allSeriesNames[i]]=this.getProperAttributeNameValue(t[i],"visible"),IsBoolean(this.m_seriesVisibleArr[this.m_allSeriesNames[i]])&&(this.m_seriesNames[e]=this.getProperAttributeNameValue(t[i],"Name"),this.m_additionalField[e]=void 0!==this.getProperAttributeNameValue(t[i],"AdditionalField")?this.getProperAttributeNameValue(t[i],"AdditionalField"):this.m_seriesNames[e],this.m_visibleSeriesDisplayNames[e]=a,this.m_legendNames[e]=a,this.m_seriesColors[e]=convertColorToHex(this.getProperAttributeNameValue(t[i],"Color")),a={seriesName:this.m_seriesNames[e],displayName:this.m_visibleSeriesDisplayNames[e],color:this.m_seriesColors[e],shape:"cube",index:e},this.legendMap[this.m_seriesNames[e]]=a,e++)}this.setLegendsIntialLoad(this.m_defaultlegendfields)},HeatMapChart.prototype.getLegendInfo=function(){return this.legendMap},HeatMapChart.prototype.setLegendNames=function(t){this.m_legendNames=t},HeatMapChart.prototype.getLegendNames=function(){return this.m_legendNames},HeatMapChart.prototype.getCategoryNames=function(){return this.m_categoryNames},HeatMapChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},HeatMapChart.prototype.getVisibleSeriesDisplayNames=function(){return this.m_visibleSeriesDisplayNames},HeatMapChart.prototype.getSeriesNames=function(){return this.m_seriesNames},HeatMapChart.prototype.getAllSeriesNames=function(){return this.m_allSeriesNames},HeatMapChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},HeatMapChart.prototype.getSeriesColors=function(){return this.m_seriesColors},HeatMapChart.prototype.getDataProvider=function(){return this.m_dataProvider},HeatMapChart.prototype.getCategoryColorsForAction=function(){return this.m_categoryFieldColor},HeatMapChart.prototype.getSeriesColorsForAction=function(){return this.m_seriesColors},HeatMapChart.prototype.setCategoryData=function(){if(this.m_categoryData=[],this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var t=0;t<this.getCategoryNames().length;t++)this.m_categoryData[t]=this.getDataFromJSON(this.getCategoryNames()[t])}var e=[];if(this.m_categoryData[0])for(t=0;t<this.m_categoryData[0].length;t++){e[t]=[];for(var i=0;i<this.m_categoryData.length;i++)e[t][i]=this.m_categoryData[i][t]}this.m_categoryData=e},HeatMapChart.prototype.getCategoryData=function(){return convertArrayType(this.m_categoryData)},HeatMapChart.prototype.setSeriesData=function(){this.m_seriesData=[],this.m_additionalFieldData=[];for(var t=0;t<this.getSeriesNames().length;t++)this.m_seriesData[t]=this.getDataFromJSON(this.getSeriesNames()[t]),this.m_additionalFieldData[t]=this.getDataFromJSON(this.m_additionalField[t])},HeatMapChart.prototype.getSeriesData=function(){return this.m_seriesData},HeatMapChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0;t<this.getCategoryNames().length;t++)this.m_allfieldsName.push(this.getCategoryNames()[t]);for(var e=0;e<this.getAllSeriesNames().length;e++)this.m_allfieldsName.push(this.getAllSeriesNames()[e])},HeatMapChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},HeatMapChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var t=0;t<this.getCategoryDisplayNames().length;t++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[t]);for(var e=0;e<this.getSeriesDisplayNames().length;e++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[e])},HeatMapChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},HeatMapChart.prototype.init=function(){this.createSVG(),this.setCategoryData(),this.getCategoryData(),this.setSeriesData(),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.isSeriesDataEmpty(),this.setShowSeries(this.getAllFieldsName()),this.setSeriesDataValue(),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),IsBoolean(this.m_isEmptySeries)||!IsBoolean(this.isVisibleSeries())||IsBoolean(this.isEmptyCategory)||(this.initializeSeriesValues(),this.updateSeriesDataWithCommaSeperators(),this.setMinMaxValueFromSeriesData(),this.setRangeForLegends(),this.setDisplayNameForLegend(),this.getRanges(),this.setChartDrawingArea(),this.m_heatMapCalculation.init(this,this.m_categoryData,this.m_seriesData),this.m_xAxis.init(this,this.m_heatMapCalculation),this.m_yAxis.init(this,this.m_heatMapCalculation),this.initializeChartUIProperties(),this.initializeHeatMapChartFrequencyProperties()),this.initializeToolTipProperty(),this.m_tooltip.init(this),this.initMouseClickEventForSVG(this.svgContainerId)},HeatMapChart.prototype.updateSeriesDataWithCommaSeperators=function(){this.m_displaySeriesDataFlag=[];for(var t=0;t<this.m_seriesData.length;t++){this.m_displaySeriesDataFlag[t]=[];for(var e=0;e<this.m_seriesData[t].length;e++)this.m_displaySeriesDataFlag[t][e]=!0,isNaN(this.m_seriesData[t][e])&&(this.m_displaySeriesDataFlag[t][e]=!1,this.m_seriesData[t][e]=getNumericComparableValue(this.m_seriesData[t][e]))}},HeatMapChart.prototype.getYPosofFrequency=function(t){for(var e=[],i=0;i<this.getFrequencyRagne().length;i++)e[i]=0==i?+this.getEndY():+e[i-1]+ +t;return e},HeatMapChart.prototype.setRangeForLegends=function(){this.m_rangeForLegend=IsBoolean(this.m_showdynamicrange)?[+this.serMinVal,this.serMaxVal]:this.m_ranges.split(",")},HeatMapChart.prototype.setDisplayNameForLegend=function(){this.m_legendDisplayNames=IsBoolean(this.m_showdynamicrange)?["Min","Max"]:this.m_displayname.split(",")},HeatMapChart.prototype.getDisplayNameForLegend=function(){return this.m_legendDisplayNames},HeatMapChart.prototype.getRanges=function(){this.m_range=this.m_ranges.split(",");for(var t=0;t<this.m_range.length;t++){var e=-1<this.m_range[t].indexOf("~")?"~":"-",e=this.m_range[t].split(e);this.m_range1[t]=e[0],this.m_range2[t]=e[1]}Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)},this.m_minRangeValue=[this.m_range1.min(),this.m_range2.min()].min(),this.m_maxRangeValue=[this.m_range1.max(),this.m_range2.max()].max()},HeatMapChart.prototype.setSeriesDataValue=function(){var t=[];if(null!=this.m_seriesData[0])for(var e=0;e<this.m_seriesData[0].length;e++){t[e]=[];for(var i=0;i<this.m_seriesData.length;i++)null!=this.m_seriesData[i][e]?t[e][i]=this.m_seriesData[i][e]:t[e][i]=null}this.m_seriesData=t},HeatMapChart.prototype.initializeSeriesValues=function(){var t=[];if(null!=this.m_seriesData[0])for(var e=0;e<this.m_seriesData[0].length;e++){t[e]=[];for(var i=0;i<this.m_seriesData.length;i++)t[e][i]=this.m_seriesData[i][e]}this.m_seriesData=t},HeatMapChart.prototype.initializeChartUIProperties=function(){this.m_startX=this.getStartX(),this.m_startY=this.getStartY();var t=+this.getFrequencyBarSpace();this.m_heatWidth=this.getEndX()-this.m_startX-t,this.m_heatHeight=this.getStartY()-this.getEndY(),this.initializeColor(),this.createColorRange(),this.setHeatMapCellColor(),this.setHeatMapCells()},HeatMapChart.prototype.getFrequencyBarSpace=function(){var t=[],e=0,i=this.getSplitRange();if(IsBoolean(this.m_showfrequencybar)){for(var a=0;a<i.length;a++)t[a]=this.ctx.measureText(i[a]).width;e=IsBoolean(this.getShowLegends())?+t.max()+2+1:+t.max()}return e},HeatMapChart.prototype.initializeHeatMapChartFrequencyProperties=function(){this.m_xPosofFrequency=+this.m_startX+ +this.m_heatWidth+10,this.m_widthofFrequency=12,this.m_frequencyRange=this.getFrequencyRagne(),this.m_heightofFrequency=+this.m_heatHeight/(IsBoolean(this.m_showdynamicrange)?this.m_frequencyRange.length-1:this.m_range.length),this.m_yPosofFrequency=this.getYPosofFrequency(this.m_heightofFrequency),this.m_colorofFrequency=this.m_color},HeatMapChart.prototype.getFrequencyRagne=function(){return this.getSplitRange()},HeatMapChart.prototype.getSplitRange=function(){var t=[];if(IsBoolean(this.m_showdynamicrange))return t[0]=this.serMinVal,t[1]=this.serMaxVal,t;for(var e=0;e<this.m_range.length;e++){t[e]=[];for(var i=this.m_range[e].split("~"),a=0;a<i.length;a++)t[e][a]=i[a]}return this.getUniqueArray(t)},HeatMapChart.prototype.getUniqueArray=function(t){for(var e=[],i=0,a=0;a<t.length;a++)for(var s=0;s<t[a].length;s++)-1==e.indexOf(t[a][s])&&(e[i]=t[a][s],i++);return e},HeatMapChart.prototype.initializeColor=function(){var t=this.m_colors.split(",");if(IsBoolean(this.m_showdynamicrange))this.m_color[0]=this.m_minrangecolor,this.m_color[1]=this.m_maxrangecolor;else for(var e=0;e<this.m_range.length;e++)null!=t[e]?this.m_color[e]=convertColorToHex(t[e]):this.m_color[e]=this.m_color[e-1]},HeatMapChart.prototype.createColorRange=function(){var t=this.m_heatWidth,e=(this.m_minRange=IsBoolean(this.m_showdynamicrange)?+this.serMinVal:[this.m_range1.min(),this.m_range2.min()].min(),this.m_maxRange=IsBoolean(this.m_showdynamicrange)?+this.serMaxVal:[this.m_range1.max(),this.m_range2.max()].max(),this.ctx.createLinearGradient(0,0,t,0));if(IsBoolean(this.m_showdynamicrange)){var i=[];i[0]=this.m_minrangecolor,i[1]=this.m_maxrangecolor;for(var a=0;a<i.length;a++){var s=0==a?0:a==i.length-1?1:a/(i.length-1);e.addColorStop(s,i[a])}}else if(1<this.m_range.length)for(var r=this.m_maxRange-this.m_minRange,a=0;a<this.m_range.length;a++)0==a?e.addColorStop(0,this.m_color[a]):a==this.m_range.length-1?e.addColorStop(1,this.m_color[a]):(s=(this.m_range1[a]-this.m_minRange)/r,isNaN(s)||e.addColorStop(s,this.m_color[a]));else IsBoolean(this.m_highervaluesaregood)?(e.addColorStop(0,"#FFFFFF"),e.addColorStop(1,this.m_color[0])):(e.addColorStop(0,this.m_color[0]),e.addColorStop(1,"#FFFFFF"));this.ctx.beginPath(),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,t,+this.m_height),this.ctx.fill(),this.ctx.closePath()},HeatMapChart.prototype.setMinMaxValueFromSeriesData=function(){for(var t=!(this.serMaxVal=this.serMinVal=0),e=0;e<this.m_seriesData.length;e++)for(var i=0;i<this.m_seriesData[e].length;i++)null==this.m_seriesData[e][i]||isNaN(+this.m_seriesData[e][i])||null==this.m_seriesData[e][i]||""===this.m_seriesData[e][i]||(t&&(this.serMaxVal=this.serMinVal=+this.m_seriesData[e][i],t=!1),+this.serMaxVal<=+this.m_seriesData[e][i]&&(this.serMaxVal=+this.m_seriesData[e][i]),+this.serMinVal>=+this.m_seriesData[e][i]&&(this.serMinVal=+this.m_seriesData[e][i]))},HeatMapChart.prototype.setHeatMapCellColor=function(){this.m_heatMapCellColor=[];for(var t=0;t<this.m_seriesData.length;t++){this.m_heatMapCellColor[t]=[];for(var e,i=0;i<this.m_seriesData[t].length;i++)if(null==this.m_seriesData[t][i]||""===this.m_seriesData[t][i]||null==this.m_seriesData[t][i]||isNaN(this.m_seriesData[t][i]))this.m_heatMapCellColor[t][i]=this.m_defaultfillcolor;else if(IsBoolean(this.m_showdynamicrange)||!IsBoolean(this.m_solidcolorfill))+this.m_seriesData[t][i]<this.m_minRange||+this.m_seriesData[t][i]>this.m_maxRange?this.m_heatMapCellColor[t][i]=this.m_defaultfillcolor:(a=(this.m_seriesData[t][i]-this.m_minRange)/(this.m_maxRange-this.m_minRange)*this.m_heatWidth*this.getDevicePixelRatio(),+this.m_seriesData[t][i]<this.m_minRange?a=.01:+this.m_seriesData[t][i]>=this.m_maxRange&&(a=this.m_heatWidth*this.getDevicePixelRatio()-this.m_adjustpixel),e="rgb("+(e=this.ctx.getImageData(0|a,this.m_height/2,1,1).data)[0]+","+e[1]+","+e[2]+")",this.m_heatMapCellColor[t][i]=rgb2hex(e));else for(var a=+this.m_seriesData[t][i],s=0;s<this.m_range.length;s++){if((0==s&&a<this.m_range1[s]||s==this.m_range.length-1&&a>=this.m_range2[s])&&(this.m_heatMapCellColor[t][i]=this.m_defaultfillcolor),a>=this.m_range1[s]&&a<this.m_range2[s]){this.m_heatMapCellColor[t][i]=this.m_color[s];break}this.m_heatMapCellColor[t][i]=this.m_defaultfillcolor}}},HeatMapChart.prototype.getRangeColorForData=function(t){for(var e=0;e<this.m_range.length;e++)if(+this.m_range1[e]<=+t&&+t<+this.m_range2[e])return this.m_color[e];return+t<+this.m_range1[0]?this.m_color[e]:+t>=+this.m_range1[this.m_range.length-1]?this.m_color[this.m_range.length-1]:this.m_defaultfillcolor},HeatMapChart.prototype.setHeatMapCells=function(){var t,e,i=this.m_startX,a=this.m_startY;this.m_HeatMapCellWidth=t=this.m_heatWidth/this.m_seriesData[0].length,this.m_HeatMapCellHeight=e=this.m_heatHeight/this.m_seriesData.length;for(var s=0;s<this.m_seriesData.length;s++){this.m_heatMapCell[s]=[];for(var r=0;r<this.m_seriesData[s].length;r++)this.m_heatMapCell[s][r]=new HeatMapCell,null!=this.m_seriesData[s][r]&&this.m_heatMapCell[s][r].init(+i+t*r,a-e*(s+1),t,e,this.m_heatMapCellColor[s][r],this.m_additionalFieldData[s][r],this.m_displaySeriesDataFlag[s][r],this)}},HeatMapChart.prototype.getHeatMapCellWidth=function(){return this.m_HeatMapCellWidth},HeatMapChart.prototype.getHeatMapCellHeight=function(){return this.m_HeatMapCellHeight},HeatMapChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.drawLegends();var t=this.IsDrawingPossible();IsBoolean(t.permission)?(this.drawXAxis(),this.drawYAxis(),IsBoolean(this.m_showfrequencybar)&&this.drawFrequencyBar(),this.drawHeatMap()):this.drawSVGMessage(t.message)},HeatMapChart.prototype.drawFrequencyBar=function(){this.drawFrequencyBarCell(),this.drawFrquencyText()},HeatMapChart.prototype.drawFrquencyText=function(){for(var t=this,e=+this.m_xPosofFrequency+ +this.m_widthofFrequency,i=this.getYPositionForFrequencyMarking(),a=0;a<this.m_frequencyRange.length;a++){var s=drawSVGText(e+(IsBoolean(this.m_updateddesign)?10:0),i[a]+5,this.m_frequencyRange[a],"black","","start");$(s).css({"font-family":selectGlobalFont(t.m_celltextfontfamily),"font-style":t.m_celltextfontstyle,"font-size":t.fontScaling(t.m_celltextfontsize)+"px","font-weight":t.m_celltextfontweight}),$("#"+t.svgContainerId).append(s)}},HeatMapChart.prototype.getYPositionForFrequencyMarking=function(){for(var t=[],e=0;e<this.m_frequencyRange.length;e++)t[e]=this.m_yPosofFrequency[e];return t},HeatMapChart.prototype.drawFrequencyBarCell=function(){IsBoolean(this.m_showdynamicrange)?this.dynamicFrequencyColors():this.rangeFrequencyColors()},HeatMapChart.prototype.drawObject=function(){this.drawSVGObject()},HeatMapChart.prototype.dynamicFrequencyColors=function(){for(var t=this,e=0;e<this.m_frequencyRange.length-1;e++){for(var i=document.createElementNS(NS,"linearGradient"),a=(i.setAttribute("id","freqgradient"+e+t.m_objectid),i.setAttribute("gradientTransform","rotate(90)"),$("#"+t.svgContainerId).append(i),[]),s=(a.push(this.m_minrangecolor),a.push(this.m_maxrangecolor),100/(a.length-1!=0?a.length-1:1)),r=0;r<a.length;r++)(stop=document.createElementNS(NS,"stop")).setAttribute("offset",r*s+"%"),stop.setAttribute("stop-color",a[r]),stop.setAttribute("stop-opacity",this.m_bgalpha),$(i).append(stop);var h=drawSVGRect(this.m_xPosofFrequency,this.m_yPosofFrequency[e],this.m_widthofFrequency,this.m_heightofFrequency,"#000000");$(h).attr("id","GradientRect"+t.m_objectid),$(h).attr("fill","url(#freqgradient"+e+t.m_objectid+")"),$("#"+t.svgContainerId).append(h)}},HeatMapChart.prototype.rangeFrequencyColors=function(){for(var t=this,e=0;e<this.m_range.length;e++){for(var i=document.createElementNS(NS,"linearGradient"),a=(i.setAttribute("id","freqgradient"+e+t.m_objectid),i.setAttribute("gradientTransform","rotate(90)"),$("#"+t.svgContainerId).append(i),[]),s=(a.push(0==e?"#ffffff":this.m_color[e-1]),a.push(this.m_color[e]),100/(a.length-1!=0?a.length-1:1)),r=0;r<a.length;r++)(stop=document.createElementNS(NS,"stop")).setAttribute("offset",r*s+"%"),stop.setAttribute("stop-color",a[r]),stop.setAttribute("stop-opacity",this.m_bgalpha),$(i).append(stop);var h=drawSVGRect(this.m_xPosofFrequency,this.m_yPosofFrequency[e],this.m_widthofFrequency,this.m_heightofFrequency,"#000000");$(h).attr("id","GradientRect"+t.m_objectid),$(h).attr("fill","url(#freqgradient"+e+t.m_objectid+")"),$("#"+t.svgContainerId).append(h)}},HeatMapChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawSVGFrame()},HeatMapChart.prototype.drawTitle=function(){this.m_title.draw()},HeatMapChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},HeatMapChart.prototype.drawXAxis=function(){this.m_xAxis.markXaxis(),this.drawXAxisLine()},HeatMapChart.prototype.drawXAxisLine=function(){var t,e,i,a;IsBoolean(this.m_xAxis.m_showlinexaxis)&&(a=+this.m_startX-this.m_axistodrawingareamargin,t=+this.m_startY+1+this.m_axistodrawingareamargin,e=+this.m_endX+1,i=+this.m_startY+1+this.m_axistodrawingareamargin,a=drawSVGLine(a,t,e,i,.5,this.m_xAxis.m_linexaxiscolor),$("#"+this.svgContainerId).append(a))},HeatMapChart.prototype.drawYAxis=function(){this.createYAxisMarkerLabelGroup("yaxislabelgrp"),this.m_yAxis.markYaxiss(),this.m_yAxis.drawYAxis()},HeatMapChart.prototype.drawHeatMap=function(){for(var t=0;t<this.m_seriesData.length;t++)if(IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[t]])){this.createHeatMapRectBoxGroup(this.m_heatMapCell[t],"rectboxgrp",t,this.m_seriesNames[t]),this.createHeatMapBoxLabelGroup(this.m_heatMapCell[t],"datalabelgrp",t,this.m_seriesNames[t]);for(var e=0;e<this.m_seriesData[t].length;e++)null!=this.m_seriesData[t][e]&&(this.m_heatMapCell[t][e].createCell(t,e),this.m_heatMapCell[t][e].drawText(t))}},HeatMapChart.prototype.getYAxisLabelMargin=function(){return+this.getLabelWidth()},HeatMapChart.prototype.getLabelWidth=function(){var t=0,e=this.getSeriesDisplayNames();if(0<this.fontScaling(this.m_yAxis.m_labelfontsize))for(var i=0;i<e.length;i++){25<e[i].length&&(e[i]=e[i].substring(0,24)+"..."),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily);var a=this.ctx.measureText(e[i]).width;t<a&&(t=a)}return t},HeatMapChart.prototype.getMinimumSeriesValue=function(){return this.m_minimumseriesvalue},HeatMapChart.prototype.getMaximumSeriesValue=function(){return this.m_maximumSeriesValue},HeatMapChart.prototype.setMaxMinSeriesValue=function(){this.m_maximumSeriesValue=0;for(var t=this.m_minimumseriesvalue=0;t<this.m_seriesData.length;t++)for(var e=0;e<this.m_seriesData[t].length;e++){var i=this.m_seriesData[t][e],i=isNaN(i)||null==i||""==i?0:i;0==t&&0==e&&(this.m_maximumSeriesValue=i,this.m_minimumseriesvalue=i),+this.m_maximumSeriesValue<=+i&&(this.m_maximumSeriesValue=i),+this.m_minimumseriesvalue>+i&&(this.m_minimumseriesvalue=i)}},HeatMapChart.prototype.setEndX=function(){var t=this.getBorderToLegendMargin(),e=this.getVerticalLegendMargin(),i=this.getVerticalLegendToXAxisMargin();this.m_endX=+this.m_x+ +this.m_width-+t-+e-+i},HeatMapChart.prototype.getVerticalLegendMargin=function(){return IsBoolean(this.getShowLegends())?40:20},HeatMapChart.prototype.setStartY=function(){var t=this.getChartMargin();this.m_startY=+this.m_y+ +this.m_height-t-this.getXAxisLabelMargin()-this.getXAxisDescriptionMargin()},HeatMapChart.prototype.getXAxisLabelMargin=function(){var t=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize),e=this.m_xAxis.m_labelrotation*(Math.PI/180);if(this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily(),IsBoolean(this.m_xAxis.getLabelTilted())){for(var i=0;i<this.m_categoryData.length;i++)for(var a=0;a<this.m_categoryData[i].length;a++)var s=Math.abs(this.ctx.measureText(this.m_categoryData[i][a]).width*e),t=t<=s?s:t;t>this.m_height/4-this.getXAxisDescriptionMargin()&&(t=this.m_height/4-this.getXAxisDescriptionMargin())}else{var r=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize);this.noOfRows=this.setNoOfRows(),t=r*this.noOfRows}return t},HeatMapChart.prototype.setNoOfRows=function(){this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily);var t=1;if(!IsBoolean(this.isEmptyCategory)){this.ctx.measureText(this.m_categoryData[0][0]).width;for(var e=(this.getEndX()-this.getStartX())/this.m_categoryData.length,i=1;i<this.m_categoryData.length;i++)if(this.ctx.measureText(this.m_categoryData[i][0]).width>e){t=2,IsBoolean(this.m_xAxis.m_xaxistextwrap)&&""!==this.m_xAxis.getDescription()&&(t=3);break}}return t},HeatMapChart.prototype.getStartX=function(){return this.m_startX},HeatMapChart.prototype.setStartX=function(){this.yaxisLabelFont=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),this.yaxisDescriptionFont=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily);var t=this.getBorderToDescriptionMargin(),e=this.getYAxisDescriptionMargin(),i=this.getDescriptionToLabelMargin(),a=this.getLabelToAxisMargin(),s=(this.setMaxMinSeriesValue(),this.getYAxisLabelMargin());this.m_startX=+this.m_x+ +t+ +e+ +i+ +s+ +a},HeatMapChart.prototype.setEndY=function(){this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()+this.getMarginForTooltip()},HeatMapChart.prototype.setDataInOneDArray=function(){this.m_data=[];for(var t=0;t<this.m_categoryNames.length;t++)for(var e=0;e<this.m_categoryData.length;e++)this.m_data[e]=+this.m_seriesData[t][e];this.m_sortedData=this.m_data.sort(numOrdD)},HeatMapChart.prototype.drawLegendContentDiv=function(){for(var t=this,e=this.getLegendContentDiv(),i='<table class="legend">',a=0;a<this.getDisplayNameForLegend().length;a++)i+='<tr style="font-style:'+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'"><td><span style="background-color:'+this.m_color[a]+'; width:10px;height:10px;"></span></td><td><span style="display:inline;">'+this.m_rangeForLegend[a]+'</span></td><td><span style="display:inline;">'+this.getDisplayNameForLegend()[a]+"</span></td></tr>";i+="</table>",$(e).append(i);var s=convertColorToHex(t.m_legendbackgroundcolor),r=($(e).find(".legend").css("background-color",hex2rgb(s,t.m_legendbackgroundtransparency)),$(e).find("td").each(function(){$(this).css({"background-color":hex2rgb(s,t.m_legendbackgroundtransparency),"font-size":t.m_legendfontsize+"px"})}),$("#legendContent"+this.m_objectid).height());+r>+this.m_height-35&&($("#legendContent"+this.m_objectid).css("height",+this.m_height-35+"px"),$("#legendContent"+this.m_objectid).css("overflow-x","hidden"));var h=e.getElementsByTagName("table")[0].offsetWidth;0==h?h=119:+r>+this.m_height-35?h+=20:h+=10,e.style.width=h+"px",e.style.left=this.m_width-h-25+"px",IsBoolean(this.m_hidelegendonstart)&&$(e).css("display","none")},HeatMapChart.prototype.getToolTipData=function(t,e){var i;if(IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType))if(t>=this.m_startX&&t<=this.getEndX()){if(e>=this.getEndY()&&e<=this.m_startY)for(var a=0;a<this.m_seriesData.length;a++)if(IsBoolean(this.m_seriesVisibleArr[this.getSeriesNames()[a]]))for(var s=0;s<this.m_seriesData[0].length;s++)if(t>=this.m_heatMapCell[a][s].m_xPosition&&t<=this.m_heatMapCell[a][s].m_xPosition+this.m_heatMapCell[a][s].m_cellWidth&&e>=this.m_heatMapCell[a][s].m_yPosition&&e<=this.m_heatMapCell[a][s].m_yPosition+this.m_heatMapCell[a][s].m_cellHeight){if(i={},IsBoolean("Default"==this.m_customtextboxfortooltip.dataTipType)){i.cat="",i.data=new Array,i.cat=this.m_categoryData[s];var r=[],h=(r[0]={color:this.m_heatMapCell[a][s].m_cellColor,shape:this.legendMap[this.getSeriesNames()[a]].shape},r[1]=this.getVisibleSeriesDisplayNames()[a],this.m_seriesData[a][s]),o=isNaN(h)?h:+this.m_seriesData[a][s],o=o%1!=0&&"default"!==this.m_tooltipprecision?o.toFixed(this.m_tooltipprecision):isNaN(h)?h:+this.m_seriesData[a][s],h=this.getUpdatedFormatterForToolTip(o,this.getSeriesNames()[a]);r[2]=h,i.data.push(r);break}i=this.getDataProvider()[s]}}else this.hideToolTip();return i},HeatMapChart.prototype.getDrillDataPoints=function(t,e){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries())&&t>=this.m_startX&&t<=this.getEndX()&&e>=this.getEndY()&&e<=this.m_startY)for(var i=0;i<this.m_seriesData.length;i++)for(var a,s,r,h,o,n=0;n<this.m_seriesData[0].length;n++)if(IsBoolean(this.m_seriesVisibleArr[this.getSeriesNames()[i]]))if(t>=this.m_heatMapCell[i][n].m_xPosition&&t<=this.m_heatMapCell[i][n].m_xPosition+this.m_heatMapCell[i][n].m_cellWidth)if(e>=this.m_heatMapCell[i][n].m_yPosition&&e<=this.m_heatMapCell[i][n].m_yPosition+this.m_heatMapCell[i][n].m_cellHeight)return a=this.getFieldNameValueMap(n),s=this.m_heatMapCell[i][n].m_cellColor,r=this.getSeriesNames()[i],h=this.getVisibleSeriesDisplayNames()[i],o=a[r],a.drillField=r,a.drillDisplayField=h,a.drillValue=o,{drillRecord:a,drillColor:s}},HeatMapChart.prototype.getFormatterText=function(t){return IsBoolean(this.getFixedLabel())?t:this.m_yAxis.getFormattedText(t)},HeatMapCalculation.prototype.init=function(t,e,i){this.m_chart=t,this.m_globalCalculation=t,this.m_xAxisData=e,this.m_yAxisData=i,this.m_startX=this.m_globalCalculation.getStartX(),this.m_startY=this.m_globalCalculation.getStartY(),this.m_endX=this.m_globalCalculation.getEndX(),this.m_endY=this.m_globalCalculation.getEndY(),this.m_chartType=this.m_chart.getChartType(),this.setDrawHeight(),this.setDrawWidth(),this.m_columnGap=10,this.calculateBarWidth(),this.calculateMaxValue(),this.setRatio(),this.setxPixelArray(),this.setyPixelArray(),this.setstackHeightArray(),this.setYAxisMarkersArray()},HeatMapCalculation.prototype.calculateMaxValue=function(){if("Clustered"==this.m_chartType||"clustered"==this.m_chartType||"Overlaid"==this.m_chartType||"overlaid"==this.m_chartType){this.calculateMax=0;for(var t=[],e=this.calculateMin=0,i=0;e<this.m_yAxisData.length;e++)for(var a=0;a<this.m_yAxisData[e].length;a++)t[i++]=this.m_yAxisData[e][a];var s=t.sort(numOrdA);for(this.calculateMin=s[0],e=0;e<this.m_yAxisData.length;e++)for(a=0;a<this.m_yAxisData[e].length;a++)+this.m_yAxisData[e][a]>=this.calculateMax&&(this.calculateMax=+this.m_yAxisData[e][a]),+this.m_yAxisData[e][a]<=this.calculateMin&&(this.calculateMin=+this.m_yAxisData[e][a])}if("Stacked"==this.m_chartType||"stacked"==this.m_chartType||"100%"==this.m_chartType||""==this.m_chartType){this.calculateMax=+this.m_yAxisData[0][0];for(t=[],e=0,i=0;e<this.m_yAxisData[0].length;e++){for(var r=0,a=0;a<this.m_yAxisData.length;a++)t[i++]=+this.m_yAxisData[a][e],r=+r+ +this.m_yAxisData[a][e];r>=this.calculateMax&&(this.calculateMax=+r)}s=t.sort(numOrdA);this.calculateMin=+s[0]}},HeatMapCalculation.prototype.getMaxValue=function(){var t;return IsBoolean(this.m_chart.isAxisSetup())?(t=getMax(this.calculateMax-this.minValue()),this.max=+t[0]+ +this.minValue()):IsBoolean(this.m_chart.isBaseZero())?(t=getMax(+this.calculateMax),this.max=t[0]):(t=getMax(this.m_chart.m_maximumaxisvalue-this.minValue()),this.max=+t[0]+ +this.minValue()),"100%"==this.m_chartType&&IsBoolean(this.m_chart.isAxisSetup())&&!IsBoolean(this.m_chart.isBaseZero())?(this.m_yAxisText=20,this.m_numberOfMarkers=6):(this.m_numberOfMarkers=+t[1]+1,this.m_yAxisText=t[2]),this.max},HeatMapCalculation.prototype.minValue=function(){return IsBoolean(this.m_chart.isBaseZero())&&!IsBoolean(this.m_chart.isAxisSetup())?this.min=0:IsBoolean(this.m_chart.isAxisSetup())?+this.calculateMin<0&&"100%"!=this.m_chartType?this.min=+this.calculateMin:this.min=0:this.min=this.m_chart.m_minimumaxisvalue,0<=this.min?this.min=getMin(this.min):1<Math.abs(this.min)?this.min=-getMax(Math.abs(this.min))[0]:1<this.calculateMax?this.min=Math.floor(this.min):this.min=this.min,this.min},HeatMapCalculation.prototype.getYAxisText=function(){return this.m_yAxisText},HeatMapCalculation.prototype.setYAxisText=function(){var t;this.getMaxValue()<=5&&(1==(t=this.getMaxValue())&&(this.m_numberOfMarkers=2),2==t&&(this.m_numberOfMarkers=3),3==t&&(this.m_numberOfMarkers=4),4==t&&(this.m_numberOfMarkers=5),5==t&&(this.m_numberOfMarkers=6),6==t&&(this.m_numberOfMarkers=7),(t=t/(this.m_numberOfMarkers-1))<1&&(t=t.toFixed(2)),this.m_yAxisText=t)},HeatMapCalculation.prototype.getPercentile=function(t){t%=10;return t=10!==t?10-t:t},HeatMapCalculation.prototype.getYAxisMarkersArray=function(){return this.m_yAxisMarkersArray},HeatMapCalculation.prototype.setYAxisMarkersArray=function(){this.m_yAxisMarkersArray=[];var t=this.minValue();if(IsBoolean(this.m_chart.isAxisSetup()))for(var e=0;e<this.m_numberOfMarkers;e++){var i=+t+this.getYAxisText()*e;this.m_yAxisMarkersArray[e]=IsBoolean(this.isInt(i))?i:i.toFixed(4)}else if(IsBoolean(this.m_chart.isBaseZero()))for(e=0;e<this.m_numberOfMarkers;e++)1<this.yAxisText?(i=this.getYAxisText()*e,this.m_yAxisMarkersArray[e]=IsBoolean(this.isInt(i))?i:i.toFixed(4)):(i=this.getYAxisText()*e,this.m_yAxisMarkersArray[e]=IsBoolean(this.isInt(i))?i:i.toFixed(2));else for(e=0;e<this.m_numberOfMarkers;e++){i=+t+this.getYAxisText()*e;this.m_yAxisMarkersArray[e]=IsBoolean(this.isInt(i))?i:i.toFixed(4)}},HeatMapCalculation.prototype.isInt=function(t){return"number"==typeof t&&t%1==0},HeatMapCalculation.prototype.getDrawHeight=function(){return this.drawHeight},HeatMapCalculation.prototype.setDrawHeight=function(){this.drawHeight=this.m_startY-this.m_endY},HeatMapCalculation.prototype.getDrawWidth=function(){return this.drawWidth},HeatMapCalculation.prototype.setDrawWidth=function(){this.drawWidth=+this.m_endX-+this.m_startX},HeatMapCalculation.prototype.getRatio=function(){return this.ratio},HeatMapCalculation.prototype.setRatio=function(){var t=this.getMaxValue()-this.minValue();this.ratio=0<t?this.getDrawHeight()/t:1,"100%"==this.m_chartType&&this.setRatioForHundredPercent()},HeatMapCalculation.prototype.setRatioForHundredPercent=function(){this.m_hundredPercentsRatios=[];for(var t=0;t<this.m_yAxisData[0].length;t++){for(var e=0,i=0;i<this.m_yAxisData.length;i++)+this.m_yAxisData[i][t]<0&&(this.m_yAxisData[i][t]=Math.abs(+this.m_yAxisData[i][t])),e=+e+Math.abs(+this.m_yAxisData[i][t]);this.m_hundredPercentsRatios[t]=+this.getDrawHeight()/e*1}},HeatMapCalculation.prototype.calculateBarWidth=function(){var t=this.m_xAxisData.length,e=(+t+1)*this.m_columnGap,e=(+this.getDrawWidth()-e)/t;40<e?(this.setBarWidth(40),this.setColumnGap(40)):e<9?(this.setBarWidth(9),this.setColumnGap(9)):this.setBarWidth(e)},HeatMapCalculation.prototype.setBarWidth=function(t){this.barWidth=t,"Clustered"!=this.m_chartType&&"clustered"!=this.m_chartType||this.setBarWidthForClustered()},HeatMapCalculation.prototype.setColumnGap=function(t){t*=this.m_xAxisData.length,t=this.getDrawWidth()-t;this.m_columnGap=t/(this.m_xAxisData.length+1)},HeatMapCalculation.prototype.setBarWidthForClustered=function(){this.barWidth/=this.m_yAxisData.length},HeatMapCalculation.prototype.getBarWidth=function(){return this.barWidth},HeatMapCalculation.prototype.getColumnGap=function(){return this.m_columnGap},HeatMapCalculation.prototype.getxPixelArray=function(){return this.m_xPixelArray},HeatMapCalculation.prototype.setxPixelArray=function(){for(var t=[],e=0;e<this.m_yAxisData[0].length;e++){t[e]=[];for(var i=0;i<this.m_yAxisData.length;i++)"Clustered"==this.m_chartType||"clustered"==this.m_chartType?t[e][i]=+this.m_startX+ +this.getBarWidth()*i+ +this.getColumnGap()+(+this.getBarWidth()*this.m_yAxisData.length+ +this.getColumnGap())*e:t[e][i]=+this.m_startX+ +this.getBarWidth()*e+ +this.getColumnGap()*(e+1)}this.m_xPixelArray=this.transformXPixelArray(t)},HeatMapCalculation.prototype.transformXPixelArray=function(t){for(var e=[],i=0;i<this.m_yAxisData.length;i++){e[i]=[];for(var a=0;a<this.m_yAxisData[0].length;a++)e[i][a]=t[a][i]}return e},HeatMapCalculation.prototype.getRatioForHundredPercent=function(t){return+this.m_hundredPercentsRatios[t]},HeatMapCalculation.prototype.setyPixelArray=function(){"Clustered"==this.m_chartType||"clustered"==this.m_chartType?this.m_ypixelArray=this.setyPixelArrayForClustered():"Overlaid"==this.m_chartType||"overlaid"==this.m_chartType?this.m_ypixelArray=this.setyPixelArrayForOverlaid():"100%"==this.m_chartType&&(this.m_ypixelArray=this.setyPixelArrayForHundredPercent()),"stacked"!=this.m_chartType&&"Stacked"!=this.m_chartType||(this.m_ypixelArray=this.setyPixelArrayForStacked())},HeatMapCalculation.prototype.setyPixelArrayForClustered=function(){for(var t=[],e=0;e<this.m_yAxisData.length;e++){t[e]=[];for(var i=0;i<this.m_yAxisData[e].length;i++){var a=this.getRatio();IsBoolean(this.m_chart.isAxisSetup())||(IsBoolean(this.m_chart.isBaseZero())?(this.m_yAxisData[e][i]<0&&(this.m_yAxisData[e][i]=0),this.m_yAxisData[e][i]>=this.getMaxValue()&&(this.m_yAxisData[e][i]=0)):(this.m_yAxisData[e][i]>=+this.m_chart.m_maximumaxisvalue||this.m_yAxisData[e][i]<+this.m_chart.m_minimumaxisvalue)&&(this.m_yAxisData[e][i]=0)),t[e][i]=this.m_startY-a*this.m_yAxisData[e][i]+a*this.minValue()}}return t},HeatMapCalculation.prototype.setSeriesColorForOverlaid=function(t){this.SeriesColorForOverlaid=t},HeatMapCalculation.prototype.getSeriesColorForOverlaid=function(){return this.SeriesColorForOverlaid},HeatMapCalculation.prototype.setyPixelArrayForOverlaid=function(){for(var t=this.arrangeDataForOverlaid(),e=(this.setSeriesColorForOverlaid(t[1]),this.m_yAxisData=t[0],[]),i=0;i<this.m_yAxisData.length;i++){e[i]=[];for(var a=0;a<this.m_yAxisData[i].length;a++){var s=this.getRatio();IsBoolean(this.m_chart.isAxisSetup())||(IsBoolean(this.m_chart.isBaseZero())?(this.m_yAxisData[i][a]<0&&(this.m_yAxisData[i][a]=0),this.m_yAxisData[i][a]>this.getMaxValue()&&(this.m_yAxisData[i][a]=0)):(this.m_yAxisData[i][a]>+this.m_chart.m_maximumaxisvalue||this.m_yAxisData[i][a]<+this.m_chart.m_minimumaxisvalue)&&(this.m_yAxisData[i][a]=0)),e[i][a]=this.m_startY-s*this.m_yAxisData[i][a]+s*this.minValue()}}return e},HeatMapCalculation.prototype.arrangeDataForOverlaid=function(){for(var t=this.m_chart.getSeriesColors(),e=[],i=[],a=0;a<this.m_yAxisData[0].length;a++){e[a]=[],i[a]=[];for(var s=0;s<this.m_yAxisData.length;s++)e[a][s]=+this.m_yAxisData[s][a],i[a][s]=t[s]}var r=this.sortingDataWithColor(e,i);return this.arrengeSeriesDataandColor(r)},HeatMapCalculation.prototype.sortingDataWithColor=function(t,e){for(var i=[],a=0;a<t.length;a++){i[a]=[];for(var s=0;s<t[a].length;s++)i[a][s]=[],i[a][s][0]=+t[a][s],i[a][s][1]=e[a][s]}for(var r=0;r<i.length;r++)i[r].sort(function(t,e){return e[0]-t[0]});return i},HeatMapCalculation.prototype.arrengeSeriesDataandColor=function(t){for(var e=[],i=[],a=0;a<t.length;a++){e[a]=[],i[a]=[];for(var s=0;s<t[a].length;s++)e[a][s]=t[a][s][0],i[a][s]=t[a][s][1]}for(var r=[],h=[],o=0;o<e[0].length;o++){r[o]=[],h[o]=[];for(var n=0;n<e.length;n++)r[o][n]=+e[n][o],h[o][n]=i[n][o]}return[r,h]},HeatMapCalculation.prototype.setyPixelArrayForHundredPercent=function(){for(var t=[],e=0;e<this.m_yAxisData.length;e++){t[e]=[];for(var i=0;i<this.m_yAxisData[e].length;i++){var a=+this.getRatioForHundredPercent(i);t[e][i]=0<e?+t[e-1][i]-a*(+Math.abs(this.m_yAxisData[e][i])-a/100):+this.m_startY-Math.abs(+this.m_yAxisData[e][i])*a}}return t},HeatMapCalculation.prototype.setyPixelArrayForStacked=function(){for(var t=[],e=0;e<this.m_yAxisData.length;e++){t[e]=[];for(var i=0;i<this.m_yAxisData[e].length;i++)isNaN(this.m_yAxisData[e][i])&&(this.m_yAxisData[e][i]=""),0<e?+this.m_yAxisData[e][i]<0&&0<+this.m_yAxisData[e-1][i]||0<+this.m_yAxisData[e][i]&&+this.m_yAxisData[e-1][i]<0?(+this.m_yAxisData[e][i]<0&&(this.m_yAxisData[e][i]=0),t[e][i]=+this.m_startY-this.getRatio()*+this.m_yAxisData[e][i]*1+this.getRatio()*this.minValue()):+this.m_yAxisData[e][i]<0?(this.m_yAxisData[e][i]=0,t[e][i]=+this.m_startY-this.getRatio()*+this.m_yAxisData[e][i]*1+this.getRatio()*this.minValue()):(+this.m_yAxisData[e-1][i]+ +this.m_yAxisData[e][i]>=this.getMaxValue()&&(this.m_yAxisData[e][i]=+this.m_yAxisData[e][i]-+this.m_yAxisData[e-1][i]),t[e][i]=+t[e-1][i]-+this.getRatio()*+this.m_yAxisData[e][i]*1):(+this.m_yAxisData[e][i]<0&&(this.m_yAxisData[e][i]=0),(+this.m_yAxisData[e][i]<this.minValue()&&+this.m_yAxisData[e][i]<0||+this.m_yAxisData[e][i]>this.getMaxValue())&&(this.m_yAxisData[e][i]=0),t[e][i]=this.m_startY-+this.getRatio()*+this.m_yAxisData[e][i]+this.getRatio()*this.minValue())}return t},HeatMapCalculation.prototype.getyPixelArray=function(){return this.m_ypixelArray},HeatMapCalculation.prototype.calculationYpixcelForClusterTypeChart=function(){},HeatMapCalculation.prototype.getstackHeightArray=function(){return this.m_stackHeightArray},HeatMapCalculation.prototype.setstackHeightArray=function(){for(var t=[],e=0;e<this.m_yAxisData.length;e++){t[e]=[];for(var i,a=0;a<this.m_yAxisData[e].length;a++)t[e][a]=this.getRatio(),"Clustered"===this.m_chartType||"clustered"===this.m_chartType||"Stacked"==this.m_chartType||"stacked"==this.m_chartType?(i=this.getRatio(),t[e][a]=i*this.m_yAxisData[e][a]):"100%"===this.m_chartType?(i=+this.getRatioForHundredPercent(a),t[e][a]=Math.ceil(i*Math.abs(+this.m_yAxisData[e][a]))):"Overlaid"!==this.m_chartType&&"overlaid"!==this.m_chartType||(i=this.getRatio(),t[e][a]=i*this.m_yAxisData[e][a])}this.m_stackHeightArray=t},HeatMapCalculation.prototype.calculateSum=function(t){for(var e=0,i=0;i<t.length;i++)e=+e+ +t[i];return e},HeatMapXaxis.prototype=new Xaxis,HeatMapXaxis.prototype.markXaxis=function(){this.m_chart.createXAxisMarkerLabelGroup("xaxislabelgrp"),this.drawAxisLabels(),this.drawDescription()},HeatMapXaxis.prototype.drawAxisLabels=function(){for(var t=this.calculateAxisLineToTextGap(),e=this.m_xAxisData.length,i=0;i<e;i++){var a,s,r,h=this.m_chart.getHeatMapCellWidth(),h=+this.m_startX+(h*i+h/2),o=(a=IsBoolean(this.m_updateddesign)?+this.m_startY+t/2+2.5+this.calculateAxisLineToTextGap()/2:+this.m_startY+t/2+10+this.calculateAxisLineToTextGap()/2,IsBoolean(this.m_chart.m_tickmarks)&&(o=drawSVGLine(h,this.m_startY,h,+this.m_startY+8,"1",this.m_chart.m_categorymarkingcolor),$("#xaxistickgrp"+this.m_chart.m_objectid).append(o)),""!==this.getDescription()?this.m_fontsize:5),h=IsBoolean(this.getLabelTilted())&&0<this.m_labelrotation?(s=this.m_chart.m_height/4-t/2-o-this.calculateAxisLineToTextGap()/2,IsBoolean(this.m_xaxistextwrap)?(r=this.m_xAxisData[i],this.drawSVGTextForCategory(h,a,r,this.m_labelfontcolor,"center","start",this.getLabelrotation(),s)):(this.ctx.font=this.getLabelFontProperties(),r=this.getText(""+this.m_xAxisData[i],s,this.getLabelFontProperties()),drawSVGText(h,a,r,this.m_labelfontcolor,"center","start",this.getLabelrotation()))):(s=(this.m_chart.m_endX-this.m_chart.m_startX)/this.m_xAxisData.length,IsBoolean(this.m_xaxistextwrap)?(r=this.m_xAxisData[i],this.drawSVGTextForCategory(h,a,r,this.m_labelfontcolor,"center","start",this.getLabelrotation(),s)):(r=this.getText(""+this.m_xAxisData[i],s,this.getLabelFontProperties()),drawSVGText(h,a,r,this.m_labelfontcolor,"center","start",this.getLabelrotation())));$("#xaxislabelgrp"+this.m_chart.m_objectid).append(h)}},HeatMapXaxis.prototype.drawSVGTextForCategory=function(t,e,i,a,s,r,h,o){var n=document.createElementNS(NS,"text"),m=this.getTexts(""+i,o,this.getLabelFontProperties());if(1==m.length)isNaN(t)||isNaN(e)||(n.setAttribute("x",t),n.setAttribute("y",e),n.setAttribute("fill",a),""!==h&&void 0!==h&&0!==h&&n.setAttribute("transform","rotate("+h+" "+t+","+e+")"),n.textContent=m[0],n.setAttribute("text-anchor",getSVGAlignment(s)),n.setAttribute("alignment-baseline",r));else if(!isNaN(t)&&!isNaN(e)){n.setAttribute("y",e),n.setAttribute("fill",a),""!==h&&void 0!==h&&0!==h&&n.setAttribute("transform","rotate("+h+" "+t+","+e+")"),n.setAttribute("text-anchor",getSVGAlignment(s)),n.setAttribute("alignment-baseline",r);for(var l=0;l<m.length;l++){var _=document.createElementNS(NS,"tspan");0==l?_.setAttribute("x",t):(_.setAttribute("x",t),_.setAttribute("dy",+this.m_chart.fontScaling(this.getLabelFontSize()))),_.textContent=m[l],n.appendChild(_)}}return n},HeatMapXaxis.prototype.getTexts=function(t,e,i){var t=""+t,a=[],s=(this.ctx.font=i,this.ctx.measureText(t).width),r=t.split(" "),h="";if(e<s){for(var o=0;o<=r.length;o++){var n=h+r[o]+" ",m=this.ctx.measureText(n),l=m.width;if(this.m_chart.m_xaxislabellines=this.m_chart.getHeatMapCellWidth()<e&&IsBoolean(this.getLabelTilted())?2:3,a.length==this.m_chart.m_xaxislabellines)break;m.fontBoundingBoxAscent,m.fontBoundingBoxDescent,m.actualBoundingBoxAscent,m.actualBoundingBoxDescent;e<l&&0<o?(this.ctx.measureText(h).width>e?a.push(this.getText(h,e,i)):""!==h.replace(/\s/g,"")&&a.push(h),h=r[o]+" "):o==r.length&&l<e?a.push(h):h=n}a[this.m_chart.m_xaxislabellines-1]&&this.ctx.measureText(a[this.m_chart.m_xaxislabellines-1]).width>=e&&(a[this.m_chart.m_xaxislabellines-1]=this.getText(a[this.m_chart.m_xaxislabellines-1],e,i))}else a.push(t);return a},HeatMapXaxis.prototype.drawDescription=function(){var t,e,i,a=this,s=+a.m_chart.fontScaling(a.getFontSize()),r=this.m_chart.m_allCategoryDisplayNames.join(""),r=IsBoolean(this.m_chart.m_xAxis.m_showdatasetdescription)?this.m_chart.formattedDescription(this.m_chart,r):this.m_chart.formattedDescription(this.m_chart,this.m_description);""!=r&&(r=this.m_chart.formattedDescription(this.m_chart,r),t=IsBoolean(this.m_chart.m_enablehtmlformate.xaxis)?"<br>":"\\n",3<(t=r.split(t)).length&&t.splice(3,t.length-3),0<t.length&&t.length,e=this.getXDesc(),i=this.getYDesc(),IsBoolean(this.m_chart.m_enablehtmlformate.xaxis)?this.drawDescriptionInHTML(i,r,s):(r=drawSVGText(e,i,this.m_chart.formattedDescription(this.m_chart,""),convertColorToHex(this.m_fontcolor),"middle","middle",0),wrapSVGText(a,e,i,t,r,s,+a.m_endX-+a.m_startX),$(r).css({"font-family":selectGlobalFont(a.getFontFamily()),"font-style":a.getFontStyle(),"font-size":s+"px","font-weight":a.getFontWeight(),"text-decoration":a.getTextDecoration()}),$("#"+a.m_chart.svgContainerId).append(r)))},HeatMapYaxis.prototype=new Yaxis,HeatMapYaxis.prototype.init=function(t,e){this.m_chart=t,this.ctx=this.m_chart.ctx,this.m_chartCalculation=e,this.m_startX=this.m_chart.getStartX(),this.m_startY=this.m_chart.getStartY(),this.m_endX=this.m_chart.getEndX(),this.m_endY=this.m_chart.getEndY(),this.m_yAxisText=this.m_chartCalculation.getYAxisText(),this.m_yAxisMarkersArray=this.m_chartCalculation.getYAxisMarkersArray(),this.setLeftAxisFormatters(),this.setRightAxisFormatters(),this.m_isSecodaryAxis=!1,this.m_axiscolor=convertColorToHex(this.m_chart.getAxisColor()),this.m_labelfontcolor=convertColorToHex(this.getLabelFontColor())},HeatMapYaxis.prototype.setLeftAxisFormatters=function(){this.setFormatter(),this.setSecondaryFormatter(),this.m_precision=this.m_chart.getPrecision()},HeatMapYaxis.prototype.markYaxiss=function(){this.ctx=this.m_chart.ctx,this.m_yAxisMarkersArray=this.m_chart.getSeriesDisplayNames(),this.getLabelFontColor();for(var t=+this.m_startY,e=0;e<this.m_chart.getVisibleSeriesDisplayNames().length;e++){var i=this.m_chart.getVisibleSeriesDisplayNames()[e],i=(25<i.length&&(i=i.substring(0,24)+"..."),drawSVGText(parseInt(this.m_chart.m_startX-5),parseInt(t)-+this.m_chart.getHeatMapCellHeight()/2,i,this.m_labelfontcolor,"right","start"));$("#yaxislabelgrp"+this.m_chart.m_objectid).append(i),t-=+this.m_chart.getHeatMapCellHeight()}this.drawDescription()},HeatMapYaxis.prototype.setFormatter=function(){var t,e;this.m_unitSymbol="",this.m_formatterPosition="",this.m_isFormatter=!1,"none"!=this.m_chart.m_formater&&""!=this.m_chart.m_formater&&(t=this.m_chart.getFormater(),"none"!=(e=this.m_chart.getUnit()))&&""!=e&&(this.m_isFormatter=!0,this.m_unitSymbol=this.m_util.getFormatterSymbol(t,e),this.m_formatterPosition=this.m_chart.getSignPosition(),""==this.m_formatterPosition)&&(this.m_formatterPosition="suffix")},HeatMapYaxis.prototype.setSecondaryFormatter=function(){var t,e;this.m_secondaryUnitSymbol="",this.m_secondaryFormatterPosition="",this.m_isSecondaryFormatter=!1,"none"!=this.m_chart.m_secondaryformater&&""!=this.m_chart.m_secondaryformater&&"Percent"!=this.m_chart.getUnit()&&(t=this.m_chart.getSecondaryFormater(),""!=(e=this.m_chart.getSecondaryUnit())&&"none"!=e&&null!=e&&(this.m_isSecondaryFormatter=!0,this.m_secondaryUnitSymbol=this.m_util.getFormatterSymbol(t,e)),this.m_secondaryFormatterPosition="suffix")},HeatMapYaxis.prototype.setRightAxisFormatters=function(){IsBoolean(this.m_chart.m_secondaryaxisshow)&&IsBoolean(this.getRightAxisFormater())&&this.setSecondAxisFormatter(),this.m_secondaryAxisPrecision=this.m_chart.m_secondaryaxisprecision},HeatMapYaxis.prototype.setSecondAxisFormatter=function(){var t,e;this.m_secondAxisUnitSymbol="",this.m_secondAxisFormatterPosition="",this.m_isSecondAxisFormatter=!1,"none"==this.m_chart.m_secondaryaxisformater&&""==this.m_chart.m_secondaryaxisformater||(t=this.m_chart.m_secondaryaxisunit,e=this.m_chart.m_secondaryaxisformater,"none"!=t&&""!=t&&(this.m_isSecondAxisFormatter=!0,this.m_secondAxisUnitSymbol=this.m_util.getFormatterSymbol(e,t),this.m_secondAxisFormatterPosition=this.m_chart.m_secondaryaxissignposition))},HeatMapYaxis.prototype.drawYAxis=function(){var t,e,i,a;IsBoolean(this.m_showlineyaxis)&&(a=this.m_startX,t=this.m_startY,e=this.m_startX,i=this.m_endY,a=drawSVGLine(a,i,e,t,.5,this.m_lineyaxiscolor),$("#"+this.m_chart.svgContainerId).append(a))},HeatMapYaxis.prototype.horizontalMarkerLines=function(){for(var t=0;t<this.m_yAxisMarkersArray.length;t++)this.ctx.beginPath(),this.ctx.lineWidth="0.1",this.ctx.strokeStyle="#000",this.ctx.moveTo(this.m_startX,this.m_startY-t*this.getYAxisDiv()),this.ctx.lineTo(this.m_endX,this.m_startY-t*this.getYAxisDiv()),this.ctx.stroke(),this.ctx.closePath()},HeatMapYaxis.prototype.markYaxis=function(){if("Bar"==this.m_chart.m_type||"bar"==this.m_chart.m_type||"Chevron"==this.m_chart.m_type||"chevron"==this.m_chart.m_type)this.markYaxisForBarOrChevron();else for(var t=0;t<this.m_yAxisMarkersArray.length;t++){var e=this.m_yAxisMarkersArray[t],e=IsBoolean(this.m_isSecodaryAxis)?this.getSecondaryAxisFormattedText(e):this.getFormattedText(e);this.m_textUtil.drawText(this.ctx,e,+this.m_startX-this.m_axislinetotextgap,+this.m_startY-t*this.getYAxisDiv(),this.getLabelFontProperties(),this.m_labeltextalign,this.m_labelfontcolor),this.isLabelDecoration()&&this.textDecoration(e,this.m_startX,+this.m_startY-t*this.getYAxisDiv(),this.m_labelfontcolor,this.m_chart.fontScaling(this.getLabelFontSize()),this.m_labeltextalign)}this.drawDescription()},HeatMapYaxis.prototype.descriptionDecoration=function(t,e,i,a,s,r){this.ctx.beginPath(),this.ctx.font=this.m_fontstyle+" "+this.m_fontweight+" "+this.m_chart.fontScaling(this.m_fontsize)+"px "+selectGlobalFont(this.m_fontfamily);var t=this.ctx.measureText(t).width,h=(this.ctx.closePath(),e=+e+2,+i+t/2),i=+i-t/2;this.ctx.beginPath(),this.ctx.strokeStyle=a,this.ctx.lineWidth="0.5pt",this.ctx.moveTo(e,h),this.ctx.lineTo(e,i),this.ctx.stroke(),this.ctx.closePath()},HeatMapYaxis.prototype.drawDescription=function(){var t=this,e=this.m_chart.m_allSeriesDisplayNames.reduce(function(t,e){return""!==e?""===t?e:t+", "+e:t},""),e=IsBoolean(this.m_chart.m_yAxis.m_showdatasetdescription)?this.m_chart.formattedDescription(this.m_chart,e):this.m_chart.formattedDescription(this.m_chart,this.getDescription());""!=e&&(e=drawSVGText(this.getXDesc(),this.getYDesc(),this.m_chart.formattedDescription(this.m_chart,e),convertColorToHex(this.getFontColor()),"middle","middle",270),$(e).css({"font-family":selectGlobalFont(t.getFontFamily()),"font-style":t.getFontStyle(),"font-size":t.m_chart.fontScaling(t.getFontSize())+"px","font-weight":t.getFontWeight(),"text-decoration":t.getTextDecoration()}),$("#"+t.m_chart.svgContainerId).append(e))},HeatMapYaxis.prototype.textDecoration=function(t,e,i,a,s,r){this.m_chart.underLine(t,e,i,a,s,r)},HeatMapYaxis.prototype.getFormattedText=function(t){var e,i,a=("undefined"==this.m_precision||null==this.m_precision?this.m_chart:this).m_precision;return t%1!=0&&a<1?t=this.setPrecision(t,0):IsBoolean(this.m_isFormatter)||IsBoolean(this.m_isSecondaryFormatter)||(t=this.setPrecision(t,a)),"none"!=this.m_chart.m_formater&&""!=this.m_chart.m_formater||"none"!=this.m_chart.m_secondaryformater&&""!=this.m_chart.m_secondaryformater||(t=this.setPrecision(t,a)),IsBoolean(this.m_isFormatter)&&(t=this.m_util.updateTextWithFormatter(t,this.m_unitSymbol,a)),IsBoolean(this.m_isSecondaryFormatter)&&"Number"==this.m_chart.m_secondaryformater&&(t=this.m_util.updateTextWithFormatter(t,this.m_secondaryUnitSymbol,a)),IsBoolean(this.m_isSecondaryFormatter)&&(t="auto"!=this.m_secondaryUnitSymbol?this.addSecondaryFormater(t,this.m_secondaryUnitSymbol):(e=getNumberFormattedSymbol(+t,this.m_chart.m_unit),i=getNumberFormattedNumericValue(+t,a,this.m_chart.m_unit),t=this.setPrecision(i,a),this.addSecondaryFormater(t,e))),t=getFormattedNumberWithCommas(t,this.m_chart.m_numberformatter),t=IsBoolean(this.m_isFormatter)&&null!=this.m_unitSymbol?this.m_util.addFormatter(t,this.m_unitSymbol,this.m_formatterPosition,a):t},HeatMapYaxis.prototype.getSecondaryAxisFormattedText=function(t){return t=IsBoolean(this.m_isSecondAxisFormatter)?this.m_util.addFormatter((+t).toFixed(2),this.m_secondAxisUnitSymbol,this.m_secondAxisFormatterPosition):t},HeatMapYaxis.prototype.setPrecision=function(t,e){return 0!==t&&"default"!==e?(+t).toFixed(e):+t},HeatMapYaxis.prototype.addSecondaryFormater=function(text,secondaryUnitSymbol){var textValue=text;0!=this.m_precision&&null!=this.m_precision?textValue=this.setPrecision(textValue,this.m_precision):textValue<1&&textValue%1!=0&&(textValue=this.setPrecision(textValue,2));try{eval("var formattedText = this.m_util.addUnitAs"+this.m_secondaryFormatterPosition+"(textValue,secondaryUnitSymbol);")}catch(e){}return formattedText.toString()},HeatMapYaxis.prototype.markYaxisForBarOrChevron=function(){for(var t=0;t<this.m_yAxisText.length;t++){var e=+this.m_startY-+this.m_chart.m_barGap*(+t+1)-+this.m_chart.m_barWidth*t-+this.m_chart.m_barWidth/2+5,i=this.getText(""+this.m_yAxisText[t],this.m_chart.m_width/4,this.getLabelFontProperties());this.m_textUtil.drawText(this.ctx,i,+this.m_startX-this.m_axislinetotextgap,e-4,this.getLabelFontProperties(),this.m_labeltextalign,this.m_labelfontcolor),this.isLabelDecoration()&&this.textDecoration(i,this.m_startX,e-3,this.m_labelfontcolor,this.m_chart.fontScaling(this.getLabelFontSize()),this.m_labeltextalign)}},HeatMapYaxis.prototype.getFontProperties=function(){return this.m_textUtil.getFontProperties(this.getFontStyle(),this.getFontWeight(),this.m_chart.fontScaling(this.getFontSize()),this.getFontFamily())},HeatMapYaxis.prototype.getLabelFontProperties=function(){return this.m_textUtil.getFontProperties(this.getLabelFontStyle(),this.getLabelFontWeight(),this.m_chart.fontScaling(this.getLabelFontSize()),this.getLabelFontFamily())},HeatMapYaxis.prototype.getYAxisDiv=function(){return(this.m_startY-this.m_endY)/(this.m_yAxisMarkersArray.length-1)},HeatMapYaxis.prototype.formatToCurrency=function(t){t=t.toString().replace(/\$|\,/g,"");var e=(t=isNaN(t)?"0":t)==(t=Math.abs(t)),i=(t=Math.floor(100*t+.50000000001))%100;t=Math.floor(t/100).toString(),i<10&&(i="0"+i);for(var a=0;a<Math.floor((t.length-(1+a))/3);a++)t=t.substring(0,t.length-(4*a+3))+","+t.substring(t.length-(4*a+3));return 0<i?(e?"":"-")+"$ "+t+"."+i:(e?"":"-")+"$ "+t},HeatMapYaxis.prototype.getText=function(t,e,i){var a,s=t,r="",t=(this.ctx.font=i,this.ctx.measureText(s).width);0<s.length&&(a=t/s.length*3);for(var h=0;h<s.length;h++){if(!(this.ctx.measureText(r).width<e-a)){r+="..";break}r+=s[h]}return r},HeatMapCell.prototype.init=function(t,e,i,a,s,r,h,o){this.m_xPosition=t,this.m_yPosition=e,this.m_cellWidth=i,this.m_cellHeight=a,this.m_cellColor=s,this.m_data=r,this.m_commaOperatorFlag=h,this.m_chart=o,this.ctx=this.m_chart.ctx},HeatMapCell.prototype.createCell=function(t,e){var i,a=hex2rgb(this.m_cellColor,this.m_chart.m_coloropacity),a=(i="plane"===this.m_chart.m_chartbase?IsBoolean(this.m_chart.m_yAxis.m_showlineyaxis)?drawSVGRect(this.m_xPosition+1,this.m_yPosition,this.m_cellWidth,this.m_cellHeight,a):drawSVGRect(this.m_xPosition,this.m_yPosition,this.m_cellWidth,this.m_cellHeight,a):this.createGradient(a,t,e),$(i).attr("class","timeSeries-stackHighlighter"),!!document.documentMode);if(IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_heatanimationduration&&!a)switch(this.m_chart.m_animationoption){case"growFromCenter":$(i).animate({width:this.m_cellWidth,height:this.m_cellHeight},1e3*this.m_chart.m_heatanimationduration);break;case"growFromTop":var s=drawSVGStackAnimation(0,"height",this.m_cellHeight,this.m_chart.m_heatanimationduration);$(i).append(s);break;case"growFromLeft":s=drawSVGStackAnimation(0,"width",this.m_cellWidth,this.m_chart.m_heatanimationduration);$(i).append(s)}return $("#rectboxgrp"+t+this.m_chart.m_objectid).append(i),i},HeatMapCell.prototype.createGradient=function(t,e,i){var a=document.createElementNS(NS,"linearGradient");switch(a.setAttribute("id","gradientcell"+this.m_chart.m_objectid+e+i),this.m_chart.m_chartbase){case"gradient1":a.setAttribute("gradientTransform","rotate(90)");break;case"gradient2":a.setAttribute("gradientTransform","rotate(0)");break;case"gradient3":a.setAttribute("gradientTransform","rotate(45)");break;case"gradient4":a.setAttribute("gradientTransform","rotate(135)")}$("#"+this.m_chart.svgContainerId).append(a);for(var s=[t,hex2rgb(ColorLuminance("#ffffff",this.m_chart.m_luminance),this.m_chart.m_coloropacity),t],r=100/(s.length-1!=0?s.length-1:1),h=0,o=s.length;h<=o-1;h++){var n=document.createElementNS(NS,"stop");n.setAttribute("offset",h*r+"%"),n.setAttribute("stop-color",s[h]),$(a).append(n)}t=drawSVGRect(this.m_xPosition,this.m_yPosition,this.m_cellWidth,this.m_cellHeight,"#ffffff");return $(t).attr("id","GradientRect"+this.m_chart.m_objectid),$(t).attr("fill","url(#gradientcell"+this.m_chart.m_objectid+e+i+")"),t},HeatMapCell.prototype.drawText=function(t){var e,i,a;IsBoolean(this.m_chart.m_showcelltext)&&(this.m_data=/\S/g.test(this.m_data)?this.m_data:"",e=null==this.m_data||""===this.m_data?"":isNaN(getNumericComparableValue(this.m_data))?this.m_data:this.m_chart.getFormatterText(getNumericComparableValue(this.m_data)),e=this.getCalculatedDescription(e,this.m_cellWidth-this.m_cellWidth/3),a=this.m_xPosition+this.m_cellWidth/2,i=this.m_yPosition+this.m_cellHeight/2,a=drawSVGText(a,i,e,convertColorToHex(this.m_chart.m_celltextcolor),"center","middle"),$("#datalabelgrp"+t+this.m_chart.m_objectid).append(a))},HeatMapCell.prototype.getCalculatedDescription=function(t,e){var i=t,t=(this.ctx.beginPath(),this.ctx.measureText(i).width);if(+e<t){var a,s="";0<i.length&&(a=t/i.length*3);for(var r=0;r<i.length;r++){if(!(this.ctx.measureText(s).width<e-+a)){e<this.ctx.measureText("..").width?s="":s+="..";break}s+=i[r]}i=s}return this.ctx.closePath(),i};
//# sourceMappingURL=HeatMapChart.min.js.map