/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function PyramidChart(e,t){this.base=Chart,this.base(),this.m_x=20,this.m_y=20,this.m_width=400,this.m_height=300,this.m_seriesDataAndLegendName=[],this.m_layerXpositionArray=[],this.m_layerYpositionArray=[],this.m_layerWidthArray=[],this.m_layerHeightArray=[],this.m_layerXLeftpositionArray=[],this.m_layerXRightpositionArray=[],this.ratio=0,this.totalSeriesvalue=0,this.m_layer=new Layer,this.m_yAxis=new Yaxis,this.m_layerCalculation=new LayerCalculation,this.m_showlayervalue=!1,this.m_chartContainer=e,this.m_zIndex=t,this.m_legendShape="triangle",this.calculatedPercent=[]}PyramidChart.prototype=new Chart,PyramidChart.prototype.ParseJsonAttributes=function(e,t){for(var i in this.chartJson=e)if("Funnel"==i)for(var s in e[i])switch(s){case"Title":for(var a in e[i][s]){var r=this.getNodeAttributeName(a);t.m_title[r]=e[i][s][a]}break;case"SubTitle":for(var o in e[i][s]){var r=this.getNodeAttributeName(o);t.m_subTitle[r]=e[i][s][o]}break;case"legends":for(var l in e[i][s])t[r=this.getNodeAttributeName(l)]=e[i][s][l];break;default:t[r=this.getNodeAttributeName(s)]=e[i][s]}else t[r=this.getNodeAttributeName(i)]=e[i]},PyramidChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},PyramidChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEvent()},PyramidChart.prototype.setProperty=function(e){this.ParseJsonAttributes(e.Object,this),this.initCanvas()},PyramidChart.prototype.setFields=function(e){this.m_fieldsJson=e;for(var t=[],i=[],s=0;s<e.length;s++)switch(this.getProperAttributeNameValue(e[s],"Type")){case"Category":t.push(e[s]);break;case"Series":case"CalculatedField":i.push(e[s])}this.setCategory(t),this.setSeries(i)},PyramidChart.prototype.setCategory=function(e){this.m_categoryNames=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr={};for(var t=0,i=0;i<e.length;i++){this.m_allCategoryNames[i]=this.getProperAttributeNameValue(e[i],"Name");var s=this.formattedDescription(this,this.getProperAttributeNameValue(e[i],"DisplayName"));this.m_allCategoryDisplayNames[i]=s,this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[i]]=this.getProperAttributeNameValue(e[i],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[i]])&&(this.m_categoryNames[t]=this.getProperAttributeNameValue(e[i],"Name"),this.m_categoryDisplayNames[t]=s,t++)}},PyramidChart.prototype.setSeries=function(e){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors=[],this.m_legendNames=[],this.m_seriesVisibleArr={},this.m_plotTrasparencyArray=[],this.m_visibleSeriesNames={},this.m_seriesDataLabelProperty=[],this.legendMap={};for(var t=0;t<e.length;t++){this.m_seriesNames[t]=this.getProperAttributeNameValue(e[t],"Name");var i=this.formattedDescription(this,this.getProperAttributeNameValue(e[t],"DisplayName")),i=(this.m_legendNames[t]=i,this.m_seriesDisplayNames[t]=i,this.m_seriesColors[t]=convertColorToHex(this.getProperAttributeNameValue(e[t],"Color")),this.m_seriesVisibleArr[this.m_seriesDisplayNames[t]]=this.getProperAttributeNameValue(e[t],"visible"),this.m_visibleSeriesNames[this.m_seriesNames[t]]=this.getProperAttributeNameValue(e[t],"visible"),this.getProperAttributeNameValue(e[t],"PlotTransparency")),i=(this.m_plotTrasparencyArray[t]=null==i||null===i||""===i||isNaN(i)?1:i,this.m_seriesDataLabelProperty[t]=this.getProperAttributeNameValue(e[t],"DataLabelCustomProperties"),void 0!==this.m_seriesDataLabelProperty[t]?IsBoolean(this.m_seriesDataLabelProperty[t].dataLabelUseComponentFormater)&&(this.m_seriesDataLabelProperty[t].datalabelFormaterCurrency=this.m_unit,this.m_seriesDataLabelProperty[t].datalabelFormaterPrecision=this.m_precision,this.m_seriesDataLabelProperty[t].datalabelFormaterPosition=this.m_signposition,this.m_seriesDataLabelProperty[t].datalabelFormaterUnit=this.m_secondaryunit):(this.m_seriesDataLabelProperty[t]=this.getDataLabelProperties(),this.m_seriesDataLabelProperty[t].showDataLabel=IsBoolean(this.m_showlayervalue)?"true":this.m_seriesDataLabelProperty[t].showDataLabel),{seriesName:this.m_seriesNames[t],displayName:this.m_seriesDisplayNames[t],color:this.m_seriesColors[t],shape:this.m_legendShape,index:t});this.legendMap[this.m_seriesNames[t]]=i}},PyramidChart.prototype.getLegendInfo=function(){return this.legendMap},PyramidChart.prototype.setLegendNames=function(e){this.m_legendNames=e},PyramidChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var e=0;e<this.getCategoryNames().length;e++)this.m_allfieldsName.push(this.getCategoryNames()[e]);for(var t=0;t<this.getSeriesNames().length;t++)this.m_allfieldsName.push(this.getSeriesNames()[t])},PyramidChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var e=0;e<this.getCategoryDisplayNames().length;e++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[e]);for(var t=0;t<this.getSeriesDisplayNames().length;t++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[t])},PyramidChart.prototype.setCategoryData=function(){if(this.m_categoryData=[],this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var e=0;e<this.getCategoryNames().length;e++)this.m_categoryData[e]=this.getDataFromJSON(this.getCategoryNames()[e])}},PyramidChart.prototype.setSeriesData=function(){this.m_seriesData=[];var e=[];if(this.multiSeriesData=[],this.m_isEmptySeries=!0,0<this.getSeriesNames().length){this.m_isEmptySeries=!1;for(var t=0,i=0;i<this.getSeriesNames().length;i++)this.m_seriesVisibleArr[this.getSeriesDisplayNames()[i]]&&(e[t]=this.getDataFromJSON(this.getSeriesNames()[i]),t++);for(var t=0,s=e[0].length;t<s;t++){this.multiSeriesData[t]=[];for(var a=0,r=e.length;a<r;a++)this.multiSeriesData[t][a]=e[a][t]}for(var o=0,s=this.multiSeriesData.length;o<s;o++)this.m_seriesData.push(this.getArraySUM(this.multiSeriesData[o]))}},PyramidChart.prototype.getArraySUM=function(e){for(var t=0,i=0,s=e.length;i<s;i++)e[i]<0&&(e[i]=-1*e[i]),isNaN(e[i])||(t=+t+ +e[i]);return t},PyramidChart.prototype.setSeriesColor=function(e){for(var t=this.m_seriescolor.split(","),i=(this.seriesColors=[],this.getSeriesData().length-1),s=0,a=0;s<=i;s++){var r=t[s]||this.seriesColors[i-a++];this.seriesColors[i-s]=convertColorToHex(r)}},PyramidChart.prototype.getDataProvider=function(){return this.m_dataProvider},PyramidChart.prototype.getCategoryNames=function(){return this.m_categoryNames},PyramidChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},PyramidChart.prototype.getSeriesNames=function(){return this.m_seriesNames},PyramidChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},PyramidChart.prototype.getLegendNames=function(){return this.m_legendNames},PyramidChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},PyramidChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},PyramidChart.prototype.getCategoryData=function(){return this.m_categoryData},PyramidChart.prototype.getSeriesData=function(){return this.m_seriesData},PyramidChart.prototype.getSeriesColors=function(){return null==this.visibleSeriesColors?this.m_seriesColors:this.visibleSeriesColors},PyramidChart.prototype.getSeriesColor=function(){return this.seriesColors},PyramidChart.prototype.init=function(){this.setCategoryData(),this.setSeriesData(),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.setSeriesColor(),this.isSeriesDataEmpty(),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),IsBoolean(this.m_isEmptySeries)||IsBoolean(this.isEmptyCategory)||(this.setPercentageForHundred(),this.initializeCalculation(),this.setVisibleData()),this.initializeToolTipProperty(),this.m_tooltip.init(this)},PyramidChart.prototype.initializeCalculation=function(){if(this.m_categoryData=this.updateCategoryData(this.m_categoryData),this.m_legendNames=this.m_categoryData,this.m_seriesColor=this.getSeriesColor(),this.multiSeriesData=this.updateSeriesData(this.multiSeriesData),!IsBoolean(this.m_isEmptySeries)){this.m_seriesDataAndLegendName=[];for(var e=0;e<this.getSeriesNames().length;e++)if(IsBoolean(this.m_seriesVisibleArr[this.m_seriesDisplayNames[e]])){for(var t=0;t<this.m_seriesData.length;t++)this.m_seriesDataAndLegendName[t]=[],this.m_seriesDataAndLegendName[t][0]=this.m_seriesData[t],this.m_seriesDataAndLegendName[t][1]=this.m_legendNames[t][0],this.m_seriesDataAndLegendName[t][2]=this.m_seriesColor[t],this.m_seriesDataAndLegendName[t][3]=this.m_categoryData[t][0],this.m_seriesDataAndLegendName[t][4]=this.m_displaySeriesDataFlag[t],this.m_seriesDataAndLegendName[t][5]=this.seriesDataPercent[t],this.m_seriesDataAndLegendName[t][6]=this.multiSeriesData[t],this.m_seriesDataAndLegendName[t][7]=this.getDataProvider()[t];break}this.m_seriesDataAndLegendName.sort(function(e,t){return e[0]-t[0]});for(var i=[],s=[],a=[],r=[],o=[],l=[],h={},m=0;m<this.m_seriesDataAndLegendName.length;m++)s.push(this.m_seriesDataAndLegendName[m][1]),i.push(this.m_seriesDataAndLegendName[m][0]),a.push(this.m_seriesDataAndLegendName[m][3]),r.push(this.m_seriesDataAndLegendName[m][4]),o.push(this.m_seriesDataAndLegendName[m][5]),l.push(this.m_seriesDataAndLegendName[m][6]),h[m]=this.m_seriesDataAndLegendName[m][7];this.m_seriesValue=i,this.m_displaySeriesDataInToolTipFlagArray=r,this.visibleLegend=s,this.m_categoryValue=a,this.m_percentSeries=o,this.m_seriesDataArray=l,this.allDataObj=h,this.m_layerCalculation.init(this),this.m_layer.init(this),this.m_yAxis.init(this,this.m_layerCalculation),this.startX=this.m_width/2*1+ +this.m_x,this.mapSeriesWithCategory(a,i,s,this.m_seriesColor,r),this.startY=+this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle(),this.funnelWidth=5.5*this.m_width/6,this.funnelHeight=this.m_layerCalculation.getFunnelHeight(),this.calculatePercent=this.m_layerCalculation.getCalculatePercent(this.m_seriesValue),this.xPossitionValue=this.m_layerCalculation.calculateXPosition(this.m_seriesValue),this.seriesValue=this.m_layerCalculation.updatedSeriesValueForPyramid(this.m_seriesValue),this.setMapForDrill(this.m_seriesValue,this.m_legendNames)}},PyramidChart.prototype.setPercentageForHundred=function(){var e=this.multiSeriesData,t=(this.m_SeriesDataInPerForHundredChart,[]);this.seriesDataPercent=[];for(var i=0,s=e.length;i<s;i++){var a=this.getArraySUM(e[i]);t[i]=[];for(var r=0,o=e[i].length;r<o;r++)""===e[i][r]||isNaN(e[i][r])||0==a?t[i][r]=0:t[i][r]=e[i][r]/a*100}this.seriesDataPercent=t},PyramidChart.prototype.setVisibleData=function(){this.seriesDisplayName=[],this.visibleCategoryNames=[],this.seriesData=[],this.seriesPercent=[],this.allDataObjects={};var e=[];this.m_legendNames.length=0,this.visibleTrasparency=[],this.m_visibleseriesdatalabel=[];for(var t=0,i=0;i<this.getSeriesNames().length;i++)this.m_seriesVisibleArr[this.getSeriesDisplayNames()[i]]&&(this.seriesDisplayName[t]=this.getSeriesDisplayNames()[i],this.visibleTrasparency[t]=this.m_plotTrasparencyArray[i],this.m_visibleseriesdatalabel[t]=this.m_seriesDataLabelProperty[i],t++);for(var t=0,s=0;s<this.m_categoryValue.length;s++)this.m_seriesVisibleArr[this.m_categoryValue[s]]&&(this.visibleCategoryNames[t]=this.m_categoryValue[s],this.seriesData[t]=this.m_seriesDataArray[s],this.seriesPercent[t]=this.m_percentSeries[s],this.allDataObjects[t]=this.allDataObj[s],e[t]=this.visibleLegend[s],t++);this.m_legendNames=e},PyramidChart.prototype.mapSeriesWithCategory=function(e,t,i,s,a){var r=!0;if(this.m_defaultlegendfields&&!IsBoolean(this.m_designMode))for(var o=0;o<this.m_defaultlegendfields.length&&0!=(r=this.m_defaultlegendfields[o].value);o++);for(var l=0;l<e.length;l++)null==this.m_seriesVisibleArr[e[l]]&&(this.m_seriesVisibleArr[e[l]]=r);this.visibleCategories=[],this.m_seriesValue=[],this.visibleSeriesColors=[],this.visibleSeriesNames=[],this.m_displaySeriesDataInToolTipFlagArray=[],this.legendMap={};for(o=0,l=0;l<e.length;l++){this.m_seriesVisibleArr[e[l]]&&(this.visibleCategories[o]=e[l],this.m_seriesValue[o]=t[l],this.visibleSeriesColors[o]=s[l],this.m_displaySeriesDataInToolTipFlagArray[o]=a[l],o++);var h={seriesName:e[l],displayName:e[l],color:s[l],shape:this.m_legendShape};this.legendMap[e[l]]=h}this.visibleSeriesData=this.m_seriesValue;for(var o=0,m=0;m<this.getSeriesNames().length;m++)this.m_visibleSeriesNames[this.getSeriesNames()[m]]&&(this.visibleSeriesNames[o]=this.getSeriesNames()[m],o++);return{cat:this.visibleCategories,ser:this.m_seriesValue,color:this.visibleSeriesColors}},PyramidChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.drawLegends();var e=this.IsDrawingPossible();IsBoolean(e.permission)?(this.drawPyramid(),this.drawValueOnLayers()):this.drawMessage(e.message)},PyramidChart.prototype.IsDrawingPossible=function(){return IsBoolean(this.isEmptyCategory)?{permission:"false",message:this.m_status.noCategory}:IsBoolean(this.m_isEmptySeries)?{permission:"false",message:this.m_status.noData}:IsBoolean(this.isVisibleSeriesAvailable())&&0<this.m_seriesValue.length?{permission:"true",message:this.m_status.success}:{permission:"false",message:this.m_status.noSeries}},PyramidChart.prototype.drawTitle=function(){this.m_title.draw()},PyramidChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},PyramidChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},PyramidChart.prototype.isSeriesDataAvailable=function(e){return!!IsBoolean(e.associatedChartObject.m_isrepeater)||0<e.associatedChartObject.m_seriesData.length},PyramidChart.prototype.drawPyramid=function(){this.m_layerXpositionArray=[],this.m_layerYpositionArray=[],this.m_layerWidthArray=[],this.m_layerHeightArray=[],this.m_layerXLeftpositionArray=[],this.m_layerXRightpositionArray=[],this.value1=0,this.value2=0,this.xPositionPre=0,this.xPositioncur=0,this.yPos=[],this.m_seriescolorforPyramid=this.updateSeriesColor(this.visibleSeriesColors);for(var e=0;e<this.seriesValue.length;e++)e<1?(this.value2=+this.seriesValue[e],this.xPositioncur=+this.xPossitionValue[e],this.m_layer.drawFirstSlicePyramid(e,this.value2,this.m_seriescolorforPyramid[e],this.xPositioncur,this.seriesPercent,this.visibleTrasparency)):(this.value1=this.value2,this.value2=+this.value1+ +this.seriesValue[e],this.xPositionPre=this.xPositioncur,this.xPositioncur=this.xPossitionValue[e],this.m_layer.drawOtherSlicesForPyramid(e,this.value1,this.value2,this.m_seriescolorforPyramid[e],this.xPositionPre,this.xPositioncur,this.seriesPercent,this.visibleTrasparency))},PyramidChart.prototype.getDataLabel=function(){var e,t=[];for(e in this.allDataObjects)for(var i=this.allDataObjects[e],s=0,a=this.seriesDisplayName.length;s<a;s++){t[s]||(t[s]=[]);var r=this.getValidFieldDataFromRecord(i,this.m_visibleseriesdatalabel[s].datalabelField);t[s][e]=r}return t[0]},PyramidChart.prototype.drawValueOnLayers=function(){if(IsBoolean(this.m_visibleseriesdatalabel[0].showDataLabel))for(var e=IsBoolean(this.m_showlayervalue)?this.getRoundValue(this.calculatePercent,100):this.getDataLabel(),t=0;t<this.m_layerXpositionArray.length;t++){this.ctx.beginPath(),this.ctx.fillStyle=this.m_visibleseriesdatalabel[0].dataLabelFontColor,this.ctx.font=this.m_visibleseriesdatalabel[0].datalabelFontStyle+" "+this.m_visibleseriesdatalabel[0].datalabelFontWeight+" "+this.fontScaling(this.m_visibleseriesdatalabel[0].dataLabelFontSize)+"px "+selectGlobalFont(this.m_visibleseriesdatalabel[0].datalabelFontFamily),this.ctx.textAlign="left";var i,s,a,r=IsBoolean(this.m_showlayervalue)?e[t]+"%":this.getFormattedText(e[t]),o=this.ctx.measureText(r).width,l="",l=a=(t%2==0||0==t?(i=this.m_layerXRightpositionArray[t].x,s=this.m_layerXRightpositionArray[t].x+10,this.m_layerXRightpositionArray):(i=this.m_layerXLeftpositionArray[t].x,s=this.m_layerXLeftpositionArray[t].x-10,this.m_layerXLeftpositionArray))[t].y,l=(this.ctx.lineWidth=1,this.ctx.strokeStyle=this.m_visibleseriesdatalabel[0].dataLabelFontColor,this.ctx.moveTo(i,a),this.ctx.lineTo(s,l),this.ctx.stroke(),t%2==0||0==t?s+3:s-+o-3),h=(t%2==0||0==t?this.getupdatetext(l,o,r,s+3+ +o,"width"):this.getupdatetext(l,o,r,i-3)).text,l=t%2==0||0==t?l:this.getupdatetext(l,o,r,i-3).textPosition;this.ctx.fillText(h,l,a),this.ctx.fill(),this.ctx.closePath()}},PyramidChart.prototype.getFormattedText=function(e){var t,i,s,a,r,o,l;return isNaN(getNumericComparableValue(e))?e:((""+e).indexOf(","),t=""!=this.m_visibleseriesdatalabel[0].datalabelFormaterPosition?this.m_visibleseriesdatalabel[0].datalabelFormaterPosition:"suffix",i=this.m_visibleseriesdatalabel[0].datalabelFormaterPrecision,r=this.m_visibleseriesdatalabel[0].datalabelFormaterCurrency,a=this.m_visibleseriesdatalabel[0].datalabelFormaterUnit,l="default"===i?+getNumericComparableValue(e):(+getNumericComparableValue(e)).toFixed(i),""!=r?(s=this.m_util.getFormatterSymbol("Currency",r),"auto"==(a=this.m_util.getFormatterSymbol("Number",a))?(e=getNumericComparableValue(e,r),r=getNumberFormattedSymbol(+e,r),o=getNumberFormattedNumericValue(+e,i),o=this.m_util.updateTextWithFormatter(o,"",i),l=this.m_util.addFormatter(o,r,"suffix")):(l=this.m_util.updateTextWithFormatter(l,a,i),"none"!=a&&""!=a&&(l=this.m_util.addFormatter(l,a,"suffix"))),"NaN"==l||""===l?"":this.m_util.addFormatter(getFormattedNumberWithCommas(l,this.m_numberformatter),s,t)):"NaN"==l?e:l)},PyramidChart.prototype.getupdatetext=function(e,t,i,s,a){var r,o=e,l=i;return e<1&&(r=s-(o=2),l=this.calculateTitleWidth(i,r)),"width"===a&&s>=this.m_width&&(r=this.m_width-o-2,l=this.calculateTitleWidth(i,r)),{text:l,textPosition:o}},PyramidChart.prototype.calculateTitleWidth=function(e,t){for(var i,s=e.split(""),a=t-30,r=0,o="",l=0,h="12px "+this.m_defaultfontfamily,m=0;m<s.length;m++)r<a?(o+=s[m],r=(i=$("<div>"+o+"</div>").css({position:"absolute",float:"left","white-space":"nowrap",visibility:"hidden",font:h}).appendTo($("body"))).width(),i.remove()):l++;return 0!=l&&(o+=".."),o},PyramidChart.prototype.updateSeriesData=function(e){var t=[];if(this.m_displaySeriesDataFlag=[],null!=e&&null!==e&&""!==e&&0!=e.length)for(var i=0;i<e.length;i++){t[i]=[],this.m_displaySeriesDataFlag[i]=[];for(var s=0;s<e[0].length;s++)this.m_displaySeriesDataFlag[i][s]=!0,isNaN(e[i][s])?(this.m_displaySeriesDataFlag[i][s]=!1,t[i][s]=getNumericComparableValue(e[i][s]),isNaN(t[i][s])&&(t[i][s]=0)):t[i][s]=e[i][s]}return t},PyramidChart.prototype.setMapForDrill=function(e,t){for(var i=this.getDataProvider(),s=(this.m_updateDataForDrill=[],"false"),a=0;a<t.length;a++)for(var r=0;r<i.length;r++){for(var o in i[r])if(t[a]==i[r][o]){this.m_updateDataForDrill.push(i[r]),s="true";break}if("true"==s){s="false";break}}},PyramidChart.prototype.getMapForDrill=function(){return this.m_updateDataForDrill},PyramidChart.prototype.isVisibleSeriesAvailable=function(){for(var e=0;e<this.getSeriesNames().length;e++)if(IsBoolean(this.m_seriesVisibleArr[this.m_seriesDisplayNames[e]]))return!0;return!1},PyramidChart.prototype.getColorAccordingData=function(e){var t=[];if(e.length<this.m_seriesData.length){for(var i=0;i<this.m_seriesData.length;i++){var s=i%e.length;t.push(e[s])}return t}return e},PyramidChart.prototype.initializeSeriesValues=function(){for(var e=[],t=0;t<this.m_seriesData[0].length;t++){e[t]=[];for(var i=0;i<this.m_seriesData.length;i++)e[t][i]=this.m_seriesData[i][t]}this.m_seriesData=e},PyramidChart.prototype.updateCategoryData=function(e){var t=[];if(null!=e&&null!==e&&""!==e&&0!=e.length)for(var i=0;i<e[0].length;i++){t[i]=[];for(var s=0;s<e.length;s++)t[i][s]=e[s][i]}return t},PyramidChart.prototype.updateSeriesColor=function(e){var t=[];if(null!=e&&null!==e&&""!==e&&0!=e.length)for(var i=0;i<e.length;i++){t[i]=[];for(var s=0;s<e.length;s++)t[i][s]=convertColorToHex(e[i])}return t},PyramidChart.prototype.getDrillDataPoints=function(e,t){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeriesAvailable()))for(var i=0;i<this.m_seriesValue.length;i++){var s=this.xPossitionValue[this.m_seriesValue.length-1];if(e>=+this.startX-+s&&e<=+this.startX+ +s&&t>=+this.m_layerYpositionArray[i])if("0"==i){if(t>=+this.m_layerYpositionArray[i]&&t<=+this.m_layerYpositionArray[i]+ +this.seriesValue[i]-1)for(i=this.m_layerYpositionArray.length;0<=i;i--)if(t>=this.m_layerYpositionArray[i])for(var a=0,r=this.yPos[i].length;a<r;a++)if(t>=this.m_layerYpositionArray[i]&&t<=+this.yPos[i][a])return o=this.getFieldNameValueMap(i),l=this.visibleSeriesColors[i],h=this.visibleSeriesNames[a],m=this.seriesDisplayName[a],n=o[h],o.drillField=h,o.drillDisplayField=m,o.drillValue=n,{drillRecord:o,drillColor:l}}else if(t<=+this.m_layerYpositionArray[i]+ +this.seriesValue[i])for(i=this.m_layerYpositionArray.length;0<=i;i--)if(t>=this.m_layerYpositionArray[i])for(var o,l,h,m,n,a=0,r=this.yPos[i].length;a<r;a++)if(t>=this.m_layerYpositionArray[i]&&t<=+this.yPos[i][a])return o=this.getFieldNameValueMap(i),l=this.visibleSeriesColors[i],h=this.visibleSeriesNames[a],m=this.seriesDisplayName[a],n=o[h],o.drillField=h,o.drillDisplayField=m,o.drillValue=n,{drillRecord:o,drillColor:l}}},PyramidChart.prototype.getFieldNameValueMap=function(e){for(var t=new Object,i=this.getAllFieldsName(),s=0;s<i.length;s++)t[i[s]]=this.allDataObjects[e][i[s]];return t},PyramidChart.prototype.getLegendTableContent=function(){for(var e="",t=0;t<this.getLegendNames().length;t++){var i=this.m_legendShape,i=this.getHTMLShape(i);e+='<tr style="font-style:'+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'"><td>'+this.drawLegendShape(i,this.getSeriesColors()[t])+'<span style="display:inline;">'+this.getLegendNames()[t]+"</span></td></tr>"}return e},PyramidChart.prototype.getToolTipData=function(e,t){var i;if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeriesAvailable())&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType))for(var s=this.visibleSeriesColors,a=this.seriesDisplayName,r=this.visibleCategoryNames,o=(this.calculatedPercent,this.seriesData),l=this.seriesPercent,h=0;h<this.m_seriesValue.length;h++){var m=this.xPossitionValue[this.m_seriesValue.length-1];if(e>=+this.startX-+m&&e<=+this.startX+ +m&&t>=+this.m_layerYpositionArray[h])if(i={},IsBoolean("Default"==this.m_customtextboxfortooltip.dataTipType)){if(i.cat="",i.data=new Array,"0"==h){if(t>=+this.m_layerYpositionArray[h]&&t<=+this.m_layerYpositionArray[h]+ +this.seriesValue[h]-1){for(var n,y=0;y<o[h].length;y++)1==a.length?(i.cat=r[h],(p=[])[0]={color:s[h],shape:this.m_legendShape},p[1]=a[y],n=(d=+o[h][y])%1!=0&&"default"!==this.m_precision?d.toFixed(0==this.m_precision?2:this.m_precision):+o[h][y],g=this.getFormatterForToolTip(n),p[2]=g):(i.cat=r[h],(p=[])[0]={color:s[h],shape:this.m_legendShape},p[1]=a[y],n=(d=+o[h][y])%1!=0&&"default"!==this.m_precision?d.toFixed(0==this.m_precision?2:this.m_precision):+o[h][y],g=this.getFormatterForToolTip(n),p[2]=g,p[3]=l[h][y].toFixed(2)+"%"),i.data.push(p);i.highlightIndex=this.getDrillColor(e,t)}}else if(t<=+this.m_layerYpositionArray[h]+ +this.seriesValue[h]){for(var p,d,g,y=0;y<o[h].length;y++)1==a.length?(i.cat=r[h],(p=[])[0]={color:s[h],shape:this.m_legendShape},p[1]=a[y],n=(d=+o[h][y])%1!=0&&"default"!==this.m_precision?d.toFixed(0==this.m_precision?2:this.m_precision):+this.seriesData[h][y],g=this.getFormatterForToolTip(n),p[2]=g):(i.cat=r[h],(p=[])[0]={color:s[h],shape:this.m_legendShape},p[1]=a[y],n=(d=+o[h][y])%1!=0&&"default"!==this.m_precision?d.toFixed(0==this.m_precision?2:this.m_precision):+o[h][y],g=this.getFormatterForToolTip(n),p[2]=g,p[3]=l[h][y].toFixed(2)+"%"),i.data.push(p);i.highlightIndex=this.getDrillColor(e,t)}}else i=this.getDataProvider()[h];else this.hideToolTip()}return i},PyramidChart.prototype.getDrillColor=function(e,t){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory))for(var i=this.m_layerYpositionArray.length;0<=i;i--)if(t>=this.m_layerYpositionArray[i])for(var s=0,a=this.yPos[i].length;s<a;s++)if(t>=this.m_layerYpositionArray[i]&&t<=+this.yPos[i][s])return s},PyramidChart.prototype.getFormatterText=function(e){var t=e;return t=IsBoolean(this.getFixedLabel())?t:this.m_yAxis.getFormattedText(e)},PyramidChart.prototype.getStartX=function(){return this.m_x+50},PyramidChart.prototype.getStartY=function(){return this.m_y+this.m_height-50},PyramidChart.prototype.getEndX=function(){return this.m_x+this.m_width-50},PyramidChart.prototype.getEndY=function(){return this.m_y+10},PyramidChart.prototype.getMarginForSubTitle=function(){var e=IsBoolean(this.m_subTitle.m_showsubtitle)&&3==this.m_subTitle.m_formattedDescription.length?""!=this.m_subTitle.getDescription()?1.5*this.m_subTitle.getFontSize()+ +this.m_chartpaddings.topTitleToSubtitle:10:IsBoolean(this.m_subTitle.m_showsubtitle)?""!=this.m_subTitle.getDescription()?1.5*this.m_subTitle.getFontSize():10:0;return e};
//# sourceMappingURL=PyramidChart.min.js.map