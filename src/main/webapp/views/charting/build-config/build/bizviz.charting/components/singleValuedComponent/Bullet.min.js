/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function Bullet(t,i){this.base=Widget,this.base(),this.m_actualvalue="",this.m_targetvalue="",this.m_tickscolor="",this.m_markertextcolor="",this.m_showtext="",this.m_showvalue="",this.m_showtargetvalue="",this.m_labeltext="",this.m_facecolor="",this.m_width="",this.m_height="",this.m_bullettype="",this.m_fontsize="",this.m_labelfontfamily="",this.m_id="",this.bracesRemovedStr="",this.m_fontcolor="",this.m_targetcolor="",this.m_bordercolor="",this.m_minValue="",this.m_maxValue="",this.m_globalValueOperation="",this.m_globalValueStr="",this.m_actualmetersize="",this.m_targetmetersize="",this.m_rangesofseries="",this.m_rangedcolors="",this.m_rangedseriesdisplaynames="",this.m_alphas="",this.m_orientation="normal",this.m_xpositionArray=[],this.m_ypositionArray=[],this.m_widthArray=[],this.m_heightArray=[],this.m_bulletCalculation=new BulletCalculation,this.m_chartContainer=t,this.m_zIndex=i,this.m_showticks=!0}function BulletCalculation(){this.m_bulletRef,this.ctx,this.calculatedRatio,this.leftmargin,this.rigthmargin,this.topmargin,this.buttommargin,this.availablewidth,this.availableheight,this.widthArray=[],this.xpositionArray=[],this.ypositionArray=[],this.heightArray=[],this.startX="",this.startY="",this.endX="",this.endY="",this.rangesofseries,this.markartext=[],this.xpositionmarkerArray=[],this.ypositionMarker=[],this.rangeRatio,this.rangedcolors=[]}Bullet.prototype=new Widget,Bullet.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},Bullet.prototype.getObjectName=function(){return this.getObjectType()},Bullet.prototype.ParseJsonAttributes=function(t,i){for(var a in this.chartJson=t)if("Bullet"==a)for(var e in t[a])this.setAttributeValueToNode(e,t[a],i);else this.setAttributeValueToNode(a,t,i)},Bullet.prototype.setDataProvider=function(t){this.m_actualvalue=t},Bullet.prototype.getDataProvider=function(){return this.m_actualvalue},Bullet.prototype.setTargetValue=function(t){this.m_targetvalue=t},Bullet.prototype.getTargetValue=function(){return this.m_targetvalue},Bullet.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},Bullet.prototype.initializeDraggableDivAndCanvas=function(t,i){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseClickEvent()},Bullet.prototype.setDashboardNameAndObjectId=function(){this.m_objectId=this.m_objectid,2==this.m_objectid.split(".").length&&(this.m_objectid=this.m_objectid.split(".")[1]),this.m_componentid="BulletDiv"+this.m_objectid},Bullet.prototype.draw=function(){this.drawObject()},Bullet.prototype.drawObject=function(){this.init(),this.drawChart(),""!=this.m_onafterrendercallback&&onAfterRender(this.m_onafterrendercallback)},Bullet.prototype.init=function(){IsBoolean(this.m_isVirtualDataSetavailable),""!=this.m_actualvalue&&!isNaN(this.m_actualvalue)||(this.m_actualvalue=0),this.m_formattedDisplayName=this.formattedDescription(this,this.m_labeltext),this.m_bulletCalculation.init(this)},Bullet.prototype.drawChart=function(){this.ctx.clearRect(this.m_x,this.m_y,this.m_width,this.m_height),this.m_minValue=this.m_bulletCalculation.getMin(),this.m_maxValue=this.m_bulletCalculation.getMax(),this.m_xpositionArray=this.m_bulletCalculation.getXpositionArray(),this.m_ypositionArray=this.m_bulletCalculation.getYpositionArray(),this.m_widthArray=this.m_bulletCalculation.getWidthArray(),this.m_heightArray=this.m_bulletCalculation.getHeightArray(),this.m_range=this.m_bulletCalculation.getRange(),this.m_colorRange=this.m_bulletCalculation.getcolors(),this.m_ratio=this.m_bulletCalculation.getRatio();for(var t=0;t<this.m_range.length;t++)"horizontal"==this.m_bullettype?this.drawBulletRange(this.m_xpositionArray[t],this.m_ypositionArray[t],this.m_widthArray[t],this.m_heightArray[t],this.m_colorRange[t]):this.drawBulletRange(this.m_xpositionArray[t],this.m_ypositionArray[t]-this.m_heightArray[t],this.m_widthArray[t],this.m_heightArray[t],this.m_colorRange[t]);this.drawActual_TargetValue(),this.drawTitle_Value(),IsBoolean(this.m_showticks)&&this.drawMarking(),this.drawBorderBullet()},Bullet.prototype.drawActual_TargetValue=function(){"horizontal"==this.m_bullettype?this.drawHorizontalBullet():this.drawVerticalBullet()},Bullet.prototype.drawHorizontalBullet=function(){var t=this.getActualValue(),i=this.m_bulletCalculation.getAvailableHeight()*this.m_actualmetersize*1,t=this.getActualStartX(this.m_bulletCalculation.startX,t),a=this.m_ypositionArray[0]+this.m_heightArray[0]/2-i/2,a=(this.drawBulletRange(t.start,a,t.width,i,convertColorToHex(this.m_facecolor)),20*this.m_targetmetersize*1),t=+this.getTargetValue(),i=3*this.m_bulletCalculation.getAvailableHeight()/5,t=this.getTargetStartX(this.m_bulletCalculation.startX,t),e=+this.m_ypositionArray[0]+ +this.m_heightArray[0]/5;this.drawBulletRange(t.x-a/2,e,a,i,convertColorToHex(this.m_targetcolor)),IsBoolean(this.m_showtargetvalue)&&this.drawText(this.m_targetvalue,t.x-a/2,this.m_bulletCalculation.topmargin-4,this.m_fontcolor,"false")},Bullet.prototype.getActualStartX=function(t,i){var a,e;return 0<this.m_minValue&&0<this.m_maxValue?(a=t,e=Math.abs(Math.abs(i)-Math.abs(this.m_minValue))*this.m_ratio):this.m_minValue<0&&this.m_maxValue<=0?"normal"==this.m_orientation?(e=Math.abs(Math.abs(this.m_maxValue)-Math.abs(i))*this.m_ratio,a=this.m_bulletCalculation.endX-e):(a=this.m_bulletCalculation.endX,e=Math.abs(Math.abs(this.m_maxValue)-Math.abs(i))*this.m_ratio):this.m_minValue<0&&0<this.m_maxValue?e="normal"==this.m_orientation?(a=t+Math.abs(this.m_minValue)*this.m_ratio*1,i*this.m_ratio):(a=t-Math.abs(this.m_minValue)*this.m_ratio*1,0<=i?-i*this.m_ratio:Math.abs(i)*this.m_ratio):(e=i*this.m_ratio,a="normal"==this.m_orientation?t:t-e),{width:e,start:a}},Bullet.prototype.getTargetStartX=function(t,i){var a,e=0<this.m_minValue&&0<this.m_maxValue?(a=t)-Math.abs(this.m_minValue)*this.m_ratio+ +i*this.m_ratio:this.m_minValue<0&&0<this.m_maxValue?"normal"==this.m_orientation?(a=t)+Math.abs(this.m_minValue)*this.m_ratio+ +i*this.m_ratio:(a=t,i=0<=+i?-i:Math.abs(i),t-Math.abs(this.m_minValue)*this.m_ratio+ +i*this.m_ratio):this.m_minValue<0&&this.m_maxValue<=0?(a=+t,e=Math.abs(Math.abs(this.m_minValue)-Math.abs(i)),"normal"==this.m_orientation?t+e*this.m_ratio:t-e*this.m_ratio):(a=t-Math.abs(this.m_minValue),"normal"==this.m_orientation?a+ +i*this.m_ratio:a-+i*this.m_ratio);return{x:e,start:a}},Bullet.prototype.getTargetStartY=function(t,i){var a=0<this.m_minValue&&0<this.m_maxValue?t-+i*this.m_ratio+Math.abs(this.m_minValue)*this.m_ratio:this.m_minValue<0&&0<this.m_maxValue?"normal"==this.m_orientation?t-Math.abs(this.m_minValue)*this.m_ratio-+i*this.m_ratio:t+Math.abs(this.m_minValue)*this.m_ratio+ +i*this.m_ratio:this.m_minValue<0&&this.m_maxValue<0?"normal"==this.m_orientation?(a=Math.abs(Math.abs(this.m_maxValue)-Math.abs(i))*this.m_ratio,this.m_bulletCalculation.endY+a):(a=Math.abs(Math.abs(this.m_maxValue)-Math.abs(i))*this.m_ratio,this.m_bulletCalculation.endY-a):"normal"==this.m_orientation?t-Math.abs(this.m_minValue)-+i*this.m_ratio:t+Math.abs(this.m_minValue)+ +i*this.m_ratio;return{y:a}},Bullet.prototype.drawVerticalBullet=function(){var t=this.m_bulletCalculation.getAvailableWidth()*this.m_actualmetersize*1,i=this.getActualValue(),i=this.getActualStartY(this.m_bulletCalculation.startY,i),a=+this.m_bulletCalculation.startX+this.m_bulletCalculation.getAvailableWidth()/2-t/2,a=(this.drawBulletRange(a,i.start,t,i.height,convertColorToHex(this.m_facecolor)),+this.getTargetValue()),t=3*this.m_bulletCalculation.getAvailableWidth()/5,i=20*this.m_targetmetersize*1,a=this.getTargetStartY(this.m_bulletCalculation.startY,a),e=+this.m_bulletCalculation.startX+ +this.m_bulletCalculation.getAvailableWidth()/2-t/2;this.drawBulletRange(e,a.y-i/2,t,i,convertColorToHex(this.m_targetcolor)),IsBoolean(this.m_showtargetvalue)&&this.drawText(this.m_targetvalue,+this.m_width-+this.m_bulletCalculation.rigthmargin,a.y+4*i/5,this.m_fontcolor,"")},Bullet.prototype.getActualStartY=function(t,i){var a,e;return 0<this.m_minValue&&0<this.m_maxValue?(a=t,e=Math.abs(Math.abs(i)-Math.abs(this.m_minValue))*this.m_ratio):this.m_minValue<0&&this.m_maxValue<=0?a="normal"==this.m_orientation?(e=Math.abs(Math.abs(this.m_maxValue)-Math.abs(i))*this.m_ratio,this.m_bulletCalculation.endY):(e=Math.abs(Math.abs(this.m_maxValue)-Math.abs(i))*this.m_ratio,this.m_bulletCalculation.endY-e):this.m_minValue<0&&0<this.m_maxValue?e=(a="normal"==this.m_orientation?(i=0<=i?-i:Math.abs(i),t-Math.abs(this.m_minValue)*this.m_ratio*1):t+Math.abs(this.m_minValue)*this.m_ratio*1,i*this.m_ratio):(e=i*this.m_ratio,a="normal"==this.m_orientation?t-e:t),{height:e,start:a}},Bullet.prototype.drawBorderBullet=function(){var t=+this.m_bulletCalculation.leftmargin,i=+this.m_bulletCalculation.topmargin,a=+this.m_bulletCalculation.getAvailableWidth(),e=+this.m_bulletCalculation.getAvailableHeight();this.ctx.beginPath(),this.ctx.save(),this.ctx.strokeStyle=convertColorToHex(this.m_bordercolor),this.ctx.translate(.5,.5),this.ctx.strokeRect(t,i,a,e),this.ctx.restore(),this.ctx.closePath()},Bullet.prototype.drawBulletRange=function(t,i,a,e,s){this.ctx.beginPath(),this.ctx.save(),this.ctx.fillStyle=s,this.ctx.fillRect(t,i,a,e),this.ctx.restore(),this.ctx.closePath()},Bullet.prototype.drawMarking=function(){for(var t=this.m_bulletCalculation.getXPosMarkingArray(),i=this.m_bulletCalculation.getYPosMarkingArray(),a=this.m_bulletCalculation.getMarkingText(),e=0;e<t.length;e++)"horizontal"==this.m_bullettype?(this.drawMarkingLine(t[e],i[e],t[e],i[e]+5),this.drawMarkingText(a[e],t[e],+this.m_height-+this.m_bulletCalculation.buttommargin/2+5,this.m_markertextcolor)):(this.drawMarkingLine(t[e],i[e],t[e]-5,i[e]),this.drawMarkingText(a[e],t[e]-17,i[e]+5,this.m_markertextcolor))},Bullet.prototype.drawMarkingText=function(t,i,a,e){this.ctx.beginPath(),this.ctx.fillStyle=convertColorToHex(e),this.ctx.font=this.fontScaling(+this.m_fontsize)+"px "+selectGlobalFont(this.m_labelfontfamily),this.ctx.textAlign="left";e=this.ctx.measureText(t).width;this.ctx.fillText(t,i-e/2,a),this.ctx.fill(),this.ctx.closePath()},Bullet.prototype.drawMarkingLine=function(t,i,a,e){this.ctx.beginPath(),this.ctx.save(),this.ctx.lineWidth="0.9",this.ctx.translate(.5,.5),this.ctx.strokeStyle=convertColorToHex(this.m_tickscolor),this.ctx.moveTo(t,i),this.ctx.lineTo(a,e),this.ctx.stroke(),this.ctx.restore(),this.ctx.closePath()},Bullet.prototype.getActualValue=function(){var t=+this.m_actualvalue>+this.m_maxValue?+this.m_maxValue:+this.m_actualvalue<+this.m_minValue?+this.m_minValue:+this.m_actualvalue;return t},Bullet.prototype.getTargetValue=function(){var t=+this.m_targetvalue>+this.m_maxValue?+this.m_maxValue:+this.m_targetvalue<+this.m_minValue?+this.m_minValue:+this.m_targetvalue;return t},Bullet.prototype.drawTitle_Value=function(){var t,i;IsBoolean(this.m_showtext)&&("horizontal"==this.m_bullettype?this.drawText(this.m_formattedDisplayName,this.m_bulletCalculation.leftmargin,(+this.m_height-this.m_bulletCalculation.buttommargin-10)/2+12,this.m_fontcolor,"true"):(t=(+this.m_width-this.m_bulletCalculation.leftmargin-this.m_bulletCalculation.rigthmargin)/2+this.m_bulletCalculation.leftmargin,this.drawText(this.m_formattedDisplayName,t,+this.m_height-8,this.m_fontcolor,"false"))),IsBoolean(this.m_showvalue)&&("horizontal"==this.m_bullettype?(i=(+this.m_height-this.m_bulletCalculation.buttommargin)/2+12,t=this.m_width-this.m_bulletCalculation.rigthmargin,this.drawText(this.m_actualvalue,t,i,this.m_fontcolor,"")):(t=this.m_bulletCalculation.leftmargin+ +this.m_bulletCalculation.getAvailableWidth()/2,this.drawText(this.m_actualvalue,t,15,this.m_fontcolor,"false")))},Bullet.prototype.drawText=function(t,i,a,e,s){var l="",e=(this.ctx.beginPath(),this.ctx.font=this.fontScaling(+this.m_fontsize)+"px "+selectGlobalFont(this.m_labelfontfamily),this.ctx.textAlign="left",this.ctx.fillStyle=convertColorToHex(e),this.ctx.measureText(t).width),l="true"==s?i-e-2:""==s?i+2:i-e/2;this.ctx.fillText(t,l,a),this.ctx.fill(),this.ctx.closePath()},Bullet.prototype.getDataPointAndUpdateGlobalVariable=function(){var t={},i=""==this.m_fieldname||null==this.m_fieldname?"Value":this.m_fieldname;t.ActualValue=+this.m_actualvalue,t.TargetValue=+this.m_targetvalue,t[i]=this.m_fieldvalue,this.updateDataPoints(t)},BulletCalculation.prototype.setRatio=function(t){var i="horizontal"==this.m_bulletRef.m_bullettype?this.getAvailableWidth():this.getAvailableHeight();0<this.getMax()&&this.getMin()<0?this.calculatedRatio=+i/Math.abs(Math.abs(+this.getMax())+Math.abs(+this.getMin())):this.calculatedRatio=+i/Math.abs(Math.abs(+this.getMax())-Math.abs(+this.getMin()))},BulletCalculation.prototype.getRatio=function(){return this.calculatedRatio},BulletCalculation.prototype.getXpositionArray=function(){return this.xpositionArray},BulletCalculation.prototype.getYpositionArray=function(){return this.ypositionArray},BulletCalculation.prototype.getHeightArray=function(){return this.heightArray},BulletCalculation.prototype.getWidthArray=function(){return this.widthArray},BulletCalculation.prototype.getcolors=function(){return this.rangedcolors},BulletCalculation.prototype.getRange=function(){return this.rangeRatio},BulletCalculation.prototype.setAvailableWidthHeight=function(){this.availablewidth=+this.m_bulletRef.m_width-this.leftmargin-this.rigthmargin,this.availableheight=+this.m_bulletRef.m_height-this.topmargin-this.buttommargin},BulletCalculation.prototype.getAvailableWidth=function(){return this.availablewidth},BulletCalculation.prototype.getAvailableHeight=function(){return this.availableheight},BulletCalculation.prototype.init=function(t){this.m_bulletRef=t,this.ctx=t.ctx,this.rangesofseries=this.m_bulletRef.m_rangesofseries.split(","),this.setColor(),this.rangedseriesdisplaynames=this.m_bulletRef.m_rangedseriesdisplaynames.split(","),this.setMinMax(),this.initMargin(),this.setAvailableWidthHeight(),this.setRatio(),this.setStartPostion(),this.setDiffRatio(),this.rangeRatio=this.rangesofseries,this.set_XYWH_Position(),this.initMarking()},BulletCalculation.prototype.setColor=function(){for(var t=[],i=(null!=this.m_bulletRef.m_alphas&&(t=this.m_bulletRef.m_alphas.split(",")),this.m_bulletRef.m_rangedcolors.split(",")),a=0;a<this.rangesofseries.length;a++){var e=null!=i[a]?convertColorToHex(i[a]):convertColorToHex("16777215"),s=null!=t[a]?t[a]:1;this.rangedcolors[a]=hex2rgb(e,s)}},BulletCalculation.prototype.setStartPostion=function(){"horizontal"==this.getBulletType()?("normal"==this.m_bulletRef.m_orientation?(this.startX=this.leftmargin,this.startY=this.topmargin,this.endX=+this.m_bulletRef.m_width-+this.rigthmargin):(this.startX=+this.m_bulletRef.m_width-+this.rigthmargin,this.startY=this.topmargin,this.endX=this.leftmargin),this.endY=+this.m_bulletRef.m_height-+this.buttommargin):"normal"==this.m_bulletRef.m_orientation?(this.startX=this.leftmargin,this.startY=+this.m_bulletRef.m_height-+this.buttommargin,this.endX=+this.m_bulletRef.m_width-+this.rigthmargin,this.endY=this.topmargin):(this.startX=this.leftmargin,this.startY=this.topmargin,this.endX=+this.m_bulletRef.m_width-+this.rigthmargin,this.endY=+this.m_bulletRef.m_height-+this.buttommargin)},BulletCalculation.prototype.setDiffRatio=function(){this.differenceRatioArray=[];for(var t,i=0;i<this.rangesofseries.length;i++)t=+this.rangesofseries[i].split("~")[1]-+this.rangesofseries[i].split("~")[0],this.differenceRatioArray.push(t)},BulletCalculation.prototype.setMinMax=function(){this.minValue=this.rangesofseries[0].split("~")[0],this.maxValue=this.rangesofseries[this.rangesofseries.length-1].split("~")[1]},BulletCalculation.prototype.getMin=function(){return this.minValue},BulletCalculation.prototype.getMax=function(){return this.maxValue},BulletCalculation.prototype.getBulletType=function(){return"horizontal"==this.m_bulletRef.m_bullettype?"horizontal":"vertical"},BulletCalculation.prototype.getXPosMarkingArray=function(){return this.xpositionmarkerArray},BulletCalculation.prototype.getYPosMarkingArray=function(){return this.ypositionMarker},BulletCalculation.prototype.getMarkingText=function(){return this.markartext},BulletCalculation.prototype.set_XYWH_Position=function(){var t;if(this.widthArray=[],this.xpositionArray=[],this.ypositionArray=[],this.heightArray=[],"horizontal"==this.getBulletType())if("normal"==this.m_bulletRef.m_orientation)for(var i=0;i<this.rangeRatio.length;i++)t=this.rangesofseries[i].split("~"),0==i?this.xpositionArray.push(this.leftmargin):this.minValue<0&&0<this.maxValue&&0<+t[0]&&0<+t[1]?this.xpositionArray.push(+this.startX+Math.abs(Math.abs(+this.rangesofseries[i].split("~")[0])+Math.abs(+this.minValue))*this.calculatedRatio*1):this.xpositionArray.push(+this.startX+Math.abs(Math.abs(+this.rangesofseries[i].split("~")[0])-Math.abs(+this.minValue))*this.calculatedRatio*1),this.widthArray.push(this.differenceRatioArray[i]*this.calculatedRatio),this.ypositionArray.push(this.topmargin),this.heightArray.push(this.availableheight);else for(i=0;i<this.rangeRatio.length;i++)t=this.rangesofseries[i].split("~"),0==i?this.xpositionArray.push(this.startX-this.differenceRatioArray[i]*this.calculatedRatio):this.minValue<0&&0<this.maxValue&&(0<+t[0]&&0<+t[1]||0<=+this.rangesofseries[i].split("~")[1])?this.xpositionArray.push(+this.startX-Math.abs(Math.abs(+this.rangesofseries[i].split("~")[1])+Math.abs(+this.minValue))*this.calculatedRatio*1):this.xpositionArray.push(+this.startX-Math.abs(Math.abs(+this.rangesofseries[i].split("~")[1])-Math.abs(+this.minValue))*this.calculatedRatio*1),this.widthArray.push(this.differenceRatioArray[i]*this.calculatedRatio),this.ypositionArray.push(this.topmargin),this.heightArray.push(this.availableheight);else if("normal"==this.m_bulletRef.m_orientation)for(i=0;i<this.rangeRatio.length;i++)t=this.rangesofseries[i].split("~"),0==i?this.ypositionArray.push(this.startY):this.minValue<0&&0<this.maxValue&&0<+t[0]&&0<+t[1]?this.ypositionArray.push(+this.startY-Math.abs(Math.abs(+this.rangesofseries[i].split("~")[0])+Math.abs(+this.minValue))*this.calculatedRatio*1):this.ypositionArray.push(+this.startY-Math.abs(Math.abs(+this.rangesofseries[i].split("~")[0])-Math.abs(+this.minValue))*this.calculatedRatio*1),this.xpositionArray.push(this.leftmargin),this.heightArray.push(this.differenceRatioArray[i]*this.calculatedRatio),this.widthArray.push(this.availablewidth);else for(i=0;i<this.rangeRatio.length;i++)t=this.rangesofseries[i].split("~"),0==i?this.ypositionArray.push(this.startY+this.differenceRatioArray[i]*this.calculatedRatio):this.minValue<0&&0<this.maxValue&&(0<+t[0]&&0<+t[1]||0<=+this.rangesofseries[i].split("~")[1])?this.ypositionArray.push(+this.startY+Math.abs(Math.abs(+this.rangesofseries[i].split("~")[1])+Math.abs(+this.minValue))*this.calculatedRatio*1):this.ypositionArray.push(+this.startY+Math.abs(Math.abs(+this.rangesofseries[i].split("~")[1])-Math.abs(+this.minValue))*this.calculatedRatio*1),this.xpositionArray.push(this.leftmargin),this.heightArray.push(this.differenceRatioArray[i]*this.calculatedRatio),this.widthArray.push(this.availablewidth)},BulletCalculation.prototype.initMargin=function(t,i,a){"horizontal"==this.getBulletType()?(this.buttommargin=this.getButtomMargin(),this.leftmargin=this.getLeftMargin(),this.rigthmargin=this.getRightMargin(),this.topmargin=this.getTopMargin()):(this.topmargin=this.getTopMargin(),this.buttommargin=this.getButtomMargin(),this.leftmargin=this.getLeftMargin(),this.rigthmargin=this.getRightMargin())},BulletCalculation.prototype.getTopMargin=function(){var t,i=10;return"horizontal"==this.getBulletType()?IsBoolean(this.m_bulletRef.m_showtargetvalue)&&(t=+this.m_bulletRef.m_fontsize+"px "+selectGlobalFont(this.m_bulletRef.m_labelfontfamily),i+=+this.getTextHeight(t).height/2):IsBoolean(this.m_bulletRef.m_showvalue)&&(this.ctx.beginPath(),this.ctx.font=+this.m_bulletRef.m_fontsize+"px "+selectGlobalFont(this.m_bulletRef.m_labelfontfamily),this.ctx.textAlign="left",this.ctx.closePath(),i=20),this.m_bulletRef.fontScaling(i)},BulletCalculation.prototype.getLeftMargin=function(){var t,i=10;return"horizontal"==this.getBulletType()?IsBoolean(this.m_bulletRef.m_showtext)&&(this.ctx.beginPath(),this.ctx.font=+this.m_bulletRef.m_fontsize+"px "+selectGlobalFont(this.m_bulletRef.m_labelfontfamily),this.ctx.textAlign="left",t=this.ctx.measureText(this.m_bulletRef.m_formattedDisplayName).width,this.ctx.closePath(),i+=+t):IsBoolean(this.m_bulletRef.m_showticks)&&(this.ctx.beginPath(),this.ctx.font=+this.m_bulletRef.m_fontsize+"px "+selectGlobalFont(this.m_bulletRef.m_labelfontfamily),this.ctx.textAlign="left",t=this.ctx.measureText(this.maxValue).width,this.ctx.closePath(),i=i+ +t+10),this.m_bulletRef.fontScaling(i)},BulletCalculation.prototype.getButtomMargin=function(){var t,i=10;return"horizontal"==this.getBulletType()?IsBoolean(this.m_bulletRef.m_showticks)&&(t=+this.m_bulletRef.m_fontsize+"px "+selectGlobalFont(this.m_bulletRef.m_labelfontfamily),i+=+this.getTextHeight(t).height):IsBoolean(this.m_bulletRef.m_showtext)&&(t=+this.m_bulletRef.m_fontsize+"px "+selectGlobalFont(this.m_bulletRef.m_labelfontfamily),i+=4*+this.getTextHeight(t).height/5),this.m_bulletRef.fontScaling(i)},BulletCalculation.prototype.getTextHeight=function(t){var t=$("<span>Hg</span>").css({fontFamily:t}),i=$('<div style="display: inline-block; width: 1px; height: 0px;"></div>'),a=$("<div></div>");a.append(t,i),$("body").append(a);try{var e={};i.css({verticalAlign:"baseline"}),e.ascent=i.offset().top-t.offset().top,i.css({verticalAlign:"bottom"}),e.height=i.offset().top-t.offset().top,e.descent=e.height-e.ascent}finally{a.remove()}return e},BulletCalculation.prototype.getRightMargin=function(){var t,i=10;return"horizontal"==this.getBulletType()?IsBoolean(this.m_bulletRef.m_showvalue)?(this.ctx.beginPath(),this.ctx.font=+this.m_bulletRef.m_fontsize+"px "+selectGlobalFont(this.m_bulletRef.m_labelfontfamily),this.ctx.textAlign="left",t=this.ctx.measureText(this.m_bulletRef.m_actualvalue).width,this.ctx.closePath(),i+=+t):IsBoolean(this.m_bulletRef.m_showticks)&&(i=15):IsBoolean(this.m_bulletRef.m_showtargetvalue)&&(this.ctx.beginPath(),this.ctx.font=+this.m_bulletRef.m_fontsize+"px "+selectGlobalFont(this.m_bulletRef.m_labelfontfamily),this.ctx.textAlign="left",t=this.ctx.measureText(this.m_bulletRef.m_targetvalue).width,this.ctx.closePath(),i+=+t),this.m_bulletRef.fontScaling(i)},BulletCalculation.prototype.initMarking=function(){var t,i,a,e;if(this.markartext=[],this.xpositionmarkerArray=[],this.ypositionMarker=[],"horizontal"==this.getBulletType())if("normal"==this.m_bulletRef.m_orientation){t=+this.minValue,i=this.leftmargin,a=getMax(+this.maxValue-+this.minValue),this.markartext.push(t),e=this.topmargin+ +this.getAvailableHeight(),this.xpositionmarkerArray.push(this.leftmargin),this.ypositionMarker.push(e);for(var s=0;s<a[1];s++)t+=+a[2],i+=+a[2]*this.calculatedRatio,this.markartext.push(t),this.xpositionmarkerArray.push(i),this.ypositionMarker.push(e)}else{t=+this.minValue,i=this.startX,a=getMax(+this.maxValue-+this.minValue),this.markartext.push(t),e=this.topmargin+ +this.getAvailableHeight(),this.xpositionmarkerArray.push(this.startX),this.ypositionMarker.push(e);for(s=0;s<a[1];s++)t+=+a[2],i-=+a[2]*this.calculatedRatio,this.markartext.push(t),this.xpositionmarkerArray.push(i),this.ypositionMarker.push(e)}else if("normal"==this.m_bulletRef.m_orientation){t=+this.minValue,a=getMax(+this.maxValue-+this.minValue),this.markartext.push(t),this.xpositionmarkerArray.push(this.leftmargin),this.ypositionMarker.push(this.startY);for(s=0;s<a[1];s++)t+=+a[2],this.markartext.push(t),this.xpositionmarkerArray.push(this.leftmargin),0==s?this.ypositionMarker.push(+this.startY-Math.abs(+a[2])*this.calculatedRatio):this.ypositionMarker.push(+this.ypositionMarker[s]-Math.abs(+a[2])*this.calculatedRatio)}else{t=+this.minValue,a=getMax(+this.maxValue-+this.minValue),this.markartext.push(t),this.xpositionmarkerArray.push(this.leftmargin),this.ypositionMarker.push(this.startY);for(s=0;s<a[1];s++)t+=+a[2],this.markartext.push(t),this.xpositionmarkerArray.push(this.leftmargin),0==s?this.ypositionMarker.push(+this.startY+Math.abs(+a[2])*this.calculatedRatio):this.ypositionMarker.push(+this.ypositionMarker[s]+Math.abs(+a[2])*this.calculatedRatio)}};
//# sourceMappingURL=Bullet.min.js.map