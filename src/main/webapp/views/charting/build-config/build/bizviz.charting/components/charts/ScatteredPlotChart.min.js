/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function ScatteredPlotChart(t,i){this.base=Chart,this.base(),this.m_x=350,this.m_y=20,this.m_width=300,this.m_height=260,this.m_seriesNames=[],this.m_categoryData=[],this.m_seriesData=[],this.m_chartData=[],this.m_plotRadius=[],this.m_chartTypeNames=[],this.m_showSeries=[],this.m_shapeSeries=[],this.m_maximumaxisvalue,this.m_minimumaxisvalue,this.m_minradius=2,this.m_maxradius=26,this.m_yPositionArray=[],this.m_calculation=new ScatterPlotChartCalculation,this.m_xAxis=new PlotXAxis,this.m_yAxis=new PlotYAxis,this.m_title=new svgTitle(this),this.m_subTitle=new svgSubTitle,this.m_chartContainer=t,this.m_zIndex=i,this.noOfRows=1,this.m_startX=0,this.m_startY=0,this.m_endX=0,this.m_endY=0,this.m_range1=[],this.m_range2=[],this.m_color=[],this.m_displayname="a,b",this.m_ranges="0~10,10~20",this.m_colors="#2e309c,#909090",this.m_rangeshapes=["point","point","point","point","point","point"],this.m_legendDisplayNames="A,B",this.m_highervaluesaregood="true",this.m_showcolorbandlegends=!1,this.m_lineform="curve",this.m_secondaryaxisformater="Currency",this.m_secondaryaxisunit="none",this.m_secondaryaxissignposition="prefix",this.m_secondaryaxisprecision="0",this.m_secondaryaxissecondaryformatter="Number",this.m_secondaryaxissecondaryunit="none",this.m_defaultfillcolor="#e0dfdf",this.m_solidcolorfill=!1,this.m_showxaxisthreshold="false",this.m_minimumxaxisthreshold="0",this.m_maximumxaxisthreshold="50",this.m_showyaxisthreshold="false",this.m_minimumyaxisthreshold="0",this.m_maximumyaxisthreshold="50",this.m_thresholdfillopacity="0.3",this.m_thresholdfillcolor="#FF0000",this.m_enablethresholdfill=!1,this.m_minimumxaxisthresholdline=!0,this.m_xaxisthresholdlinewidth="1",this.m_xaxisthresholdstrokecolor="#000000",this.m_minimumyaxisthresholdline=!0,this.m_yaxisthresholdlinewidth="1",this.m_yaxisthresholdstrokecolor="#000000",this.m_thresholdlinetype="straight",this.m_bubbleanimationduration=.5,this.m_hovershape=2,this.m_enableanimation="false",this.m_canvastype="svg",this.m_actionsort=!1,this.m_actionchartviews=!1,this.enableDrillHighlighter="false",this.m_drilltoggle=!1,this.m_scatterdragFlag=!1,this.m_enablezoom="false"}function ScatterPlotChartCalculation(){this.m_xAxisMarkersArray=[],this.m_yAxisMarkersArray=[],this.m_xPixelArray=[],this.m_yPixelArray=[],this.radius=[],this.colors=[],this.m_xMax=0,this.m_xRatio=0,this.m_yRatio=0,this.m_yMax=0,this.m_yAxisText=1,this.m_noOfXAxisMarkers=5,this.m_noOfYAxisMarkers=5,this.m_axisToChartMargin=5}function ShapeSeries(){this.color=[],this.xPositionArray=[],this.yPositionArray=[],this.common=[],this.shape,this.plotradius=[],this.m_chart,this.linewidth}function Shape(){this.color,this.xPosition,this.yPosition,this.s,this.plotradius=3,this.ctx="",this.linewidth}function PlotXAxis(){this.base=Xaxis,this.base(),this.m_textUtil=new TextUtil,this.m_util=new Util,this.ctx=""}function PlotYAxis(){this.base=Axes,this.base(),this.m_chart,this.m_chartCalculation,this.m_startX,this.m_startY,this.m_endX,this.m_endY,this.m_axislinetotextgap=5,this.m_textUtil=new TextUtil,this.m_util=new Util,this.ctx=""}ScatteredPlotChart.prototype=new Chart,ScatteredPlotChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},ScatteredPlotChart.prototype.ParseJsonAttributes=function(t,i){for(var e in this.chartJson=t)if("Chart"==e)for(var s in t[e])switch(s){case"xAxis":for(var a in t[e][s]){var r=this.getNodeAttributeName(a);i.m_xAxis[r]=t[e][s][a]}break;case"yAxis":for(var o in t[e][s]){var r=this.getNodeAttributeName(o);i.m_yAxis[r]=t[e][s][o]}break;case"Title":for(var h in t[e][s]){var r=this.getNodeAttributeName(h);i.m_title[r]=t[e][s][h]}break;case"SubTitle":for(var n in t[e][s]){var r=this.getNodeAttributeName(n);i.m_subTitle[r]=t[e][s][n]}break;case"Legend":for(var m in t[e][s])i[r=this.getNodeAttributeName(m)]=t[e][s][m];break;case"CategoryColors":var l,c=new CategoryColors;for(l in this.setCategoryColors(c),t[e][s])if("CategoryColor"===l){var _=this.getArrayOfSingleLengthJson(t[e][s][l]);c.cateogryNameColorMap=new Object;for(var d=0;d<_.length;d++){var u,p=new CategoryColor;for(u in c.setCategoryColor(p),_[d])p[r=this.getNodeAttributeName(u)]=_[d][u];c.cateogryNameColorMap[p.getCategoryName()]=p.getColor()}}else{r=this.getNodeAttributeName(l);i.m_categoryColors[r]=t[e][s][l]}c.setCategoryDefaultColorSet();break;case"ConditionalColors":if(""!=t[e][s])for(var x=new ConditionalColors,y=(this.setConditionalColors(x),this.getArrayOfSingleLengthJson(t[e][s].ConditionalColor)),d=0;d<y.length;d++){var g,A=new ConditionalColor;for(g in x.setConditionalColor(A),y[d])A[r=this.getNodeAttributeName(g)]=y[d][g]}break;default:i[r=this.getNodeAttributeName(s)]=t[e][s]}else i[r=this.getNodeAttributeName(e)]=t[e]},ScatteredPlotChart.prototype.getAllDPFields=function(){return this.m_alldpfields},ScatteredPlotChart.prototype.setAllDPFields=function(){this.m_alldpfields=[];for(var t=0,i=this.getDataProvider().length;t<i;t++)for(var e in this.getDataProvider()[t])this.m_alldpfields.indexOf(e)<0&&this.m_alldpfields.push(e)},ScatteredPlotChart.prototype.getDataProvider=function(){return this.m_dataProvider},ScatteredPlotChart.prototype.setFields=function(t){this.m_fieldsJson=t,this.setCategory(t),this.setSeries(t),this.setAllFieldNames(),this.setAllFieldsDisplayName()},ScatteredPlotChart.prototype.setAllFieldNames=function(){var t=[];this.m_allfieldsName=[];for(var i=0,e=this.nameArr.length;i<e;i++)t.push(this.nameArr[i]),""!=this.otherFieldArr[i]&&t.push(this.otherFieldArr[i]);t=this.getUniqueValueFromArray(t),this.m_allfieldsName=t},ScatteredPlotChart.prototype.setAllFieldsDisplayName=function(){var t=[];this.m_displayFieldNames=[];for(var i=0,e=this.displayNamesArr.length;i<e;i++)t.push(this.displayNamesArr[i]),""!=this.otherFieldArr[i]&&t.push(this.displayNamesArr[i]);t=this.getUniqueValueFromArray(t),this.m_displayFieldNames=t},ScatteredPlotChart.prototype.getFieldbyYFields=function(){for(var t=[],i=0,e=this.nameArr.length;i<e;i++)"YField"==this.typeArr[i]&&""!=this.otherFieldArr[i]&&IsBoolean(this.m_showSeries[i])?t.push(this.nameArr[i]):"XField"==this.typeArr[i]&&""!=this.otherFieldArr[i]&&IsBoolean(this.m_showSeries[i])&&t.push(this.otherFieldArr[i]);return t},ScatteredPlotChart.prototype.getYFieldsColors=function(){this.m_colorNames=[];for(var t=0,i=this.nameArr.length;t<i;t++)("YField"==this.typeArr[t]&&""!=this.otherFieldArr[t]||"XField"==this.typeArr[t]&&""!=this.otherFieldArr[t])&&this.m_colorNames.push(this.colorArr[t]);return this.m_colorNames},ScatteredPlotChart.prototype.getFieldbyYFieldsDisplayName=function(){for(var t=[],i=0,e=this.nameArr.length;i<e;i++)""!=this.otherFieldArr[i]&&t.push(this.displayNamesArr[i]);return t},ScatteredPlotChart.prototype.getUniqueValueFromArray=function(t){for(var i={},e=0;e<t.length;e++)i[t[e]]=!0;var s,a=[];for(s in i)a.push(s);return a},ScatteredPlotChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryDisplayNames=[],this.m_categoryFieldColor=[];for(var i=0,e=t.length;i<e;i++){var s=this.getProperAttributeNameValue(t[i],"Type"),a=this.getProperAttributeNameValue(t[i],"OtherField");"YField"==s&&""!=a?this.m_categoryNames.push(a):"XField"==s&&""!=a&&this.m_categoryNames.push(this.getProperAttributeNameValue(t[i],"Name")),this.m_categoryFieldColor.push(this.getProperAttributeNameValue(t[i],"Color"))}},ScatteredPlotChart.prototype.getOtherFields=function(){for(var t=[],i=0,e=this.nameArr.length;i<e;i++)"YField"==this.typeArr[i]&&""!=this.otherFieldArr[i]&&IsBoolean(this.m_showSeries[i])?t.push(this.otherFieldArr[i]):"XField"==this.typeArr[i]&&""!=this.otherFieldArr[i]&&IsBoolean(this.m_showSeries[i])&&t.push(this.nameArr[i]);return t},ScatteredPlotChart.prototype.getCategoryNames=function(){return this.getOtherFields()},ScatteredPlotChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},ScatteredPlotChart.prototype.setSeries=function(t){this.allNameArr=[],this.allDisplayNamesArr=[],this.m_seriesVisibleArr={},this.nameArr=[],this.otherFieldArr=[],this.allOtherFieldArr=[],this.legendArr=[],this.displayNamesArr=[],this.otherFieldDisplayNamesArr=[],this.radiusFieldDisplayNamesArr=[],this.colorFieldDisplayNamesArr=[],this.colorArr=[],this.m_seriesDataLabelProperty=[],this.plotColorArr=[],this.plotRadiusArr=[],this.m_isfixedradius=[],this.typeArr=[],this.m_seriesChartType=[],this.m_seriesNameWithOtherField={},this.m_seriesNameAndOtherFieldNameArray=[],this.m_transparency=[],this.m_lineWidthArray=[],this.m_bestfitline=[],this.m_bestfitlinecolor=[],this.m_bestfitlinewidth=[],this.m_bestfitlinetype=[];for(var i=0,e=0,s=t.length;e<s;e++){this.allNameArr[e]=this.getProperAttributeNameValue(t[e],"Name");var a,r,o,h=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.allDisplayNamesArr[e]=h,this.m_seriesVisibleArr[this.allDisplayNamesArr[e]]=this.getProperAttributeNameValue(t[e],"visible"),this.allOtherFieldArr[e]=this.getProperAttributeNameValue(t[e],"OtherField"),this.m_seriesNameAndOtherFieldNameArray.push(this.allNameArr[i]),""!=this.allOtherFieldArr[i]&&this.m_seriesNameAndOtherFieldNameArray.push(this.allOtherFieldArr[i]),IsBoolean(this.m_seriesVisibleArr[this.allDisplayNamesArr[e]]&&""!=this.allOtherFieldArr[e])&&(this.nameArr[i]=this.getProperAttributeNameValue(t[e],"Name"),this.otherFieldArr[i]=this.getProperAttributeNameValue(t[e],"OtherField"),this.m_seriesNameWithOtherField[this.nameArr[i]]=this.getProperAttributeNameValue(t[e],"OtherField"),this.displayNamesArr[i]=h,this.otherFieldDisplayNamesArr[i]=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"OtherFieldDisplayName")),this.radiusFieldDisplayNamesArr[i]=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"RadiusFieldDisplayName")),this.colorFieldDisplayNamesArr[i]=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"ColorFieldDisplayName")),this.colorArr[i]=convertColorToHex(this.getProperAttributeNameValue(t[e],"Color")),h=this.getProperAttributeNameValue(t[e],"ColorField"),o=this.getProperAttributeNameValue(t[e],"LineWidth"),this.plotColorArr[i]=null!=h&&null!==h&&""!==h?h:"",this.m_lineWidthArray[i]=null!=o&&null!==o&&""!==o?o:2,h=this.getProperAttributeNameValue(t[e],"BestFitLine"),o=this.getProperAttributeNameValue(t[e],"BestFitLineWidth"),a=this.getProperAttributeNameValue(t[e],"BestFitLineColor"),r=this.getProperAttributeNameValue(t[e],"BestFitLineType"),this.m_bestfitline[i]=null!=h&&null!==h&&""!==h?h:"false",this.m_bestfitlinewidth[i]=null!=o&&null!==o&&""!==o?o:"1",this.m_bestfitlinecolor[i]=null!=a&&null!==a&&""!==a?a:"#000000",this.m_bestfitlinetype[i]=null!=r&&null!==r&&""!==r?r:"straight",this.m_seriesDataLabelProperty[i]=this.getProperAttributeNameValue(t[e],"DataLabelCustomProperties"),void 0!==this.m_seriesDataLabelProperty[i]?(IsBoolean(this.m_seriesDataLabelProperty[i].useFieldColor)&&(this.m_seriesDataLabelProperty[i].dataLabelFontColor=this.colorArr[i]),IsBoolean(this.m_seriesDataLabelProperty[i].dataLabelUseComponentFormater)&&(this.m_seriesDataLabelProperty[i].datalabelFormaterCurrency=this.m_unit,this.m_seriesDataLabelProperty[i].datalabelFormaterPrecision=this.m_precision,this.m_seriesDataLabelProperty[i].datalabelFormaterPosition=this.m_signposition,this.m_seriesDataLabelProperty[i].datalabelFormaterUnit=this.m_secondaryunit)):this.m_seriesDataLabelProperty[i]=this.getDataLabelProperties(),h=this.getProperAttributeNameValue(t[e],"PlotRadius"),this.plotRadiusArr[i]=""!==h?h:this.nameArr[i],this.m_isfixedradius[i]=this.getProperAttributeNameValue(t[e],"isFixedRadius"),o=this.getProperAttributeNameValue(t[e],"PlotTransparency"),this.m_transparency[i]=null!=o?o:.3,this.typeArr[i]=this.getProperAttributeNameValue(t[e],"Type"),this.m_seriesChartType[i]=this.getProperAttributeNameValue(t[e],"PlotType"),"Category"!=this.typeArr[i]&&(this.m_showSeries[i]=this.getProperAttributeNameValue(t[e],"visible")),i++)}},ScatteredPlotChart.prototype.getSeriesNames=function(){return this.getFieldbyYFields()},ScatteredPlotChart.prototype.getSeriesNamesForToolTip=function(t){for(var i,e=this.getFieldbyYFields(),s=0,a=this.getFieldbyYFields().length;s<a;s++)s==t&&(i=e[t]);return i},ScatteredPlotChart.prototype.getSeriesDisplayNamesForToolTip=function(t){for(var i,e=this.getFieldbyYFieldsDisplayName(),s=0,a=e.length;s<a;s++)s==t&&(i=e[t]);return i},ScatteredPlotChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},ScatteredPlotChart.prototype.getSeriesColors=function(){return this.getYFieldsColors()},ScatteredPlotChart.prototype.getDataFromJSON=function(t){for(var i=[],e=0,s=this.getDataProvider().length;e<s;e++)null==this.getDataProvider()[e][t]||"undefined"==this.getDataProvider()[e][t]?i[e]="":i[e]=this.getDataProvider()[e][t];return i},ScatteredPlotChart.prototype.setCategoryData=function(){this.m_categoryData=[];for(var t=0,i=this.getCategoryNames().length;t<i;t++)this.m_categoryData[t]=this.getDataFromJSON(this.getCategoryNames()[t])},ScatteredPlotChart.prototype.getCategoryData=function(){return this.m_categoryData},ScatteredPlotChart.prototype.setAllSeriesNames=function(){for(var t=[],i=0,e=this.m_seriesNameAndOtherFieldNameArray.length;i<e;i++)-1==t.indexOf(this.m_seriesNameAndOtherFieldNameArray[i])&&t.push(this.m_seriesNameAndOtherFieldNameArray[i]);this.m_seriesNameAndOtherFieldNameArray=t},ScatteredPlotChart.prototype.setSeriesData=function(){this.m_seriesData=[];for(var t=0,i=this.getSeriesNames().length;t<i;t++)this.m_seriesData[t]=this.getDataFromJSON(this.getSeriesNames()[t])},ScatteredPlotChart.prototype.setPlotRadiusData=function(){this.m_plotRadiusData=[];for(var t=0,i=this.plotRadiusArr.length;t<i;t++){this.m_plotRadiusData[t]=[];for(var e=0,s=this.getDataProvider().length;e<s;e++)!IsBoolean(this.m_isfixedradius[t])&&(isNaN(this.plotRadiusArr[t])||null!=this.m_isfixedradius[t])?this.m_plotRadiusData[t]=this.getDataFromJSON(this.plotRadiusArr[t]):this.m_plotRadiusData[t][e]=this.plotRadiusArr[t]}},ScatteredPlotChart.prototype.getPlotRadiusData=function(){return this.m_plotRadiusData},ScatteredPlotChart.prototype.setPlotColorData=function(){this.m_plotColorData=[];for(var t=0,i=this.plotColorArr.length;t<i;t++){var e=(""!==this.plotColorArr[t]?this.plotColorArr:this.getSeriesNames())[t];this.m_plotColorData[t]=this.getDataFromJSON(e)}},ScatteredPlotChart.prototype.getPlotColorData=function(){return this.m_plotColorData},ScatteredPlotChart.prototype.getSeriesData=function(){return this.m_seriesData},ScatteredPlotChart.prototype.setSeriesColor=function(t){this.m_seriesColor=t},ScatteredPlotChart.prototype.getSeriesColor=function(){return this.m_seriesColor},ScatteredPlotChart.prototype.setLegendNames=function(t){this.m_legendNames=t},ScatteredPlotChart.prototype.getLegendNames=function(){return this.m_legendNames=this.displayNamesArr,this.m_legendNames},ScatteredPlotChart.prototype.getCategoryColorsForAction=function(){return this.m_categoryFieldColor},ScatteredPlotChart.prototype.getSeriesColorsForAction=function(){return this.colorArr},ScatteredPlotChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0,i=this.getCategoryNames().length;t<i;t++)this.m_allfieldsName.push(this.getCategoryNames()[t]);for(var e=0,s=this.getSeriesNames().length;e<s;e++)this.m_allfieldsName.push(this.getSeriesNames()[e])},ScatteredPlotChart.prototype.setConditionalColor=function(){this.m_seriesColorsArray=[];var t=this.m_plotHexColor;if(!IsBoolean(this.m_designMode)&&""!=this.getCategoryColors()&&(!IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName())||0==this.getCategoryColors().getCategoryColor().length)&&""!=this.getConditionalColors()&&null!=this.getConditionalColors()&&0<this.getConditionalColors().getConditionalColor().length)for(var i=this.getConditionalColors().getScatterPlotConditionalColorsForConditions(this.nameArr,t,this.m_seriesData,this.m_seriesNameWithOtherField,this),e=0,s=this.m_plotHexColor.length;e<s;e++){this.m_seriesColorsArray[e]=[];for(var a=0,r=this.m_plotHexColor[e].length;a<r;a++)this.m_plotHexColor[e][a]=i[e][a]}},ScatteredPlotChart.prototype.setOpacity=function(){this.m_seriesOpacity=[];for(var k=0;k<this.m_categoryNames.length;k++)if(this.m_seriesOpacity[k]=[],0<this.m_conditionalColors.m_ConditionalColor.length)for(var i=0;i<this.m_conditionalColors.m_ConditionalColor.length;i++)if(this.m_categoryNames[k]===this.m_conditionalColors.m_ConditionalColor[i].m_seriesname)for(var field=this.m_conditionalColors.m_ConditionalColor[i].m_comparedfield,opa=this.m_conditionalColors.m_ConditionalColor[i].m_opacity,operator=this.m_conditionalColors.m_ConditionalColor[i].m_operator,j=0;j<this.m_dataProvider.length;j++){var compareTo=IsBoolean(!this.m_conditionalColors.m_ConditionalColor[i].m_flag)?this.m_dataProvider[j][this.m_conditionalColors.m_ConditionalColor[i].m_compareto]:this.m_conditionalColors.m_ConditionalColor[i].m_compareto,seriesname=this.m_dataProvider[j][field],result=!1,values,result;try{"=="!=operator&&"!="!=operator||!IsBoolean(isNaN(seriesname))?"between"==operator?(values=(""+compareTo).split("~"),result=seriesname>=+values[0]&&seriesname<=+values[1]):eval("result  = "+seriesname+operator+compareTo):eval("result  = '"+seriesname+"'"+operator+"'"+compareTo+"'")}catch(e){result=!1}result?this.m_seriesOpacity[k][j]=opa:!isNaN(this.m_seriesOpacity[k][j])&&void 0!==this.m_seriesOpacity[k][j]||(this.m_seriesOpacity[k][j]=this.m_transparency[k])}else for(var a=0;a<this.m_dataProvider.length;a++)!isNaN(this.m_seriesOpacity[k][a])&&void 0!==this.m_seriesOpacity[k][a]||(this.m_seriesOpacity[k][a]=this.m_transparency[k]);else for(var b=0;b<this.m_dataProvider.length;b++)!isNaN(this.m_seriesOpacity[k][b])&&void 0!==this.m_seriesOpacity[k][b]||(this.m_seriesOpacity[k][b]=this.m_transparency[k])},ScatteredPlotChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},ScatteredPlotChart.prototype.getAllFieldsDisplayName=function(){return this.m_displayFieldNames},ScatteredPlotChart.prototype.getType=function(){return this.m_fieldType},ScatteredPlotChart.prototype.getOtherField=function(){return this.m_otherFields},ScatteredPlotChart.prototype.init=function(){if(this.createSVG(),IsBoolean(this.m_scatterdragFlag)||(this.setCategoryData(),this.setSeriesData(),this.updateCategoryData(),this.updateSeriesData(),this.isSeriesDataEmpty()),this.setAllDPFields(),this.setAllSeriesNames(),this.setPlotRadiusData(),this.setPlotColorData(),this.m_chartTypeNames=this.getChartTypeNames(),this.m_chartTypeRadius=this.getChartTypeRadius(),this.m_chartTypeColors=this.getChartTypeColors(),this.getRanges(),this.m_seriesNames=this.getSeriesNames(),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory())){this.setMinMaxValueFromSeriesData(),this.m_calculation.init(this,this.getCategoryData(),this.getSeriesData()),this.initializeChartUIProperties();for(var t=this.m_categoryData,i=(this.m_categoryData=this.m_calculation.getXAxisMarkersArray(),this.m_xAxis.init(this,this.m_calculation),this.m_xAxis.m_xAxisData=this.getCategoryData(),this.m_xAxis.m_xAxisActualMarkersArray=this.m_calculation.m_xAxisActualMarkersArray,this.m_yAxis.init(this,this.m_calculation),this.m_categoryData=t,IsBoolean(this.isShapeAvailable())?this.m_seriesChartType:this.m_chartTypeNames),e=0,s=this.m_seriesData.length;e<s;e++)this.m_shapeSeries[e]=new ShapeSeries,this.m_shapeSeries[e].init(this.getPlotHexColor()[e],this.m_calculation.getXPixelArray()[e],this.m_calculation.getYPixelArray()[e],i[e],this.m_calculation.getPlotRadius()[e],this.m_seriesOpacity[e],this,this.m_lineWidthArray[e])}this.initializeToolTipProperty(),this.m_tooltip.init(this),IsBoolean(this.m_isEmptySeries)||this.initializeDataLabel(),this.initMouseClickEventForSVG(this.svgContainerId)},ScatteredPlotChart.prototype.getRanges=function(){this.m_range=this.m_ranges.split(",");for(var t=0;t<this.m_range.length;t++){var i=-1<this.m_range[t].indexOf("~")?"~":"-",i=this.m_range[t].split(i);this.m_range1[t]=i[0],this.m_range2[t]=i[1]}Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)},this.m_minRangeValue=[this.m_range1.min(),this.m_range2.min()].min(),this.m_maxRangeValue=[this.m_range1.max(),this.m_range2.max()].max()},ScatteredPlotChart.prototype.initializeChartUIProperties=function(){this.m_heatWidth=this.getEndX()-this.m_startX,this.initializeColor(),this.createColorRange(),this.setPlotHexColor(),this.setConditionalColor(),this.setOpacity()},ScatteredPlotChart.prototype.initializeColor=function(){var t=this.m_colors.split(",");if(IsBoolean(this.m_showdynamicrange))this.m_color[0]=this.m_minrangecolor,this.m_color[1]=this.m_maxrangecolor;else for(var i=0;i<this.m_range.length;i++)null!=t[i]?this.m_color[i]=convertColorToHex(t[i]):this.m_color[i]=this.m_color[i-1]},ScatteredPlotChart.prototype.setMinMaxValueFromSeriesData=function(){for(var t=!(this.serMaxVal=this.serMinVal=0),i=0,e=this.m_plotColorData.length;i<e;i++)for(var s=0,a=this.m_plotColorData[i].length;s<a;s++)this.m_plotColorData[i][s]=getNumericComparableValue(this.m_plotColorData[i][s]),isNaN(this.m_plotColorData[i][s])||null==this.m_plotColorData[i][s]||isNaN(+this.m_plotColorData[i][s])||null==this.m_plotColorData[i][s]||""===this.m_plotColorData[i][s]||(t&&(this.serMaxVal=this.serMinVal=+this.m_plotColorData[i][s],t=!1),+this.serMaxVal<=+this.m_plotColorData[i][s]&&(this.serMaxVal=+this.m_plotColorData[i][s]),+this.serMinVal>=+this.m_plotColorData[i][s]&&(this.serMinVal=+this.m_plotColorData[i][s]))},ScatteredPlotChart.prototype.createColorRange=function(){var t=this.m_heatWidth,i=(this.m_minRange=IsBoolean(this.m_showdynamicrange)?this.serMinVal:[this.m_range1.min(),this.m_range2.min()].min(),this.m_maxRange=IsBoolean(this.m_showdynamicrange)?this.serMaxVal:[this.m_range1.max(),this.m_range2.max()].max(),this.ctx.createLinearGradient(0,0,t,0));if(IsBoolean(this.m_showdynamicrange)){var e=[];e[0]=this.m_minrangecolor,e[1]=this.m_maxrangecolor;for(var s=0;s<e.length;s++){var a=0==s?0:s==e.length-1?1:s/(e.length-1);i.addColorStop(a,e[s])}}else if(1<this.m_range.length)for(var r=this.m_maxRange-this.m_minRange,s=0;s<this.m_range.length;s++)0==s?i.addColorStop(0,this.m_color[s]):s==this.m_range.length-1?i.addColorStop(1,this.m_color[s]):(a=(this.m_range1[s]-this.m_minRange)/r,isNaN(a)||i.addColorStop(a,this.m_color[s]));else IsBoolean(this.m_highervaluesaregood)?(i.addColorStop(0,"#FFFFFF"),i.addColorStop(1,this.m_color[0])):(i.addColorStop(0,this.m_color[0]),i.addColorStop(1,"#FFFFFF"));this.ctx.beginPath(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,t,+this.m_height),this.ctx.fill(),this.ctx.closePath()},ScatteredPlotChart.prototype.setPlotHexColor=function(){this.m_plotHexColor=[];for(var t=0,i=this.m_seriesData.length;t<i;t++){this.m_plotHexColor[t]=[];for(var e,s=0,a=this.m_seriesData[t].length;s<a;s++)if(null==this.m_plotColorData[t][s]||""===this.m_plotColorData[t][s]||null==this.m_plotColorData[t][s]||isNaN(this.m_plotColorData[t][s]))this.m_plotHexColor[t][s]=this.m_defaultfillcolor;else if(IsBoolean(this.m_showdynamicrange)||!IsBoolean(this.m_solidcolorfill)||""==this.plotColorArr[t])""==this.plotColorArr[t]?this.m_plotHexColor[t][s]=this.colorArr[t]:+this.m_plotColorData[t][s]<this.m_minRange||+this.m_plotColorData[t][s]>this.m_maxRange?this.m_plotHexColor[t][s]=this.m_defaultfillcolor:(r=(this.m_plotColorData[t][s]-this.m_minRange)/(this.m_maxRange-this.m_minRange)*this.m_heatWidth*this.getDevicePixelRatio(),+this.m_plotColorData[t][s]<this.m_minRange?r=.01:+this.m_plotColorData[t][s]>=this.m_maxRange&&(r=this.m_heatWidth*this.getDevicePixelRatio()-this.m_adjustpixel),e="rgb("+(e=this.ctx.getImageData(0|r,this.m_height/2,1,1).data)[0]+","+e[1]+","+e[2]+")",this.m_plotHexColor[t][s]=rgb2hex(e));else for(var r=+this.m_plotColorData[t][s],o=0;o<this.m_range.length;o++)if((0==o&&r<this.m_range1[o]||o==this.m_range.length-1&&r>=this.m_range2[o])&&(this.m_plotHexColor[t][s]=this.m_defaultfillcolor),r>=this.m_range1[o]&&r<this.m_range2[o]){this.m_plotHexColor[t][s]=this.m_color[o];break}}},ScatteredPlotChart.prototype.getPlotHexColor=function(){return this.m_plotHexColor},ScatteredPlotChart.prototype.getRangeColorForData=function(t){for(var i=0;i<this.m_range.length;i++)if(+this.m_range1[i]<=+t&&+t<+this.m_range2[i])return this.m_color[i];return+t<+this.m_range1[0]?this.m_color[i]:+t>=+this.m_range1[this.m_range.length-1]?this.m_color[this.m_range.length-1]:"#FFFFFF"},ScatteredPlotChart.prototype.updateSeriesData=function(){this.m_displaySeriesDataFlag=[];for(var t=0,i=this.m_seriesData.length;t<i;t++){this.m_displaySeriesDataFlag[t]=[];for(var e=0,s=this.m_categoryData[t].length;e<s;e++)this.m_displaySeriesDataFlag[t][e]=!0,isNaN(this.m_seriesData[t][e])&&(this.m_displaySeriesDataFlag[t][e]=!1,this.m_seriesData[t][e]=getNumericComparableValue(this.m_seriesData[t][e]))}},ScatteredPlotChart.prototype.updateCategoryData=function(){this.m_displayCategoryDataFlag=[];for(var t=0,i=this.m_categoryData.length;t<i;t++){this.m_displayCategoryDataFlag[t]=[];for(var e=0,s=this.m_categoryData[t].length;e<s;e++)this.m_displayCategoryDataFlag[t][e]=!0,isNaN(this.m_categoryData[t][e])&&(this.m_displayCategoryDataFlag[t][e]=!1,this.m_categoryData[t][e]=getNumericComparableValue(this.m_categoryData[t][e]))}},ScatteredPlotChart.prototype.isShapeAvailable=function(){for(var t=!0,i=0,e=this.m_seriesChartType.length;i<e;i++)null!=this.m_seriesChartType[i]&&"undefined"!=this.m_seriesChartType[i]||(t=!1);return t},ScatteredPlotChart.prototype.isEmptyCategory=function(){return""==this.getCategoryNames()||0==this.m_categoryData.length},ScatteredPlotChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.drawResetButton(),this.drawLegends();var t=this.IsDrawingPossible();IsBoolean(this.m_isEmptySeries)||IsBoolean(this.isEmptyCategory())?this.drawSVGMessage(t.message):(this.drawXAxis(),this.drawYAxis(),this.drawScatteredPlotChart(),this.drawDataLabel(),this.drawThreshold(),this.drawBestFitLine())},ScatteredPlotChart.prototype.IsDrawingPossible=function(){var t={};return IsBoolean(this.isEmptyCategory)?t={permission:"false",message:this.m_status.noData}:IsBoolean(this.m_isEmptySeries)?IsBoolean(0<this.m_allSeriesDisplayNames.length)?IsBoolean(this.isVisibleSeries())?IsBoolean(this.m_isEmptySeries)&&(t={permission:"false",message:this.m_status.noData}):t={permission:"false",message:this.m_status.noSeries}:t={permission:"false",message:this.m_status.noData}:t=IsBoolean(this.isVisibleSeries())?{permission:"true",message:this.m_status.success}:{permission:"false",message:this.m_status.noSeries},t},ScatteredPlotChart.prototype.drawBestFitLine=function(){if(!IsBoolean(this.m_designMode))for(var t=0;t<this.m_categoryData.length&&!(this.m_categoryData[t].length<2);t++)if(IsBoolean(this.m_bestfitline[t])&&IsBoolean(this.m_showSeries[t])){for(var i,e,s=this.m_categoryData[t],a=this.m_seriesData[t],r=0,o=0,h=0,n=0,m=0,l=this.m_categoryData[t].length,c=0;c<l;c++)h+=Math.pow(s[c],2),n+=s[c]*a[c],r+=+s[c],o+=+a[c],m+=Math.pow(a[c],2);e=(o-(i=(l*n-r*o)/(l*h-Math.pow(r,2)))*r)/l,this.correlation=(l*n-r*o)/(Math.sqrt(l*h-Math.pow(r,2))*Math.sqrt(l*m-Math.pow(o,2)));for(var _=+this.m_xAxis.m_xAxisActualMarkersArray[0],d=+this.m_xAxis.m_xAxisActualMarkersArray[this.m_xAxis.m_xAxisActualMarkersArray.length-1],u=1/(d-_)*(+this.m_endX-+this.m_startX),p=+this.m_yAxis.m_yAxisMarkersArray[0],x=+this.m_yAxis.m_yAxisMarkersArray[this.m_yAxis.m_yAxisMarkersArray.length-1],y=1/(x-p)*(+this.m_startY-+this.m_endY),g=[],A=0;A<l;A++)g[A]=i*s[A]+e;var f,b,S,C,u=this.bestFitLineCalculation(s,a,g,u,y,_,d,p,x,e,i),y="",_="",x=(d=i<0?(f=u[0],b=u[3],S=u[2],u[1]):(f=u[0],b=u[1],S=u[2],u[3]),""==f||""==b||""==S||""==d||null==(y=_+="M"+f+","+b+"L"+S+","+d)&&!y||(p=this.m_shapeSeries[t].common[0].getLineDashArray(this.m_bestfitlinetype[t],this.m_bestfitlinewidth[t]),(C=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",y),C.setAttribute("stroke-dasharray",p),C.setAttribute("style","stroke:"+this.m_bestfitlinecolor[t]+"; stroke-width:"+this.m_bestfitlinewidth[t]+";fill:"+hex2rgb(this.m_bestfitlinecolor[t],"0.7")+";"),$("#"+this.svgContainerId).append(C)),!!document.documentMode);IsBoolean(this.m_enableanimation)&&!x&&this.m_shapeSeries[t].common[0].setLineAnimation(C)}},ScatteredPlotChart.prototype.bestFitLineCalculation=function(t,i,e,s,a,r,o,h,n,m,l){var c,_,d,u,p=[];return _=h<0&&n<0||h<0&&0<n||0<h?(c=this.m_startY-e.min()*a+h*a,this.m_startY-e.max()*a+h*a):(c=this.m_startY-e.min()*a,this.m_startY-e.max()*a),u=r<0&&o<0||r<0&&0<o||0<r?(d=this.m_startX+t.min()*s-r*s,this.m_startX+t.max()*s-r*s):(d=this.m_startX+t.min()*s,this.m_startX+t.max()*s),c>this.m_startY&&e.min()<0&&0<l&&(c=this.m_startY,d=(h-m)/l*s+this.m_startX),c>this.m_startY&&e.min()&&l<0&&(c=this.m_startY),_<this.m_endY&&(_=this.m_endY,u=(n-m)/l*s+this.m_startX),d<this.m_startX&&t.min()<0&&(d=this.m_startX,c=(l*r+m)*a+this.m_startY),u>this.m_endX&&(u=this.m_endX,_=(l*o+m)*a+this.m_startY),p.push(d),p.push(c),p.push(u),p.push(_),p},ScatteredPlotChart.prototype.drawLegends=function(){this.drawChartLegends()},ScatteredPlotChart.prototype.getLegendTableContent=function(){for(var t="",i=IsBoolean(this.m_showcolorbandlegends)?IsBoolean(this.m_showdynamicrange)?["Min","Max"]:this.m_displayname.split(","):this.getLegendNames(),e=IsBoolean(this.m_showcolorbandlegends)?IsBoolean(this.m_showdynamicrange)?[this.m_minrangecolor,this.m_maxrangecolor]:this.m_color:this.getSeriesColors(),s=0;s<i.length;s++){var a=(IsBoolean(this.m_showcolorbandlegends)?this.m_rangeshapes:this.m_seriesChartType)[s],a=this.getHTMLShape(a);t+='<tr style="font-style:'+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'"><td>'+this.drawLegendShape(a,e[s])+'<span style="display:inline;">'+i[s]+"</span></td></tr>"}return t},ScatteredPlotChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},ScatteredPlotChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.createSVG(),$("#draggableCanvas"+this.m_objectid).hide(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEventForSVG(this.svgContainerId)},ScatteredPlotChart.prototype.createSVG=function(){var a,r,o,h,n=this,t=(this.svgContainerId="svgContainer"+n.m_objectid,$("#"+n.svgContainerId).remove(),document.createElementNS("http://www.w3.org/2000/svg","svg"));t.setAttribute("xlink","http://www.w3.org/1999/xlink"),t.setAttribute("width",this.m_width),t.setAttribute("height",this.m_height),t.setAttribute("id",this.svgContainerId),$(t).css({width:this.m_width,height:this.m_height}),$("#draggableDiv"+n.m_objectid).append(t),!IsBoolean(this.m_designMode)&&IsBoolean(this.m_enablezoom)&&$(t).selectable({autoRefresh:!1,distance:1,start:function(t){var i=$(this).position().left,e=$(this).position().top;a=t.pageX-i,r=t.pageY-e},stop:function(t){var i=$(this).offset().left,e=$(this).offset().top,i=(o=t.pageX-i,h=t.pageY-e,o<a?o:a),t=h<r?h:r,e=o<a?a:o,s=h<r?r:h;0==n.m_scatterdragFlag&&(n.originaldataProvider=n.m_dataProvider),n.dragAndZoom(i,t,e,s),n.drawResetButton()}})},ScatteredPlotChart.prototype.dragAndZoom=function(t,i,e,s){this.m_scatterdragFlag=!0;for(var a=0,r=this.m_seriesNames.length;a<r&&!IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[a]]);a++);this.origonalXposition=this.m_calculation.getXPixelArray(this.m_seriesNames[a]),this.origonalYposition=this.m_calculation.getYPixelArray(this.m_seriesNames[a]);for(var o=!0,h=[],n=[],m=[],l=[],c=[],_=0,d=this.m_seriesData.length;_<d;_++)n[_]=[],h[_]=[],m[_]=[],l[_]=[],_,this.m_seriesNames[_],this.m_seriesNames[_],[];for(var u=0;u<this.origonalXposition.length;u++)for(var p=0,x=this.origonalXposition[u].length;p<x;p++)t<+this.origonalXposition[u][p]&&e>+this.origonalXposition[u][p]&&i<+this.origonalYposition[u][p]&&s>+this.origonalYposition[u][p]&&(n[u].push(this.m_seriesData[u][p]),h[u].push(this.m_categoryData[u][p]),m[u].push(this.m_calculation.m_xPixelArray[u][p]),l[u].push(this.m_calculation.m_yPixelArray[u][p]),c.push(this.m_dataProvider[p]));for(_=0;_<n.length;_++)if(0!=n[_].length){o=!1;break}this.m_isEmptySeries=o,this.m_categoryData=h,this.m_seriesData=n,this.m_xPixelArray=m,this.m_yPixelArray=l,this.m_dataProvider=c,this.init(),this.drawChart()},ScatteredPlotChart.prototype.drawTitle=function(){this.m_title.draw()},ScatteredPlotChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},ScatteredPlotChart.prototype.drawResetButton=function(){var t,i,e,r,o,h=this;$("#reseticon").remove(),IsBoolean(this.m_scatterdragFlag)&&(e=IsBoolean(this.m_showmaximizebutton)||IsBoolean(this.m_showlegends)&&IsBoolean(this.m_fixedlegend)?IsBoolean(this.m_showsettingmenubutton)?this.m_width-this.fontScaling(25)-60:this.m_width-this.fontScaling(25)-30:IsBoolean(this.m_showsettingmenubutton)?this.m_width-this.fontScaling(25)-30:this.m_width-this.fontScaling(25),t=this.m_title.startY-this.fontScaling(10),i=this.fontScaling(16),(e=this.drawFontIcons("reseticon","",e,t,"bd-refresh",i)).setAttribute("id","reseticon"),$(e).on("click",function(){$("#resetTooltipDiv").remove(),h.m_scatterdragFlag=!1,h.m_dataProvider=h.originaldataProvider,h.init(),h.drawChart(),$("#reseticon").remove()}),r=selectGlobalFont(this.m_title.m_fontfamily),IsBoolean(this.m_showmaximizebutton)||IsBoolean(this.m_showlegends)&&IsBoolean(this.m_fixedlegend)?this.fontScaling(50):this.fontScaling(30),o=IsBoolean(this.m_showmaximizebutton)||IsBoolean(this.m_showlegends)&&IsBoolean(this.m_fixedlegend)?"settingIcon":"minMax",this.m_title.startY,IsBoolean(isTouchEnabled)||h.m_designMode||$("#reseticon").hover(function(t){var i=document.getElementById("draggablesParentDiv"+h.m_dashboard.m_id),e=(i.scrollLeft,i.scrollTop,$(i).offset()),s=e.top+$(i)[0].clientTop-$(i)[0].scrollTop,e=e.left+$(i)[0].clientLeft-$(i)[0].scrollLeft,i=t.pageY-t.offsetY+$(this)[0].offsetHeight-s+1+"px",s=t.pageX-t.offsetX+$(this)[0].offsetWidth/2-e+8+"px",a=document.createElement("div"),i=(a.innerHTML="Reset",a.setAttribute("class",o),a.setAttribute("placement","bottom"),a.setAttribute("id","resetTooltipDiv"),$(a).css({"font-family":r,"font-size":"12px",top:i,left:s,"z-index":1e4,border:"1px solid #e0dfdf",padding:"24px",position:"absolute","border-radius":"6px","background-color":"#ffffff"}),$("#draggablesParentDiv"+h.m_dashboard.m_id).append(a),t.pageX-t.offsetX+$(this)[0].offsetWidth-a.offsetWidth-e+28+"px");$(a).css({left:i})},function(){$("#resetTooltipDiv").remove()}))},ScatteredPlotChart.prototype.drawXAxis=function(){this.createTickGroup("xaxistickgrp"),this.m_xAxis.drawTickMarksForScatterPlotChart(),IsBoolean(this.m_showverticalmarkerline)&&(this.createVerticalLineGroup("verticallinegrp"),this.m_xAxis.drawVerticalLineForScatterPlotChart()),this.m_xAxis.markXaxis(),this.m_xAxis.drawXAxis()},ScatteredPlotChart.prototype.drawYAxis=function(){IsBoolean(this.m_showmarkerline)&&(this.createHorizontalLineGroup("horizontallinegrp"),this.m_yAxis.horizontalMarkerLines()),IsBoolean(this.m_zeromarkerline)&&!IsBoolean(this.m_basezero)&&IsBoolean(this.m_yAxis.hasNegativeAxisMarker(this.m_yAxis.m_yAxisMarkersArray))&&this.m_yAxis.zeroMarkerLine(),IsBoolean(this.m_verticalzeromarkerline)&&!IsBoolean(this.m_horizontalaxisbasezero)&&IsBoolean(this.m_yAxis.hasNegativeAxisMarker(this.m_xAxis.m_xAxisActualMarkersArray))&&this.m_xAxis.zeroMarkerVerticalLineForScatterPlotChart(),this.createYAxisMarkerLabelGroup("yaxislabelgrp"),this.m_yAxis.markYaxis(),this.m_yAxis.drawYAxis()},ScatteredPlotChart.prototype.drawObject=function(){this.drawSVGObject()},ScatteredPlotChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawSVGFrame(),this.getBGGradientColorToContainer()},ScatteredPlotChart.prototype.getBGGradientColorToContainer=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","defs");t.setAttribute("id","defsElement"+this.m_objectid),$("#"+this.svgContainerId).append(t)},ScatteredPlotChart.prototype.drawScatteredPlotChart=function(){for(var t=0,i=this.getCategoryData().length;t<i;t++)if(IsBoolean(this.m_showSeries[t])){switch(this.m_shapeSeries[t].shape){case"cross":this.createShapeGroup("crossgrp",t,this.m_seriesNames[t]);break;case"cube":this.createShapeGroup("cubegrp",t,this.m_seriesNames[t]);break;case"line":this.createShapeGroup("bubblegrp",t,this.m_seriesNames[t]);break;case"plus":this.createShapeGroup("plusgrp",t,this.m_seriesNames[t]);break;case"polygon":this.createShapeGroup("polygongrp",t,this.m_seriesNames[t]);break;case"point":this.createShapeGroup("bubblegrp",t,this.m_seriesNames[t]);break;case"quad":this.createShapeGroup("quadgrp",t,this.m_seriesNames[t]);break;case"star":this.createShapeGroup("stargrp",t,this.m_seriesNames[t]);break;case"triangle":this.createShapeGroup("trianglegrp",t,this.m_seriesNames[t]);break;default:this.createShapeGroup("bubblegrp",t,this.m_seriesNames[t])}this.m_shapeSeries[t].drawShapeSeries(t)}},ScatteredPlotChart.prototype.drawDataLabel=function(){for(var t=0,i=this.m_seriesNames.length;t<i;t++){var e=this.m_valueTextSeries[this.m_seriesNames[t]];IsBoolean(this.m_seriesDataLabelProperty[t].showDataLabel)&&(this.createDataLabelGroup(e,"datalabelgrp",t,this.m_seriesNames[t]),e.drawValueTextSeriesPlot())}},ValueTextSeries.prototype.drawValueTextSeriesPlot=function(){for(var t=0;t<this.xPositionArray.length;t++){var i=this.valueText[t];null!==i.xPosition&&""!==i.xPosition&&null!=i.yPosition&&""!==i.yPosition&&i.yPosition<=i.m_chart.getStartY()&&i.yPosition>=i.m_chart.getEndY()&&i.xPosition>=i.m_chart.getStartX()&&i.xPosition<=i.m_chart.getEndX()&&+i.yPosition<=i.m_chart.getStartY()&&+i.yPosition>=i.m_chart.getEndY()&&(!IsBoolean(this.valueText[t].datalabelProperties.hideDataLabel)||this.valueText[t].m_ySeriesActualData.toString()!==this.valueText[t].datalabelProperties.hideDataLabelText)&&this.valueText[t].drawValueText(t)}},ScatteredPlotChart.prototype.drawThreshold=function(){var t,i,e,s,a,r;IsBoolean(this.m_showxaxisthreshold)&&(i=t=.5,e=+getNumericComparableValue(this.m_xAxis.m_xAxisActualMarkersArray[0]),s=+getNumericComparableValue(this.m_xAxis.m_xAxisActualMarkersArray[this.m_xAxis.m_xAxisActualMarkersArray.length-1]),this.m_minimumxaxisthreshold=IsBoolean(this.m_minimumxaxisthresholdline)?this.m_minimumxaxisthreshold:this.m_xAxis.m_xAxisActualMarkersArray[0],a=1/(s-e)*(+this.m_endX-+this.m_startX),r={},IsBoolean(this.m_horizontalaxisautoadjust)&&IsBoolean(this.m_horizontalaxisbasezero)?(+this.m_minimumxaxisthreshold<+e&&+this.m_maximumxaxisthreshold>+s?(r.x1=+this.m_startX,r.y1=+this.m_startY,r.x2=+this.m_startX,r.y2=+this.m_endY,r.X1=+this.m_endX,r.Y1=+this.m_startY,r.X2=+this.m_endX):+this.m_minimumxaxisthreshold<+e?(r.x1=+this.m_startX,r.y1=+this.m_startY,r.x2=+this.m_startX,r.y2=+this.m_endY,r.X1=+this.m_startX+this.m_maximumxaxisthreshold*a,r.Y1=+this.m_startY,r.X2=+this.m_startX+this.m_maximumxaxisthreshold*a):+this.m_maximumxaxisthreshold>+s?(r.x1=+this.m_startX+this.m_minimumxaxisthreshold*a,r.y1=+this.m_startY,r.x2=+this.m_startX+this.m_minimumxaxisthreshold*a,r.y2=+this.m_endY,r.X1=+this.m_endX,r.Y1=+this.m_startY,r.X2=+this.m_endX):(r.x1=+this.m_startX+this.m_minimumxaxisthreshold*a,r.y1=+this.m_startY,r.x2=+this.m_startX+this.m_minimumxaxisthreshold*a,r.y2=+this.m_endY,r.X1=+this.m_startX+this.m_maximumxaxisthreshold*a,r.Y1=+this.m_startY,r.X2=+this.m_startX+this.m_maximumxaxisthreshold*a),r.Y2=+this.m_endY):r=this.thresholdXAxisCalculation(e,s,a),hex2rgb(this.m_markercolor,this.m_markertransparency),IsBoolean(this.m_minimumxaxisthresholdline)&&this.drawLineBetweenPoints(this.m_xaxisthresholdlinewidth,i,this.m_xaxisthresholdstrokecolor,r.x1,r.y1,r.x2,r.y2),this.drawLineBetweenPoints(this.m_xaxisthresholdlinewidth,i,this.m_xaxisthresholdstrokecolor,r.X1,r.Y1,r.X2,r.Y2),this.fillColorBetweenPoints(t,i,"#ffffff",r.x1,r.y2,r.X2-r.x1,r.Y1-r.Y2)),IsBoolean(this.m_showyaxisthreshold)&&(i=t=.5,e=+this.m_yAxis.m_yAxisMarkersArray[0],a=1/((s=+this.m_yAxis.m_yAxisMarkersArray[this.m_yAxis.m_yAxisMarkersArray.length-1])-e)*(+this.m_startY-+this.m_endY),this.m_minimumyaxisthreshold=IsBoolean(this.m_minimumyaxisthresholdline)?this.m_minimumyaxisthreshold:this.m_yAxis.m_yAxisMarkersArray[0],r={},IsBoolean(this.m_autoaxissetup)&&IsBoolean(this.m_basezero)?+this.m_minimumyaxisthreshold<+e&&+this.m_maximumyaxisthreshold>+s?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY,r.x2=+this.m_endX,r.y2=+this.m_startY,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_endY,r.X2=+this.m_endX,r.Y2=+this.m_endY):+this.m_minimumyaxisthreshold<+e?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY,r.x2=+this.m_endX,r.y2=+this.m_startY,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY-this.m_maximumyaxisthreshold*a,r.X2=+this.m_endX,r.Y2=+this.m_startY-this.m_maximumyaxisthreshold*a):+this.m_maximumyaxisthreshold>+s?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY-this.m_minimumyaxisthreshold*a,r.x2=+this.m_endX,r.y2=+this.m_startY-this.m_minimumyaxisthreshold*a,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_endY,r.X2=+this.m_endX,r.Y2=+this.m_endY):(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY-this.m_minimumyaxisthreshold*a,r.x2=+this.m_endX,r.y2=+this.m_startY-this.m_minimumyaxisthreshold*a,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY-this.m_maximumyaxisthreshold*a,r.X2=+this.m_endX,r.Y2=+this.m_startY-this.m_maximumyaxisthreshold*a):r=this.thresholdYAxisCalculation(e,s,a),hex2rgb(this.m_markercolor,this.m_markertransparency),IsBoolean(this.m_minimumyaxisthresholdline)&&this.drawLineBetweenPoints(this.m_yaxisthresholdlinewidth,i,this.m_yaxisthresholdstrokecolor,r.x1,r.y1,r.x2,r.y2),this.drawLineBetweenPoints(this.m_yaxisthresholdlinewidth,i,this.m_yaxisthresholdstrokecolor,r.X1,r.Y1,r.X2,r.Y2),this.fillColorBetweenPoints(t,i,"#000000",r.x1,r.Y1,r.X2-r.x1,r.y2-r.Y2))},ScatteredPlotChart.prototype.thresholdYAxisCalculation=function(t,i,e){var s={};return!(t<0)&&i<0||(+this.m_minimumyaxisthreshold<+t&&+this.m_maximumyaxisthreshold>+i?(s.x1=+this.m_startX-this.m_axistodrawingareamargin,s.y1=+this.m_startY,s.x2=+this.m_endX,s.y2=+this.m_startY,s.X1=+this.m_startX-this.m_axistodrawingareamargin,s.Y1=+this.m_endY,s.X2=+this.m_endX,s.Y2=+this.m_endY):+this.m_minimumyaxisthreshold<+t?(s.x1=+this.m_startX-this.m_axistodrawingareamargin,s.y1=+this.m_startY,s.x2=+this.m_endX,s.y2=+this.m_startY,s.X1=+this.m_startX-this.m_axistodrawingareamargin,s.Y1=+this.m_startY-this.m_maximumyaxisthreshold*e+t*e,s.X2=+this.m_endX,s.Y2=+this.m_startY-this.m_maximumyaxisthreshold*e+t*e):+this.m_maximumyaxisthreshold>+i?(s.x1=+this.m_startX-this.m_axistodrawingareamargin,s.y1=+this.m_startY-this.m_minimumyaxisthreshold*e+t*e,s.x2=+this.m_endX,s.y2=+this.m_startY-this.m_minimumyaxisthreshold*e+t*e,s.X1=+this.m_startX-this.m_axistodrawingareamargin,s.Y1=+this.m_endY,s.X2=+this.m_endX,s.Y2=+this.m_endY):(s.x1=+this.m_startX-this.m_axistodrawingareamargin,s.y1=+this.m_startY-this.m_minimumyaxisthreshold*e+t*e,s.x2=+this.m_endX,s.y2=+this.m_startY-this.m_minimumyaxisthreshold*e+t*e,s.X1=+this.m_startX-this.m_axistodrawingareamargin,s.Y1=+this.m_startY-this.m_maximumyaxisthreshold*e+t*e,s.X2=+this.m_endX,s.Y2=+this.m_startY-this.m_maximumyaxisthreshold*e+t*e)),s},ScatteredPlotChart.prototype.thresholdXAxisCalculation=function(t,i,e){var s={};return!(t<0)&&i<0||(+this.m_minimumxaxisthreshold<+t&&+this.m_maximumxaxisthreshold>+i?(s.x1=+this.m_startX,s.y1=+this.m_startY,s.x2=+this.m_startX,s.y2=+this.m_endY,s.X1=+this.m_endX,s.Y1=+this.m_startY,s.X2=+this.m_endX):+this.m_minimumxaxisthreshold<+t?(s.x1=+this.m_startX,s.y1=+this.m_startY,s.x2=+this.m_startX,s.y2=+this.m_endY,s.X1=+this.m_startX+this.m_maximumxaxisthreshold*e-t*e,s.Y1=+this.m_startY,s.X2=+this.m_startX+this.m_maximumxaxisthreshold*e-t*e):+this.m_maximumxaxisthreshold>+i?(s.x1=+this.m_startX+this.m_minimumxaxisthreshold*e-t*e,s.y1=+this.m_startY,s.x2=+this.m_startX+this.m_minimumxaxisthreshold*e-t*e,s.y2=+this.m_endY,s.X1=+this.m_endX,s.Y1=+this.m_startY,s.X2=+this.m_endX):(s.x1=+this.m_startX+this.m_minimumxaxisthreshold*e-t*e,s.y1=+this.m_startY,s.x2=+this.m_startX+this.m_minimumxaxisthreshold*e-t*e,s.y2=+this.m_endY,s.X1=+this.m_startX+this.m_maximumxaxisthreshold*e-t*e,s.Y1=+this.m_startY,s.X2=+this.m_startX+this.m_maximumxaxisthreshold*e-t*e),s.Y2=+this.m_endY),s},ScatteredPlotChart.prototype.fillColorBetweenPoints=function(t,i,e,s,a,r,o){var h;IsBoolean(this.m_enablethresholdfill)&&(h=hex2rgb(this.m_thresholdfillcolor,this.m_thresholdfillopacity),s=drawSVGRect(s,a,r,o,h),$("#"+this.svgContainerId).append(s))},ScatteredPlotChart.prototype.drawLineBetweenPoints=function(t,i,e,s,a,r,o){s=drawSVGLine(s,a,r,o,t,e),a=this.getLineDashArray(this.m_thresholdlinetype,t);s.setAttribute("stroke-dasharray",a),s.setAttribute("shape-rendering",""),$("#"+this.svgContainerId).append(s)},ScatteredPlotChart.prototype.getLineDashArray=function(t,i){return"dot"===t?[+i,2*i+1,0,0]:"dash1"===t?[+i,+i,4*i,+i]:"dash"===t?[2*i,2*i+1,0,0]:[]},ScatteredPlotChart.prototype.IsThresholdFlag=function(t){return+this.m_minimumxaxisthreshold==+t||+this.m_maximumxaxisthreshold==+t},ScatteredPlotChart.prototype.setStartX=function(){this.yaxisLabelFont=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),this.yaxisDescriptionFont=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily);var t=this.getBorderToDescriptionMargin(),i=this.getYAxisDescriptionMargin(),e=this.getDescriptionToLabelMargin(),s=this.getLabelToAxisMargin(),a=(this.setMaxMinSeriesValue(),this.getYAxisLabelMargin());this.m_startX=+this.m_x+ +t+ +i+ +e+ +a+ +s},ScatteredPlotChart.prototype.getMinimumSeriesValue=function(){return this.m_minimumseriesvalue},ScatteredPlotChart.prototype.getMaximumSeriesValue=function(){return this.m_maximumSeriesValue},ScatteredPlotChart.prototype.setMaxMinSeriesValue=function(){this.m_maximumSeriesValue=0;for(var t=this.m_minimumseriesvalue=0,i=this.m_seriesData.length;t<i;t++)for(var e=0,s=this.m_seriesData[t].length;e<s;e++){var a=this.m_seriesData[t][e],a=isNaN(a)||null==a||""==a?0:a;0==t&&0==e&&(this.m_maximumSeriesValue=a,this.m_minimumseriesvalue=a),+this.m_maximumSeriesValue<=+a&&(this.m_maximumSeriesValue=a),+this.m_minimumseriesvalue>+a&&(this.m_minimumseriesvalue=a)}},ScatteredPlotChart.prototype.getYAxisLabelMargin=function(){var t=this.getLabelFormatterMargin();return this.setLabelWidth(),+t+ +this.getLabelWidth()+ +this.getLabelSignMargin()+ +this.getLabelPrecisionMargin()+ +this.getLabelSecondFormatterMargin()},ScatteredPlotChart.prototype.getLabelSecondFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(t="auto"!=this.getSecondaryUnit()?this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()):"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?getNumberFormattedSymbol(+this.m_calculation.serMax,this.m_unit):"K",this.ctx.font=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily),i=this.ctx.measureText(t).width),i},ScatteredPlotChart.prototype.getLabelFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.m_formater&&""!=this.m_formater&&"none"!=this.m_unit&&""!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(t).width,this.ctx.closePath()),i},ScatteredPlotChart.prototype.getLabelWidth=function(){return this.m_labelwidth},ScatteredPlotChart.prototype.setLabelWidth=function(){var t=[];if((this.m_labelwidth=0)<this.fontScaling(this.m_yAxis.m_labelfontsize)){for(var i=0,e=this.m_calculation.m_yAxisMarkersArray.length;i<e;i++){var s,a=this.m_calculation.m_yAxisMarkersArray[i];IsBoolean(this.m_fixedlabel)||(IsBoolean(this.m_yAxis.getLeftaxisFormater())&&("none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(s=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?a=getNumberFormattedNumericValue(+a,this.m_precision,this.m_unit):"auto"==this.getSecondaryUnit()?a=getNumberFormattedNumericValue(+a):"none"!==this.getSecondaryUnit()&&(a=this.m_util.updateTextWithFormatter(a,s,this.m_precision))),0!==a)&&"default"!==this.m_precision&&(a=this.m_yAxis.setPrecision(a,this.m_precision)),a=getFormattedNumberWithCommas(a,this.m_numberformatter),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t[i]=this.ctx.measureText(a).width,this.ctx.closePath())}this.m_labelwidth=getMaxValueFromArray(t)}},ScatteredPlotChart.prototype.getLabelSignMargin=function(){var t=0,i=0,e=this.getMinimumSeriesValue();return e<0&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(e).width,this.ctx.closePath()),t=this.getLabelWidth()<i?this.ctx.measureText("-").width:t},ScatteredPlotChart.prototype.getLabelPrecisionMargin=function(){var t=0;return"auto"==this.getSecondaryUnit()&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t=this.ctx.measureText(".0").width,this.ctx.closePath()),t},ScatteredPlotChart.prototype.setStartY=function(){var t=this.getChartMargin(),i=this.getXAxisDescriptionMargin(),e=(this.setMaxMinCategoryValue(),this.setLabelWidthForSecondAxis(),this.getLabelWidthForSecondAxis()),e=(this.getLabelSecondarySecondFormatterMargin(),this.getSecondaryLabelPrecisionMargin(),this.m_extraspace=+e,+t+ +i+this.m_extraspace);this.m_startY=+this.m_y+ +this.m_height-+e},ScatteredPlotChart.prototype.getMinimumCategoryValue=function(){return this.m_minimumCategoryvalue},ScatteredPlotChart.prototype.getMaximumCategoryValue=function(){return this.m_maximumCategoryValue},ScatteredPlotChart.prototype.setMaxMinCategoryValue=function(){this.m_maximumCategoryValue=0;for(var t=this.m_minimumCategoryvalue=0,i=this.m_categoryData.length;t<i;t++)for(var e=0,s=this.m_categoryData[t].length;e<s;e++){var a=this.m_categoryData[t][e],a=isNaN(a)||null==a||""==a?0:a;0==t&&0==e&&(this.m_maximumCategoryValue=a,this.m_minimumCategoryvalue=a),+this.m_maximumCategoryValue<=+a&&(this.m_maximumCategoryValue=a),+this.m_minimumseriesvalue>+a&&(this.m_minimumseriesvalue=a)}},ScatteredPlotChart.prototype.getXAxisLabelMargin=function(){var t=15;if(IsBoolean(this.m_xAxis.getLabelTilted())){this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();for(var t=this.ctx.measureText(this.getCategoryData()[0][0]).width,i=1,e=this.getCategoryData().length;i<e;i++)t<this.ctx.measureText(this.getCategoryData()[0][i]).width&&(t=this.ctx.measureText(this.getCategoryData()[0][i]).width);t>this.m_height/4&&(t=this.m_xAxis.getLabelrotation()<=70?this.m_height/4-15:this.m_height/4)}this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();var s=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize);return this.noOfRows=this.setNoOfRows(),t=s*this.noOfRows},ScatteredPlotChart.prototype.getLabelWidthForSecondAxis=function(){return this.m_labelwidthsecondaxis},ScatteredPlotChart.prototype.setLabelWidthForSecondAxis=function(){this.m_labelwidthsecondaxis=0;var t=this.m_xAxis.m_labelrotation*(Math.PI/180);if(IsBoolean(this.m_xAxis.getLabelTilted())){for(var i=[],e=0,s=this.m_calculation.m_xAxisMarkersArray.length;e<s;e++){i[e]=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize);var a=this.m_calculation.m_xAxisMarkersArray[e],a=getFormattedNumberWithCommas(a,this.m_secondaryaxisnumberformatter),a=(this.ctx.beginPath(),this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily),Math.abs(this.ctx.measureText(a).width*t));i[e]<a&&(i[e]=a),this.ctx.closePath()}this.m_labelwidthsecondaxis=getMaxValueFromArray(i)}else{this.ctx.beginPath(),this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily);var r=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize);this.noOfRows=this.setNoOfRows(),this.m_labelwidthsecondaxis=r*this.noOfRows}},ScatteredPlotChart.prototype.getLabelSecondarySecondFormatterMargin=function(){var t,i=0;return"none"!=this.m_secondaryaxissecondaryformatter&&""!=this.m_secondaryaxissecondaryformatter&&"none"!=this.m_secondaryaxissecondaryunit&&""!=this.m_secondaryaxissecondaryunit&&(t="auto"!=this.m_secondaryaxissecondaryunit?this.m_util.getFormatterSymbol(this.m_secondaryaxissecondaryformatter,this.m_secondaryaxissecondaryunit):"auto"==this.m_secondaryaxissecondaryunit&&"Rupees"==this.m_secondaryaxisunit?getNumberFormattedSymbol(+this.m_calculation.catMax,this.m_secondaryaxisunit):"K",this.ctx.font=this.m_xAxis.m_fontstyle+" "+this.m_xAxis.m_fontweight+" "+this.fontScaling(this.m_xAxis.m_fontsize)+"px "+selectGlobalFont(this.m_xAxis.m_fontfamily),i=this.ctx.measureText(t).width),i},ScatteredPlotChart.prototype.getSecondaryLabelPrecisionMargin=function(){var t=0;if(IsBoolean(this.m_xAxis.getLabelTilted())){this.ctx.beginPath(),this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily);var i=".0",t=this.ctx.measureText(i).width;if(!IsBoolean(this.m_fixedlabel)&&IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.m_precision&&""!=this.m_secondaryaxisprecision&&0!=this.m_secondaryaxisprecision){for(var i=".0",e=0;e<this.m_secondaryaxisprecision;e++)i+="0";t=this.ctx.measureText(i).width}this.ctx.closePath()}return t},ScatteredPlotChart.prototype.setNoOfRows=function(){this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily);this.ctx.measureText(this.m_calculation.m_xAxisMarkersArray[0]).width;for(var t=(this.getEndX()-this.getStartX())/this.m_calculation.m_noOfXAxisMarkers,i=1,e=1;e<this.m_calculation.m_xAxisMarkersArray.length;e++)this.ctx.measureText(this.m_calculation.m_xAxisMarkersArray[e]).width>t&&(i=2);return i},ScatteredPlotChart.prototype.setEndX=function(){var t=this.getBorderToLegendMargin(),i=this.getVerticalLegendMargin(),e=this.getVerticalLegendToXAxisMargin();this.m_endX=+this.m_x+ +this.m_width-(+t+ +i+ +e)},ScatteredPlotChart.prototype.setEndY=function(){this.m_endY=+this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()+ +this.getRadiusMargin()},ScatteredPlotChart.prototype.getRadiusMargin=function(){for(var t=!1,i=0;i<this.plotRadiusArr.length;i++)this.plotRadiusArr[i]!=parseInt(this.plotRadiusArr[i],10)&&(t=!0);return IsBoolean(t)?this.m_maxradius/2:2*this.m_minradius},ScatteredPlotChart.prototype.getToolTipData=function(t,i){if(!IsBoolean(this.m_isEmptySeries)&&"None"!==this.m_customtextboxfortooltip.dataTipType){this.xPositionArr=this.m_calculation.getXPixelArray(),this.yAxisDataArray=this.m_calculation.getYPixelArray();var e,s=this.m_calculation.getPlotRadius();if(t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY())for(var a=0,r=this.xPositionArr.length;a<r;a++)for(var o=0,h=this.xPositionArr[a].length;o<h;o++){var n=s[a][o]<2?2:s[a][o];if(null!=this.xPositionArr[a][o]&&t<=+this.xPositionArr[a][o]+ +n&&t>=+this.xPositionArr[a][o]-+n&&i<=+this.yAxisDataArray[a][o]+ +n&&i>=+this.yAxisDataArray[a][o]-+n){if(e={},"Default"==this.m_customtextboxfortooltip.dataTipType){e.data=new Array,n="YField"==this.typeArr[a]?(m=this.getSeriesDisplayNamesForToolTip(a),this.otherFieldDisplayNamesArr[a]):(m=this.otherFieldDisplayNamesArr[a],this.getSeriesDisplayNamesForToolTip(a));var m,l=IsBoolean(this.m_customtextboxfortooltip.useComponentFormatter)?this.getXaxisFormatterForToolTip(this.m_categoryData[a][o]):this.getUpdatedFormatterForToolTip(this.m_categoryData[a][o],n),n=(e.data.push([{color:this.getColorValue(this.getPlotHexColor()[a][o],a),shape:this.m_seriesChartType[a]},"X",n,l]),IsBoolean(this.m_customtextboxfortooltip.useComponentFormatter)?this.getFormatterForToolTip(this.m_seriesData[a][o]):this.getUpdatedFormatterForToolTip(this.m_seriesData[a][o],m));e.data.push([{color:this.getColorValue(this.getPlotHexColor()[a][o],a),shape:this.m_seriesChartType[a]},"Y",m,n]),this.getChartTypeRadius()[a]&&-1!=this.getAllDPFields().indexOf(this.getChartTypeRadius()[a])&&(l=this.m_plotRadiusData[a][o],e.data.push([{color:this.getColorValue(this.getPlotHexColor()[a][o],a),shape:this.m_seriesChartType[a]},"Radius",this.radiusFieldDisplayNamesArr[a],l])),this.getChartTypeColors()[a]&&-1!=this.getAllDPFields().indexOf(this.getChartTypeColors()[a])&&(n=this.m_plotColorData[a][o],e.data.push([{color:this.getColorValue(this.getPlotHexColor()[a][o],a),shape:this.m_seriesChartType[a]},"Color",this.colorFieldDisplayNamesArr[a],n]));break}e=this.getDataProvider()[o]}}else this.hideToolTip();return e}},ScatteredPlotChart.prototype.getXaxisFormatterForToolTip=function(t){var i;return!isNaN(t)&&""!=t&&null!=t&&(i="default"!==this.m_tooltipprecision?0==this.m_tooltipprecision&&t%1!=0?2:this.m_tooltipprecision:void 0!==(i=(t+"").split("."))[1]?i[1].length:0,t=this.getLocaleWithPrecision(t,i,this.m_secondaryaxisnumberformatter),IsBoolean(this.m_calculation.m_isSecondAxisFormatter)&&null!=this.m_calculation.m_secondAxisUnitSymbol&&(t=this.m_util.addFormatter(t,this.m_calculation.m_secondAxisUnitSymbol,this.m_calculation.m_secondAxisFormatterPosition,this.m_secondaryaxisprecision)),IsBoolean(this.m_calculation.m_isSecondAxisSecondaryFormatter))&&"%"===this.m_calculation.m_secondAxisSecondaryUnitSymbol?this.m_calculation.getSecondaryFormaterAddedText(t,this.m_calculation.m_secondAxisSecondaryUnitSymbol):t},ScatteredPlotChart.prototype.getColorValue=function(t,i){return this.color=t,hex2rgb(this.color,this.m_transparency[i])},ScatteredPlotChart.prototype.drawTooltip=function(t,i){var e;IsBoolean(this.m_isEmptySeries)||this.m_designMode||(e=this.getToolTipData(t,i),this.m_hovercallback&&""!=this.m_hovercallback?this.drawCallBackContent(t,i,e):this.drawTooltipContent(e))},ScatteredPlotChart.prototype.drawTooltipContent=function(t){this.m_tooltip.draw(t,this.m_componenttype)},ScatteredPlotChart.prototype.getDrillDataPoints=function(t,i){if(!IsBoolean(this.m_isEmptySeries)){this.xPositionArr=this.m_calculation.getXPixelArray(),this.yAxisDataArray=this.m_calculation.getYPixelArray();var e=this.m_calculation.getPlotRadius();if(t>=this.getStartX()-10&&t<=this.getEndX()&&i<=this.getStartY()+10&&i>=this.getEndY())for(var s=0,a=this.xPositionArr.length;s<a;s++)for(var r,o,h=0,n=this.xPositionArr[s].length;h<n;h++)if(null!=this.xPositionArr[s][h])if(t<=+this.xPositionArr[s][h]+ +e[s][h]&&t>=+this.xPositionArr[s][h]-+e[s][h])if(i<=+this.yAxisDataArray[s][h]+ +e[s][h]&&i>=+this.yAxisDataArray[s][h]-+e[s][h])return r=this.getDataProvider()[h],o=this.getPlotHexColor()[s][h],r.drillIndex=h,{drillRecord:r,drillColor:o}}},ScatteredPlotChart.prototype.getChartTypeNames=function(){for(var t=[],i=["point","quad","triangle","cross","cube"],e=0,s=0,a=this.getSeriesData().length;e<a;e++)"YField"==this.typeArr[e]&&""!=this.otherFieldArr[e]&&(t.push(i[s]),5==++s)&&(s=0),"XField"==this.typeArr[e]&&""!=this.otherFieldArr[e]&&(t.push(i[s]),5==++s)&&(s=0);return t},ScatteredPlotChart.prototype.getChartTypeRadius=function(){for(var t=[],i=0,e=this.nameArr.length;i<e;i++)"YField"==this.typeArr[i]&&""!=this.otherFieldArr[i]||"XField"==this.typeArr[i]&&this.otherFieldArr[i],t.push(this.plotRadiusArr[i]);return t},ScatteredPlotChart.prototype.getChartTypeColors=function(){for(var t=[],i=0,e=this.nameArr.length;i<e;i++)("YField"==this.typeArr[i]&&""!=this.otherFieldArr[i]||"XField"==this.typeArr[i]&&""!=this.otherFieldArr[i])&&t.push(this.plotColorArr[i]);return t},ScatteredPlotChart.prototype.initializeSeriesValues=function(){for(var t=[],i=0,e=this.m_seriesData[0].length;i<e;i++){t[i]=[];for(var s=0,a=this.m_seriesData.length;s<a;s++)t[i][s]=this.m_seriesData[s][i]}this.m_seriesData=t},ScatteredPlotChart.prototype.initializeCategoryValues=function(){for(var t=[],i=0,e=this.m_categoryData[0].length;i<e;i++){t[i]=[];for(var s=0,a=this.m_categoryData.length;s<a;s++)t[i][s]=this.m_categoryData[s][i]}this.m_categoryData=t},ScatterPlotChartCalculation.prototype.init=function(t,i,e){this.m_chart=t,this.m_calculation=this.m_chart.m_calculation,this.m_categoryData=i,this.m_seriesData=e,this.m_minradius=this.m_chart.m_minradius,this.m_maxradius=this.m_chart.m_maxradius,this.setHorizontalAxisFormaters(),this.setCategoryMaxMin(),this.setSeriesMaxMin(),this.setCategoryMaxMinValue(),this.setSeriesMaxMinValue(),this.m_chart.setChartDrawingArea(),this.startX=this.m_chart.getStartX(),this.startY=this.m_chart.getStartY(),this.endX=this.m_chart.getEndX(),this.endY=this.m_chart.getEndY(),this.setMaxValue(),this.setPlotRadius(),this.setXRatio(),this.setYRatio(),this.setXPixelArray(),this.setYPixelArray()},ScatterPlotChartCalculation.prototype.setMaxValue=function(){this.m_maxValue=this.m_xMax>this.m_yMax?this.m_xMax:this.m_yMax},ScatterPlotChartCalculation.prototype.getMaxValue=function(){return this.m_maxValue},ScatterPlotChartCalculation.prototype.getSeriesRadiusField=function(){return this.m_chart.plotRadiusArr},ScatterPlotChartCalculation.prototype.getPlotRadius=function(){return this.radius},ScatterPlotChartCalculation.prototype.setPlotRadius=function(){for(var t="",i="",e=0;e<this.m_chart.plotRadiusArr.length;e++){for(var s=this.m_chart.getPlotRadiusData()[e],a=0;a<s.length;a++)s[a]=getNumericComparableValue(s[a]);this.radius[e]=[];var r=this.getMaxFromArray(s),o=this.getMinFromArray(s);if(this.m_chart.plotRadiusArr[e]!=parseInt(this.m_chart.plotRadiusArr[e],10))for(a=0;a<s.length;a++)0<=o&&""!==s[a]&&void 0!==s[a]&&null!==s[a]&&"Nil"!==s[a]&&"null"!==s[a]?(t=r/s[a],i=(this.m_maxradius-this.m_minradius)/t,this.radius[e][a]=+this.m_minradius+ +i,t=r/s[a],i=(this.m_maxradius-this.m_minradius)/t,this.radius[e][a]=+this.m_minradius+ +i,+this.radius[e][a]>+this.m_maxradius&&(this.radius[e][a]=this.m_maxradius)):o<0&&""!==s[a]&&void 0!==s[a]&&null!==s[a]&&"Nil"!==s[a]&&"null"!==s[a]?(i=(t=(this.m_maxradius-this.m_minradius)/(+r-+o))==1/0?this.m_maxradius:this.m_minradius+(+s[a]-+o)*t,this.radius[e][a]=+this.m_minradius+ +i,+this.radius[e][a]>+this.m_maxradius&&(this.radius[e][a]=this.m_maxradius)):this.radius[e][a]=0;else for(a=0;a<s.length;a++)this.radius[e][a]=+s[a]>+this.m_maxradius?this.m_maxradius:s[a]}},ScatterPlotChartCalculation.prototype.getMaxFromArray=function(t){for(var i=0,e=0,s=t.length;e<s;e++)""!==t[e]&&void 0!==t[e]&&null!==t[e]&&"Nil"!==t[e]&&"null"!==t[e]&&+i<=+t[e]&&(i=+t[e]);return i},ScatterPlotChartCalculation.prototype.getMinFromArray=function(t){var e=0;for(i=0,length=t.length;i<length;i++)""!==t[i]&&void 0!==t[i]&&null!==t[i]&&"Nil"!==t[i]&&"null"!==t[i]&&+e>=+t[i]&&(e=+t[i]);return e},ScatterPlotChartCalculation.prototype.getDefaultRadius=function(t){for(var i=[],e=0,s=t.length;e<s;e++)for(var a=0,r=this.m_seriesData[0].length;a<r;a++)i[e][a]=t[e];return i},ScatterPlotChartCalculation.prototype.setCategoryMaxMinValue=function(){var t=this.m_chart.getCalculateNiceScale(this.getCategoryMinValue(),this.getCategoryMaxValue(),this.m_chart.m_horizontalaxisbasezero,this.m_chart.m_horizontalaxisautoadjust,this.m_chart.m_horizontalminimumaxisvalue,this.m_chart.m_horizontalmaximumaxisvalue,this.m_chart.m_height);this.min=t.min,this.m_xMax=t.max,this.catMax=t.max,this.catMin=t.min,this.m_noOfXAxisMarkers=t.markerArray.length,this.m_xAxisActualMarkersArray=t.markerArray,this.setXAxisMarkersArray(t.markerArray,t.step)},ScatterPlotChartCalculation.prototype.getCategoryMaxValue=function(){return this.m_categoryMaxValue},ScatterPlotChartCalculation.prototype.getCategoryMinValue=function(){return this.m_categoryMinValue},ScatterPlotChartCalculation.prototype.setCategoryMaxMin=function(){var t=!0;if(this.m_categoryMinValue=0,(this.m_categoryMaxValue=0)<this.m_categoryData.length)for(var i=0,e=this.m_categoryData.length;i<e;i++)for(var s=0,a=this.m_categoryData[i].length;s<a;s++)isNaN(+this.m_categoryData[i][s])||(0!=this.m_categoryData[i].length&&IsBoolean(t)&&(this.m_categoryMinValue=this.m_categoryData[i][s],this.m_categoryMaxValue=this.m_categoryData[i][s],t=!1),+this.m_categoryData[i][s]<=+this.m_categoryMinValue&&(this.m_categoryMinValue=+this.m_categoryData[i][s]),+this.m_categoryData[i][s]>=+this.m_categoryMaxValue&&(this.m_categoryMaxValue=+this.m_categoryData[i][s]))},ScatterPlotChartCalculation.prototype.calculateCategoryMinValue=function(){return IsBoolean(this.m_chart.m_horizontalaxisautoadjust)?IsBoolean(this.m_chart.m_horizontalaxisbasezero)?this.min=0:this.min=this.getCategoryMinValue():IsBoolean(this.m_chart.m_horizontalaxisbasezero)?this.min=0:0==this.m_chart.m_horizontalminimumaxisvalue||""==this.m_chart.m_horizontalminimumaxisvalue?this.min=this.getCategoryMinValue():this.min=this.m_chart.m_horizontalminimumaxisvalue,0<=this.min?this.min=getMin(this.min):1<Math.abs(this.min)?this.min=-getMax(Math.abs(this.min))[0]:1<this.calculateCatMax&&(this.min=Math.floor(this.min)),this.min},ScatterPlotChartCalculation.prototype.getMinValue=function(){return IsBoolean(this.m_chart.isAxisSetup())?IsBoolean(this.m_chart.isBaseZero())?this.min=0:this.min=this.getSeriesMinValue():IsBoolean(this.m_chart.isBaseZero())?this.min=0:0==this.m_chart.m_minimumaxisvalue||""==this.m_chart.m_minimumaxisvalue?this.min=this.getSeriesMinValue():this.min=this.m_chart.m_minimumaxisvalue,0<=this.min?this.min=getMin(this.min):1<Math.abs(this.min)?this.min=-getMax(Math.abs(this.min))[0]:1<this.getSeriesMaxValue()&&(this.min=Math.floor(this.min)),this.min},ScatterPlotChartCalculation.prototype.getSeriesMinValue=function(){return this.m_seriesMinValue},ScatterPlotChartCalculation.prototype.getSeriesMaxValue=function(){return this.m_seriesMaxValue},ScatterPlotChartCalculation.prototype.setSeriesMaxMin=function(){if(this.m_seriesMinValue=0,(this.m_seriesMaxValue=0)<this.m_seriesData.length)for(var t=0,i=this.m_seriesData.length;t<i;t++)for(var e=0,s=this.m_seriesData[t].length;e<s;e++)isNaN(+this.m_seriesData[t][e])||(0==t&&0==e&&(this.m_seriesMinValue=this.m_seriesData[t][e],this.m_seriesMaxValue=this.m_seriesData[t][e]),+this.m_seriesData[t][e]<=this.m_seriesMinValue&&(this.m_seriesMinValue=+this.m_seriesData[t][e]),+this.m_seriesData[t][e]>=this.m_seriesMaxValue&&(this.m_seriesMaxValue=+this.m_seriesData[t][e]))},ScatterPlotChartCalculation.prototype.setSeriesMaxMinValue=function(){var t=this.m_chart.getCalculateNiceScale(this.getMinValue(),this.getSeriesMaxValue(),this.m_chart.m_basezero,this.m_chart.m_autoaxissetup,this.m_chart.m_minimumaxisvalue,this.m_chart.m_maximumaxisvalue,this.m_chart.m_height);this.min=t.min,this.m_xMax=t.max,this.serMax=t.max,this.serMin=t.min,this.m_noOfYAxisMarkers=t.markerArray.length,this.m_yAxisText=t.step,this.m_yAxisMarkersArray=t.markerArray},ScatterPlotChartCalculation.prototype.setXAxisMarkersArray=function(t,i){this.m_xAxisMarkersArray=[];for(var e=t.length,s=[],a=0;a<e;a++){var r=t[a];r=this.getSecondaryAxisFormattedText(r,this.m_secondaryAxisPrecision),s.push(r)}if(!isUniqueArray(s))for(var o=getDuplicatesFromArray(s),a=0;a<e;a++){var r=t[a],h=this.getSecondaryAxisFormattedText(r,this.m_secondaryAxisPrecision);r="default"==this.m_secondaryAxisPrecision&&"auto"==this.m_secondAxisSecondaryUnitSymbol&&0<Object.keys(o).length?this.getSecondaryAxisFormattedText(r,1):h,s[a]=r}for(a=0;a<t.length;a++)this.m_xAxisMarkersArray[a]=s[a]},ScatterPlotChartCalculation.prototype.setHorizontalAxisFormaters=function(){var t,i;this.m_isSecondAxisFormatter=!1,this.m_secondAxisUnitSymbol="",this.m_secondAxisFormatterPosition="","none"==this.m_chart.m_secondaryaxisformater&&""==this.m_chart.m_secondaryaxisformater||(i=this.m_chart.m_secondaryaxisunit,t=this.m_chart.m_secondaryaxisformater,"none"!=i&&""!=i&&(this.m_isSecondAxisFormatter=!0,this.m_secondAxisUnitSymbol=this.m_chart.m_util.getFormatterSymbol(t,i),this.m_secondAxisFormatterPosition=this.m_chart.m_secondaryaxissignposition)),this.m_isSecondAxisSecondaryFormatter=!1,this.m_secondAxisSecondaryUnitSymbol="",this.m_secondAxisSecondaryFormatterPosition="","none"==this.m_chart.m_secondaryaxissecondaryformatter&&""==this.m_chart.m_secondaryaxissecondaryformatter||(t=this.m_chart.m_secondaryaxissecondaryunit,i=this.m_chart.m_secondaryaxissecondaryformatter,"none"!=t&&""!=t&&(this.m_isSecondAxisSecondaryFormatter=!0,this.m_secondAxisSecondaryUnitSymbol=this.m_chart.m_util.getFormatterSymbol(i,t),this.m_secondAxisSecondaryFormatterPosition="suffix")),this.m_secondaryAxisPrecision=this.m_chart.m_secondaryaxisprecision},ScatterPlotChartCalculation.prototype.getSecondaryAxisFormattedText=function(t,i){var e,s,i=void 0!==i?i:this.m_secondaryAxisPrecision;return t%1!=0&&i<1?t=this.setPrecision(t,1):IsBoolean(this.m_isSecondAxisFormatter)||IsBoolean(this.m_isSecondAxisSecondaryFormatter)||"default"!==i&&(t=this.setPrecision(t,i)),"none"!=this.m_chart.m_secondaryaxisformater&&""!=this.m_chart.m_secondaryaxisformater||"none"!=this.m_chart.m_secondaryaxissecondaryformatter&&""!=this.m_chart.m_secondaryaxissecondaryformatter||(t=this.setPrecision(t,i)),IsBoolean(this.m_isSecondAxisFormatter)&&(t=this.m_chart.m_util.updateTextWithFormatter(t,this.m_secondAxisUnitSymbol,i)),IsBoolean(this.m_isSecondAxisSecondaryFormatter)&&"Number"==this.m_chart.m_secondaryaxissecondaryformatter&&(t=this.m_chart.m_util.updateTextWithFormatter(t,this.m_secondAxisSecondaryUnitSymbol,i)),IsBoolean(this.m_isSecondAxisSecondaryFormatter)&&(t="auto"!=this.m_secondAxisSecondaryUnitSymbol?(0!=i&&null!=i?t=this.setPrecision(t,i):t<1&&t%1!=0&&(t=this.setPrecision(t,2)),t=t%1==0&&"default"===this.m_secondaryAxisPrecision?+t:t,this.addSecondAxisSecondaryFormater(t,this.m_secondAxisSecondaryUnitSymbol)):(e=getNumberFormattedSymbol(+t,this.m_chart.m_secondaryaxisunit),s=getNumberFormattedNumericValue(+t,i,this.m_chart.m_secondaryaxisunit),t=this.setPrecision(s,i),0!=i&&null!=i?t=this.setPrecision(t,i):t<1&&t%1!=0&&(t=this.setPrecision(t,2)),t=t%1==0&&"default"===this.m_secondaryAxisPrecision?+t:t,this.addSecondAxisSecondaryFormater(t,e))),t=getFormattedNumberWithCommas(t,this.m_chart.m_secondaryaxisnumberformatter),t=IsBoolean(this.m_isSecondAxisFormatter)&&null!=this.m_secondAxisUnitSymbol?this.m_chart.m_util.addFormatter(t,this.m_secondAxisUnitSymbol,this.m_secondAxisFormatterPosition,i):t},ScatterPlotChartCalculation.prototype.setPrecision=function(t,i){return 0!==t&&"default"!==i?(+t).toFixed(i):+t},ScatterPlotChartCalculation.prototype.addSecondAxisSecondaryFormater=function(text,secondAxisSecondaryUnitSymbol){var textValue=text;try{eval("var formattedText = this.m_chart.m_util.addUnitAs"+this.m_secondAxisSecondaryFormatterPosition+"(textValue,secondAxisSecondaryUnitSymbol);")}catch(e){}return formattedText.toString()},ScatterPlotChartCalculation.prototype.getSecondaryFormaterAddedText=function(textValue,secondaryUnitSymbol){var formattedText=textValue;try{eval("var formattedText = this.m_chart.m_util.addUnitAs"+this.m_secondAxisSecondaryFormatterPosition+"(textValue,secondaryUnitSymbol);")}catch(e){}return formattedText},ScatterPlotChartCalculation.prototype.isInt=function(t){return"number"==typeof t&&t%1==0},ScatterPlotChartCalculation.prototype.getXAxisMarkersArray=function(){return this.m_xAxisMarkersArray},ScatterPlotChartCalculation.prototype.getYAxisMarkersArray=function(){return this.m_yAxisMarkersArray},ScatterPlotChartCalculation.prototype.setXRatio=function(){var t=+this.endX-+this.startX;this.m_xRatio=t/(+this.catMax-+this.catMin)},ScatterPlotChartCalculation.prototype.setYRatio=function(){this.m_yRatio=(this.startY-this.endY)/(this.serMax-this.serMin)},ScatterPlotChartCalculation.prototype.setXPixelArray=function(){this.m_xPixelArray=[];for(var t=0,i=this.m_categoryData.length;t<i;t++){this.m_xPixelArray[t]=[];for(var e=0,s=this.m_categoryData[t].length;e<s;e++)""===this.m_categoryData[t][e]||void 0===this.m_categoryData[t][e]||null===this.m_categoryData[t][e]||"Nil"===this.m_categoryData[t][e]||"null"===this.m_categoryData[t][e]?this.m_xPixelArray[t][e]=null:this.m_xPixelArray[t][e]=+this.startX+(+this.m_categoryData[t][e]-+this.catMin)*this.m_xRatio*1}},ScatterPlotChartCalculation.prototype.getXPixcelForEachCategory=function(){return(this.endX-this.startX)/(+this.m_noOfXAxisMarkers-1)},ScatterPlotChartCalculation.prototype.getXPixelArray=function(){return this.m_xPixelArray},ScatterPlotChartCalculation.prototype.setYPixelArray=function(){this.m_yPixelArray=[];for(var t=0,i=this.m_seriesData.length;t<i;t++){this.m_yPixelArray[t]=[];for(var e=0,s=this.m_seriesData[t].length;e<s;e++)""===this.m_seriesData[t][e]||void 0===this.m_seriesData[t][e]||null===this.m_seriesData[t][e]||"Nil"===this.m_seriesData[t][e]||"null"===this.m_seriesData[t][e]?this.m_yPixelArray[t][e]=null:this.m_yPixelArray[t][e]=+this.startY-(this.m_seriesData[t][e]-this.serMin)*this.m_yRatio}},ScatterPlotChartCalculation.prototype.getYPixelArray=function(){return this.m_yPixelArray},ScatterPlotChartCalculation.prototype.getYAxisText=function(){return 0},ScatteredPlotChart.prototype.initializeDataLabel=function(){this.m_valueTextSeries={};for(var t=this.m_calculation.getXPixelArray(),i=this.m_calculation.getYPixelArray(),e=0,s=0;s<this.m_seriesNames.length;s++)IsBoolean(this.m_seriesDataLabelProperty[s].showDataLabel)&&(this.setSeriesDataLabel(),this.m_valueTextSeries[this.m_seriesNames[s]]=new ValueTextSeries,this.m_valueTextSeries[this.m_seriesNames[s]].init(t[e],i[e],this,this.m_seriesDataForDataLabel[s],this.m_seriesDataLabelProperty[s],this.m_seriesData[s])),e++},ScatteredPlotChart.prototype.setSeriesDataLabel=function(){this.m_seriesDataForDataLabel=[];for(var t=0,i=this.getDataProvider().length;t<i;t++)for(var e=this.getDataProvider()[t],s=0,a=this.getSeriesNames().length;s<a;s++){this.m_seriesDataForDataLabel[s]||(this.m_seriesDataForDataLabel[s]=[]);var r=this.getValidFieldDataFromRecord(e,this.m_seriesDataLabelProperty[s].datalabelField);this.m_seriesDataForDataLabel[s][t]=r}},ShapeSeries.prototype.init=function(t,i,e,s,a,r,o,h){this.color=t,this.xPositionArray=i,this.yPositionArray=e,this.shape=s,this.plotradius=a,this.m_transparency=r,this.m_chart=o,this.linewidth=h,this.m_startX=this.m_chart.m_startX,this.m_startY=this.m_chart.m_startY,this.m_endX=this.m_chart.m_endX,this.m_endY=this.m_chart.m_endY,this.lastValidX=this.m_chart.m_startX,this.lastValidY=this.m_chart.m_startY;for(var n=0,m=this.xPositionArray.length;n<m;n++)null!=this.xPositionArray[n]&&(this.common[n]=new Shape,"line"!=this.shape?this.common[n].init(this.color[n],this.xPositionArray[n],this.yPositionArray[n],this.shape,this.plotradius[n],this.m_transparency[n],this.m_chart,0,0):this.common[n].init(this.color[n],this.xPositionArray[n],this.yPositionArray[n],this.shape,this.plotradius[n],this.m_transparency[n],this.m_chart,this.getNextDataPoint(n).x,this.getNextDataPoint(n).y,this.linewidth))},ShapeSeries.prototype.getNextDataPoint=function(t){var i,e;return 0<t?(i=this.xPositionArray[t-1],e=this.yPositionArray[t-1],null==i||null===i||""===i||isNaN(i)||null==e||null===e||""===e||isNaN(e)?{x:this.lastValidX,y:this.lastValidY}:{x:this.lastValidX=i,y:this.lastValidY=e}):{x:this.xPositionArray[t],y:this.yPositionArray[t]}},ShapeSeries.prototype.drawShapeSeries=function(t){if("line"==this.shape&&"curve"==this.m_chart.m_lineform)try{var i=[],e=0;i[e]=[];for(var s=0,a=this.xPositionArray.length;s<a;s++)null!=this.xPositionArray[s]&&""!=this.xPositionArray[s]&&null!=this.yPositionArray[s]&&""!=this.yPositionArray[s]&&this.yPositionArray[s]<=this.m_chart.getStartY()&&this.yPositionArray[s]>=this.m_chart.getEndY()?(i[e].push(this.xPositionArray[s]),i[e].push(this.yPositionArray[s])):i[++e]=[];for(var r=0;r<=e;r++)0<i[r].length&&(this.m_chart.ctx.beginPath(),this.m_chart.ctx.save(),this.m_chart.ctx.lineWidth=1,this.m_chart.ctx.strokeStyle=hex2rgb(this.color[r],this.m_transparency),this.m_chart.ctx.moveTo(i[r][0],i[r][1]),this.m_chart.ctx.curve(i[r],.5,25,this),this.m_chart.ctx.stroke(),this.m_chart.ctx.restore(),this.m_chart.ctx.closePath())}catch(t){}for(var s=0,o=this.xPositionArray.length;s<o;s++)this.isInRange(s)&&this.common[s].draw(s,t)},ShapeSeries.prototype.isInRange=function(t){return this.xPositionArray[t]>=this.m_startX&&this.xPositionArray[t]<=this.m_endX&&+this.yPositionArray[t]<=this.m_startY&&+this.yPositionArray[t]>=this.m_endY},Shape.prototype.init=function(t,i,e,s,a,r,o,h,n,m){this.m_chart=o,this.ctx=this.m_chart.ctx,this.color=t,this.xPosition=i,this.yPosition=e,this.s=s,this.plotradius=a,this.transparency=r,this.nextX=h,this.nextY=n,this.linewidth=m},Shape.prototype.draw=function(t,i){if(null!=this.xPosition)switch(this.s){case"cube":this.drawCube(i);break;case"cross":this.drawCross(t,i);break;case"quad":this.drawQuad(i);break;case"triangle":this.drawTriangle(t,i);break;case"point":this.drawPoint(t,i);break;case"polygon":this.drawPolygon(t,i);break;case"star":this.drawStar(t,i);break;case"line":this.drawLine(t,i),this.drawPoint(t,i);break;case"plus":this.drawPlus(t,i);break;case"default":this.drawPoint(t,i)}},Shape.prototype.drawCube=function(t){var i,e=this,s=document.createElementNS(NS,"rect"),a=(s.setAttributeNS(null,"x",this.xPosition-this.plotradius),s.setAttributeNS(null,"y",this.yPosition-this.plotradius),s.setAttributeNS(null,"height",2*this.plotradius),s.setAttributeNS(null,"width",2*this.plotradius),s.setAttributeNS(null,"stroke",hex2rgb(this.color,this.transparency)),s.setAttributeNS(null,"fill",hex2rgb(this.color,this.transparency)),!!document.documentMode);IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_bubbleanimationduration&&!a&&((a=document.createElementNS("http://www.w3.org/2000/svg","animate")).setAttribute("attributeName","width"),a.setAttribute("from","1"),a.setAttribute("to",2*this.plotradius),a.setAttribute("dur",e.m_chart.m_bubbleanimationduration+"s"),$(s).append(a),$(s).attr("class","pointShapeAnimation"),i=this.plotradius,s.addEventListener("mouseover",function(t){s.setAttributeNS(null,"height",2*i+e.m_chart.m_hovershape),s.setAttributeNS(null,"width",2*i+e.m_chart.m_hovershape),s.setAttributeNS(null,"opacity",.8)}),s.addEventListener("mouseout",function(){s.setAttributeNS(null,"height",2*i),s.setAttributeNS(null,"width",2*i),s.setAttributeNS(null,"opacity",e.pointOpacity)})),$("#cubegrp"+t+e.m_chart.m_objectid).append(s)},Shape.prototype.drawCross=function(t,i){var e=this,s=hex2rgb(this.color,this.transparency),a=[s,"transparent"],r="M"+(+this.xPosition-+this.plotradius)+" "+(+this.yPosition-+this.plotradius)+" L"+(+this.xPosition+ +this.plotradius)+" "+(+this.yPosition+ +this.plotradius)+" M"+(+this.xPosition+ +this.plotradius)+" "+(+this.yPosition-+this.plotradius)+" L"+(+this.xPosition-+this.plotradius)+" "+(+this.yPosition+ +this.plotradius),o=document.createElementNS(NS,"path"),r=(o.setAttribute("d",r),o.setAttributeNS(null,"stroke-width",3),!!document.documentMode);if(IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_bubbleanimationduration&&!r){var h=document.createElementNS(NS,"linearGradient");h.setAttribute("id","LinearGradient"+e.m_chart.m_objectid+t+i);for(var n=0;n<2;n++){var m=document.createElementNS(NS,"stop"),l=(m.setAttribute("offset","0"),m.setAttribute("stop-color",a[n]),drawSVGStackAnimation(0,"offset",this.plotradius,10*e.m_chart.m_bubbleanimationduration));$(m).append(l),$(m).attr("class","pointShapeColorAnimation"),$(h).append(m)}$("#defsElement"+e.m_chart.m_objectid).append(h),s="url(#LinearGradient"+e.m_chart.m_objectid+t+i+")",$(o).attr("class","timeSeries-pointShapeHighlighter")}o.setAttributeNS(null,"fill",s),o.setAttributeNS(null,"stroke",s),$("#crossgrp"+i+e.m_chart.m_objectid).append(o)},Shape.prototype.drawPlus=function(t,i){var e=this,s=hex2rgb(this.color,this.transparency),a=[s,"transparent"],r="M"+(+this.xPosition-+this.plotradius)+" "+ +this.yPosition+" L"+(+this.xPosition+ +this.plotradius)+" "+ +this.yPosition+" M"+ +this.xPosition+" "+(+this.yPosition-+this.plotradius)+" L"+ +this.xPosition+" "+(+this.yPosition+ +this.plotradius),o=document.createElementNS(NS,"path"),r=(o.setAttribute("d",r),o.setAttributeNS(null,"stroke-width",3),!!document.documentMode);if(IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_bubbleanimationduration&&!r){var h=document.createElementNS(NS,"linearGradient");h.setAttribute("id","LinearGradient"+e.m_chart.m_objectid+t+i);for(var n=0;n<2;n++){var m=document.createElementNS(NS,"stop"),l=(m.setAttribute("offset","0"),m.setAttribute("stop-color",a[n]),drawSVGStackAnimation(0,"offset",this.plotradius,10*e.m_chart.m_bubbleanimationduration));$(m).append(l),$(m).attr("class","pointShapeColorAnimation"),$(h).append(m)}$("#defsElement"+e.m_chart.m_objectid).append(h),s="url(#LinearGradient"+e.m_chart.m_objectid+t+i+")",$(o).attr("class","timeSeries-pointShapeHighlighter")}o.setAttributeNS(null,"fill",s),o.setAttributeNS(null,"stroke",s),$("#plusgrp"+i+e.m_chart.m_objectid).append(o)},Shape.prototype.drawQuad=function(t){var i,e=this,s=(this.ctx.lineTo(+this.xPosition,+this.yPosition-+this.plotradius),document.createElementNS(NS,"rect")),a=(s.setAttributeNS(null,"x",this.xPosition-this.plotradius),s.setAttributeNS(null,"y",this.yPosition-this.plotradius),s.setAttributeNS(null,"height",2*this.plotradius),s.setAttributeNS(null,"width",2*this.plotradius),s.setAttribute("transform","rotate(45 "+this.xPosition+","+this.yPosition+")"),s.setAttributeNS(null,"stroke",hex2rgb(this.color,this.transparency)),s.setAttributeNS(null,"fill",hex2rgb(this.color,this.transparency)),!!document.documentMode);IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_bubbleanimationduration&&!a&&((a=document.createElementNS("http://www.w3.org/2000/svg","animate")).setAttribute("attributeName","height"),a.setAttribute("from","1"),a.setAttribute("to",2*this.radius),a.setAttribute("dur",e.m_chart.m_bubbleanimationduration+"s"),$(s).append(a),$(s).attr("class","pointShapeAnimation"),i=this.plotradius,s.addEventListener("mouseover",function(t){s.setAttributeNS(null,"height",2*i+e.m_chart.m_hovershape),s.setAttributeNS(null,"width",2*i+e.m_chart.m_hovershape),s.setAttributeNS(null,"opacity",.8)}),s.addEventListener("mouseout",function(){s.setAttributeNS(null,"height",2*i),s.setAttributeNS(null,"width",2*i),s.setAttributeNS(null,"opacity",e.transparency)})),$("#quadgrp"+t+e.m_chart.m_objectid).append(s)},Shape.prototype.drawTriangle=function(t,i){var e=this,s=hex2rgb(this.color,this.transparency),a=[s,"transparent"],r="M"+ +this.xPosition+" "+(+this.yPosition-+this.plotradius)+" L"+(+this.xPosition+ +this.plotradius)+" "+(+this.yPosition+ +this.plotradius)+" L"+(+this.xPosition-+this.plotradius)+" "+(+this.yPosition+ +this.plotradius)+" L"+ +this.xPosition+" "+(+this.yPosition-+this.plotradius),o=document.createElementNS(NS,"path"),r=(o.setAttribute("d",r),!!document.documentMode);if(IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_bubbleanimationduration&&!r){var h=document.createElementNS(NS,"linearGradient");h.setAttribute("id","LinearGradient"+e.m_chart.m_objectid+t+i);for(var n=0;n<2;n++){var m=document.createElementNS(NS,"stop"),l=(m.setAttribute("offset","0"),m.setAttribute("stop-color",a[n]),drawSVGStackAnimation(0,"offset",this.plotradius,10*e.m_chart.m_bubbleanimationduration));$(m).append(l),$(m).attr("class","pointShapeColorAnimation"),$(h).append(m)}$("#defsElement"+e.m_chart.m_objectid).append(h),s="url(#LinearGradient"+e.m_chart.m_objectid+t+i+")",$(o).attr("class","timeSeries-pointShapeHighlighter")}o.setAttributeNS(null,"fill",s),o.setAttributeNS(null,"stroke",s),$("#trianglegrp"+i+e.m_chart.m_objectid).append(o)},Shape.prototype.drawPoint=function(r,t){var o=this,i=(this.getColorValue(),!!document.documentMode);if(null==this.m_chart.m_chartbase||"plane"==this.m_chart.m_chartbase){var e=drawSVGCircle(this.xPosition,this.yPosition,this.plotradius,this.getColorValue(),hex2rgb(this.color,this.transparency));IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_bubbleanimationduration&&!i&&((c=document.createElementNS("http://www.w3.org/2000/svg","animate")).setAttribute("attributeName","r"),c.setAttribute("from","1"),c.setAttribute("to",this.plotradius),c.setAttribute("dur",o.m_chart.m_bubbleanimationduration+"s"),$(e).append(c),$(e).attr("class","pointShapeAnimation"),e.addEventListener("mouseover",function(t){e.setAttributeNS(null,"r",+o.plotradius+o.m_chart.m_hovershape)}),e.addEventListener("mouseout",function(){e.setAttributeNS(null,"r",+o.plotradius)})),$("#bubblegrp"+t+this.m_chart.m_objectid).append(e)}else try{var s=hex2rgb(this.color,this.transparency),a=ColorLuminance(this.color,this.m_chart.m_luminance),h=[hex2rgb(a,this.transparency),s],n=["10%","80%"],m=document.createElementNS("http://www.w3.org/2000/svg","circle"),l=document.createElementNS(NS,"radialGradient");l.setAttribute("id","radialGradient"+o.m_chart.m_objectid+r+t),l.setAttribute("fx","30%"),l.setAttribute("fy","20%");for(var c,_=0;_<2;_++){var d=document.createElementNS(NS,"stop");d.setAttribute("offset",n[_]),d.setAttribute("stop-color",h[_]),$(l).append(d)}m.setAttributeNS(null,"cx",this.xPosition),m.setAttributeNS(null,"cy",this.yPosition),m.setAttributeNS(null,"r",this.plotradius),m.setAttributeNS(null,"stroke",hex2rgb(this.color,this.transparency)),s="url(#radialGradient"+o.m_chart.m_objectid+r+t+")",m.setAttributeNS(null,"fill",s),IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_bubbleanimationduration&&!i&&((c=document.createElementNS("http://www.w3.org/2000/svg","animate")).setAttribute("attributeName","r"),c.setAttribute("from","1"),c.setAttribute("to",this.plotradius),c.setAttribute("dur",o.m_chart.m_bubbleanimationduration+"s"),$(m).append(c),$(m).attr("class","pointShapeAnimation"),m.addEventListener("mouseover",function(t){m.setAttributeNS(null,"r",+o.plotradius+o.m_chart.m_hovershape)}),m.addEventListener("mouseout",function(){m.setAttributeNS(null,"r",+o.plotradius)})),$("#defsElement"+o.m_chart.m_objectid).append(l),$("#bubblegrp"+t+o.m_chart.m_objectid).append(m),$(m).attr("id","scatterplot"+o.m_chart.m_objectid+t+r),m.addEventListener("click",function(t){this.id;for(var i=r,e=0;e<o.m_chart.m_seriesData.length;e++)for(var s,a=0;a<o.m_chart.m_categoryData[0].length;a++)IsBoolean(o.m_chart.enableDrillHighlighter)&&(s="scatterplot"+o.m_chart.m_objectid+e+a,i==a?$("#"+s).css("opacity","1"):$("#"+s).css("opacity","0.5"))})}catch(t){}},Shape.prototype.drawPolygon=function(t,i){for(var e=this,s=this.xPosition,a=this.yPosition,r=this.plotradius,o=hex2rgb(this.color,this.transparency),h=[o,"transparent"],n=2*Math.PI/6,m="M"+ +r+" 0",l=1;l<=6;l++)m+=" L"+r*Math.cos(n*l)+" "+r*Math.sin(n*l);var c=document.createElementNS(NS,"path"),s=(c.setAttribute("transform","translate("+s+","+a+")"),c.setAttribute("d",m),c.setAttributeNS(null,"stroke-width",3),!!document.documentMode);if(IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_bubbleanimationduration&&!s){var _=document.createElementNS(NS,"linearGradient");_.setAttribute("id","LinearGradient"+e.m_chart.m_objectid+t+i);for(l=0;l<2;l++){var d=document.createElementNS(NS,"stop"),u=(d.setAttribute("offset","0"),d.setAttribute("stop-color",h[l]),drawSVGStackAnimation(0,"offset",r,10*e.m_chart.m_bubbleanimationduration));$(d).append(u),$(d).attr("class","pointShapeColorAnimation"),$(_).append(d)}$("#defsElement"+e.m_chart.m_objectid).append(_),o="url(#LinearGradient"+e.m_chart.m_objectid+t+i+")",$(c).attr("class","timeSeries-pointShapeHighlighter")}c.setAttributeNS(null,"fill",o),c.setAttributeNS(null,"stroke",o),$("#polygongrp"+i+e.m_chart.m_objectid).append(c)},Shape.prototype.drawStar=function(t,i){for(var e,s,a=this,r=this.xPosition,o=this.yPosition,h=this.plotradius,n=this.plotradius/2,m=Math.PI/2*3,l=Math.PI/5,c=hex2rgb(this.color,this.transparency),_=[c,"transparent"],d="M"+ +r+" "+(o-n),u=0;u<5;u++)e=+r+Math.cos(m)*n,s=+o+Math.sin(m)*n,m=+m+l,d=(d+=" L"+e+" "+s)+" L"+(+r+Math.cos(m)*h)+" "+(+o+Math.sin(m)*h),m=+m+l;d+=" L"+r+" "+(o-n);var p=document.createElementNS(NS,"path"),x=(p.setAttribute("d",d),p.setAttributeNS(null,"stroke-width",3),!!document.documentMode);if(IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_bubbleanimationduration&&!x){var y=document.createElementNS(NS,"linearGradient");y.setAttribute("id","LinearGradient"+a.m_chart.m_objectid+t+i);for(u=0;u<2;u++){var g=document.createElementNS(NS,"stop"),A=(g.setAttribute("offset","0"),g.setAttribute("stop-color",_[u]),drawSVGStackAnimation(0,"offset",this.plotradius,10*a.m_chart.m_bubbleanimationduration));$(g).append(A),$(g).attr("class","pointShapeColorAnimation"),$(y).append(g)}$("#defsElement"+a.m_chart.m_objectid).append(y),c="url(#LinearGradient"+a.m_chart.m_objectid+t+i+")",$(p).attr("class","timeSeries-pointShapeHighlighter")}p.setAttributeNS(null,"fill",c),p.setAttributeNS(null,"stroke",c),$("#stargrp"+i+a.m_chart.m_objectid).append(p)},Shape.prototype.drawLine=function(t,i){if(0==t){for(var e,s,a=this,r=this.computeControlPoints(this.m_chart.m_shapeSeries[i].xPositionArray),o=this.computeControlPoints(this.m_chart.m_shapeSeries[i].yPositionArray),h=a.m_chart.svgContainerId,n=(this.clipFillArea(),""),m=r.p1.length,t=0;t<m;t++)this.m_chart.m_shapeSeries[i].yPositionArray[t]<=a.m_chart.getStartY()&&this.m_chart.m_shapeSeries[i].yPositionArray[t]>=a.m_chart.getEndY()&&this.m_chart.m_shapeSeries[i].yPositionArray[t+1]<=a.m_chart.getStartY()&&this.m_chart.m_shapeSeries[i].yPositionArray[t+1]>=a.m_chart.getEndY()&&null!=(e=this.createBezierPath(this.m_chart.m_shapeSeries[i].xPositionArray[t],this.m_chart.m_shapeSeries[i].yPositionArray[t],r.p1[t],o.p1[t],r.p2[t],o.p2[t],this.m_chart.m_shapeSeries[i].xPositionArray[t+1],this.m_chart.m_shapeSeries[i].yPositionArray[t+1]))&&(n+=e);null!=n&&(s=this.getLineDashArray("straight",this.linewidth),(e=this.createPath(this.color,this.linewidth,s)).setAttributeNS(null,"d",n),$("#"+h).append(e),s=!!document.documentMode,IsBoolean(this.m_chart.m_enableanimation))&&!s&&this.setLineAnimation(e)}},Shape.prototype.setLineAnimation=function(t){var i,e,s,a;0<this.m_chart.m_bubbleanimationduration&&(t.style.strokeDashoffset="0",i=t.getTotalLength(),e=this.m_chart.m_bubbleanimationduration,t.style.transition=t.style.WebkitTransition="none",""!=(a=t.style.strokeDasharray||t.getAttribute("stroke-dasharray"))?(s=a.split(/[\s,]/).map(function(t){return parseFloat(t)||0}).reduce(function(t,i){return t+i}),a=new Array(Math.ceil(i/s)).join(a+" "),t.style.strokeDasharray=a+"0, "+s,t.style.strokeDashoffset=s*s):(t.style.strokeDasharray=i+" "+i,t.style.strokeDashoffset=i),t.getBoundingClientRect(),t.style.transition=t.style.WebkitTransition="stroke-dashoffset "+e+"s linear",t.style.strokeDashoffset="0")},Shape.prototype.clipFillArea=function(){var t=this,i=document.createElementNS("http://www.w3.org/2000/svg","defs"),e=document.createElementNS(NS,"clipPath"),s=(e.setAttribute("id","clipPath"+t.m_chart.m_objectid),document.createElementNS(NS,"rect"));s.setAttribute("x",t.m_chart.getStartX()),s.setAttribute("y",t.m_chart.getEndY()),s.setAttribute("width",t.m_chart.getEndX()-t.m_chart.getStartX()),s.setAttribute("height",t.m_chart.getStartY()-t.m_chart.getEndY()),s.setAttribute("fill","none"),e.appendChild(s),i.appendChild(e),$("#"+t.m_chart.svgContainerId).append(i)},Shape.prototype.createBezierPath=function(t,i,e,s,a,r,o,h){return""!==t&&""!==i&&""!==e&&""!==s&&""!==a&&""!==r&&""!==o&&""!==h?"M "+t+" "+i+" C "+e+" "+s+" "+a+" "+r+" "+o+" "+h:void 0},Shape.prototype.computeControlPoints=function(t){var i=new Array,e=new Array,s=t.length-1,a=new Array,r=new Array,o=new Array,h=new Array;r[a[0]=0]=2,o[0]=1,h[0]=t[0]+2*t[1];for(var n=1;n<s-1;n++)a[n]=1,r[n]=4,o[n]=1,h[n]=4*t[n]+2*t[n+1];a[s-1]=2,r[s-1]=7,o[s-1]=0,h[s-1]=8*t[s-1]+t[s];for(n=1;n<s;n++){var m=a[n]/r[n-1];r[n]=r[n]-m*o[n-1],h[n]=h[n]-m*h[n-1]}i[s-1]=h[s-1]/r[s-1];for(n=s-2;0<=n;--n)i[n]=(h[n]-o[n]*i[n+1])/r[n];for(n=0;n<s-1;n++)e[n]=2*t[n+1]-i[n+1];return e[s-1]=.5*(t[s]+i[s-1]),{p1:i,p2:e}},Shape.prototype.createPath=function(t,i,e){i=void 0===i?"3":i;var s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttributeNS(null,"fill","none"),s.setAttribute("stroke-dasharray",e),s.setAttributeNS(null,"stroke",t),s.setAttributeNS(null,"stroke-width",i),s},Shape.prototype.getLineDashArray=function(t,i){return"dot"===t?[+i,2*i+1,0,0]:"dash1"===t?[+i,+i,4*i,+i]:"dash"===t?[2*i,2*i+1,0,0]:[]},Shape.prototype.getColorValue=function(){return this.color=null==this.color?"#993366":this.color,ColorLuminance(this.color,this.m_chart.m_luminance)},PlotXAxis.prototype=new Xaxis,PlotXAxis.prototype.init=function(t){this.m_chart=t,this.ctx=this.m_chart.ctx,this.m_startX=this.m_chart.getStartX(),this.m_startY=this.m_chart.getStartY(),this.m_endX=this.m_chart.getEndX(),this.m_endY=this.m_chart.getEndY(),this.m_xAxisData=this.m_chart.getCategoryData()[0],this.m_axiscolor=convertColorToHex(this.m_chart.getAxisColor()),this.m_linexaxiscolor=""!==this.m_linexaxiscolor?convertColorToHex(this.m_linexaxiscolor):this.m_axiscolor,this.m_labelfontcolor=convertColorToHex(this.getLabelFontColor())},PlotXAxis.prototype.drawTickMarksForScatterPlotChart=function(){if(IsBoolean(this.m_tickmarks))for(var t=0;t<this.m_xAxisData.length;t++){var i=this.m_categorymarkingcolor,e=+this.m_startX+(this.m_endX-this.m_startX)/(this.m_xAxisData.length-1)*+t,s=+this.m_startY+1,a=+this.m_startX+(this.m_endX-this.m_startX)/(this.m_xAxisData.length-1)*+t,r=+this.m_startY+8,e=drawSVGLine(e,s,a,r,.5,i);$("#xaxistickgrp"+this.m_chart.m_objectId).append(e)}},PlotXAxis.prototype.drawVerticalLineForScatterPlotChart=function(){for(var t=this.m_xAxisActualMarkersArray,i=(this.m_endX-this.m_startX)/(t.length-1),e=0,s=t.length;e<s;e++){var a=parseInt(this.m_startX+i*e),r=parseInt(this.m_startY),o=parseInt(this.m_startX+i*e),h=parseInt(this.m_endY),a=drawSVGLine(a,r,o,h,"0.5",hex2rgb(this.m_chart.m_markercolor,this.m_chart.m_markertransparency));$("#verticallinegrp"+this.m_chart.m_objectId).append(a)}},PlotXAxis.prototype.markXaxis=function(){this.m_chart.createXAxisMarkerLabelGroup("xaxislabelgrp"),this.drawAxisLabels(),""!==this.getDescription()&&this.drawDescription()},PlotXAxis.prototype.drawDescription=function(){var t=this,i=drawSVGText(+this.getXDesc()+this.m_fontsize/2,this.getYDesc(),this.m_chart.formattedDescription(this.m_chart,this.getDescription()),convertColorToHex(this.getFontColor()),"middle","middle",0);$(i).css({"font-family":selectGlobalFont(t.getFontFamily()),"font-style":t.getFontStyle(),"font-size":t.m_chart.fontScaling(t.getFontSize())+"px","font-weight":t.getFontWeight(),"text-decoration":t.getTextDecoration()}),$("#"+this.m_chart.svgContainerId).append(i)},PlotXAxis.prototype.drawAxisLabels=function(){for(var t=0;t<this.m_xAxisData.length;t++)t%this.m_chart.m_skipxaxislabels!=0&&"auto"!=this.m_chart.m_skipxaxislabels||this.drawAxisLabelsForScatterPlotChart(this.m_xAxisData[t],t)},PlotXAxis.prototype.drawAxisLabelsForScatterPlotChart=function(t,i){var e=(this.m_chart.getEndX()-this.m_chart.getStartX())/(this.m_xAxisActualMarkersArray.length-1),s=this.calculateAxisToLabelMargin(i),a=this.calculateAxisLineToTextGap(),r=(IsBoolean(this.getLabelTilted())?(r=""!==this.getDescription()?this.m_fontsize:5,r=this.m_chart.m_height/4-r+this.m_chart.m_extraspace,this.getLabelrotation(),this.ctx.font=this.getLabelFontProperties(),this.ctx.measureText(t).width>r&&(t=this.getText(""+t,r,this.getLabelFontProperties()))):(r=(this.m_endX-this.m_startX)/this.m_xAxisData.length*2,2==this.m_chart.noOfRows&&(t=this.getText(""+t,r,this.getLabelFontProperties()))),+this.m_startX+e*i),s=+this.m_startY+a+ +s,a=(this.translateTextPosition(a,i,t,e),IsBoolean(this.getLabelTilted())?"left":"center"),t=drawSVGText(r,s,t,this.m_labelfontcolor,a,"middle",this.getLabelrotation());$("#xaxislabelgrp"+this.m_chart.m_objectid).append(t)},PlotXAxis.prototype.translateTextPosition=function(t,i,e,s){var a=this.getLabelrotation(),s=(this.getLabelTextWidth(e),+this.m_startX+s*i),i=this.calculateAxisToLabelMargin(i),t=+this.m_startY+ +t+ +i;this.translateText(a,s,t,e)},PlotXAxis.prototype.drawXAxis=function(){var t,i,e,s,a;IsBoolean(this.m_showlinexaxis)&&(t=this.m_linexaxiscolor,a=+this.m_startX-1-this.m_chart.m_axistodrawingareamargin,i=+this.m_startY+1+this.m_chart.m_axistodrawingareamargin,e=+this.m_endX,s=+this.m_startY+1+this.m_chart.m_axistodrawingareamargin,a=drawSVGLine(a,i,e,s,"0.5",t),$("#"+this.m_chart.svgContainerId).append(a))},PlotXAxis.prototype.zeroMarkerVerticalLineForScatterPlotChart=function(){for(var t=0;t<this.m_xAxisActualMarkersArray.length;t++)if(0==this.m_xAxisActualMarkersArray[t]){var i=hex2rgb(this.m_chart.m_verticalzeromarkercolor,this.m_chart.m_markertransparency),e=+this.m_startX+(this.m_endX-this.m_startX)/(this.m_xAxisActualMarkersArray.length-1)*+t,s=+this.m_startY,a=+this.m_startX+(this.m_endX-this.m_startX)/(this.m_xAxisActualMarkersArray.length-1)*+t,r=+this.m_endY,e=drawSVGLine(e,s,a,r,"0.5",i);$("#"+this.m_chart.svgContainerId).append(e);break}},PlotYAxis.prototype=new Axes,PlotYAxis.prototype.init=function(t,i){this.m_chart=t,this.ctx=this.m_chart.ctx,this.m_chartCalculation=i,this.m_startX=this.m_chart.getStartX(),this.m_startY=this.m_chart.getStartY(),this.m_endX=this.m_chart.getEndX(),this.m_endY=this.m_chart.getEndY(),this.m_yAxisText=this.m_chartCalculation.getYAxisText(),this.m_yAxisMarkersArray=this.m_chartCalculation.getYAxisMarkersArray(),this.setLeftAxisFormatters(),this.m_precision=this.m_chart.getPrecision(),this.m_secondaryAxisPrecision=this.m_chart.getSecondaryAxisPrecision(),this.m_isSecodaryAxis=!1,this.m_axiscolor=convertColorToHex(this.m_chart.getAxisColor()),this.m_lineyaxiscolor=""!==this.m_lineyaxiscolor?convertColorToHex(this.m_lineyaxiscolor):this.m_axiscolor,this.m_labelfontcolor=convertColorToHex(this.getLabelFontColor())},PlotYAxis.prototype.setLeftAxisFormatters=function(){this.m_isFormatter=!1,this.m_isSecondaryFormatter=!1,IsBoolean(this.m_chart.getFixedLabel())||IsBoolean(this.getLeftaxisFormater())&&(this.setFormatter(),this.setSecondaryFormatter())},PlotYAxis.prototype.setFormatter=function(){var t,i;this.m_unitSymbol="",this.m_formatterPosition="",this.m_isFormatter=!1,"none"!=this.m_chart.m_formater&&""!=this.m_chart.m_formater&&(t=this.m_chart.getFormater(),"none"!=(i=this.m_chart.getUnit()))&&""!=i&&(this.m_isFormatter=!0,this.m_unitSymbol=this.m_util.getFormatterSymbol(t,i),this.m_formatterPosition=this.m_chart.getSignPosition(),""==this.m_formatterPosition)&&(this.m_formatterPosition="suffix")},PlotYAxis.prototype.setSecondaryFormatter=function(){var t,i;this.m_secondaryUnitSymbol="",this.m_secondaryFormatterPosition="",this.m_isSecondaryFormatter=!1,"none"!=this.m_chart.m_secondaryformater&&""!=this.m_chart.m_secondaryformater&&(t=this.m_chart.getSecondaryFormater(),""!=(i=this.m_chart.getSecondaryUnit())&&"none"!=i&&null!=i&&(this.m_isSecondaryFormatter=!0,this.m_secondaryUnitSymbol=this.m_util.getFormatterSymbol(t,i)),this.m_secondaryFormatterPosition="suffix")},PlotYAxis.prototype.hasNegativeAxisMarker=function(t){var i=!1;return i=Array.isArray(t)&&0<t.length&&Math.min.apply(null,t)<0?!0:i},PlotYAxis.prototype.setPrecision=function(t,i){return 0!==t&&"default"!==i?(+t).toFixed(i):+t},PlotYAxis.prototype.addSecondaryFormater=function(t,i){return this.getSecondaryFormaterAddedText(t,i).toString()},PlotYAxis.prototype.getSecondaryFormaterAddedText=function(textValue,secondaryUnitSymbol){var formattedText=textValue;try{eval("var formattedText = this.m_util.addUnitAs"+this.m_secondaryFormatterPosition+"(textValue,secondaryUnitSymbol);")}catch(e){}return formattedText},PlotYAxis.prototype.horizontalMarkerLines=function(){for(var t=0;t<this.m_yAxisMarkersArray.length;t++){var i=hex2rgb(this.m_chart.m_markercolor,this.m_chart.m_markertransparency),e=+this.m_startX-this.m_chart.m_axistodrawingareamargin,s=+this.m_startY-this.getYAxisDiv()*t,a=+this.m_endX,r=+this.m_startY-this.getYAxisDiv()*t,e=drawSVGLine(e,s,a,r,"0.5",i);$("#horizontallinegrp"+this.m_chart.m_objectid).append(e)}},PlotYAxis.prototype.getYAxisDiv=function(){return(this.m_startY-this.m_endY)/(this.m_yAxisMarkersArray.length-1)},PlotYAxis.prototype.markYaxis=function(){this.m_axislinetotextgap=IsBoolean(this.m_chart.m_updateddesign)?15:this.m_axislinetotextgap;for(var t=[],i=0;i<this.m_yAxisMarkersArray.length;i++){var e=this.m_yAxisMarkersArray[i];IsBoolean(this.m_chart.m_fixedlabel)?e=getNumberFormattedValue(e):IsBoolean(this.m_isSecodaryAxis)?IsBoolean(this.getRightAxisFormater())&&(e=this.getSecondaryAxisFormattedText(e,this.m_secondaryAxisPrecision)):e=this.getFormattedText(e,this.m_precision),t.push(e)}for(var s=0;s<t.length;s++){var a=+this.m_startX-this.m_chart.m_axistodrawingareamargin-this.m_axislinetotextgap,r=+this.m_startY-s*this.getYAxisDiv(),e=drawSVGText(a,r,t[s],this.m_labelfontcolor,"right","middle",this.getLabelrotation());$("#yaxislabelgrp"+this.m_chart.m_objectid).append(e)}""!=this.getDescription()&&this.drawDescription()},PlotYAxis.prototype.getFormattedText=function(t,i){var e,s,i="undefined"==i||null==i?this.m_chart.m_precision:i;return t%1!=0&&i<1?t=this.setPrecision(t,0):IsBoolean(this.m_isFormatter)||IsBoolean(this.m_isSecondaryFormatter)||"default"!==i&&(t=this.setPrecision(t,i)),"none"!=this.m_chart.m_formater&&""!=this.m_chart.m_formater||"none"!=this.m_chart.m_secondaryformater&&""!=this.m_chart.m_secondaryformater||(t=this.setPrecision(t,i)),IsBoolean(this.m_isFormatter)&&(t=this.m_util.updateTextWithFormatter(t,this.m_unitSymbol,i)),IsBoolean(this.m_isSecondaryFormatter)&&"Number"==this.m_chart.m_secondaryformater&&(t=this.m_util.updateTextWithFormatter(t,this.m_secondaryUnitSymbol,i)),IsBoolean(this.m_isSecondaryFormatter)&&(t="auto"!=this.m_secondaryUnitSymbol?(0!=i&&null!=i?t=this.setPrecision(t,i):t<1&&t%1!=0&&(t=this.setPrecision(t,2)),t=t%1==0&&"default"===this.m_precision?+t:t,this.addSecondaryFormater(t,this.m_secondaryUnitSymbol)):(e=getNumberFormattedSymbol(+t,this.m_chart.m_unit),s=getNumberFormattedNumericValue(+t,i,this.m_chart.m_unit),t=this.setPrecision(s,i),0!=i&&null!=i?t=this.setPrecision(t,i):t<1&&t%1!=0&&(t=this.setPrecision(t,2)),t=t%1==0&&"default"===this.m_precision?+t:t,this.addSecondaryFormater(t,e))),t=getFormattedNumberWithCommas(t,this.m_chart.m_numberformatter),t=IsBoolean(this.m_isFormatter)&&null!=this.m_unitSymbol?this.m_util.addFormatter(t,this.m_unitSymbol,this.m_formatterPosition,i):t},PlotYAxis.prototype.drawDescription=function(){var t=this,i=drawSVGText(this.getXDesc(),this.getYDesc(),this.m_chart.formattedDescription(this.m_chart,this.getDescription()),convertColorToHex(this.getFontColor()),"middle","middle",270);$(i).css({"font-family":selectGlobalFont(t.getFontFamily()),"font-style":t.getFontStyle(),"font-size":t.m_chart.fontScaling(t.getFontSize())+"px","font-weight":t.getFontWeight(),"text-decoration":t.getTextDecoration()}),$("#"+t.m_chart.svgContainerId).append(i)},PlotYAxis.prototype.getXDesc=function(){return+this.m_chart.m_x+ +this.m_chart.fontScaling(this.getFontSize())+ +this.m_chart.m_chartpaddings.leftBorderToDescription/2},PlotYAxis.prototype.getYDesc=function(){return this.m_startY-(this.m_startY-this.m_endY)/2},PlotYAxis.prototype.zeroMarkerLine=function(){for(var t=0;t<this.m_yAxisMarkersArray.length;t++)if(0==this.m_yAxisMarkersArray[t]){var i=hex2rgb(this.m_chart.m_zeromarkercolor,this.m_chart.m_markertransparency),e=+this.m_startX-this.m_chart.m_axistodrawingareamargin,s=+this.m_startY-this.getYAxisDiv()*t,a=+this.m_endX,r=+this.m_startY-this.getYAxisDiv()*t,e=drawSVGLine(e,s,a,r,"0.5",i);$("#"+this.m_chart.svgContainerId).append(e);break}},PlotYAxis.prototype.drawYAxis=function(){var t,i,e,s,a;IsBoolean(this.m_showlineyaxis)&&(t=this.m_lineyaxiscolor,a=+this.m_startX-this.m_chart.m_axistodrawingareamargin-1,i=+this.m_startY+1+this.m_chart.m_axistodrawingareamargin,e=+this.m_startX-this.m_chart.m_axistodrawingareamargin-1,s=+this.m_endY,a=drawSVGLine(a,i,e,s,"0.5",t),$("#"+this.m_chart.svgContainerId).append(a))};
//# sourceMappingURL=ScatteredPlotChart.min.js.map