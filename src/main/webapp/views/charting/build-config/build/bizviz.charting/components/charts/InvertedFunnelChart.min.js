/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function InvertedFunnelChart(e,t){this.base=Chart,this.base(),this.m_x=20,this.m_y=20,this.m_width=400,this.m_height=300,this.m_layerXpositionArray=[],this.m_layerYpositionArray=[],this.m_layerWidthArray=[],this.m_layerHeightArray=[],this.m_layerXLeftpositionArray=[],this.m_layerXRightpositionArray=[],this.m_layerXCenterpositionArray=[],this.m_seriesDataAndLegendName=[],this.m_layer=new Layer,this.m_yAxis=new Yaxis,this.m_layerCalculation=new LayerCalculation,this.m_showlayervalue=!1,this.m_chartContainer=e,this.m_zIndex=t,this.m_legendShape="triangle",this.calculatedPercent=[]}InvertedFunnelChart.prototype=new Chart,InvertedFunnelChart.prototype.ParseJsonAttributes=function(e,t){for(var i in this.chartJson=e)if("Funnel"==i)for(var s in e[i])switch(s){case"Title":for(var a in e[i][s]){var r=this.getNodeAttributeName(a);t.m_title[r]=e[i][s][a]}break;case"SubTitle":for(var l in e[i][s]){var r=this.getNodeAttributeName(l);t.m_subTitle[r]=e[i][s][l]}break;case"legends":for(var h in e[i][s])t[r=this.getNodeAttributeName(h)]=e[i][s][h];break;default:t[r=this.getNodeAttributeName(s)]=e[i][s]}else t[r=this.getNodeAttributeName(i)]=e[i]},InvertedFunnelChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},InvertedFunnelChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEvent()},InvertedFunnelChart.prototype.setProperty=function(e){this.ParseJsonAttributes(e.Object,this),this.initCanvas()},InvertedFunnelChart.prototype.setFields=function(e){this.m_fieldsJson=e;for(var t=[],i=[],s=0;s<e.length;s++)switch(this.getProperAttributeNameValue(e[s],"Type")){case"Category":t.push(e[s]);break;case"Series":case"CalculatedField":i.push(e[s])}this.setCategory(t),this.setSeries(i)},InvertedFunnelChart.prototype.setCategory=function(e){this.m_categoryNames=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr={};for(var t=0,i=0;i<e.length;i++){this.m_allCategoryNames[i]=this.getProperAttributeNameValue(e[i],"Name");var s=this.formattedDescription(this,this.getProperAttributeNameValue(e[i],"DisplayName"));this.m_allCategoryDisplayNames[i]=s,this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[i]]=this.getProperAttributeNameValue(e[i],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[i]])&&(this.m_categoryNames[t]=this.getProperAttributeNameValue(e[i],"Name"),this.m_categoryDisplayNames[t]=s,t++)}},InvertedFunnelChart.prototype.setSeries=function(e){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors=[],this.m_legendNames=[],this.m_seriesVisibleArr={},this.m_visibleSeriesNames={},this.m_plotTrasparencyArray=[],this.m_seriesDataLabelProperty=[],this.m_additionalDataField={},this.legendMap={};for(var t=0;t<e.length;t++){this.m_seriesNames[t]=this.getProperAttributeNameValue(e[t],"Name");var i=this.formattedDescription(this,this.getProperAttributeNameValue(e[t],"DisplayName")),i=(this.m_legendNames[t]=i,this.m_seriesDisplayNames[t]=i,this.m_seriesColors[t]=convertColorToHex(this.getProperAttributeNameValue(e[t],"Color")),this.m_seriesVisibleArr[this.m_seriesDisplayNames[t]]=this.getProperAttributeNameValue(e[t],"visible"),this.m_visibleSeriesNames[this.m_seriesNames[t]]=this.getProperAttributeNameValue(e[t],"visible"),this.getProperAttributeNameValue(e[t],"PlotTransparency")),i=(this.m_plotTrasparencyArray[t]=null==i||null===i||""===i||isNaN(i)?1:i,this.m_seriesDataLabelProperty[t]=this.getProperAttributeNameValue(e[t],"DataLabelCustomProperties"),void 0!==this.getProperAttributeNameValue(e[t],"AdditionalField")?this.getProperAttributeNameValue(e[t],"AdditionalField"):""),i=(this.m_additionalDataField[this.m_seriesNames[t]]=i.split(","),void 0!==this.m_seriesDataLabelProperty[t]?IsBoolean(this.m_seriesDataLabelProperty[t].dataLabelUseComponentFormater)&&(this.m_seriesDataLabelProperty[t].datalabelFormaterCurrency=this.m_unit,this.m_seriesDataLabelProperty[t].datalabelFormaterPrecision=this.m_precision,this.m_seriesDataLabelProperty[t].datalabelFormaterPosition=this.m_signposition,this.m_seriesDataLabelProperty[t].datalabelFormaterUnit=this.m_secondaryunit):(this.m_seriesDataLabelProperty[t]=this.getDataLabelProperties(),this.m_seriesDataLabelProperty[t].showDataLabel=IsBoolean(this.m_showlayervalue)?"true":this.m_seriesDataLabelProperty[t].showDataLabel),{seriesName:this.m_seriesNames[t],displayName:this.m_seriesDisplayNames[t],color:this.m_seriesColors[t],shape:"point",index:t});this.legendMap[this.m_seriesNames[t]]=i}},InvertedFunnelChart.prototype.getLegendInfo=function(){return this.legendMap},InvertedFunnelChart.prototype.setLegendNames=function(e){this.m_legendNames=e},InvertedFunnelChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var e=0;e<this.getCategoryNames().length;e++)this.m_allfieldsName.push(this.getCategoryNames()[e]);for(var t=0;t<this.getSeriesNames().length;t++)this.m_allfieldsName.push(this.getSeriesNames()[t])},InvertedFunnelChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var e=0;e<this.getCategoryDisplayNames().length;e++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[e]);for(var t=0;t<this.getSeriesDisplayNames().length;t++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[t])},InvertedFunnelChart.prototype.setCategoryData=function(){if(this.m_categoryData=[],this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var e=0;e<this.getCategoryNames().length;e++)this.m_categoryData[e]=this.getDataFromJSON(this.getCategoryNames()[e])}},InvertedFunnelChart.prototype.setSeriesData=function(){this.m_seriesData=[];var e=[];if(this.multiSeriesData=[],this.m_isEmptySeries=!0,0<this.getSeriesNames().length){this.m_isEmptySeries=!1;for(var t=0,i=0;i<this.getSeriesNames().length;i++)this.m_seriesVisibleArr[this.getSeriesDisplayNames()[i]]&&(e[t]=this.getDataFromJSON(this.getSeriesNames()[i]),t++);for(var t=0,s=e[0].length;t<s;t++){this.multiSeriesData[t]=[];for(var a=0,r=e.length;a<r;a++)this.multiSeriesData[t][a]=e[a][t]}for(var l=0,s=this.multiSeriesData.length;l<s;l++)this.m_seriesData.push(this.getArraySUM(this.multiSeriesData[l]))}},InvertedFunnelChart.prototype.getArraySUM=function(e){for(var t=0,i=0,s=e.length;i<s;i++)e[i]<0&&(e[i]=-1*e[i]),isNaN(e[i])||(t=+t+ +e[i]);return t},InvertedFunnelChart.prototype.setSeriesColor=function(e){for(var t=this.m_seriescolor.split(","),i=(this.seriesColors=[],this.getSeriesData().length-1),s=0,a=0;s<=i;s++){var r=t[s]||this.seriesColors[i-a++];this.seriesColors[i-s]=convertColorToHex(r)}},InvertedFunnelChart.prototype.getDataProvider=function(){return this.m_dataProvider},InvertedFunnelChart.prototype.getCategoryNames=function(){return this.m_categoryNames},InvertedFunnelChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},InvertedFunnelChart.prototype.getSeriesNames=function(){return this.m_seriesNames},InvertedFunnelChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},InvertedFunnelChart.prototype.getLegendNames=function(){return this.m_legendNames},InvertedFunnelChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},InvertedFunnelChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},InvertedFunnelChart.prototype.getCategoryData=function(){return this.m_categoryData},InvertedFunnelChart.prototype.getSeriesData=function(){return this.m_seriesData},InvertedFunnelChart.prototype.getSeriesColor=function(){return this.seriesColors},InvertedFunnelChart.prototype.getSeriesColors=function(){return null==this.visibleSeriesColors?this.m_seriesColors:this.visibleSeriesColors},InvertedFunnelChart.prototype.init=function(){this.setCategoryData(),this.setSeriesData(),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.setSeriesColor(),this.isSeriesDataEmpty(),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),IsBoolean(this.m_isEmptySeries)||IsBoolean(this.isEmptyCategory)||(this.setPercentageForHundred(),this.initializeCalculation(),this.setVisibleData()),this.initializeToolTipProperty(),this.m_tooltip.init(this)},InvertedFunnelChart.prototype.initializeCalculation=function(){if(this.m_categoryData=this.updateCategoryData(this.m_categoryData),this.m_legendNames=this.m_categoryData,this.m_seriesColor=this.getSeriesColor(),this.multiSeriesData=this.updateSeriesData(this.multiSeriesData),!IsBoolean(this.m_isEmptySeries)){this.m_seriesDataAndLegendName=[];for(var e=0;e<this.getSeriesNames().length;e++)if(IsBoolean(this.m_seriesVisibleArr[this.m_seriesDisplayNames[e]])){for(var t=0;t<this.m_seriesData.length;t++)this.m_seriesDataAndLegendName[t]=[],this.m_seriesDataAndLegendName[t][0]=this.m_seriesData[t],this.m_seriesDataAndLegendName[t][1]=this.m_legendNames[t][0],this.m_seriesDataAndLegendName[t][2]=this.m_seriesColor[t],this.m_seriesDataAndLegendName[t][3]=this.m_categoryData[t][0],this.m_seriesDataAndLegendName[t][4]=this.m_displaySeriesDataFlag[t],this.m_seriesDataAndLegendName[t][5]=this.seriesDataPercent[t],this.m_seriesDataAndLegendName[t][6]=this.multiSeriesData[t],this.m_seriesDataAndLegendName[t][7]=this.getDataProvider()[t];break}this.m_seriesDataAndLegendName.sort(function(e,t){return e[0]-t[0]});for(var i=[],s=[],a=[],r=[],l=[],h=[],o={},n=0;n<this.m_seriesDataAndLegendName.length;n++)s.push(this.m_seriesDataAndLegendName[n][1]),i.push(this.m_seriesDataAndLegendName[n][0]),a.push(this.m_seriesDataAndLegendName[n][3]),r.push(this.m_seriesDataAndLegendName[n][4]),l.push(this.m_seriesDataAndLegendName[n][5]),h.push(this.m_seriesDataAndLegendName[n][6]),o[n]=this.m_seriesDataAndLegendName[n][7];this.m_seriesValue=i,this.m_displaySeriesDataInToolTipFlagArray=r,this.visibleLegend=s,this.m_categoryValue=a,this.m_percentSeries=l,this.m_seriesDataArray=h,this.allDataObj=o,this.m_layerCalculation.init(this),this.m_layer.init(this),this.m_yAxis.init(this,this.m_layerCalculation),this.startX=this.m_width/2*1+ +this.m_x;var m=this.mapSeriesWithCategory(a,i,s,this.m_seriesColor);this.startY=+this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle(),this.funnelWidth=3*this.m_width/4,this.funnelHeight=this.m_layerCalculation.getFunnelHeight(),this.sliceGap=this.m_layerCalculation.sliceSpace(m.ser),this.visibleSeriesData=m.ser,this.visibleSeries=this.m_layerCalculation.updatedSeriesValue(m.ser),this.angle=this.m_layerCalculation.angle(),this.setMapForDrill(m.ser,m.cat),this.calculatedPercent=this.m_layerCalculation.getCalculatePercent(m.ser)}},InvertedFunnelChart.prototype.setPercentageForHundred=function(){var e=this.multiSeriesData,t=(this.m_SeriesDataInPerForHundredChart,[]);this.seriesDataPercent=[];for(var i=0,s=e.length;i<s;i++){var a=this.getArraySUM(e[i]);t[i]=[];for(var r=0,l=e[i].length;r<l;r++)""===e[i][r]||isNaN(e[i][r])||0==a?"identicalStack"==this.m_charttype?t[i][r]=100/e[i].length:t[i][r]=0:"identicalStack"==this.m_charttype?t[i][r]=100/e[i].length:t[i][r]=e[i][r]/a*100}this.seriesDataPercent=t},InvertedFunnelChart.prototype.setVisibleData=function(){this.seriesDisplayName=[],this.visibleCategoryNames=[],this.seriesData=[],this.seriesPercent=[],this.allDataObjects={};var e=[];this.m_legendNames.length=0,this.visibleTrasparency=[],this.m_visibleseriesdatalabel=[];for(var t=0,i=0;i<this.getSeriesNames().length;i++)this.m_seriesVisibleArr[this.getSeriesDisplayNames()[i]]&&(this.seriesDisplayName[t]=this.getSeriesDisplayNames()[i],this.visibleTrasparency[t]=this.m_plotTrasparencyArray[i],this.m_visibleseriesdatalabel[t]=this.m_seriesDataLabelProperty[i],t++);for(var t=0,s=0;s<this.m_categoryValue.length;s++)this.m_seriesVisibleArr[this.m_categoryValue[s]]&&(this.visibleCategoryNames[t]=this.m_categoryValue[s],this.seriesData[t]=this.m_seriesDataArray[s],this.seriesPercent[t]=this.m_percentSeries[s],this.allDataObjects[t]=this.allDataObj[s],e[t]=this.visibleLegend[s],t++);this.m_legendNames=e},InvertedFunnelChart.prototype.mapSeriesWithCategory=function(e,t,i,s){var a=e,r=t,l=!0;if(this.m_defaultlegendfields&&!IsBoolean(this.m_designMode))for(var h=0;h<this.m_defaultlegendfields.length&&0!=(l=this.m_defaultlegendfields[h].value);h++);for(var o=0;o<a.length;o++)null==this.m_seriesVisibleArr[a[o]]&&(this.m_seriesVisibleArr[a[o]]=l);this.visibleCategories=[],this.visibleSeries=[],this.visibleSeriesColors=[],this.visibleSeriesNames=[],this.legendMap={};for(h=0,o=0;o<a.length;o++){this.m_seriesVisibleArr[a[o]]&&(this.visibleCategories[h]=a[o],this.visibleSeriesColors[h]=s[o],this.visibleSeries[h]=r[o],h++);var n={seriesName:a[o],displayName:a[o],color:s[o],shape:this.m_legendShape};this.legendMap[a[o]]=n}for(var h=0,m=0;m<this.getSeriesNames().length;m++)this.m_visibleSeriesNames[this.getSeriesNames()[m]]&&(this.visibleSeriesNames[h]=this.getSeriesNames()[m],h++);return{cat:this.visibleCategories,ser:this.visibleSeries,color:this.visibleSeriesColors}},InvertedFunnelChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.drawLegends();var e=this.IsDrawingPossible();IsBoolean(e.permission)?(this.drawInvertedFunnel(),this.drawValueOnLayers()):this.drawMessage(e.message)},InvertedFunnelChart.prototype.IsDrawingPossible=function(){return IsBoolean(this.isEmptyCategory)?{permission:"false",message:this.m_status.noCategory}:IsBoolean(this.m_isEmptySeries)?{permission:"false",message:this.m_status.noData}:IsBoolean(this.isVisibleSeriesAvailable())&&0<this.visibleSeries.length?{permission:"true",message:this.m_status.success}:{permission:"false",message:this.m_status.noSeries}},InvertedFunnelChart.prototype.drawTitle=function(){this.m_title.draw()},InvertedFunnelChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},InvertedFunnelChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},InvertedFunnelChart.prototype.isSeriesDataAvailable=function(e){return!!IsBoolean(e.associatedChartObject.m_isrepeater)||0<e.associatedChartObject.m_seriesData.length},InvertedFunnelChart.prototype.drawInvertedFunnel=function(){if(this.m_seriescolorforFunnel=this.updateSeriesColor(this.visibleSeriesColors),this.m_layerYpositionArray=[],this.m_layerXpositionArray=[],this.m_layerWidthArray=[],this.m_layerHeightArray=[],this.m_layerXLeftpositionArray=[],this.m_layerXRightpositionArray=[],this.m_layerXCenterpositionArray=[],this.yPos=[],this.perviousValue=0,this.currentValue=0,"identicalStack"==this.m_charttype)for(var e=0;e<this.visibleSeries.length;e++)e<1?(this.currentValue=+this.visibleSeries[e],this.m_layer.drawFirstSliceOfIdenticalStackFunnel(e,this.currentValue,this.m_seriescolorforFunnel[e],this.seriesPercent,this.visibleTrasparency)):(this.perviousValue=this.currentValue,this.currentValue=+this.perviousValue+ +this.visibleSeries[e]+ +this.sliceGap,this.m_layer.drawOtherSlicesOfIdenticalStackFunnel(e,this.perviousValue,this.currentValue,this.m_seriescolorforFunnel[e],this.seriesPercent,this.visibleTrasparency));else for(e=0;e<this.visibleSeries.length;e++)e<1?(this.currentValue=+this.visibleSeries[e],this.m_layer.drawFirstSlice(e,this.currentValue,this.m_seriescolorforFunnel[e],this.seriesPercent,this.visibleTrasparency)):(this.perviousValue=this.currentValue,this.currentValue=+this.perviousValue+ +this.visibleSeries[e]+ +this.sliceGap,this.m_layer.drawOtherSlices(e,this.perviousValue,this.currentValue,this.m_seriescolorforFunnel[e],this.seriesPercent,this.visibleTrasparency))},InvertedFunnelChart.prototype.getDataLabel=function(){var e,t=[];for(e in this.allDataObjects)for(var i=this.allDataObjects[e],s=0,a=this.seriesDisplayName.length;s<a;s++){t[s]||(t[s]=[]);var r=this.getValidFieldDataFromRecord(i,this.m_visibleseriesdatalabel[s].datalabelField);t[s][e]=r}return t[0]},InvertedFunnelChart.prototype.drawValueOnLayers=function(){if(IsBoolean(this.m_visibleseriesdatalabel[0].showDataLabel))for(var e=IsBoolean(this.m_showlayervalue)?this.getRoundValue(this.calculatedPercent,100):this.getDataLabel(),t=0;t<this.m_layerXpositionArray.length;t++){this.ctx.beginPath(),this.ctx.fillStyle=this.m_visibleseriesdatalabel[0].dataLabelFontColor,this.ctx.font=this.m_visibleseriesdatalabel[0].datalabelFontStyle+" "+this.m_visibleseriesdatalabel[0].datalabelFontWeight+" "+this.fontScaling(this.m_visibleseriesdatalabel[0].dataLabelFontSize)+"px "+selectGlobalFont(this.m_visibleseriesdatalabel[0].datalabelFontFamily),this.ctx.textAlign="left";var i,s=IsBoolean(this.m_showlayervalue)?e[t]+"%":this.getFormattedText(e[t]),a=this.ctx.measureText(s).width,r="",r=t%2==0||0==t?(i=+this.m_layerXRightpositionArray[t],+this.m_layerXRightpositionArray[t]+10):(i=+this.m_layerXLeftpositionArray[t],+this.m_layerXLeftpositionArray[t]-10),l=0==t?+this.m_layerYpositionArray[t]:t!==this.m_layerXpositionArray.length-1?+this.m_layerYpositionArray[t]+(+this.m_layerYpositionArray[t+1]-+this.m_layerYpositionArray[t])/2-+this.sliceGap:+this.m_layerYpositionArray[t]+(this.startY+(+this.currentValue+ +this.sliceGap)-+this.m_layerYpositionArray[t])/2-+this.sliceGap,h=l,h=(this.ctx.lineWidth=1,this.ctx.strokeStyle=this.m_visibleseriesdatalabel[0].dataLabelFontColor,this.ctx.moveTo(i,l),this.ctx.lineTo(r,h),this.ctx.stroke(),t%2==0||0==t?r+3:r-+a-3),r=(t%2==0||0==t?this.getupdatetext(h,a,s,r+3+ +a,"width"):this.getupdatetext(h,a,s,i-3)).text,h=t%2==0||0==t?h:this.getupdatetext(h,a,s,i-3).textPosition;this.ctx.fillText(r,h,l),this.ctx.fill(),this.ctx.closePath()}this.m_additionalDataField&&0<this.m_additionalDataField[this.visibleSeriesNames[0]].length&&this.drawAdditionalDataLabel()},InvertedFunnelChart.prototype.drawAdditionalDataLabel=function(e){var t=this.m_additionalDataField[this.visibleSeriesNames[0]];if(0<t.length)for(e=0;e<this.m_layerXpositionArray.length;e++){this.ctx.beginPath(),this.ctx.fillStyle=this.m_visibleseriesdatalabel[0].dataLabelFontColor,this.ctx.font=this.m_visibleseriesdatalabel[0].datalabelFontStyle+" "+this.m_visibleseriesdatalabel[0].datalabelFontWeight+" "+this.fontScaling(this.m_visibleseriesdatalabel[0].dataLabelFontSize)+"px "+selectGlobalFont(this.m_visibleseriesdatalabel[0].datalabelFontFamily),this.ctx.textAlign="center";for(var i=.5*this.m_layerHeightArray[e],s=0==e?+this.m_layerYpositionArray[e]+i:e!==this.m_layerXpositionArray.length-1?+this.m_layerYpositionArray[e]+(+this.m_layerYpositionArray[e+1]-+this.m_layerYpositionArray[e])/(1.5*t.length)-+this.sliceGap:+this.m_layerYpositionArray[e]+(this.startY+(+this.currentValue+ +this.sliceGap)-+this.m_layerYpositionArray[e])/(1.5*t.length)-+this.sliceGap,a=+this.m_layerWidthArray[e]-2,r=+this.m_layerXCenterpositionArray[e],l=0,h=0;h<t.length;h++)if(this.allDataObjects[e][t[h]]){var o=this.allDataObjects[e][t[h]].toString(),o=isNaN(o)||""===o?o:this.getFormattedText(o);if(a<this.ctx.measureText(o).width)for(var n="",m=0;m<o.length;m++){if(!(a>this.ctx.measureText(n+o[m]+"..").width)){n+="..";break}n+=o[m]}else n=o;l=0==h?l:l+this.m_visibleseriesdatalabel[0].dataLabelFontSize*(0==e?1.04:1.25),this.ctx.fillText(n,2+r,s+l),this.ctx.fill(),this.ctx.closePath()}}},InvertedFunnelChart.prototype.getFormattedText=function(e){var t,i,s,a,r,l,h;return isNaN(getNumericComparableValue(e))?e:((""+e).indexOf(","),t=""!=this.m_visibleseriesdatalabel[0].datalabelFormaterPosition?this.m_visibleseriesdatalabel[0].datalabelFormaterPosition:"suffix",i=this.m_visibleseriesdatalabel[0].datalabelFormaterPrecision,r=this.m_visibleseriesdatalabel[0].datalabelFormaterCurrency,a=this.m_visibleseriesdatalabel[0].datalabelFormaterUnit,h="default"===i?+getNumericComparableValue(e):(+getNumericComparableValue(e)).toFixed(i),""!=r?(s=this.m_util.getFormatterSymbol("Currency",r),"auto"==(a=this.m_util.getFormatterSymbol("Number",a))?(e=getNumericComparableValue(e,r),r=getNumberFormattedSymbol(+e,r),l=getNumberFormattedNumericValue(+e,i),l=this.m_util.updateTextWithFormatter(l,"",i),h=this.m_util.addFormatter(l,r,"suffix")):(h=this.m_util.updateTextWithFormatter(h,a,i),"none"!=a&&""!=a&&(h=this.m_util.addFormatter(h,a,"suffix"))),"NaN"==h||""===h?"":this.m_util.addFormatter(getFormattedNumberWithCommas(h,this.m_numberformatter),s,t)):"NaN"==h?e:h)},InvertedFunnelChart.prototype.getupdatetext=function(e,t,i,s,a){var r,l=e,h=i;return e<1&&(r=s-(l=2),h=this.calculateTitleWidth(i,r)),"width"===a&&s>=this.m_width&&(r=this.m_width-l-2,h=this.calculateTitleWidth(i,r)),{text:h,textPosition:l}},InvertedFunnelChart.prototype.calculateTitleWidth=function(e,t){for(var i,s=e.split(""),a=t-30,r=0,l="",h=0,o="12px "+this.m_defaultfontfamily,n=0;n<s.length;n++)r<a?(l+=s[n],r=(i=$("<div>"+l+"</div>").css({position:"absolute",float:"left","white-space":"nowrap",visibility:"hidden",font:o}).appendTo($("body"))).width(),i.remove()):h++;return 0!=h&&(l+=".."),l},InvertedFunnelChart.prototype.updateSeriesData=function(e){var t=[];if(this.m_displaySeriesDataFlag=[],null!=e&&null!==e&&""!==e&&0!=e.length)for(var i=0;i<e.length;i++){t[i]=[],this.m_displaySeriesDataFlag[i]=[];for(var s=0;s<e[0].length;s++)this.m_displaySeriesDataFlag[i][s]=!0,isNaN(e[i][s])?(this.m_displaySeriesDataFlag[i][s]=!1,t[i][s]=getNumericComparableValue(e[i][s]),isNaN(t[i][s])&&(t[i][s]=0)):t[i][s]=e[i][s]}return t},InvertedFunnelChart.prototype.setMapForDrill=function(e,t){for(var i=this.getDataProvider(),s=!(this.m_updateDataForDrill=[]),a=0;a<t.length;a++)for(var r=0;r<i.length;r++){for(var l in i[r])if(t[a]==i[r][l]){this.m_updateDataForDrill.push(i[r]),s=!0;break}if(Array,IsBoolean(s)){s=!1;break}}},InvertedFunnelChart.prototype.getMapForDrill=function(){return this.m_updateDataForDrill},InvertedFunnelChart.prototype.isVisibleSeriesAvailable=function(){for(var e=0;e<this.getSeriesNames().length;e++)if(IsBoolean(this.m_seriesVisibleArr[this.m_seriesDisplayNames[e]]))return!0;return!1},InvertedFunnelChart.prototype.reverseSeries=function(e){for(var t=[],i=e.length-1;0<=i;i--)t.push(e[i]);return t},InvertedFunnelChart.prototype.initializeSeriesValues=function(){for(var e=[],t=0;t<this.m_seriesData[0].length;t++){e[t]=[];for(var i=0;i<this.m_seriesData.length;i++)e[t][i]=this.m_seriesData[i][t]}this.m_seriesData=e},InvertedFunnelChart.prototype.updateCategoryData=function(e){var t=[];if(null!=e&&null!==e&&""!==e&&0!=e.length)for(var i=0;i<e[0].length;i++){t[i]=[];for(var s=0;s<e.length;s++)t[i][s]=e[s][i]}return t},InvertedFunnelChart.prototype.updateSeriesColor=function(e){var t=[];if(null!=e&&null!==e&&""!==e&&0!=e.length)for(var i=0;i<e.length;i++){t[i]=[];for(var s=0;s<e.length;s++)t[i][s]=convertColorToHex(e[i])}return t},InvertedFunnelChart.prototype.getDrillDataPoints=function(e,t){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeriesAvailable()))for(var i=0;i<this.visibleSeries.length;i++)if(e>=+this.startX-this.funnelWidth/2&&e<=+this.startX+ +this.funnelWidth/2&&t>=+this.m_layerYpositionArray[i]-7)if(i==this.visibleSeries.length-1){if(t<=+this.m_layerYpositionArray[i]+ +this.visibleSeries[i]+7)for(i=this.m_layerYpositionArray.length;0<=i;i--)if(t>=this.m_layerYpositionArray[i])for(var s=0,a=this.yPos[i].length;s<a;s++)if(t>=this.m_layerYpositionArray[i]&&t<=+this.yPos[i][s])return r=this.getFieldNameValueMap(i),l=this.visibleSeriesColors[i],h=this.visibleSeriesNames[s],o=this.seriesDisplayName[s],n=r[h],r.drillField=h,r.drillDisplayField=o,r.drillValue=n,{drillRecord:r,drillColor:l}}else if("0"==i){if(t>=+this.m_layerYpositionArray[i]&&t<=+this.m_layerYpositionArray[i]+ +this.visibleSeries[i]-1)for(i=this.m_layerYpositionArray.length;0<=i;i--)if(t>=this.m_layerYpositionArray[i])for(s=0,a=this.yPos[i].length;s<a;s++)if(t>=this.m_layerYpositionArray[i]&&t<=+this.yPos[i][s])return r=this.getFieldNameValueMap(i),l=this.visibleSeriesColors[i],h=this.visibleSeriesNames[s],o=this.seriesDisplayName[s],n=r[h],r.drillField=h,r.drillDisplayField=o,r.drillValue=n,{drillRecord:r,drillColor:l}}else if(t<=+this.m_layerYpositionArray[i]+ +this.visibleSeries[i]-7)for(i=this.m_layerYpositionArray.length;0<=i;i--)if(t>=this.m_layerYpositionArray[i])for(var r,l,h,o,n,s=0,a=this.yPos[i].length;s<a;s++)if(t>=this.m_layerYpositionArray[i]&&t<=+this.yPos[i][s])return r=this.getFieldNameValueMap(i),l=this.visibleSeriesColors[i],h=this.visibleSeriesNames[s],o=this.seriesDisplayName[s],n=r[h],r.drillField=h,r.drillDisplayField=o,r.drillValue=n,{drillRecord:r,drillColor:l}},InvertedFunnelChart.prototype.getFieldNameValueMap=function(e){for(var t=new Object,i=this.getAllFieldsName(),s=0;s<i.length;s++)t[i[s]]=this.allDataObjects[e][i[s]];return t},InvertedFunnelChart.prototype.getLegendTableContent=function(){for(var e="",t=0;t<this.getLegendNames().length;t++){var i=this.m_legendShape,i=this.getHTMLShape(i);e+='<tr style="font-style:'+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'"><td>'+this.drawLegendShape(i,this.getSeriesColors()[t])+'<span style="display:inline;">'+this.getLegendNames()[t]+"</span></td></tr>"}return e},InvertedFunnelChart.prototype.getToolTipData=function(e,t){var i;if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeriesAvailable())&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType))for(var s=this.visibleSeriesColors,a=this.seriesDisplayName,r=this.visibleCategoryNames,l=(this.calculatedPercent,this.seriesData),h=this.seriesPercent,o=0;o<this.m_layerYpositionArray.length;o++)if(e>=+this.startX-this.funnelWidth/2&&e<=+this.startX+ +this.funnelWidth/2&&t>=+this.m_layerYpositionArray[o]-7)if(i={},IsBoolean("Default"==this.m_customtextboxfortooltip.dataTipType)){if(i.cat="",i.data=new Array,o==this.visibleSeries.length-1){if(t<=+this.m_layerYpositionArray[o]+ +this.visibleSeries[o]+7){for(var n,m=0;m<l[o].length;m++)1==a.length?(i.cat=r[o],(d=[])[0]={color:s[o],shape:this.m_legendShape},d[1]=a[m],n=(p=+l[o][m])%1!=0&&"default"!==this.m_precision?p.toFixed(0==this.m_precision?2:this.m_precision):+l[o][m],u=this.getFormatterForToolTip(n),d[2]=u):(i.cat=r[o],(d=[])[0]={color:s[o],shape:this.m_legendShape},d[1]=a[m],n=(p=+l[o][m])%1!=0&&"default"!==this.m_precision?p.toFixed(0==this.m_precision?2:this.m_precision):+l[o][m],u=this.getFormatterForToolTip(n),d[2]=u,d[3]=h[o][m].toFixed(2)+"%"),i.data.push(d);i.highlightIndex=this.getDrillColor(e,t)}}else if("0"==o){if(t>=+this.m_layerYpositionArray[o]&&t<=+this.m_layerYpositionArray[o]+ +this.visibleSeries[o]-1){for(m=0;m<l[o].length;m++)1==a.length?(i.cat=r[o],(d=[])[0]={color:s[o],shape:this.m_legendShape},d[1]=a[m],n=(p=+l[o][m])%1!=0&&"default"!==this.m_precision?p.toFixed(0==this.m_precision?2:this.m_precision):+l[o][m],u=this.getFormatterForToolTip(n),d[2]=u):(i.cat=r[o],(d=[])[0]={color:s[o],shape:this.m_legendShape},d[1]=a[m],n=(p=+l[o][m])%1!=0&&"default"!==this.m_precision?p.toFixed(0==this.m_precision?2:this.m_precision):+l[o][m],u=this.getFormatterForToolTip(n),d[2]=u,d[3]=h[o][m].toFixed(2)+"%"),i.data.push(d);i.highlightIndex=this.getDrillColor(e,t)}}else if(t<=+this.m_layerYpositionArray[o]+ +this.visibleSeries[o]-7){for(var d,p,u,m=0;m<l[o].length;m++)1==a.length?(i.cat=r[o],(d=[])[0]={color:s[o],shape:this.m_legendShape},d[1]=a[m],n=(p=+l[o][m])%1!=0&&"default"!==this.m_precision?p.toFixed(0==this.m_precision?2:this.m_precision):+l[o][m],u=this.getFormatterForToolTip(n),d[2]=u):(i.cat=r[o],(d=[])[0]={color:s[o],shape:this.m_legendShape},d[1]=a[m],n=(p=+l[o][m])%1!=0&&"default"!==this.m_precision?p.toFixed(0==this.m_precision?2:this.m_precision):+l[o][m],u=this.getFormatterForToolTip(n),d[2]=u,d[3]=h[o][m].toFixed(2)+"%"),i.data.push(d);i.highlightIndex=this.getDrillColor(e,t)}}else i=this.allDataObj[o];else this.hideToolTip();return i},InvertedFunnelChart.prototype.getDrillColor=function(e,t){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory))for(var i=this.m_layerYpositionArray.length;0<=i;i--)if(t>=this.m_layerYpositionArray[i])for(var s=0,a=this.yPos[i].length;s<a;s++)if(t>=this.m_layerYpositionArray[i]&&t<=+this.yPos[i][s])return s},InvertedFunnelChart.prototype.getFormatterText=function(e){var t=e;return t=IsBoolean(this.getFixedLabel())?t:this.m_yAxis.getFormattedText(e)},InvertedFunnelChart.prototype.getStartX=function(){return this.m_x+50},InvertedFunnelChart.prototype.getStartY=function(){return this.m_y+this.m_height-50},InvertedFunnelChart.prototype.getEndX=function(){return this.m_x+this.m_width-50},InvertedFunnelChart.prototype.getEndY=function(){return this.m_y+50};
//# sourceMappingURL=InvertedFunnelChart.min.js.map