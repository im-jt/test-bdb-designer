/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function ImageComponent(t,e){this.base=Widget,this.base(),this.m_rolloverglowcolor="#3333FF",this.m_maintainaspectratio=!1,this.m_tooltip="ImageComponent Component",this.m_valuefield="Value",this.m_alpha=.9,this.m_datarownumber="",this.m_rolloverglowenable=!0,this.m_virtualdataid="",this.m_virtualdatafield="",this.m_imagePath=this.m_span="images/imageComponent.png",this.m_imageSource="",this.m_borderradius=0,this.imageComponentObj=new Image,this.m_chartContainer=t,this.m_zIndex=e,this.m_datapointtoupdate="",this.checkToolTipDesc="",this.m_cursortype="pointer"}ImageComponent.prototype=new Widget,ImageComponent.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},ImageComponent.prototype.ParseJsonAttributes=function(t,e){for(var i in this.chartJson=t)if("NividhImage"==i||"Image"==i)for(var o in t[i])if("imageSource"===o)for(var a in t[i][o])this.setAttributeValueToNode(a,t[i][o],e);else this.setAttributeValueToNode(o,t[i],e);else this.setAttributeValueToNode(i,t,e)},ImageComponent.prototype.setDataProvider=function(t){this.m_imageSource=this.m_span=this.m_cdata=t},ImageComponent.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},ImageComponent.prototype.initializeDraggableDivAndCanvas=function(t,e){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseAndTouchEventSVC("#img"+this.m_objectid)},ImageComponent.prototype.setDashboardNameAndObjectId=function(){this.m_objectId=this.m_objectid,2==this.m_objectid.split(".").length&&(this.m_objectid=this.m_objectid.split(".")[1]),this.m_componentid="img"+this.m_objectid},ImageComponent.prototype.createImage=function(t){var e=this,i=($("#"+e.m_componentid).remove(),document.createElement("img"));i.id=e.m_componentid,$(i).css({width:this.m_width+"px",height:this.m_height+"px",top:"0px",left:"0px",position:"absolute",opacity:this.m_alpha,filter:"alpha(opacity="+this.m_alpha+")","border-radius":this.m_borderradius+"px"}),$("#draggableDiv"+e.m_objectid).append(i)},ImageComponent.prototype.updateWidgetsDataSetValues=function(){this.m_imagePath=this.m_span,""!=this.m_virtualdataid&&""!=this.m_virtualdatafield&&""!=this.m_datarownumber&&""!=this.m_virtualdatafield&&""!=this.m_datarownumber&&null!=this.m_fieldSetValue.m_fieldNameValues[this.m_datarownumber]&&null!=this.m_fieldSetValue.m_fieldNameValues[this.m_datarownumber][this.m_virtualdatafield]&&(this.m_imagePath=this.m_fieldSetValue.m_fieldNameValues[this.m_datarownumber][this.m_virtualdatafield]),this.drawObject()},ImageComponent.prototype.draw=function(){this.drawObject()},ImageComponent.prototype.drawObject=function(){this.init(),this.drawChart(),""!=this.m_onafterrendercallback&&onAfterRender(this.m_onafterrendercallback)},ImageComponent.prototype.init=function(){""==this.m_virtualdataid||""==this.m_virtualdatafield||""==this.m_datarownumber?this.m_imagePath=this.m_span:this.m_imagePath=this.m_imageSource},ImageComponent.prototype.drawChart=function(){var t=$("#draggableDiv"+this.m_objectid);IsBoolean(this.m_isActive)&&(this.createImage(t),this.drawImage(t))},ImageComponent.prototype.drawImage=function(t){var e=this,i=$("#"+e.m_componentid);0!=this.m_alpha&&(""!=this.m_cdata&&null!=this.m_cdata&&-1==this.m_cdata.indexOf("http")?0==this.m_cdata.indexOf("data:image/png;")||0==this.m_cdata.indexOf("data:image/jpg;")||0==this.m_cdata.indexOf("data:image/jpeg;")?$(i).attr("src",this.m_cdata):$(i).attr("src","data:image/png;base64,"+this.m_cdata):-1!=this.m_cdata.indexOf("http")?$(i).attr("src",this.m_cdata):$(i).attr("src",this.m_imagePath)),setTimeout(function(){e.setWidthHeightWithAspectRatio(i,0),e.ctx.beginPath(),e.initMouseAndTouchEventSVC("#"+e.m_componentid),i.onload=function(){e.ctx.clearRect(e.m_x,e.m_y,e.m_width,e.m_height),e.ctx.drawImage(i,e.m_x,e.m_y,widthHeight[0],widthHeight[1])},e.ctx.closePath()},0)},ImageComponent.prototype.initMouseAndTouchEvent=function(t){var l,e,i;IsBoolean(this.m_designMode)||((l=this).checkToolTipDesc=this.updateToolTipInfo(this.m_tooltip),e=function(t){!l.m_designMode&&IsBoolean(l.m_rolloverglowenable)&&($(this).css({padding:"0px","-moz-box-shadow":"0px 0px 0px "+hex2rgb(convertColorToHex(l.m_rolloverglowcolor),1),"-webkit-box-shadow":"0px 0px 0px "+hex2rgb(convertColorToHex(l.m_rolloverglowcolor),1),"box-shadow":"0px 0px 0px "+hex2rgb(convertColorToHex(l.m_rolloverglowcolor),1),left:"0px",top:"0px"}),l.setWidthHeightWithAspectRatio($("#"+l.m_componentid),0)),l.removeToolTipDiv()},i=function(t){OnMouseClick(l)},"ontouchstart"in document.documentElement?$("#draggableDiv"+l.m_objectid).bind("touchstart",function(t){t.stopImmediatePropagation(),($("."+l.m_objecttype+"ToolTipDiv").length?e.bind($("#img"+l.m_objectid)):function(t){var e,i,o,a,n,s;t.stopImmediatePropagation(),l.m_designMode||""==l.m_tooltip||" "==l.m_tooltip||(0===$(".draggablesParentDiv").find("#toolTipDiv").length?(e=(i=document.getElementById("draggablesParentDiv"+l.m_dashboard.m_id)).scrollLeft,i=i.scrollTop,a=+(o=t.originalEvent.touches[0].pageY)+ +i+20,t=+(t=t.originalEvent.touches[0].pageX)+ +e-150<0?+t+ +e:+t+ +e-160,(n=document.createElement("div")).innerHTML=l.checkToolTipDesc,n.setAttribute("id","toolTipDiv"),n.setAttribute("class",l.m_objecttype+"ToolTipDiv"),$(".draggablesParentDiv").append(n),s=$.extend(l.getTooltipStyles(),{top:a+"px",left:t+"px"}),$(n).css(s),20+a+ +$(n).height()>l.m_dashboard.m_AbsoluteLayout.m_height+i&&(a=+o-20+ +i-+$(n).height(),$(n).css("top",a)),10+t+ +$(n).width()>l.m_dashboard.m_AbsoluteLayout.m_width+e&&(t=+o-10+ +e-+$(n).width(),$(n).css("left",t))):l.removeToolTipDiv())}.bind(this))(t),i.bind(this)(t)}).bind("touchend",function(t){}):$(t).click(function(t){i.bind(this)(t)}).hover(function(t){!function(t){!l.m_designMode&&IsBoolean(l.m_rolloverglowenable)&&($(this).css({padding:"1px","-moz-box-shadow":"1px 1px 6px "+hex2rgb(convertColorToHex(l.m_rolloverglowcolor),1),"-webkit-box-shadow":"1px 1px 6px "+hex2rgb(convertColorToHex(l.m_rolloverglowcolor),1),"box-shadow":"1px 1px 6px "+hex2rgb(convertColorToHex(l.m_rolloverglowcolor),1),left:"2px",top:"2px"}),l.setWidthHeightWithAspectRatio($("#"+l.m_componentid),8)),$(this).css("cursor",l.m_cursortype)}.bind(this)(t)}).mousemove(function(t){!function(t){var e,i,o,a,n,s,m,h,r,d,p;l.m_designMode||""==l.m_tooltip||" "==l.m_tooltip||(t.stopPropagation(),l.removeToolTipDiv(),e=(n=document.getElementById("draggablesParentDiv"+l.m_dashboard.m_id)).scrollLeft,i=n.scrollTop,o=(a=$(n).offset()).top+$(n)[0].clientTop-$(n)[0].scrollTop,a=a.left+$(n)[0].clientLeft-$(n)[0].scrollLeft,n=$(this)[0].offsetLeft,p=$(this)[0].offsetTop,s=t.pageY-o-p+5,m=t.pageX-a-n+5,(h=document.createElement("div")).innerHTML=l.checkToolTipDesc,h.setAttribute("id","toolTipDiv"),h.setAttribute("class","settingIcon"),h.setAttribute("placement","bottom"),$(".draggablesParentDiv").append(h),r=+l.m_width,d=+l.m_height,d=$.extend(l.getTooltipStyles(),{top:t.pageY-t.offsetY+d-o-p-11+"px",left:t.pageX-t.offsetX-a-n+10+"px"}),$(h).css(d),p=t.pageX-t.offsetX+r/2-a-h.offsetWidth/2-16+"px",$(h).css("left",p),$(h).css("box-shadow","0 5px 15px -5px rgb(0 0 0 / 50%)"),10+s+ +$(h).height()>+l.m_dashboard.m_AbsoluteLayout.m_height+i&&(s=o-10+ +i-+$(h).height(),$(h).css("top",s)),10+m+ +$(h).width()>+l.m_dashboard.m_AbsoluteLayout.m_width+e&&(m-=+$(h).width(),$(h).css("left",m)))}.bind(this)(t)}).mouseout(function(t){e.bind(this)(t)}),$("#draggableDiv"+l.m_objectid).on("swipeleft",function(t){onSwipeLeft(l,t)}).on("swiperight",function(t){onSwipeRight(l,t)}).on("mousewheel",function(t){l.hideToolTip()}),$(".draggablesParentDiv").on("scroll",function(t){l.hideToolTip()}),$("#WatermarkDiv").on("scroll",function(t){l.hideToolTip()}))},ImageComponent.prototype.hideToolTip=function(){this.setCursorStyle("default"),this.removeToolTipDiv()},ImageComponent.prototype.setImageSource=function(){this.m_imageSource=this.m_imageSource.split("CDATA[")[1].split("]]")[0]},ImageComponent.prototype.getToolTipData=function(t,e){return""},ImageComponent.prototype.setWidthHeightWithAspectRatio=function(t,e){var t=null!=$(t).get(0)?t[0]:t,i=this.m_width,o=this.m_height;IsBoolean(this.m_maintainaspectratio)&&(o=(t=t.naturalWidth/t.naturalHeight)<this.m_width/this.m_height?(i=t*this.m_height,this.m_height):(i=this.m_width,this.m_width/t)),$("#"+this.m_componentid).css({width:i-e+"px",height:o-e+"px"})},ImageComponent.prototype.setDataPointToUpdate=function(t){this.m_datapointtoupdate=t},ImageComponent.prototype.getDataPointToUpdate=function(){return this.m_datapointtoupdate},ImageComponent.prototype.getDataPointAndUpdateGlobalVariable=function(t,e){var i={},o=(null!=this.getDataPointToUpdate()&&""!=this.getDataPointToUpdate()&&(i[this.m_valuefield]=this.getDataPointToUpdate()),""==this.m_fieldname||null==this.m_fieldname?"Value":this.m_fieldname);i[o]=this.m_fieldvalue,this.updateDataPoints(i)};
//# sourceMappingURL=ImageComponent.min.js.map