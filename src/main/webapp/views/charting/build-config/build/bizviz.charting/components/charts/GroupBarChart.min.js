/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function GroupBarChart(t,e){this.base=Chart,this.base(),this.m_x=680,this.m_y=320,this.m_width=300,this.m_height=260,this.m_barWidth=10,this.m_categoryData=[],this.m_seriesData=[],this.m_categoryNames=[],this.m_seriesNames=[],this.m_barSeriesArray=[],this.m_xPositionArray=[],this.m_yPositionArray=[],this.m_barWidth="",this.m_barHeightArray=[],this.m_seriesVisiblityPosition,this.m_showpercentvalue=!1,this.m_showmarkingorpercentvalue=!1,this.m_showPercentValueFlag=!0,this.m_seriesInitializeFlag=!0,this.m_calculation=new GroupBarCalculation,this.noOfRows=1,this.m_xAxis=new GroupBarXAxis,this.m_yAxis=new GroupBarYAxis,this.m_title=new svgTitle(this),this.m_subTitle=new svgSubTitle,this.m_chartContainer=t,this.m_zIndex=e,this.m_showhorizontalmarkerline=!1,this.m_subcategoryorientation="left",this.m_mergesubcategory="false",this.dataMap={},this.m_aggroperation="avg",this.m_showcatsubcatpartitioner="true",this.m_showcatpartitioner="true",this.m_enableanimation="false",this.m_baranimationduration=.5,this.m_stackborderwidth="0",this.m_stackbordercolor="#ffffff",this.m_enablestackshadow="false",this.m_stackshadowcolor="#000000",this.m_stackshadowopacity="0.3",this.m_canvastype="svg",this.m_stacksvgtype="rect",this.m_controlbarwidth="auto",this.m_stackborderradius="0",this.enableDrillHighlighter="false",this.m_drilltoggle=!1,this.origonalXposition="",this.updateflag=!1,this.m_showslider=!1,this.timeLineSliderFlag=!1,this.m_showslidermarker=!0,this.m_showslidertext=!1,this.m_sliderhandlerbgcolor="#ccffff",this.m_sliderselectbgcolor="#cccccc",this.m_slidercontainerbgcolor="#ccffff",this.m_slidercontainerbordercolor="#bbbbbb",this.m_sliderbordercolor="#cccccc",this.m_sliderbghandle="#ffffff",this.m_slideropacityhandle="0.0",this.m_sliderbgselection="#cccccc",this.m_slideropacityselection="0.5",this.m_sliderbgcontainer="#ecf0f1",this.m_slideropacitycontainer="0.0",this.m_sliderbgscrollbar="#b0b0b0",this.m_slideropacityscrollbar="0.7",this.m_sliderLastIndex=0,this.m_sliderposition="default",this.m_sliderheightratio=7,this.m_sliderrangeflag=!0,this.m_sliderrangevalue=10,this.m_sliderheight=63,this.sliderMargin=70,this.m_slideronmaxmize=!1}function GroupBarCalculation(){this.xPositionArray=[],this.yAxisPixelArray=[],this.xPositionMap={},this.yPositionMap={},this.barGap=10,this.m_xAxisText="",this.m_numberOfMarkers=6,this.minSliderIndex="",this.maxSliderIndex=""}function GroupBarSeries(){this.xPixel=[],this.yPixelArray=[],this.stackHeightArray=[],this.stackColorArray=[],this.barStackArray=[],this.ctx="",this.m_chart="",this.m_chartbase=""}function GroupBarStack(){this.stackXPixel,this.stackYPixel,this.stackWidth,this.stackHeight,this.stackColor,this.strokeColor,this.ctx="",this.m_chartbase=""}function GroupBarXAxis(){this.base=Xaxis,this.base(),this.m_showlinexaxis="true",this.m_linexaxiscolor="",this.m_textUtil=new TextUtil,this.m_util=new Util,this.ctx="",this.noOfRows=1}function GroupBarYAxis(){this.base=Yaxis,this.base(),this.m_showlineyaxis="true",this.m_lineyaxiscolor="",this.m_textUtil=new TextUtil,this.m_yAxisText,this.ctx}GroupBarChart.prototype=new Chart,GroupBarChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},GroupBarChart.prototype.ParseJsonAttributes=function(t,e){for(var i in this.chartJson=t)if("Chart"==i)for(var s in t[i])switch(s){case"xAxis":for(var a in t[i][s]){var r=this.getNodeAttributeName(a);e.m_xAxis[r]=t[i][s][a]}break;case"yAxis":for(var o in t[i][s]){var r=this.getNodeAttributeName(o);e.m_yAxis[r]=t[i][s][o]}break;case"Title":for(var h in t[i][s]){var r=this.getNodeAttributeName(h);e.m_title[r]=t[i][s][h]}break;case"SubTitle":for(var n in t[i][s]){r=this.getNodeAttributeName(n);e.m_subTitle[r]=t[i][s][n]}break;case"CategoryColors":var l,m=new CategoryColors;for(l in this.setCategoryColors(m),t[i][s])if("CategoryColor"===l){var c=this.getArrayOfSingleLengthJson(t[i][s][l]);m.cateogryNameColorMap=new Object;for(var g=0;g<c.length;g++){var _,d=new CategoryColor;for(_ in m.setCategoryColor(d),c[g])d[r=this.getNodeAttributeName(_)]=c[g][_];m.cateogryNameColorMap[d.getCategoryName()]=d.getColor()}}else{r=this.getNodeAttributeName(l);e.m_categoryColors[r]=t[i][s][l]}m.setCategoryDefaultColorSet();break;case"SubCategoryColors":var p,u=new SubCategoryColors;for(p in this.setSubCategoryColors(u),t[i][s])if("subCategoryColor"===p){var y=this.getArrayOfSingleLengthJson(t[i][s][p]);u.subcateogryNameColorMap=new Object;for(g=0;g<y.length;g++){var b,x=new SubCategoryColor;for(b in u.setSubCategoryColor(x),y[g])x[r=this.getNodeAttributeName(b)]=y[g][b];u.subcateogryNameColorMap[x.getSubCategoryName()]=x.getColor()}}else{r=this.getNodeAttributeName(p);e.m_subCategoryColors[r]=t[i][s][p]}u.setSubCategoryDefaultColorSet();break;case"ConditionalColors":if(""!=t[i][s])for(var f=new ConditionalColors,S=(this.setConditionalColors(f),this.getArrayOfSingleLengthJson(t[i][s].ConditionalColor)),g=0;g<S.length;g++){var C,A=new ConditionalColor;for(C in f.setConditionalColor(A),S[g])A[r=this.getNodeAttributeName(C)]=S[g][C]}break;default:e[r=this.getNodeAttributeName(s)]=t[i][s]}else e[r=this.getNodeAttributeName(i)]=t[i]},GroupBarChart.prototype.getDataProvider=function(){return this.m_dataProvider},GroupBarChart.prototype.getCategoryNames=function(){return this.m_categoryNames},GroupBarChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},GroupBarChart.prototype.getSubCategoryNames=function(){return this.m_subCategoryNames},GroupBarChart.prototype.setStartX=function(){var t=this.getBorderToDescriptionMargin(),e=this.getYAxisDescriptionMargin(),i=this.getDescriptionToLabelMargin(),s=this.getLabelToAxisMargin(),a=(this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),this.getCatTextMargin()),r=this.getSubCatTextMargin();IsBoolean(this.m_showslider)&&this.m_sliderheight;IsBoolean(this.scaleFlag)?this.m_startX=+this.m_x:"left"==this.m_subcategoryorientation?this.m_startX=+this.m_x+ +t+ +e+ +i+ +a+ +s+ +r:this.m_startX=+this.m_x+ +t+ +e+ +i+ +a+ +s},GroupBarChart.prototype.getCatTextMargin=function(){var t=0;if(0<this.fontScaling(this.m_yAxis.m_labelfontsize)){if(this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),!IsBoolean(this.isEmptyCategory))for(var e=0;e<this.m_categoryData[0].length;e++)t<this.ctx.measureText(this.m_categoryData[0][e]).width&&(t=this.ctx.measureText(this.m_categoryData[0][e]).width);(t+=10)>this.m_width/4&&(t=this.m_width/4)}return t="right"==this.m_subcategoryorientation&&(IsBoolean(this.isEmptySubCategory)||IsBoolean(this.isEmptyCategory))?10:t},GroupBarChart.prototype.getSubCatTextMargin=function(){this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_subcategoryfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily);var t=0;if(0<this.fontScaling(this.m_yAxis.m_subcategoryfontsize)){if(!IsBoolean(this.isEmptySubCategory))for(var e=0;e<this.m_subCategoryData[0].length;e++)t<this.ctx.measureText(this.m_subCategoryData[0][e]).width&&(t=this.ctx.measureText(this.m_subCategoryData[0][e]).width);(t+=10)>this.m_width/4&&(t=this.m_width/4)}return t},GroupBarChart.prototype.setStartY=function(){var t=this.getChartMargin(),e=this.getXAxisLabelMarginForBar();this.m_startY=+this.m_y+ +this.m_height-+t-+e},GroupBarChart.prototype.getXAxisLabelMarginForBar=function(){var t,e,i,s,a,r;return this.noOfRows=1,r=(a=IsBoolean(this.m_xAxis.getLabelTilted())?(t=this.getLabelFormatterMargin(),i=this.m_xAxis.m_labelrotation*(Math.PI/180),e=1.5*this.fontScaling(this.m_xAxis.getLabelFontSize())*this.noOfRows,this.setLabelWidth(),e=e<=(i=this.getLabelWidth()*Math.abs(i))?i:e,i=this.getLabelSignMargin(),s=this.getLabelPrecisionMargin(),this.getLabelSecondFormatterMargin()):(this.noOfRows=this.setNumberOfRows(),t=0,e=1.5*this.fontScaling(this.m_xAxis.getLabelFontSize())*this.noOfRows,s=i=0),this.getXAxisDescriptionMargin()),+t+ +e+ +i+ +s+ +a+ +r},GroupBarChart.prototype.getLabelFormatterMargin=function(){var t,e=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_xAxis.getLeftaxisFormater())&&"none"!=this.m_formater&&""!=this.m_formater&&"none"!=this.m_unit&&""!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),this.ctx.beginPath(),this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily(),e=this.ctx.measureText(t).width,this.ctx.closePath()),e},GroupBarChart.prototype.getLabelWidth=function(){return this.m_labelwidth},GroupBarChart.prototype.setLabelWidth=function(){this.m_labelwidth=0;var t=(""+this.min).length<=(""+this.max).length?this.max:this.min,e=t="100%"==this.m_charttype?100:t;this.ctx.beginPath(),this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily(),this.m_labelwidth=this.ctx.measureText(e).width,this.ctx.closePath(),0<this.fontScaling(this.m_xAxis.m_labelfontsize)&&(IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_xAxis.getLeftaxisFormater())&&("none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(e=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?t=getNumberFormattedNumericValue(+t,this.m_precision,this.m_unit):"auto"==this.getSecondaryUnit()?t=getNumberFormattedValue(+t):"none"==this.getSecondaryUnit()&&(t=this.m_util.updateTextWithFormatter(t,e,this.m_precision))),"none"!=this.m_formater&&""!=this.m_formater&&"none"!=this.m_unit&&""!=this.m_unit&&(t=t+""+this.m_util.getFormatterSymbol(this.m_formater,this.m_unit)),this.ctx.beginPath(),this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily),t=getFormattedNumberWithCommas(t,this.m_numberformatter),this.m_labelwidth=this.ctx.measureText(t).width,this.ctx.closePath()))},GroupBarChart.prototype.getLabelSignMargin=function(){var t=0,e=0,i=this.min;return i<0&&(this.ctx.beginPath(),this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily(),e=this.ctx.measureText(i).width,this.ctx.closePath()),t=this.getLabelWidth()<e?this.ctx.measureText("-").width:t},GroupBarChart.prototype.getLabelPrecisionMargin=function(){var t=5;if(!IsBoolean(this.m_fixedlabel)&&IsBoolean(this.m_xAxis.getLeftaxisFormater())&&"none"!=this.m_precision&&""!=this.m_precision&&0!=this.m_precision){this.ctx.beginPath(),this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();for(var e=".",i=0;i<this.m_precision;i++)e+="0";t=this.ctx.measureText(e).width,this.ctx.closePath()}return t},GroupBarChart.prototype.getLabelSecondFormatterMargin=function(){var t,e=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_xAxis.getLeftaxisFormater())&&"none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(t="auto"!=this.getSecondaryUnit()?this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()):"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?getNumberFormattedSymbol(+this.max,this.m_unit):"K",this.ctx.font=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily),e=this.ctx.measureText(t).width),e},GroupBarChart.prototype.setNumberOfRows=function(){this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily);var t,e,i,s=1,a=(""+this.min).length<=(""+this.max).length?this.max:this.min;return IsBoolean(this.isEmptySeries)||(a="100%"==this.m_charttype?100:a,t=this.m_xAxisMarkersArray.length,t=(this.getEndX()-this.getStartX())/t,e=this.getSecondUnitValue(),a=this.m_util.updateTextWithFormatter(a,e,this.m_precision),i=this.getUnitValue(),this.ctx.measureText(a=a+""+i+(e="auto"==e?"K":e)).width>t&&(s="auto"==this.m_skipxaxislabels?2:1)),s},GroupBarChart.prototype.getSecondUnitValue=function(){var t="";return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_xAxis.getLeftaxisFormater())&&"none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(t=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit())),t},GroupBarChart.prototype.getUnitValue=function(){var t="";return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_xAxis.getLeftaxisFormater())&&"none"!=this.m_formater&&""!=this.m_formater&&"none"!=this.m_unit&&""!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit)),t},GroupBarChart.prototype.setEndX=function(){var t=this.getBorderToLegendMargin(),e=this.getVerticalLegendMargin(),i=this.getVerticalLegendToXAxisMargin(),s=IsBoolean(this.m_showslider)?this.m_sliderheight:0,a="right"==this.m_subcategoryorientation?this.getSubCatTextMargin()+s:0,r="right"==this.m_subcategoryorientation&&"rectangle"==this.m_chartbase?7:0;this.m_endX=+this.m_x+ +this.m_width-(+t+ +e+ +i+ +a)-r-+s,this.m_endX=IsBoolean(this.scaleFlag)?s:this.m_endX},GroupBarChart.prototype.setEndY=function(){this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()},GroupBarChart.prototype.getCounterFlagForSeriesVisiblity=function(){for(var t=0,e=0;e<this.m_seriesData.length;e++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[e]])&&(t++,this.m_seriesVisiblityPosition=e);return 1==t},GroupBarChart.prototype.setFields=function(t){this.m_fieldsJson=t;for(var e=[],i=(this.m_categoryJSON=[],this.m_subCategoryJSON=[],[]),s=[],a=0;a<t.length;a++)switch(this.getProperAttributeNameValue(t[a],"Type")){case"Category":e.push(t[a]),this.m_categoryJSON.push(t[a]);break;case"SubCategory":s.push(t[a]),this.m_subCategoryJSON.push(t[a]);break;case"Series":case"CalculatedField":i.push(t[a])}0<s.length&&0<e.length&&s[0].Name==e[0].Name&&(s=e,e=[]),0==s.length&&0!=e.length&&(this.m_subcategoryorientation="left",s=[]),this.setCategory(e),this.setSubCategory(s),this.setSeries(i)},GroupBarChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryFieldColor=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr={};for(var e=0,i=0;i<t.length;i++){this.m_allCategoryNames[i]=this.getProperAttributeNameValue(t[i],"Name");var s=this.formattedDescription(this,this.getProperAttributeNameValue(t[i],"DisplayName"));this.m_allCategoryDisplayNames[i]=s,this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[i]]=this.getProperAttributeNameValue(t[i],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[i]])&&(this.m_categoryNames[e]=this.getProperAttributeNameValue(t[i],"Name"),this.m_categoryDisplayNames[e]=s,this.m_categoryFieldColor[e]=this.getProperAttributeNameValue(t[i],"Color"),e++)}},GroupBarChart.prototype.setSubCategory=function(t){this.m_subCategoryNames=[],this.m_subCategoryFieldColor=[],this.m_subCategoryDisplayNames=[],this.m_allSubCategoryNames=[],this.m_allSubCategoryDisplayNames=[],this.m_subCategoryVisibleArr={};for(var e=0;e<t.length;e++){this.m_allSubCategoryNames[e]=this.getProperAttributeNameValue(t[e],"Name");var i=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allSubCategoryDisplayNames[e]=i,this.m_subCategoryVisibleArr[this.m_allSubCategoryDisplayNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),IsBoolean(this.m_subCategoryVisibleArr[this.m_allSubCategoryDisplayNames[e]])&&(this.m_subCategoryNames[0]=this.getProperAttributeNameValue(t[e],"Name"),this.m_subCategoryDisplayNames[0]=i,this.m_subCategoryFieldColor[0]=this.getProperAttributeNameValue(t[e],"Color"))}},GroupBarChart.prototype.setSeries=function(t){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors=[],this.m_legendNames=[],this.m_seriesVisibleArr={},this.m_allSeriesDisplayNames=[],this.m_allSeriesNames=[],this.m_plotTrasparencyArray=[],this.m_seriesDataLabelProperty=[];var e=0;this.legendMap={};for(var i=0;i<t.length;i++){var s=this.formattedDescription(this,this.getProperAttributeNameValue(t[i],"DisplayName"));this.m_allSeriesDisplayNames[i]=s,this.m_allSeriesNames[i]=this.getProperAttributeNameValue(t[i],"Name"),this.m_seriesVisibleArr[this.m_allSeriesNames[i]]=this.getProperAttributeNameValue(t[i],"visible"),IsBoolean(this.m_seriesVisibleArr[this.m_allSeriesNames[i]])&&(this.m_seriesDisplayNames[e]=s,this.m_seriesNames[e]=this.getProperAttributeNameValue(t[i],"Name"),this.m_legendNames[e]=s,this.m_seriesColors[e]=convertColorToHex(this.getProperAttributeNameValue(t[i],"Color")),this.m_seriesDataLabelProperty[e]=this.getProperAttributeNameValue(t[i],"DataLabelCustomProperties"),void 0!==this.m_seriesDataLabelProperty[e]?(IsBoolean(this.m_seriesDataLabelProperty[e].useFieldColor)&&(this.m_seriesDataLabelProperty[e].dataLabelFontColor=this.m_seriesColors[e]),void 0!==this.m_seriesDataLabelProperty[e].showPercentValue&&IsBoolean(this.m_seriesDataLabelProperty[e].showPercentValue)&&"100%"==this.m_charttype&&(this.m_seriesDataLabelProperty[e].datalabelField=this.m_seriesNames[e]),IsBoolean(this.m_seriesDataLabelProperty[e].dataLabelUseComponentFormater)&&(this.m_seriesDataLabelProperty[e].datalabelFormaterCurrency=this.m_unit,this.m_seriesDataLabelProperty[e].datalabelFormaterPrecision=this.m_precision,this.m_seriesDataLabelProperty[e].datalabelFormaterPosition=this.m_signposition,this.m_seriesDataLabelProperty[e].datalabelFormaterUnit=this.m_secondaryunit)):this.m_seriesDataLabelProperty[e]=this.getDataLabelProperties(),s=this.getProperAttributeNameValue(t[i],"PlotTransparency"),this.m_plotTrasparencyArray[e]=null!=s&&null!==s&&""!==s?s:1,s={seriesName:this.m_seriesNames[e],displayName:this.m_seriesDisplayNames[e],color:this.m_seriesColors[e],shape:"cube",index:e},this.legendMap[this.m_seriesNames[e]]=s,e++)}this.setLegendsIntialLoad(this.m_defaultlegendfields)},GroupBarChart.prototype.getLegendInfo=function(){return this.legendMap},GroupBarChart.prototype.getAllSeriesNames=function(){return this.m_allSeriesNames},GroupBarChart.prototype.getAllCategoryNames=function(){return this.m_allCategoryNames},GroupBarChart.prototype.getAllSubCategoryNames=function(){return this.m_allSubCategoryNames},GroupBarChart.prototype.getSeriesNames=function(){return this.m_seriesNames},GroupBarChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},GroupBarChart.prototype.getSeriesColors=function(){return this.m_seriesColors},GroupBarChart.prototype.setLegendNames=function(t){this.m_legendNames=t},GroupBarChart.prototype.getLegendNames=function(){return this.m_legendNames},GroupBarChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0;t<this.getAllCategoryNames().length;t++)this.m_allfieldsName.push(this.getAllCategoryNames()[t]);for(t=0;t<this.getAllSubCategoryNames().length;t++)this.m_allfieldsName.push(this.getAllSubCategoryNames()[t]);for(var e=0;e<this.getAllSeriesNames().length;e++)this.m_allfieldsName.push(this.getAllSeriesNames()[e])},GroupBarChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},GroupBarChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var t=0;t<this.getCategoryDisplayNames().length;t++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[t]);for(var e=0;e<this.getSeriesDisplayNames().length;e++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[e])},GroupBarChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},GroupBarChart.prototype.setCategoryData=function(){this.m_categoryData=[],this.isEmptyCategory=!0;for(var t=0;t<this.getCategoryNames().length;t++)this.isEmptyCategory=!1,this.m_categoryData[t]=this.getDataFromJSON(this.getCategoryNames()[t]);this.CatData=this.m_categoryData},GroupBarChart.prototype.setSubCategoryData=function(){this.m_subCategoryData=[],this.isEmptySubCategory=!0;for(var t=0;t<this.getSubCategoryNames().length;t++)this.isEmptySubCategory=!1,this.m_subCategoryData[t]=this.getDataFromJSON(this.getSubCategoryNames()[t]);this.SubCatData=this.m_subCategoryData},GroupBarChart.prototype.setCategorySubcategorySeriesData=function(){this.m_categoryData=[],this.m_subCategoryData=[],this.m_seriesData=[],this.m_seriesDataForToolTip=[],this.m_displaySeriesDataFlag=[],this.m_seriesDataForDataLabel=[],this.m_seriesDataLabelPropertyOverlaid=[];for(var t=0,e=this.getDataProvider().length;t<e;t++){var i=this.getDataProvider()[t];if(this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var s=0,a=this.getCategoryNames().length;s<a;s++){this.m_categoryData[s]||(this.m_categoryData[s]=[]);var r=this.getValidFieldDataFromRecord(i,this.getCategoryNames()[s]);this.m_categoryData[s][t]=r}}if(this.isEmptySubCategory=!0,0<this.getSubCategoryNames().length){this.isEmptySubCategory=!1;for(s=0,a=this.getSubCategoryNames().length;s<a;s++){this.m_subCategoryData[s]||(this.m_subCategoryData[s]=[]);r=this.getValidFieldDataFromRecord(i,this.getSubCategoryNames()[s]);this.m_subCategoryData[s][t]=r}}this.m_displaySeriesDataFlag[t]=[];for(var o=0,h=0,n=this.getSeriesNames().length;o<n;o++){this.m_seriesData[o]||(this.m_seriesData[o]=[],this.m_seriesDataForToolTip[o]=[]);var l,r=this.getValidFieldDataFromRecord(i,this.getSeriesNames()[o]);this.m_displaySeriesDataFlag[t][o]=!0,isNaN(r)&&(this.m_displaySeriesDataFlag[t][o]=!1,r=getNumericComparableValue(r)),IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[o]])&&(this.m_seriesDataForDataLabel[h]||(this.m_seriesDataForDataLabel[h]=[]),this.m_seriesDataLabelPropertyOverlaid[h]=this.m_seriesDataLabelProperty[o],l=this.getValidFieldDataFromRecord(i,this.m_seriesDataLabelProperty[o].datalabelField),this.m_seriesDataForDataLabel[h][t]=l,h++),this.m_seriesData[o][t]=r,this.m_seriesDataForToolTip[o][t]=r}}this.CatData=this.m_categoryData,this.SubCatData=this.m_subCategoryData,this.SerData=this.m_seriesData,this.SerDataLabel=this.m_seriesDataLabel},GroupBarChart.prototype.getSubCategoryData=function(){return this.m_subCategoryData},GroupBarChart.prototype.getCategoryData=function(){return this.m_categoryData},GroupBarChart.prototype.setSeriesData=function(){this.m_seriesData=[];for(var t=0;t<this.getSeriesNames().length;t++)this.m_seriesData.push(this.getDataFromJSON(this.getSeriesNames()[t]));this.SerData=this.m_seriesData},GroupBarChart.prototype.getDataFromJSON=function(t){var e=[],i=this.getDataProvider();if(IsBoolean(!this.timeLineSliderFlag))for(var s=this.getDataProvider().length,a=0;a<s;a++)null==i[a][t]?e[a]="":e[a]=i[a][t];else for(var a=this.firstIndex,r=0;a<=this.lastIndex;a++)i[a]&&null!=i[a][t]&&"undefined"!==i[a][t]?e[r]=i[a][t]:e[r]="",r++;return e},GroupBarChart.prototype.getSeriesData=function(){return this.m_seriesData},GroupBarChart.prototype.setSeriesColor=function(t){this.m_seriesColor=t},GroupBarChart.prototype.getSeriesColor=function(){return this.m_seriesColor},GroupBarChart.prototype.init=function(){IsBoolean(!this.timeLineSliderFlag)&&(this.updateflag=!1,this.setCategorySubcategorySeriesData(),(this.firstIndex=0)<this.m_categoryData.length)&&(this.lastIndex=this.m_categoryData[0].length-1,this.m_conditionalcolorswithoutslider=this.getConditionalColors().getConditionalColorsForConditionsForMixedTime(this.getSeriesNames(),this.getSeriesColors(),this.m_seriesData,this),this.m_conditionalcolorswithslider=this.m_conditionalcolorswithoutslider),this.visibleSeriesInfo=this.getVisibleSeriesData(this.getSeriesData()),this.setColorsForSeries(),0!=this.getCategoryNames().length&&null!=this.getSubCategoryNames()[0]&&this.manageRepeatedSubCategory(),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.isSeriesDataEmpty(),this.setShowSeries(this.getAllFieldsName()),this.updateSeriesDataWithCommaSeperators(),this.visibleSeriesInfo=this.getVisibleSeriesData(this.getSeriesData()),this.createSVG(),this.initMouseClickEventForSVG(this.svgContainerId),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),IsBoolean(this.m_isEmptySeries)||!IsBoolean(this.isVisibleSeries())||IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isEmptySubCategory)||(this.setPercentageForHundred(),this.initializeCalculation(),this.m_xAxis.init(this,this.m_calculation),this.m_yAxis.init(this,this.m_calculation)),this.initializeToolTipProperty(),this.m_tooltip.init(this)},GroupBarChart.prototype.manageRepeatedSubCategory=function(){for(var t,e={},i={},s={},a=0;a<this.m_categoryData[0].length;a++){null==e[this.m_categoryData[0][a]]&&(e[this.m_categoryData[0][a]]={},i[this.m_categoryData[0][a]]={},s[this.m_categoryData[0][a]]={}),null==e[this.m_categoryData[0][a]][this.m_subCategoryData[0][a]]&&(e[this.m_categoryData[0][a]][this.m_subCategoryData[0][a]]=[],i[this.m_categoryData[0][a]][this.m_subCategoryData[0][a]]=[],s[this.m_categoryData[0][a]][this.m_subCategoryData[0][a]]=[]);var r=[],o=[],h=[];this.setSeriesDataLabel();for(var n=0;n<this.m_seriesData.length;n++)r.push(this.m_seriesData[n][a]);for(n=0;n<this.m_seriesDataForDataLabel.length;n++)o.push(this.m_seriesDataForDataLabel[n][a]);for(n=0;n<this.m_seriesColorsArray.length;n++)h.push(this.m_seriesColorsArray[n][a]);e[this.m_categoryData[0][a]][this.m_subCategoryData[0][a]].push(r),i[this.m_categoryData[0][a]][this.m_subCategoryData[0][a]].push(o),s[this.m_categoryData[0][a]][this.m_subCategoryData[0][a]].push(h)}for(t in e)for(var l in e[t]){for(var m=[],c=[],g=[],_=0;_<e[t][l][0].length;_++){for(var d,p=[],u=[],y=[],a=0;a<e[t][l].length;a++)isNaN(e[t][l][a][_])?(d=removeCommaFromSrting(e[t][l][a][_]),p.push(""!==d?d:e[t][l][a][_])):p.push(e[t][l][a][_]),u.push(i[t][l][a][_]),y.push(s[t][l][a][_]);if(1===p.length)m.push(p[0]),c.push(u[0]);else{var b=getAggregationOperatedData(p,this.m_aggroperation);if(""===b)for(var x=0;x<p.length;x++)if(0==p[x]){b=0;break}m.push(b),c.push(getAggregationOperatedData(u,this.m_aggroperation))}g.push(y[0])}e[t][l]=m,i[t][l]=c,s[t][l]=g}for(t in this.m_categoryData[0]=[],this.m_subCategoryData[0]=[],this.m_seriesData=[],this.m_seriesDataForDataLabel=[],this.m_seriesColorsArray=[],e)for(var l in e[t])for(a=0;a<e[t][l].length;a++)this.m_seriesData[a]=[],this.m_seriesDataForDataLabel[a]=[],this.m_seriesColorsArray[a]=[];for(t in e)for(var l in e[t]){this.m_categoryData[0].push(t),this.m_subCategoryData[0].push(l);for(a=0;a<e[t][l].length;a++)this.m_seriesData[a].push(e[t][l][a]),this.m_seriesDataForDataLabel[a].push(i[t][l][a]),this.m_seriesColorsArray[a].push(s[t][l][a])}},GroupBarChart.prototype.updateSeriesDataWithCommaSeperators=function(){this.m_displaySeriesDataFlag=[];for(var t=0;t<this.m_seriesData.length;t++){this.m_displaySeriesDataFlag[t]=[];for(var e=0;e<this.m_seriesData[t].length;e++)this.m_displaySeriesDataFlag[t][e]=!0,isNaN(this.m_seriesData[t][e])&&(this.m_displaySeriesDataFlag[t][e]=!1,this.m_seriesData[t][e]=getNumericComparableValue(this.m_seriesData[t][e]))}},GroupBarChart.prototype.drawChart=function(){this.drawChartFrame();var t,e,i;this.drawTitle(),this.drawSubTitle(),this.drawLegends(),IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isEmptySubCategory)?this.drawSVGMessage("No Visible Category OR SubCategory Field Available"):IsBoolean(this.m_isEmptySeries)?this.drawSVGMessage(this.m_status.noData):IsBoolean(this.isVisibleSeries())?(this.drawXAxis(),this.drawYAxis(),this.drawBarChart(),this.drawDataLabel(),IsBoolean(!this.timeLineSliderFlag)&&IsBoolean(this.m_showslider)&&(this.getBGGradientColorToScale(),IsBoolean(this.m_sliderrangeflag)&&(t=this.m_seriesData[0].length,e=this.m_sliderrangevalue,this.m_sliderrange=e<=t?100*e/t:100),this.setMinMaxSliderIndex(),this.drawslider(),this.drawRangeSelector(),this.scaleFlag=!0,e=getDuplicateObject(this),this.initScaleChart(e),this.drawScaleChart(e,this.svgTimeScaleId),this.scaleFlag=!1,this.m_designMode||(this.timeLineSliderFlag=!0,t=this.getStartY()-this.getEndY(),e=null!=this.m_sliderwidthperc?this.m_sliderwidthperc*t:"auto"==this.m_sliderrange?3*t/10:+this.m_sliderrange*t/100,IsBoolean(!this.m_slideronmaxmize)||null==this.m_sliderleftperc?"left"==this.m_sliderposition?this.updatechart(this.getEndY(),+this.getEndY()+e):"right"!=this.m_sliderposition&&IsBoolean(this.m_isCurrentDate)&&this.currentDateIndex<this.lastIndex?(i=0==this.currentDateIndex?this.tempLeft:+this.getStartY()+this.tempLeft-.01,this.updatechart(i,i+e)):this.updatechart(+this.getEndY()+(t-e),this.getStartY()):(i=+this.getEndY()+this.m_sliderleftperc*t,this.updatechart(i,i+e))))):this.drawSVGMessage("No visible Series Available")},GroupBarChart.prototype.getBGGradientColorToScale=function(){for(var t=this,e=($("#"+t.svgTimeScaleId).empty(),document.createElementNS(NS,"linearGradient")),i=(e.setAttribute("id","gradient1"+t.m_objectid),e.setAttribute("gradientTransform","rotate("+this.m_bggradientrotation+")"),$("#"+t.svgTimeScaleId).append(e),this.getBgGradients().split(",")),s=100/(i.length-1!=0?i.length-1:1),a=0,r=i.length;a<=r-1;a++){var o=document.createElementNS(NS,"stop");o.setAttribute("offset",a*s+"%"),o.setAttribute("stop-color",hex2rgb(convertColorToHex(i[a]),this.m_bgalpha)),o.setAttribute("stop-opacity",this.m_bgalpha),$(e).append(o)}var h=drawSVGRect(0,0,this.sliderMargin,this.m_width,"");$(h).attr("id","GradientScaleRect"+t.m_objectid),$(h).css("opacity","0"),$(h).attr("fill","url(#gradient1"+t.m_objectid+")"),$("#"+t.svgTimeScaleId).append(h)},GroupBarChart.prototype.sliderAxisCalculation=function(t,e){this.tempLeft=t-e;for(var i=new Date,s=this.CatData[0]||this.SubCatData[0],a=0,r=s.length;a<r;a++){var o,h=new Date(s[a]);if(i.setHours(0,0,0,0)===h.setHours(0,0,0,0)){this.m_isCurrentDate=!0,this.currentDateIndex=a;for(var n=0;n<this.m_seriesNames.length;n++)if(IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[n]])){o=this.m_seriesNames[n];break}this.tempLeft=this.m_calculation.xPositionMap[o][a]-+this.getStartY(),this.tempLeft+e>t||this.currentDateIndex==this.lastIndex?this.tempLeft=t-e:(this.tempLeft<this.getStartY()||0==this.currentDateIndex)&&(this.tempLeft=+this.getStartY());break}}return this.tempLeft},GroupBarChart.prototype.setMinMaxSliderIndex=function(){this.minSliderIndex=this.m_calculation.minSliderIndex,this.maxSliderIndex=this.m_calculation.maxSliderIndex},GroupBarChart.prototype.initScaleChart=function(t){t.m_y=0,this.tempTitle=t.m_title.m_showtitle,this.tempSubTitle=t.m_subTitle.m_showsubtitle,t.m_title.m_showtitle=!1,t.m_showmaximizebutton=!0,t.m_showgradient=!1,t.m_showrangeselector=!1,t.setCategorySubcategorySeriesData(),0!=t.getCategoryNames().length&&null!=t.getSubCategoryNames()[0]&&t.manageRepeatedSubCategory(),t.setAllFieldsName(),t.setAllFieldsDisplayName(),t.setColorsForSeries(),IsBoolean(t.m_isEmptySeries)||(t.setPercentageForHundred(),t.initializeCalculation()),t.initializeToolTipProperty(),t.m_tooltip.init(t)},GroupBarChart.prototype.updateDragChartFromSlider=function(t,e){if(!IsBoolean(this.updateflag)){this.SerData=this.m_seriesData;for(var i=0,s=this.m_seriesNames.length;i<s&&!IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[i]]);i++);for(var a=0;a<this.m_calculation.getYPositionArray().length;a++)this.origonalXposition=this.m_calculation.getYPositionArray()[a];this.updateflag=!0}var r=[],o=[],h=[],n=[],l={},m={};r[0]=[],o[0]=[],this.m_sliderindexes=[];for(var c=0,g=this.SerData.length;c<g;c++)h[c]=[],n[c]=[],l[this.m_seriesNames[c]]=[],m[this.m_seriesNames[c]]=[],this.m_sliderindexes[c]=[];this.m_sliderLastIndex=0<this.origonalXposition.length?this.origonalXposition.length-1:this.origonalXposition.length;for(var a=0,_=this.origonalXposition.length;a<_;a++)if(t<+this.origonalXposition[a]&&e>+this.origonalXposition[a]){null!=this.CatData[0]&&r[0].push(this.CatData[0][a]),null!=this.SubCatData[0]&&o[0].push(this.SubCatData[0][a]);for(var c=0,d=this.SerData.length;c<d;c++)h[c].push(this.SerData[c][a]),this.m_sliderLastIndex=a,this.m_sliderindexes[c].push(a)}else if(+this.origonalXposition[a]>e)break;1<=r[0].length||1<=o[0].length?(this.m_afterslider=!0,this.m_categoryData=r,this.m_subCategoryData=o,this.m_seriesData=h,this.m_seriesDataLabel=n,this.m_conditionalcolorswithslider=l,this.m_plotradiusarray=m,this.startDate=r[0][0],this.endDate=r[0][r[0].length-1],this.m_overlappeddatalabelarrayY=[],this.m_overlappeddatalabelarrayX=[],this.init(),this.drawChart(),this.m_afterslider=!1):(this.startDate=r[0][0],this.endDate=r[0][0])},GroupBarChart.prototype.drawScaleChart=function(t){t.drawScaleBar(),this.m_title.m_showtitle=this.tempTitle,this.m_subTitle.m_showsubtitle=this.tempSubTitle},GroupBarChart.prototype.drawScaleBar=function(){if("gradient1"==this.m_chartbase)for(var t=0,e=this.visibleSeriesInfo.seriesName.length;t<e;t++)for(var i=0,s=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].xPixel.length;i<s;i++)this.createGradient1(this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].barStackArray[i].stackColor,t,i);else if("gradient2"==this.m_chartbase)for(var t=0,a=this.visibleSeriesInfo.seriesName.length;t<a;t++)for(i=0,s=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].xPixel.length;i<s;i++)this.createGradient2(this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].barStackArray[i].stackColor,t,i);else if("gradient3"==this.m_chartbase)for(t=0,a=this.visibleSeriesInfo.seriesName.length;t<a;t++)for(i=0,s=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].xPixel.length;i<s;i++)this.createGradient3(this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].barStackArray[i].stackColor,t,i);for(var r=0,a=this.visibleSeriesInfo.seriesName.length;r<a;r++){var o=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[r]];this.createStackGroupForSlider(o,"stackgrpslider",r,this.visibleSeriesInfo.seriesName[r]),o.drawBarSeries(r)}},GroupBarChart.prototype.updatechart=function(t,e){this.updateDragChartFromSlider(t,e)},GroupBarChart.prototype.sliderTextBox=function(){var t,e,i=this,s=this.getEndY(),a=this.getStartY()-this.getEndY(),r=(e=""!=this.m_sliderTextField&&null!=this.m_sliderTextField||null==i.CatData[0]?""!=this.m_sliderTextField&&null!=this.m_sliderTextField||null==i.SubCatData[0]?(t=i.m_dataProvider[0][this.m_sliderTextField],i.m_dataProvider[i.m_dataProvider.length-1][this.m_sliderTextField]):(t=i.SubCatData[0][0],i.SubCatData[0][i.SubCatData[0].length-1]):(t=i.CatData[0][0],i.CatData[0][i.CatData[0].length-1]),document.createElement("div")),s=(r.setAttribute("id","textdiv"+i.m_objectid),r.setAttribute("style","top:"+(s-this.fontScaling(this.m_yAxis.getLabelFontSize()))+"px;height:"+(2*this.fontScaling(this.m_yAxis.getLabelFontSize())+a)+"px; width:0px18px; position:absolute; display:flex; flex-direction:column;"),$(r).css({"font-family":selectGlobalFont(this.m_yAxis.getLabelFontFamily()),color:convertColorToHex(this.m_yAxis.getLabelFontColor()),"font-style":this.m_yAxis.getLabelFontStyle(),"font-size":this.fontScaling(this.m_yAxis.getLabelFontSize())+"px","font-weight":this.m_yAxis.getLabelFontWeight(),"text-decoration":this.m_yAxis.getLabelTextDecoration()}),this.m_sliderheightratio<5&&$(r).css({display:"none"}),document.createElement("div")),a=document.createElement("div");s.setAttribute("style","width:"+7*this.m_sliderheightratio+"px;overflow:hidden; white-space:nowrap;position: absolute;top: -4px;text-overflow:ellipsis;"),a.setAttribute("style","width:"+7*this.m_sliderheightratio+"px;overflow:hidden; white-space:nowrap;text-overflow:ellipsis;position: absolute;bottom: -6px"),r.append(s),r.append(a),""==this.m_sliderStartText&&""==this.m_sliderEndText?(s.innerHTML=t+":",a.innerHTML=e+":"):(s.innerHTML=this.m_sliderStartText+t,a.innerHTML=this.m_sliderEndText+e),$("#svgTimeScaleDiv"+i.m_objectid).append(r)},GroupBarChart.prototype.drawslider=function(){$("#rangeslider"+this.m_objectid).remove(),IsBoolean(this.m_showslider)&&this.jquerySliderImplementation()},GroupBarChart.prototype.jquerySliderImplementation=function(){var i,s=this,t=(this.getStartY(),this.getStartY()-this.getEndY()),a=null!=s.m_sliderwidthperc?s.m_sliderwidthperc*t:"auto"==this.m_sliderrange?3*t/10:+this.m_sliderrange*t/100,e=(IsBoolean(!s.m_slideronmaxmize)||null==this.m_sliderleftperc?"left"==this.m_sliderposition?i=+this.getStartY():"right"==this.m_sliderposition?i=t-a:(i=this.sliderAxisCalculation(t,a),0===this.currentDateIndex&&(i=this.sliderAxisCalculation(t,a)-+this.getStartY())):i=this.m_sliderleftperc*t,document.createElement("div")),r=(e.setAttribute("id","newSilderBody"+s.m_objectid),e.setAttribute("class","newSilderBody"),e.setAttribute("style","height:"+t+"px; width:"+this.m_sliderheight+"px; position:relative;top:"+this.getEndY()+"px;"),$(e).css({background:hex2rgb(this.m_sliderbordercolor,this.m_slideropacitycontainer),border:"1px solid "+hex2rgb(this.m_sliderbordercolor,this.m_sliderborderopacity)}),$("#svgTimeScaleDiv"+s.m_objectid).append(e),document.createElement("div")),o=(r.setAttribute("id","silderSelecterdiv"+s.m_objectid),r.setAttribute("class","easyui-draggable"),hex2rgb(this.m_sliderbordercolor,this.m_slideropacityselection)),o=(r.setAttribute("style","position:absolute;top:0px; height:"+a+"px; width:"+this.m_sliderheight+"px;  background:"+o+";cursor:move;"),$(r).css({"border-left":"1px solid "+hex2rgb(this.m_sliderbordercolor,this.m_sliderborderopacity),"border-right":"1px solid "+hex2rgb(this.m_sliderbordercolor,this.m_sliderborderopacity)}),"left"!=s.m_sliderposition&&$(r).css({top:i+"px"}),$(e).append(r),document.createElement("div")),e=(o.setAttribute("id","leftHandle"+s.m_objectid),$(r).append(o),hex2rgb(this.m_sliderbordercolor,this.m_sliderborderopacity)),o=($("#leftHandle"+s.m_objectid).attr("style","position:absolute;top:-2px;left:"+this.m_sliderheight/4+"px;height:5px;width:"+this.m_sliderheight/2.5+"px;border:1px solid "+e+";background:#999999;"),document.createElement("div")),e=(o.setAttribute("id","rightHandle"+s.m_objectid),$(r).append(o),hex2rgb(this.m_sliderbordercolor,this.m_sliderborderopacity));$("#rightHandle"+s.m_objectid).attr("style","position:absolute;left:"+this.m_sliderheight/4+"px;bottom:-2px;height:5px;width:"+this.m_sliderheight/2.5+"px;border:1px solid "+e+";background:#999999;"),$("#silderSelecterdiv"+s.m_objectid).draggable({axis:"y",containment:"#newSilderBody"+s.m_objectid,start:function(t,e){a=$(this).height()},drag:function(t,e){i=+$(this).position().top,s.updatechart(i,+i+ +a)},stop:function(t,e){i=+$(this).position().top,s.updatechart(i,+i+ +a)}}),$("#silderSelecterdiv"+s.m_objectid).resizable({axis:"y",containment:"#newSilderBody"+s.m_objectid,handles:"n,s",start:function(t,e){},resize:function(t,e){i=+e.position.top,15<(a=e.size.height)&&s.updatechart(i,+i+ +a)},stop:function(t,e){i=+e.position.top,a=e.size.height,s.updatechart(i,+i+ +a),s.resetSelectorToNormal()}}),$("#silderSelecterdiv"+s.m_objectid).draggable({axis:"v",containment:"#newSilderBody"+s.m_objectid,onStartDrag:function(t,e){a=$(t.data.target).outerHeight(),s.updatechart(i,+i+ +a)},onDrag:function(t,e){constrain(t),i=+s.getEndY()+ +$(this).position().top,s.updatechart(i,+i+ +a)},onStopDrag:function(t,e){constrain(t),i=+s.getEndY()+ +$(this).position().top,s.m_sliderleftperc=+$(this).position().top/(+s.getStartY()-+s.getEndY()),s.updatechart(i,+i+ +a)}}),$("#silderSelecterdiv"+s.m_objectid).resizable({minHeight:15,fit:!0,axis:"v",containment:"#newSilderBody"+s.m_objectid,maxHeight:t,handles:"n,s",onStartResize:function(t,e){},onResize:function(t,e){constrainResizable(t),i=+s.getEndY()+ +$(this).position().top,15<(a=t.data.height)&&s.updatechart(i,+i+ +a)},onStopResize:function(t,e){constrainResizable(t),$(this).css({top:t.data.top,height:t.data.height}),i=+s.getEndY()+ +$(this).position().top,a=t.data.height,s.m_sliderleftperc=+$(this).position().top/(+s.getStartY()-+s.getEndY()),s.m_sliderwidthperc=a/(+s.getStartY()-+s.getEndY()),s.updatechart(i,+i+ +a),s.resetSelectorToNormal()}}),IsBoolean(this.m_showslidertext)&&this.sliderTextBox()},GroupBarChart.prototype.drawLine=function(t,e,i,s){t=drawSVGLine(t,e,i,s,"1",hex2rgb(this.m_markercolor,this.m_markertransparency));$("#horizontallinegrp"+this.m_objectid).append(t)},GroupBarChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},GroupBarChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.createSVG(),$("#draggableCanvas"+this.m_objectid).hide(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEventForSVG(this.svgContainerId)},GroupBarChart.prototype.createSVG=function(){var t,e=this,i=(this.svgContainerId="svgContainer"+e.m_objectid,$("#"+e.svgContainerId).remove(),document.createElementNS("http://www.w3.org/2000/svg","svg"));i.setAttribute("xlink","http://www.w3.org/1999/xlink"),i.setAttribute("width",this.m_width),this.m_sliderheight=this.m_height/4,IsBoolean(this.getShowLegends())&&this.minWHRatio();IsBoolean(this.m_showslider)&&(IsBoolean(this.m_designMode)||IsBoolean(this.m_isDataSetavailable))&&(t=(t=this.m_height/4)<7*this.m_sliderheightratio?t<40?3*this.m_sliderheightratio:6*this.m_sliderheightratio:7*this.m_sliderheightratio,this.sliderMargin=t,!IsBoolean(this.getShowLegends())||IsBoolean(this.m_fixedlegend)||"horizontalBottomLeft"!=this.m_legendposition&&"horizontalBottomCenter"!=this.m_legendposition&&"horizontalBottomRight"!=this.m_legendposition?this.m_sliderheight=t-2:this.m_sliderheight=t),IsBoolean(this.m_showslider)&&i.setAttribute("width",this.m_width-this.m_sliderheight-10),i.setAttribute("height",this.m_height),i.setAttribute("id",this.svgContainerId),$("#draggableDiv"+e.m_objectid).append(i),IsBoolean(this.m_showslider)&&(IsBoolean(this.m_isDataSetavailable)||IsBoolean(this.m_designMode))?IsBoolean(!this.timeLineSliderFlag)&&($("#svgTimeScaleDiv"+e.m_objectid).remove(),this.getMarginForTitle(),IsBoolean(this.m_subTitle.m_showsubtitle)&&this.m_subTitle.m_titleMargin,(t=document.createElement("div")).setAttribute("id","svgTimeScaleDiv"+e.m_objectid),t.style.position="absolute",t.style.zIndex=e.m_zIndex,t.style.right="0px",t.style.top="0px",$("#draggableDiv"+e.m_objectid).append(t),this.svgTimeScaleId="svgTimeScale"+e.m_objectid,$("#"+e.svgTimeScaleId).remove(),(i=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("xlink","http://www.w3.org/1999/xlink"),this.getStartY(),this.getEndY(),i.setAttribute("height",this.m_height),i.setAttribute("width",this.m_sliderheight),this.m_sliderheightratio<=2&&i.setAttribute("display","none"),i.setAttribute("id",this.svgTimeScaleId),i.setAttribute("class","svg_chart_container"),$("#svgTimeScaleDiv"+e.m_objectid).append(i)):($("#svgTimeScaleDiv"+e.m_objectid).remove(),$("#rangeSelector"+e.m_objectid).remove())},GroupBarChart.prototype.initializeCalculation=function(){var t=this.updateSeriesData(this.visibleSeriesInfo.seriesData),e=this.updateSeriesData(this.m_categoryData),i=this.updateSeriesData(this.m_subCategoryData);if(this.calculateMinimumMaximum(t),this.setChartDrawingArea(),this.dataMap={},IsBoolean(this.isEmptyCategory)&&!IsBoolean(this.isEmptySubCategory))this.m_calculation.init(this,i,this.visibleSeriesInfo.seriesData,this.dataMap);else if(!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isEmptySubCategory))this.m_calculation.init(this,e,this.visibleSeriesInfo.seriesData,this.dataMap);else{for(var s=0;s<e.length;s++)null==this.dataMap[e[s][0]]&&(this.dataMap[e[s][0]]={}),this.dataMap[e[s][0]][i[s][0]]=t[s];this.m_calculation.init(this,i,this.visibleSeriesInfo.seriesData,this.dataMap)}this.m_xPositionArray=this.m_calculation.getXPositionArray(),this.m_yPositionArray=this.m_calculation.getYPositionArray(),this.m_barWidth=this.m_calculation.getbarWidth(),this.m_noofseries=this.m_calculation.xAxisData.length,this.m_barGap=this.m_calculation.getBarGap(),this.m_barWidthArray=this.m_calculation.getstackHeightArray(),IsBoolean(this.getCounterFlagForSeriesVisiblity())&&IsBoolean(this.m_showmarkingorpercentvalue)?(this.m_percentageArray=!IsBoolean(this.m_showpercentvalue)||IsBoolean(this.getCheckedAllPosContainigZero())?this.getPercentage():this.getRoundValue(this.getPercentage(),100),this.m_showPerCentageFlag=!0):(this.m_percentageArray=this.getArrayWhenPercentFlagIsFalse(),this.m_seriesInitializeFlag=!1),this.initializeBars(),this.initializeDataLabel()},GroupBarChart.prototype.calculateMinimumMaximum=function(t){var t="clustered"==this.m_charttype.toLowerCase()||"overlaid"==this.m_charttype.toLowerCase()||"stacked"==this.m_charttype.toLowerCase()&&1===t[0].length?this.calculateMinMaxValue(t):this.calculateFinalMinMaxValue(t),e=t.min,t=t.max,e=this.getCalculateNiceScale(e,t,this.m_basezero,this.m_autoaxissetup,this.m_minimumaxisvalue,this.m_maximumaxisvalue,this.m_width);this.min=e.min,this.max=e.max,this.m_numberOfMarkers=e.markerArray.length,this.m_xAxisText=e.step,this.m_xAxisMarkersArray=e.markerArray},GroupBarChart.prototype.calculateFinalMinMaxValue=function(t){var e=isNaN(+t[0][0])?0:+t[0][0],i=isNaN(+t[0][0])?0:+t[0][0];if("100%"==this.m_charttype){for(var s=!1,a=0,r=t.length;a<r;a++)for(var o=0,h=t[a].length;o<h;o++)if(t[a][o]<0){s=!0;break}e=100,i=IsBoolean(s)?-100:0}else for(a=0,r=t.length;a<r;a++){for(var n=0,l=0,m=t[a].length,o=0;o<m;o++)isNaN(+t[a][o])||(0<+t[a][o]?n=+n+ +t[a][o]:l=+t[a][o]+ +l);e<=n&&(e=+n),+l<i&&(i=+l)}return{max:e,min:i}},GroupBarChart.prototype.calculateCategoryBoxSize=function(){var t={},e=this.getStartY()-this.m_barGap/2,i=Object.keys(this.dataMap).length-1;for(Object.keys(this.dataMap)[i]in this.dataMap){var s,a=0;for(s in this.dataMap[Object.keys(this.dataMap)[i]])a++;IsBoolean(this.m_mergesubcategory)&&null!=this.m_categoryNames[0]?e=e-a*this.m_barWidth-this.m_barGap/2:e-=a*this.m_barWidth+this.m_barGap*a-this.m_barGap/2,t[Object.keys(this.dataMap)[i]]=e,e-=this.m_barGap/2,i--}return t},GroupBarChart.prototype.getCheckedAllPosContainigZero=function(){for(var t=!0,e=0;e<this.m_seriesData[this.m_seriesVisiblityPosition].length;e++)0!=this.m_seriesData[this.m_seriesVisiblityPosition][e]&&(t=!1);return t},GroupBarChart.prototype.getArrayWhenPercentFlagIsFalse=function(){for(var t=[],e=0;e<this.m_seriesData.length;e++)t[e]=0;return t},GroupBarChart.prototype.getPercentage=function(){for(var t=[],e=this.getSumOfSeriesData(),i=0;i<this.m_seriesData[this.m_seriesVisiblityPosition].length;i++)IsBoolean(this.m_showpercentvalue)?(0<this.m_seriesData[this.m_seriesVisiblityPosition][i]?t[i]=this.m_seriesData[this.m_seriesVisiblityPosition][i]/e*100:t[i]=0,this.m_showPercentValueFlag=!0):t[i]=this.m_seriesData[this.m_seriesVisiblityPosition][i];return t},GroupBarChart.prototype.getSumOfSeriesData=function(){for(var t=0,e=0;e<this.m_seriesData[this.m_seriesVisiblityPosition].length;e++)"NaN"==this.m_seriesData[this.m_seriesVisiblityPosition][e]&&(this.m_seriesData[this.m_seriesVisiblityPosition][e]=0),0<this.m_seriesData[this.m_seriesVisiblityPosition][e]&&(t=+t+ +this.m_seriesData[this.m_seriesVisiblityPosition][e]);return t},GroupBarChart.prototype.initializeBars=function(){this.m_barSeriesArray={};for(var t=0;t<this.visibleSeriesInfo.seriesName.length;t++){this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]]=new GroupBarSeries;var e="clustered"==this.m_charttype?this.m_barWidth/this.visibleSeriesInfo.seriesName.length:this.m_barWidth;"clustered"==this.m_charttype&&(e*=this.clusteredbarpadding),this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].init(this.m_xPositionArray[t],this.m_yPositionArray[t],e,this.m_barWidthArray[t],this.m_percentageArray,this.getColorsForSeries()[t],this.m_strokecolor,this.m_showmarkingorpercentvalue,this.m_showPercentValueFlag,this.m_seriesInitializeFlag,this.m_plotTrasparencyArray[t],this)}},GroupBarChart.prototype.initializeDataLabel=function(){this.m_valueTextSeries={},0!=this.getCategoryNames().length&&null!=this.getSubCategoryNames()[0]||(this.m_seriesDataForDataLabel=[]),void 0!==this.m_seriesDataForDataLabel.length&&!IsBoolean(this.isEmptySubCategory)&&0!==this.m_seriesDataForDataLabel.length||this.setSeriesDataLabel();for(var t,e,i=0,s=0;s<this.m_seriesNames.length;s++)this.m_seriesDataForDataLabel[s]=this.visibleSeriesInfo.seriesData[s],IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[s]])&&(IsBoolean(this.m_seriesDataLabelProperty[s].showDataLabel)&&(t="100%"==this.m_charttype&&void 0!==this.m_seriesDataLabelProperty[i].showPercentValue&&IsBoolean(this.m_seriesDataLabelProperty[i].showPercentValue)?(this.m_seriesDataForDataLabel[i]=this.getPercentageForHundred()[i],i):s,e="clustered"==this.m_charttype?this.m_barWidth/this.visibleSeriesInfo.seriesName.length:this.m_barWidth,this.m_valueTextSeries[this.m_seriesNames[s]]=new ValueTextSeries,this.m_valueTextSeries[this.m_seriesNames[s]].init(this.m_xPositionArray[i],this.m_yPositionArray[i],this,this.m_seriesDataForDataLabel[t],this.m_seriesDataLabelProperty[s],this.m_seriesData[s],e,this.m_barWidthArray[i])),i++)},GroupBarChart.prototype.setSeriesDataLabel=function(){this.m_seriesDataForDataLabel=[];for(var t=0,e=this.getDataProvider().length;t<e;t++)for(var i=this.getDataProvider()[t],s=0,a=this.getSeriesNames().length;s<a;s++){this.m_seriesDataForDataLabel[s]||(this.m_seriesDataForDataLabel[s]=[]);var r=this.getValidFieldDataFromRecord(i,this.m_seriesDataLabelProperty[s].datalabelField);this.m_seriesDataForDataLabel[s][t]=r}},GroupBarChart.prototype.getColorsForSeries=function(){return this.m_seriesColorsArray},GroupBarChart.prototype.setColorsForSeries=function(){this.m_seriesColorsArray=[];for(var t=!0,e=0;e<this.m_categoryData.length&&t;e++)t=Array.isArray(this.m_categoryData[e])&&0===this.m_categoryData[e].length;if(IsBoolean(this.m_enablecolorfromdrill)&&IsBoolean(this.m_startDrill))for(e=0;e<this.visibleSeriesInfo.seriesData.length;e++){this.m_seriesColorsArray[e]=[];for(var i=0;i<this.visibleSeriesInfo.seriesData[e].length;i++)this.m_seriesColorsArray[e][i]=this.m_drillColor}else if(!IsBoolean(this.m_designMode)&&null!=this.getCategoryColors()&&""!=this.getCategoryColors()&&0<this.getCategoryColors().getCategoryColor().length&&IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName())&&0<this.m_categoryJSON.length){var s=[];s=0<this.m_subCategoryNames.length&&0==this.m_categoryNames.length?this.getCategoryColors().getCategoryColorsForCategoryNames(this.getSubCategoryData()[0],this.m_categoryFieldColor):this.getCategoryColors().getCategoryColorsForCategoryNames(this.getCategoryData()[0],this.m_categoryFieldColor);for(e=0;e<this.visibleSeriesInfo.seriesData.length;e++){this.m_seriesColorsArray[e]=[];for(i=0;i<this.visibleSeriesInfo.seriesData[e].length;i++)this.m_seriesColorsArray[e][i]=s[i]}}else if(!IsBoolean(this.m_designMode)&&null!=this.getSubCategoryColors()&&""!=this.getSubCategoryColors()&&0<this.getSubCategoryColors().getSubCategoryColor().length&&IsBoolean(this.getSubCategoryColors().getshowColorsFromSubCategoryName())&&0<this.m_subCategoryJSON.length)for(s=this.getSubCategoryColors().getSubCategoryColorsForSubCategoryNames(this.getSubCategoryData()[0],this.m_categoryFieldColor),e=0;e<this.visibleSeriesInfo.seriesData.length;e++){this.m_seriesColorsArray[e]=[];for(i=0;i<this.visibleSeriesInfo.seriesData[e].length;i++)this.m_seriesColorsArray[e][i]=s[i]}else if(IsBoolean(this.m_designMode)||""==this.getCategoryColors()||IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName())&&0!=this.getCategoryColors().getCategoryColor().length||""==this.getConditionalColors()||null==this.getConditionalColors()||!(0<this.getConditionalColors().getConditionalColor().length)||IsBoolean(t))for(var a=this.visibleSeriesInfo.seriesColor,e=0;e<this.visibleSeriesInfo.seriesData.length;e++){this.m_seriesColorsArray[e]=[];for(i=0;i<this.visibleSeriesInfo.seriesData[e].length;i++)this.m_seriesColorsArray[e][i]=a[e]}else for(var r=this.getConditionalColors().getConditionalColorsForConditions(this.visibleSeriesInfo.seriesName,this.visibleSeriesInfo.seriesColor,this.visibleSeriesInfo.seriesData,this),e=0;e<this.visibleSeriesInfo.seriesData.length;e++){this.m_seriesColorsArray[e]=[];for(var i=0;i<this.visibleSeriesInfo.seriesData[e].length;i++)this.m_seriesColorsArray[e][i]=r[e][i]}},GroupBarChart.prototype.updateSeriesData=function(t){var e=[];if(null!=t&&null!==t&&""!==t&&0!=t.length)for(var i=0;i<t[0].length;i++){e[i]=[];for(var s=0;s<t.length;s++)e[i][s]=t[s][i]}return e},GroupBarChart.prototype.drawTitle=function(){this.m_title.draw()},GroupBarChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},GroupBarChart.prototype.drawXAxis=function(){this.createHorizontalLineGroup("horizontallinegrp"),IsBoolean(this.m_showhorizontalmarkerline)&&this.drawPartitionLine(),IsBoolean(this.m_showcatpartitioner)&&this.drawCategoryPartitionLine(),this.createXAxisMarkerLabelGroup("xaxislabelgrp"),this.m_xAxis.markXaxis(),this.m_xAxis.drawXAxis()},GroupBarChart.prototype.drawCategoryPartitionLine=function(){var t,e=this.getStartX()-this.getSubCatTextMargin()-this.m_yAxis.m_axislinetotextgap,e="left"==this.m_subcategoryorientation?this.getStartX()-this.getCatTextMargin()-this.getSubCatTextMargin()-this.m_yAxis.m_axislinetotextgap:this.getStartX()-this.getCatTextMargin()-this.m_yAxis.m_axislinetotextgap,i=(this.drawLine(e,+this.getStartY()+1,this.getStartX(),+this.getStartY()+1),this.calculateCategoryBoxSize());for(t in i)this.drawLine(e,i[t],this.getStartX(),i[t])},GroupBarChart.prototype.drawPartitionLine=function(){var t,e=this.getStartX(),i=(this.drawLine(e,+this.getStartY()+1,+this.getEndX()-1,+this.getStartY()+1),this.calculateCategoryBoxSize());for(t in i)this.drawLine(e,i[t],+this.getEndX()-1,i[t])},GroupBarChart.prototype.drawYAxis=function(){IsBoolean(this.m_showverticalmarkerline)&&(this.createVerticalLineGroup("verticallinegrp"),this.m_yAxis.drawVerticalLine()),IsBoolean(this.m_zeromarkerline)&&!IsBoolean(this.m_basezero)&&IsBoolean(this.m_yAxis.hasNegativeAxisMarker(this.m_xAxisMarkersArray))&&this.m_yAxis.drawZeroMarkerLine(),IsBoolean(this.isEmptySubCategory)||IsBoolean(this.isEmptyCategory)||"left"!=this.m_subcategoryorientation||!IsBoolean(this.m_showcatsubcatpartitioner)||this.drawVerticalPartLine(),IsBoolean(this.m_mergesubcategory)||(this.createTickGroup("yaxistickmark"),this.m_yAxis.drawTickMarks()),this.createYAxisCategoryMarkerLabelGroup("yaxiscategorylabelgrp"),this.createYAxisSubCategoryMarkerLabelGroup("yaxissubcategorylabelgrp"),this.m_yAxis.markSubCategory(),this.m_yAxis.drawYAxis(),this.m_yAxis.drawCategory()},GroupBarChart.prototype.drawVerticalPartLine=function(){var t=this.getStartX()-this.getSubCatTextMargin(),t=(this.drawLine(t,this.getStartY(),t,this.getEndY()),this.getStartX()-this.getCatTextMargin()-this.getSubCatTextMargin()-this.m_yAxis.m_axislinetotextgap);this.drawLine(t,this.getStartY(),t,this.getEndY())},GroupBarChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawSVGFrame(),this.getBGGradientColorToContainer()},GroupBarChart.prototype.getBGGradientColorToContainer=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","defs"),e=document.createElementNS(NS,"filter"),i=(e.setAttribute("id","stackShadow"+this.m_objectid),document.createElementNS(NS,"feOffset")),s=(i.setAttribute("dx","0"),i.setAttribute("dy","0"),i.setAttribute("result","offOut"),i.setAttribute("in","SourceGraphic"),document.createElementNS(NS,"feGaussianBlur")),a=(s.setAttribute("result","blurOut"),s.setAttribute("in","offOut"),s.setAttribute("stdDeviation","1"),document.createElementNS(NS,"feColorMatrix")),r=(a.setAttribute("in","blurOut"),a.setAttribute("result","color-out"),a.setAttribute("type","matrix"),a.setAttribute("values",hex2Matrix(this.m_stackshadowcolor,this.m_stackshadowopacity)),document.createElementNS(NS,"feBlend"));r.setAttribute("in","SourceGraphic"),r.setAttribute("in2","color-out"),r.setAttribute("mode","normal"),e.appendChild(i),e.appendChild(s),e.appendChild(a),e.appendChild(r),t.appendChild(e),$("#"+this.svgContainerId).append(t)},GroupBarChart.prototype.drawObject=function(){this.drawSVGObject()},GroupBarChart.prototype.drawBarChart=function(){if("gradient1"==this.m_chartbase)for(var t=0,e=this.visibleSeriesInfo.seriesName.length;t<e;t++)for(var i=0,s=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].xPixel.length;i<s;i++)this.createGradient1(this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].barStackArray[i].stackColor,t,i);else if("gradient2"==this.m_chartbase)for(var t=0,a=this.visibleSeriesInfo.seriesName.length;t<a;t++)for(i=0,s=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].xPixel.length;i<s;i++)this.createGradient2(this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].barStackArray[i].stackColor,t,i);else if("gradient3"==this.m_chartbase)for(t=0,a=this.visibleSeriesInfo.seriesName.length;t<a;t++)for(i=0,s=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].xPixel.length;i<s;i++)this.createGradient3(this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[t]].barStackArray[i].stackColor,t,i);for(var r=0;r<this.visibleSeriesInfo.seriesName.length;r++){var o=this.m_barSeriesArray[this.visibleSeriesInfo.seriesName[r]];this.createStackGroup(o,"stackgrp",r,this.visibleSeriesInfo.seriesName[r]),o.drawBarSeries(r)}},GroupBarChart.prototype.drawDataLabel=function(){this.m_overlappeddatalabelarrayX=[],this.m_overlappeddatalabelarrayY=[];for(var t,e=0,i=this.m_seriesNames.length;e<i;e++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[e]])&&(t=this.m_valueTextSeries[this.m_seriesNames[e]],IsBoolean(this.m_seriesDataLabelProperty[e].showDataLabel))&&(this.createDataLabelGroup(t,"datalabelgrp",e,this.m_seriesNames[e]),this.m_valueTextSeries[this.m_seriesNames[e]].drawValueTextSeries())},GroupBarChart.prototype.getArraySUM=function(t){for(var e=0,i=0;i<t.length;i++)t[i]<0&&(t[i]=-1*t[i]),isNaN(t[i])||(e=+e+ +t[i]);return e},GroupBarChart.prototype.getUpdateSeriesDataWithCategory=function(t){for(var e=[],i=0;i<t[0].length;i++){e[i]=[];for(var s=0;s<t.length;s++)e[i][s]=t[s][i]}return e},GroupBarChart.prototype.setPercentageForHundred=function(){for(var t=this.getUpdateSeriesDataWithCategory(this.visibleSeriesInfo.seriesData),e=(this.m_SeriesDataInPerForHundredChart,[]),i=0;i<t.length;i++){var s=this.getArraySUM(t[i]);e[i]=[];for(var a=0;a<t[i].length;a++)""===t[i][a]||isNaN(t[i][a])?e[i][a]=0:e[i][a]=t[i][a]/s*100}0<e.length&&(this.m_SeriesDataInPerForHundredChart=this.getUpdateSeriesDataForHundredPercentageChart(e))},GroupBarChart.prototype.getPercentageForHundred=function(){return this.m_SeriesDataInPerForHundredChart},GroupBarChart.prototype.getUpdateSeriesDataForHundredPercentageChart=function(t){for(var e=[],i=0,s=t[0].length;i<s;i++){e[i]=[];for(var a=0,r=t.length;a<r;a++)e[i][a]=t[a][i]}for(i=0,s=this.visibleSeriesInfo.seriesData.length;i<s;i++)for(a=0,r=this.visibleSeriesInfo.seriesData[i].length;a<r;a++)isNaN(this.visibleSeriesInfo.seriesData[i][a])||+this.visibleSeriesInfo.seriesData[i][a]<0&&(e[i][a]=-1*e[i][a]);return e},GroupBarChart.prototype.getToolTipData=function(t,e){var i;if(!IsBoolean(this.m_isEmptySeries)&&IsBoolean(this.isVisibleSeries())&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType)){if(t>=this.getStartX()&&t<=this.getEndX()&&e<=this.getStartY()&&e>=this.getEndY()){this.yPositions=this.m_calculation.getYPositionforToolTip();for(var s=this.visibleSeriesInfo.seriesData,a=this.getPercentageForHundred(),r=0;r<this.yPositions.length;r++)if(e<=+this.yPositions[r]+ +this.m_barWidth&&e>=+this.yPositions[r]){if((i={cat:"",subcat:""}).data=new Array,IsBoolean(this.isEmptyCategory)||(i.cat=this.getCategoryData()[0][r]),IsBoolean(this.isEmptySubCategory)||(i.subcat=this.getSubCategoryData()[0][r]),IsBoolean("Default"==this.m_customtextboxfortooltip.dataTipType)){for(var o=0,h=0;o<this.visibleSeriesInfo.seriesData.length;o++){var n,l=[],m=(l[1]=this.visibleSeriesInfo.seriesDisplayName[o],IsBoolean(this.m_enablecolorfromdrill)&&IsBoolean(this.m_startDrill)?l[0]="overlaid"!=this.m_charttype?this.getColorsForSeries()[o][r]:this.m_drillColor:l[0]="overlaid"!=this.m_charttype?this.getColorsForSeries()[o][r]:this.visibleSeriesInfo.seriesColor[o],n=""==s[o][r]||isNaN(s[o][r])||null==s[o][r]||"null"==s[o][r]?s[o][r]:(n=+s[o][r])%1!=0&&"default"!==this.m_tooltipprecision?n.toFixed(this.m_tooltipprecision):+s[o][r],this.getUpdatedFormatterForToolTip(n,this.visibleSeriesInfo.seriesName[o]));if(l[2]=m,"100%"==this.m_charttype&&1<this.getSeriesDisplayNames().length){"auto"==this.m_tooltipproperties.tooltippercentprecision?0==countDecimal(a[o][r].toString())?l[3]=a[o][r]+"%":(l[3]=a[o][r].toFixed(2),l[3]=l[3]%1==0?(+l[3]).toFixed()+"%":l[3]+"%"):l[3]=a[o][r].toFixed(this.m_tooltipproperties.tooltippercentprecision)+"%";for(var c=0,g=0;g<=o;g++)isNaN(s[g][r])||(c+=+s[g][r]);for(var _=0,d=0;d<=o;d++)isNaN(a[d][r])||(_+=a[d][r]);IsBoolean(this.m_tooltipproperties.showcummulativesum)&&(l[4]=this.getNumberWithCommas(c)),IsBoolean(this.m_tooltipproperties.showcummulativepercent)&&(l[5]=_.toFixed(2)+"%")}i.data[h]=l,h++}i.highlightIndex=this.getDrillColor(t,e),IsBoolean(this.m_controlledtooltip)&&(i=this.updateTooltipData(i));break}i=this.getDataProvider()[r]}}else this.hideToolTip();return i}},GroupBarChart.prototype.getDrillColor=function(t,e){if(!IsBoolean(this.m_isEmptySeries)&&t>=this.getStartX()&&t<=this.getEndX()&&e<=this.getStartY()&&e>=this.getEndY())for(var i="stacked"==this.m_charttype?0:this.m_drillminstackheight,s=0;s<this.m_yPositionArray.length;s++)for(var a,r,o,h=0;h<=this.m_yPositionArray[s].length;h++)if(o=+this.m_barWidthArray[s][h]<0?(a=+this.m_barWidthArray[s][h]<-i?+this.m_barWidthArray[s][h]:-i,r=+this.m_xPositionArray[s][h]+a,+this.m_xPositionArray[s][h]):(a=IsBoolean(this.m_basezero)&&+this.visibleSeriesInfo.seriesData[s][h]<0?0:+this.m_barWidthArray[s][h]>i?+this.m_barWidthArray[s][h]:i,r=+this.m_xPositionArray[s][h],+this.m_xPositionArray[s][h]+a),"clustered"==this.m_charttype){if(r<=t&&t<=o&&e>=+this.m_yPositionArray[s][h]&&e<=+this.m_yPositionArray[s][h]+ +this.m_barWidth/this.m_yPositionArray.length)return s}else if(r<=t&&t<=o&&e>=+this.m_yPositionArray[s][h]&&e<=+this.m_yPositionArray[s][h]+ +this.m_barWidth)return s},GroupBarChart.prototype.drawTooltip=function(t,e){var i;IsBoolean(this.m_isEmptySeries)||this.m_designMode||(i=this.getToolTipData(t,e),this.m_hovercallback&&""!=this.m_hovercallback?this.drawCallBackContent(t,e,i):this.drawTooltipContent(i))},GroupBarChart.prototype.drawTooltipContent=function(t){this.m_tooltip.draw(t,this.m_componenttype)},GroupBarChart.prototype.getDrillDataPoints=function(t,e){if(!IsBoolean(this.m_isEmptySeries)&&IsBoolean(this.isVisibleSeries())&&t>=this.getStartX()&&t<=this.getEndX()&&e<=this.getStartY()&&e>=this.getEndY()){for(var i=!1,s="stacked"==this.m_charttype?0:this.m_drillminstackheight,a=0;a<this.m_yPositionArray.length;a++)for(var r,o,h,n=0;n<this.m_yPositionArray[a].length;n++)if(h=+this.m_barWidthArray[a][n]<0?(r=+this.m_barWidthArray[a][n]<-s?+this.m_barWidthArray[a][n]:-s,o=+this.m_xPositionArray[a][n]+r,+this.m_xPositionArray[a][n]):(r=IsBoolean(this.m_basezero)&&+this.visibleSeriesInfo.seriesData[a][n]<0?0:+this.m_barWidthArray[a][n]>s?+this.m_barWidthArray[a][n]:s,o=+this.m_xPositionArray[a][n],+this.m_xPositionArray[a][n]+r),"clustered"==this.m_charttype){if(o<=t&&t<=h&&e>=+this.m_yPositionArray[a][n]&&e<=+this.m_yPositionArray[a][n]+ +this.m_barWidth/this.m_yPositionArray.length)return c=this.getFieldNameValueMap(n),g=this.getColorsForSeries()[a][n],_=this.visibleSeriesInfo.seriesName[a],d=this.visibleSeriesInfo.seriesDisplayName[a],p=c[_],c.drillField=_,c.drillDisplayField=d,c.drillValue=p,c.drillIndex=n,{drillRecord:c,drillColor:g}}else if(o<=t&&t<=h&&e>=+this.m_yPositionArray[a][n]&&e<=+this.m_yPositionArray[a][n]+ +this.m_barWidth)return c=this.getFieldNameValueMap(n),g=this.getColorsForSeries()[a][n],_=this.visibleSeriesInfo.seriesName[a],d=this.visibleSeriesInfo.seriesDisplayName[a],p=c[_],c.drillField=_,c.drillDisplayField=d,c.drillValue=p,i=!0,c.drillIndex=n,{drillRecord:c,drillColor:g};if("stacked"==this.m_charttype&&!i)for(var l=0,m=this.yPositions.length;l<m;l++)if(e<=+this.yPositions[l]+ +this.m_barWidth&&e>=+this.yPositions[l])for(var c,g,_,d,p,u=0,y=this.m_xPositionArray.length;u<y;u++)if(t>=this.m_xPositionArray[u][l]&&t<=this.m_xPositionArray[u][l]+this.m_drillminstackheight||t<=this.m_xPositionArray[u][l]+this.m_barWidthArray[u][l]&&t>=this.m_xPositionArray[u][l]-this.m_drillminstackheight)return c=this.getFieldNameValueMap(l),g=this.m_drillColor,p=d=_="",c.drillField=_,c.drillDisplayField=d,c.drillValue=p,i=!0,{drillRecord:c,drillColor:g}}},GroupBarCalculation.prototype.init=function(t,e,i,s){this.m_chart=t,this.m_chartData=s,this.yAxisData=e,this.xAxisData=i,this.m_chartType=this.m_chart.getChartType(),this.barGap=10,this.dataMap=this.m_chart.dataMap,this.startX=this.m_chart.getStartX(),this.startY=this.m_chart.getStartY(),this.endX=this.m_chart.getEndX(),this.endY=this.m_chart.getEndY(),this.calculateBarWidth(),this.setRatio(),this.setXPositionArray(),this.setYPositionArray()},GroupBarCalculation.prototype.getStartX=function(){return+this.startX},GroupBarCalculation.prototype.getMaxValue=function(){return this.m_chart.max},GroupBarCalculation.prototype.getMinValue=function(){return this.m_chart.min},GroupBarCalculation.prototype.getXAxisText=function(){return this.m_chart.m_xAxisText},GroupBarCalculation.prototype.getXAxisMarkersArray=function(){return this.m_chart.m_xAxisMarkersArray},GroupBarCalculation.prototype.calculateBarWidth=function(){var t=this.yAxisData.length;if(IsBoolean(this.m_chart.m_mergesubcategory)&&null!=this.m_chart.m_categoryNames[0]&&null!=this.m_chart.m_subCategoryNames[0]){var e,i=0;for(e in this.dataMap)this.dataMap.hasOwnProperty(e)&&i++;t=i}this.barGap;var s,a=+this.getDrawHeight(),r=(s="auto"==this.m_chart.m_controlbarwidth?(s=a/this.yAxisData.length)*this.m_chart.m_barwidth/100:this.m_chart.m_controlbarwidth<a/t?this.m_chart.m_controlbarwidth:(s=a/t)*this.m_chart.m_barwidth/100,new Date(this.maxDate).getTime()),r=isNaN(r)?.001:r,o=new Date(this.minDate).getTime(),h=(o=isNaN(o)?0:o,this.getDataFrequencyInMS(this.yAxisData)),r=a/(r-o+h)*h;this.minSliderIndex=0,this.maxSliderIndex=parseInt(a/r),this.setBarWidth(s),this.setColumnGap(s,t)},GroupBarCalculation.prototype.getDataFrequencyInMS=function(t){for(var e,i=new Date(isNaN(t[0])?t[0]:+t[0]),s=new Date(isNaN(t[1])?t[1]:+t[1]),a=Math.abs(Math.floor(i.getTime()-s.getTime())),r=t.length,o=0;o<r;o++)1<=o&&(i=new Date(isNaN(t[o-1])?t[o-1]:+t[o-1]),s=new Date(isNaN(t[o])?t[o]:+t[o]),a=(e=Math.abs(Math.floor(i.getTime()-s.getTime())))<(a=0===a&&0!==e?e:a)&&0!=e?e:a);return a/864e5==28||a/864e5==29?2592e6:a},GroupBarCalculation.prototype.setBarWidth=function(t){this.barWidth=t},GroupBarCalculation.prototype.setColumnGap=function(t,e){t*=this.yAxisData.length,t=this.getDrawHeight()-t;this.barGap=t/+e},GroupBarCalculation.prototype.drawBaseLine=function(){ctx.beginPath(),ctx.lineWidth="0.4",ctx.strokeStyle="#000",ctx.moveTo(this.getStartX(),this.startY),ctx.lineTo(this.getStartX(),this.endY),ctx.stroke(),ctx.closePath()},GroupBarCalculation.prototype.setRatio=function(){this.ratio=this.getDrawWidth()/(this.getMaxValue()-this.getMinValue())},GroupBarCalculation.prototype.getDrawHeight=function(){return this.drawHeight=this.startY-this.endY,this.drawHeight},GroupBarCalculation.prototype.getDrawWidth=function(){return this.drawWidth=+this.endX-+this.startX,this.drawWidth},GroupBarCalculation.prototype.getBarGap=function(){return this.barGap},GroupBarCalculation.prototype.getbarWidth=function(){return this.barWidth},GroupBarCalculation.prototype.getRatio=function(){return this.ratio},GroupBarCalculation.prototype.getXPositionArray=function(){return this.xPositionArray},GroupBarCalculation.prototype.setXPositionArrayForStackHundredPercent=function(){this.stackHeightArray=[];for(var t=[],e=[],i=[],s=(this.m_startX=this.getStartX(),this.m_xAxisData=this.xAxisData,"100%"===this.m_chartType?this.m_chart.getPercentageForHundred():this.xAxisData),a=0,r=s.length;a<r;a++){t[a]=[],e[a]=[],i[a]=[],this.stackHeightArray[a]=[];for(var o=0,h=s[a].length;o<h;o++){isNaN(s[a][o])&&(s[a][o]="");var n,l=this.getRatio();0==a?0<=+s[a][o]?(0<+this.m_chart.m_minimumaxisvalue&&!IsBoolean(this.m_chart.isAxisSetup())?t[a][o]=this.m_startX:t[a][o]=this.m_startX-l*this.getMinValue(),e[a][o]=t[a][o]+s[a][o]*l,i[a][o]=+t[a][o]):(t[a][o]=this.m_startX-l*this.getMinValue(),i[a][o]=t[a][o]+s[a][o]*l*1,e[a][o]=+this.m_startX-l*this.getMinValue()):0<=this.m_xAxisData[a][o]?(e[a][o]=e[a-1][o],i[a][o]=i[a-1][o],t[a][o]=+e[a][o],e[a][o]=+t[a][o]+s[a][o]*l):(i[a][o]=i[a-1][o],e[a][o]=e[a-1][o],t[a][o]=+i[a][o],i[a][o]=+t[a][o]+s[a][o]*l),n=this.getMaxValue()<0?s[a][o]-this.getMaxValue():this.getMinValue()<0?s[a][o]:s[a][o]-this.getMinValue(),this.stackHeightArray[a][o]=l*n}}return t},GroupBarCalculation.prototype.setXPositionArray=function(){if(this.xPositionArray=[],this.stackHeightArray=[],"stacked"==this.m_chart.m_charttype||"100%"==this.m_chart.m_charttype)this.xPositionArray=this.setXPositionArrayForStackHundredPercent();else for(var t=0;t<this.xAxisData.length;t++){this.xPositionArray[t]=[],this.stackHeightArray[t]=[];for(var e=0;e<this.xAxisData[t].length;e++){var i=this.getRatio(),s=this.getMinValue(),a=this.getMaxValue();"clustered"==this.m_chart.m_charttype&&(a<0?(this.xPositionArray[t][e]=+this.getStartX()-(s-a)*i,this.stackHeightArray[t][e]=(this.xAxisData[t][e]-a)*i):s<0?(this.xPositionArray[t][e]=+this.getStartX()-s*i,this.stackHeightArray[t][e]=this.xAxisData[t][e]*i):(this.xPositionArray[t][e]=+this.getStartX(),this.stackHeightArray[t][e]=(this.xAxisData[t][e]-s)*i))}}this.xPositionMap=this.xPositionArray,this.manageMinMaxExceedLimitData()},GroupBarCalculation.prototype.manageMinMaxExceedLimitData=function(){for(var t=0;t<this.xPositionArray.length;t++)for(var e=0;e<this.xPositionArray[t].length;e++){this.xPositionArray[t][e]>this.m_chart.getEndX()&&(this.xPositionArray[t][e]=this.m_chart.getEndX()),this.xPositionArray[t][e]<this.m_chart.getStartX()&&(this.xPositionArray[t][e]=this.m_chart.getStartX());var i=this.xPositionArray[t][e]+this.stackHeightArray[t][e];this.getStartX()>i&&(this.stackHeightArray[t][e]=this.stackHeightArray[t][e]+(this.getStartX()-i)),i>this.m_chart.getEndX()&&(this.stackHeightArray[t][e]=this.m_chart.getEndX()-this.xPositionArray[t][e])}},GroupBarCalculation.prototype.getYPositionArray=function(){return this.yPositionArray},GroupBarCalculation.prototype.setYPositionArray=function(){this.yPositionArray=[];var t=(this.getbarWidth()-this.getbarWidth()*this.m_chart.clusteredbarpadding)/2;if(IsBoolean(this.m_chart.m_mergesubcategory)&&null!=this.m_chart.m_categoryNames[0]&&null!=this.m_chart.m_subCategoryNames[0]){var e=[],i=0,s=Object.keys(this.dataMap).length-1;for(Object.keys(this.dataMap)[s]in this.dataMap){for(var a in this.dataMap[Object.keys(this.dataMap)[s]])i++;s--,e.push(i)}for(var r=0,o=this.getBarGap()/2,h=this.startY,n=0;n<e.length;n++){h-=o;for(var l=r;l<e[n];l++){this.yPositionArray[l]=[];for(var m=0,c=1;m<this.xAxisData.length;m++)"clustered"==this.m_chart.m_charttype?(this.yPositionArray[l][m]=h-this.getbarWidth()*l-this.getbarWidth()/this.xAxisData.length*c+t,c++):this.yPositionArray[l][m]=h-+this.getbarWidth()-this.getbarWidth()*l;this.yPositionArray[l]=this.yPositionArray[l].reverse()}r=e[n],o=this.getBarGap()}this.yPositionArray=this.yPositionArray.reverse()}else for(l=0;l<this.xAxisData[0].length;l++){this.yPositionArray[l]=[];for(m=0,n=this.xAxisData.length;m<this.xAxisData.length;m++)"clustered"==this.m_chart.m_charttype?(this.yPositionArray[l][m]=this.startY-this.getBarGap()*(this.xAxisData[0].length-1-l)-this.getBarGap()/2-this.getbarWidth()*(this.xAxisData[0].length-1-l)-this.getbarWidth()/this.xAxisData.length*n+t,n--):this.yPositionArray[l][m]=this.startY-this.getBarGap()*(this.xAxisData[0].length-1-l)-+this.getbarWidth()-this.getBarGap()/2-this.getbarWidth()*(this.xAxisData[0].length-1-l)}this.yPositionArray=convertArrayType(this.yPositionArray)},GroupBarCalculation.prototype.getYPositionforToolTip=function(){for(var t=[],e=this.getYPositionArray(),i=0;i<e[0].length;i++)t.push(e[0][i]);return t},GroupBarCalculation.prototype.getstackHeightArray=function(){return this.stackHeightArray},GroupBarCalculation.prototype.getYAxisText=function(){return this.yAxisData},GroupBarCalculation.prototype.getYAxisMarkersArray=function(){return this.yAxisData},GroupBarSeries.prototype.init=function(t,e,i,s,a,r,o,h,n,l,m,c){this.m_chart=c,this.ctx=this.m_chart.ctx,this.m_chartbase=this.m_chart.m_chartbase,this.xPixel=t,this.yPixelArray=e,this.stackWidth=i,this.stackHeightArray=s,this.stackPercentArray=a,this.stackColorArray=r,this.strokecolor=o,this.m_stackMarkingOnTopOfBarFlag=h,this.m_stackShowPercentValueFlag=n,this.m_stackSeriesInitializeFlag=l,this.m_plotTrasparency=m;for(var g=0;g<this.xPixel.length;g++)this.barStackArray[g]=new GroupBarStack,this.barStackArray[g].init(this.xPixel[g],this.yPixelArray[g],this.stackWidth,this.stackHeightArray[g],this.stackPercentArray[g],this.stackColorArray[g],this.strokecolor,this.ctx,c,this.m_chartbase,this.m_stackMarkingOnTopOfBarFlag,this.m_stackShowPercentValueFlag,this.m_stackSeriesInitializeFlag,this.m_plotTrasparency)},GroupBarSeries.prototype.drawBarSeries=function(t){for(var e=0;e<this.xPixel.length;e++)this.barStackArray[e].drawBarStack(t,e)},GroupBarStack.prototype.init=function(t,e,i,s,a,r,o,h,n,l,m,c,g,_){this.ctx=h,this.m_chart=n,this.m_chartbase=l,this.stackXPixel=t,this.stackYPixel=e,this.stackWidth=i,this.stackHeight=s,this.stackPercentValue=a,this.strokeColor=o||"#cccccc",this.stackColor=convertColorToHex(r),this.m_showPercentageFlag=m,this.m_stackShowPercentValueFlag=c,this.m_stackSeriesInitializeFlag=g,this.m_stackPlotTrasparency=_},GroupBarStack.prototype.drawBarStack=function(t,o){var h=this,e=h.m_chart.scaleFlag?"stackgrpslider"+t+h.m_chart.m_objectid:"stackgrp"+t+h.m_chart.m_objectid;this.ctx.beginPath(),this.ctx.save(),this.ctx.strokeStyle=this.strokeColor,this.ctx.lineWidth=.5;switch(this.m_chartbase){case"rectangle":this.stackHeight<0&&(this.stackXPixel=this.stackXPixel+this.stackHeight,this.stackHeight=Math.abs(this.stackHeight)),0!==this.stackHeight&&(this.makeCuboid(this.stackXPixel,this.stackYPixel,this.stackWidth,this.stackHeight,this.stackColor),this.ctx.fillStyle=hex2rgb(this.stackColor,this.m_stackPlotTrasparency),(i=drawSVGRect(this.stackXPixel,this.stackYPixel,this.stackHeight,this.stackWidth,hex2rgb(this.stackColor,this.m_stackPlotTrasparency))).setAttribute("style","stroke-width:0.5px; stroke:"+this.strokeColor+";"),$("#"+e).append(i));break;case"chevron":0!==this.stackHeight&&this.makeChevron(this.stackXPixel,this.stackYPixel,this.stackHeight,this.stackWidth,hex2rgb(this.stackColor,this.m_stackPlotTrasparency),this.strokeColor,t);break;case"gradient1":case"gradient2":case"gradient3":this.stackHeight<0&&(this.stackXPixel=this.stackXPixel+this.stackHeight);n=this.stackHeight,l=(this.stackHeight=0<n?this.stackHeight-(this.stackHeight>2*this.m_chart.m_stackborderwidth?+this.m_chart.m_stackborderwidth:0):Math.abs(this.stackHeight)>2*this.m_chart.m_stackborderwidth?this.stackHeight+ +this.m_chart.m_stackborderwidth:this.stackHeight,this.stackXPixel=Math.abs(n)>2*this.m_chart.m_stackborderwidth?this.stackXPixel+.5*this.m_chart.m_stackborderwidth:this.stackXPixel,this.stackWidth);this.stackWidth=this.stackWidth-(this.stackWidth>2*this.m_chart.m_stackborderwidth?+this.m_chart.m_stackborderwidth:0),"path"===h.m_chart.m_stacksvgtype?this.drawSVGPathBar(this,e,"url(#gradient"+h.m_chart.m_objectid+t+o+")",n,l):((i=drawSVGRect(this.stackXPixel,this.stackYPixel,Math.abs(this.stackHeight),this.stackWidth,"")).setAttribute("fill","url(#gradient"+h.m_chart.m_objectid+t+o+")"),Math.abs(n)>2*this.m_chart.m_stackborderwidth&&Math.abs(l)>2*this.m_chart.m_stackborderwidth&&(i.setAttribute("style","stroke-width:"+this.m_chart.m_stackborderwidth+"px; stroke:"+this.m_chart.m_stackbordercolor+"; stroke-opacity : 1;"),IsBoolean(this.m_chart.m_enablestackshadow))&&!IsBoolean(this.m_chart.isPropertyBrowserCompatible())&&2<this.stackWidth&&2<Math.abs(this.stackHeight)&&($(i).attr("filter","url(#stackShadow"+h.m_chart.m_objectid+")"),i.setAttribute("shape-rendering","crispEdges")),$(i).attr("rx",this.m_chart.m_stackborderradius),$(i).attr("ry",this.m_chart.m_stackborderradius),s=!!document.documentMode,IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_baranimationduration&&!s&&(a=drawSVGStackAnimation(0,"width",Math.abs(this.stackHeight),this.m_chart.m_baranimationduration),r=drawSVGStackAnimation(Math.abs(this.stackHeight)+this.stackXPixel,"x",this.stackXPixel,this.m_chart.m_baranimationduration),$(i).append(a),this.stackHeight<0)&&$(i).append(r),$(i).attr("class","timeSeries-stackHighlighter"),$("#"+e).append(i));break;default:this.stackHeight<0&&(this.stackXPixel=this.stackXPixel+this.stackHeight);var i,s,a,r,n=this.stackHeight,l=(this.stackHeight=0<n?this.stackHeight-(this.stackHeight>2*this.m_chart.m_stackborderwidth?+this.m_chart.m_stackborderwidth:0):Math.abs(this.stackHeight)>2*this.m_chart.m_stackborderwidth?this.stackHeight+ +this.m_chart.m_stackborderwidth:this.stackHeight,this.stackXPixel=Math.abs(n)>2*this.m_chart.m_stackborderwidth?this.stackXPixel+.5*this.m_chart.m_stackborderwidth:this.stackXPixel,this.stackWidth);this.stackWidth=this.stackWidth-(this.stackWidth>2*this.m_chart.m_stackborderwidth?+this.m_chart.m_stackborderwidth:0),"path"===h.m_chart.m_stacksvgtype?this.drawSVGPathBar(this,e,hex2rgb(this.stackColor,this.m_stackPlotTrasparency),n,l):(i=drawSVGRect(this.stackXPixel,this.stackYPixel,Math.abs(this.stackHeight),this.stackWidth,hex2rgb(this.stackColor,this.m_stackPlotTrasparency)),Math.abs(n)>2*this.m_chart.m_stackborderwidth&&Math.abs(l)>2*this.m_chart.m_stackborderwidth&&(i.setAttribute("style","stroke-width:"+this.m_chart.m_stackborderwidth+"px; stroke:"+this.m_chart.m_stackbordercolor+"; stroke-opacity : 1;"),IsBoolean(this.m_chart.m_enablestackshadow))&&!IsBoolean(this.m_chart.isPropertyBrowserCompatible())&&2<this.stackWidth&&2<Math.abs(this.stackHeight)&&($(i).attr("filter","url(#stackShadow"+h.m_chart.m_objectid+")"),i.setAttribute("shape-rendering","crispEdges")),$(i).attr("rx",this.m_chart.m_stackborderradius),$(i).attr("ry",this.m_chart.m_stackborderradius),s=!!document.documentMode,IsBoolean(this.m_chart.m_enableanimation)&&0<this.m_chart.m_baranimationduration&&!s&&(a=drawSVGStackAnimation(0,"width",Math.abs(this.stackHeight),this.m_chart.m_baranimationduration),r=drawSVGStackAnimation(Math.abs(this.stackHeight)+this.stackXPixel,"x",this.stackXPixel,this.m_chart.m_baranimationduration),$(i).append(a),this.stackHeight<0)&&$(i).append(r),$(i).attr("class","timeSeries-stackHighlighter"),$(i).attr("id","stackgrp"+h.m_chart.m_objectid+t+o),$("#"+e).append(i),i.addEventListener("click",function(t){this.id;for(var e=o,i=0;i<h.m_chart.m_seriesData.length;i++)for(var s,a=h.m_chart.m_allSeriesNames[i],r=0;r<h.m_chart.m_categoryData[0].length;r++)IsBoolean(h.m_chart.enableDrillHighlighter)&&(void 0!==h.m_chart.m_barSeriesArray[a]&&(s="stackgrp"+h.m_chart.m_objectid+i+r),e==r?$("#"+s).css("opacity","1"):$("#"+s).css("opacity","0.5"))}))}IsBoolean(this.m_stackSeriesInitializeFlag)&&this.drawText(),this.ctx.restore(),this.ctx.closePath()},GroupBarStack.prototype.drawSVGPathBar=function(t,e,i,s,a){var r,o=" ",h=Math.abs(s)>+t.m_chart.m_stackborderradius?+t.m_chart.m_stackborderradius:0,n="";""!=(n=0<+t.stackHeight?"M "+t.stackXPixel+o+t.stackYPixel+o+"h"+o+(t.stackHeight-h)+o+"a"+o+h+o+h+o+0+o+0+o+1+o+h+o+h+o+"v"+o+(t.stackWidth-2*h)+o+"a"+o+h+o+h+o+0+o+0+o+1+o+-h+o+h+o+"h"+o+(h-t.stackHeight)+o+"z":"M "+Math.abs(t.stackXPixel+Math.abs(t.stackHeight))+o+t.stackYPixel+o+"h"+o+(t.stackHeight+h)+o+"a"+o+h+o+h+o+0+o+0+o+0+o+-h+o+h+o+"v"+o+(t.stackWidth-2*h)+o+"a"+o+h+o+h+o+0+o+0+o+0+o+h+o+h+o+"h"+o+(Math.abs(t.stackHeight)-h)+o+"v"+o+-t.stackWidth+o)&&0<Math.abs(t.stackHeight)&&(h=document.createElementNS("http://www.w3.org/2000/svg","g"),o=document.createElementNS("http://www.w3.org/2000/svg","g"),(r=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",n),n=!!document.documentMode,IsBoolean(t.m_chart.m_enableanimation)&&0<t.m_chart.m_baranimationduration&&!n&&(r.setAttribute("class","barchart-rounded-bar"),n=0<+t.stackHeight?t.stackXPixel:t.stackXPixel+Math.abs(t.stackHeight),r.setAttribute("style","animation: barchart-rounded-bar "+t.m_chart.m_baranimationduration+"s linear forwards; transform-origin: "+n+"px center;")),Math.abs(s)>2*t.m_chart.m_stackborderwidth&&Math.abs(a)>+t.m_chart.m_stackborderradius?h.setAttribute("style","stroke:"+t.m_chart.m_stackbordercolor+"; stroke-width:"+t.m_chart.m_stackborderwidth+";fill:"+i+";"):h.setAttribute("style","stroke:"+t.m_chart.m_stackbordercolor+"; stroke-width:0;fill:"+i+";"),$(o).attr("class","timeSeries-stackHighlighter"),$(o).append(r),$(h).append(o),$("#"+e).append(h))},GroupBarStack.prototype.drawText=function(){var t=IsBoolean(this.m_stackShowPercentValueFlag)?parseInt(this.stackPercentValue)+"%":parseInt(this.stackPercentValue);IsBoolean(this.m_showPercentageFlag)&&(this.ctx.fillStyle="black",this.ctx.fillText(t,+this.stackXPixel+ +this.stackHeight+15,+this.stackYPixel+this.stackWidth/2*1+1))},GroupBarStack.prototype.createGradient=function(){var t=this.ctx.createLinearGradient(this.stackXPixel,this.stackYPixel,this.stackXPixel,+this.stackYPixel+ +this.stackWidth),e=hex2rgb(this.stackColor,.6),i=hex2rgb(this.stackColor,.7);return t.addColorStop(0,this.stackColor),t.addColorStop(.3,e),t.addColorStop(.7,i),t.addColorStop(1,this.stackColor),t},GroupBarChart.prototype.createGradient1=function(t,e,i){this.svgContainerId;for(var s=document.createElementNS(NS,"linearGradient"),e=(s.setAttribute("x1","0%"),s.setAttribute("x2","0%"),s.setAttribute("y1","0%"),s.setAttribute("y2","100%"),s.setAttribute("id","gradient"+this.m_objectid+e+i),$("#"+this.svgContainerId).append(s),hex2rgb(t,this.m_plotTrasparencyArray[e])),a=[e,ColorLuminance(t,.2),e],r=100/(a.length-1!=0?a.length-1:1),i=0,o=a.length;i<=o-1;i++){var h=document.createElementNS(NS,"stop");h.setAttribute("offset",i*r+"%"),h.setAttribute("stop-color",a[i]),h.setAttribute("stop-opacity",1),$(s).append(h)}},GroupBarChart.prototype.createGradient2=function(t,e,i){this.svgContainerId;for(var s=document.createElementNS(NS,"linearGradient"),e=(s.setAttribute("x1","0%"),s.setAttribute("x2","0%"),s.setAttribute("y1","0%"),s.setAttribute("y2","100%"),s.setAttribute("id","gradient"+this.m_objectid+e+i),$("#"+this.svgContainerId).append(s),hex2rgb(t,this.m_plotTrasparencyArray[e])),a=[e,e,ColorLuminance(t,-.15),e,e],r=100/(a.length-1!=0?a.length-1:1),i=0,o=a.length;i<=o-1;i++){var h=document.createElementNS(NS,"stop");h.setAttribute("offset",i*r+"%"),h.setAttribute("stop-color",a[i]),h.setAttribute("stop-opacity",1),$(s).append(h)}},GroupBarChart.prototype.createGradient3=function(t,e,i){this.svgContainerId;var s=document.createElementNS(NS,"linearGradient");s.setAttribute("x1","0%"),s.setAttribute("x2","0%"),s.setAttribute("y1","0%"),s.setAttribute("y2","100%"),s.setAttribute("id","gradient"+this.m_objectid+e+i),$("#"+this.svgContainerId).append(s);for(var a=[t,t,hex2rgb(t,this.m_plotTrasparencyArray[e]),t,t],r=100/(a.length-1!=0?a.length-1:1),i=0,o=a.length;i<=o-1;i++){var h=document.createElementNS(NS,"stop");h.setAttribute("offset",i*r+"%"),h.setAttribute("stop-color",a[i]),h.setAttribute("stop-opacity",1),$(s).append(h)}},GroupBarStack.prototype.createGradient3=function(t,e,i,s,a){t=this.ctx.createLinearGradient(t,e,t,+e+ +i),e=hex2rgb(a,this.m_stackPlotTrasparency);return t.addColorStop(.1,e),t.addColorStop(.15,e),t.addColorStop(.5,ColorLuminance(a,.3)),t.addColorStop(.85,e),t.addColorStop(1,e),t},GroupBarStack.prototype.makeCylinder=function(t,e,i,s,a){var r=hex2rgb(a,.6);this.ctx.beginPath(),this.ctx.strokeStyle="#fff",this.ctx.fillStyle=r,this.ctx.moveTo(t+s,e),this.ctx.bezierCurveTo(+t+ +s+i/3,+e+3,+t+ +s+2*i/3,+e+6,+t+ +s,+e+ +i),this.ctx.stroke(),this.ctx.strokeStyle=a,this.ctx.moveTo(t,e),this.ctx.bezierCurveTo(+t+ +s-i/3,+e+3,+t+ +s-2*i/3,+e+6,+t+ +s,+e+ +i),this.ctx.fill(),this.ctx.stroke(),this.ctx.closePath()},GroupBarStack.prototype.makeCuboid=function(t,e,i,s,a){var r=this.m_chart.scaleFlag?this.m_chart.svgTimeScaleId:this.m_chart.svgContainerId,o=i/4,a=hex2rgb(a,this.m_stackPlotTrasparency),o=["M",t,e,"L",t+o,e-5,"L",t+o+s,e-5,"L",t+o+s,e-5+i,"L",t+s,e+i,"L",t+s,e,"L",t,e].join(" "),i=drawSVGPath();i.setAttribute("d",o),i.setAttribute("style","stroke-width:0.5px; stroke:#cccccc; fill:"+a+";"),$("#"+r).append(i)},GroupBarStack.prototype.makeChevron=function(t,e,i,s,a,r,o){var h=this.m_chart.scaleFlag?this.m_chart.svgTimeScaleId:this.m_chart.svgContainerId,i=["M",t,e,"L",+t+ +(i=+i<s/2?s/2:i)-s/2,e,"L",+t+ +i,+e+s/2,"L",+t+ +i-s/2,+e+ +s,"L",t,+e+ +s,"L",+t+s/2,+e+s/2,"L",t,e].join(" "),s=drawSVGPath();s.setAttribute("d",i),s.setAttribute("style","stroke-width:0.5px; stroke:"+r+"; fill:"+a+";"),$("#"+h).append(s)},GroupBarXAxis.prototype=new Xaxis,GroupBarXAxis.prototype.init=function(t){this.m_chart=t,this.ctx=this.m_chart.ctx,this.m_startX=this.m_chart.getStartX(),this.m_startY=this.m_chart.getStartY(),this.m_endX=this.m_chart.getEndX(),this.m_endY=this.m_chart.getEndY(),this.m_xAxisData=this.m_chart.m_seriesData,this.m_axiscolor=convertColorToHex(this.m_chart.getAxisColor()),this.m_linexaxiscolor=""!=this.m_linexaxiscolor?convertColorToHex(this.m_linexaxiscolor):this.m_axiscolor,this.setLeftAxisFormatters(),this.setRightAxisFormatters(),this.noOfRows=this.m_chart.noOfRows},GroupBarXAxis.prototype.getYaxisDivison=function(t){return(this.m_endY-this.m_startY)/t.length},GroupBarXAxis.prototype.markXaxis=function(){for(var t=this.calculateAxisLineToTextGap(),e=this.m_chart.m_calculation.getXAxisMarkersArray(),i=(this.m_chart.getEndX()-this.m_chart.getStartX())/(e.length-1),s=e.length,a=[],r=0;r<s;r++){var o=e[r];o=this.getFormattedText(o,this.m_precision),a.push(o)}if(!isUniqueArray(a))for(var h=getDuplicatesFromArray(a),r=0;r<s;r++){var o=e[r],n=this.getFormattedText(o,this.m_precision);o="default"==this.m_precision&&"auto"==this.m_secondaryUnitSymbol&&0<Object.keys(h).length?this.getFormattedText(o,1):n,a[r]=o}for(var l,m,c,g,r=0;r<e.length;r++)r%this.m_chart.m_skipxaxislabels!=0&&"auto"!=this.m_chart.m_skipxaxislabels||(this.ctx.save(),this.ctx.measureText(o=a[r]).width,2==this.noOfRows&&(o=this.getText(""+o,(this.m_endX-this.m_startX)/e.length*2,this.getLabelFontProperties())),this.translateTextPosition(t,r,o,i),this.ctx.rotate(this.getLabelrotation()*Math.PI/180),m=this.calculateAxisToLabelMargin(r),g="center",l=+this.m_startX+i*r,m=+this.m_startY+t/2+ +m+this.calculateAxisLineToTextGap()/2,o=(IsBoolean(this.m_chart.m_xAxis.getLabelTilted())&&(g=0<(c=this.getLabelrotation())&&c<=90?"left":c<0&&-90<=c?"right":"center"),drawSVGText(l,m,o,this.m_labelfontcolor,g,"middle",this.getLabelrotation())),$("#xaxislabelgrp"+this.m_chart.m_objectid).append(o),this.ctx.restore(),this.ctx.closePath());this.drawDescription()},GroupBarXAxis.prototype.drawDescription=function(){var t=this,e=this.m_chart.m_allSeriesDisplayNames.reduce(function(t,e){return""!==e?""===t?e:t+", "+e:t},""),e=IsBoolean(this.m_chart.m_xAxis.m_showdatasetdescription)?this.m_chart.formattedDescription(this.m_chart,e):this.getDescription();""!=e&&(e=drawSVGText(this.getXDesc(),this.getYDesc(),this.m_chart.formattedDescription(this.m_chart,e),convertColorToHex(this.m_fontcolor),"middle","middle"),$(e).css({"font-family":selectGlobalFont(t.getFontFamily()),"font-style":t.getFontStyle(),"font-size":t.m_chart.fontScaling(t.getFontSize())+"px","font-weight":t.getFontWeight(),"text-decoration":t.getTextDecoration()}),$("#"+t.m_chart.svgContainerId).append(e))},GroupBarXAxis.prototype.drawXAxis=function(){var t,e,i,s,a;IsBoolean(this.m_showlinexaxis)&&(t=this.m_linexaxiscolor,a=+this.m_startX-1-this.m_chart.m_axistodrawingareamargin,e=+this.m_startY+1+this.m_chart.m_axistodrawingareamargin,i=+this.m_endX,s=+this.m_startY+1+this.m_chart.m_axistodrawingareamargin,a=drawSVGLine(a,e,i,s,.5,t),$("#"+this.m_chart.svgContainerId).append(a))},GroupBarXAxis.prototype.translateTextPosition=function(t,e,i,s){var a=this.getLabelrotation(),s=(this.getLabelTextWidth(i),+this.m_startX+s*e),e=this.calculateAxisToLabelMargin(e),t=+this.m_startY+ +t+ +e;this.translateText(a,s,t,i)},GroupBarXAxis.prototype.getText=function(t,e,i){var s,a="",i=(this.ctx.font=i,this.ctx.measureText(t).width);0<t.length&&(s=i/t.length*2);for(var r=0;r<t.length;r++){if(!(this.ctx.measureText(a).width<e-s)){a+="..";break}a+=t[r]}return a},GroupBarXAxis.prototype.getFormattedText=function(t,e){var i,s,e="undefined"==e||null==e?this.m_chart.m_precision:e;return t%1!=0&&e<1?t=this.setPrecision(t,0):IsBoolean(this.m_isFormatter)||IsBoolean(this.m_isSecondaryFormatter)||"default"!==e&&(t=this.setPrecision(t,e)),"none"!=this.m_chart.m_formater&&""!=this.m_chart.m_formater||"none"!=this.m_chart.m_secondaryformater&&""!=this.m_chart.m_secondaryformater||(t=this.setPrecision(t,e)),IsBoolean(this.m_isFormatter)&&(t=this.m_util.updateTextWithFormatter(t,this.m_unitSymbol,e)),IsBoolean(this.m_isSecondaryFormatter)&&"Number"==this.m_chart.m_secondaryformater&&(t=this.m_util.updateTextWithFormatter(t,this.m_secondaryUnitSymbol,e)),IsBoolean(this.m_isSecondaryFormatter)&&(t="auto"!=this.m_secondaryUnitSymbol?(0!=e&&null!=e?t=this.setPrecision(t,e):t<1&&t%1!=0&&(t=this.setPrecision(t,2)),t=t%1==0&&"default"===this.m_precision?+t:t,this.addSecondaryFormater(t,this.m_secondaryUnitSymbol)):(i=getNumberFormattedSymbol(+t,this.m_chart.m_unit),s=getNumberFormattedNumericValue(+t,e,this.m_chart.m_unit),t=this.setPrecision(s,e),0!=e&&null!=e?t=this.setPrecision(t,e):t<1&&t%1!=0&&(t=this.setPrecision(t,2)),t=t%1==0&&"default"===this.m_precision?+t:t,this.addSecondaryFormater(t,i))),t=getFormattedNumberWithCommas(t,this.m_chart.m_numberformatter,this.m_chart.m_unit),t=IsBoolean(this.m_isFormatter)&&null!=this.m_unitSymbol?this.m_util.addFormatter(t,this.m_unitSymbol,this.m_formatterPosition,e):t},GroupBarXAxis.prototype.setLeftAxisFormatters=function(){this.m_isFormatter=!1,this.m_isSecondaryFormatter=!1,IsBoolean(this.m_chart.getFixedLabel())||IsBoolean(this.getLeftaxisFormater())&&(this.setFormatter(),this.setSecondaryFormatter()),this.m_precision=this.m_chart.getPrecision()},GroupBarXAxis.prototype.setRightAxisFormatters=function(){IsBoolean(this.m_chart.m_secondaryaxisshow)&&IsBoolean(this.getRightAxisFormater())&&this.setSecondAxisFormatter(),this.m_secondaryAxisPrecision=this.m_chart.m_secondaryaxisprecision},GroupBarXAxis.prototype.setSecondAxisFormatter=function(){var t,e;this.m_secondAxisUnitSymbol="",this.m_secondAxisFormatterPosition="",this.m_isSecondAxisFormatter=!1,"none"==this.m_chart.m_secondaryaxisformater&&""==this.m_chart.m_secondaryaxisformater||(t=this.m_chart.m_secondaryaxisunit,e=this.m_chart.m_secondaryaxisformater,"none"!=t&&""!=t&&(this.m_isSecondAxisFormatter=!0,this.m_secondAxisUnitSymbol=this.m_util.getFormatterSymbol(e,t),this.m_secondAxisFormatterPosition=this.m_chart.m_secondaryaxissignposition))},GroupBarXAxis.prototype.setFormatter=function(){var t,e;this.m_unitSymbol="",this.m_formatterPosition="",this.m_isFormatter=!1,"none"!=this.m_chart.m_formater&&""!=this.m_chart.m_formater&&(t=this.m_chart.getUnit(),e=this.m_chart.getFormater(),"none"!=t)&&""!=t&&(this.m_isFormatter=!0,this.m_unitSymbol=this.m_util.getFormatterSymbol(e,t),this.m_formatterPosition=this.m_chart.getSignPosition())},GroupBarXAxis.prototype.setSecondaryFormatter=function(){var t,e;this.m_secondaryUnitSymbol="",this.m_secondaryFormatterPosition="",this.m_isSecondaryFormatter=!1,"none"!=this.m_chart.m_secondaryformater&&""!=this.m_chart.m_secondaryformater&&"Percent"!=this.m_chart.getUnit()&&(t=this.m_chart.getSecondaryUnit(),e=this.m_chart.getSecondaryFormater(),""!=t&&"none"!=t&&null!=t&&(this.m_isSecondaryFormatter=!0,this.m_secondaryUnitSymbol=this.m_util.getFormatterSymbol(e,t)),this.m_secondaryFormatterPosition="suffix")},GroupBarXAxis.prototype.getSecondaryAxisFormattedText=function(t){return t=this.m_isSecondAxisFormatter?this.m_util.addFormatter(t,this.m_secondAxisUnitSymbol,this.m_secondAxisFormatterPosition):t},GroupBarXAxis.prototype.setPrecision=function(t,e){return 0!==(t=+t)&&"default"!==e?(+t).toFixed(e):+t},GroupBarXAxis.prototype.addSecondaryFormater=function(text,secondaryUnitSymbol){var textValue=text;try{eval("var formattedText = this.m_util.addUnitAs"+this.m_secondaryFormatterPosition+"(textValue,secondaryUnitSymbol);")}catch(e){}return formattedText.toString()},GroupBarYAxis.prototype=new Yaxis,GroupBarYAxis.prototype.init=function(t,e){this.m_chart=t,this.ctx=this.m_chart.ctx,this.m_chartCalculation=e,this.m_startX=this.m_chart.getStartX(),this.m_startY=this.m_chart.getStartY(),this.m_endX=this.m_chart.getEndX(),this.m_endY=this.m_chart.getEndY(),this.m_yAxisText=this.m_chartCalculation.getYAxisText(),this.m_yAxisMarkersArray=this.m_chartCalculation.getYAxisMarkersArray(),this.setLeftAxisFormatters(),this.setRightAxisFormatters(),this.m_isSecodaryAxis=!1,this.m_axiscolor=convertColorToHex(this.m_chart.getAxisColor()),this.m_lineyaxiscolor=""!=this.m_lineyaxiscolor?convertColorToHex(this.m_lineyaxiscolor):this.m_axiscolor},GroupBarYAxis.prototype.markSubCategory=function(t,e){this.drawAxisLabels(),this.drawDescription()},GroupBarYAxis.prototype.drawAxisLabels=function(){for(var t=0;t<this.m_yAxisText.length;t++)this.ctx.beginPath(),this.ctx.save(),this.drawLabel(this.m_yAxisText[t],t),this.ctx.restore(),this.ctx.closePath()},GroupBarYAxis.prototype.drawLabel=function(t,e){var i,s,a,r,o=+this.m_chart.m_yPositionArray[0][e]+this.m_chart.m_barWidth/2,h=("clustered"==this.m_chart.m_charttype&&(o=+this.m_chart.m_yPositionArray[0][e]+this.m_chart.m_barWidth/2),e=0!=this.m_chart.m_subCategoryJSON.length&&IsBoolean(this.m_chart.m_subCategoryJSON[0].visible)?(a=this.m_yaxissubcategorytextwrap,i=this.m_subcategoryfontsize,s=this.getSubCatLabelFontProperties(),$("#yaxissubcategorylabelgrp"+this.m_chart.m_objectid)):(a=this.m_yaxiscategorytextwrap,i=this.m_labelfontsize,s=this.getLabelFontProperties(),$("#yaxiscategorylabelgrp"+this.m_chart.m_objectid)),"right"==this.m_chart.m_subcategoryorientation&&"rectangle"==this.m_chart.m_chartbase?12:"right"==this.m_chart.m_subcategoryorientation?5:0),n=IsBoolean(this.m_chart.m_showslider)&&"right"==this.m_chart.m_subcategoryorientation&&(IsBoolean(this.m_chart.isEmptyCategory)||IsBoolean(this.m_chart.isEmptySubCategory))?this.m_chart.m_sliderheight+h+10:0;t=IsBoolean(a)?(a=this.m_chart.m_width/4-n,r=Math.abs(this.getYaxisDivison())/1.2,r=this.calculateLabelLength(t,r),"right"==this.m_chart.m_subcategoryorientation?this.drawSVGTextForCategory(+this.m_chart.getEndX()+h,o,t,this.m_labelfontcolor,"left","middle",this.getLabelrotation(),a,r,s,i):this.drawSVGTextForCategory(this.m_startX-this.m_axislinetotextgap,o,t,this.m_labelfontcolor,this.m_labeltextalign,"middle",this.getLabelrotation(),a,r,s,i)):(t=this.getText(""+t,this.m_chart.m_width/4-n,s),"right"==this.m_chart.m_subcategoryorientation?drawSVGText(+this.m_chart.getEndX()+h,o,t,this.m_labelfontcolor,"left","middle",this.getLabelrotation()):drawSVGText(this.m_startX-this.m_axislinetotextgap,o,t,this.m_labelfontcolor,this.m_labeltextalign,"middle",this.getLabelrotation())),e.append(t)},GroupBarYAxis.prototype.getSubCatLabelFontProperties=function(){return this.m_textUtil.getFontProperties(this.getLabelFontStyle(),this.getLabelFontWeight(),this.m_chart.fontScaling(this.m_subcategoryfontsize),this.getLabelFontFamily())},GroupBarYAxis.prototype.drawDescription=function(){var t=this,e=IsBoolean(this.m_chart.m_yAxis.m_showdatasetdescription)?this.m_chart.formattedDescription(this.m_chart,this.m_chart.m_allCategoryDisplayNames[0]):this.m_chart.formattedDescription(this.m_chart,this.getDescription());""!=e&&(e=drawSVGText(this.getXDesc(),this.getYDesc(),this.m_chart.formattedDescription(this.m_chart,e),convertColorToHex(this.getFontColor()),"middle","middle",270),$(e).css({"font-family":selectGlobalFont(t.getFontFamily()),"font-style":t.getFontStyle(),"font-size":t.m_chart.fontScaling(t.getFontSize())+"px","font-weight":t.getFontWeight(),"text-decoration":t.getTextDecoration()}),$("#"+t.m_chart.svgContainerId).append(e))},GroupBarYAxis.prototype.drawYAxis=function(){var t,e,i,s,a;IsBoolean(this.m_showlineyaxis)&&(t=this.m_lineyaxiscolor,a=+this.m_startX-this.m_chart.m_axistodrawingareamargin-1,e=+this.m_startY+1+this.m_chart.m_axistodrawingareamargin,i=+this.m_startX-this.m_chart.m_axistodrawingareamargin-1,s=+this.m_endY,a=drawSVGLine(a,e,i,s,.5,t),$("#"+this.m_chart.svgContainerId).append(a))},GroupBarYAxis.prototype.drawCategory=function(){var t,e=this.m_chart.getCatTextMargin(),i=0,s=("left"==this.m_chart.m_subcategoryorientation&&(i=this.m_chart.getSubCatTextMargin()),this.m_chart.calculateCategoryBoxSize());this.m_startY;for(t in s){var a,r,o,h=Object.keys(this.m_chart.dataMap[t]).length,h=(h=IsBoolean(this.m_chart.m_mergesubcategory)?h*this.m_chart.m_barWidth+this.m_chart.m_barGap:h*(this.m_chart.m_barWidth+this.m_chart.m_barGap),s[t]+h/2),n=this.m_chart.getStartX()-e/2-+i-5;o=IsBoolean(this.m_yaxiscategorytextwrap)?(r=t,o=this.m_chart.m_width/4,a=this.calculateLabelBoxSize(r),this.drawSVGTextForCategory(n,h,r,this.m_labelfontcolor,"center","middle",this.getLabelrotation(),o,a,this.getLabelFontProperties(),this.getLabelFontSize())):(r=this.getText(""+t,this.m_chart.m_width/4,this.getLabelFontProperties()),drawSVGText(n,h,r,this.m_labelfontcolor,"middle","middle",this.getLabelrotation())),$("#yaxiscategorylabelgrp"+this.m_chart.m_objectid).append(o),s[t]}},GroupBarYAxis.prototype.calculateLabelBoxSize=function(t){var e=this.m_chart.calculateCategoryBoxSize(),i=e[t],s=Object.keys(e).indexOf(t);return e=0<s?e[Object.keys(e)[s-1]]:this.m_chart.getStartY(),this.calculateLabelLength(t,e-i)},GroupBarYAxis.prototype.calculateLabelLength=function(t,e){t=this.ctx.measureText(t).actualBoundingBoxAscent+this.ctx.measureText(t).actualBoundingBoxDescent;return(e/(t*=1.3)).toFixed(0)},GroupBarYAxis.prototype.drawSVGTextForCategory=function(t,e,i,s,a,r,o,h,n,l,m){var c=document.createElementNS(NS,"text"),i=this.getTexts(""+i,h,l),g=(g=i.slice(0,n)).slice(0,3),_=i.length>g.length?"...":"";if(1==g.length)isNaN(t)||isNaN(e)||(c.setAttribute("x",t),c.setAttribute("y",e),c.setAttribute("fill",s),""!==o&&void 0!==o&&0!==o&&c.setAttribute("transform","rotate("+o+" "+t+","+e+")"),c.textContent=g[0]+_,c.setAttribute("text-anchor",getSVGAlignment(a)),c.setAttribute("alignment-baseline",r));else if(!isNaN(t)&&!isNaN(e)){c.setAttribute("y",e),c.setAttribute("fill",s),""!==o&&void 0!==o&&0!==o&&c.setAttribute("transform","rotate("+o+" "+t+","+e+")"),c.setAttribute("text-anchor",getSVGAlignment(a)),c.setAttribute("alignment-baseline",r);for(var d=0;d<g.length;d++){var p=document.createElementNS(NS,"tspan");0==d?p.setAttribute("x",t):(p.setAttribute("x",t),p.setAttribute("dy",+this.m_chart.fontScaling(m))),p.textContent=g[d],p.textContent+=d==g.length-1?_:"",c.appendChild(p)}}return c},GroupBarYAxis.prototype.getTexts=function(t,e,i){var t=""+t,s=[],a=(this.ctx.font=i,this.ctx.measureText(t).width),r=t.split(" "),o="";if(e<a){for(var h=0;h<=r.length;h++){var n=o+r[h]+" ",l=this.ctx.measureText(n).width;if(s.length==this.m_chart.m_xaxislabellines)break;e<l&&0<h?o=(this.ctx.measureText(o).width>e?s.push(this.getText(o,e,i)):s.push(o),r[h]+" "):h==r.length&&l<e?s.push(o):o=n}s[this.m_chart.m_xaxislabellines-1]&&this.ctx.measureText(s[this.m_chart.m_xaxislabellines-1]).width>=e&&(s[this.m_chart.m_xaxislabellines-1]=this.getText(s[this.m_chart.m_xaxislabellines-1],e,i))}else s.push(t);return s},GroupBarYAxis.prototype.getYaxisDivison=function(){return(this.m_endY-this.m_startY)/this.m_yAxisText.length},GroupBarYAxis.prototype.drawTickMarks=function(){if(IsBoolean(this.m_tickmarks))for(var t=0;t<this.m_yAxisText.length+1;t++){var e=parseInt(+this.m_startX),i=parseInt(this.m_startY+this.getYaxisDivison()*t),s=parseInt(this.m_startX-8),a=parseInt(this.m_startY+this.getYaxisDivison()*t),e=drawSVGLine(e,i,s,a,"0.9",this.m_categorymarkingcolor);$("#yaxistickmark"+this.m_chart.m_objectid).append(e)}},GroupBarYAxis.prototype.drawVerticalLine=function(){for(var t=this.m_chartCalculation.getXAxisMarkersArray(),e=(this.m_endX-this.m_startX)/(t.length-1),i=0;i<t.length;i++){var s=parseInt(this.m_startX+e*i),a=parseInt(this.m_startY),r=parseInt(this.m_startX+e*i),o=parseInt(this.m_endY),s=this.drawSVGLine(s,a,r,o,"1",hex2rgb(this.m_chart.m_markercolor,this.m_chart.m_markertransparency));$("#verticallinegrp"+this.m_chart.m_objectid).append(s)}},GroupBarYAxis.prototype.drawZeroMarkerLine=function(){for(var t=this.m_chartCalculation.getXAxisMarkersArray(),e=(this.m_endX-this.m_startX)/(t.length-1),i=0;i<t.length;i++)if(0<t.length&&0==t[i]){var s=this.drawSVGLine(parseInt(+this.m_startX+e*i),parseInt(this.m_startY),parseInt(+this.m_startX+e*i),parseInt(this.m_endY),"1",hex2rgb(this.m_chart.m_zeromarkercolor,this.m_chart.m_markertransparency));$("#"+this.m_chart.svgContainerId).append(s);break}},GroupBarYAxis.prototype.drawSVGLine=function(t,e,i,s,a,r){var o=document.createElementNS(NS,"line");return isNaN(t)||isNaN(e)||isNaN(i)||isNaN(s)||(o.setAttribute("x1",t),o.setAttribute("y1",e),o.setAttribute("x2",i),o.setAttribute("y2",s),o.setAttribute("stroke",r),o.setAttribute("stroke-width",a)),o},GroupBarYAxis.prototype.hasNegativeAxisMarker=function(t){var e=!1;return e=Array.isArray(t)&&0<t.length&&Math.min.apply(null,t)<0?!0:e},GroupBarYAxis.prototype.getText=function(t,e,i){var s,a=t,r="",t=(this.ctx.font=i,this.ctx.measureText(a).width);0<a.length&&(s=t/a.length*3);for(var o=0;o<a.length;o++){if(!(this.ctx.measureText(r).width<e-s)){r+="..";break}r+=a[o]}return r};
//# sourceMappingURL=GroupBarChart.min.js.map