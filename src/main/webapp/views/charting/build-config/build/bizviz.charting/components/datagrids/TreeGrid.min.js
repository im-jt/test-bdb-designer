/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function ScoreCard(e,t){this.base=Widget,this.base(),this.plugin=new Plugin,this.m_x=30,this.m_y=300,this.m_width=450,this.m_height=250,this.m_showinfobutton="",this.m_statuscolname="",this.m_gaugeids="",this.m_columnnumbers="",this.m_hierarchylevel="",this.m_url="",this.m_textselectedcolor="",this.m_textrollovercolor="",this.m_rollovercolor="",this.m_gridcolor="",this.m_alternaterowscolor,this.m_horizontalgridlinecolor="",this.m_verticalgridlinecolor="",this.m_showhorizontalgridlines="",this.m_selectedrowcolor="",this.m_fontcolor="",this.m_fontsize="",this.m_fontstyle="",this.m_textdecoration="",this.m_fontweight="",this.m_fontfamily="",this.m_align="",this.m_labelfontcolor="#000000",this.m_labelfontstyle="normal",this.m_labelfontfamily="Roboto",this.m_labeltextdecoration="normal",this.m_labelfontsize="11",this.m_labelfontweight="normal",this.m_globalkey="",this.m_gradientcolor="#7e8989,#636d6d",this.m_showborder="true",this.m_showstatus="",this.m_id="",this.m_showexceldownload="true",this.m_name="",this.m_showgradient="true",this.m_toprootnode="false",this.m_showtitle=!1,this.m_alertwithdata="",this.m_titleHeight=0,this.m_subTitleHeight=0,this.m_bggradientrotation="0",this.m_bgalpha="1",this.m_bggradients="#ffffff",this.m_title="",this.m_treefield="",this.m_isRowClicked=!1,this.m_showExcelDownload=!0,this.m_declinefillcolor="#ffffff",this.m_fieldsObj=new Object,this.m_alertObj=new Object,this.m_alertcolor=[],this.m_percentvalue=[],this.m_compareindex=[],this.m_fieldNameValueMap=[],this.m_chartContainer=e,this.m_zIndex=t,this.m_title1=new Title(this),this.m_subTitle=new SubTitle,this.m_chartFrame=new ChartFrame,this.m_alerts=new Alerts,this.m_pptheading="Heading",this.m_exportbuttontooltip="Export to PDF",this.m_exporttogrid=!1,this.m_mode="pdf",this.m_pptsubheading="SubHeading",this.m_filename="",this.m_isDataSetavailable=!1,this.m_isEmptySeries=!0,this.m_headerchromecolor="#0daea7",this.m_headertextdecoration="normal",this.m_headerfontfamily="Roboto",this.m_headerfontsize="12",this.m_headerfontstyle="normal",this.m_headerfontweight="bold",this.m_headerfontcolor="#ffffff",this.m_headerSymbolColor="#000000",this.m_alerttype="",this.m_hierarchyTypeArr=[],this.m_colHeadersFieldName=[],this.m_gridheaderDisplayNames=[],this.fieldNameArr=[],this.m_visibleArr=[],this.m_widthArr=[],this.m_textAlignArr=[],this.m_tooltipColumnsArr=[],this.m_sortingColumnsArr=[],this.m_numberFormatColumnsArr=[],this.m_numberFormaterSorting={},this.m_isNumericArr=[],this.m_isFixedLabelArr=[],this.m_formatterArr=[],this.m_unitNameArr=[],this.m_signPositioneArr=[],this.m_precisionArr=[],this.m_secondFormatterArr=[],this.m_secondUnitNameArr=[],this.m_fieldaggregation=[],this.m_fieldColors={},this.m_designModeDrawingFlag=!0,this.defaultAlertJson='{"AlertColumn": [{"mode": "Range","showTooltip": "false","texts": "r,g,b", "alertPosition": "right","showData": "true","fixedValue": "413892","fixedValueCompare": "true","name": "Revenue","isAlertText": "false","alertType": "colorfill","colors": "#db5937,#f9ad39,#2382b5","compareColumn":"","ranges":"0~3,3~15,15~100" },{"mode": "Comparison","showTooltip": "false","texts": "r,g,b", "alertPosition": "right","showData": "false","fixedValue": "5","fixedValueCompare": "true","name": "Indicator","isAlertText": "false","alertType": "arrow","colors": "#db5937,#f9ad39,#2382b5","compareColumn":"","ranges":"" }]}',this.finalArray=[],this.m_selectedCellInfo={},this.columnWiseData={},this.fieldsData="",this.m_collapseallnode=!1,this.m_commaSeperatorFlag=!1,this.m_scrollbarsize=7,this.m_defaultalertcolor="#e0dfdf",this.m_rowopacity=.8,this.m_headerrowopacity=.6,this.m_rowhoveropacity=.4,this.m_rowselectedopacity=.6,this.m_rowlinesopacity=.8,this.m_fitcolumns="true",this.m_usefieldalign=!0,this.m_headertextalign="left",this.m_enableColumnStyleArr=[],this.m_fontColorArr=[],this.m_fontSizeArr=[],this.m_fontStyleArr=[],this.m_fontWeightArr=[],this.m_fontFamilyArr=[],this.m_titletextwrap=!0,this.m_subtitletextwrap=!0}ScoreCard.prototype=new Widget,ScoreCard.prototype.setProperty=function(e){this.ParseJsonAttributes(e.Object,this),this.initCanvas()},ScoreCard.prototype.ParseJsonAttributes=function(e,t){for(var i in this.chartJson=e)if("Scorecard"==i)for(var r in e[i])switch(r){case"TitleWindow":break;case"SubTitle":for(var s in e[i][r]){var a=this.getNodeAttributeName(s);t.m_subTitle[a]=e[i][r][s]}break;case"SummaryRows":case"value":break;case"Alerts":if(this.m_designMode)this.parseDefaultAlertJson($.parseJSON(this.defaultAlertJson),t);else for(var o in e[i][r])if("AlertColumn"==o)for(var o=e[i][r],l=this.getArrayOfSingleLengthJson(o.AlertColumn),h=0;h<l.length;h++){var n,d=new AlertColumn,m=(t.m_alerts.setAlertColumns(d),this.getProperAttributeNameValue(l[h],"name"));for(n in this.m_alertObj[this.getStringARSC(m)]=d,l[h])this.setAttributeValueToNode(n,l[h],d)}break;default:t[a=this.getNodeAttributeName(r)]=e[i][r]}else t[a=this.getNodeAttributeName(i)]=e[i]},ScoreCard.prototype.parseDefaultAlertJson=function(e,t){for(var i in e)if("AlertColumn"==i)for(var r=this.getArrayOfSingleLengthJson(e.AlertColumn),s=0,a=r.length;s<a;s++){var o,l=new AlertColumn,h=(t.m_alerts.setAlertColumns(l),this.getProperAttributeNameValue(r[s],"name"));for(o in this.m_alertObj[h]=l,r[s])this.setAttributeValueToNode(o,r[s],l)}},ScoreCard.prototype.getDataProvider=function(){return this.m_dataProvider},ScoreCard.prototype.getDataFromJSON=function(){for(var e=[],t=0,i=this.getDataProvider().length;t<i;t++)null==this.getDataProvider()[t]||"undefined"==this.getDataProvider()[t]?e[t]="":e[t]=this.getDataProvider()[t];return e},ScoreCard.prototype.getType=function(){return this.m_objecttype},ScoreCard.prototype.setFields=function(e){this.m_fieldsJson=e,this.setSeries(e)},ScoreCard.prototype.setSeries=function(e){this.fieldsData=e,this.m_hierarchyTypeArr=[],this.m_colHeadersFieldName=[],this.m_gridheaderDisplayNames=[],this.fieldNameArr=[],this.legendMap={},this.fieldName=[],this.m_displayAllFieldName=[],this.m_seriesVisibleArr={},this.m_typeArr={},this.m_visibleArr={},this.m_widthArr={},this.m_textAlignArr={},this.m_sortingColumnsArr={},this.m_tooltipColumnsArr={},this.m_numberFormatColumnsArr={},this.m_isNumericArr={},this.m_cellTypeArr=[],this.m_isFixedLabelArr={},this.m_formatterArr={},this.m_unitNameArr={},this.m_signPositioneArr={},this.m_precisionArr={},this.m_secondFormatterArr={},this.m_secondUnitNameArr={},this.m_fieldaggregation={},this.m_TooltipFieldsArr={},this.m_enableColumnStyleArr=[],this.m_fontColorArr=[],this.m_fontSizeArr=[],this.m_fontStyleArr=[],this.m_fontWeightArr=[],this.m_fontFamilyArr=[];for(var t=0,i=0,r=e.length;i<r;i++){this.fieldName[t]=this.getProperAttributeNameValue(e[i],"Name");var s=this.formattedDescription(this,this.getProperAttributeNameValue(e[i],"DisplayName"));if(this.m_displayAllFieldName[t]=s,this.m_seriesVisibleArr[this.fieldName[t]]=this.getProperAttributeNameValue(e[i],"visible"),("Single"==this.m_hierarchylevel||"TreeWithPivot"==this.m_hierarchylevel||IsBoolean(this.getProperAttributeNameValue(e[i],"visible")))&&"parent"==this.getProperAttributeNameValue(e[i],"hierarchyType")){this.setSeriesJsonProp(e,i,t),t++;break}}for(var i=0,a=e.length;i<a;i++){this.fieldName[t]=this.getProperAttributeNameValue(e[i],"Name");s=this.formattedDescription(this,this.getProperAttributeNameValue(e[i],"DisplayName"));this.m_displayAllFieldName[t]=s,this.m_seriesVisibleArr[this.fieldName[t]]=this.getProperAttributeNameValue(e[i],"visible"),"Single"!=this.m_hierarchylevel&&"TreeWithPivot"!=this.m_hierarchylevel&&!IsBoolean(this.getProperAttributeNameValue(e[i],"visible"))||"child"!=this.getProperAttributeNameValue(e[i],"hierarchyType")||(this.setSeriesJsonProp(e,i,t),t++)}for(var i=0,o=e.length;i<o;i++){this.fieldName[t]=this.getProperAttributeNameValue(e[i],"Name");s=this.formattedDescription(this,this.getProperAttributeNameValue(e[i],"DisplayName"));this.m_displayAllFieldName[t]=s,this.m_seriesVisibleArr[this.fieldName[t]]=this.getProperAttributeNameValue(e[i],"visible"),"none"==this.getProperAttributeNameValue(e[i],"hierarchyType")&&(this.setSeriesJsonProp(e,i,t),t++)}this.setLegendsIntialLoad(this.m_defaultlegendfields)},ScoreCard.prototype.setSeriesJsonProp=function(e,t,i){this.m_hierarchyTypeArr[i]=this.getProperAttributeNameValue(e[t],"hierarchyType"),this.m_colHeadersFieldName[i]=this.getProperAttributeNameValue(e[t],"Name");var r=this.formattedDescription(this,this.getProperAttributeNameValue(e[t],"DisplayName")),r=(this.m_gridheaderDisplayNames[i]=r,this.fieldNameArr[i]=this.getProperAttributeNameValue(e[t],"Name"),this.m_typeArr[this.m_colHeadersFieldName[i]]=this.getProperAttributeNameValue(e[t],"hierarchyType"),this.m_visibleArr[this.m_colHeadersFieldName[i]]="Single"!=this.m_hierarchylevel&&"TreeWithPivot"!=this.m_hierarchylevel||"child"!=this.m_hierarchyTypeArr[i]?this.getProperAttributeNameValue(e[t],"visible"):"false",this.m_widthArr[this.m_colHeadersFieldName[i]]=this.getProperAttributeNameValue(e[t],"width"),this.m_textAlignArr[this.fieldNameArr[i]]=this.getProperAttributeNameValue(e[t],"textAlign"),this.m_tooltipColumnsArr[this.fieldNameArr[i]]=this.getProperAttributeNameValue(e[t],"showTooltip"),this.getProperAttributeNameValue(e[t],"cellType")),s=this.getProperAttributeNameValue(e[t],"sorting"),a=this.getProperAttributeNameValue(e[t],"numberFormatter"),r=(null==r&&(r=IsBoolean(e[t].isNumeric)?"Numeric":"none"),this.m_cellTypeArr[i]=r,this.m_isNumericArr[this.fieldNameArr[i]]=r,this.m_sortingColumnsArr[this.fieldNameArr[i]]=null==s||IsBoolean(s),this.m_numberFormatColumnsArr[this.fieldNameArr[i]]=null==a?"none":a,this.m_numberFormaterSorting[this.getStringARSC(this.fieldNameArr[i])]=null==a?"none":a,this.m_isFixedLabelArr[this.fieldNameArr[i]]=this.getProperAttributeNameValue(e[t],"isfixedlabel"),this.m_formatterArr[this.fieldNameArr[i]]=this.getProperAttributeNameValue(e[t],"formatter"),this.m_unitNameArr[this.fieldNameArr[i]]=this.getProperAttributeNameValue(e[t],"unitname"),this.m_signPositioneArr[this.fieldNameArr[i]]=this.getProperAttributeNameValue(e[t],"signposition"),this.m_precisionArr[this.fieldNameArr[i]]=this.getProperAttributeNameValue(e[t],"precision"),this.m_secondFormatterArr[this.fieldNameArr[i]]=this.getProperAttributeNameValue(e[t],"secondformatter"),this.m_secondUnitNameArr[this.fieldNameArr[i]]=this.getProperAttributeNameValue(e[t],"secondunitname"),this.m_fieldaggregation[this.fieldNameArr[i]]=void 0===this.getProperAttributeNameValue(e[t],"parentAggregation")?"none":this.getProperAttributeNameValue(e[t],"parentAggregation"),this.m_fieldColors[this.getStringARSC(this.fieldNameArr[i])]=this.getProperAttributeNameValue(e[t],"Color"),void 0!==this.getProperAttributeNameValue(e[t],"tooltipField")&&""!==this.getProperAttributeNameValue(e[t],"tooltipField")?this.getProperAttributeNameValue(e[t],"tooltipField"):this.m_colHeadersFieldName[i]),s=(this.m_TooltipFieldsArr[this.m_colHeadersFieldName[i]]=r.split(","),this.m_enableColumnStyleArr[i]=this.getProperAttributeNameValue(e[t],"enableColumnStyle"),this.m_fontColorArr[i]=this.getProperAttributeNameValue(e[t],"fontColor"),this.m_fontSizeArr[i]=this.getProperAttributeNameValue(e[t],"fontSize"),this.m_fontStyleArr[i]=this.getProperAttributeNameValue(e[t],"fontStyle"),this.m_fontWeightArr[i]=this.getProperAttributeNameValue(e[t],"fontWeight"),this.m_fontFamilyArr[i]=this.getProperAttributeNameValue(e[t],"fontFamily"),{seriesName:this.m_colHeadersFieldName[i],displayName:this.m_gridheaderDisplayNames[i],color:this.m_fieldColors[i],fieldName:this.fieldNameArr[i],width:this.m_widthArr[this.m_colHeadersFieldName[i]],textAlign:this.m_textAlignArr[this.fieldNameArr[i]],toolTipColumn:this.m_tooltipColumnsArr[this.fieldNameArr[i]],numeric:this.m_isNumericArr[this.fieldNameArr[i]],sorting:this.m_sortingColumnsArr[this.fieldNameArr[i]],numberFormatter:this.m_numberFormatColumnsArr[this.fieldNameArr[i]],cellType:this.m_cellTypeArr[i],fixedLabel:this.m_isFixedLabelArr[this.fieldNameArr[i]],formatter:this.m_formatterArr[this.fieldNameArr[i]],unitName:this.m_unitNameArr[this.fieldNameArr[i]],signPosition:this.m_signPositioneArr[this.fieldNameArr[i]],precision:this.m_precisionArr[this.fieldNameArr[i]],secondFormatter:this.m_secondFormatterArr[this.fieldNameArr[i]],secondUnitName:this.m_secondUnitNameArr[this.fieldNameArr[i]],type:this.m_hierarchyTypeArr[i],visible:this.m_seriesVisibleArr[this.fieldNameArr[i]],enableColumnStyle:this.m_enableColumnStyleArr[i],fontColor:this.m_fontColorArr[i],fontSize:this.m_fontSizeArr[i],fontStyle:this.m_fontStyleArr[i],fontWeight:this.m_fontWeightArr[i],fontFamily:this.m_fontFamilyArr[i],index:i});this.legendMap[this.m_colHeadersFieldName[i]]=s},ScoreCard.prototype.getLegendInfo=function(){var e,t={};for(e in this.legendMap)"parent"!=this.legendMap[e].type&&IsBoolean(this.legendMap[e].visible)&&IsBoolean("Multiple"==this.m_hierarchylevel||("Single"==this.m_hierarchylevel||"TreeWithPivot"==this.m_hierarchylevel)&&"child"!=this.legendMap[e].type)&&(t[e]=this.legendMap[e]);return t},ScoreCard.prototype.getAllFieldsName=function(){return this.fieldName},ScoreCard.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},ScoreCard.prototype.setDashboardNameAndObjectId=function(){this.m_objectId=this.m_objectid,2==this.m_objectid.split(".").length&&(this.m_objectid=this.m_objectid.split(".")[1]),this.m_componentid="dataGridDiv"+this.m_objectid},ScoreCard.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEvent()},ScoreCard.prototype.draw=function(){this.init(),this.drawChart(),null!=this.plugin&&null!=this.plugin&&this.plugin.initPlugin(this),""!=this.m_onafterrendercallback&&onAfterRender(this.m_onafterrendercallback)},ScoreCard.prototype.showWidget=function(){this.visibilityStatus=!0,$("#draggableDiv"+this.m_objectid).css("display","block"),IsBoolean(this.m_isDataSetavailable)&&this.drawChart()},ScoreCard.prototype.hideWidget=function(){this.visibilityStatus=!1,$("#draggableDiv"+this.m_objectid).css("display","none")},ScoreCard.prototype.drawObject=function(){this.ctx.clearRect(this.m_x,this.m_y,this.m_width,this.m_height),this.m_chartFrame.init(this),this.m_chartFrame.drawFrame(),this.setTitleProperties(),this.m_title1.init(this),this.m_title1.draw(),this.drawMessage(this.m_status.noData)},ScoreCard.prototype.drawMessage=function(e){this.ctx.beginPath(),this.ctx.fillStyle=this.m_statuscolor,this.ctx.font=this.m_statusfontsize+"px "+selectGlobalFont(this.m_statusfontfamily),this.ctx.textAlign="left";var t=this.ctx.measureText(e).width,t=this.m_width-t;this.ctx.fillText(e,+this.m_x+t/2,+this.m_y+this.m_height/2),this.ctx.fill(),this.ctx.closePath()},ScoreCard.prototype.init=function(){this.setTitleProperties(),this.m_title1.init(this),this.m_subTitle.init(this),this.m_chartFrame.init(this),this.m_seriesData=this.getDataFromJSON(),this.setVisibleFieldData(),this.isSeriesDataEmpty(),this.isEmptyField(),this.isVisibleField(),IsBoolean(this.m_isEmptyField)?$("#"+this.m_componentid).remove():("Multiple"==this.m_hierarchylevel?(this.setParentIDs(),this.updateVisibleArrObject()):"TreeWithPivot"==this.m_hierarchylevel?(this.m_gridHeaderNames=this.m_gridheaderDisplayNames,this.m_gridFieldNames=this.m_colHeadersFieldName,this.setTreeField(),this.setIdField(),this.setParentIDName(),this.updateVisibleArrObject(),this.setFixedField(),this.setDynamicHeader()):(this.m_gridHeaderNames=this.m_gridheaderDisplayNames,this.m_gridFieldNames=this.m_colHeadersFieldName,this.setTreeField(),this.setIdField(),this.setParentIDName(),this.updateVisibleArrObjectForSingleType()),this.setToolTipArray(),this.createDatagrid())},ScoreCard.prototype.setCommaSeperatorFlag=function(){for(var e=0;e<this.dataField.length;e++)if(IsBoolean(this.m_visibleArr[this.dataField[e]])&&"none"==this.m_typeArr[this.dataField[e]]&&"none"==this.m_fieldaggregation[this.dataField[e]]){this.m_commaSeperatorFlag=!0;break}},ScoreCard.prototype.updateVisibleArrObject=function(){for(var e in this.m_visibleArr)null!=this.m_seriesVisibleArr[e]&&(this.m_visibleArr[e]=this.m_seriesVisibleArr[e])},ScoreCard.prototype.updateVisibleArrObjectForSingleType=function(){for(var e in this.m_visibleArr)null!=this.m_seriesVisibleArr[e]&&"child"!=this.m_typeArr[e]&&"parent"!=this.m_typeArr[e]&&(this.m_visibleArr[e]=this.m_seriesVisibleArr[e])},ScoreCard.prototype.setVisibleFieldData=function(){for(var e in this.m_gridheaderDisplayNames=[],this.m_colHeadersFieldName=[],this.m_widthArr={},this.m_textAlignArr={},this.m_tooltipColumnsArr={},this.m_numberFormatColumnsArr={},this.m_isNumericArr={},this.m_isFixedLabelArr={},this.m_formatterArr={},this.m_unitNameArr={},this.m_signPositioneArr={},this.m_precisionArr={},this.m_secondFormatterArr={},this.m_secondUnitNameArr={},this.m_fieldColor=[],this.m_hierarchyTypeArr=[],this.m_enableColumnStyleArr=[],this.m_fontColorArr=[],this.m_fontSizeArr=[],this.m_fontStyleArr=[],this.m_fontWeightArr=[],this.m_fontFamilyArr=[],this.legendMap)"Single"!=this.m_hierarchylevel&&"TreeWithPivot"!=this.m_hierarchylevel&&!IsBoolean(this.m_seriesVisibleArr[e])||(this.m_colHeadersFieldName.push(this.legendMap[e].seriesName),this.m_gridheaderDisplayNames.push(this.legendMap[e].displayName),this.m_fieldColor.push(this.legendMap[e].color),this.m_widthArr[this.legendMap[e].seriesName]=this.legendMap[e].width,this.m_textAlignArr[this.legendMap[e].fieldName]=this.legendMap[e].textAlign,this.m_tooltipColumnsArr[this.legendMap[e].fieldName]=this.legendMap[e].toolTipColumn,this.m_numberFormatColumnsArr[this.legendMap[e].fieldName]=this.legendMap[e].numberFormatter,this.m_isNumericArr[this.legendMap[e].fieldName]=this.legendMap[e].cellType,this.m_isFixedLabelArr[this.legendMap[e].fieldName]=this.legendMap[e].fixedLabel,this.m_formatterArr[this.legendMap[e].fieldName]=this.legendMap[e].formatter,this.m_unitNameArr[this.legendMap[e].fieldName]=this.legendMap[e].unitName,this.m_signPositioneArr[this.legendMap[e].fieldName]=this.legendMap[e].signPosition,this.m_precisionArr[this.legendMap[e].fieldName]=this.legendMap[e].precision,this.m_secondFormatterArr[this.legendMap[e].fieldName]=this.legendMap[e].secondFormatter,this.m_secondUnitNameArr[this.legendMap[e].fieldName]=this.legendMap[e].secondUnitName,this.m_hierarchyTypeArr.push(this.legendMap[e].type),this.m_enableColumnStyleArr.push(this.legendMap[e].enableColumnStyle),this.m_fontColorArr.push(this.legendMap[e].fontColor),this.m_fontSizeArr.push(this.legendMap[e].fontSize),this.m_fontStyleArr.push(this.legendMap[e].fontStyle),this.m_fontWeightArr.push(this.legendMap[e].fontWeight),this.m_fontFamilyArr.push(this.legendMap[e].fontFamily))},ScoreCard.prototype.setToolTipArray=function(){for(var e=0,t=this.m_colHeadersFieldName.length;e<t;e++)!_.contains(this.m_hierarchyTypeArr,"parent")&&!_.contains(this.m_hierarchyTypeArr,"child")||!0===this.m_tooltipColumnsArr.name||"parent"!=this.m_hierarchyTypeArr[e]&&"child"!=this.m_hierarchyTypeArr[e]||(this.m_tooltipColumnsArr.name=this.m_tooltipColumnsArr[this.m_colHeadersFieldName[e]],this.m_sortingColumnsArr.name=this.m_sortingColumnsArr[this.m_colHeadersFieldName[e]],this.m_numberFormatColumnsArr.name=this.m_numberFormatColumnsArr[this.m_colHeadersFieldName[e]],this.m_TooltipFieldsArr.name=this.m_TooltipFieldsArr[this.m_colHeadersFieldName[e]])},ScoreCard.prototype.getBgGradients=function(){return this.m_bggradients},ScoreCard.prototype.createDatagrid=function(){var e,t,i=this;this.m_titleHeight=IsBoolean(this.m_title1.m_showtitle)||IsBoolean(this.m_showgradient)||IsBoolean(this.m_showmaximizebutton)?this.m_title1.m_titleBarHeight:0,this.m_subTitleHeight=IsBoolean(this.m_subTitle.m_showsubtitle)&&""!=this.m_subTitle.getDescription()?IsBoolean(this.m_enablehtmlformate.subtitle)?((this.m_subTitle.getDescription().match(/<br\s*\/?>/g)||[]).length+1)*this.m_subTitle.getFontSize()*1.5:this.m_subTitle.m_formattedDescription.length*this.m_subTitle.getFontSize()*1.5:0,this.m_designModeDrawingFlag&&($("#"+i.m_componentid).remove(),(e=document.createElement("div")).setAttribute("id",i.m_componentid),$("#draggableDiv"+i.m_objectid).append(e),$("#draggableDiv"+i.m_objectid).append(e),(t=document.createElement("table")).setAttribute("id","HierarchicalDGTable"+i.m_objectid),$("#draggableDiv"+i.m_objectid).append(t),e.appendChild(t)),$("#"+i.m_componentid).css({left:+this.m_x+1+"px",top:+this.m_y+ +this.m_titleHeight+ +this.m_subTitleHeight+1+"px",position:"absolute"}),$("#HierarchicalDGTable"+i.m_objectid).css("width",this.m_width-1+"px"),$("#HierarchicalDGTable"+i.m_objectid).css("height",+this.m_height-+this.m_titleHeight-+this.m_subTitleHeight+"px")},ScoreCard.prototype.setTitleProperties=function(){this.m_title1.m_fontsize=this.m_fontsize,this.m_title1.m_fontweight=this.m_fontweight,this.m_title1.m_fontfamily=selectGlobalFont(this.m_fontfamily),this.m_title1.m_fontstyle=this.m_fontstyle,this.m_title1.m_fontcolor=this.m_fontcolor,this.m_title1.m_textdecoration=this.m_textdecoration,this.m_title1.m_align=this.m_align,this.m_title1.m_description=this.m_title,this.m_title1.m_showtitle=this.m_showtitle,this.m_title1.m_titlebarheight=void 0!==this.m_titlebarheight?this.m_titlebarheight:25,this.m_gradientcolorsArray},ScoreCard.prototype.getRowHeight=function(e){return this.fontScaling(null==e||""===e||"0"==e?25:e)},ScoreCard.prototype.initDataGridAlerts=function(){for(var e in this.getAlertObj())this.getAlertObj()[e]&&this.getAlertObj()[e].init(this)},ScoreCard.prototype.drawChart=function(){this.createCanvasForDynamicRangeAlert(),this.m_chartFrame.drawFrame(),this.m_title1.draw(),this.m_subTitle.draw(),this.drawLegends(),this.getHierarchcy(this.legendMap);var e=this.IsDrawingPossible();IsBoolean(e.permission)?0<this.m_seriesData.length?"TreeWithPivot"==this.m_hierarchylevel&&IsBoolean(this.IsDrawingPossibleOfTreePivot().permission)?this.drawTreeGridWithPivot():this.drawTreeGrid():this.drawMessage(this.m_status.noData):this.drawMessage(e.message)},ScoreCard.prototype.getHierarchcy=function(e){for(var t in this.m_hieraryFields=[],e)"child"!=e[t].type&&"parent"!=e[t].type||this.m_hieraryFields.push(e[t])},ScoreCard.prototype.drawLegends=function(){this.drawChartLegends(),this.drawLegendComponent()},ScoreCard.prototype.drawChartLegends=function(){},ScoreCard.prototype.isSeriesDataAvailable=function(e){return!!IsBoolean(e.associatedChartObject.m_isrepeater)||!!(e.associatedChartObject&&e.associatedChartObject.m_seriesData&&0<e.associatedChartObject.m_seriesData.length)},ScoreCard.prototype.drawLegendComponent=function(){var e;IsBoolean(this.m_designMode)||(null!=(e=this.getLegendComponentObj())&&IsBoolean(this.isSeriesDataAvailable(e))?e.drawObject():null!=e&&$("#LegendContainerDiv"+e.m_objectid).remove())},ScoreCard.prototype.getLegendComponentObj=function(){if(""!=this.m_associatedlegendid&&IsBoolean(!this.m_designMode))for(var e=0,t=this.m_dashboard.m_widgetsArray.length;e<t;e++)if(this.m_associatedlegendid==this.m_dashboard.m_widgetsArray[e].m_objectid)return this.m_dashboard.m_widgetsArray[e]},ScoreCard.prototype.drawTreeGrid=function(){var i=this,e=(this.setColumnWidth(),this.xyz=this.m_seriesData,this.setColumnHeads(),this.initDataGridAlerts(),!!IsBoolean(this.m_designMode)||IsBoolean(this.m_fitRemainingColumns));this.m_designModeDrawingFlag?(this.m_designMode?this.m_designModeDrawingFlag=!1:this.m_designModeDrawingFlag=!0,$("#HierarchicalDGTable"+i.m_objectid).treegrid({idField:i.getIdField(),columns:[i.columnHeads],treeField:i.getTreeField(),data:i.getTableData(),singleSelect:!0,collapsible:!0,rownumbers:!1,remoteSort:!1,fitColumns:e,showHeader:!0,showFooter:!1,nowrap:!IsBoolean(i.m_textwrap),loadMsg:"",loading:!1,loaded:!1,striped:!0,sortOrder:"asc",state:closed,scrollbarSize:0,groupFormatter:function(e,t){return e},onSortColumn:function(e,t){$("span").removeClass("tree-icon tree-folder tree-folder-open"),$("span").removeClass("tree-file")},onClickRow:function(){i.m_isRowClicked=!0;for(var e=i.getFieldNameValueMap(),t=0;t<i.fieldNameArr.length;t++){if(i.fieldNameArr[t]===i.m_selectedCellInfo.field){e.drillDisplayField=i.getDrillDisplayFieldName(i.fieldNameArr[t],e),e.drillField=i.getDrillFieldName(i.fieldNameArr[t],e),e.drillValue=i.m_selectedCellInfo.value;break}if("name"===i.m_selectedCellInfo.field){e.drillDisplayField=i.getDrillDisplayFieldName(i.fieldNameArr[0],e),e.drillField=i.getDrillFieldName(i.fieldNameArr[0],e),e.drillValue=i.m_selectedCellInfo.value;break}}i.updateDataPoints(e,""),i.setSelectedRowCSS()},onClickCell:function(e,t){i.m_selectedCellInfo={},i.m_selectedCellInfo={field:e,value:t[e]},(detectDevice.mobile()||detectDevice.tablet())&&("closed"==t.state?$("#HierarchicalDGTable"+i.m_objectid).treegrid("expand",t.id):$("#HierarchicalDGTable"+i.m_objectid).treegrid("collapse",t.id))},onLoadSuccess:function(e){i.setGridColors(),i.setGridCss(),i.updateGridNodeState(),IsBoolean(i.m_designMode)||i.drawMicroCharts()}}),$("#HierarchicalDGTable"+i.m_objectid).treegrid("resize",{width:i.m_width-2,height:i.m_height-this.m_titleHeight-this.m_subTitleHeight-2}),$("span").removeClass("tree-icon tree-folder tree-folder-open"),$("span").removeClass("tree-file"),this.m_seriesData=this.xyz):(jqEasyUI("#HierarchicalDGTable"+i.m_objectid).datagrid("resize",{width:i.m_width-2,height:i.m_height-this.m_titleHeight-this.m_subTitleHeight-2}),i.setGridColors(),i.setGridCss()),IsBoolean(this.m_fitRemainingColumns)||0<i.m_scrollbarsize&&$("#"+i.m_componentid).find(".datagrid-view2 div.datagrid-header-inner").css("width","10000px")},ScoreCard.prototype.drawTreeGridWithPivot=function(){var i=this,e=(this.setColumnWidth(),this.xyz=this.m_seriesData,this.setTreeGridWithPivotingData()),t=this.getTreeData(e),e=this.getColumnHeadsWithPivoting(e),r=!!IsBoolean(this.m_designMode)||IsBoolean(this.m_fitRemainingColumns);this.m_designModeDrawingFlag?(this.m_designMode?this.m_designModeDrawingFlag=!1:this.m_designModeDrawingFlag=!0,$("#HierarchicalDGTable"+i.m_objectid).treegrid({idField:i.getIdField(),columns:e,treeField:i.getTreeField(),data:t,singleSelect:!0,collapsible:!0,rownumbers:!1,remoteSort:!1,fitColumns:r,showHeader:!0,showFooter:!1,nowrap:!IsBoolean(i.m_textwrap),loadMsg:"",loading:!1,loaded:!1,striped:!0,sortOrder:"asc",state:closed,scrollbarSize:0,groupFormatter:function(e,t){return e},onSortColumn:function(e,t){$("span").removeClass("tree-icon tree-folder tree-folder-open"),$("span").removeClass("tree-file")},onClickRow:function(){i.m_isRowClicked=!0;var e=i.getFieldNameValueMap();e.drillDisplayField=i.getDrillDisplayFieldName(i.m_selectedCellInfo.field,e),e.drillField=i.getDrillFieldName(i.m_selectedCellInfo.field,e),e.drillValue=i.m_selectedCellInfo.value;i.updateDataPoints(e,""),i.setSelectedRowCSS()},onClickCell:function(e,t){i.m_selectedCellInfo={},i.m_selectedCellInfo={field:e,value:t[e]}},onLoadSuccess:function(e){i.setGridColors(),i.setGridCss(),i.updateGridNodeState(),IsBoolean(i.m_designMode)||i.drawMicroCharts()}}),$("#HierarchicalDGTable"+i.m_objectid).treegrid("resize",{width:i.m_width-2,height:i.m_height-this.m_titleHeight-this.m_subTitleHeight-2}),$("span").removeClass("tree-icon tree-folder tree-folder-open"),$("span").removeClass("tree-file"),this.m_seriesData=this.xyz):(jqEasyUI("#HierarchicalDGTable"+i.m_objectid).datagrid("resize",{width:i.m_width-2,height:i.m_height-this.m_titleHeight-this.m_subTitleHeight-2}),i.setGridColors(),i.setGridCss()),IsBoolean(this.m_fitRemainingColumns)||0<i.m_scrollbarsize&&$("#"+i.m_componentid).find(".datagrid-view2 div.datagrid-header-inner").css("width","10000px")},ScoreCard.prototype.drawMicroCharts=function(){for(var e=0;e<this.m_colHeadersFieldName.length;e++)this.legendMap[this.m_colHeadersFieldName[e]]&&("Bullet"==this.legendMap[this.m_colHeadersFieldName[e]].cellType?this.drawBullet(e):"Sparkline"==this.legendMap[this.m_colHeadersFieldName[e]].cellType?this.drawSparkline(e):"SparkColumn"==this.legendMap[this.m_colHeadersFieldName[e]].cellType?this.drawSparkColumn(e):"SparkPie"==this.legendMap[this.m_colHeadersFieldName[e]].cellType&&this.drawSparkPie(e))},ScoreCard.prototype.drawBullet=function(e){var t=hex2rgb(convertColorToHex(this.m_tooltipbackgroundcolor),this.m_tooltipbackgroundtransparency),t={width:Math.round(this.m_widthArr[this.m_colHeadersFieldName[e]])-18,height:Math.round(this.m_rowheight)-5,tooltipBackgroundColor:t,disableTooltips:!IsBoolean(this.legendMap[this.m_colHeadersFieldName[e]].toolTipColumn)};$(".bullet"+this.m_objectid+this.getStringARSC(this.m_colHeadersFieldName[e])).sparkline("html",this.getBulletConfig(t,this.m_colHeadersFieldName[e],this.m_gridheaderDisplayNames[e]))},ScoreCard.prototype.drawSparkline=function(e){var t=hex2rgb(convertColorToHex(this.m_tooltipbackgroundcolor),this.m_tooltipbackgroundtransparency),t={width:Math.round(this.m_widthArr[this.m_colHeadersFieldName[e]])-8,height:Math.round(this.m_rowheight)-5,dataLabel:!1,highlightSpotColor:!0,highlightLineColor:null,fieldName:this.m_gridheaderDisplayNames[e],tooltipBackgroundColor:t,disableTooltips:!IsBoolean(this.legendMap[this.m_colHeadersFieldName[e]].toolTipColumn)};$(".Sparkline"+this.m_objectid+this.getStringARSC(this.m_colHeadersFieldName[e])).sparkline("html",this.getSparklineConfig(t,this.m_colHeadersFieldName[e],this.m_gridheaderDisplayNames[e]))},ScoreCard.prototype.drawSparkColumn=function(e){var t=hex2rgb(convertColorToHex(this.m_tooltipbackgroundcolor),this.m_tooltipbackgroundtransparency),t={width:Math.round(this.m_widthArr[this.m_colHeadersFieldName[e]])-8,height:Math.round(this.m_rowheight)-5,dataLabel:!1,highlightSpotColor:!0,highlightLineColor:null,fieldName:this.m_gridheaderDisplayNames[e],tooltipBackgroundColor:t,disableTooltips:!IsBoolean(this.legendMap[this.m_colHeadersFieldName[e]].toolTipColumn)};$(".SparkColumn"+this.m_objectid+this.getStringARSC(this.m_colHeadersFieldName[e])).sparkline("html",this.getSparkColumnConfig(t,this.m_colHeadersFieldName[e],this.m_gridheaderDisplayNames[e]))},ScoreCard.prototype.drawSparkPie=function(e){var t=hex2rgb(convertColorToHex(this.m_tooltipbackgroundcolor),this.m_tooltipbackgroundtransparency),t={width:Math.round(this.m_widthArr[this.m_colHeadersFieldName[e]])-8,height:Math.round(this.m_rowheight)-5,dataLabel:!1,highlightSpotColor:!0,highlightLineColor:null,fieldName:this.m_gridheaderDisplayNames[e],tooltipBackgroundColor:t,disableTooltips:!IsBoolean(this.legendMap[this.m_colHeadersFieldName[e]].toolTipColumn)};$(".SparkPie"+this.m_objectid+this.getStringARSC(this.m_colHeadersFieldName[e])).sparkline("html",this.getSparkPieConfig(t,this.m_colHeadersFieldName[e],this.m_gridheaderDisplayNames[e]))},ScoreCard.prototype.getBulletConfig=function(e,t,i){return e.type="bullet",e.targetWidth=3,e.targetColor="#006684",e.performanceColor="#f89406",e.rangeColors=["#e6e6e6","#d4d4d4","#c0c0c0","#b4b4b4"],e.tooltipValueLookups={fields:{r:"Range",p:i,t:"Target"}},e},ScoreCard.prototype.getSparklineConfig=function(e,t){return e.type="line",e.lineColor="#006684",e.fillColor="rgba(224, 223, 223, 0)",e.lineWidth="1",e.spotColor="#f89406",e.minSpotColor="#f89406",e.maxSpotColor="#f89406",e.spotRadius="2",e},ScoreCard.prototype.getSparkColumnConfig=function(e,t,i){return e.type="bar",e.barColor="#86dff9",e.negBarColor="#f89406",e.barSpacing="1",e.zeroColor="#e0dfdf",e},ScoreCard.prototype.getSparkPieConfig=function(e,t,i){return e.type="pie",e.offset="-90",e.borderWidth="1",e.borderColor="#ffffff",e},ScoreCard.prototype.updateGridNodeState=function(){IsBoolean(this.m_collapseallnode)?$("#HierarchicalDGTable"+this.m_objectid).treegrid("collapseAll"):$("#HierarchicalDGTable"+this.m_objectid).treegrid("expandAll")},ScoreCard.prototype.getDrillFieldName=function(e,t){for(var i in t)if(e===this.getStringARSC(i))return i},ScoreCard.prototype.getDrillDisplayFieldName=function(e,t){for(var i=this.getDrillFieldName(e,t),r=0,s=this.m_colHeadersFieldName.length;r<s;r++)if(this.m_colHeadersFieldName[r]===i)return this.m_gridheaderDisplayNames[r]},ScoreCard.prototype.getFirstChild=function(e){if(null!=e.children){var t=0,i=e.children.length;if(t<i)return this.getFirstChild(e.children[t])}return e},ScoreCard.prototype.getFieldNameValueMap=function(){var e=jqEasyUI("#HierarchicalDGTable"+this.m_objectid).datagrid("getSelected");if("TreeWithPivot"==this.m_hierarchylevel)for(var t in e)-1<t.indexOf("MAUKA"+e[this.m_fixedfield])&&(e[t.split("MAUKA"+e[this.m_fixedfield])[0]]=e[t],delete e[t]);for(var i=new Object,r=(this.getParentArray(e._parentId),this.getChildArray(e),[]),s=this.parentNamesArray.length-1;0<=s;s--)r.push(this.parentNamesArray[s]);r.push(e.name);for(var a=0,o=this.childNamesArray.length;a<o;a++)r.push(this.childNamesArray[a]);for(var l=0,h=0,n=this.fieldNameArr.length;l<n;l++)"none"==this.m_hierarchyTypeArr[l]?i["drillField_"+this.fieldNameArr[l]]=e[this.getStringARSC(this.fieldNameArr[l])]:(i[this.fieldNameArr[l]]=r[h],h++);for(var e=this.getFirstChildRow(e),d=0,n=this.m_gridFieldNames.length;d<n;d++)i["name"==this.m_gridFieldNames[d]?this.m_name1:this.m_gridFieldNames[d]]=e["_parentId"==this.m_gridFieldNames[d]?this.m_gridFieldNames[d]:this.getStringARSC(this.m_gridFieldNames[d])];return i},ScoreCard.prototype.getFirstChildRow=function(e){return e},ScoreCard.prototype.getParentArray=function(e){this.parentNamesArray=[],this.getIterativeParentArray(e)},ScoreCard.prototype.getIterativeParentArray=function(e){for(var t,i=0;i<this.finalArray.length;i++)this.finalArray[i].id==e&&0<+e&&(this.parentNamesArray.push(this.finalArray[i].name),t=this.finalArray[i]._parentId,this.getIterativeParentArray(t))},ScoreCard.prototype.getChildArray=function(e){this.childNamesArray=[],this.getIterativeChildArray(e)},ScoreCard.prototype.getIterativeChildArray=function(e){if(e.children)for(var t=0,i=this.finalArray.length;t<i;t++)if(this.finalArray[t]._parentId==e.id){this.childNamesArray.push(this.finalArray[t].name),this.getIterativeChildArray(e.children[0]);break}},ScoreCard.prototype.setTreeField=function(){if(""==this.m_treefield)for(var e=0,t=this.m_hierarchyTypeArr.length;e<t;e++)if("none"==this.m_hierarchyTypeArr[e]){this.m_treefield=this.m_gridFieldNames[e],this.m_treefieldDisplayName=this.m_gridHeaderNames[e];break}},ScoreCard.prototype.setIdField=function(){for(var e=0,t=this.m_gridFieldNames.length;e<t;e++)if("child"==this.m_hierarchyTypeArr[e].toLowerCase()){this.m_idField=this.m_gridFieldNames[e];break}},ScoreCard.prototype.setParentIDName=function(e){for(var e=0,t=this.m_gridFieldNames.length;e<t;e++)"parent"==this.m_hierarchyTypeArr[e].toLowerCase()&&(this.m_widthArr._parentId=this.m_widthArr[this.m_gridFieldNames[e]],this.m_gridFieldNames[e]="_parentId")},ScoreCard.prototype.getTreeField=function(){return this.getStringARSC(this.m_treefield)},ScoreCard.prototype.getIdField=function(){return this.getStringARSC(this.m_idField)},ScoreCard.prototype.getColumnHeads=function(){return this.columnHeads},ScoreCard.prototype.setColumnHeads=function(){var i=this;this.columnHeads=[];for(var e,t,r,s,a=0,o=this.m_gridFieldNames.length;a<o;a++)IsBoolean(this.m_visibleArr[this.m_gridFieldNames[a]])&&("Multiple"!=this.m_hierarchylevel&&this.setParentIDName(a),IsBoolean(this.m_visibleArr[this.m_gridFieldNames[a]]))&&(e=this.getStringARSC(this.m_gridFieldNames[a]),t=null!=this.m_widthArr[this.m_gridFieldNames[a]]&&""!=this.m_widthArr[this.m_gridFieldNames[a]]?+this.m_widthArr[this.m_gridFieldNames[a]]:150,r=null!=this.m_textAlignArr[this.m_gridFieldNames[a]]?this.m_textAlignArr[this.m_gridFieldNames[a]]:"left","Multiple"==this.m_hierarchylevel&&"name"==e&&this.addAlertProperty(),s={field:e,title:this.m_gridHeaderNames[a],width:t,align:r,hidden:!1,halign:this.m_textAlignArr[this.m_gridFieldNames[a]],sortable:this.m_sortingColumnsArr[this.m_gridFieldNames[a]]},"none"==this.m_isNumericArr[this.m_gridHeaderNames[a]]&&(s={field:e,title:this.m_gridHeaderNames[a],width:t,align:r,hidden:!1,halign:this.m_textAlignArr[this.m_gridFieldNames[a]],sortable:this.m_sortingColumnsArr[this.m_gridFieldNames[a]],sorter:function(e,t){return i.sortStringCaseSensitive(e,t)}}),null==this.getAlertObj()[e]||"Numeric"!=this.m_isNumericArr[this.m_gridFieldNames[a]]&&"Static Comparison"!=this.getAlertObj()[e].m_mode?(IsBoolean(this.m_isFixedLabelArr[this.m_gridFieldNames[a]])||null==this.m_formatterArr[this.m_gridFieldNames[a]]||""==this.m_formatterArr[this.m_gridFieldNames[a]]||"none"==this.m_formatterArr[this.m_gridFieldNames[a]]||this.m_isNumericArr[this.m_gridFieldNames[a]],s.formatter=this.drawToolTipForCell.bind(this,this.m_gridFieldNames[a],a)):this.getAlertObj()[e].m_name==this.m_gridFieldNames[a]&&("Range"==this.getAlertObj()[e].m_mode&&IsBoolean(this.getAlertObj()[e].getDynamicRange()),"colorfill"==this.getAlertObj()[e].getAlertType()?(s.formatter=this.drawToolTipForCell.bind(this,this.m_gridFieldNames[a],a),s.styler=this.drawAlertImages.bind(this,this.m_gridFieldNames[a],a)):s.formatter=this.drawAlertImages.bind(this,this.m_gridFieldNames[a],a)),this.columnHeads.push(s))},ScoreCard.prototype.addAlertProperty=function(){for(var e=[],t=this.fieldsData,i=[],r=0,s=t.length;r<s;r++)IsBoolean(this.getProperAttributeNameValue(t[r],"visible"))&&("parent"==this.getProperAttributeNameValue(t[r],"hierarchyType")&&(e.push(t[r].Name),i.push(t[r])),"child"==this.getProperAttributeNameValue(t[r],"hierarchyType"))&&(e.push(t[r].Name),i.push(t[r]));for(var a=0,o=e.length;a<o;a++)if(null!=this.getAlertObj()[this.getStringARSC(e[a])]){this.getAlertObj().name=this.getAlertObj()[this.getStringARSC(e[a])],this.m_isNumericArr.name="Numeric",this.getAlertObj().name.m_name="name",this.m_formatterArr.name=i[a].formatter,this.m_isFixedLabelArr.name=i[a].isfixedlabel,this.m_unitNameArr.name=i[a].unitname,this.m_signPositioneArr.name=i[a].signposition,this.m_precisionArr.name=i[a].precision,this.m_secondFormatterArr.name=i[a].secondformatter,this.m_secondUnitNameArr.name=i[a].secondunitname;break}},ScoreCard.prototype.getStringARSC=function(e){return e&&e.toString().replace(/[^a-z0-9_\s]/gi,"").replace(/\s/g,"_")},ScoreCard.prototype.drawToolTipForCell=function(e,t,i,r){var s,a,o,l,h,n,d=null==this.legendMap[e]?this.m_colHeadersFieldName[t]:e,m=hex2rgb(convertColorToHex(this.m_tooltipbackgroundcolor),this.m_tooltipbackgroundtransparency);return"Sparkline"!=this.legendMap[d].cellType&&"SparkColumn"!=this.legendMap[d].cellType&&"SparkPie"!=this.legendMap[d].cellType||"null"==i||null==i||!isNaN(i)||"NA"==i?"Image"==this.legendMap[d].cellType&&"null"!=i&&null!=i&&isNaN(i)&&"NA"!=i?'<img src="'+i+'" style="height:'+this.m_rowheight+"px; width:"+this.m_rowheight+'px;"></img>':"ProgressBar"!=this.legendMap[d].cellType||""==i||"null"==i||null==i||"NA"==i||isNaN(+i)?"Bullet"==this.legendMap[d].cellType&&"null"!=i&&null!=i&&isNaN(i)&&"NA"!=i?'<div class="bullet'+this.m_objectid+this.getStringARSC(e)+'" style="width:'+this.m_widthArr[t]+'px;">'+i+"</div>":("string"==typeof(s=IsBoolean(!IsBoolean(this.m_isFixedLabelArr[e]))?null==i||""===i?"":this.FormatCellValue(e,t,i,r):null==i||""===i?"":i)&&""!==s&&isNaN(s)?(o=SearchAndReplaceAllOccurence(s,'"',"&#34;"),o=SearchAndReplaceAllOccurence(o,"'","\\'")):"object"==typeof s&&""!==s[0]&&isNaN(s[0])?((o=[])[0]=SearchAndReplaceAllOccurence(s[0],'"',"&#34;"),o[0]=SearchAndReplaceAllOccurence(o[0],"'","\\'")):o=s,l=this.getAlertObj()[this.getStringARSC(e)],a=this.m_tooltipColumnsArr[e],void 0!==l&&(o=1==IsBoolean(l.m_showdata)?o:"&nbsp;"),o="object"==typeof s?"'"+(isNaN(o[0])?b64EncodeUnicode(o[0]):o[0])+"'":"'"+(isNaN(o)?b64EncodeUnicode(o):o)+"'",void 0!==l&&(s=1==IsBoolean(l.m_showdata)?s:"&nbsp;"),m="'"+this.m_tooltipbackgroundcolor+"'",l="'"+this.m_tooltipbackgroundtransparency+"'",h="'"+this.m_customtooltipwidth+"'","Hyperlink"==this.legendMap[d].cellType&&"null"!=i&&null!=i&&isNaN(i)&&"NA"!=i?"<div onclick=\"openHyperlink('"+i+'\')" onmousemove="getToolTip(this,'+a+","+o+","+m+","+l+","+h+","+!1+","+this.m_gridcustomtooltip+')" onmouseout="hideToolTip()" style="z-index:999; cursor:pointer;">'+s+"</div>":0<this.m_TooltipFieldsArr[e].length?(n={colName:e,row:r,tooltipValue:o},1==this.m_TooltipFieldsArr[e].length?"name"==e&&IsBoolean(this.m_gridcustomtooltip)?'<div onmousemove="getToolTip(this,false,'+this.getCustomTooltipData(n,r)+","+m+","+l+","+h+","+!1+","+this.m_gridcustomtooltip+')" onmouseout="hideToolTip()" style="z-index:999;">'+s+"</div>":'<div onmousemove="getToolTip(this,'+a+","+this.getCustomTooltipData(n,r)+","+m+","+l+","+h+","+!1+","+this.m_gridcustomtooltip+')" onmouseout="hideToolTip()" style="z-index:999;">'+s+"</div>":"name"==e&&IsBoolean(this.m_gridcustomtooltip)?'<div onmousemove="getToolTip(this,false,'+("'"+this.getCustomTooltipData(n,r).value+"'")+","+m+","+l+","+h+","+!0+","+this.m_gridcustomtooltip+')" onmouseout="hideToolTip()" style="z-index:999;">'+s+"</div>":'<div onmousemove="getToolTip(this,'+a+","+("'"+this.getCustomTooltipData(n,r).value+"'")+","+m+","+l+","+h+","+!0+","+this.m_gridcustomtooltip+')" onmouseout="hideToolTip()" style="z-index:999;">'+s+"</div>"):'<div onmousemove="getToolTip(this,'+a+","+o+","+m+","+l+","+h+","+!1+","+this.m_gridcustomtooltip+')" onmouseout="hideToolTip()" style="z-index:999;">'+s+"</div>"):(t=this.fieldNameArr.indexOf(e),this.drawProgressBar(e,t,i,r)):'<div class="'+this.legendMap[d].cellType+this.m_objectid+this.getStringARSC(e)+'" style="width:'+this.m_widthArr[e]+'px;">'+i+"</div>"},ScoreCard.prototype.getCustomTooltipData=function(e,t){var i={};if(1==this.m_TooltipFieldsArr[e.colName].length){if(e.colName==this.m_TooltipFieldsArr[e.colName][0])return e.tooltipValue;if(IsBoolean(this.m_gridcustomtooltip)){for(var r=this.m_TooltipFieldsArr[e.colName][0];null!=/\[(.*?)\]/g.exec(r);)var s=/\[(.*?)\]/g.exec(r),a=t[s[1]],r=r.replace(s[0],a);return r=SearchAndReplaceAllOccurence(r,"&lt;","<"),r=SearchAndReplaceAllOccurence(r,"&gt;",">"),r=SearchAndReplaceAllOccurence(r,"&#34;","'"),r="'"+(r=btoa(r))+"'"}return"name"==e.colName?l=e.tooltipValue:""!==e.row[e.colName]&&(l=(l=Array.isArray(e.row[this.m_TooltipFieldsArr[e.colName][0]])?void 0===(l=e.row[this.m_TooltipFieldsArr[e.colName][0]][0])?""+this.m_TooltipFieldsArr[e.colName][0]:""+l:void 0===(l=e.row[this.m_TooltipFieldsArr[e.colName][0]])?""+this.m_TooltipFieldsArr[e.colName][0]:""+l,"'"+(l=btoa(l))+"'")),l}for(var o=!0,l={isEncoded:!0},h=0;h<this.m_TooltipFieldsArr[e.colName].length;h++)"name"==e.colName&&o?(o=!1,i[this.m_TooltipFieldsArr[e.colName][h]]=e.row.name):(this.m_TooltipFieldsArr[e.colName][h]!==this.getParentField()&&""!==e.row[this.m_TooltipFieldsArr[e.colName][h]]&&(i[this.m_TooltipFieldsArr[e.colName][h]]=e.row.name),void 0!==e.row[this.m_TooltipFieldsArr[e.colName][h]]&&""!==e.row[this.m_TooltipFieldsArr[e.colName][h]]&&(Array.isArray(e.row[this.m_TooltipFieldsArr[e.colName][h]])?i[this.m_TooltipFieldsArr[e.colName][h]]=e.row[this.m_TooltipFieldsArr[e.colName][h]][0]:i[this.m_TooltipFieldsArr[e.colName][h]]=e.row[this.m_TooltipFieldsArr[e.colName][h]]));return l.value=btoa(JSON.stringify(i)),l},ScoreCard.prototype.getProgressBarColor=function(){return["#83cc0f","#f7244a","#f5b229","#ddc617","#49b1de"]},ScoreCard.prototype.drawProgressBar=function(e,t,i,r){var s,a,o,l,h,n="progressDiv"+this.m_objectid+this.getStringARSC(e),d=this.m_tooltipColumnsArr[e],m="'"+(isNaN(i)&&"string"==typeof i?b64EncodeUnicode(i):i)+"'",g=this.getProgressBarColor(),c=this.fontScaling(3),p="'"+this.m_tooltipbackgroundcolor+"'",_="'"+this.m_tooltipbackgroundtransparency+"'",u="'"+this.m_customtooltipwidth+"'";return 0==+i?(a=this.m_widthArr[e]-10,o='"border-left:'+c+"px solid transparent;border-right:"+c+"px solid transparent; width:"+(+this.m_widthArr[t]-10)+'px;"',l='"border:'+c+"px solid "+g[s=0]+"; border-top-left-radius: 2em; border-bottom-left-radius: 2em; float:left; width:"+s+'px;"',h='"border:'+c+"px solid "+g[1]+"; border-top-left-radius: 2em; border-bottom-left-radius: 2em; border-top-right-radius: 2em; border-bottom-right-radius: 2em; float:right; width:"+a+'px;"','<div onmousemove="getToolTip(this,'+d+","+m+","+p+","+_+","+u+')" onmouseout="hideToolTip()" class='+n+" style="+o+">"+('<div style="display:flex;" class="progressBarLabels"><div align="left" style="float:left; width:50%;">'+this.getFormattedCellValue(i,e,t)+'</div><div align="right" style="float:right; width:50%;">'+this.getFormattedCellValue(100-i,e,t)+"</div></div>")+'<div style="display:flex;"><div style='+h+"></div></div>"):100==+i?(s=this.m_widthArr[e]-10,o='"border-left:'+c+"px solid transparent;border-right:"+c+"px solid transparent; width:"+(+this.m_widthArr[t]-10)+'px;"',l='"border:'+c+"px solid "+g[a=0]+"; border-top-left-radius: 2em; border-bottom-left-radius: 2em; border-top-right-radius: 2em; border-bottom-right-radius: 2em; float:left; width:"+s+'px;"',h='"border:'+c+"px solid "+g[1]+"; border-top-right-radius: 2em; border-bottom-right-radius: 2em; float:right; width:"+a+'px;"','<div onmousemove="getToolTip(this,'+d+","+m+","+p+","+_+","+u+')" onmouseout="hideToolTip()" class='+n+" style="+o+">"+('<div style="display:flex;" class="progressBarLabels"><div align="left" style="float:left; width:50%;">'+this.getFormattedCellValue(i,e,t)+'</div><div align="right" style="float:right; width:50%;">'+this.getFormattedCellValue(100-i,e,t)+"</div></div>")+'<div style="display:flex;"><div style='+l+"></div></div></div>"):+i<0||100<+i?(s=this.m_widthArr[e]-10,o='"border-left:'+c+"px solid transparent;border-right:"+c+"px solid transparent; width:"+(+this.m_widthArr[t]-10)+'px;"',l='"border:'+c+"px solid "+this.m_defaultalertcolor+"; border-top-left-radius: 2em; border-bottom-left-radius: 2em; border-top-right-radius: 2em; border-bottom-right-radius: 2em; float:left; width:"+s+'px;"','<div onmousemove="getToolTip(this,'+d+","+m+","+p+","+_+","+u+')" onmouseout="hideToolTip()" class='+n+" style="+o+">"+('<div style="display:flex;" class="progressBarLabels"><div align="left" style="float:left; width:80%;">'+this.getFormattedCellValue(i,e,t)+'</div><div align="right" style="float:right; width:20%;"></div></div>')+'<div style="display:flex;"><div style='+l+"></div></div></div>"):(s=i*(this.m_widthArr[e]-10)/100,a=+this.m_widthArr[e]-14-s,o='"border-left:'+c+"px solid transparent;border-right:"+c+"px solid transparent; width:"+(+this.m_widthArr[t]-10)+'px;"',l='"border:'+c+"px solid "+g[0]+"; border-top-left-radius: 2em; border-bottom-left-radius: 2em; float:left; width:"+s+'px;"',h='"border:'+c+"px solid "+g[1]+"; border-top-right-radius: 2em; border-bottom-right-radius: 2em; float:right; width:"+a+'px;"','<div onmousemove="getToolTip(this,'+d+","+m+","+p+","+_+","+u+')" onmouseout="hideToolTip()" class='+n+" style="+o+">"+('<div style="display:flex;" class="progressBarLabels"><div align="left" style="float:left; width:50%;">'+this.getFormattedCellValue(i,e,t)+'</div><div align="right" style="float:right; width:50%;">'+this.getFormattedCellValue(100-i,e,t)+"</div></div>")+'<div style="display:flex;"><div style='+l+'></div><div style="border: 1px solid #ffffff;"></div><div style='+h+"></div></div></div>")},ScoreCard.prototype.setColumnWidth=function(){for(var e=0,t=0,i=0,r=this.m_colHeadersFieldName.length;i<r;i++)null!=this.m_widthArr[this.m_colHeadersFieldName[i]]&&""!=this.m_widthArr[this.m_colHeadersFieldName[i]]&&(e=+e+ +parseInt(this.m_widthArr[this.m_colHeadersFieldName[i]]),t++);var s=this.m_width-e,a=(this.m_fitRemainingColumns=!1,s/(this.m_colHeadersFieldName.length-t!=0)?this.m_colHeadersFieldName.length-t:1);if(IsBoolean(this.m_fitcolumns)){for(var o,i=0,l=this.m_colHeadersFieldName.length;i<l;i++)"parent"!==this.m_typeArr[this.m_colHeadersFieldName[i]]&&(o=void 0!==this.m_widthArr.name?this.m_widthArr.name:0,null!=this.m_widthArr[this.m_colHeadersFieldName[i]]&&""!=this.m_widthArr[this.m_colHeadersFieldName[i]]?this.m_widthArr[this.m_colHeadersFieldName[i]]=(this.m_width-o)*(this.m_widthArr[this.m_colHeadersFieldName[i]]/(e-o)):this.m_widthArr[this.m_colHeadersFieldName[i]]=parseInt(a));this.m_fitRemainingColumns=!0}else this.isMaximized&&0<s&&(this.m_fitRemainingColumns=!0)},ScoreCard.prototype.getParentChildFieldName=function(){for(var e=[],t=[],i=[],r=[],s=0,a=this.fieldName.length;s<a;s++)"parent"==this.m_typeArr[this.fieldName[s]]&&(e.push(this.fieldName[s]),t.push(this.m_displayAllFieldName[s]));for(var s=0,o=this.fieldName.length;s<o;s++)"child"==this.m_typeArr[this.fieldName[s]]?this.m_seriesVisibleArr[this.fieldName[s]]&&(e.push(this.fieldName[s]),t.push(this.m_displayAllFieldName[s])):"parent"!==this.m_typeArr[this.fieldName[s]]&&(i.push(this.fieldName[s]),r.push(this.m_displayAllFieldName[s]));return{root:e,value:i,header:r,rootDisplay:t}},ScoreCard.prototype.setWidthForTreeNode=function(e){for(var t=this.m_widthArr[e[0]],i=0,r=e.length;i<r;i++)t<this.m_widthArr[e[i]]&&(t=this.m_widthArr[e[i]]);this.m_widthArr.name=t},ScoreCard.prototype.setParentIDs=function(){var e=this.getParentChildFieldName(),t=e.root,i=e.value,r=(this.dataField=e.value,this.dataField=e.value,e.header),s=e.rootDisplay,a=(this.setCommaSeperatorFlag(),this.setWidthForTreeNode(t),[]),o=(this.m_name1=[t[t.length-1]],1);this.m_treefield="name",this.m_idField="id",this.m_gridFieldNames=["name","id","_parentId"];for(var l=0,h=i.length;l<h;l++)this.m_gridFieldNames.push(i[l]);this.m_gridHeaderNames=[s[s.length-1],"id","_parentId"];for(var l=0,n=i.length;l<n;l++)this.m_gridHeaderNames.push(r[l]);for(var l=0,d=this.m_gridFieldNames.length;l<d;l++)"id"==this.m_gridFieldNames[l]||"_parentId"==this.m_gridFieldNames[l]?this.m_visibleArr[this.m_gridFieldNames[l]]="false":this.m_gridFieldNames[l]==this.m_gridFieldNames[l]&&(this.m_visibleArr[this.m_gridFieldNames[l]]="true");for(var m={},g={},l=0,c=this.m_seriesData.length;l<c;l++)for(var p=0,_=t.length;p<_;p++){for(var u,f=!1,y={},A=this.m_seriesData[l][t[p]],b=0,n=a.length;b<n&&(a[b].name==this.m_seriesData[l][t[p-1]]&&(y.name=A,y.id=o,y._parentId=a[b].id,f=!0),!f);b++);if(f||(y.name=A,y.id=o,y._parentId=null),p==t.length-1)for(var N=0,C=i.length;N<C;N++)null==y[i[N]]&&(y[i[N]]=[]),y[i[N]].push(this.m_seriesData[l][i[N]]);else for(N=0;N<i.length;N++)y[i[N]]=[];this.pushDataInMap(a,t,p,y,null,this.m_seriesData[l]),u=IsBoolean(IsBoolean("none"==this.m_fieldaggregation[i])&&IsBoolean(e.root.length<=1))?this.isNodeExist(a,y,i):this.isNodeExist(a,y,y._parentId,i),IsBoolean(u)||(a.push(y),m[(g[y.id]=y).id]={},null!=m[y._parentId]&&(m[y._parentId][y.id]={}),o++)}for(b=0,c=a.length;b<c;b++)for(var v,l=0,_=i.length;l<_;l++)IsBoolean(this.isString(a[b][i[l]]))&&"count"!=this.m_fieldaggregation[i[l]]||(v=IsBoolean(this.m_commaSeperatorFlag)?i[l]+"_"+this.m_fieldaggregation[i[l]]:i[l],"none"==this.m_fieldaggregation[i[l]]?IsBoolean(null==a[b][v])||IsBoolean(0==a[b][v].length)?a[b][v]="":a[b][v]=+a[b][v][0]:a[b][v]=getAggregationOperatedData(a[b][i[l]],this.m_fieldaggregation[i[l]]));this.m_seriesData=a,this.sum(m,g),this.updateData(a,g)},ScoreCard.prototype.isString=function(e){for(var t=0,i=e.length;t<i;t++)if(isNaN(e[t]))return!0;return!1},ScoreCard.prototype.updateData=function(e,t){this.customAggregation={};for(var i=e.length-1;0<=i;i--)null!=e[i]._parentId&&this.calculateRoot(e[i],t[e[i]._parentId])},ScoreCard.prototype.calculateRoot=function(e,t){for(var i in e){var r=IsBoolean(this.m_commaSeperatorFlag)?i+"_"+this.m_fieldaggregation[i]:i;if(!isNaN(getNumericComparableValue(e[i]))&&"id"!=i&&"_parentId"!=i&&""!==e[i]||"customAggregation"==this.m_fieldaggregation[i])switch(null==t[i]&&(t[i]=""),this.m_fieldaggregation[i]){case"count":case"sum":t[i]=+this.getFirstValue(t,i)+ +this.getSecondValue(t,e,i),t[r]=t[i];break;case"avg":t[i+"_count"]=(null==t[i+"_count"]?0:+t[i+"_count"])+ +getNumericComparableValue(1);var s=t[i+"_count"],s=(1<s&&(s-=1),(""==t[i]?0:t[i]*s)+ +getNumericComparableValue(e[i]));t[i]=s/t[i+"_count"];break;case"max":t[i]=""==t[i]?e[i]:+t[i]<getNumericComparableValue(e[r])?getNumericComparableValue(e[r]):getNumericComparableValue(t[i]);break;case"min":t[i]=""==t[i]?e[i]:+t[i]>getNumericComparableValue(e[i])?getNumericComparableValue(e[r]):getNumericComparableValue(t[i]);break;case"none":t[i]=(""==t[i]?"":+t[i])+"";break;case"customAggregation":t[i]=this.calculateCustomAggregation(t,e,i)}}},ScoreCard.prototype.calculateCustomAggregation=function(parentNode,childNode,key){if(null==this.customAggregation[parentNode.name]&&(this.customAggregation[parentNode.name]={}),null==this.customAggregation[parentNode.name][key]){this.customAggregation[parentNode.name][key]={};for(var i=0;i<this.dataField.length;i++)this.customAggregation[parentNode.name][key][this.dataField[i]]=""}var result="";if(this.customAggregationScriptObj&&this.customAggregationScriptObj[key]&&this.customAggregationScriptObj[key].field){for(var key1 in this.customAggregationScriptObj[key].field){var customAggFieldObj=this.customAggregationScriptObj[key].field[key1];if(customAggFieldObj&&""!=customAggFieldObj&&customAggFieldObj.opr&&""!=customAggFieldObj.opr&&!isNaN(getNumericComparableValue(childNode[key1]))&&""!==childNode[key1]){var operType=this.customAggregationScriptObj[key].field[key1].opr;switch(operType){case"sum":var value=""!==this.customAggregation[parentNode.name][key][key1]?this.customAggregation[parentNode.name][key][key1]:0;value+=+this.getSecondValue(parentNode,childNode,key1),this.customAggregation[parentNode.name][key][key1]=value;break;case"avg":this.customAggregation[parentNode.name][key][key1+"_count"]=(null==this.customAggregation[parentNode.name][key][key1+"_count"]?0:+this.customAggregation[parentNode.name][key][key1+"_count"])+ +getNumericComparableValue(1);var noOfElement=this.customAggregation[parentNode.name][key][key1+"_count"],value=(1<noOfElement&&(noOfElement-=1),(""==this.customAggregation[parentNode.name][key][key1]?0:this.customAggregation[parentNode.name][key][key1]*noOfElement)+ +getNumericComparableValue(childNode[key1]));this.customAggregation[parentNode.name][key][key1]=value/this.customAggregation[parentNode.name][key][key1+"_count"]}}}var expression=this.customAggregationScriptObj[key].exper;if(expression&&""!==expression){for(var newTxt=expression.split("["),i=1;i<newTxt.length;i++)var val=this.customAggregation[parentNode.name][key][newTxt[i].split("]")[0]],val=""==val?0:val,expression=expression.replace(/ *\[[^\]]*]/,val);result=eval(expression),this.customAggregation[parentNode.name][key][key]=result}}return result},ScoreCard.prototype.getFirstValue=function(e,t){return""==e[t]?0:+e[t]},ScoreCard.prototype.getSecondValue=function(e,t,i){i=IsBoolean(this.m_commaSeperatorFlag)?i+"_"+this.m_fieldaggregation[i]:i;return+getNumericComparableValue(t[i])},ScoreCard.prototype.sum=function(e,t){for(var i in e)0<e[i].length?this.sum(e[i],t):t[i]},ScoreCard.prototype.pushDataInMap=function(e,t,i,r,s,a){if(0!=i){var o=0,l=null,l=0;for(length=e.length;l<length&&(e[l].name!=a[t[o]]||e[l]._parentId!=s||(s=e[l].id,++o!=i));l++);r._parentId=s}},ScoreCard.prototype.isNodeExist=function(e,t,i,r){for(var s=0,a=e.length;s<a;s++)if(e[s].name==t.name&&e[s]._parentId==i){for(var o=0,l=r.length;o<l;o++)0<t[r[o]].length&&null!=t[r[o]]&&""!=t[r[o]]&&e[s][r[o]].push(t[r[o]][0]);return!0}return!1},ScoreCard.prototype.getTableData=function(){for(var e=[],t=(this.columnWiseData={},["SparkColumn","Bullet","Sparkline","SparkPie"]),i=["id","name","_parentId"],r=0,s=this.m_seriesData.length;r<s;r++){for(var a={},o=0,l=this.m_gridFieldNames.length;o<l;o++){var h,n,d,m=this.m_gridFieldNames[o],g=this.getStringARSC(m);if("_parentId"==m?(h="Multiple"==this.m_hierarchylevel?m:this.fieldNameArr[o],a._parentId=this.getParentIdValue(this.m_seriesData[r][h])):(h=this.m_seriesData[r][m],""!=this.m_precisionArr[m]&&null!=this.m_precisionArr[m]&&("Single"==this.m_hierarchylevel&&"child"==this.m_hierarchyTypeArr[o].toLowerCase()?h=this.m_seriesData[r][m]:isNaN(h)||""==h||(this.m_precisionArr[m],this.m_fieldaggregation[m])),"Numeric"==this.m_isNumericArr[m]&&IsBoolean(this.valueValidation(h))?a[g]=this.numericArrayData(h):a[g]=h),null==this.columnWiseData[g]&&(this.columnWiseData[g]=[]),a[g])if("object"==typeof a[g])for(var c=0;c<a[g].length;c++)n=a[g][c],IsBoolean(this.valueValidation(n))&&this.columnWiseData[g].push((d=a[g])&&d instanceof Array&&0<d.length?d[c]:d);else n=a[g],IsBoolean(this.valueValidation(n))&&this.columnWiseData[g].push(d=a[g]);var p=a[g],u=!1;if(void 0!==this.m_numberFormaterSorting[g]&&-1===t.indexOf(this.m_isNumericArr[m])&&(u="number"==this.m_numberFormaterSorting[g]?!isNaN(+getCommaRemovedValue(p)):!isNaN(+p)),IsBoolean(u))if(_.contains(i,g))0==+p&&0!=p&&(p="");else if(0===p.length||0===p&&"0"!==p[0]&&void 0!==p[0]&&0!==p[0]||""===p[0]||Array.isArray(p)&&void 0===p[0])p="";else if(IsBoolean(Array.isArray(p))&&1<p.length)for(var f=0;p.length>f;f++)"number"==this.m_numberFormaterSorting[g]?p[f]=+getCommaRemovedValue(p[f]):p[f]=+p[f];else p="number"==this.m_numberFormaterSorting[g]?+getCommaRemovedValue(p):+p;a[g]=p}e.push(a)}var y,A={};for(y in this.columnWiseData)A[y]={},A[y].max=getNumericMax(this.columnWiseData[y]),A[y].min=getNumericMin(this.columnWiseData[y]);this.columnWiseData={},this.columnWiseData=A;var b="Multiple"==this.m_hierarchylevel&&IsBoolean(this.m_commaSeperatorFlag)&&0!=this.dataField.length?this.getUpdateTableData(e):e,b=(this.finalArray=e,JSON.stringify(b));return JSON.parse('{"rows":'+b+"}")},ScoreCard.prototype.numericArrayData=function(t){try{return Array.isArray(t)&&1<t.length?t.map(Number):removeCommaFromSrting(t)}catch(e){return removeCommaFromSrting(t)}},ScoreCard.prototype.getUpdateTableData=function(e){for(var t=[],i=0,r=e.length;i<r;i++){var s=this.getFieldMapFromObject(e[i]);if(IsBoolean(s.isArray)){if(0==e[i][s.field].length||1==e[i][s.field].length||0==e[i][s.field])t.push(e[i]);else if(Array.isArray(e[i][s.field]))for(var a=0;a<e[i][s.field].length;a++)t.push(this.getSeperateObject(this.dataField,e[i],a))}else t.push(e[i])}return t},ScoreCard.prototype.getFieldMapFromObject=function(e){for(var t,i,r=0,s=0,a=this.dataField.length;s<a;s++)Array.isArray(e[this.getStringARSC(this.dataField[s])])?(t=this.getStringARSC(this.dataField[s]),r++):i=this.getStringARSC(this.dataField[s]);return 0<r?{isArray:!0,field:t}:{isArray:!1,field:i}},ScoreCard.prototype.getSeperateObject=function(e,t,i){var r={},s=[];for(key in t)Array.isArray(t[key])?(s.push(t[key][i]),r[key]=s,s=[]):r[key]=t[key];return r},ScoreCard.prototype.getParentIdValue=function(e){return null==e||isNaN(e)?e:+e},ScoreCard.prototype.getAlertObj=function(){return this.m_alertObj},ScoreCard.prototype.setGridCss=function(){var e=this,t=$("#"+e.m_componentid);t.find(".datagrid-body table")[0].style.borderCollapse="initial",t.find(".panel-body").css("padding","0px"),t.find(".datagrid-row").css("height",e.getRowHeight(e.m_rowheight)+"px"),t.find(".datagrid-row-alt").css("height",e.getRowHeight(e.m_rowheight)+"px"),t.find(".datagrid-header-row").css("height",e.getRowHeight(e.m_rowheight)+"px");for(var i,r=0,s=e.m_colHeadersFieldName.length;r<s;r++)IsBoolean(e.m_enableColumnStyleArr[r])&&t.find('.datagrid-body td[field ="'+e.m_colHeadersFieldName[r]+'"]').css({color:convertColorToHex(e.m_fontColorArr[r]),"font-size":e.fontScaling(e.m_fontSizeArr[r])+"px","font-style":e.m_fontStyleArr[r],"font-weight":e.m_fontWeightArr[r],"font-family":selectGlobalFont(e.m_fontFamilyArr[r])});t.find(".datagrid-body tbody").css({"font-weight":e.m_labelfontweight,"font-size":e.fontScaling(e.m_labelfontsize)+"px","font-family":selectGlobalFont(e.m_labelfontfamily),"font-style":e.m_labelfontstyle,"text-decoration":e.m_labeltextdecoration,color:convertColorToHex(e.m_labelfontcolor)}),t.find(".datagrid-row > td:last-child > div.datagrid-cell").css("padding-right",+e.m_scrollbarsize+2+"px"),t.find(".datagrid-header-row span").css({"font-weight":e.m_headerfontweight,"font-size":e.fontScaling(e.m_headerfontsize)+"px","font-family":selectGlobalFont(e.m_headerfontfamily),"font-style":e.m_headerfontstyle,color:convertColorToHex(e.m_headerfontcolor),"text-decoration":e.m_headertextdecoration}),t.find(".datagrid-header-row span").parent().css("text-decoration",e.m_headertextdecoration),IsBoolean(this.m_usefieldcolorasheader)?(i=this.getParentChildFieldName().root,t.find(".datagrid-header-row  td").each(function(){$(this).css("background",hex2rgb(e.m_fieldColors[this.attributes[0].nodeValue],e.m_headerrowopacity))}),$(t.find(".datagrid-header-row  td")[0]).css("background",hex2rgb(e.m_fieldColors[this.getStringARSC(i[i.length-1])],e.m_headerrowopacity))):t.find(".datagrid-header-row  td").css("background",hex2rgb(convertColorToHex(e.m_headerchromecolor),e.m_headerrowopacity)),IsBoolean(e.m_usefieldalign)||t.find(".datagrid-header-row td div").css("text-align",e.m_headertextalign),t.find(".tree-title").css({"font-weight":e.m_labelfontweight,"font-size":e.fontScaling(e.m_labelfontsize)+"px","font-family":selectGlobalFont(e.m_labelfontfamily),"font-style":e.m_labelfontstyle,"text-decoration":e.m_labeltextdecoration,color:convertColorToHex(e.m_labelfontcolor)});for(r=0,s=e.m_colHeadersFieldName.length;r<s;r++)IsBoolean(e.m_enableColumnStyleArr[r])&&void 0!==e.m_hieraryFields[r]&&e.m_colHeadersFieldName[r]==e.m_hieraryFields[r].fieldName&&t.find('.datagrid-body td[field ="name"] .tree-title').css({color:convertColorToHex(e.m_fontColorArr[r]),"font-size":e.fontScaling(e.m_fontSizeArr[r])+"px","font-style":e.m_fontStyleArr[r],"font-weight":e.m_fontWeightArr[r],"font-family":selectGlobalFont(e.m_fontFamilyArr[r])});IsBoolean(this.m_textwrap)&&t.find(".tree-title").css({display:"initial","white-space":"pre-wrap"}),IsBoolean(e.m_showhorizontalgridlines)?(t.find(".datagrid-header td").css({"border-top":"1px solid "+hex2rgb(e.m_horizontalgridlinecolor,e.m_rowlinesopacity),"border-right":"1px solid "+hex2rgb(e.m_verticalgridlinecolor,e.m_rowlinesopacity),"border-bottom":"1px solid "+hex2rgb(e.m_horizontalgridlinecolor,e.m_rowlinesopacity),"border-left":"0px solid "+hex2rgb(e.m_verticalgridlinecolor,e.m_rowlinesopacity)}),t.find(".datagrid-header tr").find("td:first").css({"border-left":"1px solid "+hex2rgb(e.m_verticalgridlinecolor,e.m_rowlinesopacity)}),t.find(".datagrid-body tr.datagrid-row").find("td").css({"border-right":"1px solid "+hex2rgb(e.m_verticalgridlinecolor,e.m_rowlinesopacity),"border-bottom":"1px solid "+hex2rgb(e.m_horizontalgridlinecolor,e.m_rowlinesopacity),"border-width":"0px 1px 1px 0px"})):(t.find(".datagrid-header td").css({"border-right":"1px solid "+hex2rgb(e.m_verticalgridlinecolor,e.m_rowlinesopacity),"border-width":"0px 1px 0px 0"}),t.find(".datagrid-header tr").find("td:first").css({"border-left":"1px solid "+hex2rgb(e.m_verticalgridlinecolor,e.m_rowlinesopacity)}),t.find(".datagrid-body tr.datagrid-row").find("td").css({"border-right":"1px solid "+hex2rgb(e.m_verticalgridlinecolor,e.m_rowlinesopacity),"border-width":"0px 1px 0px 0px"})),t.find(".datagrid-body tr.datagrid-row").find("td:first").css({"border-left":"1px solid "+hex2rgb(e.m_verticalgridlinecolor,e.m_rowlinesopacity)}),t.find(".panel.datagrid").css({padding:"0px",margin:"0px",border:"0px solid transparent",background:"transparent","box-shadow":"none","-webkit-box-shadow":"none"}),t.find(".datagrid-header").css({"border-width":"0",background:"transparent"}),t.find("div.datagrid-wrap.panel-body.panel-body-noheader").css({border:"1px solid"+hex2rgb(convertColorToHex(e.m_verticalgridlinecolor),e.m_rowlinesopacity),"border-radius":"0px",background:"transparent"}),IsBoolean(this.m_textwrap)&&(t.find("td div.datagrid-cell").css({"white-space":"normal","word-wrap":"break-word",height:"auto"}),t.find(".datagrid-header td span").css({"white-space":"normal","word-wrap":"break-word"})),t.find(".tree-title").each(function(){var e=this.parentElement,e=$(e).find(".tree-indent").length,e=null!=e?0==e?"84%":1==e?"74%":2==e?"62%":3==e?"50%":"40%":"90%";$(this).css({width:e,display:"inline-table"})}),this.applyAdditionalStyles()},ScoreCard.prototype.setGridColors=function(){var e=this;this.getRowAltColors();this.setSelectedRowCSS(),$("#"+e.m_componentid).find(".datagrid-row").hover(function(){$(this).css("background",hex2rgb(convertColorToHex(e.m_rollovercolor),e.m_rowhoveropacity))},function(){e.setSelectedRowCSS()})},ScoreCard.prototype.setSelectedRowCSS=function(){var a=this,o=this.getRowAltColors();$("#"+a.m_componentid).find(".datagrid-btable").each(function(){for(var e=0,t=$(this).children("tbody").children("tr"),i=0,r=t.length;i<r;i++){var s=$(t[i]).attr("node-id");null!=s&&0!=s&&(++e%2==0?$(t[i]).css("background",hex2rgb(convertColorToHex(o[2]),a.m_rowopacity)):$(t[i]).css("background",hex2rgb(convertColorToHex(o[1]),a.m_rowopacity)))}}),setTimeout(function(){$("#"+a.m_componentid).find(".datagrid-row-selected").css("background",hex2rgb(convertColorToHex(a.m_selectedrowcolor),a.m_rowselectedopacity))},1)},ScoreCard.prototype.getRowAltColors=function(){if(null!=this.m_alternaterowscolor){1==(i=this.m_alternaterowscolor.split(",")).length&&i.push(i[0]);for(var e=["#ffffff"],t=0;t<i.length;t++)e.push(convertColorToHex(i[t]));i=e}else{for(var i=this.m_gridcolor.split(","),r=[],t=0;t<i.length;t++)r.push(convertColorToHex(i[t]));1==(i=r).length?(i.push("#ffffff"),i.push("#ffffff")):2==i.length&&i.push(i[1])}return i},ScoreCard.prototype.getShowGradient=function(){return this.m_showgradient},ScoreCard.prototype.isSeriesDataEmpty=function(){""==this.m_seriesData?this.m_isEmptySeries=!0:this.m_isEmptySeries=!1},ScoreCard.prototype.isEmptyField=function(){0==this.m_fieldsJson?this.m_isEmptyField=!0:this.m_isEmptyField=!1},ScoreCard.prototype.isVisibleField=function(){if(this.m_isVisibleField=!0,IsBoolean(this.fieldNameArr))for(var e=0;e<this.fieldNameArr.length;e++)IsBoolean(this.m_seriesVisibleArr[this.fieldNameArr[e]])&&(this.m_isVisibleField=!1)},ScoreCard.prototype.IsDrawingPossible=function(){return IsBoolean(this.m_isEmptyField)?{permission:"false",message:this.m_status.noData}:IsBoolean(this.m_isVisibleField)?{permission:"false",message:this.m_status.noField}:{permission:"true",message:this.m_status.success}},ScoreCard.prototype.getCategoryNames=function(){return this.getDataSet().getFieldbyCategory()},ScoreCard.prototype.getSeriesNames=function(){return this.getDataSet().getFieldbySeries()},ScoreCard.prototype.getStartValueNames=function(){return this.getDataSet().getFieldByStartValue()},ScoreCard.prototype.getDataSet=function(){return this.m_dataSet},ScoreCard.prototype.setDataSet=function(e){this.m_dataSet=e},ScoreCard.prototype.getEndValueNames=function(){return this.getDataSet().getFieldByEndValue()},ScoreCard.prototype.initializeData=function(){this.createDataObject(),this.m_dataStore.initialize()},ScoreCard.prototype.createDataObject=function(){"offline"===this.m_dashboard.getDataProviders().getDataURL()[0].getType()?this.m_dataStore=new NividhOffLineData(this):this.m_dataStore=new NividhOnLineData(this)},ScoreCard.prototype.getConnectionDetails=function(){var e=this.getDataSet().getDataSource();return this.m_dashboard.getManageConObj().getConnectionMap()[e]},ScoreCard.prototype.notify=function(e){this.m_dataStore.getData(e)},ScoreCard.prototype.setSummaryCollection=function(e){this.m_summarycollection=e},ScoreCard.prototype.setAlerts=function(e){this.m_alerts=e},ScoreCard.prototype.setValue=function(e){this.m_value=e},ScoreCard.prototype.setTitleWindow=function(e){this.m_titlewindow=e},ScoreCard.prototype.setSubTitle=function(e){this.m_subTitle=e},ScoreCard.prototype.setAlertColor=function(e){this.m_alertcolor.push(e)},ScoreCard.prototype.setPercentValue=function(e){this.m_percentvalue.push(e)},ScoreCard.prototype.setCompareIndex=function(e){this.m_compareindex.push(e)},ScoreCard.prototype.getfieldsObj=function(){return this.m_fieldsObj},ScoreCard.prototype.getXMLData=function(){var e=this.getDataSet().getDataSource();return this.m_dashboard.getXMLData(e)},ScoreCard.prototype.getGlobalKey=function(){return this.m_globalkey},ScoreCard.prototype.drawExportToExcel=function(){if(IsBoolean(this.m_isDataSetavailable)){for(var e=this.getDataSet().getFieldsByDisplayName(),t="",i=0,r=e.length;i<r;i++)t=t+e[i]+"\t";t+="\r\n";for(var s=0,a=this.m_seriesData.length;s<a;s++){for(var o=0,l=this.m_seriesData[s].length;o<l;o++)t=t+this.m_seriesData[s][o]+"\t";t+="\r\n"}var h=document.createElement("a");h.setAttribute("id","anchor"),(h=document.body.appendChild(h)).download=this.m_objectname+"_ExcelExport.xls",h.href="data:application/...,"+encodeURIComponent(t),h.click()}},ScoreCard.prototype.getTitle=function(){return this.m_title1},ScoreCard.prototype.getToolTipData=function(e,t){return[]},ScoreCard.prototype.drawAlertImages=function(e,t,i,r,s){if("[object Array]"===Object.prototype.toString.call(i)&&0==i.length)return i;var a,o,l,h=this,n=i,d=(IsBoolean(this.m_isFixedLabelArr[e])||"none"==this.m_formatterArr[e]||""==this.m_formatterArr[e]||(n=this.FormatCellValue(e,t,i,r)),this.m_tooltipColumnsArr[e]),m="";if(0<this.m_TooltipFieldsArr[e].length&&(m=this.getCustomTooltipData({colName:e,row:r,tooltipValue:n},r)),"Range"==h.getAlertObj()[this.getStringARSC(e)].m_mode)return null==i?"":"none"!=this.m_fieldaggregation[e]||null==r.children?this.getAlertObj()[this.getStringARSC(e)].drawDynamicAlert(e,t,i,r,s,n,d,m):void 0;for(a in r)if(a==this.getStringARSC(e)&&i==r[a]&&null!=h.getAlertObj()[a])return(l="")!=(o=h.getAlertObj()[a].m_comparecolumn)&&null!=o&&(l=r[this.getStringARSC(o)]),"name"==a&&IsBoolean(this.m_gridcustomtooltip)?h.getAlertObj()[a].drawAlerts(l,i,h,a,"",n,t,!1,m):h.getAlertObj()[a].drawAlerts(l,i,h,a,"",n,t,d,m)},ScoreCard.prototype.FormatCellValue=function(e,t,i,r){for(var s in r)if(i==r[s]&&s==this.getStringARSC(e))return""===i||"NIL"==i||"null"==i||"count"==this.m_fieldaggregation[e]?i:this.getFormattedCellValue(i,e,t)},ScoreCard.prototype.getFormattedCellValue=function(e,t,i){var r,s,a,o,l,h,n,d,m,g,c;return isNaN(getNumericComparableValue(e))?e:(r=0<(""+e).indexOf(","),s=this.m_formatterArr[t],c=this.m_unitNameArr[t],n=+e,a=""!=this.m_signPositioneArr[t]?this.m_signPositioneArr[t]:"suffix",o=this.m_precisionArr[t],l=this.m_secondFormatterArr[t],h=this.m_secondUnitNameArr[t],n="default"===o?+getNumericComparableValue(e):(+getNumericComparableValue(e)).toFixed(o),""!=c?(d=this.m_util.getFormatterSymbol(s,c),"auto"==(m="none"==l||""==l?"":this.m_util.getFormatterSymbol(l,h))?(e=getNumericComparableValue(e),g=getNumberFormattedSymbol(+e,c),c=getNumberFormattedNumericValue(+e,o,c),c=this.m_util.updateTextWithFormatter(c,"",o),n=this.m_util.addFormatter(c,g,"suffix")):("Number"!=s&&"Number"!=l||(n=this.m_util.updateTextWithFormatter(n,"Number"==s?d:m,o)),"none"!=l&&""!=h&&(n=this.m_util.addFormatter(n,m,"suffix"))),"NaN"==(n=getFormattedNumberWithCommas(n,this.m_numberFormatColumnsArr[t]))||""==n?"":this.m_util.addFormatter(IsBoolean(r)?getNumberWithCommas(n):n,d,a)):"NaN"==n?e:n)},ScoreCard.prototype.getToolTip=function(e){$("#draggableDiv"+this.m_objectid).css("z-index");$("#toolTipDiv").remove()},ScoreCard.prototype.setTreeGridWithPivotingData=function(){this.m_gridheaderNames=this.m_dynamicHeaderName;for(var e=this.getIdField(),t=this.m_fixedfield,i={},r=0;r<this.m_seriesData.length;r++)if(""!=this.m_seriesData[r][t]){if(null==i[this.m_seriesData[r][e]])for(var s in i[this.m_seriesData[r][e]]={},this.m_seriesData[r])s!=this.getParentField()&&s!=e&&s!=t&&s!=this.getTreeField()?i[this.m_seriesData[r][e]][s+"MAUKA"+this.m_seriesData[r][t]]=this.m_seriesData[r][s]:i[this.m_seriesData[r][e]][s]=this.m_seriesData[r][s];for(var a=0;a<this.m_seriesData.length;a++)if(this.m_seriesData[a][e]==this.m_seriesData[r][e]&&r!=a)for(var o in this.m_seriesData[a])for(var l=0;l<this.m_gridheaderNames.length;l++)this.m_gridheaderNames[l]==o&&(i[this.m_seriesData[r][e]][o+"MAUKA"+this.m_seriesData[a][t]]=this.m_seriesData[a][o])}return i},ScoreCard.prototype.getTreeData=function(e){var t,i=[];for(t in e){var r={};for(s in e[t]){var s,a=s;(s=s.replace("/","-"))==this.getParentField()?r._parentId=Number(e[t][a]):r[s]=e[t][a]}i.push(r)}this.m_finalData=i;var o=JSON.stringify(i);return JSON.parse('{"rows":'+o+"}")},ScoreCard.prototype.getColumnHeadsWithPivoting=function(e){var t,i=this.m_dynamicHeaderName,r=this.m_dynamicHeaderDisplayName,s=[],a=[],o={},l=(this.m_gridheaderNames=[],this.m_gridheaderDisplayNames=[],this.m_gridheaderNames=[],this.m_gridheaderDisplayNames=[],this.m_gridheaderNames.push(this.getTreeField()),this.m_gridheaderDisplayNames.push(this.m_treefieldDisplayName),this.m_gridHeaderWidthArr=[120],[]);for(t in e)for(var h in e[t])l.push(h);for(var n=l.filter(function(e,t,i){return t==i.indexOf(e)}),d=0;d<i.length;d++){var m=0;if(IsBoolean(this.m_visibleArr[i[d]])){this.m_gridheaderNames.push(i[d]),this.m_gridheaderDisplayNames.push(r[d]),this.m_gridHeaderWidthArr.push(this.m_widthArr[i[d]]);for(var g=0;g<n.length;g++)-1!=n[g].indexOf(i[d])&&(m++,this.m_gridheaderNames.push(n[g]),this.m_gridheaderDisplayNames.push(n[g]),this.m_gridHeaderWidthArr.push(this.m_widthArr[i[d]]));o[i[d]]=m}}for(var c=0;c<this.m_gridheaderNames.length;c++){var p,_=this.m_gridheaderNames[c].replace("/","-");p=-1!=this.m_gridheaderNames[c].indexOf("MAUKA")?this.m_gridheaderDisplayNames[c].split("MAUKA")[1]:this.m_gridheaderDisplayNames[c],this.m_width,this.m_gridheaderNames.length;0==c?s.push({field:this.m_gridheaderNames[c],rowspan:2,title:p,halign:"center",width:120,align:"center",sortable:!0}):this.isInit(i,this.m_gridheaderNames[c])?s.push({colspan:o[this.m_gridheaderNames[c]],title:p,halign:"center"}):a.push({field:_,title:p,halign:"center",width:this.m_gridHeaderWidthArr[c],align:"center",sortable:!0}),"none"==this.m_hierarchyTypeArr[c]&&(a.push({sorter:function(e,t){return temp.sortStringCaseSensitive(e,t)}}),s.push({sorter:function(e,t){return temp.sortStringCaseSensitive(e,t)}}))}return[s,a]},ScoreCard.prototype.sortStringCaseSensitive=function(e,t){return null==e&&null==t?0:null==e?-1:null==t?1:(Array.isArray(e)&&(e=e[0]),Array.isArray(t)&&(t=t[0]),(e="string"==typeof e?e.toLowerCase():e)<(t="string"==typeof t?t.toLowerCase():t)?-1:t<e?1:0)},ScoreCard.prototype.isInit=function(e,t){for(var i=!1,r=0;r<e.length&&!i;r++)e[r]===t&&(i=!0);return i},ScoreCard.prototype.getParentField=function(){for(var e="",t=0;t<this.fieldsData.length;t++)"parent"==this.m_typeArr[this.fieldsData[t].Name]&&(e=this.fieldsData[t].Name);return e},ScoreCard.prototype.setDynamicHeader=function(){this.m_dynamicHeaderName=[],this.m_dynamicHeaderDisplayName=[];for(var e=0,t=0;t<this.m_gridFieldNames.length;t++)"none"==this.m_hierarchyTypeArr[t].toLowerCase()&&(0<e&&(this.m_dynamicHeaderName.push(this.m_gridFieldNames[t]),this.m_dynamicHeaderDisplayName.push(this.m_gridHeaderNames[t])),e++)},ScoreCard.prototype.setFixedField=function(){for(var e=0,t=0,i=this.m_gridFieldNames.length;t<i;t++)if("child"==this.m_hierarchyTypeArr[t].toLowerCase()){if(1==e){this.m_fixedfield=this.m_gridFieldNames[t];break}e++}},ScoreCard.prototype.IsDrawingPossibleOfTreePivot=function(){return this.m_fixedfield&&""!=this.m_fixedfield&&this.m_dynamicHeaderName&&""!=this.getTreeField()?{permission:"true",message:this.m_status.success}:{permission:"false",message:this.m_status.invalidConfig}};
//# sourceMappingURL=TreeGrid.min.js.map