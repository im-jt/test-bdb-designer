/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function ChevronChart(t,e){this.base=Chart,this.base(),this.m_x=400,this.m_y=20,this.m_width=300,this.m_height=200,this.m_barWidth=10,this.m_categoryData=[],this.m_seriesData=[],this.m_chevronSeriesArray=[],this.m_cheveronSeriesColor=[],this.m_xPositionArray=[],this.m_yPositionArray=[],this.m_barWidth="",this.m_barHeightArray=[],this.m_xAxis=new Xaxis,this.m_yAxis=new Yaxis,this.m_calculation=new ChevronCalculation,this.m_differenceDate=[],this.m_startdate=[],this.m_enddate=[],this.m_flag=[],this.m_isInCurrentDate=[],this.m_categoryNames="",this.m_seriesNames="",this.m_chartContainer=t,this.m_zIndex=e,this.m_isValidConfiguration=!1,this.isValidStartEndDate=!0}function ChevronCalculation(){this.m_chart="",this.yAxisData=[],this.xAxisData=[],this.xPositionArray=[],this.yAxisPixelArray=[],this.barGap=10,this.m_xAxisText="",this.m_numberOfMarkers=6,this.m_max=0}function ChevronSeries(){this.xPixel=[],this.yPixelArray=[],this.stackHeightArray=[],this.stackColorArray=[],this.chevronStackArray=[],this.stackDrawFlag=[],this.stackBorderArray=[]}function ChevronStack(){this.startX,this.startY,this.endX,this.endY,this.xIncrease,this.yIncrease,this.stackColor,this.stackWidth,this.ctx,this.m_isChevronInCurrentDate=!1,this.m_currentphasebordercolor}ChevronChart.prototype=new Chart,ChevronChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},ChevronChart.prototype.ParseJsonAttributes=function(t,e){for(var i in this.chartJson=t)if("Chart"==i)for(var s in t[i])switch(s){case"xAxis":for(var a in t[i][s]){var r=this.getNodeAttributeName(a.toLowerCase());e.m_xAxis[r]=t[i][s][a]}break;case"yAxis":for(var h in t[i][s]){var r=this.getNodeAttributeName(h.toLowerCase());e.m_yAxis[r]=t[i][s][h]}break;case"Title":for(var o in t[i][s]){var r=this.getNodeAttributeName(o.toLowerCase());e.m_title[r]=t[i][s][o]}break;case"SubTitle":for(var n in t[i][s]){r=this.getNodeAttributeName(n.toLowerCase());e.m_subTitle[r]=t[i][s][n]}break;default:e[r=this.getNodeAttributeName(s.toLowerCase())]=t[i][s]}else e[r=this.getNodeAttributeName(i.toLowerCase())]=t[i]},ChevronChart.prototype.getDataProvider=function(){return this.m_dataProvider},ChevronChart.prototype.setFields=function(t){this.m_fieldsJson=t;for(var e=[],i=[],s=[],a=[],r={Category:!(this.m_fieldsType=[]),Series:!1,startvalue:!1,endvalue:!1},h=0;h<t.length;h++){var o=this.getProperAttributeNameValue(t[h],"Type");switch(this.m_fieldsType[h]=o){case"Category":e.push(t[h]),r.Category=!!IsBoolean(t[h].visible);break;case"Series":i.push(t[h]),r.Series=!!IsBoolean(t[h].visible);break;case"startvalue":s.push(t[h]),r.startvalue=!!IsBoolean(t[h].visible);break;case"endvalue":a.push(t[h]),r.endvalue=!!IsBoolean(t[h].visible);break;case"CalculatedField":i.push(t[h])}}this.m_visibleMap=r,this.setCategory(e),this.setSeries(i),this.setStartValue(s),this.setEndValue(a),this.setValidConfiguration(e,i,s,a)},ChevronChart.prototype.setValidConfiguration=function(t,e,i,s){0!==t.length&&IsBoolean(this.m_visibleMap.Category)&&0!==e.length&&IsBoolean(this.m_visibleMap.Series)&&0!==i.length&&IsBoolean(this.m_visibleMap.startvalue)&&0!==s.length&&IsBoolean(this.m_visibleMap.endvalue)?this.m_isValidConfiguration=!0:this.m_isValidConfiguration=!1},ChevronChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr=[];for(var e=0;e<1;e++){var i=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allCategoryDisplayNames[e]=i,this.m_allCategoryNames[e]=this.getProperAttributeNameValue(t[e],"Name"),this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),this.m_categoryNames[e]=this.getProperAttributeNameValue(t[e],"Name"),this.m_categoryDisplayNames[e]=i}},ChevronChart.prototype.getCategoryNames=function(){return this.m_categoryNames},ChevronChart.prototype.getSeriesColors=function(){for(var t=this.m_cheveronSeriesColor,e=0;e<t.length;e++)this.m_seriesColors[e]=convertColorToHex(t[e]);return this.m_seriesColors},ChevronChart.prototype.setStartX=function(){var t=this.getBorderToDescriptionMargin(),e=this.getYAxisDescriptionMargin(),i=this.getDescriptionToLabelMargin(),s=this.getLabelToAxisMargin(),a=0;if(0<this.fontScaling(this.m_yAxis.m_labelfontsize)){this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily);for(var a=this.ctx.measureText(this.m_categoryData[0]).width,r=1;r<this.m_categoryData.length;r++)a<this.ctx.measureText(this.m_categoryData[r]).width&&(a=this.ctx.measureText(this.m_categoryData[r]).width);a>this.m_width/4&&(a=this.m_width/4)}this.m_startX=+this.m_x+ +t+ +e+ +i+ +a+ +s},ChevronChart.prototype.setEndY=function(){this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()},ChevronChart.prototype.setStartY=function(){this.m_startY=this.m_y+this.m_height-20},ChevronChart.prototype.setEndX=function(){this.m_endX=this.m_x+this.m_width-20},ChevronChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},ChevronChart.prototype.setSeries=function(t){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors=[],this.m_legendNames=[],this.m_seriesVisibleArr=[],this.m_allSeriesDisplayNames=[],this.m_allSeriesNames=[];for(var e,i=0,s=0;s<t.length;s++)this.m_allSeriesDisplayNames[s]=this.getProperAttributeNameValue(t[s],"DisplayName"),this.m_allSeriesNames[s]=this.getProperAttributeNameValue(t[s],"Name"),this.m_seriesVisibleArr[this.m_allSeriesNames[s]]=this.getProperAttributeNameValue(t[s],"visible"),IsBoolean(this.m_seriesVisibleArr[this.m_allSeriesNames[s]])&&(e=this.formattedDescription(this,this.getProperAttributeNameValue(t[s],"DisplayName")),this.m_seriesDisplayNames[i]=e,this.m_seriesNames[i]=this.getProperAttributeNameValue(t[s],"Name"),this.m_legendNames[i]=e,this.m_seriesColors[i]=convertColorToHex(this.getProperAttributeNameValue(t[s],"Color")),i++)},ChevronChart.prototype.showGridData=function(){var t=[],e=[],i=[],s=[];this.catData=[];for(var a=0;a<this.m_seriesData.length;a++)for(var r=0;r<this.m_seriesData[0].length;r++)s.push(this.m_categoryData[a]),t.push(this.m_seriesData[a][r]),e.push(this.m_startValues[a][r]),i.push(this.m_endValues[a][r]);this.catData=s;for(var h=[],a=0;a<this.m_allfieldsName.length;a++)"Category"==this.m_fieldsType[a]?h[this.m_categoryNames]=s:"Series"==this.m_fieldsType[a]?h[this.m_seriesNames]=t:"endvalue"==this.m_fieldsType[a]?h[this.m_endValueNames]=i:"startvalue"==this.m_fieldsType[a]&&(h[this.m_startValueNames]=e);return h},ChevronChart.prototype.setStartValue=function(t){this.m_startValueDisplayNames=[],this.m_startValueNames=[];for(var e=0;e<1;e++){var i=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_startValueDisplayNames[e]=i,this.m_startValueNames[e]=this.getProperAttributeNameValue(t[e],"Name")}},ChevronChart.prototype.setEndValue=function(t){this.m_endValueDisplayNames=[],this.m_endValueNames=[];for(var e=0;e<1;e++){var i=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_endValueDisplayNames[e]=i,this.m_endValueNames[e]=this.getProperAttributeNameValue(t[e],"Name")}},ChevronChart.prototype.getStartValueNames=function(){return this.m_startValueNames},ChevronChart.prototype.getEndValueNames=function(){return this.m_endValueNames},ChevronChart.prototype.getSeriesNames=function(){return this.m_seriesNames},ChevronChart.prototype.getAllCategoryNames=function(){return this.m_allCategoryNames},ChevronChart.prototype.getAllSeriesNames=function(){return this.m_allSeriesNames},ChevronChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},ChevronChart.prototype.setCategoryData=function(){var t=[];if(this.m_categoryData=[],this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var e=0;e<this.getCategoryNames().length;e++)t[e]=this.getDataFromJSON(this.getCategoryNames()[e]);this.m_categoryData=this.unique(t)}},ChevronChart.prototype.getCategoryData=function(){return this.m_categoryData},ChevronChart.prototype.setSeriesData=function(){this.m_seriesData=[];for(var t=0;t<this.getCategoryData().length;t++)for(var e=0;e<this.getSeriesNames().length;e++)this.m_seriesData[t]=this.getARSCDataFromJSON(this.getSeriesNames()[e],this.getCategoryNames()[0],this.getCategoryData()[t])},ChevronChart.prototype.getSeriesData=function(){return this.m_seriesData},ChevronChart.prototype.setStartValues=function(){this.m_startValues=[];for(var t=0;t<this.getCategoryData().length;t++)for(var e=0;e<this.getStartValueNames().length;e++){for(var i=this.getARSCDataFromJSON(this.getStartValueNames()[e],this.getCategoryNames()[0],this.getCategoryData()[t]),s=[],a=0;a<i.length;a++){if(""===this.getFormatedDate(i[a])){this.isValidStartEndDate=!1;break}s[a]=this.getFormatedDate(i[a])}this.m_startValues[t]=s}},ChevronChart.prototype.getStartValues=function(){return this.m_startValues},ChevronChart.prototype.setEndValues=function(){this.m_endValues=[];for(var t=0;t<this.getCategoryData().length;t++)for(var e=0;e<this.getEndValueNames().length;e++){for(var i=this.getARSCDataFromJSON(this.getEndValueNames()[e],this.getCategoryNames()[0],this.getCategoryData()[t]),s=[],a=0;a<i.length;a++){if(""===this.getFormatedDate(i[a])){this.isValidStartEndDate=!1;break}s[a]=this.getFormatedDate(i[a])}this.m_endValues[t]=s}},ChevronChart.prototype.getEndValues=function(){return this.m_endValues},ChevronChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0;t<this.getAllCategoryNames().length;t++)this.m_allfieldsName.push(this.getAllCategoryNames()[t]);for(var e=0;e<this.getAllSeriesNames().length;e++)this.m_allfieldsName.push(this.getAllSeriesNames()[e]);for(e=0;e<this.getStartValueNames().length;e++)this.m_allfieldsName.push(this.getStartValueNames()[e]);for(e=0;e<this.getEndValueNames().length;e++)this.m_allfieldsName.push(this.getEndValueNames()[e])},ChevronChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},ChevronChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var t=0;t<this.getCategoryDisplayNames().length;t++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[t]);for(var e=0;e<this.getSeriesDisplayNames().length;e++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[e]);for(e=0;e<this.getSeriesDisplayNames().length;e++)this.m_allfieldsDisplayName.push(this.getStartValueNames()[e]);for(e=0;e<this.getSeriesDisplayNames().length;e++)this.m_allfieldsDisplayName.push(this.getEndValueNames()[e])},ChevronChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},ChevronChart.prototype.getLegendNames=function(){var t="";return t=0!==this.m_seriesData.length?this.unique(this.m_seriesData):t},ChevronChart.prototype.getARSCDataFromJSON=function(t,e,i){for(var s=[],a=0;a<this.getDataProvider().length;a++)(""+this.getDataProvider()[a][e]).replace(/ /g,"")==(""+i).replace(/ /g,"")&&s.push(this.getDataProvider()[a][t]);return s},ChevronChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},ChevronChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEvent()},ChevronChart.prototype.init=function(){IsBoolean(this.m_isValidConfiguration)&&(this.setCategoryData(),this.setSeriesData(),this.setStartValues(),this.setEndValues()),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.isSeriesDataEmpty(),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),!IsBoolean(this.m_isEmptySeries)&&IsBoolean(this.isValidStartEndDate)&&(this.initializeCalculation(),this.m_yAxis.init(this,this.m_calculation),this.setMapForLegend()),this.initializeToolTipProperty(),this.m_tooltip.init(this)},ChevronChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.drawLegends();var t=this.IsDrawingPossible();IsBoolean(t.permission)?(this.drawYAxis(),this.drawChevronChart()):this.drawMessage(t.message)},ChevronChart.prototype.IsDrawingPossible=function(){return IsBoolean(this.isEmptyCategory)?{permission:"false",message:this.m_status.noCategory}:IsBoolean(this.m_isEmptySeries)?{permission:"false",message:this.m_status.noData}:IsBoolean(this.isVisibleSeries())?IsBoolean(this.m_isValidConfiguration)?IsBoolean(this.isValidStartEndDate)?{permission:"true",message:this.m_status.success}:{permission:"false",message:this.m_status.invalidDate}:{permission:"false",message:this.m_status.invalidConfig}:{permission:"false",message:this.m_status.noSeries}},ChevronChart.prototype.initializeCalculation=function(){this.setChartDrawingArea(),this.setStartEndDate(),this.m_cheveronSeriesColor=this.getSeriesColor().split(","),this.m_calculation.init(this,this.m_categoryData,this.m_differenceDate,this),this.m_xPositionArray=this.m_calculation.getXPositionArray(),this.m_yPositionArray=this.m_calculation.getYPositionArray(),this.m_barWidth=this.m_calculation.getbarWidth(),this.m_barGap=this.m_calculation.getBarGap(),this.m_barHeightArray=this.m_calculation.getstackHeightArray(),this.initializeChevrons()},ChevronChart.prototype.setMapForLegend=function(){this.legendMap={};for(var t=0;t<this.getLegendNames().length;t++){var e={seriesName:this.getLegendNames()[t],color:this.m_cheveronSeriesColor[t],shape:"chevron",index:t};this.legendMap[this.getLegendNames()[t]]=e}},ChevronChart.prototype.drawTitle=function(){this.m_title.draw()},ChevronChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},ChevronChart.prototype.drawXAxis=function(){this.m_xAxis.drawXAxis(),this.m_xAxis.markXaxis()},ChevronChart.prototype.drawYAxis=function(){this.m_yAxis.markYaxis(),this.m_yAxis.drawYAxis()},ChevronChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},ChevronChart.prototype.getFullYear=function(t){return 50<+t?"19"+t:"20"+t},ChevronChart.prototype.getFormatedDate=function(t){if(null==t)return"";var e,i=this.m_sourcedateformat,s="";switch(i=this.m_designMode?"mm/dd/yyyy":i){case"dd-mm-yy":3==(e=(""+t).split("-")).length&&(s=e[1]+"/"+e[0]+"/"+this.getFullYear(e[2]));break;case"mm-dd-yy":3==(e=(""+t).split("-")).length&&(s=e[0]+"/"+e[1]+"/"+this.getFullYear(e[2]));break;case"dd-mm-yyyy":3==(e=(""+t).split("-")).length&&(s=e[1]+"/"+e[0]+"/"+e[2]);break;case"mm-dd-yyyy":3==(e=(""+t).split("-")).length&&(s=e[0]+"/"+e[1]+"/"+e[2]);break;case"yyyy-mm-dd":3==(e=(""+t).split("-")).length&&(s=e[1]+"/"+e[2]+"/"+e[0]);break;case"dd/mm/yy":3==(e=(""+t).split("/")).length&&(s=e[1]+"/"+e[0]+"/"+this.getFullYear(e[2]));break;case"mm/dd/yy":3==(e=(""+t).split("/")).length&&(s=e[0]+"/"+e[1]+"/"+this.getFullYear(e[2]));break;case"dd/mm/yyyy":3==(e=(""+t).split("/")).length&&(s=e[1]+"/"+e[0]+"/"+e[2]);break;case"mm/dd/yyyy":3==(e=(""+t).split("/")).length&&(s=e[0]+"/"+e[1]+"/"+(+e[2]<=99?this.getFullYear(e[2]):e[2]));break;default:s=""}return+s.split("/")[0]<=12&&+s.split("/")[1]<=31&&1700<=+s.split("/")[2]?s:""},ChevronChart.prototype.setStartEndDate=function(){for(var t=0;t<this.m_startValues.length;t++){this.m_differenceDate[t]=[],this.m_startdate[t]=[],this.m_enddate[t]=[],this.m_flag[t]=[],this.m_isInCurrentDate[t]=[];for(var e=0;e<this.m_startValues[t].length;e++){var i=new XDate(this.m_startValues[t][e]),s=new XDate(this.m_endValues[t][e]),a=i.diffDays(s),r=new Date,r=+r.getMonth()+1+"/"+r.getDate()+"/"+(r.getYear()-100),r=new XDate(r);isNaN(a)||a<0?(this.m_differenceDate[t][e]=0,this.m_flag[t][e]=!1,this.m_isInCurrentDate[t][e]=!1):(this.m_differenceDate[t][e]=+a+20,this.m_flag[t][e]=!0,this.m_isInCurrentDate[t][e]=i<=r&&r<=s),null!=this.m_startValues[t][e]&&(this.m_startdate[t][e]=this.m_startValues[t][e].substring(0,10)),null!=this.m_endValues[t][e]&&(this.m_enddate[t][e]=this.m_endValues[t][e].substring(0,10))}}},ChevronChart.prototype.initializeChevrons=function(){for(var t=0;t<this.m_xPositionArray.length;t++)this.m_chevronSeriesArray[t]=new ChevronSeries,this.m_chevronSeriesArray[t].init(this.m_xPositionArray[t],this.m_yPositionArray[t],this.m_barWidth,this.m_barHeightArray[t],this.m_cheveronSeriesColor,this.m_flag[t],this.m_isInCurrentDate[t],this)},ChevronChart.prototype.drawChevronChart=function(){for(var t=0;t<this.getCategoryData().length;t++)this.m_chevronSeriesArray[t].draw()},ChevronChart.prototype.getToolTipData=function(t,e){var i=this.IsDrawingPossible();if(IsBoolean(i.permission)&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType)){var s,a=this.m_startdate,r=this.m_enddate;this.m_barWidth,this.m_yPositionArray.length;if(t>=this.getStartX()&&t<=this.getEndX()&&e<=this.getStartY()&&e>=this.getEndY()){for(var h=0;h<this.m_yPositionArray.length;h++)if(e<=+this.m_yPositionArray[h][0]+ +this.m_barWidth&&e>=+this.m_yPositionArray[h][0]){(s={cat:""}).data=new Array,s.cat=this.getCategoryData()[h];for(var o=0;o<this.getSeriesData()[h].length;o++){var n=[];n[0]={color:this.getSeriesColors()[o],shape:this.legendMap[this.getLegendNames()[o]].shape},n[1]=this.getSeriesData()[h][o],n[2]=a[h][o],n[3]=r[h][o],s.highlightIndex=this.getDrillColor(t,e),s.data[o]=n}break}}else this.hideToolTip();return s}},ChevronChart.prototype.getDrillColor=function(t,e){if(t>=this.getStartX()&&t<=this.getEndX()&&e<=this.getStartY()&&e>=this.getEndY())for(var i=0;i<this.m_yPositionArray.length;i++)if(e<=+this.m_yPositionArray[i][0]+ +this.m_barWidth&&e>=+this.m_yPositionArray[i][0])for(var s=0;s<this.m_xPositionArray[i].length;s++)if(t>=+this.m_xPositionArray[i][s]&&t<=+this.m_xPositionArray[i][s]+ +this.m_barHeightArray[i][s])return s},ChevronChart.prototype.getFormatDate=function(t,e){for(var i=[],s=null,a=0;a<e.length;a++){if("/"==e[a]){s=1;break}if("-"==e[a]){s=2;break}if(" "==e[a]){s=3;break}}return i=1==s?e.split("/"):2==s?e.split("-"):e.split(" "),this.getConvertedDateFormatString(t,i,s)},ChevronChart.prototype.getConvertedDateFormatString=function(t,e,i){for(var s=[],a=null,r=0;r<e.length;r++)s[r]=this.getConvertFormatArray(t,e[r]);return 1==i&&(a=s[0]+"/"+s[1]+"/"+s[2]),2==i&&(a=s[0]+"-"+s[1]+"-"+s[2]),a=3==i?s[0]+" "+s[1]+" "+s[2]:a},ChevronChart.prototype.getConvertFormatArray=function(t,e){var i;return"mm"==e?10<=(i=t.getMonth()+1)?i:"0"+i:"dd"==e?10<=(i=t.getDate())?i:"0"+i:"yyyy"==e||"yy"==e?t.getFullYear():void 0},ChevronChart.prototype.unique=function(t){for(var e=[],i=0;i<t[0].length;i++)-1==$.inArray(t[0][i],e)&&e.push(t[0][i]);return e},ChevronChart.prototype.getDrillDataPoints=function(t,e){if(!IsBoolean(this.m_isEmptySeries)&&(this.mouseX=t,this.mouseY=e,t>=this.getStartX())&&t<=this.getEndX()&&e<=this.getStartY()&&e>=this.getEndY())for(var i=0;i<this.m_xPositionArray.length;i++)for(var s=0;s<this.m_xPositionArray[i].length;s++)if(t<=+this.m_xPositionArray[i][s]+ +this.m_barHeightArray[i][s]&&t>=+this.m_xPositionArray[i][s]&&e<=+this.m_yPositionArray[i][s]+ +this.m_barWidth&&e>=+this.m_yPositionArray[i][s])return{drillRecord:this.getFieldNameValueMap(this.getCategoryData()[i],s),drillColor:this.getSeriesColors()[s]}},ChevronChart.prototype.getFieldNameValueMap=function(t,e){for(var i=new Object,s=[],a=0;a<this.getDataProvider().length;a++)for(var r in this.getDataProvider()[a])this.getDataProvider()[a][r]==t&&s.push(this.getDataProvider()[a]);for(var h=0;h<this.getAllFieldsName().length;h++)i[this.getAllFieldsName()[h]]=s[e][this.getAllFieldsName()[h]];return i},ChevronCalculation.prototype.init=function(t,e,i,s){this.globalCalculation=t,this.yAxisData=e,this.xAxisData=i,this.m_chart=s,this.barGap=10,this.startX=this.globalCalculation.getStartX(),this.startY=this.globalCalculation.getStartY(),this.endX=this.globalCalculation.getEndX(),this.endY=this.globalCalculation.getEndY(),this.calculateBarWidth(),this.calculateMaxValue(),this.setXAxisMarkersArray()},ChevronCalculation.prototype.calculateBarWidth=function(){var t=this.yAxisData.length,e=(+t+1)*this.barGap,e=(+this.getDrawHeight()-e)/t;40<e?(this.setBarWidth(40),this.setColumnGap(40)):e<9?(this.setBarWidth(7),this.setColumnGap(7)):this.setBarWidth(e)},ChevronCalculation.prototype.setBarWidth=function(t){this.barWidth=t},ChevronCalculation.prototype.setColumnGap=function(t){t*=this.yAxisData.length,t=this.getDrawHeight()-t;this.barGap=t/(+this.yAxisData.length+1)},ChevronCalculation.prototype.calculateMaxValue=function(){var t=this.xAxisData;if(0<t.length){this.m_max=+t[0][0];for(var e,i=0;i<t.length;i++){for(var s=0,a=0;a<t[i].length;a++)null!=t[i][a]&&(s=+s+ +t[i][a]);s>this.m_max&&(this.m_max=s)}5<this.m_max?(e=getMax(this.m_max),this.m_numberOfMarkers=+e[1]+1,this.m_xAxisText=e[2],this.m_max=e[0]):this.setYAxisText()}},ChevronCalculation.prototype.setYAxisText=function(){var t;this.m_numberOfMarkers=5,this.percentileValue=0,this.m_xAxisText=this.getMaxValue()/4,1<this.max&&this.max<=5?(this.percentileValue=this.m_xAxisText%2,2!==this.percentileValue&&(this.percentileValue=2-this.percentileValue),this.m_xAxisText=+this.m_xAxisText+ +this.percentileValue,this.max=this.m_xAxisText*this.m_numberOfMarkers):(t=Math.ceil(100*this.m_xAxisText),this.m_xAxisText=(t/100).toFixed(2),this.max=4*this.m_xAxisText)},ChevronCalculation.prototype.getXAxisText=function(){return this.m_xAxisText},ChevronCalculation.prototype.getMaxValue=function(){return this.m_max},ChevronCalculation.prototype.getXAxisMarkersArray=function(){return this.m_xAxisMarkersArray},ChevronCalculation.prototype.setXAxisMarkersArray=function(){this.m_xAxisMarkersArray=[];for(var t=0;t<this.m_numberOfMarkers;t++)this.m_xAxisMarkersArray[t]=this.getXAxisText()*t},ChevronCalculation.prototype.getDrawHeight=function(){return this.drawHeight=this.startY-this.endY,this.drawHeight},ChevronCalculation.prototype.getDrawWidth=function(){return this.drawWidth=+this.endX-+this.startX,this.drawWidth},ChevronCalculation.prototype.getRatio=function(){return this.ratio=this.getDrawWidth()/this.getMaxValue(),this.ratio},ChevronCalculation.prototype.getBarGap=function(){return this.barGap},ChevronCalculation.prototype.getbarWidth=function(){return this.barWidth},ChevronCalculation.prototype.getXPositionArray=function(){var t=[];this.stackHeightArray=[];for(var e=0;e<this.xAxisData.length;e++){t[e]=[],this.stackHeightArray[e]=[];for(var i=0;i<this.xAxisData[e].length;i++)t[e][i]=0==i?+this.startX:+t[e][i-1]+this.getRatio()*this.xAxisData[e][i-1]*1,this.stackHeightArray[e][i]=+this.xAxisData[e][i]*this.getRatio()}return t},ChevronCalculation.prototype.getYPositionArray=function(){for(var t=[],e=0;e<this.xAxisData.length;e++){t[e]=[];for(var i=0;i<this.xAxisData[e].length;i++)t[e][i]=this.startY-this.getBarGap()*(+e+1)-this.getbarWidth()*(+e+1)}return t},ChevronCalculation.prototype.getstackHeightArray=function(){return this.stackHeightArray},ChevronCalculation.prototype.getYAxisText=function(){return this.yAxisData},ChevronCalculation.prototype.getYAxisMarkersArray=function(){return this.yAxisData},ChevronSeries.prototype.init=function(t,e,i,s,a,r,h,o){this.xPixel=t,this.yPixelArray=e,this.stackWidth=i,this.stackHeightArray=s,this.stackColorArray=this.setChevronSeriesColor(a),this.stackDrawFlag=r,this.stackBorderArray=h;for(var n=0;n<this.xPixel.length;n++)this.chevronStackArray[n]=new ChevronStack,this.chevronStackArray[n].init(this.xPixel[n],this.yPixelArray[n],this.stackWidth,this.stackHeightArray[n],this.stackColorArray[n],this.stackDrawFlag[n],this.stackBorderArray[n],o)},ChevronSeries.prototype.setChevronSeriesColor=function(t){var e=t;if(t.length<this.xPixel.length)for(var i=0;i<this.xPixel.length;i++)null==t[i]?e[i]="000":e[i]=t[i];return e},ChevronSeries.prototype.draw=function(){for(var t=0;t<this.xPixel.length;t++)this.chevronStackArray[t].draw()},ChevronStack.prototype.init=function(t,e,i,s,a,r,h,o){this.stackWidth=i,this.m_chartbase=o.m_chartbase,this.ctx=o.ctx,this.stackHeight=s,this.startX=t,this.startY=e,this.endX=+this.startX+ +s-5,this.endY=+this.startY+ +i,this.xIncrease=i/2,this.yIncrease=i/2,this.m_isChevronInCurrentDate=h,this.m_currentphasebordercolor=o.m_currentphasebordercolor,this.stackColor=convertColorToHex(a),this.flag=r},ChevronStack.prototype.draw=function(){IsBoolean(isNaN(this.stackHeight))||IsBoolean(this.flag)&&(this.ctx.beginPath(),this.ctx.fillStyle=this.getFillColor(),this.ctx.moveTo(this.startX,this.startY),this.ctx.lineTo(this.endX,this.startY),this.ctx.lineTo(+this.endX+ +this.xIncrease,this.endY-this.yIncrease),this.ctx.lineTo(this.endX,this.endY),this.ctx.lineTo(this.startX,this.endY),this.ctx.lineTo(+this.startX+ +this.xIncrease,+this.startY+ +this.yIncrease),this.ctx.lineTo(this.startX,this.startY),this.ctx.fill(),this.ctx.closePath(),this.drawBorderOnChevron())},ChevronStack.prototype.drawBorderOnChevron=function(){this.m_isChevronInCurrentDate&&(this.ctx.beginPath(),this.ctx.strokeStyle=this.m_currentphasebordercolor,this.ctx.lineWidth=.75,this.ctx.moveTo(this.startX-1,this.startY),this.ctx.lineTo(this.endX-1,this.startY),this.ctx.lineTo(+this.endX-1+ +this.xIncrease,this.endY-this.yIncrease),this.ctx.lineTo(this.endX-1,this.endY),this.ctx.lineTo(this.startX-1,this.endY),this.ctx.lineTo(+this.startX-1+ +this.xIncrease,+this.startY+ +this.yIncrease),this.ctx.lineTo(this.startX-1,this.startY),this.ctx.stroke(),this.ctx.closePath())},ChevronStack.prototype.getFillColor=function(){var t=this.stackColor;return"plane"==this.m_chartbase?t=this.createGradient3():"gradient1"==this.m_chartbase?t=this.createGradient1():"gradient2"==this.m_chartbase?t=this.createGradient2():"gradient3"==this.m_chartbase&&(t=this.createGradient3()),t},ChevronStack.prototype.createGradient1=function(){var t=this.ctx.createLinearGradient(this.startX,this.startY,+this.startX+this.endX,this.startY),e=this.hex2rgb(this.stackColor,.65),i=this.hex2rgb(this.stackColor,.85);return t.addColorStop(0,e),t.addColorStop(.5,i),t.addColorStop(.7,this.stackColor),t.addColorStop(1,this.stackColor),t},ChevronStack.prototype.createGradient2=function(){var t=this.ctx.createLinearGradient(this.startX,this.startY,this.startX,+this.startY+ +this.stackWidth),e=this.hex2rgb(this.stackColor,.7),i=this.hex2rgb(this.stackColor,.25);return t.addColorStop(0,this.stackColor),t.addColorStop(.1,e),t.addColorStop(.49,this.stackColor),t.addColorStop(.5,"#000"),t.addColorStop(.51,this.stackColor),t.addColorStop(.99,i),t.addColorStop(1,this.stackColor),t},ChevronStack.prototype.createGradient3=function(){var t=this.ctx.createLinearGradient(this.startX,this.startY,this.startX,+this.startY+2*this.yIncrease),e=this.hex2rgb(this.stackColor,.85),i=this.hex2rgb(this.stackColor,.95);return t.addColorStop(0,this.stackColor),t.addColorStop(.25,this.stackColor),t.addColorStop(.45,e),t.addColorStop(.65,i),t.addColorStop(.85,this.stackColor),t.addColorStop(1,this.stackColor),t},ChevronStack.prototype.hex2rgb=function(t,e){for(var i=t.replace("#","").match(/(.{2})/g),s=3;s--;)i[s]=parseInt(i[s],16);return void 0===e?"rgb("+i.join(", ")+")":"rgba("+i.join(", ")+", "+e+")"},ChevronChart.prototype.getLegendShape=function(t){return this.legendMap[this.getLegendNames()[t]].shape};
//# sourceMappingURL=ChevronChart.min.js.map