/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function WidgetChart(t,e){this.base=Chart,this.base(),this.m_chartContainer=t,this.m_zIndex=e,this.m_jspaths=[],this.m_csspaths=[],this.m_htmlcontent='<div class="statusMessage"><p>Data not available !</p></div>',this.m_csscontent="body{margin: 0px; font-family: Roboto} .statusMessage p{ color: #EF6C00; font-size: 12px; margin: 0; position: absolute; top: 50%; left: 50%; margin-right: -50%; transform: translate(-50%, -50%); }",this.m_jscontent="",this.m_frame=""}WidgetChart.prototype=new Chart,WidgetChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},WidgetChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},WidgetChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext()},WidgetChart.prototype.ParseJsonAttributes=function(t,e){for(var i in this.chartJson=t)if("Chart"==i)for(var a in t[i])switch(a){case"Title":for(var r in t[i][a]){var s=this.getNodeAttributeName(r);e.m_title[s]=t[i][a][r]}break;case"SubTitle":for(var n in t[i][a]){var s=this.getNodeAttributeName(n);e.m_subTitle[s]=t[i][a][n]}break;default:e[s=this.getNodeAttributeName(a)]=t[i][a]}else e[s=this.getNodeAttributeName(i)]=t[i]},WidgetChart.prototype.setFields=function(t){try{t=getDuplicateArray(t)}catch(t){}for(var e=[],i=(this.m_fieldsJson=t).length,a=0;a<i;a++)switch(this.getProperAttributeNameValue(t[a],"Type")){case"Series":case"CalculatedField":e.push(t[a])}this.setSeries(e)},WidgetChart.prototype.setSeries=function(t){this.m_seriesNames=[],this.m_seriesDisplayNames=[];for(var e=0,i=t.length,a=0;a<i;a++){this.m_seriesNames[e]=this.getProperAttributeNameValue(t[a],"Name");var r=this.formattedDescription(this,this.getProperAttributeNameValue(t[a],"DisplayName"));this.m_seriesDisplayNames[e]=r,e++}},WidgetChart.prototype.getFields=function(){return this.m_fieldsJson},WidgetChart.prototype.getDataProvider=function(){return this.m_dataProvider},WidgetChart.prototype.eventCallBack=function(t,e,i){"mousemove"!=t.type&&"mouseout"!=t.type&&"click"==t.type&&this.updateDataPointsToGV({drillRecord:e,drillColor:""})},WidgetChart.prototype.getSeriesNames=function(){return this.m_seriesNames},WidgetChart.prototype.setCategorySeriesData=function(){this.m_categoryData=[],this.m_seriesData=[];for(var t=0,e=this.getDataProvider().length;t<e;t++){var i=this.getDataProvider()[t];this.isEmptyCategory=!1;for(var a=0,r=this.getSeriesNames().length;a<r;a++){this.m_seriesData[a]||(this.m_seriesData[a]=[]);var s="",n=this.getSeriesNames()[a];null!=i[n]&&"undefined"!=i[n]&&(s=i[n]),isNaN(s)&&(s=getNumericComparableValue(s)),this.m_seriesData[a][t]=s}}},WidgetChart.prototype.setStartX=function(){this.m_startX=+this.m_x},WidgetChart.prototype.setEndX=function(){this.m_endX=+this.m_startX+ +this.m_width},WidgetChart.prototype.setStartY=function(){this.m_startY=+this.m_y+this.m_height},WidgetChart.prototype.setEndY=function(){this.m_endY=+this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()},WidgetChart.prototype.init=function(){this.setCategorySeriesData(),this.isSeriesDataEmpty(),this.setChartDrawingArea(),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this)},WidgetChart.prototype.drawChart=function(){if(this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.m_designMode){this.createInnerDiv(this.m_draggableDiv);try{this.drawDesignModeCustomChart()}catch(t){this.drawMessage("Failed to import custom chart, Please check log !")}}else{var t=this.IsDrawingPossible();IsBoolean(t.permission)?(this.createInnerDiv(this.m_draggableDiv),this.drawCustomChart()):this.drawMessage(t.message)}},WidgetChart.prototype.IsDrawingPossible=function(){return IsBoolean(this.m_isEmptySeries)?{permission:"false",message:this.m_status.noData}:{permission:"true",message:this.m_status.success}},WidgetChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},WidgetChart.prototype.drawTitle=function(){this.m_title.draw()},WidgetChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},WidgetChart.prototype.hideCanvas=function(){$("#draggableCanvas"+this.m_objectid).css("display","none"),$("#draggableDiv"+this.m_objectid).find("svg").remove()},WidgetChart.prototype.createInnerDiv=function(t){$("#innerDiv"+this.m_objectid).remove();var e=document.createElement("div");return e.setAttribute("id","innerDiv"+this.m_objectid),e.style.height="100%",e.style.width="100%",e.style.top="0%",e.style.left="0%",e.style.position="absolute",e.style.zIndex="2",$(t).append(e),e},WidgetChart.prototype.drawDesignModeCustomChart=function(){var t=["2012","2013","2014","2015","2016","2017","2018"],e=[3,6,12,6,24,9,15],i=this.m_width,a=this.m_height,r=40,s=+this.getEndY()+20,n="#f89406",o=Raphael("innerDiv"+this.m_objectid,i,a),h={font:"12px Roboto",fill:"#808080"},d=(i-10)/t.length,c=(a-r-s)/Math.max.apply(Math,e),i=o.path().attr({stroke:n,"stroke-width":4,"stroke-linejoin":"round"}),s=o.path().attr({stroke:"none",opacity:.2,fill:n}),n=o.set();o.set();n.hide();for(var g,l,m,p,u=0,b=t.length;u<b;u++){var v,y,f,C,_,w,D=Math.round(a-r-c*e[u]),z=Math.round(10+d*(u+.5));o.text(z,a-20-6,t[u]).attr(h).toBack(),u||(_=["M",z,D,"C",z,D],w=["M",10+.5*d,a-r,"L",z,D,"C",z,D]),u&&u<b-1&&(v=Math.round(a-r-c*e[u-1]),y=Math.round(10+d*(u-.5)),C=Math.round(a-r-c*e[u+1]),f=Math.round(10+d*(u+1.5)),v=v,l=D,C=C,p=m=void 0,m=((g=z)-(y=y))/2,p=((f=f)-g)/2,y=Math.atan((g-y)/Math.abs(l-v)),f=Math.atan((f-g)/Math.abs(l-C)),y=v<l?Math.PI-y:y,f=C<l?Math.PI-f:f,v=Math.PI/2-(y+f)%(2*Math.PI)/2,C={x1:g-m*Math.sin(v+y),y1:l+m*Math.cos(v+y),x2:g+p*Math.sin(v+f),y2:l+p*Math.cos(v+f)},_=_.concat([C.x1,C.y1,z,D,C.x2,C.y2]),w=w.concat([C.x1,C.y1,z,D,C.x2,C.y2])),o.circle(z,D,4).attr({fill:"rgba(248, 148, 6, 0.5)",stroke:"#fff","stroke-width":2})}_=_.concat([z,D,z,D]),w=w.concat([z,D,z,D,"L",z,a-r,"z"]),i.attr({path:_}),s.attr({path:w})},WidgetChart.prototype.setDesignModeCustomChart=function(){this.m_jspaths=[{name:"d3",src:"//d3js.org/d3.v4.min.js"}],this.m_htmlcontent='<div class="customCompContainer" id="customCompContainer'+this.m_objectid+'"></div>',this.m_csscontent="body{ margin: 0px; padding: 0px; background: transparent;} .customCompContainer{width:100%; height: 100%;}",this.m_jscontent='var drawDesignModeCustomComp = function(w, h, id, data, cat, ser, sercolor, chartID) {    \tvar svg = d3.select("#"+id)    \t.append("svg")    \t.attr("width", w)    \t.attr("height", h),        margin = {top: 40, right: 40, bottom: 40, left: 40},        width = +svg.attr("width") - margin.left - margin.right,        height = +svg.attr("height") - margin.top - margin.bottom;    \tvar x = d3.scaleBand().rangeRound([0, width]).padding(0.1),    \t    y = d3.scaleLinear().rangeRound([height, 0]);    \t    \tvar g = svg.append("g")    \t    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");    \t    \tvar tooltipdiv = d3.select("body").append("div")\t        .attr("class", "d3tooltip")\t\t\t\t        .style("background", "#ffffff")        .style("padding", "10px")        .style("opacity", 0)        .style("display", "none")        .style("position", "absolute");    \t    \tx.domain(data.map(function(d) { return d[cat]; }));    \t  y.domain([0, d3.max(data, function(d) { return 1*d[ser]; })]);    \t    \t  g.append("g")    \t      .attr("class", "axis axis--x")    \t      .attr("transform", "translate(0," + height + ")")    \t      .call(d3.axisBottom(x));    \t    \t  g.append("g")    \t      .attr("class", "axis axis--y")    \t      .call(d3.axisLeft(y).ticks(5))    \t    .append("text")    \t      .attr("transform", "rotate(-90)")    \t      .attr("y", 6)    \t      .attr("dy", "0.71em")    \t      .attr("text-anchor", "end")    \t      .text("Frequency");    \t    \t  g.selectAll(".d3bar")    \t    .data(data)    \t    .enter().append("rect")    \t      .attr("class", "d3bar")    \t      .style("fill", sercolor)    \t      .attr("x", function(d) { return x(d[cat]); })    \t      .attr("y", function(d) { return y(d[ser]); })    \t      .attr("width", x.bandwidth())    \t      .attr("height", function(d) { return height - y(d[ser]); })    \t          \t      .on("mousemove", function(d,i,e) {    \t    \t  tooltipdiv.transition()                    .duration(100)        \t\t\t .style("display", "block")                    .style("opacity", 1);    \t    \t  tooltipdiv.html((d[cat]) + "<br/>"  + ser +": "+ d[ser])                    .style("left", (d3.event.pageX + 30) + "px")                    .style("top", (d3.event.pageY - 30) + "px");\t\t\t\t\tparent.window.dGlobals.containerCallback(chartID, event, d,i,e);                })            .on("mouseout", function(d,i,e) {            \ttooltipdiv.transition()                    .duration(400)        \t\t\t .style("display", "none")                    .style("opacity", 0);\t\t\t\t\tparent.window.dGlobals.containerCallback(chartID, event, d,i,e);            })            .on("click", function(d,i,e) {    \t    \t  \tparent.window.dGlobals.containerCallback(chartID, event, d,i,e);                });    };        drawDesignModeCustomComp('+(this.m_width-2*this.m_borderthickness)+", "+(this.m_height-2*this.m_borderthickness-this.getEndY())+', "customCompContainer'+this.m_objectid+'", [{date: "13-May", a: "5", b: "3"},{date: "14-May", a: "4", b: "2"},{date: "15-May", a: "3", b: "1"},{date: "16-May", a: "4", b: "2"}], "date", "a", "#f89406");'},WidgetChart.prototype.getEndY=function(){return this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()},WidgetChart.prototype.getMarginForTitle=function(){return IsBoolean(this.getShowGradient())||IsBoolean(this.m_showmaximizebutton)||IsBoolean(this.getTitle().m_showtitle)?+this.getTitleBarHeight():0},WidgetChart.prototype.getMarginForSubTitle=function(){return(IsBoolean(this.m_subTitle.m_showsubtitle)||IsBoolean(this.getShowGradient())||IsBoolean(this.getTitle().m_showtitle))&&""!=this.m_subTitle.getDescription()?1.5*this.fontScaling(this.m_subTitle.getFontSize()):0},WidgetChart.prototype.getPreProcessedScript=function(){return this.m_designMode?"":"var bizvizchart = {chartJson: "+JSON.stringify(this.chartJson)+"}; bizvizchart.chart = parent.sdk.getWidget(bizvizchart.chartJson.referenceID); bizvizchart.getData=function(){return bizvizchart.chart.getDataProvider()}; bizvizchart.getFields=function(){return bizvizchart.chart.getFields()}; bizvizchart.getWidth=function(){return bizvizchart.chart.m_width - bizvizchart.chart.m_borderthickness*2}; bizvizchart.getHeight=function(){return bizvizchart.chart.m_height - bizvizchart.chart.m_borderthickness*2 - bizvizchart.chart.getEndY()*1}; bizvizchart.eventCallBack=function(event, data, index){ bizvizchart.chart.eventCallBack(event, data, index); };"},WidgetChart.prototype.drawCustomChart=function(){var i=this,t=i.m_associatedwidgetdata,e=window.sessionStorage.getItem("bvz_spacekey");parent.window.BIZVIZ.SDK.secureRequest("/widget/getWidget/",{id:t,spaceKey:e},function(t,e){t.widgetResp.success&&(t=JSON.parse(t.widgetResp.bizvizWidget.data),t=$("<app-widget-card>").attr("instanceid","WidgetChart"+i.m_objectid).attr("viewdefinition",JSON.stringify(t)),$("#innerDiv"+i.m_objectid).append(t))},function(t,e){return"Default"})};
//# sourceMappingURL=WidgetChart.min.js.map