/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function WaterfallChart(t,a){this.base=Chart,this.base(),this.m_showmarkingorpercentvalue=!1,this.m_showpercentvalue=!1,this.m_columnsArray={},this.m_percentageArray=[],this.m_calculation=new WaterfallCalculation,this.m_chartContainer=t,this.m_zIndex=a,this.m_xAxis=new Xaxis,this.m_yAxis=new Yaxis,this.m_maxbarwidth=30,this.m_x=400,this.m_y=35,this.m_negativecolor="",this.m_positivecolor="",this.m_totalcolor="",this.m_calculatedname=""}function WaterfallCalculation(){this.m_xAxisPixelArray=[],this.m_columnGap,this.m_yAxisText,this.m_ypixelArray=[],this.m_stackHeightArray=[],this.m_yAxisMarkersArray=[],this.m_startX,this.m_startY,this.m_endX,this.m_endY,this.m_util=new Util,this.ctx="",this.m_maxbarwidth=40}function WaterfallColumns(){this.m_xPixel=[],this.m_yPixelArray=[],this.m_stackHeightArray=[],this.m_stackColorArray=[],this.m_stackArray=[]}WaterfallChart.prototype=new Chart,WaterfallChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},WaterfallChart.prototype.ParseJsonAttributes=function(t,a){for(var i in this.chartJson=t)if("Chart"==i)for(var s in t[i])switch(s){case"xAxis":for(var e in t[i][s]){var h=this.getNodeAttributeName(e);a.m_xAxis[h]=t[i][s][e]}break;case"yAxis":for(var r in t[i][s]){var h=this.getNodeAttributeName(r);a.m_yAxis[h]=t[i][s][r]}break;case"Title":for(var o in t[i][s]){var h=this.getNodeAttributeName(o);a.m_title[h]=t[i][s][o]}break;case"SubTitle":for(var l in t[i][s]){h=this.getNodeAttributeName(l);a.m_subTitle[h]=t[i][s][l]}break;case"CategoryColors":var m,n=new CategoryColors;for(m in this.setCategoryColors(n),t[i][s])if("CategoryColor"===m){var _=this.getArrayOfSingleLengthJson(t[i][s][m]);n.cateogryNameColorMap=new Object;for(var y=0,x=_.length;y<x;y++){var g,c=new CategoryColor;for(g in n.setCategoryColor(c),_[y])c[h=this.getNodeAttributeName(g)]=_[y][g];n.cateogryNameColorMap[c.getCategoryName()]=c.getColor()}}else{h=this.getNodeAttributeName(m);a.m_categoryColors[h]=t[i][s][m]}n.setCategoryDefaultColorSet();break;case"ConditionalColors":if(""!=t[i][s])for(var A=new ConditionalColors,f=(this.setConditionalColors(A),this.getArrayOfSingleLengthJson(t[i][s].ConditionalColor)),y=0,x=f.length;y<x;y++){var p,u=new ConditionalColor;for(p in A.setConditionalColor(u),f[y])u[h=this.getNodeAttributeName(p)]=f[y][p]}break;default:a[h=this.getNodeAttributeName(s)]=t[i][s]}else a[h=this.getNodeAttributeName(i)]=t[i]},WaterfallChart.prototype.getDataProvider=function(){return this.m_dataProvider},WaterfallChart.prototype.getCategoryNames=function(){return this.m_categoryNames},WaterfallChart.prototype.getSeriesNames=function(){return 0<this.m_seriesNames.length?this.m_seriesNames[0]:this.m_seriesNames},WaterfallChart.prototype.getAllSeriesNames=function(){return this.m_allSeriesNames},WaterfallChart.prototype.getAllCategoryNames=function(){return this.m_allCategoryNames},WaterfallChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},WaterfallChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames[0]},WaterfallChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},WaterfallChart.prototype.getSeriesData=function(){return this.m_seriesData[0]},WaterfallChart.prototype.getSeriesToolTipData=function(){return this.m_ShowToolTipData},WaterfallChart.prototype.setLegendNames=function(t){this.m_legendNames=t},WaterfallChart.prototype.getLegendNames=function(){var t=[];return t[0]="Positive",t[1]="Negative",t[2]=this.m_calculatedname,t},WaterfallChart.prototype.setSeriesColor=function(t){this.m_seriesColor=t},WaterfallChart.prototype.getSeriesColor=function(){return this.m_seriesColor},WaterfallChart.prototype.getSeriesColors=function(){this.m_seriesDataLegendColor=[];for(var t=0,a=this.getSeriesNames().length;t<a;t++)this.m_seriesDataLegendColor[t]=this.getLegendSeriesColor();return this.m_seriesDataLegendColor},WaterfallChart.prototype.getLegendSeriesColor=function(){var t=[];return t[0]=this.m_positivecolor,t[1]=this.m_negativecolor,t[2]=this.m_totalcolor,t},WaterfallChart.prototype.getLegendTableContent=function(){var t="";if(0<this.getSeriesNames().length)for(var a=0;a<this.getLegendNames().length;a++)t+='<tr style="font-style:'+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'"><td><span style="background-color:'+this.getSeriesColors()[0][a]+'; width:10px;height:10px;"></span><span style="display:inline;">'+this.getLegendNames()[a]+"</span></td></tr>";return t},WaterfallChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},WaterfallChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEvent()},WaterfallChart.prototype.getCalculateNiceScale=function(t,a,i,s,e,h,r){t===a&&(a=0<t?(t=3*t/5,7*a/5):(t=7*t/5,3*a/5)),IsBoolean(i)&&IsBoolean(s)?(o=0,l=+a):IsBoolean(i)&&!IsBoolean(s)?(o=0,l=isNaN(h)||""===h?0:+h):!IsBoolean(i)&&IsBoolean(s)?(o=+t,l=+a):IsBoolean(i)||IsBoolean(s)||(o=isNaN(e)||""===h?0:+e,l=isNaN(h)||""===h?0:+h),l<=o&&(o=+t,l=0);var o,l,a={minPoint:o,maxPoint:l,compHeight:r,isMaxYaxis:this.m_ismaxyaxis,isMinYaxis:this.m_isminyaxis,noOfMarkers:this.m_noofmarkers};return new NiceScale(a).getScaleInfo()},WaterfallChart.prototype.setFields=function(t){for(var a=[],i=[],s=0,e=(this.m_fieldsJson=t).length;s<e;s++)switch(this.getProperAttributeNameValue(t[s],"Type")){case"Category":a.push(t[s]);break;case"Series":case"CalculatedField":i.push(t[s])}this.setCategory(a),this.setSeries(i)},WaterfallChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryFieldColor=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr={};for(var a=0,i=0,s=t.length;i<s;i++){this.m_allCategoryNames[i]=this.getProperAttributeNameValue(t[i],"Name");var e=this.formattedDescription(this,this.getProperAttributeNameValue(t[i],"DisplayName"));this.m_allCategoryDisplayNames[i]=e,this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[i]]=this.getProperAttributeNameValue(t[i],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[i]])&&(this.m_categoryNames[a]=this.getProperAttributeNameValue(t[i],"Name"),this.m_categoryDisplayNames[a]=e,this.m_categoryFieldColor[a]=this.getProperAttributeNameValue(t[i],"Color"),a++)}},WaterfallChart.prototype.setSeries=function(t){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors=[],this.m_legendNames=[],this.m_seriesVisibleArr={},this.m_allSeriesDisplayNames=[],this.m_allSeriesNames=[],this.m_plotTrasparencyArray=[];var a=0;this.legendMap={};for(var i=0,s=t.length;i<s;i++){var e=this.formattedDescription(this,this.getProperAttributeNameValue(t[i],"DisplayName"));this.m_allSeriesDisplayNames[i]=e,this.m_allSeriesNames[i]=this.getProperAttributeNameValue(t[i],"Name"),this.m_seriesVisibleArr[this.m_allSeriesNames[i]]=this.getProperAttributeNameValue(t[i],"visible"),IsBoolean(this.m_seriesVisibleArr[this.m_allSeriesNames[i]])&&(this.m_seriesDisplayNames[a]=e,this.m_seriesNames[a]=this.getProperAttributeNameValue(t[i],"Name"),this.m_legendNames[a]=e,this.m_seriesColors[a]=convertColorToHex(this.getProperAttributeNameValue(t[i],"Color")),e=this.getProperAttributeNameValue(t[i],"PlotTransparency"),this.m_plotTrasparencyArray[a]=null!=e&&null!==e&&""!==e?e:1,e={seriesName:this.m_seriesNames[a],displayName:this.m_seriesDisplayNames[a],color:this.m_seriesColors[a],shape:"cube",index:a},this.legendMap[this.m_seriesNames[a]]=e,a++)}},WaterfallChart.prototype.init=function(){this.setCategoryData(),this.setSeriesData(),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.isSeriesDataEmpty(),this.setShowSeries(this.getAllFieldsName()),this.updateSeriesDataWithCommaSeperators(),this.visibleSeriesInfo=this.getVisibleSeriesData(this.getSeriesData()),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),IsBoolean(this.m_isEmptySeries)||!IsBoolean(this.isVisibleSeries())||IsBoolean(this.isEmptyCategory)||(this.initializeCalculation(),this.m_xAxis.init(this,this.m_calculation),this.m_yAxis.init(this,this.m_calculation)),this.initializeToolTipProperty(),this.m_tooltip.init(this)},WaterfallChart.prototype.isSeriesDataEmpty=function(){this.m_isEmptySeries=!1,""==this.m_seriesData&&(this.m_isEmptySeries=!0)},WaterfallChart.prototype.getVisibleSeriesData=function(t){var a={seriesData:[],seriesColor:[],seriesDisplayName:[],seriesName:[]};return this.m_seriesVisibleArr[this.m_seriesNames[0]]&&(a.seriesData.push(t),a.seriesColor.push(this.m_seriesColors[0]),a.seriesDisplayName.push(this.m_seriesDisplayNames[0]),a.seriesName.push(this.m_seriesNames[0])),a},WaterfallChart.prototype.setCategoryData=function(){if(this.m_categoryData=[],this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var t=0,a=this.getCategoryNames().length;t<a;t++)this.m_categoryData[t]=this.getDataFromJSONCategory(this.getCategoryNames()[t])}},WaterfallChart.prototype.setSeriesData=function(){this.m_seriesData=[],this.m_ShowToolTipData=[],0<this.getSeriesNames().length&&(this.m_seriesData[0]=this.getDataFromJSONSeries(this.getSeriesNames()),this.m_ShowToolTipData[0]=this.getDataFromJSONSeries(this.getSeriesNames()))},WaterfallChart.prototype.getDataFromJSONCategory=function(t){for(var a=[],i=0;i<this.getDataProvider().length;i++)void 0===this.getDataProvider()[i][t]||"undefined"===this.getDataProvider()[i][t]?a[i]="":a[i]=this.getDataProvider()[i][t];return a[i]=this.m_calculatedname,a},WaterfallChart.prototype.getDataFromJSONSeries=function(t){var a=[],i=0;if(0<this.getDataProvider().length){for(var s=0;s<this.getDataProvider().length;s++){var e=getNumericComparableValue(this.getDataProvider()[s][t]);void 0===e||isNaN(e)||"undefined"===e?a[s]="":(a[s]=e,i=+i+ +a[s])}a[s]=i}return a},WaterfallChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0,a=this.getAllCategoryNames().length;t<a;t++)this.m_allfieldsName.push(this.getAllCategoryNames()[t]);for(t=0,a=this.getAllSeriesNames().length;t<a;t++)this.m_allfieldsName.push(this.getAllSeriesNames()[t])},WaterfallChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var t=0,a=this.getCategoryDisplayNames().length;t<a;t++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[t]);this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames())},WaterfallChart.prototype.updateSeriesDataWithCommaSeperators=function(){this.m_displaySeriesDataFlag=[];for(var t=0,a=this.m_ShowToolTipData.length;t<a;t++){this.m_displaySeriesDataFlag[t]=[];for(var i=0,s=this.m_ShowToolTipData[t].length;i<s;i++)this.m_displaySeriesDataFlag[t][i]=!0,isNaN(this.m_ShowToolTipData[t][i])&&(this.m_displaySeriesDataFlag[t][i]=!1,this.m_ShowToolTipData[t][i]=getNumericComparableValue(this.m_ShowToolTipData[t][i]),this.m_seriesData[t][i]=getNumericComparableValue(this.m_seriesData[t][i]))}},WaterfallChart.prototype.initializeCalculation=function(){this.calculateMaxValue(),this.calculateFinalMinMax(),this.setChartDrawingArea();var t=this.updateCategoryData(this.m_categoryData),a=this.updateSeriesData(this.m_seriesData);this.m_calculation.init(this,t,a),this.m_xPixelArray=this.m_calculation.getxPixelArray(),this.m_yPixelArray=this.m_calculation.getyPixelArray(),this.m_stackWidth=this.m_calculation.getBarWidth(),this.m_stackHeightArray=this.m_calculation.getstackHeightArray(),this.setColorsForSeries(),this.initializeColumns()},WaterfallChart.prototype.updateSeriesData=function(t){var a=[];if(null!=t&&null!==t&&""!==t&&0!=t.length)for(var i=0,s=t[0].length;i<s;i++){a[i]=[];for(var e=0,h=t.length;e<h;e++)a[i][e]=t[e][i]}return a},WaterfallChart.prototype.initializeColumns=function(){for(var t=0,a=this.visibleSeriesInfo.seriesName.length;t<a;t++)this.m_columnsArray[this.visibleSeriesInfo.seriesName[t]]=new WaterfallColumns,this.m_columnsArray[this.visibleSeriesInfo.seriesName[t]].init(this.m_xPixelArray[t],this.m_yPixelArray[t],this.m_stackWidth,this.m_stackHeightArray[t],this.m_percentageArray,this.getColorsForSeries()[t],this.m_strokecolor,this.m_showgradient,this.m_showPerCentageFlag,this.m_showpercentvalue,this.m_plotTrasparencyArray[t],this)},WaterfallChart.prototype.setColorsForSeries=function(){this.m_seriesColorsArray=[];this.visibleSeriesInfo.seriesColor;for(var t=0;t<this.visibleSeriesInfo.seriesData.length;t++){this.m_seriesColorsArray[t]=[];for(var a=0,i=this.visibleSeriesInfo.seriesData[t].length-1;a<i;a++)0<this.visibleSeriesInfo.seriesData[t][a]?this.m_seriesColorsArray[t][a]=this.m_positivecolor:this.m_seriesColorsArray[t][a]=this.m_negativecolor;this.m_seriesColorsArray[t][a]=this.m_totalcolor}},WaterfallChart.prototype.getCheckedAllPosContainigZero=function(){for(var t=!0,a=0,i=this.m_seriesData[this.m_seriesVisiblityPosition].length;a<i;a++)0!=this.m_seriesData[this.m_seriesVisiblityPosition][a]&&(t=!1);return t},WaterfallChart.prototype.calculateMaxValue=function(){this.m_chartType=this.getChartType();for(var t=this.visibleSeriesInfo.seriesData,a=(this.calculateMax=0,this.calculateMin=0,this.count=0,this.max=0,this.min=0),i=0,s=t.length;a<s;a++)for(var e=0,h=t[a].length;e<h-1;e++)i++,t[a][e];for(a=this.calculateMin=0,s=t.length;a<s;a++)for(e=0,h=t[a].length;e<h-1;e++)this.count=this.count+ +t[a][e],this.count>this.max&&(this.max=this.count),this.count<this.min&&(this.min=this.count),this.calculateMax=+this.max,this.calculateMin=+this.min},WaterfallChart.prototype.calculateFinalMinMax=function(){var t=this.calculateMin,a=this.calculateMax,t=this.getCalculateNiceScale(t,a,this.m_basezero,this.m_autoaxissetup,this.m_minimumaxisvalue,this.m_maximumaxisvalue,this.m_height);this.min=t.min,this.max=t.max,this.yAxisNoOfMarker=t.markerArray.length,this.yAxisText=t.step,this.m_yAxisMarkersArray=t.markerArray},WaterfallChart.prototype.setStartX=function(){this.yaxisLabelFont=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),this.yaxisDescriptionFont=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily);var t=this.getBorderToDescriptionMargin(),a=this.getYAxisDescriptionMargin(),i=this.getDescriptionToLabelMargin(),s=this.getLabelToAxisMargin(),e=this.getYAxisLabelMargin();this.m_startX=+this.m_x+ +t+ +a+ +i+ +e+ +s},WaterfallChart.prototype.getYAxisLabelMargin=function(){var t=this.getLabelFormatterMargin();return this.setLabelWidth(),+t+ +this.getLabelWidth()+ +this.getLabelSignMargin()+ +this.getLabelPrecisionMargin()+ +this.getLabelSecondFormatterMargin()},WaterfallChart.prototype.getLabelFormatterMargin=function(){var t,a=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.m_formater&&""!=this.m_formater&&"none"!=this.m_unit&&""!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),a=this.ctx.measureText(t).width,this.ctx.closePath()),a},WaterfallChart.prototype.setLabelWidth=function(){var t=[];if((this.m_labelwidth=0)<this.fontScaling(this.m_yAxis.m_labelfontsize)){for(var a=0;a<this.m_yAxisMarkersArray.length;a++){var i,s=this.m_yAxisMarkersArray[a];IsBoolean(this.m_fixedlabel)||(IsBoolean(this.m_yAxis.getLeftaxisFormater())&&("none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(i=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?s=getNumberFormattedNumericValue(+s,this.m_precision,this.m_unit):"auto"==this.getSecondaryUnit()?s=getNumberFormattedNumericValue(+s):"none"!==this.getSecondaryUnit()&&(s=this.m_util.updateTextWithFormatter(s,i,this.m_precision))),0!==s)&&"default"!==this.m_precision&&(s=this.m_yAxis.setPrecision(s,this.m_precision)),s=getFormattedNumberWithCommas(s,this.m_numberformatter),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t[a]=this.ctx.measureText(s).width,this.ctx.closePath())}this.m_labelwidth=getMaxValueFromArray(t)}},WaterfallChart.prototype.getLabelSignMargin=function(){var t=0,a=0,i=this.min;return i<0&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),a=this.ctx.measureText(i).width,this.ctx.closePath()),t=this.getLabelWidth()<a?this.ctx.measureText("-").width:t},WaterfallChart.prototype.getLabelPrecisionMargin=function(){var t=5;return"auto"==this.getSecondaryUnit()&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t=this.ctx.measureText(".0").width,this.ctx.closePath()),t},WaterfallChart.prototype.getLabelWidth=function(){return this.m_labelwidth},WaterfallChart.prototype.getCategoryData=function(){return this.m_categoryData},WaterfallChart.prototype.getLabelSecondFormatterMargin=function(){var t,a=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(t="auto"!=this.getSecondaryUnit()?this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()):"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?getNumberFormattedSymbol(+this.max,this.m_unit):"K",this.ctx.font=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily),a=this.ctx.measureText(t).width),a},WaterfallChart.prototype.setEndX=function(){var t=this.getBorderToLegendMargin(),a=this.getVerticalLegendMargin(),i=this.getVerticalLegendToXAxisMargin();this.m_endX=+this.m_x+ +this.m_width-(+t+ +a+ +i)},WaterfallChart.prototype.setStartY=function(){var t=this.getChartMargin(),a=this.getXAxisLabelMargin(),i=this.getXAxisDescriptionMargin();this.m_startY=+this.m_y+ +this.m_height-(+t+ +a+ +i)},WaterfallChart.prototype.setEndY=function(){this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()+ +this.getSpaceForShowText()},WaterfallChart.prototype.getXAxisLabelMargin=function(){var t=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize),a=this.m_xAxis.m_labelrotation*(Math.PI/180);if(IsBoolean(this.m_xAxis.getLabelTilted())){this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();for(var i=1,s=this.m_categoryData[0].length;i<s;i++){var e=Math.abs(this.ctx.measureText(this.m_categoryData[0][i]).width*a);t<e&&(t=e)}t>this.m_height/4&&(t=this.m_xAxis.getLabelrotation()<=70?this.m_height/4-5:this.m_height/4)}else{this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();var h=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize);this.noOfRows=this.setNoOfRows(),t=h*this.noOfRows}return t},WaterfallChart.prototype.setNoOfRows=function(){this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily);var t=1;if(!IsBoolean(this.isEmptyCategory)){this.ctx.measureText(this.m_categoryData[0][0]).width;for(var a=(this.getEndX()-this.getStartX())/this.m_categoryData[0].length,i=1,s=this.m_categoryData[0].length;i<s;i++)this.ctx.measureText(this.m_categoryData[0][i]).width>a&&(t=2)}return t},WaterfallChart.prototype.getSpaceForShowText=function(){return IsBoolean(this.getCounterFlagForSeriesVisiblity())&&IsBoolean(this.m_showmarkingorpercentvalue)&&(IsBoolean(this.m_subTitle.m_showsubtitle)||IsBoolean(this.getShowGradient()))?15:0},WaterfallChart.prototype.getCounterFlagForSeriesVisiblity=function(){for(var t=0,a=0,i=this.m_seriesData.length;a<i;a++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[a]])&&(t++,this.m_seriesVisiblityPosition=a);return 1==t},WaterfallChart.prototype.updateCategoryData=function(t){var a=[];if(null!=t&&null!==t&&""!==t&&0!=t.length)for(var i=0,s=t[0].length;i<s;i++){a[i]=[];for(var e=0,h=t.length;e<h;e++)a[i][e]=t[e][i]}return a},WaterfallChart.prototype.getColorsForSeries=function(){return this.m_seriesColorsArray},WaterfallChart.prototype.getXPositionforToolTip=function(){for(var t=[],a=this.m_calculation.getxPixelArray(),i=0,s=a[0].length;i<s;i++)t.push(a[0][i]);return t},WaterfallChart.prototype.getToolTipData=function(t,a){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries())&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType)){var i="",s=(this.xPositions=this.getXPositionforToolTip(),this.getSeriesToolTipData()),e=this.m_calculation.getBarWidth()*this.m_xPixelArray.length;if(t>=this.getStartX()&&t<=this.getEndX()&&a<=this.getStartY()&&a>=this.getEndY()){for(var h=0,r=this.xPositions.length;h<r;h++)if(t<=+this.xPositions[h]+e&&t>=+this.xPositions[h]){if(x={},IsBoolean("Default"==this.m_customtextboxfortooltip.dataTipType)){x.cat="",x.data=new Array,x.cat=this.getCategoryData()[0][h];for(var o=0,l=0,m=s.length;o<m;o++){var n=[],_=(this.getCategoryData()[0][h]==this.m_calculatedname?n[0]={color:this.m_totalcolor,shape:this.legendMap[this.getSeriesNames()].shape}:0<s[o][h]?n[0]={color:this.m_positivecolor,shape:this.legendMap[this.getSeriesNames()].shape}:n[0]={color:this.m_negativecolor,shape:this.legendMap[this.getSeriesNames()].shape},n[1]=this.visibleSeriesInfo.seriesDisplayName[o],i=""==s[o][h]||isNaN(s[o][h])||null==s[o][h]||"null"==s[o][h]?s[o][h]:(_=+s[o][h])%1!=0&&"default"!==this.m_tooltipprecision?_.toFixed(this.m_tooltipprecision):+s[o][h],this.getFormatterForToolTip(i));n[2]=_,x.data[l]=n,l++}x.highlightIndex=this.getDrillColor(t,a),IsBoolean(this.m_controlledtooltip)&&(x=this.updateTooltipData(x));break}var y,x=h==this.xPositions.length-1?((y={})[this.m_fieldsJson[0].Name]=this.m_categoryData[0][h],y[this.m_fieldsJson[1].Name]=this.m_seriesData[0][h],y):this.getDataProvider()[h]}}else this.hideToolTip();return x}},WaterfallChart.prototype.getDrillColor=function(t,a){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory))for(var i=0,s=this.m_xPixelArray.length;i<s;i++)for(var e=0,h=this.m_xPixelArray[i].length;e<h;e++)if(t<=+this.m_xPixelArray[i][e]+ +this.m_calculation.getBarWidth()&&t>=+this.m_xPixelArray[i][e])if("overlaid"!=this.m_charttype){for(var r,o=0,l=this.m_yPixelArray.length;o<l;o++)if(a<=(+this.m_stackHeightArray[o][e]<0?(r=+this.m_yPixelArray[o][e]+ +this.m_stackHeightArray[o][e],+this.m_yPixelArray[o][e]):(r=+this.m_yPixelArray[o][e],+this.m_yPixelArray[o][e]+ +this.m_stackHeightArray[o][e]))&&r<=a)return i}else for(o=this.m_yPixelArray.length-1;0<=o;o--)if(a<=this.getStartY()&&a>=Math.ceil(+this.m_yPixelArray[o][e]))return this.m_calculation.m_originalindexforoverlaiddata[2][o][e]},WaterfallChart.prototype.getDrillDataPoints=function(t,a){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries()))for(var i=0,s=this.m_xPixelArray.length;i<s;i++)for(var e=0,h=this.m_xPixelArray[i].length;e<h;e++)if(t<=+this.m_xPixelArray[i][e]+ +this.m_calculation.getBarWidth()&&t>=+this.m_xPixelArray[i][e])for(var r,o,l,m,n,_,y=0,x=this.m_yPixelArray.length;y<x;y++)if(a<=(+this.m_stackHeightArray[y][e]<0?(r=+this.m_yPixelArray[y][e]+ +this.m_stackHeightArray[y][e],+this.m_yPixelArray[y][e]):(r=+this.m_yPixelArray[y][e],+this.m_yPixelArray[y][e]+ +this.m_stackHeightArray[y][e]))&&r<=a)return o=this.getFieldNameValueMap(e),n=(m=(l=0<this.visibleSeriesInfo.seriesData[i][e]?this.getCategoryData()[0][e]==this.m_calculatedname?this.m_totalcolor:this.m_positivecolor:this.getCategoryData()[0][e]==this.m_calculatedname?this.m_totalcolor:this.m_negativecolor,this.visibleSeriesInfo.seriesName[i]),this.visibleSeriesInfo.seriesDisplayName[i]),_=o[m],o.drillField=m,o.drillDisplayField=n,o.drillValue=_,{drillRecord:o,drillColor:l}},WaterfallChart.prototype.getFieldNameValueMap=function(t){for(var a=new Object,i=0,s=this.getAllCategoryNames().length;i<s;i++)a[this.getAllCategoryNames()[i]]=this.getDataFromJSONCategory(this.getAllCategoryNames()[i])[t];for(var e=0,s=this.getAllSeriesNames().length;e<s;e++)a[this.getAllSeriesNames()[e]]=this.getDataFromJSONSeries(this.getAllSeriesNames()[e])[t];return a},WaterfallCalculation.prototype.init=function(t,a,i){this.m_chart=t,this.m_xAxisData=a,this.m_yAxisData=this.m_chart.visibleSeriesInfo.seriesData,this.m_maxbarwidth=this.m_chart.m_maxbarwidth*(1+.5*(this.m_yAxisData.length-1)),this.m_startX=this.m_chart.getStartX(),this.m_startY=this.m_chart.getStartY(),this.m_endX=this.m_chart.getEndX(),this.m_endY=this.m_chart.getEndY(),this.m_chartType=this.m_chart.getChartType(),this.setDrawHeight(),this.setDrawWidth(),this.m_columnGap=10,this.calculateBarWidth(),this.setRatio(),this.setxPixelArray(),this.setyPixelArray(),this.setstackHeightArray()},WaterfallCalculation.prototype.setDrawHeight=function(){this.drawHeight=this.m_startY-this.m_endY},WaterfallCalculation.prototype.setDrawWidth=function(){this.drawWidth=+this.m_endX-+this.m_startX},WaterfallCalculation.prototype.calculateBarWidth=function(){var t=this.m_xAxisData.length,t=(this.m_columnGap,+this.getDrawWidth()/t*this.m_chart.m_barwidth/100);this.setBarWidth(t),this.setColumnGap(t)},WaterfallCalculation.prototype.getDrawWidth=function(){return this.drawWidth},WaterfallCalculation.prototype.setBarWidth=function(t){this.barWidth=t,this.setBarWidthForClustered()},WaterfallCalculation.prototype.setBarWidthForClustered=function(){this.barWidth/=this.m_yAxisData.length},WaterfallCalculation.prototype.setColumnGap=function(t){t*=this.m_xAxisData.length,t=this.getDrawWidth()-t;this.m_columnGap=t/this.m_xAxisData.length},WaterfallCalculation.prototype.setRatio=function(){var t=this.getMaxValue()-this.minValue();this.ratio=0<t?this.getDrawHeight()/t:1},WaterfallCalculation.prototype.getRatio=function(){return this.ratio},WaterfallCalculation.prototype.getMaxValue=function(){return this.m_chart.max},WaterfallCalculation.prototype.minValue=function(){return this.m_chart.min},WaterfallCalculation.prototype.getDrawHeight=function(){return this.drawHeight},WaterfallCalculation.prototype.setxPixelArray=function(){for(var t=[],a=0,i=this.m_yAxisData[0].length;a<i;a++){t[a]=[];for(var s=0,e=this.m_yAxisData.length;s<e;s++)t[a][s]=+this.m_startX+ +this.getBarWidth()*s+this.getColumnGap()/2+(+this.getBarWidth()*this.m_yAxisData.length+ +this.getColumnGap())*a}this.m_xPixelArray=this.transformXPixelArray(t)},WaterfallCalculation.prototype.getBarWidth=function(){return this.barWidth},WaterfallCalculation.prototype.getColumnGap=function(){return this.m_columnGap},WaterfallCalculation.prototype.transformXPixelArray=function(t){for(var a=[],i=0,s=this.m_yAxisData.length;i<s;i++){a[i]=[];for(var e=0,h=this.m_yAxisData[0].length;e<h;e++)a[i][e]=t[e][i]}return a},WaterfallCalculation.prototype.setyPixelArray=function(){this.m_ypixelArray=this.getYPixelArrayForWaterfall()},WaterfallCalculation.prototype.getYPixelArrayForWaterfall=function(){for(var t=[],a=0,i=0,s=!1,e=!1,h=0,r=0,o=0,l=this.m_yAxisData.length;o<l;o++)for(var m=0,n=this.m_yAxisData[o].length;m<n;m++)0<this.m_yAxisData[o][m]&&h++,h==this.m_yAxisData[o].length&&(s=!0),this.m_yAxisData[o][m]<0&&r++,r==this.m_yAxisData[o].length&&(e=!0);for(var _,y,x,g=this.getRatio(),c=this.minValue(),A=this.getMaxValue(),f=!(this.total=0),o=0,l=this.m_yAxisData.length;o<l;o++){t[o]=[];for(var p,m=0,n=this.m_yAxisData[o].length;m<n;m++)this.total=this.total+ +this.m_yAxisData[o][m],IsBoolean(this.m_chart.isAxisSetup())?IsBoolean(this.m_chart.isBaseZero())?1==s?(m==n-1?(p=this.m_startY,i=this.total-this.m_yAxisData[o][m]):(p=this.m_startY,a=i=+this.m_yAxisData[o][m]+ +a),t[o][m]=p-g*i):1==e?m==n-1?(p=this.m_startY-Math.abs(c)*g,t[o][m]=p-g*(i=A)):(p=this.m_startY-Math.abs(c)*g,a=+(i=a)-+this.m_yAxisData[o][m],t[o][m]=+p+g*i):m==n-1?c<0?(p=this.m_startY-Math.abs(c)*g,t[o][m]=p-g*(i=A)):(p=this.m_startY-Math.abs(c)*g,i=0<+this.m_yAxisData[o][m]?this.total-this.m_yAxisData[o][m]:this.total<c?c:A,t[o][m]=p-g*i):(p=this.m_startY-Math.abs(c)*g,a=(i=0<+this.m_yAxisData[o][m]?+this.m_yAxisData[o][m]+a:a,this.total),t[o][m]=p-g*i):1==s?(m==n-1?(p=this.m_startY,i=this.total-this.m_yAxisData[o][m]):(p=this.m_startY,a=i=+this.m_yAxisData[o][m]+ +a),t[o][m]=p-g*i):1==e?m==n-1?(p=this.m_startY-Math.abs(c)*g,t[o][m]=+p+g*(i=A)):(p=this.m_startY-Math.abs(c)*g,a=+(i=a)-+this.m_yAxisData[o][m],t[o][m]=+p+g*i):(p=this.m_startY-Math.abs(c)*g,m==n-1?i=0<+this.m_yAxisData[o][m]?this.total-this.m_yAxisData[o][m]:this.m_yAxisData[o][m]-(this.total-this.m_yAxisData[o][m]):a=(i=0<+this.m_yAxisData[o][m]?+this.m_yAxisData[o][m]+a:a,this.total),t[o][m]=p-g*i):IsBoolean(this.m_chart.isBaseZero())?1==s?m==n-1?(i=this.total>A?(p=this.m_startY,this.total-this.m_yAxisData[o][m]>A?+A:this.total-this.m_yAxisData[o][m]):(p=this.m_startY,this.total-this.m_yAxisData[o][m]),t[o][m]=p-g*i):this.total>A?(p=this.m_startY,a=this.total,t[o][m]=p-g*(i=+A)):(p=this.m_startY,i=+this.m_yAxisData[o][m]+ +a,a=this.total,t[o][m]=p-g*i):1==e?(p=this.m_startY-Math.abs(c)*g,a=+(i=a)-+this.m_yAxisData[o][m],t[o][m]=+p+g*i):m==n-1?(p=this.m_startY,this.total<=A?this.total>=c?(i=this.total-this.m_yAxisData[o][m],t[o][m]=p-g*i):t[o][m]=p-g*(i=c):this.total>=c&&(i=this.total-this.m_yAxisData[o][m]<A?this.total-this.m_yAxisData[o][m]:A,t[o][m]=p-g*i)):(p=this.m_startY,this.total<=A?this.total>=c?(a=(0<this.m_yAxisData[o][m]?i=+this.m_yAxisData[o][m]+a:(i=IsBoolean(y)?A:a,y=!1),this.total),t[o][m]=p-g*i):0<this.m_yAxisData[o][m]||(i=IsBoolean(x)?A:a,a=this.total,t[o][m]=p-g*i):this.total>=c&&(x=y=(this.m_yAxisData[o][m],a=this.total,t[o][m]=p-g*(i=A),!0))):1==s?m==n-1?c<0?this.total<=A?(this.total>=c?(p=this.m_startY-Math.abs(c)*g,i=this.total-this.m_yAxisData[o][m]):(p=this.m_startY-Math.abs(c)*g,i=IsBoolean(x)?a:c,a=this.total,x=!1),t[o][m]=p-g*i):this.total>=c&&(p=this.m_startY-Math.abs(c)*g,i=this.total-this.m_yAxisData[o][m]<A?a:A,a=this.total,x=y=!0,t[o][m]=p-g*i):this.total<=A?(this.total,p=this.m_startY+Math.abs(c)*g,i=+this.m_yAxisData[o][m]+ +a,a=this.total,t[o][m]=p-g*i):this.total>=c&&(p=this.m_startY+Math.abs(c)*g,i=this.total-this.m_yAxisData[o][m]<A?a:A,a=this.total,t[o][m]=p-g*i):c<0?this.total<=A?(this.total>=c?(p=this.m_startY-Math.abs(c)*g,i=+this.m_yAxisData[o][m]+ +a,a=this.total):(p=this.m_startY-Math.abs(c)*g,i=IsBoolean(x)?a:c,a=this.total,x=!1),t[o][m]=p-g*i):this.total>=c&&(p=this.m_startY-Math.abs(c)*g,a=this.total,x=y=!0,t[o][m]=p-g*(i=A)):this.total<=A?(this.total,p=this.m_startY+Math.abs(c)*g,i=+this.m_yAxisData[o][m]+ +a,a=this.total,t[o][m]=p-g*i):this.total>=c&&(p=this.m_startY+Math.abs(c)*g,a=this.total,t[o][m]=p-g*(i=A)):1==e?m==n-1?0<=A?(p=this.m_startY-Math.abs(c)*g,i=a-this.m_yAxisData[o][m],t[o][m]=p-g*i):(p=this.m_startY-Math.abs(c)*g,t[o][m]=p-g*(i=A)):0<=A?(p=this.m_startY-Math.abs(c)*g,i=+a,a=this.total,t[o][m]=p-g*i):this.total>A?(p=this.m_startY-Math.abs(c)*g,f=!0,a=this.total,t[o][m]=p-g*(i=A)):(p=this.m_startY-Math.abs(c)*g,i=IsBoolean(f)?A:a,f=!1,a=this.total,t[o][m]=p-g*i):m==n-1?0<A?0<=c?this.total-this.m_yAxisData[o][m]<=A?(a=(this.total-this.m_yAxisData[o][m]>=c?0<this.m_yAxisData[o][m]?(p=this.m_startY,i=a-c):(p=this.m_startY,i=IsBoolean(_)?+a-+c:A-c,_=!0):(p=this.m_startY,i=IsBoolean(_)?+this.total-+c-+this.m_yAxisData[o][m]:A),this.total),t[o][m]=p-g*i):this.total-this.m_yAxisData[o][m]>c&&(p=this.m_startY,a=this.total,t[o][m]=p-g*(i=A-c),_=!1):this.total-this.m_yAxisData[o][m]<=A?(a=(i=this.total-this.m_yAxisData[o][m]>=c?0<this.m_yAxisData[o][m]?(p=this.m_startY-Math.abs(c)*g,a):(p=this.m_startY-Math.abs(c)*g,+a-(+this.total-+this.m_yAxisData[o][m])):0<this.m_yAxisData[o][m]?(p=this.m_startY-Math.abs(c)*g,a):(p=this.m_startY-Math.abs(c)*g,+a-this.m_yAxisData[o][m]),this.total),t[o][m]=p-g*i):this.total>=c&&0<this.m_yAxisData[o][m]&&(p=this.m_startY-Math.abs(c)*g,i=this.total-this.m_yAxisData[o][m]>A?A:a,a=this.total,_=!0,t[o][m]=p-g*i):0<c||(this.total-this.m_yAxisData[o][m]<=A?this.total-this.m_yAxisData[o][m]>=c?0<this.m_yAxisData[o][m]?(p=this.m_startY-Math.abs(c)*g,i=+this.m_yAxisData[o][m]+ +a,a=this.total,t[o][m]=p-g*i):(p=this.m_startY-Math.abs(c)*g,a=this.total,_=!0,t[o][m]=p-g*(i=A)):0<this.m_yAxisData[o][m]?(p=this.m_startY-Math.abs(c)*g,i=+this.m_yAxisData[o][m]+ +a,a=this.total,t[o][m]=p-g*i):(p=this.m_startY-Math.abs(c)*g,a=this.total,t[o][m]=p-g*(i=A)):this.total-this.m_yAxisData[o][m]>=c&&0<this.m_yAxisData[o][m]&&(p=this.m_startY-Math.abs(c)*g,i=IsBoolean(_)?A:a,_=!1,a=this.total,t[o][m]=p-g*i)):0<A?0<=c?this.total<=A?(this.total>=c?0<this.m_yAxisData[o][m]?(p=this.m_startY,i=+this.m_yAxisData[o][m]+ +a-+c,a=this.total,x=!0):(p=this.m_startY,i=IsBoolean(_)?+a-+c:A-c,_=!0,a=this.total):1==x?(p=this.m_startY,i=a-c,a=this.total,x=!1):(p=this.m_startY,i=IsBoolean(_)?+this.total-+c-+this.m_yAxisData[o][m]:A,a=this.total),t[o][m]=p-g*i):this.total>c&&(p=this.m_startY,a=this.total,t[o][m]=p-g*(i=A-c),_=!1):this.total<=A?(this.total>=c?0<this.m_yAxisData[o][m]?(p=this.m_startY-Math.abs(c)*g,i=+this.m_yAxisData[o][m]+ +a,a=this.total):(p=this.m_startY-Math.abs(c)*g,i=IsBoolean(_)?A:a,a=this.total,_=!1):a=(0<this.m_yAxisData[o][m]?(p=this.m_startY-Math.abs(c)*g,i=a):(p=this.m_startY-Math.abs(c)*g,i=IsBoolean(_)?A:a,_=!1),this.total),t[o][m]=p-g*i):this.total>=c&&0<this.m_yAxisData[o][m]&&(p=this.m_startY-Math.abs(c)*g,a=this.total,_=!0,t[o][m]=p-g*(i=A)):0<c||(this.total<=A?(this.total>=c?0<this.m_yAxisData[o][m]?(p=this.m_startY-Math.abs(c)*g,i=+this.m_yAxisData[o][m]+ +a,a=this.total):(p=this.m_startY-Math.abs(c)*g,i=Math.abs(this.total)-Math.abs(A)>Math.abs(this.m_yAxisData[o][m])?a:A,a=this.total,_=!0):a=(i=0<this.m_yAxisData[o][m]?(p=this.m_startY-Math.abs(c)*g,+this.m_yAxisData[o][m]+ +a):(p=this.m_startY-Math.abs(c)*g,a),this.total),t[o][m]=p-g*i):this.total>=c&&0<this.m_yAxisData[o][m]&&(p=this.m_startY-Math.abs(c)*g,i=IsBoolean(_)?A:a,_=!1,a=this.total,t[o][m]=p-g*i))}return t},WaterfallCalculation.prototype.setstackHeightArray=function(){for(var t=[],a=0,i=!1,s=!1,e=this.total=0,h=0,r=!1,o=!1,l=0,m=this.m_yAxisData.length;l<m;l++)for(var n=0,_=this.m_yAxisData[l].length;n<_;n++)0<this.m_yAxisData[l][n]&&e++,e==this.m_yAxisData[l].length&&(i=!0),this.m_yAxisData[l][n]<0&&h++,h==this.m_yAxisData[l].length&&(s=!0);for(var y,x,g,c,A,f,p,u=this.getRatio(),D=this.minValue(),b=this.getMaxValue(),d=!0,l=0,m=this.m_yAxisData.length;l<m;l++){t[l]=[];for(n=0,_=this.m_yAxisData[l].length;n<_;n++)this.total=this.total+ +this.m_yAxisData[l][n],IsBoolean(this.m_chart.isAxisSetup())?IsBoolean(this.m_chart.isBaseZero())?1==i?(a=this.m_yAxisData[l][n],t[l][n]=u*a):1==s?(a=this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a)):n==_-1?0<this.total-this.m_yAxisData[l][n]?(a=IsBoolean(x)?+this.m_yAxisData[l][n]-(+this.m_yAxisData[l][n]-+this.total):+this.m_yAxisData[l][n],x=!1,t[l][n]=u*Math.abs(a)):D<0?(a=this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a)):(a=this.total-this.m_yAxisData[l][n]<D?0:+this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a),x=!0):0<this.total?(a=IsBoolean(x)?+this.m_yAxisData[l][n]-(+this.m_yAxisData[l][n]-+this.total):+this.m_yAxisData[l][n],A=x=!1,t[l][n]=u*Math.abs(a)):D<0?(a=this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a)):IsBoolean(A)?(a=0,t[l][n]=u*Math.abs(a)):(a=this.total<D?+this.m_yAxisData[l][n]-+this.total:+this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a),A=x=!0):1==i?(a=this.m_yAxisData[l][n],t[l][n]=u*a):(a=1==s?this.m_yAxisData[l][n]:+this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a)):IsBoolean(this.m_chart.isBaseZero())?1==i?n==_-1?(a=this.total>b&&this.total-this.m_yAxisData[l][n]>b?b:this.total-this.m_yAxisData[l][n],t[l][n]=u*a):this.total>b?IsBoolean(o)?t[l][n]=u*(a=0):(a=+this.m_yAxisData[l][n]-(this.total-b),t[l][n]=u*a,o=!0):(a=this.m_yAxisData[l][n],t[l][n]=u*a):1==s?(a=0,t[l][n]=u*Math.abs(a)):n==_-1?this.total<=b?this.total>=D?(a=this.total-this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a),g=!0):(a=0,t[l][n]=u*Math.abs(a)):this.total>=D&&(a=IsBoolean(g)?this.m_yAxisData[l][n]-(this.total-this.m_yAxisData[l][n]-this.m_yAxisData[l][n]):0,c=!(g=!1),t[l][n]=u*Math.abs(a)):this.total<=b?this.total>=D?0<this.m_yAxisData[l][n]?(a=IsBoolean(x)?this.m_yAxisData[l][n]-(this.m_yAxisData[l][n]-this.total):this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a),g=y=!0):(a=IsBoolean(c)?+this.m_yAxisData[l][n]-(+this.m_yAxisData[l][n]+ +b):this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a),c=!(y=!0)):0<this.m_yAxisData[l][n]||(IsBoolean(A)&&Math.abs(this.m_yAxisData[l][n])>b-D?(a=b-D,x=!(A=!1),t[l][n]=u*Math.abs(a)):(a=IsBoolean(y)?+this.m_yAxisData[l][n]-+this.total:0,t[l][n]=u*Math.abs(a),x=!(y=!1))):this.total>=D&&(A=0<this.m_yAxisData[l][n]?(a=IsBoolean(g)?this.m_yAxisData[l][n]-(this.total-b):0,t[l][n]=u*Math.abs(a),c=!(g=!1)):(a=0,t[l][n]=u*Math.abs(a),!0)):1==i?n==_-1?D<0?this.total<=b?this.total>=D&&(a=this.total-this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a)):(a=this.total-this.m_yAxisData[l][n]>b?b:this.m_yAxisData[l][n]-(this.total-this.m_yAxisData[l][n]-this.m_yAxisData[l][n]),t[l][n]=u*Math.abs(a)):this.total<=b?this.total>D&&(a=this.m_yAxisData[l][n],g=!0,t[l][n]=u*Math.abs(a)):this.total>D&&(a=IsBoolean(g)?this.total-this.m_yAxisData[l][n]-D:b-D,g=!1,t[l][n]=u*Math.abs(a)):D<0?this.total<=b?this.total>=D&&(a=this.m_yAxisData[l][n],g=!0,t[l][n]=u*Math.abs(a)):(a=IsBoolean(g)?this.m_yAxisData[l][n]-(this.total-b):0,g=!1,t[l][n]=u*Math.abs(a)):this.total<=b?this.total>D&&(a=+this.total-+D>=this.m_yAxisData[l][n]?this.m_yAxisData[l][n]:+this.total-+D,g=!0,t[l][n]=u*Math.abs(a)):this.total>D&&(a=IsBoolean(g)?this.m_yAxisData[l][n]-(this.total-b):0,g=!1,t[l][n]=u*Math.abs(a)):1==s?n==_-1?(a=0<=b?IsBoolean(A)?this.m_yAxisData[l][n]:+D:IsBoolean(A)?this.m_yAxisData[l][n]-+b:D-b,t[l][n]=u*Math.abs(a)):0<=b?this.total<D?(a=IsBoolean(A)?+this.m_yAxisData[l][n]-(+this.total-+D):0,A=!1,t[l][n]=u*Math.abs(a)):(a=this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a),A=!0):(this.total>b?a=IsBoolean(d)?0:this.m_yAxisData[l][n]-+b:A=this.total<D?(a=IsBoolean(A)?this.m_yAxisData[l][n]-(+this.total-+D):0,!1):(a=IsBoolean(d)?this.total-+b:this.m_yAxisData[l][n],!(d=!1)),t[l][n]=u*Math.abs(a)):n==_-1?0<b?0<=D?this.total-this.m_yAxisData[l][n]<=b?(this.total-this.m_yAxisData[l][n]>=D?0<this.m_yAxisData[l][n]?a=+this.total-+this.m_yAxisData[l][n]-+D>=this.m_yAxisData[l][n]?this.m_yAxisData[l][n]:+this.total-this.m_yAxisData[l][n]-+D:!IsBoolean(f)&&this.m_yAxisData[l][n]<0?(a=+this.m_yAxisData[l][n]+(+this.total-(+b+ +this.m_yAxisData[l][n])),f=!0):(a=IsBoolean(y)?this.m_yAxisData[l][n]:0,y=!0):a=this.total<D?0:+this.total-+D-+this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a)):0<this.m_yAxisData[l][n]?b-D<this.m_yAxisData[l][n]?y=(r=(a=!IsBoolean(p)&&IsBoolean(r)?0:b-D,!0),t[l][n]=u*Math.abs(a),!1):(a=+this.total-+b-this.m_yAxisData[l][n]<this.m_yAxisData[l][n]?+this.m_yAxisData[l][n]-(+this.total-+b):+this.total-+b-this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a),f=!1):(a=0,t[l][n]=u*Math.abs(a)):this.total<=b?this.total>=D?(0<this.m_yAxisData[l][n]?(a=IsBoolean(x)?+D-+this.total:this.m_yAxisData[l][n],x=!1):(a=IsBoolean(y)?b-this.total:this.m_yAxisData[l][n],y=!1),t[l][n]=u*Math.abs(a)):0<this.m_yAxisData[l][n]||(a=this.m_yAxisData[l][n]>D?this.m_yAxisData[l][n]:D,b-D<=(a=Math.abs(a))&&(a=b-D),x=!0,t[l][n]=u*Math.abs(a)):this.total>=D&&0<this.m_yAxisData[l][n]&&(a=this.total-this.m_yAxisData[l][n]>b?+this.m_yAxisData[l][n]-(+this.total-+this.m_yAxisData[l][n]-+b):this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a),y=!0):0<=D||(this.total-this.m_yAxisData[l][n]<=b?this.total-this.m_yAxisData[l][n]>=D?0<this.m_yAxisData[l][n]?(a=IsBoolean(x)?this.total-D:this.m_yAxisData[l][n],x=!1,t[l][n]=u*Math.abs(a)):(a=this.m_yAxisData[l][n]-b,t[l][n]=u*Math.abs(a),y=!0):0<this.m_yAxisData[l][n]?(a=this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a)):(a=b<this.m_yAxisData[l][n]?0:this.m_yAxisData[l][n]-b,t[l][n]=u*Math.abs(a),x=!0):this.total>=D&&0<this.m_yAxisData[l][n]&&(a=IsBoolean(y)?+this.m_yAxisData[l][n]+(+b-+this.total):0,y=!1,t[l][n]=u*Math.abs(a))):0<b?0<=D?this.total<=b?(this.total>=D?0<this.m_yAxisData[l][n]?(a=+this.total-+D>=this.m_yAxisData[l][n]?this.m_yAxisData[l][n]:+this.total-+D,A=r=!0):!IsBoolean(f)&&this.m_yAxisData[l][n]<0?(a=+this.m_yAxisData[l][n]+(+this.total-(+b+ +this.m_yAxisData[l][n])),f=!0):(a=IsBoolean(y)?this.m_yAxisData[l][n]:b-this.total,y=!0):IsBoolean(A)?(a=+this.m_yAxisData[l][n]+(+D-+this.total),A=!1):a=this.total<D?0:+this.total-+D-+this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a)):0<this.m_yAxisData[l][n]?b-D<this.m_yAxisData[l][n]?(a=IsBoolean(r)?0:b-D,r=!0,t[l][n]=u*Math.abs(a),y=!1):IsBoolean(r)?(a=this.m_yAxisData[l][n]-(this.total-b),y=!(p=!0),t[l][n]=u*Math.abs(a)):(a=+this.total-+b-this.m_yAxisData[l][n]<this.m_yAxisData[l][n]?+this.m_yAxisData[l][n]-(+this.total-+b):+this.total-+b-this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a),f=!1):(a=0,t[l][n]=u*Math.abs(a)):this.total<=b?this.total>=D?(0<this.m_yAxisData[l][n]?(a=IsBoolean(x)?+D-+this.total:this.m_yAxisData[l][n],x=!1):(a=IsBoolean(y)?b-this.total:this.m_yAxisData[l][n],y=!1),t[l][n]=u*Math.abs(a)):0<this.m_yAxisData[l][n]||(a=Math.abs(this.total)>Math.abs(D)?+this.m_yAxisData[l][n]+(Math.abs(this.total)-Math.abs(D)):this.m_yAxisData[l][n],b-D<=(a=Math.abs(a))&&(a=b-D),g=x=!0,t[l][n]=u*Math.abs(a)):this.total>=D&&0<this.m_yAxisData[l][n]&&(IsBoolean(g)?(a=this.total-b<this.m_yAxisData[l][n]?b-D:0,t[l][n]=u*Math.abs(a),g=!1):(a=this.total-b<this.m_yAxisData[l][n]?+this.m_yAxisData[l][n]-(+this.total-+b):0,t[l][n]=u*Math.abs(a),y=!0)):0<=D||(this.total<=b?this.total>=D?0<this.m_yAxisData[l][n]?(a=IsBoolean(x)?this.total-D:this.m_yAxisData[l][n],x=!1,t[l][n]=u*Math.abs(a)):(a=Math.abs(this.total)-Math.abs(b)>Math.abs(this.m_yAxisData[l][n])?this.m_yAxisData[l][n]:this.total-b,t[l][n]=u*Math.abs(a),y=!0):0<this.m_yAxisData[l][n]?(a=this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a)):(a=this.total<D?this.m_yAxisData[l][n]-(this.total-D):this.m_yAxisData[l][n],t[l][n]=u*Math.abs(a),x=!0):this.total>=D&&0<this.m_yAxisData[l][n]&&(a=IsBoolean(y)?+this.m_yAxisData[l][n]+(+b-+this.total):0,y=!1,t[l][n]=u*Math.abs(a)))}this.m_stackHeightArray=t},WaterfallCalculation.prototype.getxPixelArray=function(){return this.m_xPixelArray},WaterfallCalculation.prototype.getyPixelArray=function(){return this.m_ypixelArray},WaterfallCalculation.prototype.getstackHeightArray=function(){return this.m_stackHeightArray},WaterfallCalculation.prototype.getYAxisText=function(){return this.m_chart.m_yAxisText},WaterfallCalculation.prototype.getYAxisMarkersArray=function(){return this.m_chart.m_yAxisMarkersArray},WaterfallColumns.prototype.init=function(t,a,i,s,e,h,r,o,l,m,n,_){this.m_showGradient=o,this.m_xPixel=t,this.m_yPixelArray=a,this.m_stackWidth=i,this.m_stackHeightArray=s,this.m_stackPercentageArray=e,this.m_stackColorArray=h,this.m_strokeColor=r,this.m_showPercentFlag=l,this.m_percentvalueFlag=m,this.m_plotTrasparencyArray=n,this.m_chart=_;for(var y=0,x=this.m_yPixelArray.length;y<x;y++)this.m_stackArray[y]=new Stack,this.m_stackArray[y].init(this.m_xPixel[y],this.m_yPixelArray[y],this.m_stackWidth,this.m_stackHeightArray[y],this.m_stackColorArray[y],this.m_strokeColor,this.m_showGradient,this.m_chart.ctx,this.m_chart.m_chartbase,this.m_stackPercentageArray[y],this.m_showPercentFlag,this.m_percentvalueFlag,this.m_plotTrasparencyArray,this.m_chart.visibleSeriesInfo.seriesData,this.m_chart)},WaterfallColumns.prototype.drawColumns=function(){for(var t=0,a=this.m_yPixelArray.length;t<a;t++)this.isInRange(t)||this.m_stackArray[t].drawStack()},WaterfallColumns.prototype.isInRange=function(t){return this.m_yPixelArray[t]>=this.m_chart.getStartY()&&this.m_yPixelArray[t]<=this.m_chart.getEndY()},WaterfallChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.drawLegends();var t=this.IsDrawingPossible();IsBoolean(t.permission)?(this.drawXAxis(),this.drawYAxis(),this.drawWaterfallChart()):this.drawMessage(t.message)},WaterfallChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},WaterfallChart.prototype.drawTitle=function(){this.m_title.draw()},WaterfallChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},WaterfallChart.prototype.drawXAxis=function(){this.m_xAxis.drawTickMarks(),this.m_xAxis.drawVerticalLine(),this.m_xAxis.markXaxis(),this.m_xAxis.drawXAxis()},WaterfallChart.prototype.drawYAxis=function(){IsBoolean(this.m_showmarkerline)&&this.m_yAxis.horizontalMarkerLines(),IsBoolean(this.m_zeromarkerline)&&!IsBoolean(this.m_basezero)&&IsBoolean(this.m_yAxis.hasNegativeAxisMarker(this.m_yAxisMarkersArray))&&this.m_yAxis.zeroMarkerLine(),this.m_yAxis.markYaxis(),this.m_yAxis.drawYAxis()},WaterfallChart.prototype.drawWaterfallChart=function(){for(var t=0,a=this.visibleSeriesInfo.seriesName.length;t<a;t++)this.m_columnsArray[this.visibleSeriesInfo.seriesName[t]].drawColumns()};
//# sourceMappingURL=WaterfallChart.min.js.map