/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function BubbleChart(t,i){this.base=Chart,this.base(),this.m_x=680,this.m_y=20,this.m_width=300,this.m_height=260,this.m_radius=2,this.minRadius=2,this.maxRadius=26,this.m_axisToChartMargin=this.maxRadius,this.m_axistodrawingareamargin=this.maxRadius,this.m_bubbleSeries={},this.m_colorNames=[],this.m_pointSeries=[],this.m_categoryNames=[],this.m_seriesNames=[],this.m_seriesarr=[],this.m_categoryData=[],this.m_seriesData=[],this.m_updateSeriesValue=[],this.m_feild="",this.m_bandcolors="",this.m_bandalphas="",this.m_banddisplaynames="",this.m_rangesofseries="",this.m_rangedseriescolors="",this.m_rangedseriesdisplaynames="",this.m_colorbandranges="",this.color="",this.m_xPositionArray=[],this.m_yPositionArray=[],this.m_calculation=new BubbleCalculation,this.m_xAxis=new Xaxis,this.m_yAxis=new Yaxis,this.m_rangeenabledseries="false",this.BubbleSeriesColor=[],this.m_showcolorbands="false",this.m_showcolorbandlegends="false",this.m_showcheckboxwithlegend="false",this.m_maximumaxisvalue="",this.m_minimumaxisvalue="",this.m_updateSeriesValue=[],this.m_seriesactualdatafordatalabel=[],this.m_flag="false",this.xPositions="",this.yPositions="",this.m_chartbase="plane",this.m_luminance="0.4",this.m_shadowvisible="false",this.noOfRows=1,this.m_chartContainer=t,this.m_zIndex=i,this.m_gradientfill=!0,this.m_defaultfillcolor="#e0dfdf",this.m_solidcolorfill=!1,this.enableDrillHighlighter=!1,this.m_drilltoggle=!0}function BubbleCalculation(){this.startX,this.startY,this.endX,this.endY,this.xAxisData=[],this.yAxisData=[],this.xPositionArray=[],this.yPositionArray=[],this.ratio=[],this.radius=[],this.m_bubbleSeriesColor=[],this.m_yAxisMarkersArray=[],this.m_numberOfMarkers=6,this.rangeSeries="",this.bubbleColorMap=new Object,this.m_Mid=[],this.m_Low=[],this.m_High=[],this.colorManager="",this.rangeSeriesColor=[],this.rangeOfSeries=[],this.lowColor="",this.midColor="",this.highColor="",this.spaceFromYAxis="",this.m_range=[],this.m_range1=[],this.m_range2=[]}function BubbleSeries(){this.color,this.xPositionArray=[],this.yPositionArray=[],this.m_bubble=[],this.ctx="",this.m_chart=""}function Bubble(){this.color,this.radius,this.xPosition,this.yPosition,this.ctx=""}BubbleChart.prototype=new Chart,BubbleChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},BubbleChart.prototype.setFields=function(t){for(var i=[],e=[],s=0,a=(this.m_fieldsJson=t).length;s<a;s++)switch(this.getProperAttributeNameValue(t[s],"Type")){case"Category":i.push(t[s]);break;case"Series":case"CalculatedField":e.push(t[s])}this.setCategory(i),this.setSeries(e)},BubbleChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryFieldColor=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr={};for(var i=0,e=0,s=t.length;e<s;e++){var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allCategoryDisplayNames[e]=a,this.m_allCategoryNames[e]=this.getProperAttributeNameValue(t[e],"Name"),this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]])&&(this.m_categoryNames[i]=this.getProperAttributeNameValue(t[e],"Name"),this.m_categoryDisplayNames[i]=a,this.m_categoryFieldColor[i]=this.getProperAttributeNameValue(t[e],"Color"),i++)}},BubbleChart.prototype.ParseJsonAttributes=function(t,i){for(var e in this.chartJson=t)if("Chart"==e)for(var s in t[e])switch(s){case"xAxis":for(var a in t[e][s]){var r=this.getNodeAttributeName(a);i.m_xAxis[r]=t[e][s][a]}break;case"yAxis":for(var o in t[e][s]){var r=this.getNodeAttributeName(o);i.m_yAxis[r]=t[e][s][o]}break;case"Title":for(var h in t[e][s]){var r=this.getNodeAttributeName(h);i.m_title[r]=t[e][s][h]}break;case"SubTitle":for(var l in t[e][s]){r=this.getNodeAttributeName(l);i.m_subTitle[r]=t[e][s][l]}break;case"CategoryColors":var n,m=new CategoryColors;for(n in this.setCategoryColors(m),t[e][s])if("CategoryColor"===n){var u=this.getArrayOfSingleLengthJson(t[e][s][n]);m.cateogryNameColorMap=new Object;for(var g=0;g<u.length;g++){var _,c=new CategoryColor;for(_ in m.setCategoryColor(c),u[g])c[r=this.getNodeAttributeName(_)]=u[g][_];m.cateogryNameColorMap[c.getCategoryName()]=c.getColor()}}else{r=this.getNodeAttributeName(n);i.m_categoryColors[r]=t[e][s][n]}m.setCategoryDefaultColorSet();break;case"ConditionalColors":if(""!=t[e][s])for(var d=new ConditionalColors,b=(this.setConditionalColors(d),this.getArrayOfSingleLengthJson(t[e][s].ConditionalColor)),g=0;g<b.length;g++){var y,p=new ConditionalColor;for(y in d.setConditionalColor(p),b[g])p[r=this.getNodeAttributeName(y)]=b[g][y]}break;default:i[r=this.getNodeAttributeName(s)]=t[e][s]}else i[r=this.getNodeAttributeName(e)]=t[e]},BubbleChart.prototype.getDataProvider=function(){return this.m_dataProvider},BubbleChart.prototype.getCategoryNames=function(){return this.m_categoryNames},BubbleChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},BubbleChart.prototype.setSeries=function(t){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors=[],this.m_seriesDataLabelProperty=[],this.m_legendNames=[],this.m_radiusField=[],this.m_seriesVisibleArray=[],this.m_seriesVisibleArr={},this.m_allSeriesDisplayNames=[],this.m_allSeriesNames=[],this.m_colorField=[],this.m_transparency=[];for(var i=0,e=(this.legendMap={},0),s=t.length;e<s;e++){var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allSeriesDisplayNames[e]=a,this.m_allSeriesNames[e]=this.getProperAttributeNameValue(t[e],"Name"),this.m_seriesVisibleArray[e]=this.getProperAttributeNameValue(t[e],"visible"),this.m_seriesVisibleArr[this.m_allSeriesNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),IsBoolean(this.m_seriesVisibleArr[this.m_allSeriesNames[e]])&&(this.m_seriesDisplayNames[i]=a,this.m_seriesNames[i]=this.getProperAttributeNameValue(t[e],"Name"),this.m_legendNames[i]=a,this.m_seriesColors[i]=convertColorToHex(this.getProperAttributeNameValue(t[e],"Color")),this.m_seriesDataLabelProperty[i]=this.getProperAttributeNameValue(t[e],"DataLabelCustomProperties"),void 0!==this.m_seriesDataLabelProperty[i]?(IsBoolean(this.m_seriesDataLabelProperty[i].useFieldColor)&&(this.m_seriesDataLabelProperty[i].dataLabelFontColor=this.m_seriesColors[i]),IsBoolean(this.m_seriesDataLabelProperty[i].dataLabelUseComponentFormater)&&(this.m_seriesDataLabelProperty[i].datalabelFormaterCurrency=this.m_unit,this.m_seriesDataLabelProperty[i].datalabelFormaterPrecision=this.m_precision,this.m_seriesDataLabelProperty[i].datalabelFormaterPosition=this.m_signposition,this.m_seriesDataLabelProperty[i].datalabelFormaterUnit=this.m_secondaryunit)):this.m_seriesDataLabelProperty[i]=this.getDataLabelProperties(),a=this.getProperAttributeNameValue(t[e],"RadiusField"),this.m_radiusField[i]=null!=a&&null!==a&&""!==a&&a!=this.m_categoryNames[0]?a:this.m_seriesNames[i],a=this.getProperAttributeNameValue(t[e],"ColorField"),this.m_colorField[this.m_seriesNames[i]]=null!=a&&null!==a&&""!==a?a:"",a=this.getProperAttributeNameValue(t[e],"PlotTransparency"),this.m_transparency[i]=null!=a&&null!==a&&""!==a?a:.3,a={seriesName:this.m_seriesNames[i],displayName:this.m_seriesDisplayNames[i],color:this.m_seriesColors[i],shape:"point",index:i},this.legendMap[this.m_seriesNames[i]]=a,i++)}this.setLegendsIntialLoad(this.m_defaultlegendfields)},BubbleChart.prototype.isHexaColor=function(t){return"string"==typeof t&&isNaN(parseInt(t,16))},BubbleChart.prototype.getLegendInfo=function(){return this.legendMap},BubbleChart.prototype.getAllSeriesNames=function(){return this.m_allSeriesNames},BubbleChart.prototype.getAllCategoryNames=function(){return this.m_allCategoryNames},BubbleChart.prototype.getSeriesNames=function(){return this.m_seriesNames},BubbleChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},BubbleChart.prototype.getSeriesColors=function(){return this.m_seriesColors},BubbleChart.prototype.setPlotRadiusData=function(){this.m_plotRadiusData=[];for(var t=0,i=this.m_radiusField.length;t<i;t++)this.m_plotRadiusData[t]=this.getRadiusFromJSON(this.m_radiusField[t],this.getSeriesNames()[t])},BubbleChart.prototype.getPlotRadiusData=function(){return this.m_plotRadiusData},BubbleChart.prototype.getRadiusFromJSON=function(t,i){for(var e=[],s=0,a=this.getDataProvider().length;s<a;s++)null==this.getDataProvider()[s][t]||"undefined"==this.getDataProvider()[s][t]?e[s]=this.getDataProvider()[s][i]:e[s]=this.getDataProvider()[s][t];return e},BubbleChart.prototype.setCategorySeriesData=function(){this.m_categoryData=[],this.m_seriesData=[],this.m_seriesDataForToolTip=[],this.m_displaySeriesDataFlag=[],this.m_seriesDataForDataLabel=[],this.m_plotRadiusData=[],this.m_colorFieldData=[],this.m_transparencyarr=[];for(var t=0,i=this.getDataProvider().length;t<i;t++){var e=this.getDataProvider()[t];if(this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var s=0;s<this.getCategoryNames().length;s++){this.m_categoryData[s]||(this.m_categoryData[s]=[]);var a=this.getValidFieldDataFromRecord(e,this.getCategoryNames()[s]);this.m_categoryData[s][t]=a}}this.m_displaySeriesDataFlag[t]=[];for(var r=0,o=this.getSeriesNames().length;r<o;r++){this.m_seriesData[r]||(this.m_seriesData[r]=[],this.m_seriesDataForToolTip[r]=[],this.m_seriesDataForDataLabel[r]=[],this.m_transparencyarr[r]=[]);var a=this.getValidFieldDataFromRecord(e,this.getSeriesNames()[r]),h=this.getValidFieldDataFromRecord(e,this.m_seriesDataLabelProperty[r].datalabelField);this.m_displaySeriesDataFlag[t][r]=!0,isNaN(a)&&(this.m_displaySeriesDataFlag[t][r]=!1,a=getNumericComparableValue(a)),this.m_seriesData[r][t]=a,this.m_seriesDataForToolTip[r][t]=a,this.m_seriesDataForDataLabel[r][t]=h,this.m_transparencyarr[r][t]=this.m_transparency[r]}for(var l=0,o=this.getSeriesNames().length;l<o;l++){this.m_colorFieldData[l]||(this.m_colorFieldData[l]=[]);var n=""!=this.m_colorField[this.getSeriesNames()[l]]?this.m_colorField[this.getSeriesNames()[l]]:this.getSeriesNames()[l];""!=(a=this.getValidFieldDataFromRecord(e,n))&&"null"!=a||(a=0),isNaN(a)&&(a=getNumericComparableValue(a)),this.m_colorFieldData[l][t]=a}for(var m=0,o=this.m_radiusField.length;m<o;m++){this.m_plotRadiusData[m]||(this.m_plotRadiusData[m]=[]);a=this.getValidAltFieldDataFromRecord(e,this.m_radiusField[m],this.getSeriesNames()[m]);this.m_plotRadiusData[m][t]=this.isCheckRadiusWithDataSet(this.m_radiusField[m])||IsBoolean(this.m_designMode)?a:+this.m_radiusField[m],IsBoolean(isNaN(a)||""===a)&&(this.m_plotRadiusData[m][t]=null==a?0:getNumericComparableValue(a))}}this.m_seriesactualdatafordatalabel=this.m_seriesData},BubbleChart.prototype.isCheckRadiusWithDataSet=function(t){for(var i=!1,e=0,s=this.allDataSetFieldNameArray.length;e<s;e++)this.allDataSetFieldNameArray[e]==t&&(i=!0);return i},BubbleChart.prototype.setCategoryData=function(){if(this.m_categoryData=[],this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var t=0,i=this.getCategoryNames().length;t<i;t++)this.m_categoryData[t]=this.getDataFromJSON(this.getCategoryNames()[t])}},BubbleChart.prototype.getCategoryData=function(){return convertArrayType(this.m_categoryData)},BubbleChart.prototype.setSeriesData=function(){this.m_seriesData=[];for(var t=0,i=this.getSeriesNames().length;t<i;t++)this.m_seriesData[t]=this.getDataFromJSON(this.getSeriesNames()[t])},BubbleChart.prototype.getSeriesData=function(){return convertArrayType(this.m_seriesData)},BubbleChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0,i=this.getAllCategoryNames().length;t<i;t++)this.m_allfieldsName.push(this.getAllCategoryNames()[t]);for(var e=0,s=this.getAllSeriesNames().length;e<s;e++)this.m_allfieldsName.push(this.getAllSeriesNames()[e])},BubbleChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var t=0,i=this.getCategoryDisplayNames().length;t<i;t++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[t]);for(var e=0,s=this.getSeriesDisplayNames().length;e<s;e++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[e])},BubbleChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},BubbleChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},BubbleChart.prototype.setSeriesColor=function(t){this.m_seriesColor=t},BubbleChart.prototype.getSeriesColor=function(){return this.m_seriesColor},BubbleChart.prototype.setLegendNames=function(t){this.m_legendNames=t},BubbleChart.prototype.getLegendNames=function(){return this.m_legendNames},BubbleChart.prototype.setAllDataSetFeildsName=function(){var i=this.getDataProvider();this.allDataSetFieldNameArray=[];try{var t=_.chain(i).map(_.keys).flatten().unique().value();this.allDataSetFieldNameArray=t}catch(t){for(var e in i[0])this.allDataSetFieldNameArray.push(e)}},BubbleChart.prototype.init=function(){var t;this.setAllDataSetFeildsName(),this.setCategorySeriesData(),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.isSeriesDataEmpty(),this.setShowSeries(this.getAllFieldsName()),this.visibleSeriesInfo=this.getVisibleSeriesData(this.getSeriesData()),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),IsBoolean(this.m_isEmptySeries)||!IsBoolean(this.isVisibleSeries())||IsBoolean(this.isEmptyCategory)||(this.m_categoryData=this.getCatDataInFormat(this.m_categoryData),t=getDuplicateArray(this.m_seriesData),this.m_tooltipseriesdata=this.getSerDataInFormat(t,!1),this.m_seriesData=this.getSerDataInFormat(this.m_seriesData,!0),this.setColorsForSeries(),this.updateSeriesDataForCalculation(),this.initializeCalculation(),this.initializeBubble(),this.m_xAxis.init(this,this.m_calculation),this.m_yAxis.init(this,this.m_calculation)),this.initializeToolTipProperty(),this.m_tooltip.init(this)},BubbleChart.prototype.setRadiusField=function(){for(var t=0,i=this.m_plotRadiusData.length;t<i;t++)for(var e=0,s=this.m_plotRadiusData[0].length;e<s;e++)isNaN(this.m_plotRadiusData[t][e])&&(null==this.m_plotRadiusData[t][e]?this.m_plotRadiusData[t][e]=0:this.m_plotRadiusData[t][e]=getNumericComparableValue(this.m_plotRadiusData[t][e]))},BubbleChart.prototype.getCatDataInFormat=function(t){for(var i=[],e=0,s=t[0].length;e<s;e++){i[e]=[];for(var a=0,r=t.length;a<r;a++)i[e][a]=t[a][e]}return i},BubbleChart.prototype.getSerDataInFormat=function(t,i){var e=[];this.m_displaySeriesDataFlag=[];for(var s=0,a=t[0].length;s<a;s++){e[s]=[],this.m_displaySeriesDataFlag[s]=[];for(var r=0,o=t.length;r<o;r++)this.m_displaySeriesDataFlag[s][r]=!0,isNaN(t[r][s])&&IsBoolean(i)?(this.m_displaySeriesDataFlag[s][r]=!1,e[s][r]=getNumericComparableValue(t[r][s]),isNaN(e[s][r])&&(e[s][r]=0)):e[s][r]=t[r][s]}return e},BubbleChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.drawLegends();var t=this.IsDrawingPossible();IsBoolean(t.permission)?(this.drawXAxis(),this.drawYAxis(),this.drawColorBands(),this.drawBubbleChart(),this.drawDataLabel()):this.drawMessage(t.message)},BubbleChart.prototype.drawLegends=function(){this.drawChartLegends(),IsBoolean(this.m_legendFlag)||null==this.m_legendFlag?this.drawLegendComponent():this.m_legendFlag=!0},BubbleChart.prototype.drawChartLegends=function(){IsBoolean(this.getShowLegends())||IsBoolean(this.m_showcolorbandlegends)?(this.drawLegendIcon(),IsBoolean(this.m_designMode)||this.drawLegendContentDiv()):$("#legendIcon"+this.m_objectid).remove()},BubbleChart.prototype.drawLegendContentDiv=function(){for(var t,i=this,e=IsBoolean(this.m_showdynamicrange)?["Min","Max"]:this.m_rangedseriesdisplaynames.split(","),s=IsBoolean(this.m_showdynamicrange)?[this.m_minrangecolor,this.m_maxrangecolor]:this.m_rangedseriescolors.split(","),a=[],r=0,o=s.length;r<o;r++)a[r]=convertColorToHex(s[r]);for(var h=IsBoolean(this.m_showcolorbandlegends)&&""!=e[0]&&""!=s[0]?(t=e,a):(t=this.getLegendNames(),this.getSeriesColors()),e=this.getLegendContentDiv(),l='<table class="legend">',n=0,m=t.length;n<m;n++){var u=this.getHTMLShape("point");l+='<tr style="font-style:'+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'"><td>'+this.drawLegendShape(u,h[n])+'<span  style="display:inline;">'+t[n]+"</span></td></tr>"}l+="</table>",$(e).append(l);var g=convertColorToHex(i.m_legendbackgroundcolor),_=($(e).find(".legend").css("background-color",hex2rgb(g,i.m_legendbackgroundtransparency)),$(e).find("td").each(function(){$(this).css({"background-color":hex2rgb(g,i.m_legendbackgroundtransparency),"font-size":i.m_legendfontsize+"px"})}),$("#legendContent"+this.m_objectid).height());+_>+this.m_height-35&&($("#legendContent"+this.m_objectid).css("height",+this.m_height-35+"px"),$("#legendContent"+this.m_objectid).css("overflow-x","hidden"));var c=e.getElementsByTagName("table")[0].offsetWidth;0==c?c=119:+_>+this.m_height-35?c+=20:c+=10,e.style.width=c+"px",e.style.left=this.m_width-c-25+"px",IsBoolean(this.m_hidelegendonstart)&&$(e).toggle("hide")},BubbleChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},BubbleChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEvent()},BubbleChart.prototype.getSeriesData=function(){return this.m_seriesData},BubbleChart.prototype.updateSeriesDataForCalculation=function(){for(var t=0,i=this.m_seriesNames.length;t<i;t++){this.m_updateSeriesValue[t]=[];for(var e=0,s=this.m_seriesData.length;e<s;e++){var a=+checkNumeric(this.m_seriesData[e][t]);isNaN(a)||""==a||"null"==a?this.m_updateSeriesValue[t][e]=0:this.m_updateSeriesValue[t][e]=a}}},BubbleChart.prototype.initializeCalculation=function(){var t=IsBoolean(this.m_isRepeaterPart)&&IsBoolean(this.m_parentObj.m_repeatercommonmarker)?this.getAllSeriesDataForRepeater():this.getVisibleSeriesData(this.m_updateSeriesValue).seriesData,t=(this.calculateMinMax(t),this.calculateFinalMinMax(),this.setChartDrawingArea(),this.m_calculation.init(this.m_calculation,this.m_categoryData,this.m_updateSeriesValue,this.m_colorFieldData,this),this.m_xPositionArray=this.m_calculation.getXPosition(),this.m_yPositionArray=this.m_calculation.getYPosition(),this.m_radius=this.m_calculation.getBubbleRadius(),this.m_calculation.getBubbleSeriesColor());this.setColor(t)},BubbleChart.prototype.calculateMinMax=function(t){this.calculateMax=t[0][0],this.calculateMin=t[0][0];for(var i=[],e=0,s=0,a=t.length;e<a;e++)for(var r=0;r<t[e].length;r++)i[s++]=t[e][r];var o=i.sort(numOrdA);this.calculateMin=o[0];for(e=0,a=t.length;e<a;e++)for(var r=0,h=t[e].length;r<h;r++)+t[e][r]>this.calculateMax&&(this.calculateMax=+t[e][r]),+t[e][r]<this.calculateMin&&(this.calculateMin=+t[e][r])},BubbleChart.prototype.calculateFinalMinMax=function(){var t=this.calculateMin,i=this.calculateMax,t=this.getCalculateNiceScale(t,i,this.m_basezero,this.m_autoaxissetup,this.m_minimumaxisvalue,this.m_maximumaxisvalue,this.m_height);this.min=t.min,this.max=t.max,this.yAxisNoOfMarker=t.markerArray.length,this.m_yAxisText=t.step,this.m_yAxisMarkersArray=t.markerArray},BubbleChart.prototype.getColor=function(){return this.m_updateSeriesColorsArray},BubbleChart.prototype.setColor=function(t){var i;if(this.m_updateSeriesColorsArray=[],IsBoolean(this.m_enablecolorfromdrill)&&IsBoolean(this.m_startDrill))this.m_updateSeriesColorsArray=t;else if(!IsBoolean(this.m_designMode)&&""!=this.getCategoryColors()&&0<this.getCategoryColors().getCategoryColor().length&&IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName()))for(var e=this.getCategoryColors().getCategoryColorsForCategoryNames(this.getCategoryData()[0],this.m_categoryFieldColor),s=0,a=t.length;s<a;s++){this.m_updateSeriesColorsArray[s]=[];for(var r=0,o=t[0].length;r<o;r++)this.m_updateSeriesColorsArray[s][r]=e[r]}else IsBoolean(this.m_designMode)||""==this.getCategoryColors()||IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName())&&0!=this.getCategoryColors().getCategoryColor().length||""==this.getConditionalColors()||null==this.getConditionalColors()||!(0<this.getConditionalColors().getConditionalColor().length)?this.m_updateSeriesColorsArray=t:(i=this.getConditionalColors().getBubbleConditionalColorsForConditions(this.getSeriesNames(),t,this.m_seriesData,this),this.m_updateSeriesColorsArray=i)},BubbleChart.prototype.getAllSeriesDataForRepeater=function(){for(var t=[],i=0;i<this.m_parentObj.m_seriesNames.length;i++)if(t[i]=[],IsBoolean(this.m_parentObj.m_seriesVisibleArr[this.m_parentObj.m_seriesNames[i]]))for(var e=0;e<this.m_parentObj.m_dataProvider.length;e++){var s=removeCommaFromSrting(this.m_parentObj.m_dataProvider[e][this.m_parentObj.m_seriesNames[i]]);t[i][e]=s}return t},BubbleChart.prototype.initializeBubble=function(){this.m_valueTextSeries={},this.color=this.getColor();for(var t=0,i=0,e=this.m_seriesNames.length;i<e;i++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[i]])&&(this.m_bubbleSeries[this.m_seriesNames[i]]=new BubbleSeries,this.m_bubbleSeries[this.m_seriesNames[i]].init(this.color[i],this.m_radius[i],this.m_xPositionArray,this.m_yPositionArray[t],this.m_updateSeriesValue[t],this.m_transparencyarr[i],this),IsBoolean(this.m_seriesDataLabelProperty[i].showDataLabel)&&(this.m_valueTextSeries[this.m_seriesNames[i]]=new ValueTextSeries,this.m_valueTextSeries[this.m_seriesNames[i]].init(this.m_xPositionArray,this.m_yPositionArray[t],this,this.m_seriesDataForDataLabel[i],this.m_seriesDataLabelProperty[i],this.m_seriesactualdatafordatalabel[i])),t++)},BubbleChart.prototype.getColorsForSeries=function(){return this.m_seriesColorsArray},BubbleChart.prototype.setColorsForSeries=function(){if(this.m_seriesColorsArray=[],IsBoolean(this.m_enablecolorfromdrill)&&IsBoolean(this.m_startDrill))for(var t=0,i=this.m_seriesData[0].length;t<i;t++){this.m_seriesColorsArray[t]=[];for(var e=0,s=this.m_seriesData.length;e<s;e++)this.m_seriesColorsArray[t][e]=this.m_drillColor}else for(var a=this.getSeriesColors(),t=0,i=this.m_seriesData[0].length;t<i;t++){this.m_seriesColorsArray[t]=[];for(e=0,s=this.m_seriesData.length;e<s;e++)this.m_seriesColorsArray[t][e]=a[t]}},BubbleChart.prototype.drawTitle=function(){this.m_title.draw()},BubbleChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},BubbleChart.prototype.drawXAxis=function(){this.m_xAxis.drawTickMarks(),this.m_xAxis.drawVerticalLine(),this.m_xAxis.markXaxis(),this.m_xAxis.drawXAxis()},BubbleChart.prototype.drawYAxis=function(){IsBoolean(this.m_showmarkerline)&&this.m_yAxis.horizontalMarkerLines(),IsBoolean(this.m_zeromarkerline)&&!IsBoolean(this.m_basezero)&&IsBoolean(this.m_yAxis.hasNegativeAxisMarker(this.m_yAxisMarkersArray))&&this.m_yAxis.zeroMarkerLine(),this.m_yAxis.markYaxis(),this.m_yAxis.drawYAxis()},BubbleChart.prototype.drawColorBands=function(){IsBoolean(this.m_showcolorbands)&&this.getBandColors()},BubbleChart.prototype.getBandColors=function(){var t=this.m_calculation.startX,i=this.m_calculation.startY,e=this.m_calculation.endX,s=(this.m_calculation.endY,this.m_bandcolors.split(",")),a=this.m_bandalphas.split(",");this.bandcolors=[];for(var r=0,o=s.length;r<o;r++){var h=convertColorToHex(s[r]);this.bandcolors[r]=hex2rgb(h,a[r])}var l=this.m_colorbandranges.split(",");this.bandRangeArr=[];for(var n,m,u=0,o=l.length;u<o;u++)0==u?(m=l[u]-+this.m_calculation.minValue(),this.bandRangeArr[u]=m<0?0:m):(n=+this.m_calculation.minValue(),m=l[u]-l[u-1],this.bandRangeArr[u]=m<n?n:m);var g=this.m_calculation.getMaxValue()-this.m_calculation.minValue();this.newBandRange=this.getDisplayBandRange(this.bandRangeArr,g);for(var _=0,o=this.bandcolors.length;_<o;_++)this.ctx.beginPath(),this.ctx.rect(t,i-this.newBandRange[_]*this.m_calculation.getEachBubblePix(),e-t,this.newBandRange[_]*this.m_calculation.getEachBubblePix()),this.ctx.fillStyle=this.bandcolors[_],this.ctx.fill(),this.ctx.linewidth="0.2",this.ctx.strokeStyle="#ccc",this.ctx.stroke(),this.ctx.closePath(),i-=this.newBandRange[_]*this.m_calculation.getEachBubblePix()},BubbleChart.prototype.getDisplayBandRange=function(t,i){for(var e=i,s=0,a=t.length;s<a;s++)e>t[s]?e-=t[s]:0!=e?(t[s]=e,e=0):t[s]=0;return t},BubbleChart.prototype.getNewBandRange=function(t,i){for(var e,s=0,a=t.length;s<a;s++)IsBoolean(i)&&!IsBoolean(this.m_basezero)?0==s&&(t[s]=t[s]-+this.m_minimumaxisvalue):0==this.m_minimumaxisvalue||IsBoolean(this.m_basezero)||(t[s]>=this.m_minimumaxisvalue&&0==s?t[s]=t[s]-+this.m_minimumaxisvalue:t[s]<=this.m_minimumaxisvalue&&1==s&&(e=+this.m_minimumaxisvalue-t[s-1],t[s-1]=0,t[s]=t[s]-e));return t},BubbleChart.prototype.getSumOfArray=function(t){for(var i=0,e=0,s=t.length;e<s;e++)i=+i+t[e];return i},BubbleChart.prototype.getFlagForNegativeValueOnYAxis=function(t){for(var i=!1,e=0,s=t.length;e<s;e++)t[e]<0&&(i=!0);return i},BubbleChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},BubbleChart.prototype.drawBubbleChart=function(){for(var t=0,i=this.m_seriesNames.length;t<i;t++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[t]])&&this.m_bubbleSeries[this.m_seriesNames[t]].drawBubbleSeries()},BubbleChart.prototype.drawDataLabel=function(){this.m_overlappeddatalabelarrayY=[],this.m_overlappeddatalabelarrayX=[];for(var t=0,i=this.m_seriesNames.length;t<i;t++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[t]])&&IsBoolean(this.m_seriesDataLabelProperty[t].showDataLabel)&&this.m_valueTextSeries[this.m_seriesNames[t]].drawValueTextSeries()},BubbleChart.prototype.setStartX=function(){this.yaxisLabelFont=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),this.yaxisDescriptionFont=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily);var t=this.getBorderToDescriptionMargin(),i=this.getYAxisDescriptionMargin(),e=this.getDescriptionToLabelMargin(),s=this.getLabelToAxisMargin(),a=this.getYAxisLabelMargin();this.m_startX=+this.m_x+ +t+ +i+ +e+ +a+ +s+this.m_axisToChartMargin},BubbleChart.prototype.getYAxisLabelMargin=function(){var t=this.getLabelFormatterMargin();return this.setLabelWidth(),+t+ +this.getLabelWidth()+ +this.getLabelSignMargin()+ +this.getLabelPrecisionMargin()+ +this.getLabelSecondFormatterMargin()},BubbleChart.prototype.getLabelFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.m_formater&&""!=this.m_formater&&"none"!=this.m_unit&&""!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(t).width,this.ctx.closePath()),i},BubbleChart.prototype.getLabelWidth=function(){return this.m_labelwidth},BubbleChart.prototype.setLabelWidth=function(){var t=[];if((this.m_labelwidth=0)<this.fontScaling(this.m_yAxis.m_labelfontsize)){for(var i=0,e=this.m_yAxisMarkersArray.length;i<e;i++){var s,a=this.m_yAxisMarkersArray[i];IsBoolean(this.m_fixedlabel)||(IsBoolean(this.m_yAxis.getLeftaxisFormater())&&("none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(s=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?a=getNumberFormattedNumericValue(+a,this.m_precision,this.m_unit):"auto"==this.getSecondaryUnit()?a=getNumberFormattedNumericValue(+a):"none"!==this.getSecondaryUnit()&&(a=this.m_util.updateTextWithFormatter(a,s,this.m_precision))),0!==a)&&"default"!==this.m_precision&&(a=this.m_yAxis.setPrecision(a,this.m_precision)),a=getFormattedNumberWithCommas(a,this.m_numberformatter),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t[i]=this.ctx.measureText(a).width,this.ctx.closePath())}this.m_labelwidth=getMaxValueFromArray(t)}},BubbleChart.prototype.getLabelSignMargin=function(){var t=0,i=0,e=this.min;return e<0&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(e).width,this.ctx.closePath()),t=this.getLabelWidth()<i?this.ctx.measureText("-").width:t},BubbleChart.prototype.getLabelPrecisionMargin=function(){var t=0;return"auto"==this.getSecondaryUnit()&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t=this.ctx.measureText(".0").width,this.ctx.closePath()),t},BubbleChart.prototype.getLabelSecondFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(t="auto"!=this.getSecondaryUnit()?this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()):"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?getNumberFormattedSymbol(+this.max,this.m_unit):"K",this.ctx.font=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily),i=this.ctx.measureText(t).width),i},BubbleChart.prototype.getFormatterMargin=function(){var t,i=0,e=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&("none"!=this.m_formater&&""!=this.m_formater&&""!=this.m_unit&&"none"!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),i=this.ctx.measureText(t).width),"none"!=this.getSecondaryFormater())&&""!=this.getSecondaryFormater()&&""!=this.getSecondaryUnit()&&"none"!=this.getSecondaryUnit()&&(secondunit=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),e=this.ctx.measureText(secondunit).width),+i+ +e+4},BubbleChart.prototype.setEndX=function(){var t=this.getBorderToLegendMargin(),i=this.getVerticalLegendMargin(),e=this.getVerticalLegendToXAxisMargin();this.m_endX=+this.m_x+ +this.m_width-(+t+ +i+ +e)-this.m_axisToChartMargin},BubbleChart.prototype.setStartY=function(){var t=this.getChartMargin(),i=this.getXAxisLabelMargin(),e=this.getXAxisDescriptionMargin();this.m_startY=+this.m_y+ +this.m_height-(+t+ +i+ +e)-this.m_axisToChartMargin},BubbleChart.prototype.getXAxisLabelMargin=function(){var t=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize),i=this.m_xAxis.m_labelrotation*(Math.PI/180);if(IsBoolean(this.m_xAxis.getLabelTilted())){this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();for(var e=0,s=this.m_categoryData.length;e<s;e++)t<Math.abs(this.ctx.measureText(this.m_categoryData[e][0]).width*i)&&(t=Math.abs(this.ctx.measureText(this.m_categoryData[e][0]).width*i));t>this.m_height/4&&(t=this.m_xAxis.getLabelrotation()<=70?this.m_height/4-15:this.m_height/4)}else{this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();var a=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize);this.noOfRows=this.setNoOfRows(),t=a*this.noOfRows}return t},BubbleChart.prototype.setNoOfRows=function(){this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily);var t=1;if(!IsBoolean(this.isEmptyCategory)){this.ctx.measureText(this.m_categoryData[0][0]).width;for(var i=(this.getEndX()-this.getStartX())/this.m_categoryData.length,e=0,s=this.m_categoryData.length;e<s;e++)for(var a=0,r=this.m_categoryData[e].length;a<r;a++)if(this.ctx.measureText(this.m_categoryData[e][a]).width>i){t=2;break}}return t},BubbleChart.prototype.setEndY=function(){this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()+ +this.getRadiusMargin()+this.m_axisToChartMargin},BubbleChart.prototype.getRadiusMargin=function(){return this.maxRadius/2},BubbleChart.prototype.getBubbleSeriesColorForTooltip=function(){for(var t=[],i=0,e=this.m_seriesData.length;i<e;i++){t[i]=[];for(var s=0,a=this.m_seriesData[i].length;s<a;s++)t[i][s]=this.color[s][i]}return t},BubbleChart.prototype.getToolTipData=function(t,i){var e,s=this.getVisibleRadiusArr().RadiusArray;if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries())&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType)&&0<s.length){var a=[];if(t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY()){for(var r=this.m_tooltipseriesdata,o=0,h=this.m_xPositionArray.length;o<h;o++)for(var l=0,n=this.m_yPositionArray.length;l<n;l++)if(t<=+this.m_xPositionArray[o]+ +s[l][o]&&t>=+this.m_xPositionArray[o]-+s[l][o]&&i<=+this.m_yPositionArray[l][o]+ +s[l][o]&&i>=+this.m_yPositionArray[l][o]-+s[l][o]){if((e={cat:""}).data=new Array,e.cat=this.getCategoryData()[0][o],"Default"==this.m_customtextboxfortooltip.dataTipType){for(var m=0,u=0,g=this.getSeriesNames().length;u<g;u++){var _,c;IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[u]])&&((a=[])[0]={color:this.getBubbleSeriesColorForTooltip()[o][u],shape:this.legendMap[this.getSeriesNames()[u]].shape},a[1]=this.getSeriesDisplayNames()[u],_=""==r[o][u]||isNaN(r[o][u])||null==r[o][u]||"null"==r[o][u]?r[o][u]:(_=+r[o][u])%1!=0&&"default"!==this.m_tooltipprecision?_.toFixed(this.m_tooltipprecision):+r[o][u],c=this.getUpdatedFormatterForToolTip(_,this.getSeriesNames()[u]),a[2]=c,e.data[m]=a,m++)}e.highlightIndex=this.getDrillColor(t,i,s),IsBoolean(this.m_controlledtooltip)&&(e=this.updateTooltipData(e));break}e=this.getDataProvider()[o]}}else this.hideToolTip();return e}},BubbleChart.prototype.getVisibleRadiusArr=function(){for(var t={RadiusArray:[],ColorArray:[]},i=[],e=[],s=0;s<this.m_seriesNames.length;s++)this.m_seriesVisibleArr[this.m_seriesNames[s]]&&(i.push(this.m_radius[s]),e.push(this.getColor()[s]));return t.RadiusArray=i,t.ColorArray=e,t},BubbleChart.prototype.getDrillColor=function(t,i,e){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)){var s=this.m_calculation.getXPosition(),a=this.m_calculation.getYPosition();if(t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY())for(var r=0,o=s.length;r<o;r++)for(var h=a.length-1;0<=h;h--)if(t<=+s[r]+ +e[h][r]&&t>=+s[r]-+e[h][r]&&i<=+a[h][r]+ +e[h][r]&&i>=+a[h][r]-+e[h][r])return h}},BubbleChart.prototype.getDrillDataPoints=function(t,i){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries())){var e=this.m_calculation.getXPosition(),s=this.m_calculation.getYPosition(),a=this.getVisibleRadiusArr().RadiusArray,r=this.getVisibleRadiusArr().ColorArray;if(t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY())for(var o=e.length-1;0<=o;o--)for(var h=s.length-1;0<=h;h--)if(t<=+e[o]+ +a[h][o]&&t>=+e[o]-+a[h][o]&&i<=+s[h][o]+ +a[h][o]&&i>=+s[h][o]-+a[h][o]){if(IsBoolean(this.enableDrillHighlighter)){for(var l=0;l<this.m_transparencyarr.length;l++){for(var n=0;n<this.m_transparencyarr[0].length;n++)IsBoolean(this.m_drilltoggle)?this.m_transparencyarr[l][n]=.5:this.m_transparencyarr[l][n]=1;this.m_transparencyarr[l][o]=1}this.initializeBubble(),this.drawChart()}this.m_drilltoggle=!1;for(var m=this.getFieldNameValueMap(o),u=r[h][o],g=this.m_categoryNames,_=[],l=0;l<g.length;l++)_.push(m[g[l]]);var c=this.visibleSeriesInfo.seriesName[h],d=this.visibleSeriesInfo.seriesDisplayName[h],b=m[c];return m.drillField=c,m.drillDisplayField=d,m.drillValue=b,m.drillIndex=o,m.drillCategoriesNames=g,m.drillCategory=_,{drillRecord:m,drillColor:u}}}},BubbleCalculation.prototype.init=function(t,i,e,s,a){this.startX=a.getStartX(),this.startY=a.getStartY(),this.endX=a.getEndX(),this.endY=a.getEndY(),this.xAxisData=i,this.allYAxisData=e,this.m_colorfielddata=s,this.yAxisData=a.getVisibleSeriesData(e).seriesData,this.spaceFromYAxis=(this.endX-this.startX)/(2*this.xAxisData.length),this.m_chart=a,this.minRadius=this.m_chart.minRadius,this.maxRadius=this.m_chart.maxRadius,this.calculateBubbleRadius(),this.setRangeSeriesColor(),this.setMaxMinFormSeriesData(),this.setRanges(),this.createColorRange(),this.updateColorManager(),this.setXPosition(),this.setYPosition()},BubbleCalculation.prototype.setMaxMinFormSeriesData=function(){for(var t=!(this.serMaxVal=this.serMinVal=0),i=0,e=this.m_colorfielddata.length;i<e;i++)for(var s=0,a=this.m_colorfielddata[i].length;s<a;s++)null==this.m_colorfielddata[i][s]&&null==this.m_colorfielddata[i][s]&&""==this.m_colorfielddata[i][s]||(t&&(this.serMaxVal=this.serMinVal=+this.m_colorfielddata[i][s],t=!1),+this.serMaxVal<=+this.m_colorfielddata[i][s]&&(this.serMaxVal=+this.m_colorfielddata[i][s]),+this.serMinVal>=+this.m_colorfielddata[i][s]&&(this.serMinVal=+this.m_colorfielddata[i][s]))},BubbleCalculation.prototype.getMaxValue=function(){return this.m_chart.max},BubbleCalculation.prototype.minValue=function(){return this.m_chart.min},BubbleCalculation.prototype.getSeriesRadiusField=function(){return this.m_chart.m_radiusField},BubbleCalculation.prototype.calculateBubbleRadius=function(){for(var t=this.m_chart.getPlotRadiusData().slice(0),i=0,e=this.m_chart.m_radiusField.length;i<e;i++)this.m_chart.isCheckRadiusWithDataSet(this.m_chart.m_radiusField[i])||IsBoolean(this.m_chart.m_designMode)||t.splice(i,1);var s=_.reduceRight(t,function(t,i){return t.concat(i)},[]),a=_.max(s,function(t){return""===t||void 0===t||null==t?void 0:+t}),r=_.min(s,function(t){return""===t||void 0===t||null==t?void 0:+t});this.radius=[];for(var o=0,e=this.m_chart.m_radiusField.length;o<e;o++){this.radius[o]=[];for(var h,l,n=this.m_chart.getPlotRadiusData()[o],m=0;m<n.length;m++)this.m_chart.isCheckRadiusWithDataSet(this.m_chart.m_radiusField[o])||IsBoolean(this.m_chart.m_designMode)?(l=0,""===n[m]||void 0===n[m]||null===n[m]||"null"===n[m]||isNaN(+n[m])||(l=(h=(this.maxRadius-this.minRadius)/(+a-+r))==1/0?this.maxRadius:this.minRadius+(+n[m]-+r)*h),this.radius[o][m]=l>this.maxRadius?this.maxRadius:l):IsBoolean(isNaN(n[m])||""===n[m])?this.radius[o][m]=0:this.radius[o][m]=this.m_chart.m_radiusField[o]>this.maxRadius?this.maxRadius:this.m_chart.m_radiusField[o]}},BubbleCalculation.prototype.getMaxFromArray=function(t){for(var i=0,e=0,s=t.length;e<s;e++)i<=t[e]&&(i=t[e]);return i},BubbleCalculation.prototype.setRangeSeriesColor=function(){for(var t=this.m_chart.m_rangedseriescolors.split(","),i=0,e=t.length;i<e;i++)this.rangeSeriesColor[i]=convertColorToHex(t[i])},BubbleCalculation.prototype.setRanges=function(){this.m_range=this.m_chart.m_rangesofseries.split(",");for(var t=0,i=this.m_range.length;t<i;t++){var e=-1<this.m_range[t].indexOf("~")?"~":"-",e=this.m_range[t].split(e);this.m_range1[t]=e[0],this.m_range2[t]=e[1]}Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)},this.m_minRangeValue=[this.m_range1.min(),this.m_range2.min()].min(),this.m_maxRangeValue=[this.m_range1.max(),this.m_range2.max()].max()},BubbleCalculation.prototype.createColorRange=function(){this.m_drawingWidth=+this.endX-+this.startX,this.m_minRange=IsBoolean(this.m_chart.m_showdynamicrange)?this.serMinVal:[this.m_range1.min(),this.m_range2.min()].min(),this.m_maxRange=IsBoolean(this.m_chart.m_showdynamicrange)?this.serMaxVal:[this.m_range1.max(),this.m_range2.max()].max();var t=this.m_chart.ctx.createLinearGradient(0,0,this.m_drawingWidth,0);if(IsBoolean(this.m_chart.m_showdynamicrange)){var i=[];i[0]=this.m_chart.m_minrangecolor,i[1]=this.m_chart.m_maxrangecolor;for(var e=0;e<i.length;e++){var s=0==e?0:e==i.length-1?1:e/(i.length-1);t.addColorStop(s,i[e])}}else if(1<this.m_range.length)for(var a=this.m_maxRange-this.m_minRange,e=0;e<this.m_range.length;e++)0==e?t.addColorStop(0,this.rangeSeriesColor[e]):e==this.m_range.length-1?t.addColorStop(1,this.rangeSeriesColor[e]):(s=(this.m_range1[e]-this.m_minRange)/a,isNaN(s)||t.addColorStop(s,this.rangeSeriesColor[e]));else IsBoolean(this.m_highervaluesaregood)?(t.addColorStop(0,"#FFFFFF"),t.addColorStop(1,this.rangeSeriesColor[0])):(t.addColorStop(0,this.rangeSeriesColor[0]),t.addColorStop(1,"#FFFFFF"));this.m_chart.ctx.beginPath(),this.m_chart.ctx.fillStyle=t,this.m_chart.ctx.fillRect(0,0,this.m_drawingWidth,+this.m_chart.m_height),this.m_chart.ctx.fill(),this.m_chart.ctx.closePath()},BubbleCalculation.prototype.updateColorManager=function(){this.m_bubbleSeriesColor=[];for(var t=0,i=this.m_colorfielddata.length;t<i;t++){this.m_bubbleSeriesColor[t]=[];for(var e,s=0,a=this.m_colorfielddata[t].length;s<a;s++)if(IsBoolean(this.m_chart.m_enablecolorfromdrill)&&IsBoolean(this.m_chart.m_startDrill))this.m_bubbleSeriesColor[t][s]=this.m_chart.m_seriesColorsArray[t][s];else if(null==this.m_colorfielddata[t][s]||""===this.m_colorfielddata[t][s]||null==this.m_colorfielddata[t][s]||isNaN(this.m_colorfielddata[t][s]))this.m_bubbleSeriesColor[t][s]=this.m_chart.m_defaultfillcolor;else if(IsBoolean(this.m_chart.m_showdynamicrange)||!IsBoolean(this.m_chart.m_solidcolorfill)||""==this.m_chart.m_colorField[this.m_chart.getSeriesNames()[t]])""==this.m_chart.m_colorField[this.m_chart.getSeriesNames()[t]]?this.m_bubbleSeriesColor[t][s]=this.m_chart.m_seriesColors[t]:+this.m_colorfielddata[t][s]<this.m_minRange||+this.m_colorfielddata[t][s]>this.m_maxRange?this.m_bubbleSeriesColor[t][s]=this.m_chart.m_defaultfillcolor:(r=(this.m_colorfielddata[t][s]-this.m_minRange)/(this.m_maxRange-this.m_minRange)*this.m_drawingWidth*this.m_chart.getDevicePixelRatio(),+this.m_colorfielddata[t][s]<this.m_minRange?r=.01:+this.m_colorfielddata[t][s]>=this.m_maxRange&&(r=this.m_drawingWidth*this.m_chart.getDevicePixelRatio()-this.m_adjustpixel),e="rgb("+(e=this.m_chart.ctx.getImageData(0|r,this.m_chart.m_height/2,1,1).data)[0]+","+e[1]+","+e[2]+")",this.m_bubbleSeriesColor[t][s]=rgb2hex(e));else for(var r=+this.m_colorfielddata[t][s],o=0;o<this.m_range.length;o++)if((0==o&&r<this.m_range1[o]||o==this.m_range.length-1&&r>=this.m_range2[o])&&(this.m_bubbleSeriesColor[t][s]=this.m_chart.m_defaultfillcolor),r>=this.m_range1[o]&&r<this.m_range2[o]){this.m_bubbleSeriesColor[t][s]=this.rangeSeriesColor[o];break}}},BubbleCalculation.prototype.getBubbleSeriesColor=function(){return this.m_bubbleSeriesColor},BubbleCalculation.prototype.setRadiusForDefaultCase=function(){for(var t=0,i=this.yAxisData.length;t<i;t++){this.radius[t]=[];for(var e=0,s=this.yAxisData[t].length;e<s;e++)0==this.yAxisData[t][e]?this.radius[t][e]=this.minRadius:(this.ratio=this.getMaxValue()/this.yAxisData[t][e],this.radius1=(this.maxRadius-this.minRadius)/this.ratio,this.radius[t][e]=this.minRadius+this.radius1)}},BubbleCalculation.prototype.getgetMaxValueFromArray=function(t){for(var i=0,e=0,s=t.length;e<s;e++)+i<+t[e]&&(i=t[e]);return i},BubbleCalculation.prototype.getBubbleRadius=function(){return this.radius},BubbleCalculation.prototype.getYAxisText=function(){return this.m_chart.m_yAxisText},BubbleCalculation.prototype.getXAxisDiv=function(){return 1<this.xAxisData.length?this.xAxisDiv=(this.endX-this.startX)/(this.xAxisData.length-1):this.xAxisDiv=(this.endX-this.startX)/this.xAxisData.length,this.xAxisDiv},BubbleCalculation.prototype.getEachBubblePix=function(){return(this.startY-this.endY)/(+this.getMaxValue()-+this.minValue())},BubbleCalculation.prototype.getYAxisMarkersArray=function(){return this.m_chart.m_yAxisMarkersArray},BubbleCalculation.prototype.getXPosition=function(){return this.xPositionArray},BubbleCalculation.prototype.setXPosition=function(){this.xPositionArray=[];for(var t=0,i=this.xAxisData.length;t<i;t++)this.xPositionArray[t]=+this.startX+(2*t+1)*this.spaceFromYAxis},BubbleCalculation.prototype.getYPosition=function(){return this.yPositionArray},BubbleCalculation.prototype.setYPosition=function(){this.yPositionArray=[];for(var t=0,i=this.yAxisData.length;t<i;t++){this.yPositionArray[t]=[];for(var e=0,s=this.yAxisData[t].length;e<s;e++)""===this.yAxisData[t][e]||isNaN(this.yAxisData[t][e])||null==this.yAxisData[t][e]||"null"==this.yAxisData[t][e]?this.yPositionArray[t][e]="":this.yPositionArray[t][e]=this.startY-this.getEachBubblePix()*(this.yAxisData[t][e]-this.minValue())}},BubbleSeries.prototype.init=function(t,i,e,s,a,r,o){this.m_color=t,this.m_radius=i,this.m_xPositionArray=e,this.m_yPositionArray=s,this.m_seriesData=a,this.m_transparency=r,this.m_chart=o,this.ctx=this.m_chart.ctx;for(var h=0,l=this.m_seriesData.length;h<l;h++)this.m_bubble[h]=new Bubble,this.m_bubble[h].init(this.m_color[h],this.m_radius[h],this.m_xPositionArray[h],this.m_yPositionArray[h],this.m_transparency[h],this.ctx,this.m_chart)},BubbleSeries.prototype.isInRange=function(t){return this.m_yPositionArray[t]>this.m_chart.getStartY()||this.m_yPositionArray[t]<=this.m_chart.getEndY()-.1},BubbleSeries.prototype.drawBubbleSeries=function(){for(var t=0,i=this.m_seriesData.length;t<i;t++)this.isInRange(t)||this.m_bubble[t].drawBubble()},Bubble.prototype.init=function(t,i,e,s,a,r,o){this.ctx=r,this.color=t,this.radius=i,this.xPosition=e,this.yPosition=s,this.transparency=a,this.m_chart=o,""==this.yPosition&&(this.radius=0)},Bubble.prototype.drawBubble=function(){null==this.m_chart.m_chartbase||"plane"==this.m_chart.m_chartbase?this.drawPlainBubble():"ring"==this.m_chart.m_chartbase?this.drawRingBubble():this.drawGradientBubble()},Bubble.prototype.drawPlainBubble=function(){this.ctx.beginPath(),this.drawBubbleShadow(),this.radius=this.radius<0?this.m_chart.minRadius:this.radius;this.getColorValue();this.ctx.fillStyle=hex2rgb(this.color,this.transparency),this.ctx.arc(this.xPosition,this.yPosition,this.radius,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.closePath()},Bubble.prototype.drawRingBubble=function(){this.ctx.beginPath(),this.drawBubbleShadow(),this.radius=this.radius<0?this.m_chart.minRadius:this.radius,this.ctx.lineWidth="5",this.ctx.strokeStyle=hex2rgb(this.color,this.transparency),this.ctx.arc(this.xPosition,this.yPosition,this.radius,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()},Bubble.prototype.drawGradientBubble=function(){this.ctx.beginPath(),this.drawBubbleShadow(),this.radius=this.radius<0?this.m_chart.minRadius:this.radius;var t=this.getColorValue(),i=hex2rgb(this.color,this.transparency);try{(i=this.ctx.createRadialGradient(this.xPosition-this.radius/2,this.yPosition-this.radius/2,this.radius/10,this.xPosition,this.yPosition,this.radius)).addColorStop(.1,hex2rgb(t,this.transparency)),i.addColorStop(.8,hex2rgb(this.color,this.transparency))}catch(t){}this.ctx.fillStyle=i,this.ctx.arc(this.xPosition,this.yPosition,this.radius,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.closePath()},Bubble.prototype.drawBubbleShadow=function(){var t;IsBoolean(this.m_chart.m_shadowvisible)&&(t=0<this.radius?this.radius:0,this.ctx.save(),this.ctx.fillStyle=ColorLuminance(this.color,-.1),this.ctx.shadowOffsetX=1,this.ctx.shadowOffsetY=1,this.ctx.shadowBlur=3,this.ctx.shadowColor=ColorLuminance(this.color,-.5),this.ctx.arc(this.xPosition,this.yPosition,t,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.restore())},Bubble.prototype.getColorValue=function(){return this.color=null==this.color?"#993366":this.color,ColorLuminance(this.color,this.m_chart.m_luminance)};
//# sourceMappingURL=BubbleChart.min.js.map