/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function CandleStickChart(t,i){this.base=Chart,this.base(),this.m_x=400,this.m_y=20,this.m_width=300,this.m_height=200,this.m_candleWidth="",this.m_generatexml="",this.m_candleColor="",this.m_seriesNames=[],this.m_categoryData=[],this.m_seriesData=[],this.m_xPixelArray=[],this.m_yPixelArray=[],this.m_linePixelArray=[],this.m_candleHeightArray=[],this.m_candlesArray=[],this.m_candleCalculation=new CandleStickCalculation,this.m_xAxis=new Xaxis,this.m_yAxis=new Yaxis,this.noOfRows=1,this.m_chartContainer=t,this.m_zIndex=i,this.m_fieldtypes=["High","Low","Close","Open"],this.isValidConfig=!0,this.m_showtooltipcategory="true"}function CandleStickCalculation(){this.m_xAxisPixelArray=[],this.m_yAxisPixelArray=[],this.m_max=0,this.m_candleGap,this.m_numberOfMarkers=6,this.m_percentileValue,this.m_yAxisText,this.m_xpixelArray=[],this.m_ypixelArray=[],this.m_candleHeightArray=[],this.m_yAxisMarkersArray=[],this.m_linepixelArray=[],this.m_startX,this.m_startY,this.m_endX,this.m_endY,this.m_chartYMargin,this.m_chartEndXMargin,this.m_chartTitleMargin=0,this.m_chartSubTitleMargin=0,this.data="",this.m_util=new Util,this.noOfRows=1}function Candles(){this.m_xPixel=[],this.m_yPixelArray=[],this.m_candleHeightArray=[],this.m_candleWidth=[],this.m_linePixelArray=[],this.m_candleColor="",this.m_strokeColor="",this.ctx=""}CandleStickChart.prototype=new Chart,CandleStickChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},CandleStickChart.prototype.ParseJsonAttributes=function(t,i){for(var e in this.chartJson=t)if("Chart"==e)for(var a in t[e])switch(a){case"xAxis":for(var s in t[e][a]){var r=this.getNodeAttributeName(s);i.m_xAxis[r]=t[e][a][s]}break;case"yAxis":for(var h in t[e][a]){var r=this.getNodeAttributeName(h);i.m_yAxis[r]=t[e][a][h]}break;case"Title":for(var l in t[e][a]){var r=this.getNodeAttributeName(l);i.m_title[r]=t[e][a][l]}break;case"SubTitle":for(var n in t[e][a]){r=this.getNodeAttributeName(n);i.m_subTitle[r]=t[e][a][n]}break;default:i[r=this.getNodeAttributeName(a)]=t[e][a]}else i[r=this.getNodeAttributeName(e)]=t[e]},CandleStickChart.prototype.getDataProvider=function(){return this.m_dataProvider},CandleStickChart.prototype.getCategoryNames=function(){return this.m_categoryNames},CandleStickChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},CandleStickChart.prototype.setStartX=function(){this.yaxisLabelFont=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),this.yaxisDescriptionFont=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily);var t=this.getBorderToDescriptionMargin(),i=this.getYAxisDescriptionMargin(),e=this.getDescriptionToLabelMargin(),a=this.getLabelToAxisMargin(),s=(this.setMaxMinSeriesValue(),this.getYAxisLabelMargin());this.m_startX=+this.m_x+ +t+ +i+ +e+ +s+ +a},CandleStickChart.prototype.getYAxisLabelMargin=function(){var t=this.getLabelFormatterMargin();return this.setLabelWidth(),+t+ +this.getLabelWidth()+ +this.getLabelSignMargin()+ +this.getLabelPrecisionMargin()+ +this.getLabelSecondFormatterMargin()},CandleStickChart.prototype.getLabelFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.m_formater&&""!=this.m_formater&&"none"!=this.m_unit&&""!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(t).width,this.ctx.closePath()),i},CandleStickChart.prototype.getLabelWidth=function(){return this.m_labelwidth},CandleStickChart.prototype.setLabelWidth=function(){var t=[];if((this.m_labelwidth=0)<this.fontScaling(this.m_yAxis.m_labelfontsize)){for(var i=0;i<this.m_yAxisMarkersArray.length;i++){var e,a=this.m_yAxisMarkersArray[i];IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&("none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(e=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?a=getNumberFormattedNumericValue(+a,this.m_precision,this.m_unit):"auto"==this.getSecondaryUnit()?a=getNumberFormattedNumericValue(+a):"none"!==this.getSecondaryUnit()&&(a=this.m_util.updateTextWithFormatter(a,e,this.m_precision))),0!==a&&"default"!==this.m_precision&&(a=this.m_yAxis.setPrecision(a,this.m_precision)),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),a=getFormattedNumberWithCommas(a,this.m_numberformatter),t[i]=this.ctx.measureText(a).width,this.ctx.closePath())}this.m_labelwidth=getMaxValueFromArray(t)}},CandleStickChart.prototype.getLabelSignMargin=function(){var t=0,i=0,e=this.min;return e<0&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(e).width,this.ctx.closePath()),t=this.getLabelWidth()<i?this.ctx.measureText("-").width:t},CandleStickChart.prototype.getLabelPrecisionMargin=function(){var t=5;return"auto"==this.getSecondaryUnit()&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t=this.ctx.measureText(".0").width,this.ctx.closePath()),t},CandleStickChart.prototype.getMinimumSeriesValue=function(){return this.m_minimumseriesvalue},CandleStickChart.prototype.getMaximumSeriesValue=function(){return this.m_maximumSeriesValue},CandleStickChart.prototype.setMaxMinSeriesValue=function(){this.m_maximumSeriesValue=0;for(var t=this.m_minimumseriesvalue=0;t<this.m_seriesData.length;t++)for(var i=0;i<this.m_seriesData[t].length;i++){var e=this.m_seriesData[t][i],e=isNaN(e)||null==e||""==e?0:e;0==t&&0==i&&(this.m_maximumSeriesValue=e,this.m_minimumseriesvalue=e),+this.m_maximumSeriesValue<=+e&&(this.m_maximumSeriesValue=e),+this.m_minimumseriesvalue>+e&&(this.m_minimumseriesvalue=e)}},CandleStickChart.prototype.getLabelSecondFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(t="auto"!=this.getSecondaryUnit()?this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()):"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?getNumberFormattedSymbol(+this.max,this.m_unit):"K",this.ctx.font=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily),i=this.ctx.measureText(t).width),i},CandleStickChart.prototype.getFormatterMargin=function(){var t,i=0,e=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&("none"!=this.m_formater&&""!=this.m_formater&&""!=this.m_unit&&"none"!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),i=this.ctx.measureText(t).width),"none"!=this.getSecondaryFormater())&&""!=this.getSecondaryFormater()&&""!=this.getSecondaryUnit()&&"none"!=this.getSecondaryUnit()&&(secondunit=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),e=this.ctx.measureText(secondunit).width),+i+ +e+4},CandleStickChart.prototype.setEndX=function(){var t=this.getBorderToLegendMargin(),i=this.getVerticalLegendMargin(),e=this.getVerticalLegendToXAxisMargin();this.m_endX=+this.m_x+ +this.m_width-(+t+ +i+ +e)},CandleStickChart.prototype.setStartY=function(){var t=this.getChartMargin(),i=this.getXAxisLabelMargin(),e=this.getXAxisDescriptionMargin();this.m_startY=+this.m_y+ +this.m_height-(+t+ +i+ +e)},CandleStickChart.prototype.getXAxisLabelMargin=function(){var t=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize),i=this.m_xAxis.m_labelrotation*(Math.PI/180);if(IsBoolean(this.m_xAxis.getLabelTilted())){this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();for(var e=1;e<this.m_categoryData[0].length;e++)t<Math.abs(this.ctx.measureText(this.m_categoryData[0][e]).width*i)&&(t=Math.abs(this.ctx.measureText(this.m_categoryData[0][e]).width*i));t>this.m_height/4&&(t=this.m_xAxis.getLabelrotation()<=70?this.m_height/4-15:this.m_height/4)}else{this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();var a=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize);this.noOfRows=this.setNoOfRows(),t=a*this.noOfRows}return t},CandleStickChart.prototype.setNoOfRows=function(){this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily);var t=1;if(!IsBoolean(this.isEmptyCategory)){this.ctx.measureText(this.m_categoryData[0][0]).width;for(var i=(this.getEndX()-this.getStartX())/this.m_categoryData[0].length,e=1;e<this.m_categoryData[0].length;e++)this.ctx.measureText(this.m_categoryData[0][e]).width>i&&(t=2)}return t},CandleStickChart.prototype.setEndY=function(){this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()},CandleStickChart.prototype.setFields=function(t){this.m_fieldsJson=t;for(var i=[],e=[],a=0;a<t.length;a++)("Category"===this.getProperAttributeNameValue(t[a],"Type")?i:e).push(t[a]);this.setCategory(i),this.setSeries(e)},CandleStickChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr={},this.m_categoryFieldColor=[];for(var i=0,e=0;e<t.length;e++){var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allCategoryDisplayNames[e]=a,this.m_allCategoryNames[e]=this.getProperAttributeNameValue(t[e],"Name"),this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]])&&(this.m_categoryNames[i]=this.getProperAttributeNameValue(t[e],"Name"),this.m_categoryDisplayNames[i]=a,this.m_categoryFieldColor[i]=this.getProperAttributeNameValue(t[e],"Color"),i++)}},CandleStickChart.prototype.setSeries=function(t){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors=[],this.m_legendNames=[],this.m_reqSeriesVisibleArr={},this.m_seriesVisibleArr={},this.m_allSeriesDisplayNames=[],this.m_allSeriesNames=[],this.m_plotTrasparencyArray=[];this.legendMap={};for(var i=0;i<this.m_fieldtypes.length;i++){this.m_reqSeriesVisibleArr[this.m_fieldtypes[i]]={},this.m_reqSeriesVisibleArr[this.m_fieldtypes[i]].visible=!1;for(var e=0;e<t.length;e++){var a=this.getProperAttributeNameValue(t[e],"Type");if(this.m_fieldtypes[i]==a){var a=this.getProperAttributeNameValue(t[e],"visible"),s=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));if(this.m_allSeriesDisplayNames[e]=s,this.m_allSeriesNames[e]=this.getProperAttributeNameValue(t[e],"Name"),this.m_seriesVisibleArr[this.m_allSeriesNames[e]]=a,IsBoolean(a)){this.m_reqSeriesVisibleArr[this.m_fieldtypes[i]].visible=!0,this.m_seriesDisplayNames[i]=s,this.m_seriesNames[i]=this.getProperAttributeNameValue(t[e],"Name"),this.m_legendNames[i]=s,this.m_seriesColors[i]=convertColorToHex(this.getProperAttributeNameValue(t[e],"Color"));a={seriesName:this.m_seriesNames[i],displayName:this.m_seriesDisplayNames[i],color:this.m_seriesColors[i],shape:"cube",index:i};this.legendMap[this.m_seriesNames[i]]=a;break}}}}},CandleStickChart.prototype.getLegendInfo=function(){this.legendMap={};var t=["Rise","Decline"],i=[this.m_fillcolor,this.m_declinefillcolor];if(null!=this.m_legendNames&&null!=this.m_legendNames&&0!=this.m_legendNames.length)for(var e=0;e<t.length;e++)this.legendMap[t[e]]={seriesName:t[e],displayName:t[e],color:i[e],shape:"cube"};return this.legendMap},CandleStickChart.prototype.getSeriesNames=function(){return this.m_seriesNames},CandleStickChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},CandleStickChart.prototype.getSeriesColors=function(){return this.m_seriesColors},CandleStickChart.prototype.setLegendNames=function(t){var i=[];if(null!=t&&null!==t&&""!==t&&0!=t.length)for(var e=0;e<1;e++)i[e]=[],i[e][0]="Rise",i[e][1]="Decline";this.m_legendNames=i[0]},CandleStickChart.prototype.getLegendNames=function(){return this.m_legendNames},CandleStickChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0;t<this.getCategoryNames().length;t++)this.m_allfieldsName.push(this.getCategoryNames()[t]);for(var i=0;i<this.getSeriesNames().length;i++)this.m_allfieldsName.push(this.getSeriesNames()[i])},CandleStickChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},CandleStickChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var t=0;t<this.getCategoryDisplayNames().length;t++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[t]);for(var i=0;i<this.getSeriesDisplayNames().length;i++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[i])},CandleStickChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},CandleStickChart.prototype.setCategorySeriesData=function(){this.m_categoryData=[],this.m_seriesData=[],this.m_seriesDataForToolTip=[],this.m_displaySeriesDataFlag=[];for(var t=0;t<this.getDataProvider().length;t++){var i=this.getDataProvider()[t];if(this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var e=0;e<this.getCategoryNames().length;e++){this.m_categoryData[e]||(this.m_categoryData[e]=[]);var a=this.getValidFieldDataFromRecord(i,this.getCategoryNames()[e]);this.m_categoryData[e][t]=a}}this.m_displaySeriesDataFlag[t]=[];for(var s=0;s<this.getSeriesNames().length;s++){this.m_seriesData[s]||(this.m_seriesData[s]=[],this.m_seriesDataForToolTip[s]=[]);a=this.getValidFieldDataFromRecord(i,this.getSeriesNames()[s]);this.m_displaySeriesDataFlag[t][s]=!0,isNaN(a)&&(this.m_displaySeriesDataFlag[t][s]=!1,a=getNumericComparableValue(a)),this.m_seriesData[s][t]=a,this.m_seriesDataForToolTip[s][t]=a}}},CandleStickChart.prototype.setCategoryData=function(){this.m_categoryData=[],this.isEmptyCategory=!0;for(var t=0;t<this.getCategoryNames().length;t++)this.isEmptyCategory=!1,this.m_categoryData[t]=this.getDataFromJSON(this.getCategoryNames()[t])},CandleStickChart.prototype.getCategoryData=function(){return this.m_categoryData},CandleStickChart.prototype.setSeriesData=function(){this.m_seriesData=[];for(var t=0;t<this.getSeriesNames().length;t++)this.m_seriesData[t]=this.getDataFromJSON(this.getSeriesNames()[t])},CandleStickChart.prototype.getSeriesData=function(){return this.m_seriesData},CandleStickChart.prototype.setSeriesColor=function(t){this.m_seriesColor=t},CandleStickChart.prototype.getSeriesColor=function(){return this.m_seriesColor},CandleStickChart.prototype.checkValidConfiguration=function(){this.isValidConfig=!0;for(var t=0;t<this.m_fieldtypes.length;t++)IsBoolean(this.m_reqSeriesVisibleArr[this.m_fieldtypes[t]].visible)||(this.isValidConfig=!1)},CandleStickChart.prototype.init=function(){this.setCategorySeriesData(),this.checkValidConfiguration(),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.isSeriesDataEmpty(),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),IsBoolean(this.m_isEmptySeries)||IsBoolean(this.isEmptyCategory)||IsBoolean(this.isValidConfig)&&(this.initializeCalculation(),this.m_xAxis.init(this,this.m_candleCalculation),this.m_yAxis.init(this,this.m_candleCalculation)),this.initializeToolTipProperty(),this.m_tooltip.init(this)},CandleStickChart.prototype.updateSeriesDataWithCommaSeperators=function(){this.m_displaySeriesDataFlag=[];for(var t=0;t<this.m_seriesData.length;t++){this.m_displaySeriesDataFlag[t]=[];for(var i=0;i<this.m_seriesData[t].length;i++)this.m_displaySeriesDataFlag[t][i]=!0,isNaN(this.m_seriesData[t][i])&&(this.m_displaySeriesDataFlag[t][i]=!1,this.m_seriesData[t][i]=getNumericComparableValue(this.m_seriesData[t][i]))}},CandleStickChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.drawLegends();var t=this.IsDrawingPossible();IsBoolean(t.permission)?IsBoolean(this.isValidConfig)?(this.drawXAxis(),this.drawYAxis(),this.drawCandleChart()):this.drawMessage("Invalid chart configuration"):this.drawMessage(t.message)},CandleStickChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},CandleStickChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEvent()},CandleStickChart.prototype.drawTitle=function(){this.m_title.draw()},CandleStickChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},CandleStickChart.prototype.drawXAxis=function(){this.m_xAxis.drawTickMarks(),this.m_xAxis.drawVerticalLine(),this.m_xAxis.markXaxis(),this.m_xAxis.drawXAxis()},CandleStickChart.prototype.drawYAxis=function(){IsBoolean(this.m_showmarkerline)&&this.m_yAxis.horizontalMarkerLines(),IsBoolean(this.m_zeromarkerline)&&!IsBoolean(this.m_basezero)&&IsBoolean(this.m_yAxis.hasNegativeAxisMarker(this.m_yAxisMarkersArray))&&this.m_yAxis.zeroMarkerLine(),this.m_yAxis.markYaxis(),this.m_yAxis.drawYAxis()},CandleStickChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},CandleStickChart.prototype.initializeCalculation=function(){this.calculateMaxMinValue(convertArrayType(this.m_seriesData)),this.calculateMinMax(),this.setChartDrawingArea(),this.m_candleCalculation.initGlobalCalculation(this),this.setLegendNames(this.m_legendNames);var t=this.updateSeriesData(this.m_categoryData),t=(this.m_candleCalculation.init(this,t,this.m_seriesData),this.m_xPixelArray=this.m_candleCalculation.getxPixelArray(),this.m_yPixelArray=this.m_candleCalculation.getyPixelArray(),this.m_candleWidth=this.m_candleCalculation.getcandleWidth(),this.m_linePixelArray=this.m_candleCalculation.getLinePixelArray(),this.m_candleHeightArray=this.m_candleCalculation.getcandleHeightArray(),this.m_candleColor=this.m_candleCalculation.getCandleColor(),convertColorToHex(this.m_strokecolor));this.initializeCandles(t)},CandleStickChart.prototype.calculateMinMax=function(){var t=this.calculateMin,i=this.calculateMax,t=this.getCalculateNiceScale(t,i,this.m_basezero,this.m_autoaxissetup,this.m_minimumaxisvalue,this.m_maximumaxisvalue,this.m_height);this.min=t.min,this.max=t.max,this.yAxisNoOfMarker=t.markerArray.length,this.yAxisText=t.step,this.m_yAxisMarkersArray=t.markerArray},CandleStickChart.prototype.calculateMaxMinValue=function(t){this.calculateMax=0;for(var i=[],e=this.calculateMin=0,a=0;e<t.length;e++)for(var s=0;s<t[e].length;s++)i[a++]=t[e][s];var r=i.sort(numOrdA);for(this.calculateMin=r[0],e=0;e<t.length;e++)for(s=0;s<t[e].length;s++)+t[e][s]>=this.calculateMax&&(this.calculateMax=+t[e][s]),+t[e][s]<=this.calculateMin&&(this.calculateMin=+t[e][s])},CandleStickChart.prototype.initializeCandles=function(t){for(var i=0;i<this.m_yPixelArray.length;i++)this.m_candlesArray[i]=new Candles,this.m_candlesArray[i].init(this.m_xPixelArray[i],this.m_yPixelArray[i],this.m_candleWidth,this.m_candleHeightArray[i],this.m_linePixelArray[i],this.m_candleColor[i],t,this.ctx)},CandleStickChart.prototype.updateSeriesData=function(t){var i=[];if(null!=t&&null!==t&&""!==t&&0!=t.length)for(var e=0;e<t[0].length;e++){i[e]=[];for(var a=0;a<t.length;a++)i[e][a]=t[a][e]}return i},CandleStickChart.prototype.drawCandleChart=function(){for(var t=0;t<this.m_yPixelArray.length;t++)this.isInRange(t)||this.m_candlesArray[t].drawCandle()},CandleStickChart.prototype.isInRange=function(t){return 0==t?this.m_yPixelArray[t]>this.getStartY()||this.m_yPixelArray[t]<this.getEndY():this.m_yPixelArray[t-1]>this.getStartY()||this.m_yPixelArray[t-1]<this.getEndY()||this.m_yPixelArray[t]>this.getStartY()||this.m_yPixelArray[t]<this.getEndY()},CandleStickChart.prototype.getLegendTableContent=function(){for(var t="",i=0;i<this.getLegendNames().length;i++){var e=0==i?convertColorToHex(this.m_fillcolor):convertColorToHex(this.m_declinefillcolor);t+='<tr style="font-style:'+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'"><td><span style="background-color:'+e+'; width:10px;height:10px;"></span><span style="display:inline;">'+this.getLegendNames()[i]+"</span></td></tr>"}return t},CandleStickChart.prototype.getXPositionforToolTip=function(){for(var t=[],i=this.m_candleCalculation.getxPixelArray(),e=0;e<i.length;e++)t.push(i[0][e]);return t},CandleStickChart.prototype.getToolTipData=function(t,i){if(!IsBoolean(this.m_isEmptySeries)&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType)&!IsBoolean(this.isEmptyCategory)){if(t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY()){for(var e=0;e<this.m_xPixelArray.length;e++)if(t<=+this.m_xPixelArray[e]+ +this.m_candleWidth&&t>=+this.m_xPixelArray[e]){var a={},s=this.getSeriesData();a.cat="",a.color="",a.data=new Array,a.cat=this.getCategoryData()[0][e],a.color=this.m_candleCalculation.getCandleColor()[e];for(var r=0;r<this.getSeriesData().length;r++){var h,l=[],n=(l[0]=this.m_fieldtypes[r],l[1]=this.getSeriesDisplayNames()[r],h=""==s[r][e]||isNaN(s[r][e])||null==s[r][e]||"null"==s[r][e]?s[r][e]:(h=+s[r][e])%1!=0&&"default"!==this.m_tooltipprecision?h.toFixed(this.m_tooltipprecision):+s[r][e],this.getFormatterForToolTip(h));l[2]=n,a.data[r]=l}break}}else this.hideToolTip();return a}},CandleStickChart.prototype.drawTooltip=function(t,i){var e;IsBoolean(this.m_isEmptySeries)||this.m_designMode||(e=this.getToolTipData(t,i),this.m_hovercallback&&""!=this.m_hovercallback?this.drawCallBackContent(t,i,e):this.drawTooltipContent(e))},CandleStickChart.prototype.drawTooltipContent=function(t){this.m_tooltip.draw(t,this.m_componenttype)},CandleStickChart.prototype.getDrillDataPoints=function(t,i){if(!IsBoolean(this.m_isEmptySeries))for(var e=0;e<this.m_xPixelArray.length;e++)if(t<=+this.m_xPixelArray[e]+ +this.m_candleCalculation.getcandleWidth()&&t>=+this.m_xPixelArray[e])for(var a=0;a<this.m_yPixelArray.length;a++)if(i<=this.getStartY()&&i>=Math.ceil(+this.m_yPixelArray[a]))return{drillRecord:this.getDataProvider()[e],drillColor:this.m_candleCalculation.getCandleColor()[e]}},CandleStickCalculation.prototype.init=function(t,i,e){this.m_chart=t,this.ctx=this.m_chart.ctx;t=convertArrayType(e);this.m_globalCalculation=this.m_chart,this.m_xAxisData=i,this.data=this.setDataForCandle(t),this.m_yAxisData=this.data.candleHighdata,this.m_startX=this.m_globalCalculation.getStartX(),this.m_startY=this.m_globalCalculation.getStartY(),this.m_endX=this.m_globalCalculation.getEndX(),this.m_endY=this.m_globalCalculation.getEndY(),this.m_chartType=this.m_chart.getChartType(),this.setDrawHeight(),this.setDrawWidth(),this.m_candleGap=10,this.calculateCandleWidth(),this.setRatio(),this.setxPixelArray(),this.setyPixelArray(),this.setcandleHeightArray(t,this.data),this.setlinePixelArray(this.m_lineData,this.data)},CandleStickCalculation.prototype.setDataForCandle=function(t){for(var i=[],e=[],a=[],s=convertColorToHex(this.m_chart.m_declinefillcolor),r=convertColorToHex(this.m_chart.m_fillcolor),h=0;h<t.length;h++)+t[h][3]>+t[h][2]?(i.push(+t[h][3]),e.push(+t[h][2]),a.push(s)):(i.push(+t[h][2]),e.push(+t[h][3]),a.push(r));return this.m_lineData=this.setDataForCandleLine(t),this.m_candleColor=a,{candleHighdata:i,candleLowdata:e}},CandleStickCalculation.prototype.setDataForCandleLine=function(t){for(var i=[],e=0;e<t.length;e++)i[e]=[],t[e][2],t[e][3],i[e][0]=t[e][0],i[e][1]=t[e][1];return i},CandleStickCalculation.prototype.initGlobalCalculation=function(t){this.m_chart=t,this.m_x=this.m_chart.m_x,this.m_y=this.m_chart.m_y,this.m_width=this.m_chart.m_width,this.m_height=this.m_chart.m_height,this.m_seriesData=this.m_chart.m_seriesData,this.m_categoryData=this.m_chart.m_categoryData,this.m_chartYMargin=5,this.m_chartEndXMargin=35,this.m_verticalLegendMargin=60,this.m_chartTitleMargin=this.m_chart.m_title.getFontSize(),this.m_chartSubTitleMargin=this.m_chart.m_subTitle.getFontSize()},CandleStickCalculation.prototype.minValue=function(){return this.m_chart.min},CandleStickCalculation.prototype.getMaxValue=function(){return this.m_chart.max},CandleStickCalculation.prototype.getRatio=function(){return this.ratio},CandleStickCalculation.prototype.setRatio=function(){var t=this.getMaxValue()-this.minValue();this.ratio=0<t?this.getDrawHeight()/t:1},CandleStickCalculation.prototype.getDrawHeight=function(){return this.drawHeight},CandleStickCalculation.prototype.setDrawHeight=function(){this.drawHeight=this.m_startY-this.m_endY},CandleStickCalculation.prototype.getDrawWidth=function(){return this.drawWidth},CandleStickCalculation.prototype.setDrawWidth=function(){this.drawWidth=+this.m_endX-+this.m_startX},CandleStickCalculation.prototype.calculateCandleWidth=function(){var t=this.m_xAxisData.length,i=(+t+1)*this.m_candleGap,i=(+this.getDrawWidth()-i)/t;40<i?(this.setCandleWidth(40),this.setCandleGap(40)):i<9?(this.setCandleWidth(9),this.setCandleGap(9)):this.setCandleWidth(i)},CandleStickCalculation.prototype.getxPixelArray=function(){return this.m_xPixelArray},CandleStickCalculation.prototype.setxPixelArray=function(){for(var t=[],i=0;i<this.m_yAxisData.length;i++)t[i]=+this.m_startX+ +this.getcandleWidth()*i+this.getcandleGap()/2+ +this.getcandleGap()*i;this.m_xPixelArray=t},CandleStickCalculation.prototype.getyPixelArray=function(){return this.m_ypixelArray},CandleStickCalculation.prototype.setyPixelArray=function(){for(var t=[],i=0;i<this.m_yAxisData.length;i++){this.m_yAxisData[i]>=this.max&&(this.m_yAxisData[i]=this.max);var e=this.getRatio();(!IsBoolean(this.m_chart.isAxisSetup())||IsBoolean(this.m_chart.isBaseZero()))&&IsBoolean(this.m_chart.isBaseZero())?t[i]=this.m_startY-e*this.m_yAxisData[i]:t[i]=this.m_startY-e*this.m_yAxisData[i]+e*this.minValue()}this.m_ypixelArray=t},CandleStickCalculation.prototype.getcandleHeightArray=function(){return this.m_candleHeightArray},CandleStickCalculation.prototype.setcandleHeightArray=function(t,i){for(var e=[],a=0;a<i.candleHighdata.length;a++){var s=this.getRatio(),r=i.candleHighdata[a],h=i.candleLowdata[a];r>=this.max&&(r=this.max);(h=h<=this.min?this.min:h)<=r&&r!=this.min&&h!=this.max?e[a]=0!=(r=r-h)?Math.abs(r*s):+this.getMaxValue()/100*s:e[a]=0}this.m_candleHeightArray=e},CandleStickCalculation.prototype.getLinePixelArray=function(){return this.m_linePixelArray},CandleStickCalculation.prototype.getCandleColor=function(){return this.m_candleColor},CandleStickCalculation.prototype.setlinePixelArray=function(t,i){var e=[];t=this.updateCandleLinedata(t,i.candleHighdata,i.candleLowdata);for(var a=0;a<t.length;a++){e[a]=[];for(var s=0;s<t[a].length;s++){var r,h=this.getRatio();IsBoolean(this.m_chart.isAxisSetup())&&!IsBoolean(this.m_chart.isBaseZero())?e[a][s]=this.m_startY-t[a][s]*h+h*this.minValue():(r=t[a][s],1==s?t[a][1]>=+this.max&&(r=+this.max):3==s&&t[a][3]<=+this.min&&(r=+this.min),IsBoolean(this.m_chart.isBaseZero())?e[a][s]=1==s||3==s?this.m_startY-r*h:this.m_startY-t[a][s]*h:e[a][s]=1==s||3==s?this.m_startY-r*h+h*this.minValue():this.m_startY-t[a][s]*h+h*this.minValue())}}this.m_linePixelArray=e},CandleStickCalculation.prototype.updateCandleLinedata=function(t,i,e){for(var a=t,s=i,r=e,h=[],l=0;l<s.length;l++){h[l]=[];var n=s[l],o=r[l],m=(n>=this.max&&(n=this.max),o<=this.min?o=this.min:o>+a[l][1]&&o>this.max&&(o=+a[l][1]),+a[l][0]),c=+a[l][1];m>this.max?m=this.max:m<this.min&&(m=this.min),c>this.max?c=this.max:c<this.min&&(c=this.min),h[l][0]=n,h[l][1]=m,h[l][2]=o,h[l][3]=c}return h},CandleStickCalculation.prototype.getYAxisMarkersArray=function(){return this.m_chart.m_yAxisMarkersArray},CandleStickCalculation.prototype.getYAxisText=function(){return this.m_chart.m_yAxisText},CandleStickCalculation.prototype.getcandleWidth=function(){return this.candleWidth},CandleStickCalculation.prototype.setCandleWidth=function(t){this.candleWidth=t},CandleStickCalculation.prototype.getcandleGap=function(){return this.m_candleGap},CandleStickCalculation.prototype.setCandleGap=function(t){t*=this.m_xAxisData.length,t=this.getDrawWidth()-t;this.m_candleGap=t/this.m_xAxisData.length},Candles.prototype.init=function(t,i,e,a,s,r,h,l){this.ctx=l,this.m_xPixel=t,this.m_yPixelArray=i,this.m_candleWidth=e,this.m_candleHeightArray=a,this.m_linePixelArray=s,this.m_candleColor=r,this.m_strokeColor=h},Candles.prototype.drawCandles=function(){for(var t=0;t<this.m_yPixelArray.length;t++)this.drawCandle(+this.m_xPixel[t],+this.m_yPixelArray[t],+this.m_candleWidth,+this.m_candleHeightArray[t])},Candles.prototype.drawCandle=function(){this.drawline(),this.ctx.save(),this.ctx.beginPath(),this.ctx.fillStyle=this.m_candleColor,this.ctx.rect(this.m_xPixel,this.m_yPixelArray,this.m_candleWidth,this.m_candleHeightArray),this.ctx.fill(),this.ctx.strokeStyle=this.m_strokeColor,this.ctx.stroke(),this.ctx.restore(),this.ctx.closePath()},Candles.prototype.drawline=function(){this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.m_xPixel+ +this.m_candleWidth/2,+this.m_linePixelArray[0]),this.ctx.lineTo(this.m_xPixel+ +this.m_candleWidth/2,+this.m_linePixelArray[1]),this.ctx.lineWidth="2.2",this.ctx.strokeStyle=this.m_strokeColor,this.ctx.stroke(),this.ctx.restore(),this.ctx.closePath(),this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.m_xPixel+ +this.m_candleWidth/2,+this.m_linePixelArray[2]),this.ctx.lineTo(this.m_xPixel+ +this.m_candleWidth/2,+this.m_linePixelArray[3]),this.ctx.lineWidth="2.2",this.ctx.strokeStyle=this.m_strokeColor,this.ctx.stroke(),this.ctx.restore(),this.ctx.closePath()};
//# sourceMappingURL=CandleStickChart.min.js.map