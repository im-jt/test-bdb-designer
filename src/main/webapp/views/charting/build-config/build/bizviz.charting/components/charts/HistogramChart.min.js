/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function HistogramChart(t,i){this.base=Chart,this.base(),this.m_x=400,this.m_y=20,this.m_width=50,this.m_height=200,this.m_stackWidth="",this.m_generatexml="",this.m_seriesNames=[],this.m_categoryData=[],this.m_seriesData=[],this.m_ShowToolTipData=[],this.m_xPixelArray=[],this.m_yPixelArray=[],this.m_stackHeightArray=[],this.m_percentageArray=[],this.m_columnsArray={},this.m_calculation=new HistogramColumnCalculation,this.m_seriesVisiblityPosition,this.m_showpercentvalue=!1,this.m_showmarkingorpercentvalue=!1,this.noOfRows=1,this.m_chartContainer=t,this.m_zIndex=i,this.m_valueTextSeries={},this.m_xAxis=new Xaxis,this.m_yAxis=new Yaxis,this.m_maxbarwidth=1500,this.m_maximumrange="",this.m_range=!0,this.RangeFlag=!0,this.m_aggregation="",this.m_borderstrokecolor=""}function HistogramColumnCalculation(){this.m_xAxisPixelArray=[],this.m_yAxisPixelArray=[],this.SeriesColorForOverlaid=[],this.m_max=0,this.m_columnGap,this.m_numberOfMarkers=6,this.m_percentileValue,this.m_yAxisText,this.m_xpixelArray=[],this.m_ypixelArray=[],this.m_stackHeightArray=[],this.m_yAxisMarkersArray=[],this.m_toolTipDataForStacked,this.m_startX,this.m_startY,this.m_endX,this.m_endY,this.m_chartYMargin,this.m_chartEndXMargin,this.m_chartTitleMargin=0,this.m_chartSubTitleMargin=0,this.m_util=new Util,this.ctx="",this.m_maxbarwidth=40}function ColumnsHistrogram(){this.m_xPixel=[],this.m_yPixelArray=[],this.m_stackHeightArray=[],this.m_stackColorArray=[],this.m_stackArray=[]}HistogramChart.prototype=new Chart,HistogramChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},HistogramChart.prototype.ParseJsonAttributes=function(t,i){for(var e in this.chartJson=t)if("Chart"==e)for(var s in t[e])switch(s){case"xAxis":for(var a in t[e][s]){var r=this.getNodeAttributeName(a);i.m_xAxis[r]=t[e][s][a]}break;case"yAxis":for(var o in t[e][s]){var r=this.getNodeAttributeName(o);i.m_yAxis[r]=t[e][s][o]}break;case"Title":for(var h in t[e][s]){var r=this.getNodeAttributeName(h);i.m_title[r]=t[e][s][h]}break;case"SubTitle":for(var l in t[e][s]){r=this.getNodeAttributeName(l);i.m_subTitle[r]=t[e][s][l]}break;case"CategoryColors":var n,m=new CategoryColors;for(n in this.setCategoryColors(m),t[e][s])if("CategoryColor"===n){var g=this.getArrayOfSingleLengthJson(t[e][s][n]);m.cateogryNameColorMap=new Object;for(var _=0,y=g.length;_<y;_++){var c,u=new CategoryColor;for(c in m.setCategoryColor(u),g[_])u[r=this.getNodeAttributeName(c)]=g[_][c];m.cateogryNameColorMap[u.getCategoryName()]=u.getColor()}}else{r=this.getNodeAttributeName(n);i.m_categoryColors[r]=t[e][s][n]}m.setCategoryDefaultColorSet();break;case"ConditionalColors":if(""!=t[e][s])for(var p=new ConditionalColors,x=(this.setConditionalColors(p),this.getArrayOfSingleLengthJson(t[e][s].ConditionalColor)),_=0,y=x.length;_<y;_++){var f,C=new ConditionalColor;for(f in p.setConditionalColor(C),x[_])C[r=this.getNodeAttributeName(f)]=x[_][f]}break;default:i[r=this.getNodeAttributeName(s)]=t[e][s]}else i[r=this.getNodeAttributeName(e)]=t[e]},HistogramChart.prototype.getDataProvider=function(){return this.m_dataProvider},HistogramChart.prototype.getCategoryNames=function(){return this.m_categoryNames},HistogramChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},HistogramChart.prototype.setStartX=function(){this.yaxisLabelFont=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),this.yaxisDescriptionFont=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily);var t=this.getBorderToDescriptionMargin(),i=this.getYAxisDescriptionMargin(),e=this.getDescriptionToLabelMargin(),s=this.getLabelToAxisMargin(),a=this.getYAxisLabelMargin();this.m_startX=+this.m_x+ +t+ +i+ +e+ +a+ +s},HistogramChart.prototype.getYAxisLabelMargin=function(){var t=this.getLabelFormatterMargin();return this.setLabelWidth(),+t+ +this.getLabelWidth()+ +this.getLabelSignMargin()+ +this.getLabelPrecisionMargin()+ +this.getLabelSecondFormatterMargin()},HistogramChart.prototype.getLabelFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.m_formater&&""!=this.m_formater&&"none"!=this.m_unit&&""!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(t).width,this.ctx.closePath()),i},HistogramChart.prototype.getLabelWidth=function(){return this.m_labelwidth},HistogramChart.prototype.setLabelWidth=function(){var t=[];if((this.m_labelwidth=0)<this.fontScaling(this.m_yAxis.m_labelfontsize)){for(var i=0;i<this.m_yAxisMarkersArray.length;i++){var e,s=this.m_yAxisMarkersArray[i];IsBoolean(this.m_fixedlabel)||(IsBoolean(this.m_yAxis.getLeftaxisFormater())&&("none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(e=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?s=getNumberFormattedNumericValue(+s,this.m_precision,this.m_unit):"auto"==this.getSecondaryUnit()?s=getNumberFormattedNumericValue(+s):"none"!==this.getSecondaryUnit()&&(s=this.m_util.updateTextWithFormatter(s,e,this.m_precision))),0!==s)&&"default"!==this.m_precision&&(s=this.m_yAxis.setPrecision(s,this.m_precision)),s=getFormattedNumberWithCommas(s,this.m_numberformatter),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t[i]=this.ctx.measureText(s).width,this.ctx.closePath())}this.m_labelwidth=getMaxValueFromArray(t)}},HistogramChart.prototype.getLabelSignMargin=function(){var t=0,i=0,e=this.min;return e<0&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(e).width,this.ctx.closePath()),t=this.getLabelWidth()<i?this.ctx.measureText("-").width:t},HistogramChart.prototype.getLabelPrecisionMargin=function(){var t=5;return"auto"==this.getSecondaryUnit()&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t=this.ctx.measureText(".0").width,this.ctx.closePath()),t},HistogramChart.prototype.getLabelSecondFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(t="auto"!=this.getSecondaryUnit()?this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()):"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?getNumberFormattedSymbol(+this.max,this.m_unit):"K",this.ctx.font=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily),i=this.ctx.measureText(t).width),i},HistogramChart.prototype.getFormatterMargin=function(){var t,i=0,e=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&("none"!=this.m_formater&&""!=this.m_formater&&""!=this.m_unit&&"none"!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),i=this.ctx.measureText(t).width),"none"!=this.getSecondaryFormater())&&""!=this.getSecondaryFormater()&&""!=this.getSecondaryUnit()&&"none"!=this.getSecondaryUnit()&&(secondunit=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),e=this.ctx.measureText(secondunit).width),+i+ +e+4},HistogramChart.prototype.setEndX=function(){var t=this.getBorderToLegendMargin(),i=this.getVerticalLegendMargin(),e=this.getVerticalLegendToXAxisMargin();this.m_endX=+this.m_x+ +this.m_width-(+t+ +i+ +e)},HistogramChart.prototype.setStartY=function(){var t=this.getChartMargin(),i=this.getXAxisLabelMargin(),e=this.getXAxisDescriptionMargin();this.m_startY=+this.m_y+ +this.m_height-(+t+ +i+ +e)},HistogramChart.prototype.getXAxisLabelMargin=function(){var t=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize),i=this.m_xAxis.m_labelrotation*(Math.PI/180);if(IsBoolean(this.m_xAxis.getLabelTilted())){this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();for(var e=1,s=this.m_categoryData[0].length;e<s;e++)t<Math.abs(this.ctx.measureText(this.m_categoryData[0][e]).width*i)&&(t=Math.abs(this.ctx.measureText(this.m_categoryData[0][e]).width*i));t>this.m_height/4&&(t=this.m_xAxis.getLabelrotation()<=70?this.m_height/4-5:this.m_height/4)}else{this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();var a=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize);this.noOfRows=this.setNoOfRows(),t=a*this.noOfRows}return t},HistogramChart.prototype.setNoOfRows=function(){this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily);var t=1;if(!IsBoolean(this.isEmptyCategory)){this.ctx.measureText(this.m_categoryData[0][0]).width;for(var i=(this.getEndX()-this.getStartX())/this.m_categoryData[0].length,e=1,s=this.m_categoryData[0].length;e<s;e++)this.ctx.measureText(this.m_categoryData[0][e]).width>i&&(t=2)}return t},HistogramChart.prototype.setEndY=function(){var t;"rectangle"==this.m_chartbase?(this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()+ +this.getSpaceForShowText(),t=this.m_height-this.m_startY,this.m_endY=+this.m_height<=600?this.m_endY+t/2:this.m_endY+t+this.m_stackWidth/4):this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()+ +this.getSpaceForShowText()},HistogramChart.prototype.getSpaceForShowText=function(){return IsBoolean(this.getCounterFlagForSeriesVisiblity())&&IsBoolean(this.m_showmarkingorpercentvalue)&&(IsBoolean(this.m_subTitle.m_showsubtitle)||IsBoolean(this.getShowGradient()))?15:0},HistogramChart.prototype.getCounterFlagForSeriesVisiblity=function(){for(var t=0,i=0,e=this.m_seriesData.length;i<e;i++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[i]])&&(t++,this.m_seriesVisiblityPosition=i);return 1==t},HistogramChart.prototype.setFields=function(t){for(var i=[],e=[],s=0,a=(this.m_fieldsJson=t).length;s<a;s++)switch(this.getProperAttributeNameValue(t[s],"Type")){case"Category":i.push(t[s]);break;case"Series":case"CalculatedField":e.push(t[s])}this.setCategory(i),this.setSeries(e)},HistogramChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryFieldColor=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr={};for(var i=0,e=0,s=t.length;e<s;e++){this.m_allCategoryNames[e]=this.getProperAttributeNameValue(t[e],"Name");var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allCategoryDisplayNames[e]=a,this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]])&&(this.m_categoryNames[i]=this.getProperAttributeNameValue(t[e],"Name"),this.m_categoryDisplayNames[i]=a,this.m_categoryFieldColor[i]=this.getProperAttributeNameValue(t[e],"Color"),i++)}},HistogramChart.prototype.setSeries=function(t){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors=[],this.m_legendNames=[],this.m_seriesVisibleArr={},this.m_allSeriesDisplayNames=[],this.m_allSeriesNames=[],this.m_plotTrasparencyArray=[],this.m_seriesDataLabelProperty=[];var i=0;this.legendMap={};for(var e=0,s=t.length;e<s;e++){var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allSeriesDisplayNames[e]=a,this.m_allSeriesNames[e]=this.getProperAttributeNameValue(t[e],"Name"),this.m_seriesVisibleArr[this.m_allSeriesNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),IsBoolean(this.m_seriesVisibleArr[this.m_allSeriesNames[e]])&&(this.m_seriesDisplayNames[i]=a,this.m_seriesNames[i]=this.getProperAttributeNameValue(t[e],"Name"),this.m_legendNames[i]=a,this.m_seriesColors[i]=convertColorToHex(this.getProperAttributeNameValue(t[e],"Color")),this.m_seriesDataLabelProperty[i]=this.getProperAttributeNameValue(t[e],"DataLabelCustomProperties"),void 0!==this.m_seriesDataLabelProperty[i]?(IsBoolean(this.m_seriesDataLabelProperty[i].useFieldColor)&&(this.m_seriesDataLabelProperty[i].dataLabelFontColor=this.m_seriesColors[i]),IsBoolean(this.m_seriesDataLabelProperty[i].dataLabelUseComponentFormater)&&(this.m_seriesDataLabelProperty[i].datalabelFormaterCurrency=this.m_unit,this.m_seriesDataLabelProperty[i].datalabelFormaterPrecision=this.m_precision,this.m_seriesDataLabelProperty[i].datalabelFormaterPosition=this.m_signposition,this.m_seriesDataLabelProperty[i].datalabelFormaterUnit=this.m_secondaryunit)):this.m_seriesDataLabelProperty[i]=this.getDataLabelProperties(),this.m_aggregation=this.getProperAttributeNameValue(t[e],"Aggregation"),a=this.getProperAttributeNameValue(t[e],"PlotTransparency"),this.m_plotTrasparencyArray[i]=null!=a&&null!==a&&""!==a?a:1,a={seriesName:this.m_seriesNames[i],displayName:this.m_seriesDisplayNames[i],color:this.m_seriesColors[i],shape:"cube",index:i},this.legendMap[this.m_seriesNames[i]]=a,i++)}},HistogramChart.prototype.getLegendInfo=function(){return this.legendMap},HistogramChart.prototype.getAllSeriesNames=function(){return this.m_allSeriesNames},HistogramChart.prototype.getSeriesNames=function(){return this.m_seriesNames},HistogramChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},HistogramChart.prototype.getSeriesColors=function(){return this.m_seriesColors},HistogramChart.prototype.setLegendNames=function(t){this.m_legendNames=t},HistogramChart.prototype.getLegendNames=function(){return this.m_legendNames},HistogramChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0,i=this.getCategoryNames().length;t<i;t++)this.m_allfieldsName.push(this.getCategoryNames()[t]);for(var e=0,i=this.getAllSeriesNames().length;e<i;e++)this.m_allfieldsName.push(this.getAllSeriesNames()[e])},HistogramChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},HistogramChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var t=0,i=this.getCategoryDisplayNames().length;t<i;t++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[t]);for(var e=0,i=this.getSeriesDisplayNames().length;e<i;e++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[e])},HistogramChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},HistogramChart.prototype.setCategoryData=function(){if(this.m_categoryData=[],this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var t=0,i=this.getCategoryNames().length;t<i;t++)this.m_categoryData[t]=this.getDataFromJSON(this.getCategoryNames()[t])}},HistogramChart.prototype.getDataFromJSON=function(t){for(var i=[],e=0;e<this.getDataProvider().length;e++)void 0===this.getDataProvider()[e][t]||"undefined"===this.getDataProvider()[e][t]?i[e]="":i[e]=+this.getDataProvider()[e][t];return i},HistogramChart.prototype.getCategoryData=function(){return this.m_categoryData},HistogramChart.prototype.setSeriesData=function(){this.m_seriesData=[],this.m_ShowToolTipData=[];for(var t=0,i=this.getSeriesNames().length;t<i;t++)this.m_seriesData[t]=this.getDataFromJSON(this.getSeriesNames()[t]),this.tickCategory=this.drawBin(this.getCategoryNames()[0]),this.tickSeries=this.drawBin(this.getSeriesNames()[0]),this.allseriesData=this.updateSeriesData(this.m_seriesData,this.m_categoryData,this.tickCategory),this.arrayvalues=this.simpleSeriesData(this.allseriesData),this.simpleseriesData=this.getDataFromJSONseries(this.arrayvalues),this.m_ShowToolTipData[t]=this.simpleseriesData},HistogramChart.prototype.getSeriesData=function(){return this.m_seriesData},HistogramChart.prototype.getSeriesToolTipData=function(){return this.m_ShowToolTipData},HistogramChart.prototype.setSeriesColor=function(t){this.m_seriesColor=t},HistogramChart.prototype.getSeriesColor=function(){return this.m_seriesColor},HistogramChart.prototype.init=function(){this.setCategoryData(),this.setSeriesData(),this.setDrillData(),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.isSeriesDataEmpty(),this.setShowSeries(this.getAllFieldsName()),this.updateSeriesDataWithCommaSeperators(),this.visibleSeriesInfo=this.getVisibleSeriesData(this.getSeriesData()),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),IsBoolean(this.m_isEmptySeries)||!IsBoolean(this.isVisibleSeries())||IsBoolean(this.isEmptyCategory)||(this.setPercentageForHundred(),this.initializeCalculation(),this.m_xAxis.init(this,this.m_calculation),this.m_yAxis.init(this,this.m_calculation)),this.initializeToolTipProperty(),this.m_tooltip.init(this)},HistogramChart.prototype.setDrillData=function(){var t={};this.m_drilldata=[];for(var i=0;i<this.simpleseriesData.length;i++)(t={})[this.getSeriesNames()[0]]=this.simpleseriesData[i],t[this.getCategoryNames()[0]]=this.simpleseriesData[i],this.m_drilldata.push(t)},HistogramChart.prototype.getDrillData=function(){return this.m_drilldata},HistogramChart.prototype.getVisibleSeriesData=function(t){var i={seriesData:[],seriesColor:[],seriesDisplayName:[],seriesName:[]};return this.m_seriesVisibleArr[this.m_seriesNames[0]]&&(i.seriesData.push(t),i.seriesColor.push(this.m_seriesColors[0]),i.seriesDisplayName.push(this.m_seriesDisplayNames[0]),i.seriesName.push(this.m_seriesNames[0])),i},HistogramChart.prototype.updateSeriesDataWithCommaSeperators=function(){this.m_displaySeriesDataFlag=[];for(var t=0,i=this.m_ShowToolTipData.length;t<i;t++){this.m_displaySeriesDataFlag[t]=[];for(var e=0,s=this.m_ShowToolTipData[t].length;e<s;e++)this.m_displaySeriesDataFlag[t][e]=!0,isNaN(this.m_ShowToolTipData[t][e])&&(this.m_displaySeriesDataFlag[t][e]=!1,this.m_ShowToolTipData[t][e]=getNumericComparableValue(this.m_ShowToolTipData[t][e]),this.m_seriesData[t][e]=getNumericComparableValue(this.m_seriesData[t][e]))}},HistogramChart.prototype.getUpdateSeriesDataWithCategory=function(t){for(var i=[],e=0,s=t[0].length;e<s;e++){i[e]=[];for(var a=0,r=t.length;a<r;a++)i[e][a]=t[a][e]}return i},HistogramChart.prototype.setPercentageForHundred=function(){for(var t=this.getUpdateSeriesDataWithCategory(this.visibleSeriesInfo.seriesData),i=(this.m_SeriesDataInPerForHundredChart,[]),e=0,s=t.length;e<s;e++){var a=this.getArraySUM(t[e]);i[e]=[];for(var r=0,o=t[e].length;r<o;r++)""===t[e][r]||isNaN(t[e][r])?i[e][r]=0:i[e][r]=t[e][r]/a*100}0<i.length&&(this.m_SeriesDataInPerForHundredChart=this.getUpdateSeriesDataForHundredPercentageChart(i))},HistogramChart.prototype.getUpdateSeriesDataForHundredPercentageChart=function(t){for(var i=[],e=0,s=t[0].length;e<s;e++){i[e]=[];for(var a=0,r=t.length;a<r;a++)i[e][a]=t[a][e]}for(e=0,s=this.visibleSeriesInfo.seriesData.length;e<s;e++)for(a=0,r=this.visibleSeriesInfo.seriesData[e].length;a<r;a++)isNaN(this.visibleSeriesInfo.seriesData[e][a])||+this.visibleSeriesInfo.seriesData[e][a]<0&&(i[e][a]=-1*i[e][a]);return i},HistogramChart.prototype.getArraySUM=function(t){for(var i=0,e=0,s=t.length;e<s;e++)t[e]<0&&(t[e]=-1*t[e]),isNaN(t[e])||(i=+i+ +t[e]);return i},HistogramChart.prototype.getPercentageForHundred=function(){return this.m_SeriesDataInPerForHundredChart},HistogramChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.drawLegends();var t=this.IsDrawingPossible(),i=this.IsRangePossible();IsBoolean(t.permission)&&IsBoolean(this.RangeFlag)?(this.drawXAxis(),this.drawYAxis(),this.drawColumnChart(),this.drawDataLabel()):IsBoolean(this.RangeFlag)?this.drawMessage(t.message):this.drawMessage(i.message)},HistogramChart.prototype.initializeCalculation=function(){var t=[];this.updateCategoryData(this.m_categoryData);this.calculateMaxValue(this.simpleseriesData),this.calculateFinalMinMax(),this.setChartDrawingArea(),t[0]=this.simpleseriesData,this.m_calculation.init(this,this.tickCategory,t),this.m_xPixelArray=this.m_calculation.getxPixelArray(),this.m_yPixelArray=this.m_calculation.getyPixelArray(),this.m_stackWidth=this.m_calculation.getBarWidth(),this.m_stackHeightArray=this.m_calculation.getstackHeightArray(),IsBoolean(this.getCounterFlagForSeriesVisiblity())&&IsBoolean(this.m_showmarkingorpercentvalue)&&(this.m_percentageArray=!IsBoolean(this.m_showpercentvalue)||IsBoolean(this.getCheckedAllPosContainigZero())?this.getPercentage():this.getRoundValue(this.getPercentage(),100),this.m_showPerCentageFlag=!0),this.setColorsForSeries(),this.initializeColumns()},HistogramChart.prototype.simpleSeriesData=function(t){for(var i=[],e=0,s=0;s<t.length;s++)for(var a=0;a<t[s].length;a++)i[e++]=t[s][a];return i},HistogramChart.prototype.updateSeriesData=function(t,i,e){for(var s=[],a=0,r=0;r<t[0].length;r++)+t[0][r]<+a&&(a=t[0][r]);for(r=0;r<e.length-1;r++){for(var o=[],h=0,l=0;l<i[0].length;l++)(t[0][l]>e[r]||t[0][l]==e[r]&&t[0][l]==a)&&t[0][l]<=e[r+1]&&(o[h++]=t[0][l]);s[r]=o}return s},HistogramChart.prototype.calculateMaxValue=function(t){this.m_chartType=this.getChartType();var i=0,e=0;this.visibleSeriesInfo.seriesData;this.calculateMax=0;for(var s=this.calculateMin=0;s<t.length;s++)+t[s]>+i&&(i=t[s]);for(s=0;s<t.length;s++)+t[s]<+e&&(e=t[s]);this.calculateMin=e,this.calculateMax=i},HistogramChart.prototype.calculateFinalMinMax=function(){var t=this.calculateMin,i=this.calculateMax,t=this.getCalculateNiceScale(t,i,this.m_basezero,this.m_autoaxissetup,this.m_minimumaxisvalue,this.m_maximumaxisvalue,this.m_height);this.min=t.min,this.max=t.max,this.yAxisNoOfMarker=t.markerArray.length,this.yAxisText=t.step,this.m_yAxisMarkersArray=t.markerArray},HistogramChart.prototype.getCheckedAllPosContainigZero=function(){for(var t=!0,i=0,e=this.m_seriesData[this.m_seriesVisiblityPosition].length;i<e;i++)0!=this.m_seriesData[this.m_seriesVisiblityPosition][i]&&(t=!1);return t},HistogramChart.prototype.getPercentage=function(){for(var t=[],i=this.getSumOfSeriesData(),e=0,s=this.m_seriesData[this.m_seriesVisiblityPosition].length;e<s;e++)IsBoolean(this.m_showpercentvalue)?t[e]=0==this.m_seriesData[this.m_seriesVisiblityPosition][e]?0:this.m_seriesData[this.m_seriesVisiblityPosition][e]/i*100:t[e]=this.m_seriesData[this.m_seriesVisiblityPosition][e];return t},HistogramChart.prototype.getSumOfSeriesData=function(){for(var t=0,i=0,e=this.m_seriesData[this.m_seriesVisiblityPosition].length;i<e;i++)t=+t+ +this.m_seriesData[this.m_seriesVisiblityPosition][i];return t},HistogramChart.prototype.initializeColumns=function(){for(var t=0,i=this.visibleSeriesInfo.seriesName.length;t<i;t++)this.m_columnsArray[this.visibleSeriesInfo.seriesName[t]]=new ColumnsHistrogram,this.m_columnsArray[this.visibleSeriesInfo.seriesName[t]].init(this.m_xPixelArray[t],this.m_yPixelArray[t],this.m_stackWidth,this.m_stackHeightArray[t],this.m_percentageArray,this.getColorsForSeries()[t],this.m_strokecolor,this.m_showgradient,this.m_showPerCentageFlag,this.m_showpercentvalue,this.m_plotTrasparencyArray[t],this),IsBoolean(this.m_seriesDataLabelProperty[t].showDataLabel)&&(this.m_valueTextSeries[this.visibleSeriesInfo.seriesName[t]]=new ValueTextSeries,this.m_valueTextSeries[this.visibleSeriesInfo.seriesName[t]].init(this.m_xPixelArray[t],this.m_yPixelArray[t],this,this.simpleseriesData,this.m_seriesDataLabelProperty[t],this.simpleseriesData,this.m_stackWidth,this.m_stackHeightArray[t],"column"))},HistogramChart.prototype.getSeriesColorforColumn=function(t){for(var i=this.getSeriesColors(),e=[],s=0,a=this.m_seriesData[t].length;s<a;s++)e.push(i[t]);return e},HistogramChart.prototype.getColorsForSeries=function(){return this.m_seriesColorsArray},HistogramChart.prototype.setColorsForSeries=function(){if(this.m_seriesColorsArray=[],IsBoolean(this.m_enablecolorfromdrill)&&IsBoolean(this.m_startDrill))for(var t=0,i=this.visibleSeriesInfo.seriesData.length;t<i;t++){this.m_seriesColorsArray[t]=[];for(var e=0,s=this.visibleSeriesInfo.seriesData[t].length;e<s;e++)this.m_seriesColorsArray[t][e]=this.m_drillColor}else if("overlaid"==this.m_charttype||"Overlaid"==this.m_charttype)this.m_seriesColorsArray=this.m_calculation.getSeriesColorForOverlaid();else if(!IsBoolean(this.m_designMode)&&""!=this.getCategoryColors()&&0<this.getCategoryColors().getCategoryColor().length&&IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName()))for(var a=this.getCategoryColors().getCategoryColorsForCategoryNames(this.getCategoryData()[0],this.m_categoryFieldColor),t=0,i=this.visibleSeriesInfo.seriesData.length;t<i;t++){this.m_seriesColorsArray[t]=[];for(e=0,s=this.visibleSeriesInfo.seriesData[t].length;e<s;e++)this.m_seriesColorsArray[t][e]=a[e]}else if(IsBoolean(this.m_designMode)||""==this.getCategoryColors()||IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName())&&0!=this.getCategoryColors().getCategoryColor().length||""==this.getConditionalColors()||null==this.getConditionalColors()||!(0<this.getConditionalColors().getConditionalColor().length))for(var r=this.visibleSeriesInfo.seriesColor,o=this.tickCategory,t=0;t<this.visibleSeriesInfo.seriesData.length;t++){this.m_seriesColorsArray[t]=[];for(e=0,s=o.length;e<s;e++)this.m_seriesColorsArray[t][e]=r[t]}else for(var h=this.getConditionalColors().getConditionalColorsForConditions(this.visibleSeriesInfo.seriesName,this.visibleSeriesInfo.seriesColor,this.visibleSeriesInfo.seriesData,this),t=0,i=this.visibleSeriesInfo.seriesData.length;t<i;t++){this.m_seriesColorsArray[t]=[];for(var e=0;e<this.visibleSeriesInfo.seriesData[t].length;e++)this.m_seriesColorsArray[t][e]=h[t][e]}},HistogramChart.prototype.updateCategoryData=function(t){var i=[];if(null!=t&&null!==t&&""!==t&&0!=t.length)for(var e=0,s=t[0].length;e<s;e++){i[e]=[];for(var a=0,r=t.length;a<r;a++)i[e][a]=t[a][e]}return i},HistogramChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},HistogramChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEvent()},HistogramChart.prototype.drawTitle=function(){this.m_title.draw()},HistogramChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},HistogramChart.prototype.drawXAxis=function(){this.drawTickMarks(),this.drawVerticalLine(),this.markXaxis(),this.m_xAxis.drawXAxis()},HistogramChart.prototype.getXaxisDivison=function(){if(IsBoolean(this.m_range)){for(var t,i=(t=this.simpleseriesData).length,e=t.length,s=i-1;0<s&&0==t[s];s--)e--;return(+this.m_endX-+this.m_startX)/+e}return(+this.m_endX-+this.m_startX)/(this.tickCategory.length-1)},HistogramChart.prototype.drawTickMarks=function(){if(IsBoolean(this.m_range)){for(var t,i=(t=this.simpleseriesData).length,e=t.length,s=i-1;0<s&&0==t[s];s--)e--;if(IsBoolean(this.m_xAxis.m_tickmarks))for(r=8,o=0;o<=e;o++){h=.5,l=.5,n=this.m_xAxis.m_categorymarkingcolor,m=+this.m_startX+ +this.getXaxisDivison()*o,g=+this.m_startY,_=+this.m_startX+ +this.getXaxisDivison()*o,y=+this.m_startY+ +r;this.m_xAxis.drawLineBetweenPoints(h,l,n,m,g,_,y)}}else{var a=this.tickCategory;if(IsBoolean(this.m_xAxis.m_tickmarks))for(var r=8,o=0;o<a.length;o++){var h=.5,l=.5,n=this.m_xAxis.m_categorymarkingcolor,m=+this.m_startX+ +this.getXaxisDivison()*o,g=+this.m_startY,_=+this.m_startX+ +this.getXaxisDivison()*o,y=+this.m_startY+ +r;this.m_xAxis.drawLineBetweenPoints(h,l,n,m,g,_,y)}}},HistogramChart.prototype.drawVerticalLine=function(){for(var t,i=this.tickSeries,e=(t=this.simpleseriesData).length,s=t.length,a=e-1;0<a&&0==t[a];a--)s--;if(IsBoolean(this.m_showverticalmarkerline))for(var r=0;r<(IsBoolean(this.m_range)?s:i.length);r++){var o=hex2rgb(this.m_markercolor,this.m_markertransparency),h=+this.m_startX+ +this.getXaxisDivison()*r,l=+this.m_startY,n=+this.m_startX+ +this.getXaxisDivison()*r,m=+this.m_endY;this.m_xAxis.drawLineBetweenPoints(.5,.5,o,h,l,n,m)}},HistogramChart.prototype.markXaxis=function(){this.drawAxisLabels(),this.m_xAxis.drawDescription()},HistogramChart.prototype.drawAxisLabels=function(){var t=[];if(IsBoolean(this.m_range)){t=this.tickCategory;for(var i,e=(i=this.simpleseriesData).length,s=i.length,a=e-1;0<a&&0==i[a];a--)s--;for(r=0;r<=s;r++)this.ctx.beginPath(),this.ctx.save(),this.drawLabel(t[r],r,this.getSeriesNames()[0]),this.ctx.restore(),this.ctx.closePath()}else for(var t=this.tickCategory,r=0;r<t.length;r++)this.ctx.beginPath(),this.ctx.save(),this.drawLabel(t[r],r,this.getSeriesNames()[0]),this.ctx.restore(),this.ctx.closePath()},HistogramChart.prototype.drawYAxis=function(){IsBoolean(this.m_showmarkerline)&&this.m_yAxis.horizontalMarkerLines(),IsBoolean(this.m_zeromarkerline)&&!IsBoolean(this.m_basezero)&&IsBoolean(this.m_yAxis.hasNegativeAxisMarker(this.m_yAxisMarkersArray))&&this.m_yAxis.zeroMarkerLine(),this.m_yAxis.markYaxis(),this.m_yAxis.drawYAxis()},HistogramChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},HistogramChart.prototype.drawColumnChart=function(){for(var t=0,i=this.visibleSeriesInfo.seriesName.length;t<i;t++)this.m_columnsArray[this.visibleSeriesInfo.seriesName[t]].drawColumns()},HistogramChart.prototype.drawDataLabel=function(){for(var t=0,i=this.visibleSeriesInfo.seriesName.length;t<i;t++)IsBoolean(this.m_seriesDataLabelProperty[t].showDataLabel)&&this.m_valueTextSeries[this.visibleSeriesInfo.seriesName[t]].drawValueTextSeries()},HistogramChart.prototype.getXPositionforToolTip=function(){for(var t=[],i=this.m_calculation.getxPixelArray(),e=0,s=i[0].length;e<s;e++)t.push(i[0][e]);return t},HistogramChart.prototype.getToolTipData=function(t,i){var e;if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries())&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType)){var s="",a=(this.xPositions=this.getXPositionforToolTip(),this.getSeriesToolTipData()),r=this.m_calculation.getBarWidth()*this.m_xPixelArray.length,o=this.tickCategory;if(t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY()){for(var h=0,l=this.xPositions.length;h<l;h++)if(t<=+this.xPositions[h]+r&&t>=+this.xPositions[h]){(e={cat:""}).data=new Array;for(var n=0,m=0,g=a.length-(a.length-1);n<g;n++){var _=[],y=(e.cat="Range: ("+o[h]+") - ("+o[h+1]+")",_[0]={color:this.visibleSeriesInfo.seriesColor[n],shape:this.legendMap[this.getSeriesNames()[n]].shape},_[1]=this.visibleSeriesInfo.seriesDisplayName[n],s=""!=a[n][h]&&!isNaN(a[n][h])&&null!=a[n][h]&&"null"!=a[n][h]&&(y=+a[n][h])%1!=0&&"default"!==this.m_tooltipprecision?y.toFixed(this.m_tooltipprecision):a[n][h],this.getFormatterForToolTip(s));_[2]=y,e.data[m]=_,m++}e.highlightIndex=this.getDrillColor(t,i),IsBoolean(this.m_controlledtooltip)&&(e=this.updateTooltipData(e));break}}else this.hideToolTip();return e}},HistogramChart.prototype.getDrillColor=function(t,i){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory))for(var e=0,s=this.m_xPixelArray.length;e<s;e++)for(var a=0,r=this.m_xPixelArray[e].length;a<r;a++)if(t<=+this.m_xPixelArray[e][a]+ +this.m_calculation.getBarWidth()&&t>=+this.m_xPixelArray[e][a])if("overlaid"!=this.m_charttype){for(var o=0,h=this.m_yPixelArray.length;o<h;o++)if(i<=this.getStartY()&&i>=Math.ceil(+this.m_yPixelArray[o][a]))return e}else for(o=this.m_yPixelArray.length-1;0<=o;o--)if(i<=this.getStartY()&&i>=Math.ceil(+this.m_yPixelArray[o][a]))return this.m_calculation.m_originalindexforoverlaiddata[2][o][a]},HistogramChart.prototype.getDrillDataPoints=function(t,i){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries()))for(var e=0,s=this.m_xPixelArray.length;e<s;e++)for(var a=0,r=this.m_xPixelArray[e].length;a<r;a++)if(t<=+this.m_xPixelArray[e][a]+ +this.m_calculation.getBarWidth()&&t>=+this.m_xPixelArray[e][a])if("overlaid"!=this.m_charttype){for(var o,h=0,l=this.m_yPixelArray.length;h<l;h++)if(i<=this.getStartY()&&i>=Math.ceil(+this.m_yPixelArray[h][a]))return n=this.getFieldNameValueMap(a),m=this.visibleSeriesInfo.seriesColor[e],g=this.visibleSeriesInfo.seriesName[e],o=this.visibleSeriesInfo.seriesDisplayName[e],_=n[g],n.drillField=g,n.drillDisplayField=o,n.drillValue=_,{drillRecord:n,drillColor:m}}else for(var n,m,g,_,h=this.m_yPixelArray.length-1;0<=h;h--)if(i<=this.getStartY()&&i>=Math.ceil(+this.m_yPixelArray[h][a]))return n=this.getFieldNameValueMap(a),m=this.getSeriesColors()[this.m_calculation.m_originalindexforoverlaiddata[2][h][a]],_=n[g=this.getSeriesNames()[this.m_calculation.m_originalindexforoverlaiddata[2][h][a]]],_=n[g],n.drillField=g,n.drillValue=_,{drillRecord:n,drillColor:m}},HistogramChart.prototype.getFieldNameValueMap=function(t){for(var i=new Object,e=this.getAllFieldsName(),s=0;s<e.length;s++)i[e[s]]=this.getDrillData()[t][e[s]];return i},HistogramColumnCalculation.prototype.init=function(t,i,e){this.m_chart=t,this.m_xAxisData=i,this.m_yAxisData=e,this.m_maxbarwidth=this.m_chart.m_maxbarwidth*(1+.5*(this.m_yAxisData.length-1)),this.m_startX=this.m_chart.getStartX(),this.m_startY=this.m_chart.getStartY(),this.m_endX=this.m_chart.getEndX(),this.m_endY=this.m_chart.getEndY(),this.m_chartType=this.m_chart.getChartType(),this.setDrawHeight(),this.setDrawWidth(),this.m_columnGap=0,this.calculateBarWidth(),this.setRatio(),this.setxPixelArray(),this.setstackHeightArray(),this.setyPixelArray()},HistogramColumnCalculation.prototype.getMaxValue=function(){return this.m_chart.max},HistogramColumnCalculation.prototype.minValue=function(){return this.m_chart.min},HistogramColumnCalculation.prototype.getYAxisText=function(){return this.m_chart.m_yAxisText},HistogramColumnCalculation.prototype.getPercentile=function(t){t%=10;return t=10!==t?10-t:t},HistogramColumnCalculation.prototype.getYAxisMarkersArray=function(){return this.m_chart.m_yAxisMarkersArray},HistogramColumnCalculation.prototype.getDrawHeight=function(){return this.drawHeight},HistogramColumnCalculation.prototype.setDrawHeight=function(){this.drawHeight=this.m_startY-this.m_endY},HistogramColumnCalculation.prototype.getDrawWidth=function(){return this.drawWidth},HistogramColumnCalculation.prototype.setDrawWidth=function(){this.drawWidth=+this.m_endX-+this.m_startX},HistogramColumnCalculation.prototype.getRatio=function(){return this.ratio},HistogramColumnCalculation.prototype.setRatio=function(){var t=this.getMaxValue()-this.minValue();this.ratio=0<t?this.getDrawHeight()/t:1},HistogramColumnCalculation.prototype.calculateBarWidth=function(){if(IsBoolean(this.m_chart.m_range)){for(var t,i=(t=this.m_chart.simpleseriesData).length,e=t.length,s=i-1;0<s&&0==t[s];s--)e--;a=+(i=e)*this.m_columnGap}else var a=+(i=this.m_chart.tickCategory.length-1)*this.m_columnGap;(a=(+this.getDrawWidth()-+a)/i)>this.m_maxbarwidth?(this.setBarWidth(this.m_maxbarwidth),this.setColumnGap(this.m_maxbarwidth)):a<9?(this.setBarWidth(9),this.setColumnGap(9)):this.setBarWidth(a)},HistogramColumnCalculation.prototype.setBarWidth=function(t){this.barWidth=t,this.setBarWidthForClustered()},HistogramColumnCalculation.prototype.setColumnGap=function(t){t*=this.m_xAxisData.length,t=this.getDrawWidth()-t;this.m_columnGap=t/this.m_xAxisData.length},HistogramColumnCalculation.prototype.setBarWidthForClustered=function(){this.barWidth/=this.m_yAxisData.length},HistogramColumnCalculation.prototype.getBarWidth=function(){return this.barWidth},HistogramColumnCalculation.prototype.getColumnGap=function(){return this.m_columnGap},HistogramColumnCalculation.prototype.getxPixelArray=function(){return this.m_xPixelArray},HistogramColumnCalculation.prototype.setxPixelArray=function(){for(var t=[],i=0,e=this.m_yAxisData[0].length;i<e;i++){t[i]=[];for(var s=0,a=this.m_yAxisData.length;s<a;s++)t[i][s]=+this.m_startX+ +this.getBarWidth()*s+this.getColumnGap()/2+(+this.getBarWidth()*this.m_yAxisData.length+ +this.getColumnGap())*i}this.m_xPixelArray=this.transformXPixelArray(t)},HistogramColumnCalculation.prototype.transformXPixelArray=function(t){for(var i=[],e=0,s=this.m_yAxisData.length;e<s;e++){i[e]=[];for(var a=0,r=this.m_yAxisData[0].length;a<r;a++)i[e][a]=t[a][e]}return i},HistogramColumnCalculation.prototype.getRatioForHundredPercent=function(t){return+this.m_hundredPercentsRatios[t]},HistogramColumnCalculation.prototype.setyPixelArray=function(){this.m_ypixelArray=this.getYPixelArrayForClustered()},HistogramColumnCalculation.prototype.getYPixelArrayForClustered=function(){for(var t=[],i=0,e=this.m_yAxisData.length;i<e;i++){t[i]=[];for(var s=0,a=this.m_yAxisData[i].length;s<a;s++){var r,o=this.getRatio(),h=this.minValue(),l=this.getMaxValue();this.m_yAxisData[i][s]>l&&(this.m_yAxisData[i][s]=0),this.m_yAxisData[i][s]<h&&(this.m_yAxisData[i][s]=h),+(l=h<0?(r=this.m_startY-Math.abs(h)*o,this.m_yAxisData[i][s]):(r=this.m_startY,this.m_yAxisData[i][s]-h))<0&&!IsBoolean(this.m_chart.isAxisSetup())&&0<+this.m_chart.m_minimumaxisvalue&&(l=0),t[i][s]=r-o*l-1}}return t},HistogramColumnCalculation.prototype.setSeriesColorForOverlaid=function(t){this.SeriesColorForOverlaid=t},HistogramColumnCalculation.prototype.getSeriesColorForOverlaid=function(){return this.SeriesColorForOverlaid},HistogramColumnCalculation.prototype.getYPixelArrayForOverlaid=function(){for(var t=this.arrangeDataForOverlaid(),i=(this.setSeriesColorForOverlaid(t[1]),this.m_yAxisData=t[0],[]),e=0,s=this.m_yAxisData.length;e<s;e++){i[e]=[];for(var a=0,r=this.m_yAxisData[e].length;a<r;a++){this.getRatio();var o,h=this.getRatio(),l=this.minValue(),n=this.getMaxValue();this.m_yAxisData[e][a]>n&&(this.m_yAxisData[e][a]=0),this.m_yAxisData[e][a]<l&&(this.m_yAxisData[e][a]=l),+(n=l<0?(o=this.m_startY-Math.abs(l)*h,this.m_yAxisData[e][a]):(o=this.m_startY,this.m_yAxisData[e][a]-l))<0&&!IsBoolean(this.m_chart.isAxisSetup())&&0<+this.m_chart.m_minimumaxisvalue&&(n=0),i[e][a]=o-h*n-1}}return i},HistogramColumnCalculation.prototype.arrangeDataForOverlaid=function(){this.m_originalindexforoverlaiddata=[];for(var t=this.m_chart.visibleSeriesInfo.seriesColor,i=[],e=[],s=[],a=0,r=this.m_yAxisData[0].length;a<r;a++){i[a]=[],e[a]=[],s[a]=[];for(var o=0,h=this.m_yAxisData.length;o<h;o++)i[a][o]=isNaN(this.m_yAxisData[o][a])?0:+this.m_yAxisData[o][a],e[a][o]=t[o],s[a][o]=o}var l=this.sortingDataWithColor(i,e,s),l=this.arrengeSeriesDataandColor(l);return this.m_originalindexforoverlaiddata=l},HistogramColumnCalculation.prototype.sortingDataWithColor=function(t,i,e){for(var s=[],a=0,r=t.length;a<r;a++){s[a]=[];for(var o=0,h=t[a].length;o<h;o++)s[a][o]=[],s[a][o][0]=+t[a][o],s[a][o][1]=i[a][o],s[a][o][2]=e[a][o]}for(var l=0,r=s.length;l<r;l++)s[l].sort(function(t,i){return i[0]-t[0]});for(var n=[],m=0,r=s.length;m<r;m++){var g=0;n[m]=[];for(var _=0,h=s[m].length;_<h;_++)+s[m][_][0]<0&&(n[m][g++]=s[m][_]);n[m].sort(function(t,i){return t[0]-i[0]});for(var y=0,_=0,c=s[m].length;_<c;_++)+s[m][_][0]<0&&(s[m][_]=n[m][y++])}return s},HistogramColumnCalculation.prototype.arrengeSeriesDataandColor=function(t){for(var i=[],e=[],s=[],a=0,r=t.length;a<r;a++){i[a]=[],e[a]=[],s[a]=[];for(var o=0,h=t[a].length;o<h;o++)i[a][o]=t[a][o][0],e[a][o]=t[a][o][1],s[a][o]=t[a][o][2]}for(var l=[],n=[],m=[],g=0,r=i[0].length;g<r;g++){l[g]=[],n[g]=[],m[g]=[];for(var _=0,h=i.length;_<h;_++)l[g][_]=+i[_][g],n[g][_]=e[_][g],m[g][_]=s[_][g]}return[l,n,m]},HistogramColumnCalculation.prototype.getyPixelArray=function(){return this.m_ypixelArray},HistogramColumnCalculation.prototype.calculationYpixcelForClusterTypeChart=function(){},HistogramColumnCalculation.prototype.getstackHeightArray=function(){return this.m_stackHeightArray},HistogramColumnCalculation.prototype.setstackHeightArray=function(){for(var t,i=[],e=this.getRatio(),s=this.minValue(),a=this.getMaxValue(),r=0,o=this.m_yAxisData.length;r<o;r++){i[r]=[];for(var h=0,l=this.m_yAxisData[r].length;h<l;h++)i[r][h]=this.getRatio(),t=s<0?+this.m_yAxisData[r][h]>a?0:this.m_yAxisData[r][h]:+this.m_yAxisData[r][h]>a?0:this.m_yAxisData[r][h]-s,+(t=+this.m_yAxisData[r][h]<0?0:t)<0&&!IsBoolean(this.m_chart.isAxisSetup())&&0<+this.m_chart.m_minimumaxisvalue&&(t=0),i[r][h]=e*t}this.m_stackHeightArray=i},HistogramColumnCalculation.prototype.calculateSum=function(t){for(var i=0,e=0,s=t.length;e<s;e++)i=+i+ +t[e];return i},ColumnsHistrogram.prototype.init=function(t,i,e,s,a,r,o,h,l,n,m,g){this.m_showGradient=h,this.m_xPixel=t,this.m_yPixelArray=i,this.m_stackWidth=e,this.m_stackHeightArray=s,this.m_stackPercentageArray=a,this.m_stackColorArray=r,this.m_strokeColor=o,this.m_showPercentFlag=l,this.m_percentvalueFlag=n,this.m_plotTrasparencyArray=m,this.m_chart=g;for(var _=0,y=this.m_yPixelArray.length;_<y;_++)this.m_stackArray[_]=new Stack,this.m_stackArray[_].init(this.m_xPixel[_],this.m_yPixelArray[_],this.m_stackWidth,this.m_stackHeightArray[_],this.m_stackColorArray[_],this.m_strokeColor,this.m_showGradient,this.m_chart.ctx,this.m_chart.m_chartbase,this.m_stackPercentageArray[_],this.m_showPercentFlag,this.m_percentvalueFlag,this.m_plotTrasparencyArray,this.m_chart.simpleseriesData[_],this.m_chart)},ColumnsHistrogram.prototype.drawColumns=function(){for(var t=0,i=this.m_yPixelArray.length;t<i;t++)this.isInRange(t)||this.m_stackArray[t].drawStack()},ColumnsHistrogram.prototype.isInRange=function(t){return this.m_yPixelArray[t]>=this.m_chart.getStartY()&&this.m_yPixelArray[t]<=this.m_chart.getEndY()},HistogramChart.prototype.translateTextPosition=function(t,i,e){var s=this.m_xAxis.getLabelrotation(),a=this.m_xAxis.calculateAxisToLabelMargin(i),t=+this.m_startY+t/2+ +a+this.m_xAxis.calculateAxisLineToTextGap()/2,a=this.m_xAxis.getLabelTextWidth(e);i=1==this.m_xAxis.m_xAxisData.length?+this.m_startX+(this.m_endX-this.m_startX)/2:+this.m_startX+this.getXaxisDivison()*i,this.m_xAxis.translateText(s,i,t,e,a)},HistogramChart.prototype.drawLabel=function(t,i,e){var s,a;this.tickSeries;IsBoolean(this.m_xAxis.getLabelTilted())?(s=""!=this.m_xAxis.getDescription()?this.fontScaling(this.m_fontsize):5,s=this.m_height/4-2.5-s-this.m_xAxis.calculateAxisLineToTextGap()/2,a=this.m_xAxis.getLabelrotation(),this.ctx.font=this.m_xAxis.getLabelFontProperties(),this.ctx.measureText(t).width>s&&(t=this.m_xAxis.getText(""+t,s,this.m_xAxis.getLabelFontProperties()))):(s=(this.m_endX-this.m_startX)/this.getDataProvider().length*2,a=0,2==this.m_xAxis.m_chart.noOfRows&&(t=this.m_xAxis.getText(""+t,s,this.m_xAxis.getLabelFontProperties()))),this.translateTextPosition(5,i,t),this.ctx.rotate(a*Math.PI/180),IsBoolean(this.m_xAxis.isLabelDecoration())&&this.m_xAxis.drawUnderLine(t,0,this.fontScaling(this.m_xAxis.m_labelfontsize)/2,this.m_xAxis.m_labelfontcolor,this.fontScaling(this.m_xAxis.getLabelFontSize()),this.m_xAxis.m_labeltextalign),this.m_textUtil.drawText(this.ctx,t,0,0,this.m_xAxis.getLabelFontProperties(),this.m_xAxis.m_labeltextalign,this.m_xAxis.m_labelfontcolor)},HistogramChart.prototype.getDataFromJSONseries=function(t){for(var i=[],e=t,s=this.tickCategory,a=0,r=0;r<s.length;r++)+s[r]<+a&&(a=s[r]);if("count"==this.m_aggregation)for(r=0;r<s.length-1;r++){for(var o=0,h=0;h<e.length;h++)(e[h]>s[r]||e[h]==s[r]&&e[h]==a)&&e[h]<=s[r+1]&&o++;i[r]=o}else if("average"==this.m_aggregation)for(r=0;r<s.length-1;r++){for(var o=0,l=0,h=0;h<e.length;h++)(e[h]>s[r]||e[h]==s[r]&&e[h]==a)&&e[h]<=s[r+1]&&(o++,l=+l+ +e[h]);i[r]=0==o?0:l/o}else if("min"==this.m_aggregation)for(r=0;r<s.length-1;r++){for(var n=[],h=0;h<e.length;h++)(e[h]>s[r]||e[h]==s[r]&&e[h]==a)&&e[h]<=s[r+1]&&(n[h]=e[h]);a=0<(g=n.sort(numOrdA)).length?g[0]:0;i[r]=a}else if("max"==this.m_aggregation)for(r=0;r<s.length-1;r++){for(var m=[],h=0;h<e.length;h++)(e[h]>s[r]||e[h]==s[r]&&e[h]==a)&&e[h]<=s[r+1]&&(m[h]=e[h]);var g,_=0<(g=m.sort(numOrdD)).length?g[0]:0;i[r]=_}else for(r=0;r<s.length-1;r++){for(o=0,h=0;h<e.length;h++)(e[h]>s[r]||e[h]==s[r]&&e[h]==a)&&e[h]<=s[r+1]&&(o=+o+ +e[h]);i[r]=o}return i},HistogramChart.prototype.drawBin=function(t){""!=this.m_maximumrange&&0!=this.m_maximumrange&&"0"!=this.m_maximumrange&&null!=this.m_maximumrange&&null!=this.m_maximumrange&&"undefined"!=this.m_maximumrange||(this.m_range=!0);for(var i=0,e=0,s=[],a=0;a<this.getDataProvider().length;a++)+this.getDataProvider()[a][t]>i&&(i=this.getDataProvider()[a][t]);for(a=0;a<this.getDataProvider().length;a++)+this.getDataProvider()[a][t]<e&&(e=this.getDataProvider()[a][t]);if(IsBoolean(this.m_range))return this.getCalculateNiceScales(e,i,this.m_basezero,this.m_autoaxissetup,e,i,this.m_height).markerArray;var r=(+i-+e)/+this.m_maximumrange;s[0]=e,this.RangeFlag=!(50<r);for(a=1;a<r;a++)s[a]=+s[a-1]+ +this.m_maximumrange;return s[a]=+s[a-1]+ +this.m_maximumrange,s},HistogramChart.prototype.getCalculateNiceScales=function(t,i,e,s,a,r,o){t===i&&(i=0<t?(t=3*t/5,7*i/5):(t=7*t/5,3*i/5)),IsBoolean(e)&&IsBoolean(s)?(h=t,l=+i):IsBoolean(e)&&!IsBoolean(s)?(h=t,l=isNaN(r)||""===r?0:+r):!IsBoolean(e)&&IsBoolean(s)?(h=+t,l=+i):IsBoolean(e)||IsBoolean(s)||(h=isNaN(a)||""===r?0:+a,l=isNaN(r)||""===r?0:+r);var h,l,t={minPoint:h,maxPoint:l=l<=h?h+4:l,compHeight:o,isMaxYaxis:this.m_ismaxyaxis,isMinYaxis:this.m_isminyaxis,noOfMarkers:this.m_noofmarkers};return new NiceScale(t).getScaleInfo()},HistogramChart.prototype.IsRangePossible=function(){return{permission:"false",message:"Increase Range!"}};
//# sourceMappingURL=HistogramChart.min.js.map