/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function TimelineChart(t,i){this.base=Chart,this.base(),this.m_x=680,this.m_y=20,this.m_width=300,this.m_height=260,this.m_radius=2,this.m_lineSeries={},this.m_columnSeries=[],this.m_colorNames=[],this.m_pointSeries={},this.m_valueTextSeries={},this.m_categoryNames=[],this.m_seriesNames=[],this.m_seriesarr=[],this.m_categoryData=[],this.m_seriesData=[],this.m_alertData=[],this.m_showslider=!0,this.m_showslidermarker=!0,this.m_showslidertext=!1,this.m_sliderhandlerbgcolor="#ccffff",this.m_sliderselectbgcolor="#cccccc",this.m_slidercontainerbgcolor="#ccffff",this.m_slidercontainerbordercolor="#bbbbbb",this.m_sliderbordercolor="#cccccc",this.m_sliderbghandle="#ffffff",this.m_slideropacityhandle="0.0",this.m_sliderbgselection="#cccccc",this.m_slideropacityselection="0.5",this.m_sliderbgcontainer="#ecf0f1",this.m_slideropacitycontainer="0.0",this.m_sliderbgscrollbar="#b0b0b0",this.m_slideropacityscrollbar="0.7",this.m_sourcedateformat="mm/dd/yyyy",this.m_yPositionArray=[],this.m_xAxis=new svgXAxis,this.m_yAxis=new svgYAxis,this.m_title=new svgTitle(this),this.m_subTitle=new svgSubTitle,this.m_util=new Util,this.noOfRows=1,this.m_chartContainer=t,this.m_zIndex=i,this.m_continuousline=!1,this.m_lineCalculation="",this.m_yaxisArr=[],this.m_marginXArray=[],this.count=0,this.timeLineSliderFlag=!1,this.svgContainerId="",this.rangedSelectorMargin=27,this.m_luminance="0.5",this.columnGapeMap={},this.m_rangeselectoropacity="1.0",this.m_rangeselectorbgcolor="#cccddd",this.m_rangeselectorfontfamily="Roboto",this.m_showrangeselector="true",this.isSeriesValueWithComma=!1,this.m_fillarea=!1,this.m_columntype="clustered",this.m_barsize=60,this.m_fixedrange="false",this.origonalXposition="",this.updateflag=!1,this.m_sliderheightratio=7,this.m_sliderrangeflag=!1,this.m_sliderrangevalue=10,this.m_sliderheight=63,this.sliderMargin=70,this.m_topcurvemargin=26,this.m_stackborderwidth="0.5",this.m_stackbordercolor="#ffffff",this.m_enablestackshadow="false",this.m_stackshadowcolor="#000000",this.m_stackshadowopacity="0.3",this.m_stackborderradius="0",this.m_overlappeddatalabelarrayY=[],this.m_overlappeddatalabelarrayX=[],this.m_sorteddate="false",this.m_sliderLastIndex=0,this.m_isCurrentDate=!1,this.m_sliderposition="default",this.m_enableanimation="false",this.m_stackAnimationDuration=.5,this.m_lineAnimationDuration=.5,this.m_bubbleanimationduration=.5,this.m_hovershape=2,this.m_stackhoverstyle="false",this.m_stackstripecolor="#ffffff",this.m_stacksvgtype="rect",this.m_fixedlegend="true",this.m_topFloatingLegendMargin=30,this.m_bottomFloatingLegendMargin=40,this.m_leftFloatingLegendMargin=100,this.m_rightFloatingLegendMargin=100,this.m_minradius=2,this.m_maxradius=26,this.m_showlinesecondaxis="true",this.m_canvastype="svg",this.m_xaxislabellines=3,this.m_controlbarwidth="auto",this.m_drilltoggle=!1,this.enableDrillHighlighter="false",this.m_slideronmaxmize=!1,this.m_showannotation=!1,this.m_showyannotation=!1,this.m_showxannotation=!1,this.m_annotationradius="3",this.m_annotationshape="point",this.m_annotationcolor="#7F00FF",this.m_annotationtextcolor="#CF9FFF",this.m_annotationseriescolor=!1,this.m_annotationopacity="1",this.m_annotationData=[],this.m_annotationXData=[],this.m_annotationXData2=[],this.m_annotationNames=[],this.m_annotationdatatype="number",this.m_annotationformat="year",this.m_annotationTooltip="default;",this.m_showannotationTooltip=!1,this.m_annotationtooltiptitle="Annotation",this.m_linetype=!1,this.m_showyaxisthreshold=!1,this.m_minimumyaxisthreshold="0",this.m_maximumyaxisthreshold="50",this.m_yaxisthresholdlinewidth="1",this.m_yaxisthresholdstrokecolor="#000000",this.m_minimumthresholdstrokecolor="#00FF00",this.m_maximumthresholdstrokecolor="#FF0000",this.m_thresholdlinetype="straight",this.m_minimumyaxisthresholdline=!0,this.m_enablethresholdfill=!1,this.m_fillBelowLowerThreshold="#ffea00",this.m_fillBetweenThreshold="#00FF00",this.m_fillAboveUpperThreshold="#ff0000",this.m_thresholdfillcolor="#ffea00,#00FF00,#ff0000",this.m_thresholdfilllevel="low,middle,top",this.m_thresholdfillopacity="0.3,0.3,0.3",this.m_thresholdfilllabel="Low,Middle,Top",this.m_thresholdfilllabelcolor="#000000,#000000,#000000",this.m_fillBelowThresholdOpacity=.3,this.m_fillBetweenThresholdOpacity=.3,this.m_fillUpperThresholdOpacity=.3,this.m_BelowThresholdLabel="Low",this.m_BetweenThresholdLabel="Middle",this.m_UpperThresholdLabel="Top",this.m_BelowThresholdLabelColor="#000000",this.m_BetweenThresholdLabelColor="#000000",this.m_UpperThresholdLabelColor="#000000"}function TimeLineCalculation(){this.startX,this.startY,this.endX,this.endY,this.marginX,this.xAxisData=[],this.yAxisData=[],this.xPositionArray=[],this.yPositionArray=[],this.xPositionMap={},this.yPositionMap={},this.heightMap={},this.columnWidthMap={},this.m_yAxisMarkersArray=[],this.m_numberOfMarkers=6,this.basePoint="",this.minDate="",this.maxDate="",this.columnWidth="",this.columnGap="",this.minSliderIndex="",this.maxSliderIndex=""}function TimeLineColumns(){this.m_xPixel=[],this.m_yPixelArray=[],this.m_stackHeightArray=[],this.m_stackColorArray=[],this.m_stackOpacityArray=[],this.m_svgStackArray=[],this.m_transparency="",this.m_ySeriesData=[],this.m_valueOnDataPoints}function TimeLineStack(){this.m_stackXPixel,this.m_stackYPixel,this.m_stackWidth,this.m_stackHeight,this.m_stackColor,this.m_showGradient,this.m_transparency,this.m_ySeriesData,this.m_valueOnDataPoints,this.m_stackOpacity}function SVGLineSeries(){this.color,this.width,this.xPositionArray=[],this.yPositionArray=[],this.line=[],this.ctx="",this.m_chart="",this.seriesName="",this.basePoint=""}function SVGPointSeries(){this.color,this.radius=[],this.xPositionArray=[],this.yPositionArray=[],this.point=[],this.ctx="",this.m_chart=""}function AnnotSeries(){this.color,this.radius,this.xPositionArray=[],this.yPositionArray=[],this.point=[],this.ctx="",this.m_chart=""}function SVGPoint(){this.base=Point,this.base()}function svgYAxis(){this.base=Yaxis,this.base(),this.m_showlineyaxis="true",this.m_lineyaxiscolor=""}function svgXAxis(){this.base=Xaxis,this.base(),this.m_showlinexaxis="true",this.m_linexaxiscolor=""}TimelineChart.prototype=new Chart,TimelineChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},TimelineChart.prototype.ParseJsonAttributes=function(t,i){for(var e in this.chartJson=t)if("Chart"==e)for(var s in t[e])switch(s){case"xAxis":for(var a in t[e][s]){var r=this.getNodeAttributeName(a);i.m_xAxis[r]=t[e][s][a]}break;case"yAxis":for(var o in t[e][s]){var r=this.getNodeAttributeName(o);i.m_yAxis[r]=t[e][s][o]}break;case"Title":for(var n in t[e][s]){var r=this.getNodeAttributeName(n);i.m_title[r]=t[e][s][n]}break;case"SubTitle":for(var h in t[e][s]){r=this.getNodeAttributeName(h);i.m_subTitle[r]=t[e][s][h]}break;case"CategoryColors":var m,l=new CategoryColors;for(m in this.setCategoryColors(l),t[e][s])if("CategoryColor"===m){var c=this.getArrayOfSingleLengthJson(t[e][s][m]);l.cateogryNameColorMap=new Object;for(var _=0;_<c.length;_++){var d,g=new CategoryColor;for(d in l.setCategoryColor(g),c[_])g[r=this.getNodeAttributeName(d)]=c[_][d];l.cateogryNameColorMap[g.getCategoryName()]=g.getColor()}}else{r=this.getNodeAttributeName(m);i.m_categoryColors[r]=t[e][s][m]}l.setCategoryDefaultColorSet();break;case"ConditionalColors":if(""!=t[e][s])for(var p=new ConditionalColors,u=(this.setConditionalColors(p),this.getArrayOfSingleLengthJson(t[e][s].ConditionalColor)),_=0;_<u.length;_++){var y,x=new ConditionalColor;for(y in p.setConditionalColor(x),u[_])x[r=this.getNodeAttributeName(y)]=u[_][y]}break;default:i[r=this.getNodeAttributeName(s)]=t[e][s]}else i[r=this.getNodeAttributeName(e)]=t[e]},TimelineChart.prototype.setFields=function(t){if("fanchart"!==this.m_charttype)try{t=getDuplicateArray(t),sortAscArrayOfJsonByKey(t,"ChartType")}catch(t){}for(var i=[],e=[],s=[],a=(this.m_fieldsJson=t).length,r=0;r<a;r++)switch(this.getProperAttributeNameValue(t[r],"Type")){case"Category":i.push(t[r]);break;case"Series":e.push(t[r]);break;case"Annotation":s.push(t[r]);break;case"CalculatedField":e.push(t[r])}this.setCategory(i),this.setSeries(e),this.setAnnotation(s)},TimelineChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryFieldColor=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr={};for(var i=0,e=t.length,s=0;s<e;s++){this.m_allCategoryNames[s]=this.getProperAttributeNameValue(t[s],"Name");var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[s],"DisplayName"));this.m_allCategoryDisplayNames[s]=a,this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[s]]=this.getProperAttributeNameValue(t[s],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[s]])&&(this.m_categoryNames[i]=this.getProperAttributeNameValue(t[s],"Name"),this.m_categoryDisplayNames[i]=a,this.m_categoryFieldColor[i]=this.getProperAttributeNameValue(t[s],"Color"),i++)}},TimelineChart.prototype.setSeries=function(t){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors={},this.m_seriesOpacity={},this.m_legendNames=[],this.m_seriesVisibleArr={},this.m_plotRadiusArray={},this.m_plotRadiusFieldArray={},this.m_isfixedradius={},this.m_plotTrasparencyArray={},this.m_fillTrasparencyArray={},this.m_plotShapeArray=[],this.m_allSeriesDisplayNames=[],this.m_allSeriesNames=[],this.m_seriesDisplayNamesMap={},this.m_seriesDataLabelProperty={},this.m_lineWidthArray={},this.m_lineTypeArray={},this.m_seriesAxisDrill={},this.m_seriesChartTypeDrill={},this.m_fanChartSeriesVisibleArr={},this.m_fillAreaColor=[];for(var i=0,e=(this.legendMap={},this.m_seriesAxis=[],this.m_seriesChartType=[],this.m_fanSeriesType={},this.m_LegendColors=[],this.m_seriesFillAreaMap={},(t="fanchart"===this.m_charttype?this.setFanChartSeriesJson(t):t).length),s=0;s<e;s++){var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[s],"DisplayName"));this.m_allSeriesDisplayNames[s]=a,this.m_allSeriesNames[s]=this.getProperAttributeNameValue(t[s],"Name"),this.m_seriesVisibleArr[this.m_allSeriesNames[s]]=this.getProperAttributeNameValue(t[s],"visible"),this.m_fanChartSeriesVisibleArr[this.m_allSeriesNames[s]]=this.getProperAttributeNameValue(t[s],"visible"),IsBoolean(this.m_seriesVisibleArr[this.m_allSeriesNames[s]])&&(this.m_seriesDisplayNames[i]=a,this.m_legendNames[i]=a,this.m_seriesNames[i]=this.getProperAttributeNameValue(t[s],"Name"),this.m_seriesDisplayNamesMap[this.m_seriesNames[i]]=a,this.m_seriesColors[this.m_seriesNames[i]]=convertColorToHex(this.getProperAttributeNameValue(t[s],"Color")),this.m_LegendColors[i]=convertColorToHex(this.getProperAttributeNameValue(t[s],"Color")),a=this.getProperAttributeNameValue(t[s],"axis"),this.m_seriesAxis[i]=IsBoolean(this.m_secondaryaxisshow)?a:"left",this.m_seriesAxisDrill[this.m_seriesNames[i]]=IsBoolean(this.m_secondaryaxisshow)?a:"left",this.m_seriesChartTypeDrill[this.m_seriesNames[i]]=this.getProperAttributeNameValue(t[s],"ChartType"),this.m_seriesChartType[i]=this.getProperAttributeNameValue(t[s],"ChartType"),this.m_seriesDataLabelProperty[this.m_seriesNames[i]]=this.getProperAttributeNameValue(t[s],"DataLabelCustomProperties"),a=null==this.getProperAttributeNameValue(t[s],"enableFillArea")?IsBoolean(this.m_fillarea):this.getProperAttributeNameValue(t[s],"enableFillArea"),this.m_seriesFillAreaMap[this.m_seriesNames[i]]=a,this.m_fillAreaColor[this.m_seriesNames[i]]=this.getProperAttributeNameValue(t[s],"FillAreaColor"),"fanchart"===this.m_charttype&&(this.m_seriesChartTypeDrill[this.m_seriesNames[i]]="line",this.m_seriesChartType[i]="line",this.m_fanSeriesType[this.m_seriesNames[i]]=this.getProperAttributeNameValue(t[s],"FanSeriesType")),void 0!==this.m_seriesDataLabelProperty[this.m_seriesNames[i]]?(IsBoolean(this.m_seriesDataLabelProperty[this.m_seriesNames[i]].useFieldColor)&&(this.m_seriesDataLabelProperty[this.m_seriesNames[i]].dataLabelFontColor=this.m_seriesColors[this.m_seriesNames[i]]),void 0!==this.m_seriesDataLabelProperty[this.m_seriesNames[i]].showPercentValue&&IsBoolean(this.m_seriesDataLabelProperty[this.m_seriesNames[i]].showPercentValue)&&"100%"==this.m_columntype&&(this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelField=this.m_seriesNames[i]),IsBoolean(this.m_seriesDataLabelProperty[this.m_seriesNames[i]].dataLabelUseComponentFormater)&&("left"==this.m_seriesAxis[i]?(this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterCurrency=this.m_unit,this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterPrecision=this.m_precision,this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterPosition=this.m_signposition,this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterUnit=this.m_secondaryunit):(this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterCurrency=this.m_secondaryaxisunit,this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterPrecision=this.m_secondaryaxisprecision,this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterPosition=this.m_secondaryaxissignposition,this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterUnit=this.m_secondaryaxissecondaryunit))):this.m_seriesDataLabelProperty[this.m_seriesNames[i]]=this.getDataLabelProperties(),this.m_isfixedradius[this.m_seriesNames[i]]=this.getProperAttributeNameValue(t[s],"isFixedRadius"),void 0===this.m_isfixedradius[this.m_seriesNames[i]]||IsBoolean(this.m_isfixedradius[this.m_seriesNames[i]])?(this.m_isfixedradius[this.m_seriesNames[i]]=void 0===this.m_isfixedradius[this.m_seriesNames[i]]?"true":this.m_isfixedradius[this.m_seriesNames[i]],a=this.getProperAttributeNameValue(t[s],"PlotRadius"),this.m_plotRadiusArray[this.m_seriesNames[i]]=null!=a&&null!==a&&""!==a?a:3):this.m_plotRadiusFieldArray[this.m_seriesNames[i]]=this.getProperAttributeNameValue(t[s],"RadiusField"),a=this.getProperAttributeNameValue(t[s],"LineWidth"),this.m_lineWidthArray[this.m_seriesNames[i]]=null!=a&&null!==a&&""!==a?a:2,a=this.getProperAttributeNameValue(t[s],"LineType"),this.m_lineTypeArray[this.m_seriesNames[i]]=null!=a&&null!==a&&""!==a?a:"simple",a=this.getProperAttributeNameValue(t[s],"PlotTransparency"),this.m_plotTrasparencyArray[this.m_seriesNames[i]]=null!=a&&null!==a&&""!==a?a:1,a=this.getProperAttributeNameValue(t[s],"FillTransparency"),this.m_fillTrasparencyArray[this.m_seriesNames[i]]=null!=a&&null!==a&&""!==a?a:.6,a=this.getProperAttributeNameValue(t[s],"PlotType"),this.m_plotShapeArray[i]=null!=a&&null!==a&&""!==a?a:"point",a=this.getProperAttributeNameValue(t[s],"Opacity"),this.m_seriesOpacity[this.m_seriesNames[i]]=null!=a&&null!==a&&""!==a?a:1,a={seriesName:this.m_seriesNames[i],displayName:this.m_seriesDisplayNames[i],color:this.m_seriesColors[this.m_seriesNames[i]],shape:this.m_plotShapeArray[i],axisType:this.m_seriesAxis[i],index:i},this.legendMap[this.m_seriesNames[i]]=a,i++)}this.setLegendsIntialLoad(this.m_defaultlegendfields)},TimelineChart.prototype.setAnnotation=function(t){var i=this,e=(i.m_annotationNames={text:[],category:[]},i.m_annotationDisplayNames={text:[],category:[]},i.m_allAnnotationNames={text:[],category:[]},i.m_allAnnotationDisplayNames={text:[],category:[]},i.m_annotationVisibleArr={text:{},category:{}},{text:0,category:0});if(IsBoolean(this.m_designMode))for(var s=0,a=t.length;s<a;s++)"text"===i.getProperAttributeNameValue(t[s],"SeriesType")&&(r=i.getProperAttributeNameValue(t[s],"Name"),n=i.formattedDescription(this,i.getProperAttributeNameValue(t[s],"DisplayName")),i.m_allAnnotationNames.text[s]=r,i.m_allAnnotationDisplayNames.text[s]=n,i.m_annotationVisibleArr.text[n]=i.getProperAttributeNameValue(t[s],"visible"),IsBoolean(i.m_annotationVisibleArr.text[n]))&&(i.m_annotationNames.text[e.text]=r,i.m_annotationDisplayNames.text[e.text]=n,e.series++),"category"===i.getProperAttributeNameValue(t[s],"SeriesType")&&(o=i.getProperAttributeNameValue(t[s],"Name"),n=i.formattedDescription(this,i.getProperAttributeNameValue(t[s],"DisplayName")),i.m_allAnnotationNames.category[s]=o,i.m_allAnnotationDisplayNames.category[s]=n,i.m_annotationVisibleArr.category[n]=i.getProperAttributeNameValue(t[s],"visible"),IsBoolean(i.m_annotationVisibleArr.category[n]))&&(i.m_annotationNames.category[e.category]=o,i.m_annotationDisplayNames.category[e.category]=n,e.category++);else{var r,o,n,h=i.chartJson.Chart.Annotation;null!=h&&(r=h.DataLabel,n=h.DataLabel,i.m_allAnnotationNames.text[0]=r,i.m_allAnnotationDisplayNames.text[0]=n,i.m_annotationVisibleArr.text[n]=!0,IsBoolean(i.m_annotationVisibleArr.text[n])&&(i.m_annotationNames.text[e.text]=r,i.m_annotationDisplayNames.text[e.text]=n,e.series++),o=h.DataValue,n=h.DataValue,i.m_allAnnotationNames.category[0]=o,i.m_allAnnotationDisplayNames.category[0]=n,i.m_annotationVisibleArr.category[n]=!0,IsBoolean(i.m_annotationVisibleArr.category[n]))&&(i.m_annotationNames.category[e.category]=o,i.m_annotationDisplayNames.category[e.category]=n,e.category++)}},TimelineChart.prototype.getLegendInfo=function(){return this.legendMap},TimelineChart.prototype.setSeriesColor=function(t){this.m_seriesColor=t},TimelineChart.prototype.setLegendNames=function(t){this.m_legendNames=t},TimelineChart.prototype.setFanChartSeriesJson=function(t){for(var i=[],e=[],s=[],a=[],r=[],o=0;o<t.length;o++)if(t[o].FanSeriesType)switch(t[o].FanSeriesType){case"min":i.push(t[o]);break;case"result":e.push(t[o]);break;case"fan":s.push(t[o]);break;case"max":a.push(t[o]);break;case"none":r.push(t[o])}t.splice(0,t.length),0<i.length&&t.push(i[0]);for(var n=0;n<s.length;n++)t.push(s[n]);0<a.length&&t.push(a[0]),0<e.length&&t.push(e[0]);for(n=0;n<r.length;n++)t.push(r[n]);return t},TimelineChart.prototype.setCategorySeriesData=function(){if(this.m_categoryData=[],this.m_seriesData=[],this.m_seriesDataLabel=[],this.m_seriesDataForToolTip=[],this.m_displaySeriesDataFlag=[],this.m_plotradiusarray={},"timeseries"==this.m_charttype){for(var t=[],i=[],e=0,s=this.getCategoryNames().length;e<s;e++){t[e]={},i[e]=[];for(var a=this.getCategoryNames()[e],r=0,o=0,n=this.getDataProvider().length;r<n;r++)c=(l=this.getDataProvider()[r])[a],t[e][c]||(t[e][c]=[],i[e][o++]=[]),t[e][c].push(l),i[e][o-1].push(l)}this.isEmptyCategory=!0;for(r=0,n=i.length;r<n;r++){this.m_categoryData[r]=[];for(var h=0,m=i[r].length;h<m;h++){var l=i[r][h][0],c=(this.isEmptyCategory=!1,"");null!=l[a=this.getCategoryNames()[r]]&&"undefined"!=l[a]&&(c=l[a],c="timeseries"==this.m_charttype?this.getFormattedDate(c):c),this.m_categoryData[r][h]=c,this.m_displaySeriesDataFlag[h]=[];for(var o=0,_=this.getSeriesNames().length;o<_;o++){this.m_seriesData[o]||(this.m_seriesData[o]=[],this.m_seriesDataLabel[o]=[],this.m_seriesDataForToolTip[o]=[],this.m_plotradiusarray[this.getSeriesNames()[o]]=[]);var c="",d="",g="";null!=l[a=this.getSeriesNames()[o]]&&"undefined"!=l[a]&&(c=l[a]),d=""!==this.m_seriesDataLabelProperty[a].datalabelField?l[this.m_seriesDataLabelProperty[a].datalabelField]:c,IsBoolean(this.m_isfixedradius[a])?this.m_plotradiusarray[this.getSeriesNames()[o]][h]=this.m_plotRadiusArray[this.getSeriesNames()[o]]:(g=l[this.m_plotRadiusFieldArray[a]],isNaN(g)&&(g=getNumericComparableValue(g)),this.m_plotradiusarray[this.getSeriesNames()[o]][h]=g),this.m_displaySeriesDataFlag[h][o]=!0,isNaN(c)&&(this.m_displaySeriesDataFlag[h][o]=!1,c=getNumericComparableValue(c)),this.m_seriesData[o][h]=c,this.m_seriesDataLabel[o][h]=d,this.m_seriesDataForToolTip[o][h]=c}}}}else for(r=0,n=this.getDataProvider().length;r<n;r++){l=this.getDataProvider()[r];if(this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(e=0,_=this.getCategoryNames().length;e<_;e++){this.m_categoryData[e]||(this.m_categoryData[e]=[]);c="",d="";null!=l[a=this.getCategoryNames()[e]]&&"undefined"!=l[a]&&(c=l[a],c="timeseries"==this.m_charttype?this.getFormattedDate(c):c),this.m_categoryData[e][r]=c}}this.m_displaySeriesDataFlag[r]=[];for(o=0,s=this.getSeriesNames().length;o<s;o++){this.m_seriesData[o]||(this.m_seriesData[o]=[],this.m_seriesDataLabel[o]=[],this.m_seriesDataForToolTip[o]=[],this.m_plotradiusarray[this.getSeriesNames()[o]]=[]);c="";null!=l[a=this.getSeriesNames()[o]]&&"undefined"!=l[a]&&(c=l[a]),d=""!==this.m_seriesDataLabelProperty[a].datalabelField?l[this.m_seriesDataLabelProperty[a].datalabelField]:c,IsBoolean(this.m_isfixedradius[a])?this.m_plotradiusarray[this.getSeriesNames()[o]][r]=this.m_plotRadiusArray[this.getSeriesNames()[o]]:(g=l[this.m_plotRadiusFieldArray[a]],isNaN(g)&&(g=getNumericComparableValue(g)),this.m_plotradiusarray[this.getSeriesNames()[o]][r]=g),this.m_displaySeriesDataFlag[r][o]=!0,isNaN(c)&&(this.m_displaySeriesDataFlag[r][o]=!1,c=getNumericComparableValue(c)),this.m_seriesData[o][r]=c,this.m_seriesDataLabel[o][r]=d,this.m_seriesDataForToolTip[o][r]=c}}if(this.CatData=this.m_categoryData,this.SerData=this.m_seriesData,this.SerDataLabel=this.m_seriesDataLabel,this.PlotRadius=this.m_plotradiusarray,IsBoolean(this.m_sorteddate)){var p=this.getDatesSortedArray(this.CatData),u=[],y=[],x=[];this.m_seriesdatamap={};for(var r=0,f=this.CatData[0].length;r<f;r++)u[r]=this.CatData[0][p[r]];this.CatData[0]=u;for(var h=0,b=this.SerData.length;h<b;h++){y[h]=[],x[h]=[];for(var A=0,S=this.SerData[h].length;A<S;A++)y[h][A]=this.SerData[h][p[A]],x[h][A]=this.SerDataLabel[h][p[A]];this.SerData[h]=y[h],this.SerDataLabel[h]=x[h],this.m_seriesdatamap[this.m_seriesNames[h]]=this.SerData[h]}this.m_categoryData=this.CatData,this.m_seriesData=this.SerData,this.m_seriesDataLabel=this.SerDataLabel}if(this.m_annotationData=[],IsBoolean(this.m_designMode)){if(0<this.m_annotationNames.text.length)for(var C=this.m_annotationNames.text,v=this.getDataFromJSON(this.m_annotationNames.text[0]),e=0;e<v.length;e++)this.m_annotationData.push({type:"event",label:v[e],point:0,property:{color:"red",radius:10}});if(0<this.m_annotationNames.category.length){if(this.m_annotationXData=[],null!=this.m_annotationNames.category[0])for(var w=this.getDataFromJSON(this.m_annotationNames.category[0]),e=0;e<w.length;e++)"null"==w[e]&&""==w[e]&&null==w[e]||this.m_annotationXData.push({type:"event",label:this.m_annotationData[e].label,point:w[e],property:{color:"red",radius:10}});if(this.m_annotationXData2=[],null!=this.m_annotationNames.category[1])for(w=this.getDataFromJSON(this.m_annotationNames.category[1]),e=0;e<w.length;e++)"null"==w[e]&&""==w[e]&&null==w[e]||this.m_annotationXData2.push({type:"event",label:this.m_annotationData[e],point:w[e],property:{color:"red",radius:10}})}}else{var N=this.chartJson.Chart.Annotation,N=null!=N?N.DataSourceId:"",D=[];if(""!=N&&(D=sdk.getConnection(N).m_wholeData),0<this.m_annotationNames.text.length){C=this.m_annotationNames.text;if(D&&0<D.length)for(v=D.map(t=>null===t[C]||void 0===t[C]||"null"===t[C]?"No label":t[C]),e=0;e<v.length;e++)this.m_annotationData.push({type:"event",label:v[e],point:C[e],property:{color:"red",radius:10}})}if(0<this.m_annotationNames.category.length){if(this.m_annotationXData=[],null!=this.m_annotationNames.category[0]&&D&&0<D.length&&""!=this.m_annotationNames.category[0])for(w=D.map(t=>t[this.m_annotationNames.category[0]]),e=0;e<w.length;e++)"null"==w[e]&&""==w[e]&&null==w[e]||this.m_annotationXData.push({type:"event",label:this.m_annotationData[e].label,point:w[e],property:{color:"red",radius:10}});if(this.m_annotationXData2=[],null!=this.m_annotationNames.category[1])for(w=D.map(t=>t[this.m_annotationNames.category[1]]),e=0;e<w.length;e++)"null"==w[e]&&""==w[e]&&null==w[e]||this.m_annotationXData2.push({type:"event",label:this.m_annotationData[e],point:w[e],property:{color:"red",radius:10}})}}},TimelineChart.prototype.getDatesSortedArray=function(t){for(var i,e=[],s="",a="",r=[],o=0,n=t[0].length;o<n;o++)""!=t[o]&&e.push(new Date(t[0][o]));for(var h=0,m=(e=e.sort(function(t,i){return i<t?1:t<i?-1:0})).length;h<m;h++)(s=e[h].getMonth()+1)<10&&(s="0"+s),(a=e[h].getDate())<10&&(a="0"+a),i=e[h].getFullYear(),e[h]=s+"/"+a+"/"+i;for(var l=0,n=e.length;l<n;l++)r[l]=t[0].indexOf(e[l]);return r},TimelineChart.prototype.getAllSeriesNames=function(){return this.m_allSeriesNames},TimelineChart.prototype.getAllCategoryNames=function(){return this.m_allCategoryNames},TimelineChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0,i=this.getAllCategoryNames().length;t<i;t++)this.m_allfieldsName.push(this.getAllCategoryNames()[t]);for(var e=0,s=this.getAllSeriesNames().length;e<s;e++)this.m_allfieldsName.push(this.getAllSeriesNames()[e])},TimelineChart.prototype.setVisibleSeriesName=function(){this.m_visibleSeriesName=[];for(var t=0,i=this.getAllSeriesNames().length;t<i;t++)IsBoolean(this.m_seriesVisibleArr[this.m_allSeriesNames[t]])&&this.m_fanChartSeriesVisibleArr[this.m_allSeriesNames[t]]&&this.m_visibleSeriesName.push(this.getAllSeriesNames()[t])},TimelineChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var t=0,i=this.getCategoryDisplayNames().length;t<i;t++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[t]);for(var e=0,s=this.getSeriesDisplayNames().length;e<s;e++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[e])},TimelineChart.prototype.setStackSVGTypeForSeries=function(){this.m_seriesSVGStackTypeArray=[];for(var t=!0,i=this.m_seriesData.length-1;0<=i;i--)"column"==this.m_seriesChartType[i]&&t?t=!(this.m_seriesSVGStackTypeArray[this.m_seriesNames[i]]="path"):this.m_seriesSVGStackTypeArray[this.m_seriesNames[i]]="rect"},TimelineChart.prototype.setColorsForSeries=function(){if(this.m_seriesColorsArray={},this.m_PointsColorsArray={},IsBoolean(this.m_enablecolorfromdrill)&&IsBoolean(this.m_startDrill))for(var t=this.m_seriesData.length,i=0;i<t;i++){this.m_seriesColorsArray[this.m_seriesNames[i]]=[],this.m_PointsColorsArray[this.m_seriesNames[i]]=[];for(var e=this.m_seriesData[i].length,s=0;s<e;s++)this.m_seriesColorsArray[this.m_seriesNames[i]][s]=this.m_drillColor,this.m_PointsColorsArray[this.m_seriesNames[i]][s]=this.m_drillColor}else if(!IsBoolean(this.m_designMode)&&0<this.getCategoryColors().getCategoryColor().length&&""!=this.getConditionalColors().m_ConditionalColor&&null!=this.getConditionalColors().m_ConditionalColor&&0<this.getConditionalColors().m_ConditionalColor.length)for(var a=this.getSeriesColors(),t=this.m_seriesData.length,i=0;i<t;i++)for(var r=this.getCategoryColors().getCategoryColorsForCategoryNames(this.getCategoryData()[0],this.m_categoryFieldColor),e=(this.m_seriesColorsArray[this.m_seriesNames[i]]=[],this.m_PointsColorsArray[this.m_seriesNames[i]]=[],this.m_seriesData[i].length),s=0;s<e;s++)this.m_seriesColorsArray[this.m_seriesNames[i]][s]=a[this.m_seriesNames[i]],this.m_PointsColorsArray[this.m_seriesNames[i]][s]=r[s];else if(!IsBoolean(this.m_designMode)&&""!=this.getCategoryColors()&&0<this.getCategoryColors().getCategoryColor().length&&IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName()))for(a=this.getSeriesColors(),r=this.getCategoryColors().getCategoryColorsForCategoryNames(this.getCategoryData()[0],this.m_categoryFieldColor),t=this.m_seriesData.length,i=0;i<t;i++){this.m_seriesColorsArray[this.m_seriesNames[i]]=[],this.m_PointsColorsArray[this.m_seriesNames[i]]=[];for(e=this.m_seriesData[i].length,s=0;s<e;s++)this.m_seriesColorsArray[this.m_seriesNames[i]][s]=a[this.m_seriesNames[i]],this.m_PointsColorsArray[this.m_seriesNames[i]][s]=r[s]}else if(IsBoolean(this.m_designMode)||""==this.getCategoryColors()||IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName())&&0!=this.getCategoryColors().getCategoryColor().length||""==this.getConditionalColors()||null==this.getConditionalColors()||!(0<this.getConditionalColors().getConditionalColor().length))for(a=this.getSeriesColors(),t=this.m_seriesData.length,i=0;i<t;i++){this.m_seriesColorsArray[this.m_seriesNames[i]]=[],this.m_PointsColorsArray[this.m_seriesNames[i]]=[];for(e=this.m_seriesData[i].length,s=0;s<e;s++)this.m_seriesColorsArray[this.m_seriesNames[i]][s]=a[this.m_seriesNames[i]],this.m_PointsColorsArray[this.m_seriesNames[i]][s]=a[this.m_seriesNames[i]]}else for(var o=this.m_conditionalcolorswithslider,a=this.getSeriesColors(),t=this.m_seriesData.length,i=0;i<t;i++){this.m_seriesColorsArray[this.m_seriesNames[i]]=[],this.m_PointsColorsArray[this.m_seriesNames[i]]=[];for(e=this.m_seriesData[i].length,s=0;s<e;s++)this.m_seriesColorsArray[this.m_seriesNames[i]][s]=a[this.m_seriesNames[i]],this.m_PointsColorsArray[this.m_seriesNames[i]][s]=o[this.m_seriesNames[i]][s]}},TimelineChart.prototype.getDataProvider=function(){return this.m_dataProvider},TimelineChart.prototype.getCategoryNames=function(){return this.m_categoryNames},TimelineChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},TimelineChart.prototype.getSeriesNames=function(){return this.m_seriesNames},TimelineChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},TimelineChart.prototype.getLegendColors=function(){return this.m_LegendColors},TimelineChart.prototype.getCategoryColorsForAction=function(){return this.m_categoryFieldColor},TimelineChart.prototype.getSeriesColorsForAction=function(){return this.m_LegendColors},TimelineChart.prototype.getLegendTableContent=function(){for(var t="",i=0,e=this.getLegendNames().length;i<e;i++){var s=this.legendMap[this.getSeriesNames()[i]].shape,s=this.getHTMLShape(s);t+='<tr style="font-style:'+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'"><td>'+this.drawLegendShape(s,this.getLegendColors()[i])+'<span style="display:inline;">'+this.getLegendNames()[i]+"</span></td></tr>"}return t},TimelineChart.prototype.getSeriesColors=function(){return this.m_seriesColors},TimelineChart.prototype.getLegendNames=function(){return this.m_legendNames},TimelineChart.prototype.getDataFromJSON=function(t){var i=[],e=this.getDataProvider();if(IsBoolean(!this.timeLineSliderFlag))for(var s=this.getDataProvider().length,a=0;a<s;a++)null==e[a][t]?i[a]="":i[a]=e[a][t];else for(var a=this.firstIndex,r=0;a<=this.lastIndex;a++)e[a]&&null!=e[a][t]&&"undefined"!==e[a][t]?i[r]=e[a][t]:i[r]="",r++;return i},TimelineChart.prototype.getSeriesFillAreaMap=function(){return this.m_seriesFillAreaMap},TimelineChart.prototype.getCategoryData=function(){return this.m_categoryData},TimelineChart.prototype.getSeriesData=function(){return this.m_seriesData},TimelineChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},TimelineChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},TimelineChart.prototype.getColorsForSeries=function(){return this.m_seriesColorsArray},TimelineChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},TimelineChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.createSVG(),$("#draggableCanvas"+this.m_objectid).hide(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEventForSVG(this.svgContainerId)},TimelineChart.prototype.createSVG=function(){var t,i=this,e=(this.svgContainerId="svgContainer"+i.m_objectid,$("#"+i.svgContainerId).remove(),document.createElementNS("http://www.w3.org/2000/svg","svg")),s=(e.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.setAttribute("width",this.m_width),"fanchart"===this.m_charttype&&(this.m_showslider=!1,this.m_columntype="stacked"),this.m_sliderheight=this.m_height/4,!IsBoolean(this.getShowLegends())||IsBoolean(this.m_fixedlegend)||"horizontalBottomLeft"!=this.m_legendposition&&"horizontalBottomCenter"!=this.m_legendposition&&"horizontalBottomRight"!=this.m_legendposition?0:40*this.minWHRatio());IsBoolean(this.m_showslider)&&(IsBoolean(this.m_designMode)||IsBoolean(this.m_isDataSetavailable))&&(t=(t=this.m_height/4)<7*this.m_sliderheightratio?t<40?3*this.m_sliderheightratio:6*this.m_sliderheightratio:7*this.m_sliderheightratio,this.sliderMargin=t,!IsBoolean(this.getShowLegends())||IsBoolean(this.m_fixedlegend)||"horizontalBottomLeft"!=this.m_legendposition&&"horizontalBottomCenter"!=this.m_legendposition&&"horizontalBottomRight"!=this.m_legendposition?this.m_sliderheight=t-2:this.m_sliderheight=t),e.setAttribute("height",this.m_height),e.setAttribute("id",this.svgContainerId),e.setAttribute("class","svg_chart_container"),$("#draggableDiv"+i.m_objectid).append(e),IsBoolean(this.m_showslider)&&(IsBoolean(this.m_isDataSetavailable)||IsBoolean(this.m_designMode))?IsBoolean(!this.timeLineSliderFlag)&&($("#svgTimeScaleDiv"+i.m_objectid).remove(),(t=document.createElement("div")).setAttribute("id","svgTimeScaleDiv"+i.m_objectid),t.style.position="absolute",t.style.zIndex=i.m_zIndex+1,t.style.top=this.m_height-this.sliderMargin+"px",$("#draggableDiv"+i.m_objectid).append(t),$("#svgTimeScaleDiv"+i.m_objectid).css("top",this.m_height-this.sliderMargin-s-1+"px"),this.svgTimeScaleId="svgTimeScale"+i.m_objectid,$("#"+i.svgTimeScaleId).remove(),(e=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("xlink","http://www.w3.org/1999/xlink"),e.setAttribute("width",this.m_width),e.setAttribute("height",this.m_sliderheight),this.m_sliderheightratio<=2&&e.setAttribute("display","none"),e.setAttribute("id",this.svgTimeScaleId),e.setAttribute("class","svg_chart_container"),$("#svgTimeScaleDiv"+i.m_objectid).append(e)):($("#svgTimeScaleDiv"+i.m_objectid).remove(),$("#rangeSelector"+i.m_objectid).remove())},TimelineChart.prototype.init=function(){this.createSVG(),IsBoolean(!this.timeLineSliderFlag)&&(this.updateflag=!1,this.setCategorySeriesData(),(this.firstIndex=0)<this.m_categoryData.length)&&(this.lastIndex=this.m_categoryData[0].length-1,this.m_conditionalcolorswithoutslider=this.getConditionalColors().getConditionalColorsForConditionsForMixedTime(this.getSeriesNames(),this.getSeriesColors(),this.m_seriesData,this),this.m_conditionalcolorswithslider=this.m_conditionalcolorswithoutslider),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.setVisibleSeriesName(),this.setColorsForSeries(),this.isSeriesDataEmpty(),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),IsBoolean(this.m_isEmptySeries)||!IsBoolean(this.isVisibleSeries())||IsBoolean(this.isEmptyCategory)||(this.registerDataInMap(),this.registerDateInMapForSeriesIndex(),this.updateDataforHundred(this.seriesDataMap),this.calculateMinMax(),this.initializeCalculationClass(),this.initializeYAxis(),this.instanciateSeries(this.seriesDataMap)),this.initializeToolTipProperty(),this.m_tooltip.init(this)},TimelineChart.prototype.registerDataInMap=function(){this.seriesDataMap={},this.seriesDataLabelMap={};for(var t={left:{column:{},line:{}},right:{column:{},line:{}}},i=(this.seriesDataMap=$.extend(!0,{},t),this.seriesDataLabelMap=$.extend(!0,{},t),this.m_seriesNames.length),e=0;e<i;e++)this.m_seriesVisibleArr[this.m_seriesNames[e]]&&(this.seriesDataMap[this.m_seriesAxis[e]][this.m_seriesChartType[e]][this.m_seriesNames[e]]=this.m_seriesData[e],this.seriesDataLabelMap[this.m_seriesAxis[e]][this.m_seriesChartType[e]][this.m_seriesNames[e]]=this.m_seriesDataLabel[e])},TimelineChart.prototype.registerDateInMapForSeriesIndex=function(){this.seriesDataMapForIndex={},this.seriesIndexMap={};for(var t=0,i=(this.seriesDataMapForIndex={line:{left:{},right:{}},column:{left:{},right:{}}},this.seriesIndexMap={left:{column:{},line:{}},right:{column:{},line:{}}},this.m_seriesNames.length),e=0;e<i;e++)this.m_seriesVisibleArr[this.m_seriesNames[e]]&&(this.seriesDataMapForIndex[this.m_seriesChartType[e]][this.m_seriesAxis[e]][this.m_seriesNames[e]]=this.m_seriesData[e],this.seriesIndexMap[this.m_seriesAxis[e]][this.m_seriesChartType[e]][this.m_seriesNames[e]]={seriesIndex:t++})},TimelineChart.prototype.updateDataforHundred=function(t){this.changedDataMap=getDuplicateObject(t),this.m_actualseriesdatamap=getDuplicateObject(t),"100%"==this.m_columntype&&(this.changedDataMap.left.column=$.isEmptyObject(this.changedDataMap.left.column)?this.changedDataMap.left.column:this.getUpdatedData(this.changedDataMap.left.column),this.changedDataMap.right.column=$.isEmptyObject(this.changedDataMap.right.column)?this.changedDataMap.right.column:this.getUpdatedData(this.changedDataMap.right.column))},TimelineChart.prototype.getUpdatedData=function(t){var i,e=[],s=[];for(i in t)"unique"!=i&&"contains"!=i&&(e.push(i),s.push(t[i]));for(var a=this.getUpdateSeriesDataWithCategory(s),r=this.arrengeDataforHundred(a,s),o=[],n=0;n<e.length;n++)o[e[n]]=r[n];return o},TimelineChart.prototype.arrengeDataforHundred=function(t,i){for(var e=t,s=(this.m_SeriesDataInPerForHundredChart,[]),a=0,r=e.length;a<r;a++){var o=this.getArraySUM(e[a]);s[a]=[];for(var n=0,h=e[a].length;n<h;n++)""===e[a][n]||isNaN(e[a][n])?s[a][n]=0:s[a][n]=e[a][n]/o*100}if(0<s.length)return this.m_SeriesDataInPerForHundredChart=this.getUpdateSeriesDataForHundredPercentageChart(s,i),this.m_SeriesDataInPerForHundredChart},TimelineChart.prototype.getArraySUM=function(t){for(var i=0,e=0,s=t.length;e<s;e++)t[e]<0&&(t[e]=-1*t[e]),isNaN(t[e])||(i=+i+ +t[e]);return i},TimelineChart.prototype.getUpdateSeriesDataWithCategory=function(t){for(var i=[],e=0,s=t[0].length;e<s;e++){i[e]=[];for(var a=0,r=t.length;a<r;a++)i[e][a]=t[a][e]}return i},TimelineChart.prototype.getUpdateSeriesDataForHundredPercentageChart=function(t,i){for(var e=[],s=0,a=t[0].length;s<a;s++){e[s]=[];for(var r=0,o=t.length;r<o;r++)e[s][r]=t[r][s]}for(s=0,a=i.length;s<a;s++)for(r=0,o=i[s].length;r<o;r++)isNaN(i[s][r])||+i[s][r]<0&&(e[s][r]=-1*e[s][r]);return e},TimelineChart.prototype.calculateMinMax=function(){var t=IsBoolean(this.m_isRepeaterPart)&&IsBoolean(this.m_parentObj.m_repeatercommonmarker)?this.getAllSeriesDataForRepeater():this.seriesDataMap,i=this.getAxisData(t.left),t=this.getAxisData(t.right);this.leftAxisInfo=this.getAxisInfo("left",i),this.rightAxisInfo=this.getAxisInfo("right",t),this.manageLeftRightMarker(this.leftAxisInfo,this.rightAxisInfo)},TimelineChart.prototype.calculateAxisMinMax=function(){IsBoolean(this.scaleFlag)&&this.manageLeftRightMarker(this.leftAxisInfo,this.rightAxisInfo)},TimelineChart.prototype.manageLeftRightMarker=function(t,i){if(1<t.markerarray.length&&1<i.markerarray.length&&t.markerarray.length!==i.markerarray.length&&IsBoolean(this.m_showmarkerline))if(t.markerarray.length>i.markerarray.length){var e=t.markerarray.length,s=(r=void 0!==(r=(i.max-i.min)/(e-1)+"").split(".")[1]&&3<r.split(".")[1].length?(+r).toFixed(1):+r,i.markerarray=[],i.min);o=void 0!==(o=(r+"").split("."))[1]?o[1].length:0;for(var a=0;a<e;a++)i.markerarray.push(s),s=(s=+s+ +r)&&-1<s.toString().indexOf("e")?(+(n=s.toString().split("e"))[0]).toFixed(o)+"e"+n[1]:(+s).toFixed(o);this.rightAxisInfo=i}else{var r,o,e=i.markerarray.length,s=(r=void 0!==(r=(t.max-t.min)/(e-1)+"").split(".")[1]&&3<r.split(".")[1].length?(+r).toFixed(1):+r,t.markerarray=[],t.min);o=void 0!==(o=(r+"").split("."))[1]?o[1].length:0;for(var n,a=0;a<e;a++)t.markerarray.push(s),s=(s=+s+ +r)&&-1<s.toString().indexOf("e")?(+(n=s.toString().split("e"))[0]).toFixed(o)+"e"+n[1]:(+s).toFixed(o);this.leftAxisInfo=t}},TimelineChart.prototype.getAxisData=function(t){var i,e=[],s=[],a=[],r={line:[],stacked:[]};for(i in t)for(var o in t[i])"unique"!=o&&"contains"!=o&&(a.push(t[i][o]),"line"==i&&("fanchart"===this.m_charttype?"fan"==this.m_fanSeriesType[o]||"min"==this.m_fanSeriesType[o]?r.stacked:r.line:e).push(t[i][o]),"column"==i)&&s.push(t[i][o]);return{all:a,line:"fanchart"===this.m_charttype?r:e,column:s}},TimelineChart.prototype.getAxisInfo=function(t,i){var e,s,a,r,o,n,h;return 0<i.all.length?(e=IsBoolean(this.m_showslider)?this.m_height-this.m_sliderheight:this.m_height,s="left"==t?this.m_basezero:this.m_secondaxisbasezero,a="left"==t?this.m_autoaxissetup:this.m_secondaxisautosetup,r="left"==t?this.m_minimumaxisvalue:this.m_secondaxisminimumvalue,o="left"==t?this.m_maximumaxisvalue:this.m_secondaxismaximumvalue,n=(h="fanchart"===this.m_charttype&&0<i.line.stacked.length?(n=this.calculateStackMinMaxValue(i.line.stacked),{min:(""!==(h=0<i.line.line.length?this.calculateMinMaxValue(i.line.line):{min:"",max:""}).min&&h.min<n.min?h:n).min,max:(""!==h.max&&h.max>n.max?h:n).max}):("stacked"==this.m_columntype||"100%"==this.m_columntype)&&0<i.column.length?(h=0<i.line.length?this.calculateMinMaxValue(i.line):{min:"",max:""},n="stacked"==this.m_columntype&&1===i.column.length?this.calculateMinMaxValue(i.column):this.calculateStackMinMaxValue(i.column),{min:(""!==h.min&&h.min<n.min?h:n).min,max:(""!==h.max&&h.max>n.max?h:n).max}):this.calculateMinMaxValue(i.all)).min,i=h.max,{max:(h=this.getCalculateNiceScale(n,i,s,a,r,o,e,t)).max,min:h.min,noofmarker:h.markerArray.length,markertext:h.step,markerarray:h.markerArray}):{max:"",min:"",noofmarker:"",markertext:"",markerarray:""}},TimelineChart.prototype.getAllSeriesDataForRepeater=function(){for(var t={left:{column:{},line:{}},right:{column:{},line:{}}},i=this.m_parentObj.m_seriesNames.length,e=0;e<i;e++)if(this.m_parentObj.m_seriesVisibleArr[this.m_parentObj.m_seriesNames[e]]){for(var s=[],a=0;a<this.m_parentObj.m_dataProvider.length;a++)s[a]=removeCommaFromSrting(this.m_parentObj.m_dataProvider[a][this.m_parentObj.m_seriesNames[e]]);t[this.m_parentObj.m_seriesAxis[e]][this.m_parentObj.m_seriesChartType[e]][this.m_parentObj.m_seriesNames[e]]=s}return t},TimelineChart.prototype.getSeriesInfo=function(t){var i,e=this.seriesDataMap;for(i in e)for(var s in e[i])for(var a in e[i][s])if(t==a)return{axis:i,chart:s,data:e[i][s][a]}},TimelineChart.prototype.calculateStackMinMaxValue=function(t){var i=isNaN(+t[0][0])?0:+t[0][0],e=isNaN(+t[0][0])?0:+t[0][0],s=t[0].length;if("stacked"==this.m_columntype)for(var a=0,r=0;a<s;a++){for(var o=0,n=0,h=t.length,m=0;m<h;m++)r++,+t[m][a],isNaN(+t[m][a])||(0<+t[m][a]?o=+o+ +t[m][a]:n=+t[m][a]+ +n);i<=o&&(i=+o),+n<e&&(e=+n)}if("100%"==this.m_columntype){for(var l=!1,a=0,c=t.length;a<c;a++)for(var m=0,_=t[a].length;m<_;m++)if(t[a][m]<0){l=!0;break}i=100,e=IsBoolean(l)?-100:0}return{min:e,max:i}},TimelineChart.prototype.instanciateSeries=function(t){var i,e,s={},a=(this.m_columnSeries={},this.m_lineSeries={},[]);for(i in t)for(var r in t[i])for(var o in t[i][r])t[i][r].hasOwnProperty(o)&&"unique"!=o&&"contains"!=o&&("column"==r?(this.m_columnSeries[o]=new TimeLineColumns,this.m_columnSeries[o].init(this.m_PointsColorsArray[o],this.m_lineCalculation.getXPositionArray(o),this.m_lineCalculation.getYPositionArray(o),this.m_lineCalculation.getHeightArray(o),this.m_lineCalculation.columnWidthMap[o]/this.m_lineCalculation.totalColumn,this,this.m_plotTrasparencyArray[o],this.m_lineCalculation.seriesDataMap[i][r][o],this.m_showdatalabel,this.m_seriesOpacity[o])):(this.m_lineSeries[o]=new SVGLineSeries,this.m_lineSeries[o].init(this.getColorsForSeries()[o],this.m_lineCalculation.getXPositionArray(o),this.m_lineCalculation.getYPositionArray(o),this.m_linewidth,this,1,o,this.m_lineWidthArray[o],this.m_lineTypeArray[o],this.m_fillTrasparencyArray[o]),!this.getShowPoint()&&1!=this.m_lineCalculation.xAxisData.length||(this.m_pointSeries[o]=new SVGPointSeries,this.m_pointSeries[o].init(this.m_PointsColorsArray[o],this.getPlotRadiusArray(o),this.m_lineCalculation.getXPositionArray(o),this.m_lineCalculation.getYPositionArray(o),this,this.m_plotTrasparencyArray[o]))),IsBoolean(this.m_seriesDataLabelProperty[o].showDataLabel))&&(s=("100%"==this.m_columntype?(void 0!==this.m_seriesDataLabelProperty[o].showPercentValue&&IsBoolean(this.m_seriesDataLabelProperty[o].showPercentValue)&&(this.seriesDataLabelMap[i][r][o]=this.m_lineCalculation.seriesDataMap[i][r][o]),this.m_actualseriesdatamap):this.m_lineCalculation.seriesDataMap)[i][r][o],a=("left"===i?this.m_lineCalculation.leftAxisInfo:this.m_lineCalculation.rightAxisInfo).markerarray,e=Math.max.apply(null,a),this.m_valueTextSeries[o]=new SVGValueTextSeries,this.m_valueTextSeries[o].init(this.m_lineCalculation.getXPositionArray(o),this.m_lineCalculation.getYPositionArray(o),this,this.seriesDataLabelMap[i][r][o],this.m_seriesDataLabelProperty[o],s,this.m_lineCalculation.columnWidthMap[o]/this.m_lineCalculation.totalColumn,this.m_lineCalculation.getHeightArray(o),r,e))},TimelineChart.prototype.getPlotRadiusArray=function(t){if(IsBoolean(this.m_isfixedradius[t]))return this.m_plotradiusarray[t];for(var i="",e="",s=this.m_plotradiusarray[t],a=0;a<s.length;a++)s[a]=getNumericComparableValue(s[a]);this.radius=[];var r=this.getMaxFromArray(s),o=this.getMinFromArray(s);if(this.m_plotradiusarray[t]!=parseInt(this.m_plotradiusarray[t],10))for(a=0;a<s.length;a++)0<=o&&""!==s[a]&&void 0!==s[a]&&null!==s[a]&&"Nil"!==s[a]&&"null"!==s[a]?(i=r/s[a],e=(this.m_maxradius-this.m_minradius)/i,this.radius[a]=+this.m_minradius+ +e,i=r/s[a],e=(this.m_maxradius-this.m_minradius)/i,this.radius[a]=+this.m_minradius+ +e,+this.radius[a]>+this.m_maxradius&&(this.radius[a]=this.m_maxradius)):o<0&&""!==s[a]&&void 0!==s[a]&&null!==s[a]&&"Nil"!==s[a]&&"null"!==s[a]?(e=(i=(this.m_maxradius-this.m_minradius)/(+r-+o))==1/0?this.m_maxradius:this.m_minradius+(+s[a]-+o)*i,this.radius[a]=+this.m_minradius+ +e,+this.radius[a]>+this.m_maxradius&&(this.radius[a]=this.m_maxradius)):this.radius[a]=0;else for(a=0;a<s.length;a++)this.radius[a]=+s[a]>+this.m_maxradius?this.m_maxradius:s[a];return this.m_plotradiusarray[t]=this.radius,this.radius},TimelineChart.prototype.getMaxFromArray=function(t){for(var i=0,e=0,s=t.length;e<s;e++)""!==t[e]&&void 0!==t[e]&&null!==t[e]&&"Nil"!==t[e]&&"null"!==t[e]&&+i<=+t[e]&&(i=+t[e]);return i},TimelineChart.prototype.getMinFromArray=function(t){var e=0;for(i=0,length=t.length;i<length;i++)""!==t[i]&&void 0!==t[i]&&null!==t[i]&&"Nil"!==t[i]&&"null"!==t[i]&&+e>=+t[i]&&(e=+t[i]);return e},TimelineChart.prototype.initializeCalculationClass=function(){this.m_lineCalculation=new TimeLineCalculation,IsBoolean(!this.timeLineSliderFlag)&&(this.setChartDrawingArea(),IsBoolean(this.m_xAxis.m_xaxistextwrap))&&!IsBoolean(this.scaleFlag)&&this.setTextWrapHeight(),this.m_lineCalculation.init(this,this.m_seriesData,0,this.m_categoryData,this.changedDataMap),this.setThresholdFillColors()},TimelineChart.prototype.setTextWrapHeight=function(){for(var t=this.m_categoryData[0],i=1,e=("auto"!=this.m_xAxis.m_xaxismarkers||IsBoolean(this.m_fixedrange)&&!IsBoolean(this.m_designMode)||10<t.length&&(i=Math.ceil(t.length/10)),[]),s=t.length,a=0;a<s;)e.push(t[a]),a=+a+i;this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();for(var r=this.ctx.measureText(e[0]).width,o=e.length,n=0;n<o;n++)this.ctx.measureText(e[n]).width>r&&(r=this.ctx.measureText(e[n]).width);var h=(this.m_endX-this.m_startX)/e.length,m=0;if(h<r){for(var l=0;l<this.m_xaxislabellines;l++)h*l<r&&(m+=1.5*this.fontScaling(this.m_xAxis.m_labelfontsize));this.m_startY=this.m_startY-(m-this.getXAxisLabelMargin())}},TimelineChart.prototype.setMinMaxSliderIndex=function(){this.minSliderIndex=this.m_lineCalculation.minSliderIndex,this.maxSliderIndex=this.m_lineCalculation.maxSliderIndex},TimelineChart.prototype.getMinSliderIndex=function(){return this.minSliderIndex},TimelineChart.prototype.getMaxSliderIndex=function(){return this.maxSliderIndex},TimelineChart.prototype.initializeYAxis=function(){this.m_yAxis.init(this,this.m_lineCalculation),this.m_xAxis.init(this,this.m_lineCalculation)},TimelineChart.prototype.drawObject=function(){this.drawSVGObject(),IsBoolean(!this.timeLineSliderFlag)&&this.getBGGradientColorToScale()},TimelineChart.prototype.draw=function(){this.timeLineSliderFlag=!1,Chart.prototype.draw.call(this)},TimelineChart.prototype.drawChart=function(){this.drawChartFrame(),IsBoolean(!this.timeLineSliderFlag)&&(this.getBGGradientColorToScale(),this.drawLegends());var t,i,e,s=this,a=(this.drawTitle(),this.drawSubTitle(),this.IsDrawingPossible());if(IsBoolean(a.permission)){if("Invalid Date"==new Date(this.CatData[0][0])&&"timeseries"==this.m_charttype)return void this.drawSVGMessage("Please Change Date Format ..");this.drawYAxis(),this.drawXAxis(),this.drawTimeSeries(),IsBoolean(this.m_showannotation)&&(0<this.m_annotationXData.length||0<this.m_annotationxdata.length?(0<this.m_annotationxdata.length&&(this.m_annotationXData=this.m_annotationxdata),this.drawAnnotationChart()):this.drawSVGMessage(this.m_status.noAnnotationValue)),this.drawDataLabel(),this.drawThreshold(),this.initMouseClickEventForSVG(this.svgContainerId),IsBoolean(!this.timeLineSliderFlag)&&IsBoolean(this.m_showslider)&&"fanchart"!==this.m_charttype&&(IsBoolean(this.m_sliderrangeflag)&&(t=this.m_dataProvider.length,e=this.m_sliderrangevalue,this.m_sliderrange=e<=t?100*e/t:100),this.setMinMaxSliderIndex(),this.drawslider(),this.drawRangeSelector(),this.scaleFlag=!0,e=getDuplicateObject(this),this.initScaleChart(e),this.drawScaleChart(e,this.svgTimeScaleId),this.scaleFlag=!1,this.m_designMode||"timeseries"!=this.m_charttype&&IsBoolean(this.m_fixedrange)||(this.timeLineSliderFlag=!0,t=this.getEndX()-this.getStartX(),e=null!=s.m_sliderwidthperc?s.m_sliderwidthperc*t:"auto"==this.m_sliderrange?3*t/10:+this.m_sliderrange*t/100,IsBoolean(!s.m_slideronmaxmize)||null==this.m_sliderleftperc?"left"==this.m_sliderposition?this.updatechart(this.getStartX(),+this.getStartX()+e):"right"!=this.m_sliderposition&&IsBoolean(this.m_isCurrentDate)&&this.currentDateIndex<this.lastIndex?(i=0==this.currentDateIndex?this.tempLeft:+this.getStartX()+this.tempLeft-.01,this.updatechart(i,i+e)):this.updatechart(+this.getStartX()+(t-e),+this.getEndX()):(i=+this.getStartX()+s.m_sliderleftperc*t,this.updatechart(i,i+e)))),IsBoolean(this.m_showslider)&&!IsBoolean(this.m_designMode)&&IsBoolean(!this.timeLineSliderFlag)&&IsBoolean(this.m_fixedrange)&&"timeseries"!=this.m_charttype&&(this.timeLineSliderFlag=!0,i=(t=this.getPosibleRange(this.m_categoryData[0])).minindex,e=t.maxindex,this.updateFixedRange(i,e),this.hideHandler())}else this.drawSVGMessage(a.message);(IsBoolean(this.m_fixedlegend)||"horizontalBottomLeft"!==this.m_legendposition&&"horizontalBottomCenter"!==this.m_legendposition&&"horizontalBottomRight"!==this.m_legendposition)&&($("#legendIcon"+s.m_objectid).css("z-index",""+(+s.m_zIndex+2)),$("#legendContent"+s.m_objectid).css("z-index",""+(+s.m_zIndex+2)))},TimelineChart.prototype.drawChartLegends=function(){IsBoolean(this.getShowLegends())?IsBoolean(this.m_fixedlegend)?(this.drawLegendIcon(),IsBoolean(this.m_designMode)?$("#legendContent"+this.m_objectid).remove():this.drawLegendContentDiv()):($("#legendIcon"+this.m_objectid).remove(),this.drawFloatedLegends()):($("#legendIcon"+this.m_objectid).remove(),$("#legendContent"+this.m_objectid).remove())},TimelineChart.prototype.drawFloatedLegends=function(){"horizontalTopLeft"==this.m_legendposition||"horizontalTopCenter"==this.m_legendposition||"horizontalTopRight"==this.m_legendposition||"horizontalBottomLeft"==this.m_legendposition||"horizontalBottomCenter"==this.m_legendposition||"horizontalBottomRight"==this.m_legendposition?this.drawHorizontalFloatedLegends():this.drawVerticalFloatedLegends()},TimelineChart.prototype.drawBackgroundForLegend=function(){var t=this;if(IsBoolean(this.getShowLegends())&&!IsBoolean(this.m_fixedlegend)&&("horizontalBottomLeft"==this.m_legendposition||"horizontalBottomCenter"==this.m_legendposition||"horizontalBottomRight"==this.m_legendposition)){for(var i=!IsBoolean(this.getShowLegends())||IsBoolean(this.m_fixedlegend)||"horizontalBottomLeft"!=this.m_legendposition&&"horizontalBottomCenter"!=this.m_legendposition&&"horizontalBottomRight"!=this.m_legendposition?0:40*this.minWHRatio(),e=($("#svgBottomLegendsDiv"+t.m_objectid).remove(),document.createElement("div")),e=(e.setAttribute("id","svgBottomLegendsDiv"+t.m_objectid),e.style.zIndex="inherit",e.style.position="absolute",e.style.opacity="0",e.style.top=this.m_height-i-(IsBoolean(this.m_showslider)&&(IsBoolean(this.m_isDataSetavailable)||IsBoolean(this.m_designMode))?this.sliderMargin:0)+"px",$("#draggableDiv"+t.m_objectid).append(e),$("#svgBottomLegendsDiv"+t.m_objectid).css("top",this.m_height-i-2+"px"),this.svgBottomLegendsId="svgBottomLegends"+t.m_objectid,$("#"+t.svgBottomLegendsDivId).remove(),document.createElementNS("http://www.w3.org/2000/svg","svg")),s=(e.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.setAttribute("width",this.m_width),e.setAttribute("height",i),e.setAttribute("id",this.svgBottomLegendsId),$("#svgBottomLegendsDiv"+t.m_objectid).append(e),document.createElementNS(NS,"linearGradient")),a=(s.setAttribute("id","gradient"+t.m_objectid),s.setAttribute("gradientTransform","rotate("+this.m_bggradientrotation+")"),$("#"+t.svgBottomLegendsId).append(s),this.getBgGradients().split(",")),r=100/(a.length-1!=0?a.length-1:1),o=0,n=a.length;o<=n-1;o++){var h=document.createElementNS(NS,"stop");h.setAttribute("offset",o*r+"%"),h.setAttribute("stop-color",hex2rgb(convertColorToHex(a[o]),this.m_bgalpha)),h.setAttribute("stop-opacity",this.m_bgalpha),$(s).append(h)}e=drawSVGRect(0,0,this.m_width,i,"");$(e).attr("fill","url(#gradient"+t.m_objectid+")"),$("#"+t.svgBottomLegendsId).append(e)}},TimelineChart.prototype.drawHorizontalFloatedLegends=function(){function t(t){t.css("visibility","visible")}for(var i=this,e=this.getMarginForLegend(),s=this.m_topFloatingLegendMargin*this.minWHRatio(),a=("horizontalBottomLeft"!=this.m_legendposition&&"horizontalBottomCenter"!=this.m_legendposition&&"horizontalBottomRight"!=this.m_legendposition||(this.drawBackgroundForLegend(),e=+this.m_height-40*this.minWHRatio(),s=this.m_bottomFloatingLegendMargin*this.minWHRatio()),$("#legendContent"+i.m_objectid).remove(),document.createElement("div")),s=(a.setAttribute("id","legendContent"+i.m_objectid),a.style.position="relative",a.style.height=s+"px",a.style.zIndex="inherit",a.style.margin="0 auto",a.style.background=hex2rgb(this.m_legendbackgroundcolor,this.m_legendbackgroundtransparency),a.style.float="left",a.style.left="12px",a.style.visible="hidden",a.style.top=+e+"px",$(a).prepend('<div id="left-button'+i.m_objectid+'" class = "controlBtn left-button" style="visibility: hidden;height: inherit;"><a href="#" style="text-decoration : none;color: #808080"><</a></div>'),document.createElement("div")),e=(s.setAttribute("class","topfloatinglegend"),s.setAttribute("id","outerDiv"+i.m_objectid),$(s).css("overflow-x","auto"),s.style.width=this.m_width-12-62+"px",s.style.height="inherit",document.createElement("div")),r=(e.style.height="inherit",e.style.fontSize=this.fontScaling(this.m_legendfontsize)+"px","horizontalTopLeft"==this.m_legendposition||"horizontalBottomLeft"==this.m_legendposition?e.style.textAlign="left":"horizontalTopCenter"==this.m_legendposition||"horizontalBottomCenter"==this.m_legendposition?e.style.textAlign="center":e.style.textAlign="right",this.getFloatingLegendTableContent()),r=($(e).append(r),$(s).append(e),$(a).append(s),$(a).append('<div id="right-button'+i.m_objectid+'" class = "controlBtn right-button" style="visibility: hidden;height: inherit;"><a href="#" style="text-decoration : none;color: #808080;">></a></div>'),this.m_draggableDiv.appendChild(a),$(s).outerWidth(!0)),o=$(e).children(),n=0,h=0;h<o.length;h++)n+=$(o[h]).outerWidth(!0);r<=n&&(t($("#right-button"+i.m_objectid)),t($("#left-button"+i.m_objectid))),IsBoolean(isScaling)&&($(a).find(".controlBtn").css({"padding-top":5*this.minWHRatio()+"px"}),$(s).css({"padding-top":2*this.minWHRatio()+"px"}),$(s).find("label").css({"padding-top":5*this.minWHRatio()+"px ","margin-bottom":5*this.minWHRatio()+"px",height:"inherit"}),$(s).find("span").each(function(){""!=this.className&&$(this).css("font-size",i.fontScaling(10)+"px")})),$("#left-button"+i.m_objectid).click(function(){var t=$("#outerDiv"+i.m_objectid).scrollLeft();$("#outerDiv"+i.m_objectid).animate({scrollLeft:t-100},800,function(){$("#outerDiv"+i.m_objectid).scrollLeft()})}),$("#right-button"+i.m_objectid).click(function(){var t=$("#outerDiv"+i.m_objectid).scrollLeft();$("#outerDiv"+i.m_objectid).animate({scrollLeft:t+100},800)})},TimelineChart.prototype.drawVerticalFloatedLegends=function(){var i=this,t="verticalLeftTop"==this.m_legendposition||"verticalLeftMiddle"==this.m_legendposition||"verticalLeftBottom"==this.m_legendposition?0:this.m_width-this.m_rightFloatingLegendMargin*this.minWHRatio(),e="verticalLeftTop"==this.m_legendposition||"verticalRightTop"==this.m_legendposition?this.m_endY:"verticalLeftMiddle"==this.m_legendposition||"verticalRightMiddle"==this.m_legendposition?.5*this.m_height:.7*this.m_height;$("#legendContent"+i.m_objectid).remove();function s(t){t.css("visibility","visible")}for(var a=document.createElement("div"),t=(a.setAttribute("id","legendContent"+i.m_objectid),a.style.position="absolute",a.style.zIndex="inherit",a.style.background=hex2rgb(this.m_legendbackgroundcolor,this.m_legendbackgroundtransparency),a.style.visible="hidden",a.style.top=+e+"px",a.style.left=t+"px",$(a).prepend('<div id="top-button'+i.m_objectid+'" class = "top-button controlBtn" style="visibility: hidden;"><a href="#" style="text-decoration : none;color: #808080;"><</a></div>'),document.createElement("div")),r=(t.setAttribute("class","middlefloatinglegend"),t.setAttribute("id","outerDiv"+i.m_objectid),"verticalLeftTop"==this.m_legendposition||"verticalLeftMiddle"==this.m_legendposition||"verticalLeftBottom"==this.m_legendposition?this.m_leftFloatingLegendMargin:this.m_rightFloatingLegendMargin),e=(t.style.height=+this.m_height-e-50+"px",t.style.width=r*this.minWHRatio()+"px",document.createElement("div")),r=this.getFloatingLegendTableContent(),r=($(e).append(r),$(t).append(e),$(a).append(t),$(a).append('<div id="bottom-button'+i.m_objectid+'" class = "bottom-button controlBtn" style="visibility: hidden;"><a href="#" style="text-decoration : none; color: #808080;">></a></div>'),this.m_draggableDiv.appendChild(a),$(t).outerHeight(!0)),o=$(e).children(),n=0,h=0;h<o.length;h++)n+=$(o[h]).outerHeight(!0);r<=n&&(s($("#bottom-button"+i.m_objectid)),s($("#top-button"+i.m_objectid))),IsBoolean(isScaling)&&($(a).find(".controlBtn").css({"margin-left":30*this.minWHRatio()+"px"}),$(t).find("span").each(function(){""!=this.className&&$(this).css("font-size",i.fontScaling(10)+"px")})),$("#top-button"+i.m_objectid).click(function(){var t=$("#outerDiv"+i.m_objectid).scrollTop();$("#outerDiv"+i.m_objectid).animate({scrollTop:t-70},800,function(){$("#outerDiv"+i.m_objectid).scrollTop()})}),$("#bottom-button"+i.m_objectid).click(function(){var t=$("#outerDiv"+i.m_objectid).scrollTop();$("#outerDiv"+i.m_objectid).animate({scrollTop:t+30},800)})},TimelineChart.prototype.getFloatingLegendTableContent=function(){for(var t="",i=0,e=this.getLegendNames().length;i<e;i++){var s=this.legendMap[this.getSeriesNames()[i]].shape,s=this.getHTMLShape(s),a=this.fontScaling(this.m_legendfontsize);"horizontalTopLeft"==this.m_legendposition||"horizontalTopCenter"==this.m_legendposition||"horizontalTopRight"==this.m_legendposition||"horizontalBottomLeft"==this.m_legendposition||"horizontalBottomCenter"==this.m_legendposition||"horizontalBottomRight"==this.m_legendposition?t+='<label style="font-size:'+a+"px;font-style:"+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'">'+this.drawLegendShape(s,this.getLegendColors()[i])+'<span style="font-size:'+a+'px;display:inline;">'+this.getLegendNames()[i]+"</span></label>":t+='<label style="font-size:'+a+"px; font-style:"+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'">'+this.drawLegendShape(s,this.getLegendColors()[i])+'<span style="font-size:'+a+'px;display:inline;">'+this.getLegendNames()[i]+"</span></label></br>"}return t},TimelineChart.prototype.getMarginForLegend=function(){var t=IsBoolean(this.m_updateddesign)?10:15,i=0,i=IsBoolean(this.getShowGradient())||IsBoolean(this.m_showmaximizebutton)||IsBoolean(this.getTitle().m_showtitle)||IsBoolean(this.m_showsettingmenubutton)?+this.getMarginForTitle()-t:0;return IsBoolean(this.m_subTitle.m_showsubtitle)&&(i+=this.getMarginForSubTitle()),i},TimelineChart.prototype.updateFixedRange=function(t,i){var t=this.m_lineCalculation.onePartWidth*t,i=this.m_lineCalculation.onePartWidth*i,e=Math.abs(i-t),s=document.getElementById("silderSelecterdiv"+this.m_objectid);""!=(s||"")&&(s.style.left=t+"px",s.style.width=e+"px"),this.updatechart(t,i+ +this.m_startX)},TimelineChart.prototype.hideHandler=function(){$("#silderSelecterdiv"+this.m_objectid).resizable({disabled:!0})},TimelineChart.prototype.getPosibleRange=function(t){this.ctx.font=this.m_xAxis.getLabelFontProperties();for(var i=this.ctx.measureText(t[0]).width,e=t.length,s=0;s<e;s++)this.ctx.measureText(t[0]).width>i&&(i=this.ctx.measureText(t[0]).width);var i=100<i?100:i,a=parseInt((this.getEndX()-this.getStartX())/(+i+6));return{minindex:0,maxindex:a>=t.length?t.length:a}},TimelineChart.prototype.drawTitle=function(){this.m_title.draw()},TimelineChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},TimelineChart.prototype.drawXAxis=function(){this.createVerticalLineGroup("verticallinegrp"),this.m_xAxis.drawVerticalLine(),this.createXAxisMarkerLabelGroup("xaxislabelgrp"),this.createTickGroup("xaxistickgrp"),this.m_xAxis.markXaxis(),this.m_xAxis.drawXAxis()},TimelineChart.prototype.drawYAxis=function(){IsBoolean(this.m_showmarkerline)&&(this.createHorizontalLineGroup("horizontallinegrp"),this.m_yAxis.horizontalMarkerLines()),IsBoolean(this.m_zeromarkerline)&&!IsBoolean(this.m_basezero)&&IsBoolean(this.m_yAxis.hasNegativeAxisMarker(this.m_yAxis.m_yAxisMarkersArray))&&this.m_yAxis.zeroMarkerLine(this.leftAxisInfo,this.m_zeromarkercolor),this.m_yAxis.markYaxis(0),this.m_yAxis.drawYAxis();var t=this.getAxisData(this.seriesDataMap.right);IsBoolean(this.m_secondaryaxisshow)&&0<t.all.length&&(this.createYAxisMarkerLabelGroup("rightyaxislabelgrp"),$("#rightyaxislabelgrp"+this.m_objectid).css({"font-family":selectGlobalFont(this.m_secondaryaxislabelfontfamily),"font-style":this.m_secondaryaxislabelfontstyle,"font-size":this.fontScaling(this.m_secondaryaxislabelfontsize)+"px","font-weight":this.m_secondaryaxislabelfontweight,"text-decoration":this.m_secondaryaxislabeltextdecoration}),this.drawSecondaryAxis())},TimelineChart.prototype.drawSecondaryAxis=function(){IsBoolean(this.m_secondaxiszeromarkerline)&&!IsBoolean(this.m_secondaxisbasezero)&&IsBoolean(this.m_yAxis.hasNegativeAxisMarker(this.rightAxisInfo.markerarray))&&this.m_yAxis.zeroMarkerLine(this.rightAxisInfo,this.m_secondaxiszeromarkercolor),IsBoolean(this.m_showlinesecondaxis)&&(this.m_linesecondaxiscolor=this.m_linesecondaxiscolor||this.m_yAxis.m_lineyaxiscolor||"#FFFFFF",this.m_yAxis.drawSecondaryAxis()),this.m_yAxis.markRightYaxis()},TimelineChart.prototype.drawTimeSeries=function(){for(var t=this.m_seriesNames.length,i=0,e=0;e<t;e++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[e]])&&(null==this.m_lineSeries[this.m_seriesNames[e]]&&null!=this.m_columnSeries[this.m_seriesNames[e]]?(this.createStackGroup(this.m_columnSeries[this.m_seriesNames[e]],"stackgrp",e,this.m_seriesNames[e]),this.m_columnSeries[this.m_seriesNames[e]].drawColumns(e)):"fanchart"===this.m_charttype?(this.createStackGroup(this.m_lineSeries[this.m_seriesNames[e]],"linestackgrp",e,this.m_seriesNames[e]),this.m_lineSeries[this.m_seriesNames[e]].drawFanChartSeries(i),i++):(this.createStackGroup(this.m_lineSeries[this.m_seriesNames[e]],"linestackgrp",e,this.m_seriesNames[e]),this.m_lineSeries[this.m_seriesNames[e]].drawLineSeries(e),!IsBoolean(this.getShowPoint())&&1!=this.m_lineCalculation.xAxisData.length||(this.createShapeGroup("shapegrp",e,this.m_seriesNames[e]),this.m_pointSeries[this.m_seriesNames[e]].drawPointSeries(e))))},TimelineChart.prototype.drawAnnotationChart=function(){if(this.m_annotationSeries={},1<this.m_categoryData[0].length||1==this.m_categoryData[0].length&&"year"==this.m_annotationformat)for(var t=0,i=this.m_seriesNames.length;t<i;t++)!IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[t]])||!IsBoolean(this.m_showannotation)&&1!=this.m_lineCalculation.xannotationPosArray||(this.m_annotationSeries[this.m_seriesNames[t]]=new AnnotSeries,this.m_annotationSeries[this.m_seriesNames[t]].init(this.m_PointsColorsArray[this.m_seriesNames[t]],+this.m_radius[this.m_seriesNames[t]]+1,this.m_lineCalculation.xannotationPosArray,this.m_lineCalculation.getYPositionArray(this.m_seriesNames[t]),this,[],this.m_plotShapeArray[this.m_seriesNames[t]],this.m_plotRadiusArray[this.m_seriesNames[t]]),this.m_annotationSeries[this.m_seriesNames[t]].drawPointSeries())},TimelineChart.prototype.drawDataLabel=function(){var t=this.m_seriesNames.length;this.m_overlappeddatalabelarrayX=[],this.m_overlappeddatalabelarrayY=[];for(var i,e=0;e<t;e++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[e]])&&(i=this.m_valueTextSeries[this.m_seriesNames[e]],IsBoolean(this.m_seriesDataLabelProperty[this.m_seriesNames[e]].showDataLabel))&&(this.createDataLabelGroup(i,"datalabelgrp",e,this.m_seriesNames[e]),i.drawSVGValueTextSeries())},TimelineChart.prototype.drawThreshold=function(){var t,i,e,s,a;IsBoolean(this.m_showyaxisthreshold)&&(t=this.m_lineCalculation.rightAxisInfo.markerarray,s=1/((e=this.m_secondaryaxisshow&&""!=t?(i=+t[0],+t[t.length-1]):(i=+this.m_yAxis.m_yAxisMarkersArray[0],+this.m_yAxis.m_yAxisMarkersArray[this.m_yAxis.m_yAxisMarkersArray.length-1]))-i)*(+this.m_startY-+this.m_endY),this.m_minimumyaxisthreshold=IsBoolean(this.m_minimumyaxisthresholdline)?this.m_minimumyaxisthreshold:this.m_yAxis.m_yAxisMarkersArray[0],a={},this.m_secondaryaxisshow&&""!=t?IsBoolean(this.m_secondaxisautosetup)&&IsBoolean(this.m_secondaxisbasezero)?(+this.m_minimumyaxisthreshold<i&&(this.m_minimumyaxisthreshold=i),+this.m_maximumyaxisthreshold>e&&(this.m_maximumyaxisthreshold=e),+this.m_maximumyaxisthreshold<i&&(this.m_maximumyaxisthreshold=i),+this.m_minimumyaxisthreshold>e&&(this.m_minimumyaxisthreshold=e),+this.m_minimumyaxisthreshold<+i&&+this.m_maximumyaxisthreshold>+e?(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY,a.x2=+this.m_endX,a.y2=+this.m_startY,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_endY,a.X2=+this.m_endX,a.Y2=+this.m_endY):+this.m_minimumyaxisthreshold<+i?(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY,a.x2=+this.m_endX,a.y2=+this.m_startY,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_startY-this.m_maximumyaxisthreshold*s,a.X2=+this.m_endX,a.Y2=+this.m_startY-this.m_maximumyaxisthreshold*s):+this.m_maximumyaxisthreshold>+e?(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY-this.m_minimumyaxisthreshold*s,a.x2=+this.m_endX,a.y2=+this.m_startY-this.m_minimumyaxisthreshold*s,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_endY,a.X2=+this.m_endX,a.Y2=+this.m_endY):(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY-this.m_minimumyaxisthreshold*s,a.x2=+this.m_endX,a.y2=+this.m_startY-this.m_minimumyaxisthreshold*s,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_startY-this.m_maximumyaxisthreshold*s,a.X2=+this.m_endX,a.Y2=+this.m_startY-this.m_maximumyaxisthreshold*s)):a=this.thresholdYAxisCalculation(i,e,s):IsBoolean(this.m_autoaxissetup)&&IsBoolean(this.m_basezero)?(+this.m_minimumyaxisthreshold<i&&(this.m_minimumyaxisthreshold=i),+this.m_maximumyaxisthreshold>e&&(this.m_maximumyaxisthreshold=e),+this.m_maximumyaxisthreshold<i&&(this.m_maximumyaxisthreshold=i),+this.m_minimumyaxisthreshold>e&&(this.m_minimumyaxisthreshold=e),+this.m_minimumyaxisthreshold<+i&&+this.m_maximumyaxisthreshold>+e?(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY,a.x2=+this.m_endX,a.y2=+this.m_startY,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_endY,a.X2=+this.m_endX,a.Y2=+this.m_endY):+this.m_minimumyaxisthreshold<+i?(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY,a.x2=+this.m_endX,a.y2=+this.m_startY,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_startY-this.m_maximumyaxisthreshold*s,a.X2=+this.m_endX,a.Y2=+this.m_startY-this.m_maximumyaxisthreshold*s):+this.m_maximumyaxisthreshold>+e?(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY-this.m_minimumyaxisthreshold*s,a.x2=+this.m_endX,a.y2=+this.m_startY-this.m_minimumyaxisthreshold*s,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_endY,a.X2=+this.m_endX,a.Y2=+this.m_endY):(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY-this.m_minimumyaxisthreshold*s,a.x2=+this.m_endX,a.y2=+this.m_startY-this.m_minimumyaxisthreshold*s,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_startY-this.m_maximumyaxisthreshold*s,a.X2=+this.m_endX,a.Y2=+this.m_startY-this.m_maximumyaxisthreshold*s)):a=this.thresholdYAxisCalculation(i,e,s),this.m_fillcolorarray=[],hex2rgb(this.m_markercolor,this.m_markertransparency),this.drawThresholdLineBetweenPoints(i,e,this.m_minimumyaxisthreshold,this.m_yaxisthresholdlinewidth,.5,this.m_minimumthresholdstrokecolor,a.x1,a.y1,a.x2,a.y2),this.drawThresholdLineBetweenPoints(i,e,this.m_maximumyaxisthreshold,this.m_yaxisthresholdlinewidth,.5,this.m_maximumthresholdstrokecolor,a.X1,a.Y1,a.X2,a.Y2),this.fillColorBetweenPoints(this.m_fillcolorarray))},TimelineChart.prototype.thresholdYAxisCalculation=function(e,s,a){var r={};if(e<0)s<0||(+this.m_minimumyaxisthreshold<e&&(this.m_minimumyaxisthreshold=e),+this.m_maximumyaxisthreshold>s&&(this.m_maximumyaxisthreshold=s),+this.m_maximumyaxisthreshold<e&&(this.m_maximumyaxisthreshold=e),+this.m_minimumyaxisthreshold>s&&(this.m_minimumyaxisthreshold=s)),+this.m_minimumyaxisthreshold<+e&&+this.m_maximumyaxisthreshold>+s?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY,r.x2=+this.m_endX,r.y2=+this.m_startY,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_endY,r.X2=+this.m_endX,r.Y2=+this.m_endY):+this.m_minimumyaxisthreshold<+e?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY,r.x2=+this.m_endX,r.y2=+this.m_startY,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY-this.m_maximumyaxisthreshold*a+e*a,r.X2=+this.m_endX,r.Y2=+this.m_startY-this.m_maximumyaxisthreshold*a+e*a):+this.m_maximumyaxisthreshold>+s?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY-this.m_minimumyaxisthreshold*a+e*a,r.x2=+this.m_endX,r.y2=+this.m_startY-this.m_minimumyaxisthreshold*a+e*a,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_endY,r.X2=+this.m_endX,r.Y2=+this.m_endY):(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY-this.m_minimumyaxisthreshold*a+e*a,r.x2=+this.m_endX,r.y2=+this.m_startY-this.m_minimumyaxisthreshold*a+e*a,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY-this.m_maximumyaxisthreshold*a+e*a,r.X2=+this.m_endX,r.Y2=+this.m_startY-this.m_maximumyaxisthreshold*a+e*a);else if(!(s<0)){let t=+this.m_minimumyaxisthreshold,i=+this.m_maximumyaxisthreshold;t<e&&(t=e),i>s&&(i=s),t>+s&&i<=+s&&i>=+e?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_endY,r.x2=+this.m_endX,r.y2=+this.m_endY,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY-i*a+e*a,r.X2=+this.m_endX,r.Y2=+this.m_startY-i*a+e*a):t>+s&&i>=+s?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_endY,r.x2=+this.m_endX,r.y2=+this.m_endY,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_endY,r.X2=+this.m_endX,r.Y2=+this.m_endY):i<+e&&t>=+e?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY-t*a+e*a,r.x2=+this.m_endX,r.y2=+this.m_startY-t*a+e*a,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY,r.X2=+this.m_endX,r.Y2=+this.m_startY):i<+e&&t<+e?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY,r.x2=+this.m_endX,r.y2=+this.m_startY,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY,r.X2=+this.m_endX,r.Y2=+this.m_startY):t<+e?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY,r.x2=+this.m_endX,r.y2=+this.m_startY,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY-i*a+e*a,r.X2=+this.m_endX,r.Y2=+this.m_startY-i*a+e*a):i>+s?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY-t*a+e*a,r.x2=+this.m_endX,r.y2=+this.m_startY-t*a+e*a,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_endY,r.X2=+this.m_endX,r.Y2=+this.m_endY):(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY-t*a+e*a,r.x2=+this.m_endX,r.y2=+this.m_startY-t*a+e*a,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY-i*a+e*a,r.X2=+this.m_endX,r.Y2=+this.m_startY-i*a+e*a)}return r},TimelineChart.prototype.drawThresholdLineBetweenPoints=function(t,i,e,s,a,r,o,n,h,m,l,c,_){o&&o!=1/0&&h!=1/0&&h&&(r=hex2rgb(r,_),(_=document.createElementNS("http://www.w3.org/2000/svg","line")).setAttribute("x1",o),_.setAttribute("y1",n),_.setAttribute("x2",h),_.setAttribute("y2",m),_.setAttribute("stroke",r),_.setAttribute("stroke-width",s),$("#"+this.svgContainerId).append(_),t<e)&&e<i&&this.m_fillcolorarray.push({X1:o,Y1:n,X2:h,Y2:m})},TimelineChart.prototype.fillColorBetweenPoints=function(t){if(IsBoolean(this.m_enablethresholdfill)&&0<t.length){for(var i=t[0].Y1,e=t[0].Y1,s=1;s<t.length;s++)(a=t[s]).Y1<i&&(i=a.Y1),a.Y1>e&&(e=a.Y1);var a,r=(a=t[0]).X1,o=a.X2,n=Math.min(r,o),r=Math.max(r,o),o=Math.min(e,this.m_startY),r=r-n,h=Math.max(e,this.m_startY)-o,m=n+r/2,l=o+h/2,c=hex2rgb(this.m_fillBelowLowerThreshold,+this.m_fillBelowThresholdOpacity),o=drawSVGRect(n,o,r,h,c),h=($("#"+this.svgContainerId).append(o),drawSVGText(m,l,this.m_BelowThresholdLabel,hex2rgb(this.m_BelowThresholdLabelColor,1),"center","middle",0)),o=(h.setAttribute("style","font-family:"+selectGlobalFont(this.m_statusfontfamily)+";font-style:none;font-size:16px;font-weight:normal;text-decoration:none;"),$("#"+this.svgContainerId).append(h),i),l=e-o,c=hex2rgb(this.m_fillBetweenThreshold,+this.m_fillBetweenThresholdOpacity),h=drawSVGRect(n,o,r,l,c);$("#"+this.svgContainerId).append(h);0<l&&((h=drawSVGText(m,o+l/2,this.m_BetweenThresholdLabel,hex2rgb(this.m_BetweenThresholdLabelColor,1),"center","middle",0)).setAttribute("style","font-family:"+selectGlobalFont(this.m_statusfontfamily)+";font-style:none;font-size:16px;font-weight:normal;text-decoration:none;"),$("#"+this.svgContainerId).append(h));o=Math.min(i,this.m_endY),l=Math.max(i,this.m_endY)-o,h=o+l/2,c=hex2rgb(this.m_fillAboveUpperThreshold,+this.m_fillUpperThresholdOpacity),n=drawSVGRect(n,o,r,l,c),o=($("#"+this.svgContainerId).append(n),drawSVGText(m,h,this.m_UpperThresholdLabel,hex2rgb(this.m_UpperThresholdLabelColor,1),"center","middle",0));o.setAttribute("style","font-family:"+selectGlobalFont(this.m_statusfontfamily)+";font-style:none;font-size:16px;font-weight:normal;text-decoration:none;"),$("#"+this.svgContainerId).append(o)}},TimelineChart.prototype.setThresholdFillColors=function(){var t,i,e,s;0<this.m_thresholdfillcolor.length&&(t=this.m_thresholdfillcolor.split(","),this.m_thresholdfilllevel.split(","),i=this.m_thresholdfillopacity.split(","),e=this.m_thresholdfilllabel.split(","),s=this.m_thresholdfilllabelcolor.split(","),this.m_fillBelowLowerThreshold=t[0],this.m_fillBetweenThreshold=t[1],this.m_fillAboveUpperThreshold=t[2],this.m_fillBelowThresholdOpacity=i[0],this.m_fillBetweenThresholdOpacity=i[1],this.m_fillUpperThresholdOpacity=i[2],this.m_BelowThresholdLabel=e[0],this.m_BetweenThresholdLabel=e[1],this.m_UpperThresholdLabel=e[2],this.m_BelowThresholdLabelColor=s[0],this.m_BetweenThresholdLabelColor=s[1],this.m_UpperThresholdLabelColor=s[2])},TimelineChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawSVGFrame(),this.getBGGradientColorToContainer()},TimelineChart.prototype.getBGGradientColorToContainer=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","defs"),i=(t.setAttribute("id","defsElement"+this.m_objectid),document.createElementNS(NS,"filter")),e=(i.setAttribute("id","stackShadow"+this.m_objectid),document.createElementNS(NS,"feOffset")),s=(e.setAttribute("dx","0"),e.setAttribute("dy","0"),e.setAttribute("result","offOut"),e.setAttribute("in","SourceGraphic"),document.createElementNS(NS,"feGaussianBlur")),a=(s.setAttribute("result","blurOut"),s.setAttribute("in","offOut"),s.setAttribute("stdDeviation","1"),document.createElementNS(NS,"feColorMatrix")),r=(a.setAttribute("in","blurOut"),a.setAttribute("result","color-out"),a.setAttribute("type","matrix"),a.setAttribute("values",hex2Matrix(this.m_stackshadowcolor,this.m_stackshadowopacity)),document.createElementNS(NS,"feBlend"));r.setAttribute("in","SourceGraphic"),r.setAttribute("in2","color-out"),r.setAttribute("mode","normal"),i.appendChild(e),i.appendChild(s),i.appendChild(a),i.appendChild(r),t.appendChild(i),$("#"+this.svgContainerId).append(t)},TimelineChart.prototype.getBGGradientColorToScale=function(){for(var t=this,i=($("#"+t.svgTimeScaleId).empty(),document.createElementNS(NS,"linearGradient")),e=(i.setAttribute("id","gradient1"+t.m_objectid),i.setAttribute("gradientTransform","rotate("+this.m_bggradientrotation+")"),$("#"+t.svgTimeScaleId).append(i),this.getBgGradients().split(",")),s=100/(e.length-1!=0?e.length-1:1),a=0,r=e.length;a<=r-1;a++){var o=document.createElementNS(NS,"stop");o.setAttribute("offset",a*s+"%"),o.setAttribute("stop-color",hex2rgb(convertColorToHex(e[a]),this.m_bgalpha)),o.setAttribute("stop-opacity",this.m_bgalpha),$(i).append(o)}var n=drawSVGRect(0,0,this.m_width,this.sliderMargin,"");$(n).attr("id","GradientScaleRect"+t.m_objectid),$(n).css("opacity","0"),$(n).attr("fill","url(#gradient1"+t.m_objectid+")"),$("#"+t.svgTimeScaleId).append(n)},TimelineChart.prototype.sliderAxisCalculation=function(t,i){this.tempLeft=t-i;for(var e=new Date,s=0,a=this.CatData[0].length;s<a;s++){var r,o=new Date(this.CatData[0][s]);if(e.setHours(0,0,0,0)===o.setHours(0,0,0,0)){this.m_isCurrentDate=!0,this.currentDateIndex=s;for(var n=0;n<this.m_seriesNames.length;n++)if(IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[n]])){r=this.m_seriesNames[n];break}this.tempLeft=this.m_lineCalculation.xPositionMap[r][s]-+this.getStartX(),this.tempLeft+i>t||this.currentDateIndex==this.lastIndex?this.tempLeft=t-i:(this.tempLeft<this.getStartX()||0==this.currentDateIndex)&&(this.tempLeft=+this.getStartX());break}}return this.tempLeft},TimelineChart.prototype.getDrillDataPoints=function(t,i){var X=this,e=this.seriesDataMapForIndex;if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries())){$="clustered"==this.m_columntype?this.m_lineCalculation.columnWidth*this.clusteredbarpadding/this.m_lineCalculation.totalColumn:this.m_lineCalculation.columnWidth/this.m_lineCalculation.totalColumn;var $,s=5,a=!1,r="stacked"==this.m_columntype?0:this.m_drillminstackheight;if(t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY())for(S in e)for(var V in e[S]){var o=0;if("overlaid"==this.columntype&&"column"==S){var n,h=this.m_lineCalculation.overlaidColWidth[V][S];for(n in h){var m=this.m_lineCalculation.getXPositionArray(h[n]),l=this.m_lineCalculation.getYPositionArray(h[n]),c=m.length,d=IsBoolean(this.m_showslider)?this.m_sliderLastIndex+1-c:0;if(null!=m&&null!=l)for(var g=0;g<c;g++){var G=0,p=(Math.abs(this.getStartY()-l[g])<r&&(G=+this.m_columnSeries[D[f]].m_ySeriesData[g]<0?r:-r),"line"==S?m[g]-s:m[g]),u="line"==S?+m[g]+s:m[g]+this.m_lineCalculation.columnWidthMap[h[n]],y="line"==S?l[g]+s:this.getStartY(),x="line"==S?+l[g]-s:l[g]+G;if(t<=+u&&+p<=t&&i<=y&&x<=i)return T=this.getFieldNameValueMap(d+g),P=this.m_PointsColorsArray[this.m_seriesNames[h.length-1-o]][g],k=this.m_seriesNames[h.length-1-o],L=this.m_seriesDisplayNamesMap[this.m_seriesNames[h.length-1-o]],I=T[k],T.drillField=k,T.drillDisplayField=L,T.drillValue=I,{drillRecord:T,drillColor:P}}o++}}else for(var z=!0,f=(D=this.m_seriesNames.filter(function(t){return X.m_seriesVisibleArr[t]})).length-1;0<=f;f--)if("unique"!=D[f]&&"contains"!=D[f]){var E,m=this.m_lineCalculation.getXPositionArray(D[f]),l=this.m_lineCalculation.getYPositionArray(D[f]),c=m.length,d=IsBoolean(this.m_showslider)?this.m_sliderLastIndex+1-c:0,b=[],A=this.m_seriesAxisDrill[D[f]],S=this.m_seriesChartTypeDrill[D[f]];E=""!==(M=-1==(b=("left"===A?this.m_lineCalculation.leftAxisInfo:this.m_lineCalculation.rightAxisInfo).markerarray).indexOf("0")?-1==b.indexOf(0)?"":b.indexOf(0):b.indexOf("0"))&&(B=+this.m_startY-this.m_yAxis.getYAxisDiv(b)*M,!0);for(g=0;g<c;g++){var C,v=0,w=0,s=this.m_plotradiusarray[D[f]][g]>s?this.m_plotradiusarray[D[f]][g]:s,p=("column"==S&&void 0!==this.m_columnSeries[D[f]]&&+this.m_columnSeries[D[f]].m_stackHeightArray[g]<r&&(v=!(+this.m_columnSeries[D[f]].m_ySeriesData[g]<0)||IsBoolean(this.m_basezero)?0:r,w=+this.m_columnSeries[D[f]].m_ySeriesData[g]<0?0:r),"line"==S?m[g]-s:m[g]),u="line"==S?+m[g]+s:m[g]+$;if(x=""===l[g]?E?(y="line"==S?B+ +this.m_plotradiusarray[D[f]][g]:_.has(this.m_columnSeries,D[f])?B:0,"line"==S?B-s:B-w):(C=0<+b[0]?this.getStartY():this.getEndY(),v=0<+b[0]?0:r,w=0<+b[0]?r:0,y="line"==S?C+ +this.m_plotradiusarray[D[f]][g]:_.has(this.m_columnSeries,D[f])?C+v:0,"line"==S?C-s:C-w):(y="line"==S?l[g]+ +this.m_plotradiusarray[D[f]][g]:_.has(this.m_columnSeries,D[f])?l[g]+this.m_columnSeries[D[f]].m_stackHeightArray[g]+v:0,"line"==S?+l[g]-s:l[g]-w),t<=+u&&+p<=t&&i<=y&&x<=i)return a=!(z=!1),this.getDrillData(d,D[f],g)}}}if("stacked"==this.m_columntype&&!a)for(var W=this.m_lineCalculation.getxPositionTooltipArray(),N=this.m_lineCalculation.columnWidth/2,f=0,j=W.length;f<j;f++)if(t<=+W[f]+N&&t>=+W[f]-N)for(var D,T,P,k,L,I,F=0,H=(D=this.m_seriesNames).length;F<H;F++)if(i>=(l=this.m_lineCalculation.getYPositionArray(D[F]))[f]&&i<=l[f]+this.m_drillminstackheight||i<=l[f]+this.m_columnSeries[D[F]].m_stackHeightArray[f]&&i>=l[f]-this.m_drillminstackheight)return T=this.getFieldNameValueMap(f),P=this.m_drillColor,I=L=k="",T.drillField=k,T.drillDisplayField=L,T.drillValue=I,a=!0,{drillRecord:T,drillColor:P};if(z&&IsBoolean(this.m_fillarea))for(F=D.length-1;0<=F;F--)if("unique"!=D[F]&&"contains"!=D[F]){var M,B,b=[],A=this.m_seriesAxisDrill[D[F]],S=this.m_seriesChartTypeDrill[D[F]];if(B=""===(M=-1==(b=("left"===A?this.m_lineCalculation.leftAxisInfo:this.m_lineCalculation.rightAxisInfo).markerarray).indexOf("0")?-1==b.indexOf(0)?"":b.indexOf(0):b.indexOf("0"))||+this.m_startY-this.m_yAxis.getYAxisDiv(b)*M,"line"===S)for(var m=this.m_lineCalculation.getXPositionArray(D[F]),l=this.m_lineCalculation.getYPositionArray(D[F]),c=m.length,N=void 0!==this.m_xAxis.m_xPositionData[1]?(this.m_xAxis.m_xPositionData[1]-this.m_xAxis.m_xPositionData[0])/2:this.m_isfixedradius[D[F]]&&this.m_plotradiusarray[D[F]][0]>s?this.m_plotradiusarray[D[F]][0]:s,d=IsBoolean(this.m_showslider)?this.m_sliderLastIndex+1-c:0,Y=0;Y<c;Y++){p=+m[Y]-N;if(t<=+(u=+m[Y]+N)&&+p<=t){if((IsBoolean(this.m_basezero)||!0===B)&&i>=+l[Y])return this.getDrillData(d,D[F],Y);if(!IsBoolean(this.m_basezero)&&void 0!==e[S][A][D[F]]&&!isNaN(+e[S][A][D[F]][Y])&&0<=+e[S][A][D[F]][Y]&&i<=B&&i>=+l[Y])return this.getDrillData(d,D[F],Y);if(!IsBoolean(this.m_basezero)&&void 0!==e[S][A][D[F]]&&!isNaN(+e[S][A][D[F]][Y])&&+e[S][A][D[F]][Y]<0&&B<i&&i<=+l[Y])return this.getDrillData(d,D[F],Y)}}}}},TimelineChart.prototype.getDrillData=function(t,i,e){for(var s=this.getFieldNameValueMap(t+e),t=(IsBoolean(this.getShowPoint())||1==this.m_lineCalculation.xAxisData.length?this.m_PointsColorsArray:this.getColorsForSeries())[i][e],a=i,i=this.m_seriesDisplayNamesMap[i],r=s[a],o=this.m_categoryNames,n=[],h=0;h<o.length;h++)n.push(s[o[h]]);return s.drillField=a,s.drillDisplayField=i,s.drillValue=r,s.drillIndex=e,s.drillCategoryNames=o,s.drillCategory=n,{drillRecord:s,drillColor:t}},TimelineChart.prototype.getToolTipData=function(t,i){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries())&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType)){if(t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY()){for(var e=this.m_lineCalculation.getxPositionTooltipArray(),s=this.m_lineCalculation.columnWidth/2,a=this.getSeriesData(),r=e.length,o=0;o<r;o++)if(t<=+e[o]+s&&t>=+e[o]-s){if(_={},"Default"==this.m_customtextboxfortooltip.dataTipType){_.cat="",_.data=new Array,_.cat=this.getCategoryData()[0][o];for(var n,h=a.length,m=0,l=0;m<h;m++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[m]])&&(f=[],n=(IsBoolean(this.getShowPoint())||1==this.m_categoryData[0].length?this.m_PointsColorsArray:this.getColorsForSeries())[this.m_seriesNames[m]][o],f[0]={color:n,shape:this.legendMap[this.m_seriesNames[m]].shape},f[1]=this.getSeriesDisplayNames()[m],n=""!=a[m][o]&&!isNaN(a[m][o])&&null!=a[m][o]&&"null"!=a[m][o]&&(n=+a[m][o])%1!=0&&"default"!==this.m_tooltipprecision?n.toFixed(this.m_tooltipprecision):a[m][o],n={seriesName:this.m_seriesNames[m],axisType:this.legendMap[this.m_seriesNames[m]].axisType,serVal:n},n=this.getUpdatedLeftRightAxisFormatterForToolTip(n),f[2]=n,"100%"==this.m_columntype&&1<this.getSeriesDisplayNames().length&&(n=this.getValuefromMap(this.getSeriesNames()[m],o),"auto"==this.m_tooltipproperties.tooltippercentprecision?0==countDecimal(n.toString())?f[3]=n+"%":(f[3]=n.toFixed(2),f[3]%1==0?f[3]=(+f[3]).toFixed()+"%":f[3]=f[3]+"%"):f[3]=n.toFixed(this.m_tooltipproperties.tooltippercentprecision)+"%"),_.data[l]=f,l++);_.highlightIndex=this.getDrillColor(t,i),IsBoolean(this.m_controlledtooltip)&&(_=this.updateTooltipData(_));break}var c=IsBoolean(this.m_showslider)?this.m_sliderLastIndex+1-r:0,_=this.getDataProvider()[c+o]}}else this.hideToolTip();r=(e=this.m_lineCalculation.getxPositionTooltipArray()).length;if(IsBoolean(this.m_showannotation))for(var d=0;d<this.m_annotationXData.length;d++)if(""!=this.m_annotationXData[d]){var g=Math.round(+this.m_annotationXData[d].xposition);if(t>=g-this.m_annotationradius&&t<=g+ +this.m_annotationradius&&i<=this.getStartY()&&i>=this.getEndY()){(_={cat:""}).data=new Array;var p,u,y,g=this.m_annotationXData[d].point.toString(),x=this.getMonthYear(g);_.cat=this.m_annotationtooltiptitle,y="year"==this.m_annotationformat?(u=(p=this.m_annotationXData.filter(t=>{return""!==t&&this.getMonthYear(t.point.toString()).year===x.year})).map(t=>t.label),p.map(t=>t.point)):(u=(p=this.m_annotationXData.filter(t=>{return!!t&&(t=this.getMonthYear(t.point.toString())).mon===x.mon&&t.year===x.year})).map(t=>t.label),p.map(t=>t.point));for(var f,b=0,A=0;b<u.length;b++)(f=[])[0]={color:this.m_annotationcolor,shape:"bubble"},f[1]=u[b],f[2]=Array.isArray(y)?y[b]:y,_.data[A]=f,A++;this.m_showannotationTooltip=!0;break}}return _}},TimelineChart.prototype.getMonthYear=function(t){var i,e,s,a=[],r=t.match(/^(0[1-9]|1[0-2])[-/.](0[1-9]|[12][0-9]|3[01])[-/.](\d{4})$|^(0[1-9]|[12][0-9]|3[01])[-/.](0[1-9]|1[0-2])[-/.](\d{4})$/);return r?(s=e=i=0,r[1]&&r[2]&&r[3]?(i=r[1],e=r[2],s=r[3]):r[4]&&r[5]&&r[6]&&(e=r[4],i=r[5],s=r[6])):t.match(/^\d{4}$/)&&(s=t),a.mon=i,a.day=e,a.year=s,a},TimelineChart.prototype.getValuefromMap=function(t,i){for(var e in this.changedDataMap)for(var s in this.changedDataMap[e])for(var a in this.changedDataMap[e][s])if(a==t)return"line"==s?0:this.changedDataMap[e][s][a][i]},TimelineChart.prototype.getDrillColor=function(t,i){var e=this,s=this.seriesDataMapForIndex;if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)){var a="stacked"==this.m_columntype?0:this.m_drillminstackheight,r="clustered"==this.m_columntype?this.m_lineCalculation.columnWidth*this.clusteredbarpadding/this.m_lineCalculation.totalColumn:this.m_lineCalculation.columnWidth/this.m_lineCalculation.totalColumn;if(t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY())for(var o in s)for(var n in s[o]){var h=0;if("overlaid"==this.m_columntype&&"column"==o){var m,l=this.m_lineCalculation.overlaidColWidth[n][o];for(m in l){var c=this.m_lineCalculation.getXPositionArray(l[m]),d=this.m_lineCalculation.getYPositionArray(l[m]);if(null!=c&&null!=d)for(var g=0,p=c.length;g<p;g++){var u="line"==o?c[g]-5:c[g],y="line"==o?+c[g]+5:c[g]+this.m_lineCalculation.columnWidthMap[l[m]],x="line"==o?d[g]+5:this.getStartY(),f="line"==o?+d[g]-5:d[g];if(t<=+y&&+u<=t&&i<=x&&f<=i)return l.length-1-h}h++}}else for(var b=this.m_seriesNames.filter(function(t){return e.m_seriesVisibleArr[t]}),A=b.length-1;0<=A;A--)if("unique"!=b[A]&&"contains"!=b[A]){var S,C,c=this.m_lineCalculation.getXPositionArray(b[A]),d=this.m_lineCalculation.getYPositionArray(b[A]),p=c.length,v=[],w=this.m_seriesAxisDrill[b[A]],o=this.m_seriesChartTypeDrill[b[A]],w=-1==(v=("left"===w?this.m_lineCalculation.leftAxisInfo:this.m_lineCalculation.rightAxisInfo).markerarray).indexOf("0")?-1==v.indexOf(0)?"":v.indexOf(0):v.indexOf("0");C=""!==w&&(S=+this.m_startY-this.m_yAxis.getYAxisDiv(v)*w,!0);for(g=0;g<p;g++){var N,D=0,T=0,u=("column"==o&&void 0!==this.m_columnSeries[b[A]]&&+this.m_columnSeries[b[A]].m_stackHeightArray[g]<a&&(D=!(+this.m_columnSeries[b[A]].m_ySeriesData[g]<0)||IsBoolean(this.m_basezero)?0:a,T=+this.m_columnSeries[b[A]].m_ySeriesData[g]<0?0:a),"line"==o?c[g]-+this.m_plotradiusarray[b[A]][g]:c[g]),y="line"==o?+c[g]+ +this.m_plotradiusarray[b[A]][g]:c[g]+r;if(f=""===d[g]?C?(x="line"==o?S+ +this.m_plotradiusarray[b[A]][g]:_.has(this.m_columnSeries,b[A])?S:0,"line"==o?S-5:S-T):(N=0<+v[0]?this.getStartY():this.getEndY(),D=0<+v[0]?0:a,T=0<+v[0]?a:0,x="line"==o?N+ +this.m_plotradiusarray[b[A]][g]:_.has(this.m_columnSeries,b[A])?N+D:0,"line"==o?N-5:N-T):(x="line"==o?d[g]+ +this.m_plotradiusarray[b[A]][g]:_.has(this.m_columnSeries,b[A])?d[g]+this.m_columnSeries[b[A]].m_stackHeightArray[g]+D:0,"line"==o?+d[g]-+this.m_plotradiusarray[b[A]][g]:d[g]-T),t<=+y&&+u<=t&&i<=x&&f<=i)return A}}}}},TimelineChart.prototype.initScaleChart=function(t){t.m_y=0,this.tempTitle=t.m_title.m_showtitle,this.tempSubTitle=t.m_subTitle.m_showsubtitle,t.m_height=this.sliderMargin,t.m_linewidth=2,t.m_title.m_showtitle=!1,t.m_subTitle.m_showsubtitle=!1,t.m_showmaximizebutton=!1,t.m_showgradient=!1,t.m_showrangeselector=!1,t.setCategorySeriesData(),t.setAllFieldsName(),t.setAllFieldsDisplayName(),t.setColorsForSeries(),t.registerDataInMap(),t.registerDateInMapForSeriesIndex(),t.calculateAxisMinMax(),t.initializeCalculationClass(),t.instanciateSeries(t.seriesDataMap),IsBoolean(t.m_isEmptySeries)||t.initializeScaleLine(this.seriesDataMap)},TimelineChart.prototype.drawScaleChart=function(t){t.drawScaleLines(),this.m_title.m_showtitle=this.tempTitle,this.m_subTitle.m_showsubtitle=this.tempSubTitle},TimelineChart.prototype.initializeScaleLine=function(t){for(var i in t)for(var e in t[i])for(var s in t[i][e])t[i][e].hasOwnProperty(s)&&("column"==e?(this.m_columnSeries[s]=new TimeLineColumns,this.m_columnSeries[s].init(this.m_PointsColorsArray[s],this.m_lineCalculation.getXPositionArray(s),this.m_lineCalculation.getYPositionArray(s),this.m_lineCalculation.getHeightArray(s),this.m_lineCalculation.columnWidth/this.m_lineCalculation.totalColumn,this,this.m_plotTrasparencyArray[s],this.m_lineCalculation.seriesDataMap[i][e][s],!1)):(this.m_lineSeries[s]=new SVGLineSeries,this.m_lineSeries[s].init(this.getColorsForSeries()[s],this.m_lineCalculation.getXPositionArray(s),this.m_lineCalculation.getYPositionArray(s),this.m_linewidth,this,1,s,this.m_lineWidthArray[s],this.m_lineTypeArray[s])))},TimelineChart.prototype.drawScaleLines=function(){for(var t=this.m_seriesNames.length,i=0;i<t;i++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[i]])&&(null==this.m_lineSeries[this.m_seriesNames[i]]?(this.createStackGroupForSlider(this.m_columnSeries[this.m_seriesNames[i]],"stackgrpslider",i,this.m_seriesNames[i]),this.m_columnSeries[this.m_seriesNames[i]].drawColumns(i)):(this.createStackGroupForSlider(this.m_columnSeries[this.m_seriesNames[i]],"linegrpslider",i,this.m_seriesNames[i]),this.m_lineSeries[this.m_seriesNames[i]].drawLineSeries(i)))},TimelineChart.prototype.updateDragChartFromSlider=function(t,i){if(!IsBoolean(this.updateflag)){for(var e=0,s=this.m_seriesNames.length;e<s&&!IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[e]]);e++);this.origonalXposition=this.m_lineCalculation.getXPositionArray(this.m_seriesNames[e]),this.updateflag=!0}var a=[],r=[],o=[],n={},h={};a[0]=[],this.m_sliderindexes=[];for(var m=0,l=this.SerData.length;m<l;m++)r[m]=[],o[m]=[],n[this.m_seriesNames[m]]=[],h[this.m_seriesNames[m]]=[],this.m_sliderindexes[m]=[];this.m_sliderLastIndex=0<this.origonalXposition.length?this.origonalXposition.length-1:this.origonalXposition.length;for(var c=0,_=this.origonalXposition.length;c<_;c++)if(t<+this.origonalXposition[c]&&i>+this.origonalXposition[c]){a[0].push(this.CatData[0][c]);for(var m=0,d=this.SerData.length;m<d;m++)r[m].push(this.SerData[m][c]),o[m].push(this.SerDataLabel[m][c]),n[this.m_seriesNames[m]].push(this.m_conditionalcolorswithoutslider[this.m_seriesNames[m]][c]),h[this.m_seriesNames[m]].push(this.PlotRadius[this.m_seriesNames[m]][c]),this.m_sliderLastIndex=c,this.m_sliderindexes[m].push(c)}else if(+this.origonalXposition[c]>i)break;1<=a[0].length?(this.m_afterslider=!0,this.m_categoryData=a,this.m_seriesData=r,this.m_seriesDataLabel=o,this.m_conditionalcolorswithslider=n,this.m_plotradiusarray=h,this.startDate=a[0][0],this.endDate=a[0][a[0].length-1],this.m_overlappeddatalabelarrayY=[],this.m_overlappeddatalabelarrayX=[],this.init(),this.drawChart(),this.m_afterslider=!1):(this.startDate=a[0][0],this.endDate=a[0][0])},TimelineChart.prototype.setStartX=function(){this.yaxisLabelFont=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),this.yaxisDescriptionFont=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily);var t=IsBoolean(this.m_enablehtmlformate.yaxis)?"<br>":"\\n",t=""!==this.m_yAxis.m_description&&0<this.leftAxisInfo.markerarray.length?this.fontScaling(this.m_yAxis.getFontSize())*(3<this.m_yAxis.m_description.split(t).length?2:this.m_yAxis.m_description.split(t).length-1):0,i=this.getBorderToDescriptionMargin(),t=this.getYAxisDescriptionMargin()+t,e=this.getDescriptionToLabelMargin(),s=this.getLabelToAxisMargin(),a=this.getYAxisLabelMargin(),i=+this.m_x+ +i+ +t+ +e+ +a+ +s;this.m_startX=i,!IsBoolean(this.getShowLegends())||IsBoolean(this.m_fixedlegend)||"verticalLeftTop"!=this.m_legendposition&&"verticalLeftMiddle"!=this.m_legendposition&&"verticalLeftBottom"!=this.m_legendposition||(this.m_startX=this.m_startX+this.m_leftFloatingLegendMargin*this.minWHRatio())},TimelineChart.prototype.getYAxisLabelMargin=function(){var t=this.getLabelFormatterMargin();return this.setLabelWidth(),+t+ +this.getLabelWidth()+ +this.getLabelSignMargin()+ +this.getLabelPrecisionMargin()+ +this.getLabelSecondFormatterMargin()},TimelineChart.prototype.getLabelFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.m_formater&&""!=this.m_formater&&"none"!=this.m_unit&&""!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(t).width,this.ctx.closePath()),i},TimelineChart.prototype.getLabelWidth=function(){return this.m_labelwidth},TimelineChart.prototype.setLabelWidth=function(){var t=[];if((this.m_labelwidth=0)<this.fontScaling(this.m_yAxis.m_labelfontsize)){for(var i=0,e=this.leftAxisInfo.markerarray.length;i<e;i++){var s,a=this.leftAxisInfo.markerarray[i];IsBoolean(this.m_fixedlabel)||(IsBoolean(this.m_yAxis.getLeftaxisFormater())&&("none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(s=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?a=getNumberFormattedNumericValue(+a,this.m_precision,this.m_unit):"auto"==this.getSecondaryUnit()?a=getNumberFormattedNumericValue(+a):"none"!==this.getSecondaryUnit()&&(a=this.m_util.updateTextWithFormatter(a,s,this.m_precision))),0!==a)&&"default"!==this.m_precision&&(a=this.m_yAxis.setPrecision(a,this.m_precision)),a=getFormattedNumberWithCommas(a,this.m_numberformatter),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t[i]=this.ctx.measureText(a).width,this.ctx.closePath())}this.m_labelwidth=getMaxValueFromArray(t)}},TimelineChart.prototype.getLabelSignMargin=function(){var t=0,i=0,e=this.leftAxisInfo.min;return e<0&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(e).width,this.ctx.closePath()),t=this.getLabelWidth()<i?this.ctx.measureText("-").width:t},TimelineChart.prototype.getLabelPrecisionMargin=function(){var t=0;return"auto"==this.getSecondaryUnit()&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t=this.ctx.measureText(".0").width,this.ctx.closePath()),t},TimelineChart.prototype.getLabelSecondFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(t="auto"!=this.getSecondaryUnit()?this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()):"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?getNumberFormattedSymbol(+this.leftAxisInfo.max,this.m_unit):"K",this.ctx.font=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily),i=this.ctx.measureText(t).width),i},TimelineChart.prototype.setEndX=function(){var t=this.getBorderToLegendMargin(),i=this.getVerticalLegendMargin(),e=this.getSecondAxisToXAxisMargin(),s=this.getSecondAxisLabelFormatterMargin(),a=this.getSecondYAxisDescriptionMargin(),r=(this.setLabelWidthForSecondAxis(),this.getLabelWidthForSecondAxis()),o=this.getLabelPrecisionMarginForSecondAxis(),n=this.getLabelSecondFormatterMarginForSecondAxis(),h=this.getSecondAxisLabelToAxisMargin();this.m_rightAxisSpace=+t+ +i+ +e+ +o+ +a+ +s+ +r+ +n+ +h,this.m_endX=+this.m_x+ +this.m_width-+this.m_rightAxisSpace,this.m_endX=this.m_endX<35?35:this.m_endX,!IsBoolean(this.getShowLegends())||IsBoolean(this.m_fixedlegend)||"verticalRightTop"!=this.m_legendposition&&"verticalRightMiddle"!=this.m_legendposition&&"verticalRightBottom"!=this.m_legendposition||(this.m_endX=this.m_endX-this.m_rightFloatingLegendMargin*this.minWHRatio())},TimelineChart.prototype.getLabelPrecisionMarginForSecondAxis=function(){var t=0;return"auto"==this.m_secondaryaxissecondaryunit&&0<this.rightAxisInfo.markerarray.length&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t=this.ctx.measureText(".0").width,this.ctx.closePath()),t},TimelineChart.prototype.getLabelWidthForSecondAxis=function(){return this.m_labelwidthsecondaxis},TimelineChart.prototype.getVerticalLegendMargin=function(){return IsBoolean(this.getShowLegends())&&IsBoolean(this.m_fixedlegend)?20:+this.m_chartpaddings.rightLegendSpace||10},TimelineChart.prototype.setLabelWidthForSecondAxis=function(){var t=[];if((this.m_labelwidthsecondaxis=0)<this.fontScaling(this.m_secondaryaxislabelfontsize)){for(var i=0,e=this.rightAxisInfo.markerarray.length;i<e;i++){var s=this.rightAxisInfo.markerarray[i];this.ctx.beginPath(),this.ctx.font=this.m_secondaryaxislabelfontstyle+" "+this.m_secondaryaxislabelfontweight+" "+this.fontScaling(this.m_secondaryaxislabelfontsize)+"px "+selectGlobalFont(this.m_secondaryaxislabelfontfamily),this.ctx.closePath(),IsBoolean(this.m_secondaryaxisshow)&&(IsBoolean(this.m_yAxis.m_rightaxisformater)&&("none"!=this.m_secondaryaxissecondaryunit&&""!=this.m_secondaryaxissecondaryunit&&(secondunit=this.m_util.getFormatterSymbol(this.m_secondaryaxissecondaryformatter,this.m_secondaryaxissecondaryunit),"auto"==this.m_secondaryaxissecondaryunit&&"Rupees"==this.m_secondaryaxisunit?s=getNumberFormattedNumericValue(+s,this.m_secondaryaxisprecision,this.m_secondaryaxisunit):"auto"==this.m_secondaryaxissecondaryunit?s=getNumberFormattedNumericValue(+s):"none"!==this.m_secondaryaxissecondaryunit&&(s=this.m_util.updateTextWithFormatter(s,secondunit,this.m_secondaryaxisprecision))),0!==s)&&"default"!==this.m_secondaryaxisprecision&&(s=this.m_yAxis.setPrecision(s,this.m_secondaryaxisprecision)),s=getFormattedNumberWithCommas(s,this.m_secondaryaxisnumberformatter),this.ctx.beginPath(),this.ctx.font=this.m_secondaryaxislabelfontstyle+" "+this.m_secondaryaxislabelfontweight+" "+this.fontScaling(this.m_secondaryaxislabelfontsize)+"px "+selectGlobalFont(this.m_secondaryaxislabelfontfamily),t[i]=this.ctx.measureText(s).width,this.ctx.closePath())}this.m_labelwidthsecondaxis=getMaxValueFromArray(t)}},TimelineChart.prototype.getSecondAxisLabelFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_secondaryaxisshow)&&0<this.rightAxisInfo.markerarray.length&&IsBoolean(this.m_yAxis.m_rightaxisformater)&&"none"!=this.m_secondaryaxisunit&&""!=this.m_secondaryaxisunit&&(t=this.m_util.getFormatterSymbol(this.m_secondaryaxisformater,this.m_secondaryaxisunit),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(t).width,this.ctx.closePath()),i},TimelineChart.prototype.getLabelSecondFormatterMarginForSecondAxis=function(){var t,i=0;return IsBoolean(this.m_yAxis.m_rightaxisformater)&&0<this.rightAxisInfo.markerarray.length&&"none"!=this.m_secondaryaxissecondaryformatter&&""!=this.m_secondaryaxissecondaryformatter&&"none"!=this.m_secondaryaxissecondaryunit&&""!=this.m_secondaryaxissecondaryunit&&(t="auto"!=this.m_secondaryaxissecondaryunit?this.m_util.getFormatterSymbol(this.m_secondaryaxissecondaryformatter,this.m_secondaryaxissecondaryunit):"auto"==this.m_secondaryaxissecondaryunit&&"Rupees"==this.m_secondaryaxisunit?getNumberFormattedSymbol(+this.rightAxisInfo.max,this.m_secondaryaxisunit):"K",this.ctx.font=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily),i=this.ctx.measureText(t).width),i},TimelineChart.prototype.setStartY=function(){var t=this.getChartMargin(),i=IsBoolean(this.m_enablehtmlformate.xaxis)?"<br>":"\\n",i=""!=this.m_xAxis.getDescription()?this.fontScaling(this.m_xAxis.getFontSize())*(3<this.m_xAxis.getDescription().split(i).length?2:this.m_xAxis.getDescription().split(i).length-1):0;this.m_startY=+this.m_y+ +this.m_height-t-this.getXAxisLabelMargin()-(this.getXAxisDescriptionMargin()+i)-this.getHorizontalLegendMargin()-(IsBoolean(this.m_showslider)?this.sliderMargin:0),!IsBoolean(this.getShowLegends())||IsBoolean(this.m_fixedlegend)||"horizontalBottomLeft"!=this.m_legendposition&&"horizontalBottomCenter"!=this.m_legendposition&&"horizontalBottomRight"!=this.m_legendposition||IsBoolean(this.scaleFlag)||(this.m_startY=this.m_startY-this.m_bottomFloatingLegendMargin*this.minWHRatio()),this.m_startY=IsBoolean(this.scaleFlag)?+this.m_y+ +this.m_height-4:this.m_startY},TimelineChart.prototype.getXAxisLabelMargin=function(){var t=1.5*this.fontScaling(this.m_xAxis.m_labelfontsize),i=this.m_xAxis.m_labelrotation*(Math.PI/180);if(IsBoolean(this.m_xAxis.getLabelTilted())){this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();for(var e=1,s=this.m_categoryData[0].length;e<s;e++){var a=Math.abs(this.ctx.measureText(this.m_categoryData[0][e]).width*i);t<a&&(t=a)}t>this.m_height/4&&(t=this.m_xAxis.getLabelrotation()<=70?this.m_height/4-15:this.m_height/4)}else{this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();var r=1.5*this.fontScaling(this.m_xAxis.m_labelfontsize);this.noOfRows=1,t=r*this.noOfRows}return t},TimelineChart.prototype.setNoOfRows=function(){this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+this.m_xAxis.m_labelfontfamily;this.ctx.measureText(this.m_categoryData[0][0]).width;for(var t=(this.getEndX()-this.getStartX())/this.m_categoryData[0].length,i=1,e=this.m_categoryData[0].length,s=1;s<e;s++)this.ctx.measureText(this.m_categoryData[0][s]).width>t&&(i=2);return i=IsBoolean(this.m_xAxis.getLabelTilted())?1:i},TimelineChart.prototype.getXAxisDescriptionMargin=function(){var t=2;return t=""!=this.m_xAxis.getDescription()?1.5*this.fontScaling(this.m_xAxis.getFontSize()):t},TimelineChart.prototype.setEndY=function(){this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()+ +this.getRangeSelectorMargin()+this.getMarginForTooltip(),!IsBoolean(this.getShowLegends())||IsBoolean(this.m_fixedlegend)||"horizontalTopLeft"!=this.m_legendposition&&"horizontalTopCenter"!=this.m_legendposition&&"horizontalTopRight"!=this.m_legendposition||IsBoolean(this.scaleFlag)||(this.m_endY=this.m_endY+this.m_topFloatingLegendMargin*this.minWHRatio())},TimelineChart.prototype.getMarginForTitle=function(){var t=IsBoolean(this.getShowGradient())||IsBoolean(this.m_showmaximizebutton)||IsBoolean(this.getTitle().m_showtitle)||IsBoolean(this.m_showsettingmenubutton)&&!IsBoolean(this.scaleFlag)?+this.getTitleBarHeight()+ +this.getTitleToSubtitleMargin():IsBoolean(this.scaleFlag)?4:this.m_topcurvemargin/2;return t},TimelineChart.prototype.getMarginForSubTitle=function(){return IsBoolean(this.m_subTitle.m_showsubtitle)?""!==this.m_subTitle.getDescription()?1.5*this.fontScaling(this.m_subTitle.getFontSize())+ +this.getSubttitleToChartMargin():+this.getSubttitleToChartMargin()+10:this.m_topcurvemargin/2},TimelineChart.prototype.getRangeSelectorMargin=function(){return IsBoolean(this.m_showrangeselector)&&IsBoolean(this.m_showslider)&&"timeseries"==this.m_charttype?this.rangedSelectorMargin:0},TimelineChart.prototype.getFieldNameValueMap=function(t){for(var i=new Object,e=this.getAllFieldsName().length,s=0;s<e;s++)i[this.getAllFieldsName()[s]]=this.getDataProvider()[t][this.getAllFieldsName()[s]];return i},TimeLineCalculation.prototype.init=function(t,i,e,s,a){this.m_chart=t,this.index=e,this.startX=this.m_chart.getStartX(),this.endX=this.m_chart.getEndX(),this.startY=this.m_chart.getStartY(),this.endY=this.m_chart.getEndY(),this.xAxisData=s[0],this.yAxisData=this.m_chart.getVisibleSeriesData(i).seriesData,this.calculateMinMaxCategory(s),this.seriesDataMap=a,this.leftAxisInfo=this.m_chart.leftAxisInfo,this.rightAxisInfo=this.m_chart.rightAxisInfo,this.totalColumn="stacked"==this.m_chart.m_columntype||"100%"==this.m_chart.m_columntype||"overlaid"==this.m_chart.m_columntype?1:this.getTotalColumn(this.seriesDataMap),this.setColumnWidthGap(),this.setXPositionTooltipArr(this.xAxisData),this.setYPositionArray(this.seriesDataMap),this.setXAnnotationPosition()},TimeLineCalculation.prototype.getTotalColumn=function(t){var i,e=0;for(i in t)for(var s in t[i])for(var a in t[i][s])"column"==s&&"contains"!=a&&"unique"!=a&&e++;return e},TimeLineCalculation.prototype.setColumnWidthGap=function(t,i){var e,s,a,r,o=this.endX-this.startX;"timeseries"!==this.m_chart.m_charttype?(r=o/this.xAxisData.length,this.minSliderIndex=0,this.maxSliderIndex=this.xAxisData.length-1):(e=new Date(this.maxDate).getTime(),e=isNaN(e)?.001:e,s=new Date(this.minDate).getTime(),r=o/(e-(s=isNaN(s)?0:s))*(a=this.getDataFrequencyInMS(this.xAxisData)),r=o/(e-s+a)*a,this.minSliderIndex=0,this.maxSliderIndex=parseInt(o/r)),this.onePartWidth=isNaN(r)?o:r,"auto"!=this.m_chart.m_controlbarwidth&&this.m_chart.m_controlbarwidth<this.onePartWidth?(this.columnWidth=this.m_chart.m_controlbarwidth,this.columnGap=(this.onePartWidth-this.m_chart.m_controlbarwidth)/2):(this.columnWidth=this.onePartWidth*this.m_chart.m_barwidth/100,this.columnGap=this.onePartWidth*((100-this.m_chart.m_barwidth)/2)/100)},TimeLineCalculation.prototype.getDataFrequencyInMS=function(t){for(var i,e=new Date(isNaN(t[0])?t[0]:+t[0]),s=new Date(isNaN(t[1])?t[1]:+t[1]),a=Math.abs(Math.floor(e.getTime()-s.getTime())),r=t.length,o=0;o<r;o++)1<=o&&(e=new Date(isNaN(t[o-1])?t[o-1]:+t[o-1]),s=new Date(isNaN(t[o])?t[o]:+t[o]),a=(i=Math.abs(Math.floor(e.getTime()-s.getTime())))<(a=0===a&&0!==i?i:a)&&0!=i?i:a);return a/864e5==28||a/864e5==29?2592e6:a},TimeLineCalculation.prototype.setYPositionArray=function(t){var i,e=0;for(i in this.overlaidColWidth={left:{column:[]},right:{column:[]}},t){var s,a=1,r="",o="";for(s in t[i]){var n,h,m=[];for(n in t[i][s])"unique"!=n&&"contains"!=n&&("column"==s&&("overlaid"==this.m_chart.m_columntype?(r=""!=r?50*r/100:this.columnWidth,this.m_chart.columnGapeMap[n]=""!==o?+o+r/2:0,o=this.m_chart.columnGapeMap[n],this.columnWidthMap[n]=r,m.push({name:n,value:r}),a++):this.columnWidthMap[n]=this.columnWidth/a,e++,this.heightMap[n]=this.getHeightArr(i,t[i][s][n])),h=this.getYPositionArr(i,s,t[i][s][n],n,t),null==this.yPositionMap[n]&&null!=h&&(this.yPositionMap[n]=h),this.xPositionMap[n]=this.getXPositionArr(i,s,e,this.xAxisData,n));if("column"==s&&"overlaid"==this.m_chart.m_columntype){for(var m=m.reverse(),l=[],c=0;c<m.length;c++)l.push(m[c].name);this.overlaidColWidth[i][s]=m=l}}}},TimeLineCalculation.prototype.getYPositionArr=function(t,i,e,s,a){var r="left"==t?this.leftAxisInfo:this.rightAxisInfo,o=(+this.startY-+this.endY)/(r.max-r.min),o=IsBoolean(this.m_chart.scaleFlag)?(+this.startY-+(this.endY+1))/(r.max-r.min):o,n=r.min,r=r.max;if("fanchart"===this.m_chart.m_charttype&&"none"!==this.m_chart.m_fanSeriesType[s]){if("result"===this.m_chart.m_fanSeriesType[s]||"max"===this.m_chart.m_fanSeriesType[s]){for(var h=[],m=e.length,l=0;l<m;l++)""===e[l]||isNaN(e[l])||null==e[l]||"NIL"==e[l]?h[l]="":h[l]=this.startY-o*(e[l]-n);return h}}else if("stacked"!=this.m_chart.m_columntype&&"100%"!=this.m_chart.m_columntype||"column"!=i){for(h=[],m=e.length,l=0;l<m;l++)""===e[l]||isNaN(e[l])||null==e[l]||"NIL"==e[l]?h[l]="":"column"==i&&e[l]<0?h[l]=this.startY-(o*(e[l]-n)-o*e[l]):h[l]=this.startY-o*(e[l]-n);return h}this.getyPixelArrayForStacked(t,i,s,a,o,n,r)},TimeLineCalculation.prototype.getyPixelArrayForStacked=function(t,i,e,s,a,r,o){var n,h=[],m=[];for(n in s[t][i])"unique"==n||"contains"==n||"fanchart"===this.m_chart.m_charttype&&"fan"!==this.m_chart.m_fanSeriesType[n]&&"min"!==this.m_chart.m_fanSeriesType[n]||(m.push(n),h.push(s[t][i][n]));for(var l=[],c=[],_=[],d=h.length,g=0;g<d;g++){l[g]=[],c[g]=[],_[g]=[];for(var p=h[g].length,u=0;u<p;u++)isNaN(h[g][u])&&(h[g][u]=""),0==g?0<=+h[g][u]?(l[g][u]=0<+o?this.m_chart.getStartY()+a*r-a*h[g][u]:this.m_chart.getStartY()-a*h[g][u]+a*r,c[g][u]=l[g][u],_[g][u]=+this.m_chart.getStartY()+a*r):(l[g][u]=this.m_chart.getStartY()+a*r,_[g][u]=l[g][u]-a*h[g][u],c[g][u]=+this.m_chart.getStartY()+a*r):0<=h[g][u]?(c[g][u]=c[g-1][u],_[g][u]=_[g-1][u],l[g][u]=c[g][u]-a*h[g][u],c[g][u]=+l[g][u]):(_[g][u]=_[g-1][u],c[g][u]=c[g-1][u],l[g][u]=+_[g][u],_[g][u]=+l[g][u]-a*h[g][u]);null==this.yPositionMap[m[g]]&&(this.yPositionMap[m[g]]=l[g])}},TimeLineCalculation.prototype.getXAxisPixel=function(t){var i,e;return"timeseries"==this.m_chart.m_charttype?(i=new Date(this.maxDate).getTime(),i=isNaN(i)?.001:i,e=new Date(this.minDate).getTime(),e=isNaN(e)?0:e,(this.endX-this.startX-this.onePartWidth)/(i-e)):(this.endX-this.startX)/(this.xAxisData.length-1)},TimeLineCalculation.prototype.setXPositionTooltipArr=function(t){this.xPositionTooltipArray=[];for(var i,e,s=t.length,a=0;a<s;a++)"timeseries"==this.m_chart.m_charttype?1==t.length?this.xPositionTooltipArray[a]=+this.startX+this.onePartWidth/2:(i=new Date(this.minDate).getTime(),i=isNaN(i)?0:i,e=new Date(t[a]).getTime(),e=isNaN(e)?0:e,this.xPositionTooltipArray[a]=+this.startX+(e-i)*this.getXAxisPixel()+this.onePartWidth/2):this.xPositionTooltipArray[a]=+this.startX+(this.onePartWidth*a+this.onePartWidth/2)},TimeLineCalculation.prototype.setXAxisAnnotationOnePart=function(){this.onePartAnnotationWidth=this.endX-this.startX},TimeLineCalculation.prototype.setXAnnotationPosition=function(){this.xannotationPosArray=[];for(var t=0,i=this.xAxisData.length;t<i;t++)1==this.xAxisData.length?this.xannotationPosArray[t]=+this.startX+(this.endX-this.startX)/2:(this.xannotationPosArray[t]=+this.startX+(this.onePartWidth*t+this.onePartWidth/2),t,this.startX,this.onePartWidth,this.onePartWidth)},TimeLineCalculation.prototype.getXPositionArr=function(t,i,e,s,a){e="stacked"==this.m_chart.m_columntype||"100%"==this.m_chart.m_columntype||"overlaid"==this.m_chart.m_columntype?1:e;for(var r,o,n=[],h=this.columnWidth/this.totalColumn*(1-this.m_chart.clusteredbarpadding)/2,m=s.length,l=0;l<m;l++)"timeseries"==this.m_chart.m_charttype?1==s.length?"line"==i?n[l]=+this.startX+this.onePartWidth/2:"overlaid"==this.m_chart.m_columntype?n[l]=+this.startX+this.columnGap*(2*l+1)+this.columnWidth*l+(this.columnWidth/this.totalColumn*(e-1)+this.m_chart.columnGapeMap[a]):"clustered"==this.m_chart.m_columntype?n[l]=+this.startX+ +this.columnGap+this.columnWidth/this.totalColumn*(e-1)+h:n[l]=+this.startX+ +this.columnGap+this.columnWidth/this.totalColumn*(e-1):""!=s[l]&&(r=new Date(this.minDate).getTime(),r=isNaN(r)?0:r,o=new Date(s[l]).getTime(),o=isNaN(o)?0:o,"line"==i?n[l]=+this.startX+(o-r)*this.getXAxisPixel()+this.onePartWidth/2:"overlaid"==this.m_chart.m_columntype?n[l]=+this.startX+(o-r)*this.getXAxisPixel()+ +this.columnGap+(this.columnWidth/this.totalColumn*(e-1)+this.m_chart.columnGapeMap[a]):"clustered"==this.m_chart.m_columntype?n[l]=+this.startX+(o-r)*this.getXAxisPixel()+ +this.columnGap+this.columnWidth/this.totalColumn*(e-1)+h:n[l]=+this.startX+(o-r)*this.getXAxisPixel()+ +this.columnGap+this.columnWidth/this.totalColumn*(e-1)):"line"==i?n[l]=+this.startX+(this.onePartWidth*l+this.onePartWidth/2):"overlaid"==this.m_chart.m_columntype?n[l]=+this.startX+this.columnGap*(2*l+1)+this.columnWidth*l+(this.columnWidth/this.totalColumn*(e-1)+this.m_chart.columnGapeMap[a]):"clustered"==this.m_chart.m_columntype?n[l]=+this.startX+this.columnGap*(2*l+1)+this.columnWidth*l+this.columnWidth/this.totalColumn*(e-1)+h:n[l]=+this.startX+this.columnGap*(2*l+1)+this.columnWidth*l+this.columnWidth/this.totalColumn*(e-1);return n},TimeLineCalculation.prototype.getHeightArr=function(t,i){for(var e,t="left"==t?this.leftAxisInfo:this.rightAxisInfo,s=(+this.startY-+this.endY)/(t.max-t.min),s=IsBoolean(this.m_chart.scaleFlag)?(+this.startY-+(this.endY+1))/(t.max-t.min):s,a=(t.min,[]),r=i.length,o=0;o<r;o++)""===i[o]||isNaN(i[o])||null==i[o]||"NIL"==i[o]?a[o]="":(e=i[o],a[o]=Math.abs(s*e));return a},TimeLineCalculation.prototype.getYPositionArray=function(t){return this.yPositionMap[t]},TimeLineCalculation.prototype.getXPositionArray=function(t){return this.xPositionMap[t]},TimeLineCalculation.prototype.getHeightArray=function(t){return this.heightMap[t]},TimeLineCalculation.prototype.getxPositionTooltipArray=function(){return this.xPositionTooltipArray},TimeLineCalculation.prototype.getYAxisText=function(){return this.leftAxisInfo.markertext},TimeLineCalculation.prototype.getYAxisMarkersArray=function(){return this.leftAxisInfo.markerarray},TimeLineCalculation.prototype.findClosestNumber=function(t,i){for(var e=t[0],s=0,a=new Date(t[0].toString()).getFullYear(),r=Math.abs(a-i),o=1;o<t.length;o++){var n=Math.abs(t[o]-i);n<r&&(r=n,e=t[o],s=o)}return{closest:e,closestIndex:s}},TimeLineCalculation.prototype.checkIndexOfData=function(t){for(var i=-1,e=this.m_chart.m_lineCalculation.xAxisData,s=0;s<e.length;s++)this.m_chart.getMonthYear(e[s].toString()).year==t&&(i=s);return i},TimeLineCalculation.prototype.calculateMinMaxCategory=function(t){for(var i=[],e=0;e<t.length;e++)for(var s=t[e].length,a=0;a<s;a++)""!=t[e][a]&&i.push(new Date(t[e][a]));this.maxDate=new Date(Math.max.apply(null,i)),this.minDate=new Date(Math.min.apply(null,i))},TimeLineCalculation.prototype.getXAxisMarkersArray=function(){return"timeseries"==this.m_chart.m_charttype?this.setXAxisMarkerForTimeLine():this.setXAxisMarkerforAdvanceLine(),this.m_xAxisMarkersArray},TimeLineCalculation.prototype.setXAxisMarkerforAdvanceLine=function(){for(var t=1,i=("auto"!=this.m_chart.m_xAxis.m_xaxismarkers||IsBoolean(this.m_chart.m_fixedrange)&&!IsBoolean(this.m_chart.m_designMode)||10<this.xAxisData.length&&(t=Math.ceil(this.xAxisData.length/10)),this.m_xAxisMarkersArray=[],this.xPositionForMarker=[],this.xAxisData.length),e=0;e<i;){var s=+this.startX+(this.onePartWidth*e+this.onePartWidth/2);this.m_xAxisMarkersArray.push(this.xAxisData[e]),this.xPositionForMarker.push(s),e=+e+t}},TimeLineCalculation.prototype.getXAxisPositionForMarkers=function(){return this.xPositionForMarker},TimeLineCalculation.prototype.setXAxisMarkerForTimeLine=function(){if(1==this.xAxisData.length)this.m_xAxisMarkersArray=[],this.xPositionForMarker=[],this.m_xAxisMarkersArray[0]=this.xAxisData[0],this.xPositionForMarker[0]=+this.startX+(this.endX-this.startX)/2;else{this.dataFrequency=1<this.xAxisData.length?this.getDataFrequency(this.xAxisData):"year";for(var t=this.getDateData(),i=this.getTimeLineMarkerFormateAndStep(t),t=new Date(this.xAxisData[0]).getTime(),e=this.xAxisData.length,s=this.xAxisData[e-1],a=e-1;0<a;a--)if(""!=this.xAxisData[a]){s=this.xAxisData[a];break}for(var s=new Date(s).getTime(),r=[],o=[],a=t;a<=s;){var n,h=this.getFormattedDateTime(a,i.formate,i.step);""!=h.textData&&(r.push(h.textData),n=new Date(this.minDate).getTime(),n=isNaN(n)?0:n,o.push(+this.startX+(a-n)*this.getXAxisPixel()+this.onePartWidth/2)),a=h.index}this.m_xAxisMarkersArray=r,this.xPositionForMarker=o}},TimeLineCalculation.prototype.getDateData=function(){this.xAxisData.length;for(var t=new Date(isNaN(this.xAxisData[0])?this.xAxisData[0]:+this.xAxisData[0]),i=this.xAxisData.length,e=i-1,s=i-1;0<s;s--)if(""!=this.xAxisData[s]){e=s;break}i=(new Date(isNaN(this.xAxisData[e])?this.xAxisData[e]:+this.xAxisData[e]).getTime()-t.getTime())/864e5;return Math.floor(1<i?i:1)},TimeLineCalculation.prototype.getDataFrequency=function(t){for(var i,e=new Date(isNaN(t[0])?t[0]:+t[0]),s=new Date(isNaN(t[1])?t[1]:+t[1]),a=Math.abs(Math.floor(e.getTime()-s.getTime())),r=t.length,o=0;o<r;o++)1<=o&&(e=new Date(isNaN(t[o-1])?t[o-1]:+t[o-1]),s=new Date(isNaN(t[o])?t[o]:+t[o]),a=(i=Math.abs(Math.floor(e.getTime()-s.getTime())))<(a=0===a&&0!==i?i:a)&&0!=i?i:a);a=0==a?.001:a;var n=Math.floor(a/864e5),h=Math.floor(n/28),m=Math.floor(h/12),l=Math.floor(a/36e5),c=a/6e4-60*l;return 0<m?"year":0<h?"month":0<n?"day":0<l?"hour":0<c?"minute":void 0},TimeLineCalculation.prototype.getTimeLineMarkerFormateAndStep=function(t){return"minute"==this.dataFrequency?this.getFormateAndStepsforMin(t):"hour"==this.dataFrequency?this.getFormateAndStepsforHour(t):"day"==this.dataFrequency?this.getFormateAndStepsforDay(t):"month"==this.dataFrequency?this.getFormateAndStepsforMonth(t):"year"==this.dataFrequency?this.getFormateAndStepsforYear(t):void 0},TimeLineCalculation.prototype.getFormateAndStepsforYear=function(t){return t<2920?{formate:"year",step:1}:2920<=t&&t<5840?{formate:"year",step:2}:5840<=t&&t<14600?{formate:"year",step:5}:14600<=t&&t<29200?{formate:"year",step:10}:{formate:"year",step:25}},TimeLineCalculation.prototype.getFormateAndStepsforMonth=function(t){return t<240?{formate:"month",step:1}:240<=t&&t<365?{formate:"month",step:2}:365<=t&&t<730?{formate:"month",step:3}:730<=t&&t<1460?{formate:"month",step:6}:1460<=t&&t<2920?{formate:"year",step:1}:2920<=t&&t<5840?{formate:"year",step:2}:5840<=t&&t<14600?{formate:"year",step:5}:14600<=t&&t<43800?{formate:"year",step:10}:{formate:"year",step:25}},TimeLineCalculation.prototype.getFormateAndStepsforDay=function(t){return t<10?{formate:"day",step:1}:10<=t&&t<20?{formate:"day",step:2}:20<=t&&t<28?{formate:"day",step:3}:28<=t&&t<70?{formate:"day",step:7}:70<=t&&t<140?{formate:"day",step:14}:140<=t&&t<280?{formate:"month",step:1}:280<=t&&t<365?{formate:"month",step:2}:365<=t&&t<730?{formate:"month",step:3}:730<=t&&t<1460?{formate:"month",step:6}:1460<=t&&t<2920?{formate:"year",step:1}:{formate:"year",step:4}},TimeLineCalculation.prototype.getFormateAndStepsforMin=function(t){return t<1?{formate:"hour",step:3}:1<=t&&t<2?{formate:"hour",step:8}:2<=t&&t<4?{formate:"hour",step:12}:t<28?{formate:"day",step:20<t?3:7<t?2:1}:28<=t&&t<70?{formate:"day",step:7}:70<=t&&t<140?{formate:"day",step:14}:140<=t&&t<280?{formate:"month",step:1}:280<=t&&t<365?{formate:"month",step:2}:365<=t&&t<730?{formate:"month",step:3}:730<=t&&t<1460?{formate:"month",step:6}:1460<=t&&t<2920?{formate:"year",step:1}:{formate:"year",step:4}},TimeLineCalculation.prototype.getFormateAndStepsforHour=function(t){return t<1?{formate:"hour",step:3}:1<=t&&t<2?{formate:"hour",step:8}:2<=t&&t<4?{formate:"hour",step:12}:t<28?{formate:"day",step:20<t?3:7<t?2:1}:28<=t&&t<70?{formate:"day",step:7}:70<=t&&t<140?{formate:"day",step:14}:140<=t&&t<280?{formate:"month",step:1}:280<=t&&t<365?{formate:"month",step:2}:365<=t&&t<730?{formate:"month",step:3}:730<=t&&t<1460?{formate:"month",step:6}:1460<=t&&t<2920?{formate:"year",step:1}:{formate:"year",step:5}},TimeLineCalculation.prototype.getNextMonthIndex=function(t,i,e){for(var s=t.getMonth()+1,a=t.getFullYear(),r=1;r<=e;r++){var o=new Date(a,s,0).getDate();s++,i+=864e5*o}return i},TimeLineCalculation.prototype.getNextYearIndex=function(t,i,e){for(var s=0;s<e;s++)i=+i+864e5*(IsBoolean(isLeapYear(+t+ +s))?366:365);return i},TimeLineCalculation.prototype.getFormattedDateTime=function(t,i,e){var s,a,r,o=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=new Date(isNaN(t)?t:+t);return"hour"!=i||"hour"!=this.dataFrequency&&"minute"!=this.dataFrequency?"day"!=i||"day"!=this.dataFrequency&&"hour"!=this.dataFrequency&&"minute"!=this.dataFrequency?"month"!=i||"day"!=this.dataFrequency&&"hour"!=this.dataFrequency&&"month"!=this.dataFrequency&&"minute"!=this.dataFrequency?(a=864e5,i=(n=new Date(+t)).getMonth()+1,s=n.getFullYear(),s=new Date(s,i,0).getDate(),n.getMonth()+1==1?{textData:r=n.getFullYear(),index:this.getNextYearIndex(r,t,e)}:{textData:"",index:+t+s*a}):(a=864e5,1==(n=new Date(+t)).getDate()?{textData:r=o[n.getMonth()+1]+' "'+(""+n.getFullYear()).substring(2,4),index:this.getNextMonthIndex(n,t,e)}:{textData:"",index:+t+a}):(a=864e5,{textData:r=(n=new Date(+t)).getDate()+". "+o[n.getMonth()+1],index:+t+e*a}):{textData:r=(n=new Date(+t)).getDate()+". "+o[n.getMonth()+1]+" "+n.getHours()+":00",index:+t+36e5*e}},TimeLineColumns.prototype.init=function(t,i,e,s,a,r,o,n,h,m){this.m_xPixel=i,this.m_yPixelArray=e,this.m_stackWidth="clustered"==r.m_columntype?a*r.clusteredbarpadding:a,this.m_stackHeightArray=s,this.m_stackColorArray=t,this.m_stackOpacityArray=m,this.m_chart=r,this.m_transparency=o;var l=this.m_yPixelArray.length;this.m_ySeriesData=n,this.m_valueOnDataPoints=IsBoolean(h);for(var c=0;c<l;c++)this.m_svgStackArray[c]=new TimeLineStack,this.m_yPixelArray[c]>=this.m_chart.getStartY()||""===this.m_yPixelArray?this.m_stackHeightArray[c]=0:this.m_yPixelArray[c]<this.m_chart.getEndY()?(this.m_stackHeightArray[c]=this.m_stackHeightArray[c]-(this.m_chart.getEndY()-this.m_yPixelArray[c]),this.m_yPixelArray[c]=this.m_chart.getEndY()):+this.m_yPixelArray[c]+ +this.m_stackHeightArray[c]>this.m_chart.getStartY()&&(this.m_stackHeightArray[c]=this.m_chart.getStartY()-this.m_yPixelArray[c]),+this.m_yPixelArray[c]+this.m_stackHeightArray[c]>this.m_chart.getStartY()&&(this.m_stackHeightArray[c]=this.m_chart.getStartY()-this.m_yPixelArray[c]),this.m_stackHeightArray[c]=this.m_stackHeightArray[c]<0?0:this.m_stackHeightArray[c],this.m_svgStackArray[c].init(this.m_xPixel[c],this.m_yPixelArray[c],this.m_stackWidth,this.m_stackHeightArray[c],this.m_stackColorArray[c],this.m_chart,this.m_transparency,this.m_ySeriesData[c],this.m_valueOnDataPoints,this.m_stackOpacityArray)},TimeLineColumns.prototype.drawColumns=function(t){var i=this.m_yPixelArray.length;IsBoolean(this.m_chart.m_stackhoverstyle)&&IsBoolean(!this.m_chart.scaleFlag)&&this.createStackPattern();for(var e=0;e<i;e++)this.isInRange(e)||null!=this.m_chart.m_afterslider&&0!=this.m_chart.m_afterslider?IsBoolean(this.m_chart.m_afterslider)&&this.m_svgStackArray[e].drawSVGStack(this.m_chart.m_sliderindexes[t][e],t):this.m_svgStackArray[e].drawSVGStack(e,t)},TimeLineColumns.prototype.isInRange=function(t){return this.m_yPixelArray[t]>=this.m_chart.getStartY()&&this.m_yPixelArray[t]<=this.m_chart.getEndY()},TimeLineColumns.prototype.createStackPattern=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","defs"),i=document.createElementNS(NS,"pattern"),e=(i.setAttribute("id","pattern-stripe"),i.setAttribute("width","6"),i.setAttribute("height","4"),i.setAttribute("patternUnits","userSpaceOnUse"),i.setAttribute("patternTransform","rotate(45)"),document.createElementNS(NS,"rect")),e=(e.setAttribute("width","3"),e.setAttribute("height","4"),e.setAttribute("fill","#FFFFFF"),i.appendChild(e),document.createElementNS(NS,"mask")),s=(e.setAttribute("id","mask-stripe"+this.m_chart.svgContainerId),document.createElementNS(NS,"rect"));s.setAttribute("id","mask-stripeRect"+this.m_chart.svgContainerId),s.setAttribute("x",0),s.setAttribute("y",0),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("fill","url(#pattern-stripe)"),e.appendChild(s),t.appendChild(i),t.appendChild(e),$("#"+this.m_chart.svgContainerId).append(t)},TimeLineStack.prototype.init=function(t,i,e,s,a,r,o,n,h,m){this.m_stackXPixel=t,this.m_stackYPixel=i,this.m_stackWidth=e,this.m_stackHeight=s,this.m_stackColor=a,this.m_stackOpacity=m,this.m_chart=r,this.m_transparency=o,this.m_ySeriesData=n,this.m_valueOnDataPoints=h},TimeLineStack.prototype.drawSVGStack=function(t,i){var e,s,a=this,r=a.m_chart.scaleFlag?"stackgrpslider"+i+a.m_chart.m_objectid:"stackgrp"+i+a.m_chart.m_objectid,o=(this.m_stackYPixel>=a.m_chart.getStartY()||""===this.m_stackYPixel?this.m_stackHeight=0:this.m_stackYPixel<a.m_chart.getEndY()?(this.m_stackHeight=this.m_stackHeight-(a.m_chart.getEndY()-this.m_stackYPixel),this.m_stackYPixel=a.m_chart.getEndY()):+this.m_stackYPixel+ +this.m_stackHeight>a.m_chart.getStartY()&&(this.m_stackHeight=a.m_chart.getStartY()-this.m_stackYPixel),+this.m_stackYPixel+this.m_stackHeight>a.m_chart.getStartY()&&(this.m_stackHeight=a.m_chart.getStartY()-this.m_stackYPixel),this.m_stackHeight),n=(this.m_stackHeight=this.m_stackHeight-(this.m_stackHeight>2*this.m_chart.m_stackborderwidth?+this.m_chart.m_stackborderwidth:0),this.m_stackHeight=this.m_stackHeight<0?0:this.m_stackHeight,this.m_chart.m_seriesNames[i]),n=this.m_chart.m_lineCalculation.columnWidthMap[n],n=(this.m_stackWidth="overlaid"==this.m_chart.m_columntype?n:this.m_stackWidth,this.m_stackWidth);this.m_stackWidth=this.m_stackWidth-(this.m_stackWidth>2*this.m_chart.m_stackborderwidth?+this.m_chart.m_stackborderwidth:0),this.m_stackWidth=this.m_stackWidth<0?0:this.m_stackWidth,this.m_stackYPixel=o>2*this.m_chart.m_stackborderwidth&&n>2*this.m_chart.m_stackborderwidth?this.m_stackYPixel+.5*this.m_chart.m_stackborderwidth:this.m_stackYPixel,""+this.m_stackYPixel!="NaN"&&""!==this.m_stackHeight&&""!==this.m_stackColor&&("path"===a.m_chart.m_stacksvgtype?this.drawSVGPathStack(this,r,t,i,o):(e=drawSVGRect(this.m_stackXPixel,this.m_stackYPixel,this.m_stackWidth,this.m_stackHeight,hex2rgb(this.m_stackColor,this.m_transparency)),$(e).attr("id","svgStack"+a.m_chart.svgContainerId+i+t),o>2*this.m_chart.m_stackborderwidth&&n>2*this.m_chart.m_stackborderwidth&&($(e).attr("stroke",hex2rgb(this.m_chart.m_stackbordercolor)),$(e).attr("stroke-width",this.m_chart.m_stackborderwidth),$(e).attr("stroke-opacity","1"),$(e).attr("rx",this.m_chart.m_stackborderradius),$(e).attr("ry",this.m_chart.m_stackborderradius),IsBoolean(this.m_chart.m_enablestackshadow))&&!IsBoolean(this.m_chart.isPropertyBrowserCompatible())&&2<this.m_stackHeight&&2<this.m_stackWidth&&($(e).attr("filter","url(#stackShadow"+a.m_chart.m_objectid+")"),e.setAttribute("shape-rendering","crispEdges")),o=!!document.documentMode,IsBoolean(this.m_chart.m_enableanimation)&&IsBoolean(!this.m_chart.scaleFlag)&&0<this.m_chart.m_stackAnimationDuration&&!o&&(n=drawSVGStackAnimation(0,"height",this.m_stackHeight,this.m_chart.m_stackAnimationDuration),s=drawSVGStackAnimation(this.m_stackHeight+this.m_stackYPixel,"y",this.m_stackYPixel,this.m_chart.m_stackAnimationDuration),$(e).append(n),0<a.m_ySeriesData)&&$(e).append(s),IsBoolean(this.m_chart.m_stackhoverstyle)&&IsBoolean(!this.m_chart.scaleFlag)&&!o?(n=drawSVGRect(0,0,0,0,"none"),$(n).attr("id","overly-svgStack"+a.m_chart.svgContainerId+i+t),$(n).attr("rx",this.m_chart.m_stackborderradius),$(n).attr("ry",this.m_chart.m_stackborderradius),e.addEventListener("mouseover",function(t){$("#overly-"+this.id).attr("x",a.m_stackXPixel),$("#overly-"+this.id).attr("y",a.m_stackYPixel),$("#overly-"+this.id).attr("width",a.m_stackWidth),$("#overly-"+this.id).attr("height",a.m_stackHeight),$("#overly-"+this.id).attr("fill",hex2rgb(a.m_stackColor,a.m_transparency)),$(this).attr("fill",hex2rgb(a.m_chart.m_stackstripecolor,"1")),$(this).attr("mask","url(#mask-stripe"+a.m_chart.svgContainerId+")")}),e.addEventListener("mouseout",function(){$(this).attr("mask",""),$(this).attr("fill",hex2rgb(a.m_stackColor,a.m_transparency)),$("#overly-"+this.id).attr("x","0"),$("#overly-"+this.id).attr("y","0"),$("#overly-"+this.id).attr("width","0"),$("#overly-"+this.id).attr("height","0"),$("#overly-"+this.id).attr("fill","none")}),$("#"+r).append(n)):$(e).attr("class","timeSeries-stackHighlighter"),$("#"+r).append(e)))},TimeLineStack.prototype.drawSVGPathStack=function(n,t,h,i,e){var s,a,r,o,m,l=this.getStackPathString(n,n.m_stackXPixel,n.m_stackYPixel,n.m_stackWidth,n.m_stackHeight,e);""!=l&&0<Math.abs(n.m_stackHeight)&&(s=document.createElementNS("http://www.w3.org/2000/svg","g"),IsBoolean(n.m_chart.scaleFlag)?s.setAttribute("id","topRoundedStack_stackgrpslider"+n.m_chart.svgContainerId+i+h):s.setAttribute("id","topRoundedStack"+n.m_chart.svgContainerId+i+h),a=document.createElementNS("http://www.w3.org/2000/svg","g"),(r=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",l),r.setAttribute("fill-opacity",n.m_stackOpacity),o=!!document.documentMode,IsBoolean(n.m_chart.m_enableanimation)&&IsBoolean(!n.m_chart.scaleFlag)&&0<n.m_chart.m_stackAnimationDuration&&!o&&(r.setAttribute("class","timeline-rounded-stack"),m=0<+n.m_ySeriesData?n.m_stackYPixel+n.m_stackHeight:n.m_stackYPixel,r.setAttribute("style","animation: timeline-rounded-stack "+n.m_chart.m_stackAnimationDuration+"s linear forwards; transform-origin:center "+m+"px;")),e>2*n.m_chart.m_stackborderwidth?($(s).attr("stroke",n.m_chart.m_stackbordercolor),$(s).attr("stroke-width",n.m_chart.m_stackborderwidth)):($(s).attr("stroke",n.m_chart.m_stackbordercolor),$(s).attr("stroke-width",0)),$(s).attr("fill",hex2rgb(n.m_stackColor,n.m_transparency)),$(a).append(r),$(s).append(a),void 0!==this.m_chart.m_drillcomptoggle&&void 0!==this.m_chart.m_slidercatarr&&0!==this.m_chart.m_slidercatarr.length&&(IsBoolean(!this.m_chart.m_drillcomptoggle)&&IsBoolean(this.m_chart.m_slidercatarr.includes(h))||this.m_chart.m_slidercatarr.length==this.m_chart.SerData[0].length?$(s).attr("opacity","1"):$(s).attr("opacity","0.5")),IsBoolean(!n.m_chart.scaleFlag)&&s.addEventListener("click",function(t){this.id;for(var i=h,e=0;e<n.m_chart.m_seriesData.length;e++)for(var s,a,r=n.m_chart.m_allSeriesNames[e],o=0;o<n.m_chart.SerData[0].length;o++)IsBoolean(n.m_chart.enableDrillHighlighter)&&(void 0!==n.m_chart.m_columnSeries[r]?(a="topRoundedStack"+n.m_chart.svgContainerId+e+o,s="topRoundedStack_stackgrpslider"+n.m_chart.svgContainerId+e+o):a="linestack"+n.m_chart.svgContainerId+e+o,i==o?($("#"+a).css("opacity","1"),$("#"+s).css("opacity","1")):($("#"+a).css("opacity","0.5"),$("#"+s).css("opacity","0.5")))}),IsBoolean(n.m_chart.m_stackhoverstyle)&&IsBoolean(!this.m_chart.scaleFlag)&&!o?((m=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id","overlyGrp-topRoundedStack"+n.m_chart.svgContainerId+i+h),(e=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",l),e.setAttribute("fill","none"),$(m).append(e),$("#"+t).append(m),s.addEventListener("mouseover",function(t){$("#overlyGrp-"+this.id).find("path").attr("fill",hex2rgb(n.m_stackColor,n.m_transparency)),$(this).attr("fill",""),$(this).attr("fill",hex2rgb(n.m_chart.m_stackstripecolor,"1")),$(this).attr("mask","url(#mask-stripe"+n.m_chart.svgContainerId+")")}),s.addEventListener("mouseout",function(){$(this).attr("mask",""),$(this).attr("fill",hex2rgb(n.m_stackColor,n.m_transparency)),$("#overlyGrp-"+this.id).find("path").attr("fill","none")})):$(a).attr("class","timeSeries-stackHighlighter"),$("#"+t).append(s))},TimeLineStack.prototype.getStackPathString=function(t,i,e,s,a,r){var o=" ",r=r>+t.m_chart.m_stackborderradius?+t.m_chart.m_stackborderradius:0;return 0<+t.m_ySeriesData?"M "+i+o+(e+r)+o+"v"+o+(a-r)+o+"h"+o+s+o+"v"+o+(r-a)+o+"a"+o+r+o+-r+o+0+o+0+o+0+o+-r+o+-r+o+"h"+o+-(s-2*r)+o+"a"+o+r+o+r+o+0+o+0+o+0+o+-r+o+r+o:"M "+i+o+e+o+"v"+o+(a-r)+o+"a"+o+r+o+r+o+0+o+0+o+0+o+r+o+r+o+"h"+o+(s-2*r)+o+"a"+o+r+o+r+o+0+o+0+o+0+o+r+o+-r+o+"v"+o+(r-a)+o+"z"},SVGLineSeries.prototype.init=function(t,i,e,s,a,r,o,n,h,m){this.m_chart=a,this.seriesName=o,this.ctx=this.m_chart.ctx,this.color=t,this.width=s,this.xPositionArray=i,this.yPositionArray=e,this.plotTrasparency=r,this.fillTrasparency=m,this.lineWidth=n,this.lineType=h;a="left"==this.m_chart.getSeriesInfo(this.seriesName).axis?this.m_chart.leftAxisInfo:this.m_chart.rightAxisInfo;this.basePoint=this.getBasePoint(a)},SVGLineSeries.prototype.getBasePoint=function(t){t=t.min<0&&t.max<0?this.m_chart.getEndY():t.min<0&&0<t.max?this.m_chart.getStartY()-Math.abs((this.m_chart.getStartY()-this.m_chart.getEndY())/(t.max-t.min)*t.min):this.m_chart.getStartY();return t},SVGLineSeries.prototype.drawLineSeries=function(t){"curve"==this.m_chart.m_lineform&&this.xPositionArray.length<500?IsBoolean(this.m_chart.m_fillarea)&&this.m_chart.getSeriesFillAreaMap()[this.m_chart.getSeriesNames()[t]]?this.drawSplinesArea(t):this.drawSplines(t):IsBoolean(this.m_chart.m_fillarea)&&this.m_chart.getSeriesFillAreaMap()[this.m_chart.getSeriesNames()[t]]?this.drawSegmentArea(t):this.drawSegmentLines(t)},SVGLineSeries.prototype.drawFanChartSeries=function(t){var i="result"!=this.m_chart.m_fanSeriesType[this.seriesName]&&"max"!=this.m_chart.m_fanSeriesType[this.seriesName];IsBoolean(this.m_chart.m_fillarea)&&i&&"none"!==this.m_chart.m_fanSeriesType[this.seriesName]?this.drawFanChartSegmentArea(t):this.drawSegmentLines(t)},SVGLineSeries.prototype.drawSplinesArea=function(t){for(var i,e,s=this,a=this.computeControlPoints(this.xPositionArray),r=this.computeControlPoints(this.yPositionArray),t=s.m_chart.scaleFlag?"#linegrpslider"+t+s.m_chart.m_objectid:"#linestackgrp"+t+s.m_chart.m_objectid,o=(this.clipFillArea(),""),n=a.p1.length,h=0;h<n;h++){var m=this.createBezierPathArea(this.xPositionArray[h],this.yPositionArray[h],a.p1[h],r.p1[h],a.p2[h],r.p2[h],this.xPositionArray[h+1],this.yPositionArray[h+1],h,this.basePoint,a.p1.length-1);null!=m&&(o+=m)}null==o&&""==o||(i=this.getLineDashArray(this.lineType,this.lineWidth),(e=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",o),e.setAttribute("clip-path","url(#clipPath"+s.m_chart.m_objectid+")"),e.setAttribute("stroke-dasharray",i),e.setAttribute("style","stroke:"+s.color[0]+"; stroke-width:"+s.lineWidth+";fill:"+hex2rgb(s.color[0],this.fillTrasparency)+";"),$(t).append(e))},SVGLineSeries.prototype.createBezierPathArea=function(t,i,e,s,a,r,o,n,h,m,l){return""!=t&&""!=i&&""!=e&&""!=s&&""!=a&&""!=r&&""!=o&&""!=n?0==h?"M "+t+" "+m+"L "+t+" "+i+" C "+e+" "+s+" "+a+" "+r+" "+o+" "+n:h==l?"L "+t+" "+i+" C "+e+" "+s+" "+a+" "+r+" "+o+" "+n+"L "+o+" "+m:"L "+t+" "+i+" C "+e+" "+s+" "+a+" "+r+" "+o+" "+n:void 0},SVGLineSeries.prototype.drawSegmentArea=function(t){for(var i=this,e=this.xPositionArray,s=this.yPositionArray,a=i.m_chart.scaleFlag?"#linegrpslider"+t+i.m_chart.m_objectid:"#linestackgrp"+t+i.m_chart.m_objectid,r=(this.clipFillArea(),this.getAreaPath(e,s,i.basePoint)),o=this.getLineDashArray(this.lineType,this.lineWidth),n=0;n<r.length;n++){var h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("d",r[n]),h.setAttribute("clip-path","url(#clipPath"+i.m_chart.m_objectid+")"),h.setAttribute("stroke-dasharray",o),h.setAttribute("style","stroke:"+i.color[0]+"; stroke-width:"+i.lineWidth+";fill:"+hex2rgb(void 0!==i.m_chart.m_fillAreaColor[i.seriesName]?i.m_chart.m_fillAreaColor[i.seriesName]:IsBoolean(i.m_chart.m_designMode)?"#34c0eb":i.m_chart.m_seriesColors[i.seriesName],i.fillTrasparency)+";"),$(a).append(h)}},SVGLineSeries.prototype.drawFanChartSegmentArea=function(t){for(var i,e,s,a=this,r=this.xPositionArray,o=this.yPositionArray,n=a.m_chart.scaleFlag?a.m_chart.svgTimeScaleId:a.m_chart.m_objectid,h=(this.clipFillArea(),s=0==t?this.getAreaPath(r,o,a.basePoint):(i=this.m_chart.m_lineCalculation.xPositionMap[this.m_chart.m_visibleSeriesName[t-1]],e=this.m_chart.m_lineCalculation.yPositionMap[this.m_chart.m_visibleSeriesName[t-1]],this.getFanChartAreaPath(r,o,i,e)),this.getLineDashArray(this.lineType,this.lineWidth)),m=0;m<s.length;m++){var l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d",s[m]),l.setAttribute("clip-path","url(#clipPath"+a.m_chart.m_objectid+")"),l.setAttribute("stroke-dasharray",h),l.setAttribute("style","stroke:"+a.color[0]+"; stroke-width:"+a.lineWidth+";fill:"+hex2rgb(void 0!==a.m_chart.m_fillAreaColor[a.seriesName]?a.m_chart.m_fillAreaColor[a.seriesName]:IsBoolean(a.m_chart.m_designMode)?"#34c0eb":a.m_chart.m_seriesColors[a.seriesName],a.fillTrasparency)+";"),$("#linestackgrp"+t+n).append(l)}},SVGLineSeries.prototype.clipFillArea=function(){var t=this,i=document.createElementNS("http://www.w3.org/2000/svg","defs"),e=document.createElementNS(NS,"clipPath"),s=(e.setAttribute("id","clipPath"+t.m_chart.m_objectid),document.createElementNS(NS,"rect"));s.setAttribute("x",t.m_chart.getStartX()),s.setAttribute("y",t.m_chart.getEndY()),s.setAttribute("width",t.m_chart.getEndX()-t.m_chart.getStartX()),s.setAttribute("height",t.m_chart.getStartY()-t.m_chart.getEndY()),s.setAttribute("fill","none"),e.appendChild(s),i.appendChild(e),$("#"+t.m_chart.svgContainerId).append(i)},SVGLineSeries.prototype.drawSegmentLines=function(t){var i,e,s=this,a=this.xPositionArray,r=this.yPositionArray,t=s.m_chart.scaleFlag?"#linegrpslider"+t+s.m_chart.m_objectid:"#linestackgrp"+t+s.m_chart.m_objectid,o=this.pathString(a,r,s.m_chart.getStartY(),s.m_chart.getEndY()),a=IsBoolean(this.m_chart.m_continuousline)?this.pathStringContinuous(a,r,s.m_chart.getStartY(),s.m_chart.getEndY()):void 0;null!=o&&""!=o&&(r=this.getLineDashArray(this.lineType,this.lineWidth),(i=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",o),i.setAttribute("stroke-dasharray",r),i.setAttribute("style","stroke:"+s.color[0]+"; stroke-width:"+s.lineWidth+";fill:none;"),$(t).append(i),e=!!document.documentMode,IsBoolean(this.m_chart.m_enableanimation))&&IsBoolean(!this.m_chart.scaleFlag)&&!e&&this.setLineAnimation(i),null!=a&&""!=a&&(o=this.getLineDashArray(this.m_chart.getLineType(this.lineType),this.lineWidth),(r=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",a),r.setAttribute("stroke-dasharray",o),r.setAttribute("style","stroke:"+s.color[0]+"; stroke-width:"+s.lineWidth+";fill:none;"),$(t).append(r),e=!!document.documentMode,IsBoolean(this.m_chart.m_enableanimation))&&IsBoolean(!this.m_chart.scaleFlag)&&!e&&this.setLineAnimation(r)},SVGLineSeries.prototype.createPath=function(t,i,e){i=void 0===i?"3":i;var s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttributeNS(null,"fill","none"),s.setAttribute("stroke-dasharray",e),s.setAttributeNS(null,"stroke",t),s.setAttributeNS(null,"stroke-width",i),s},SVGLineSeries.prototype.drawSplines=function(t){for(var i,e,s,a=this,t=(px=this.computeControlPoints(this.xPositionArray),py=this.computeControlPoints(this.yPositionArray),a.m_chart.scaleFlag?"#linegrpslider"+t+a.m_chart.m_objectid:"#linestackgrp"+t+a.m_chart.m_objectid),r="",o="",n=px.p1.length,h=0;h<n;h++)if(this.yPositionArray[h]<=a.m_chart.getStartY()&&this.yPositionArray[h]>=a.m_chart.getEndY()&&this.yPositionArray[h+1]<=a.m_chart.getStartY()&&this.yPositionArray[h+1]>=a.m_chart.getEndY())null!=(i=this.createBezierPath(this.xPositionArray[h],this.yPositionArray[h],px.p1[h],py.p1[h],px.p2[h],py.p2[h],this.xPositionArray[h+1],this.yPositionArray[h+1]))&&(r+=i);else if(IsBoolean(this.m_chart.m_continuousline)){for(var m=0,l=0,c=h;0<=c;c--)if(""!=this.yPositionArray[c]&&null!=this.yPositionArray[c]&&!isNaN(this.yPositionArray[c])){m=c;break}for(var _,d=h+1;d<=this.xPositionArray.length;d++)if(""!=this.yPositionArray[d]&&null!=this.yPositionArray[d]&&!isNaN(this.yPositionArray[d])){l=d;break}""==this.yPositionArray[m]||null==this.yPositionArray[m]||isNaN(this.yPositionArray[m])||0==l||(_=this.createBezierPath(this.xPositionArray[m],this.yPositionArray[m],px.p1[m],py.p1[m],px.p2[m],py.p2[m],this.xPositionArray[l],this.yPositionArray[l]));for(var g=!0,p=h;0<p;p--)if(_=="M"+o.split("M")[p]){g=!1;break}null!=_&&IsBoolean(g)&&(o+=_)}null!=r&&(s=this.getLineDashArray(this.lineType,this.lineWidth),(i=this.createPath(this.color[0],this.lineWidth,s)).setAttributeNS(null,"d",r),$(t).append(i),s=!!document.documentMode,IsBoolean(this.m_chart.m_enableanimation))&&IsBoolean(!this.m_chart.scaleFlag)&&!s&&this.setLineAnimation(i),null!=o&&(e=this.getLineDashArray(this.m_chart.getLineType(this.lineType),this.lineWidth),(_=this.createPath(this.color[0],this.lineWidth,e)).setAttributeNS(null,"d",o),$(t).append(_),s=!!document.documentMode,IsBoolean(this.m_chart.m_enableanimation))&&IsBoolean(!this.m_chart.scaleFlag)&&!s&&this.setLineAnimation(_)},SVGLineSeries.prototype.getLineDashArray=function(t,i){return"dot"===t?[+i,2*i+1,0,0]:"dash1"===t?[+i,+i,4*i,+i]:"dash"===t?[2*i,2*i+1,0,0]:[]},SVGLineSeries.prototype.createBezierPath=function(t,i,e,s,a,r,o,n){return""!==t&&""!==i&&""!==e&&""!==s&&""!==a&&""!==r&&""!==o&&""!==n?"M "+t+" "+i+" C "+e+" "+s+" "+a+" "+r+" "+o+" "+n:void 0},SVGLineSeries.prototype.computeControlPoints=function(t){var i=new Array,e=new Array,s=t.length-1,a=new Array,r=new Array,o=new Array,n=new Array;r[a[0]=0]=2,o[0]=1,n[0]=t[0]+2*t[1];for(var h=1;h<s-1;h++)a[h]=1,r[h]=4,o[h]=1,n[h]=4*t[h]+2*t[h+1];a[s-1]=2,r[s-1]=7,o[s-1]=0,n[s-1]=8*t[s-1]+t[s];for(h=1;h<s;h++){var m=a[h]/r[h-1];r[h]=r[h]-m*o[h-1],n[h]=n[h]-m*n[h-1]}i[s-1]=n[s-1]/r[s-1];for(h=s-2;0<=h;--h)i[h]=(n[h]-o[h]*i[h+1])/r[h];for(h=0;h<s-1;h++)e[h]=2*t[h+1]-i[h+1];return e[s-1]=.5*(t[s]+i[s-1]),{p1:i,p2:e}},SVGLineSeries.prototype.pathString=function(t,i,e,s){for(var a="",r=0,o=t.length,n=0;n<o;n++)Math.floor(i[n])<=Math.ceil(e)&&Math.ceil(i[n])>=Math.floor(s)?0==(r=""==i[n]?0:r)?""!=i[n]&&(a+="M"+t[n]+","+i[n],r++):a+="L"+t[n]+","+i[n]:r=0;return a},SVGLineSeries.prototype.pathStringContinuous=function(t,i,e,s){for(var a="",r=t.length,o=0;o<r;o++)if(""==i[o]){for(var n=0,h=0,m=o-1;0<=m;m--)if(""!=this.yPositionArray[m]&&null!=this.yPositionArray[m]&&!isNaN(this.yPositionArray[m])){n=m;break}for(var l=o+1;l<=this.xPositionArray.length;l++)if(""!=this.yPositionArray[l]&&null!=this.yPositionArray[l]&&!isNaN(this.yPositionArray[l])){h=l;break}""==this.yPositionArray[n]||null==this.yPositionArray[n]||isNaN(this.yPositionArray[n])||0==h||(a=(a+="M"+t[n]+","+i[n])+"L"+t[h]+","+i[h])}return a},SVGLineSeries.prototype.getAreaPath=function(t,i,e){for(var s=[],a="",r=0,o=0,n=t.length,h=0;h<n;h++){if(""==i[h]){if(IsBoolean(this.m_chart.m_continuousline)){o++,h==t.length-1&&(a+="L"+t[h-o]+","+e);continue}r=0,""!=a&&s.push(a),a=""}(o=0)==r?""!=i[h]&&(a+="M"+t[h]+","+e+"L"+t[h]+","+i[h],r++):h==t.length-1?a+="L"+t[h]+","+i[h]+"L"+t[h]+","+e:a+="L"+t[h]+","+i[h]}return""!=a&&s.push(a),s},SVGLineSeries.prototype.getFanChartAreaPath=function(t,i,e,s){for(var a=[],r="",o=0,n=t.length,h=0;h<n;h++)""==i[h]&&(o=0,""!=r&&a.push(r),r=""),0==o?""!=i[h]&&(r+="M"+t[h]+","+s[h]+"L"+t[h]+","+i[h],o++):h==t.length-1?r+="L"+t[h]+","+i[h]+"L"+t[h]+","+s[h]:r+="L"+t[h]+","+i[h];for(h=n-2;0<h;h--)r+="L"+e[h]+","+s[h];return""!=r&&a.push(r),a},SVGLineSeries.prototype.setLineAnimation=function(t){var i,e,s,a;0<this.m_chart.m_lineAnimationDuration&&(t.style.strokeDashoffset="0",i=t.getTotalLength(),e=this.m_chart.m_lineAnimationDuration,t.style.transition=t.style.WebkitTransition="none",""!=(a=t.style.strokeDasharray||t.getAttribute("stroke-dasharray"))?(s=a.split(/[\s,]/).map(function(t){return parseFloat(t)||0}).reduce(function(t,i){return t+i}),a=new Array(Math.ceil(i/s)).join(a+" "),t.style.strokeDasharray=a+"0, "+s,t.style.strokeDashoffset=s*s):(t.style.strokeDasharray=i+" "+i,t.style.strokeDashoffset=i),t.getBoundingClientRect(),t.style.transition=t.style.WebkitTransition="stroke-dashoffset "+e+"s linear",t.style.strokeDashoffset="0")},SVGPointSeries.prototype.init=function(t,i,e,s,a,r){this.m_chart=a,this.ctx=this.m_chart.ctx,this.color=t,this.m_chart=a,this.radius=i,this.xPositionArray=e,this.yPositionArray=s,this.pointOpacity=r;for(var o=this.xPositionArray.length,i="",n=0;n<o;n++)this.point[n]=new SVGPoint,i=isNaN(this.radius[n])?0:this.radius[n],this.point[n].init(this.color[n],i,this.xPositionArray[n],this.yPositionArray[n],this.ctx,this.m_chart)},SVGPointSeries.prototype.isInRange=function(t){return Math.floor(this.yPositionArray[t])>Math.ceil(this.m_chart.getStartY())||Math.ceil(this.yPositionArray[t])<Math.floor(this.m_chart.getEndY())},SVGPointSeries.prototype.drawPointSeries=function(t){for(var i=this.xPositionArray.length,e=0;e<i;e++)this.isInRange(e)||null!=this.m_chart.m_afterslider&&0!=this.m_chart.m_afterslider?IsBoolean(this.m_chart.m_afterslider)&&!this.isInRange(e)&&this.point[e].drawPoint(this.m_chart.m_sliderindexes[t][e],t,this.pointOpacity):this.point[e].drawPoint(e,t,this.pointOpacity)},AnnotSeries.prototype.init=function(t,i,e,s,a,r,o,n,h,B){this.m_chart=a,this.ctx=this.m_chart.ctx,this.color=t,this.m_chart=a,this.radius=i,this.xPositionArray=e,this.yPositionArray=s,this.m_plotTrasparency=r,this.m_plotType=o,this.m_plotRadius=n;var m=this.m_chart.m_annotationData,l=0;if(IsBoolean(this.m_chart.m_showyannotation))for(M=0;M<m.length;M++)for(var c=0,_=this.xPositionArray.length;c<_;c++){this.point[l]=new Point;var d=IsBoolean(this.m_chart.m_annotationseriescolor)?this.color[c]:this.m_chart.m_annotationcolor,i=this.m_chart.m_annotationradius,g=this.m_chart.m_annotationopacity,p=this.m_chart.m_annotationshape,u=this.m_chart.m_annotationradius;this.point[l].init(d,u,this.xPositionArray[c],this.m_chart.m_lineCalculation.getYAnotPosition(m[M].point),this.ctx,this,g,p,u),this.isInRange(c)||this.point[l].drawPoint(),l++}for(var y,x,f,b,A,S,C,v,w,N,D,T,P,k,L={},I=[{month:0,year:0}],F=this.m_chart.m_annotationXData,M=0;M<F.length;M++)""!==F[M].point&&null!=F[M].point&&"null"!=F[M].point&&"NULL"!=F[M].point&&"Null"!=F[M].point||(F[M]=""),""!=F[M]&&((D=F[M].point.toString().match(/^(0[1-9]|1[0-2])[-/.](0[1-9]|[12][0-9]|3[01])[-/.](\d{4})$|^(0[1-9]|[12][0-9]|3[01])[-/.](0[1-9]|1[0-2])[-/.](\d{4})$/))?(D[1]&&D[2]&&D[3]?(y=D[1],D[2],x=D[3]):D[4]&&D[5]&&D[6]&&(D[4],y=D[5],x=D[6]),"month"==this.m_chart.m_annotationformat?I.some(function(t){return t.month===y&&t.year===x})?(w=v=0,N=NaN):(I.push({month:y,year:x}),S=(A=this.m_chart.m_lineCalculation.findClosestNumber(this.m_chart.m_lineCalculation.xAxisData,x)).closestIndex,C=A.closest,D=(y-1)/12,1<this.m_chart.m_lineCalculation.xAxisData.length?(v=0<=x-C?this.m_chart.m_lineCalculation.xAxisData[S+1]:this.m_chart.m_lineCalculation.xAxisData[S-1],N=(w=Math.abs(C-x)+D)/Math.abs(v-C)*100):1==this.m_chart.m_lineCalculation.xAxisData.length&&x===C&&(v=C,N=(w=Math.abs(C-x)+D)/1*100)):"year"==this.m_chart.m_annotationformat?N=L[x]?(w=v=0,NaN):(L[x]=!0,S=(A=this.m_chart.m_lineCalculation.findClosestNumber(this.m_chart.m_lineCalculation.xAxisData,x)).closestIndex,C=A.closest,1==this.m_chart.m_lineCalculation.xAxisData.length&&x===C?(v=C,w=0):(f=new Date(C.toString()).getFullYear(),v=(0<=x-f?this.m_chart.m_lineCalculation.xAxisData[S+1]:this.m_chart.m_lineCalculation.xAxisData[S-1])||0,b=new Date(v?.toString()).getFullYear(),w=x<f?f-x:x-f,b==f?0:w/(b-f)*100)):this.m_chart.m_annotationformat):N=isNaN(F[M].point)?(S=this.m_chart.m_lineCalculation.xAxisData.indexOf(F[M].point),w=0):L[F[M].point]?(w=v=0,NaN):(L[F[M].point]=!0,S=(A=this.m_chart.m_lineCalculation.findClosestNumber(this.m_chart.m_lineCalculation.xAxisData,F[M].point)).closestIndex,C=A.closest,v=(0<=F[M].point-C?this.m_chart.m_lineCalculation.xAxisData[S+1]:this.m_chart.m_lineCalculation.xAxisData[S-1])||0,w=C>F[M].point?C-F[M].point:F[M].point-C,b==f?0:w/(b-f)*100),D=e[S]+this.m_chart.m_lineCalculation.onePartWidth*N/100,Array.from(new Set(this.m_chart.m_yPositionArray.flat(1))).sort((t,i)=>t-i),d=IsBoolean(this.m_chart.m_annotationseriescolor)?this.color[c]:this.m_chart.m_annotationcolor,i=this.m_chart.m_annotationradius,g=this.m_chart.m_annotationopacity,T=F[M].label,P=this.m_chart.m_annotationtextcolor,k=this.m_chart.getMonthYear(F[M].point.toString()),-1!=this.m_chart.m_lineCalculation.checkIndexOfData(k.year))&&(this.m_chart.m_annotationXData[M].xposition=D,this.drawLineBetweenPoints(i,.5,d,D,this.m_chart.getStartY(),D,this.m_chart.getEndY(),T,P,g))},AnnotSeries.prototype.drawLineBetweenPoints=function(t,i,e,s,a,r,o,n,h,m){s&&s!=1/0&&r!=1/0&&r&&(e=hex2rgb(e,m),m=document.createElementNS("http://www.w3.org/2000/svg","line"),IsBoolean(this.m_chart.m_linetype)&&m.setAttribute("stroke-dasharray",[4,4]),m.setAttribute("x1",s),m.setAttribute("y1",a),m.setAttribute("x2",r),m.setAttribute("y2",o),m.setAttribute("stroke",e),m.setAttribute("stroke-width",t),$("#"+this.m_chart.svgContainerId).append(m))},AnnotSeries.prototype.isInRange=function(t){return this.yPositionArray[t]>this.m_chart.getStartY()||this.yPositionArray[t]<=this.m_chart.getEndY()-.1},AnnotSeries.prototype.drawPointSeries=function(){for(var t=0,i=this.xPositionArray.length;t<i;t++);},SVGPoint.prototype=new Point,SVGPoint.prototype.drawPoint=function(t,i,e){switch(this.pointOpacity=e,this.m_chart.m_plotShapeArray[i]){case"point":this.drawCircle(t,i);break;case"cross":this.drawCross(t,i);break;case"cube":this.drawCube(t,i);break;case"star":this.drawStar(t,i);break;case"triangle":this.drawTriangle(t,i);break;case"quad":this.drawQuad(t,i);break;case"polygon":this.drawHexagon(t,i);break;case"ring":this.drawCircle(t,i,this.m_chart.m_plotShapeArray[i]);break;case"bubble":this.drawBubble(t,i);break;default:this.drawCircle(t,i)}},SVGPoint.prototype.drawStar=function(t,i){for(var e,s,a=this,r=this.xPosition,o=this.yPosition,n=this.radius,h=this.radius/2,m=Math.PI/2*3,l=Math.PI/5,c=hex2rgb(this.color,this.pointOpacity),_=[c,"transparent"],d="M"+ +r+" "+(o-h),g=0;g<5;g++)e=+r+Math.cos(m)*h,s=+o+Math.sin(m)*h,m=+m+l,d=(d+=" L"+e+" "+s)+" L"+(+r+Math.cos(m)*n)+" "+(+o+Math.sin(m)*n),m=+m+l;d+=" L"+r+" "+(o-h);var p=document.createElementNS(NS,"path"),u=(p.setAttribute("d",d),p.setAttributeNS(null,"stroke-width",3),!!document.documentMode);if(IsBoolean(this.m_chart.m_enableanimation)&&IsBoolean(!this.m_chart.scaleFlag)&&0<this.m_chart.m_stackAnimationDuration&&!u){var y=document.createElementNS(NS,"linearGradient");y.setAttribute("id","LinearGradient"+a.m_chart.m_objectid+i+t);for(g=0;g<2;g++){var x=document.createElementNS(NS,"stop"),f=(x.setAttribute("offset","0"),x.setAttribute("stop-color",_[g]),drawSVGStackAnimation(0,"offset",this.radius,10*a.m_chart.m_bubbleanimationduration));$(x).append(f),$(x).attr("class","pointShapeColorAnimation"),$(y).append(x)}$("#defsElement"+a.m_chart.m_objectid).append(y),c="url(#LinearGradient"+a.m_chart.m_objectid+i+t+")",$(p).attr("class","timeSeries-pointShapeHighlighter")}p.setAttributeNS(null,"fill",c),p.setAttributeNS(null,"stroke",c),$("#shapegrp"+i+a.m_chart.m_objectid).append(p)},SVGPoint.prototype.drawHexagon=function(t,i){for(var e=this,s=this.xPosition,a=this.yPosition,r=this.radius,o=hex2rgb(this.color,this.pointOpacity),n=[o,"transparent"],h=2*Math.PI/6,m="M"+ +r+" 0",l=1;l<=6;l++)m+=" L"+r*Math.cos(h*l)+" "+r*Math.sin(h*l);var c=document.createElementNS(NS,"path"),s=(c.setAttribute("transform","translate("+s+","+a+")"),c.setAttribute("d",m),c.setAttributeNS(null,"stroke-width",3),!!document.documentMode);if(IsBoolean(this.m_chart.m_enableanimation)&&IsBoolean(!this.m_chart.scaleFlag)&&0<this.m_chart.m_stackAnimationDuration&&!s){var _=document.createElementNS(NS,"linearGradient");_.setAttribute("id","LinearGradient"+e.m_chart.m_objectid+i+t);for(l=0;l<2;l++){var d=document.createElementNS(NS,"stop"),g=(d.setAttribute("offset","0"),d.setAttribute("stop-color",n[l]),drawSVGStackAnimation(0,"offset",this.radius,10*e.m_chart.m_bubbleanimationduration));$(d).append(g),$(d).attr("class","pointShapeColorAnimation"),$(_).append(d)}$("#defsElement"+e.m_chart.m_objectid).append(_),o="url(#LinearGradient"+e.m_chart.m_objectid+i+t+")",$(c).attr("class","timeSeries-pointShapeHighlighter")}c.setAttributeNS(null,"fill",o),c.setAttributeNS(null,"stroke",o),$("#shapegrp"+i+e.m_chart.m_objectid).append(c)},SVGPoint.prototype.drawCross=function(t,i){var e=this,s=hex2rgb(this.color,this.pointOpacity),a=[s,"transparent"],r="M"+(+this.xPosition-+this.radius)+" "+(+this.yPosition-+this.radius)+" L"+(+this.xPosition+ +this.radius)+" "+(+this.yPosition+ +this.radius)+" M"+(+this.xPosition+ +this.radius)+" "+(+this.yPosition-+this.radius)+" L"+(+this.xPosition-+this.radius)+" "+(+this.yPosition+ +this.radius),o=document.createElementNS(NS,"path"),r=(o.setAttribute("d",r),o.setAttributeNS(null,"stroke-width",3),!!document.documentMode);if(IsBoolean(this.m_chart.m_enableanimation)&&IsBoolean(!this.m_chart.scaleFlag)&&0<this.m_chart.m_stackAnimationDuration&&!r){var n=document.createElementNS(NS,"linearGradient");n.setAttribute("id","LinearGradient"+e.m_chart.m_objectid+i+t);for(var h=0;h<2;h++){var m=document.createElementNS(NS,"stop"),l=(m.setAttribute("offset","0"),m.setAttribute("stop-color",a[h]),drawSVGStackAnimation(0,"offset",this.radius,10*e.m_chart.m_bubbleanimationduration));$(m).append(l),$(m).attr("class","pointShapeColorAnimation"),$(n).append(m)}$("#defsElement"+e.m_chart.m_objectid).append(n),s="url(#LinearGradient"+e.m_chart.m_objectid+i+t+")",$(o).attr("class","timeSeries-pointShapeHighlighter")}o.setAttributeNS(null,"fill",s),o.setAttributeNS(null,"stroke",s),$("#shapegrp"+i+e.m_chart.m_objectid).append(o)},SVGPoint.prototype.drawTriangle=function(t,i){var e=this,s=hex2rgb(this.color,this.pointOpacity),a=[s,"transparent"],r="M"+ +this.xPosition+" "+(+this.yPosition-+this.radius)+" L"+(+this.xPosition+ +this.radius)+" "+(+this.yPosition+ +this.radius)+" L"+(+this.xPosition-+this.radius)+" "+(+this.yPosition+ +this.radius)+" L"+ +this.xPosition+" "+(+this.yPosition-+this.radius),o=document.createElementNS(NS,"path"),r=(o.setAttribute("d",r),!!document.documentMode);if(IsBoolean(this.m_chart.m_enableanimation)&&IsBoolean(!this.m_chart.scaleFlag)&&0<this.m_chart.m_stackAnimationDuration&&!r){var n=document.createElementNS(NS,"linearGradient");n.setAttribute("id","LinearGradient"+e.m_chart.m_objectid+i+t);for(var h=0;h<2;h++){var m=document.createElementNS(NS,"stop"),l=(m.setAttribute("offset","0"),m.setAttribute("stop-color",a[h]),drawSVGStackAnimation(0,"offset",this.radius,10*e.m_chart.m_bubbleanimationduration));$(m).append(l),$(m).attr("class","pointShapeColorAnimation"),$(n).append(m)}$("#defsElement"+e.m_chart.m_objectid).append(n),s="url(#LinearGradient"+e.m_chart.m_objectid+i+t+")",$(o).attr("class","timeSeries-pointShapeHighlighter")}o.setAttributeNS(null,"fill",s),o.setAttributeNS(null,"stroke",s),$("#shapegrp"+i+e.m_chart.m_objectid).append(o)},SVGPoint.prototype.drawQuad=function(t,i){var e,s=this,a=(this.ctx.lineTo(+this.xPosition,+this.yPosition-+this.m_plotradius),document.createElementNS(NS,"rect")),r=(a.setAttributeNS(null,"x",this.xPosition-this.radius),a.setAttributeNS(null,"y",this.yPosition-this.radius),a.setAttributeNS(null,"height",2*this.radius),a.setAttributeNS(null,"width",2*this.radius),a.setAttribute("transform","rotate(45 "+this.xPosition+","+this.yPosition+")"),a.setAttributeNS(null,"stroke",hex2rgb(this.color,this.pointOpacity)),a.setAttributeNS(null,"fill",hex2rgb(this.color,this.pointOpacity)),!!document.documentMode);IsBoolean(this.m_chart.m_enableanimation)&&IsBoolean(!this.m_chart.scaleFlag)&&0<this.m_chart.m_stackAnimationDuration&&!r&&((r=document.createElementNS("http://www.w3.org/2000/svg","animate")).setAttribute("attributeName","height"),r.setAttribute("from","1"),r.setAttribute("to",2*this.radius),r.setAttribute("dur",s.m_chart.m_bubbleanimationduration+"s"),$(a).append(r),$(a).attr("class","pointShapeAnimation"),e=this.radius,a.addEventListener("mouseover",function(t){a.setAttributeNS(null,"height",2*e+s.m_chart.m_hovershape),a.setAttributeNS(null,"width",2*e+s.m_chart.m_hovershape),a.setAttributeNS(null,"opacity",.8)}),a.addEventListener("mouseout",function(){a.setAttributeNS(null,"height",2*e),a.setAttributeNS(null,"width",2*e),a.setAttributeNS(null,"opacity",s.pointOpacity)})),$("#shapegrp"+i+s.m_chart.m_objectid).append(a)},SVGPoint.prototype.drawCube=function(t,i){var e,s=this,a=document.createElementNS(NS,"rect"),r=(a.setAttributeNS(null,"x",this.xPosition-this.radius),a.setAttributeNS(null,"y",this.yPosition-this.radius),a.setAttributeNS(null,"height",2*this.radius),a.setAttributeNS(null,"width",2*this.radius),a.setAttributeNS(null,"stroke",hex2rgb(this.color,this.pointOpacity)),a.setAttributeNS(null,"fill",hex2rgb(this.color,this.pointOpacity)),!!document.documentMode);IsBoolean(this.m_chart.m_enableanimation)&&IsBoolean(!this.m_chart.scaleFlag)&&0<this.m_chart.m_stackAnimationDuration&&!r&&((r=document.createElementNS("http://www.w3.org/2000/svg","animate")).setAttribute("attributeName","width"),r.setAttribute("from","1"),r.setAttribute("to",2*this.radius),r.setAttribute("dur",s.m_chart.m_bubbleanimationduration+"s"),$(a).append(r),$(a).attr("class","pointShapeAnimation"),e=this.radius,a.addEventListener("mouseover",function(t){a.setAttributeNS(null,"height",2*e+s.m_chart.m_hovershape),a.setAttributeNS(null,"width",2*e+s.m_chart.m_hovershape),a.setAttributeNS(null,"opacity",.8)}),a.addEventListener("mouseout",function(){a.setAttributeNS(null,"height",2*e),a.setAttributeNS(null,"width",2*e),a.setAttributeNS(null,"opacity",s.pointOpacity)})),$("#shapegrp"+i+s.m_chart.m_objectid).append(a)},SVGPoint.prototype.drawBubble=function(t,i){var s=this,e=hex2rgb(this.color,this.pointOpacity),a=ColorLuminance(this.color,this.m_chart.m_luminance),r=[hex2rgb(a,this.pointOpacity),e],o=["10%","80%"],a=document.createElementNS("http://www.w3.org/2000/svg","circle"),n=document.createElementNS(NS,"radialGradient");n.setAttribute("id","radialGradient"+s.m_chart.m_objectid+i+t),n.setAttribute("fx","30%"),n.setAttribute("fy","20%");for(var h=0;h<2;h++){var m=document.createElementNS(NS,"stop");m.setAttribute("offset",o[h]),m.setAttribute("stop-color",r[h]),$(n).append(m)}a.setAttributeNS(null,"cx",this.xPosition),a.setAttributeNS(null,"cy",this.yPosition),a.setAttributeNS(null,"r",this.radius),a.setAttributeNS(null,"stroke",hex2rgb(this.color,this.pointOpacity)),e="url(#radialGradient"+s.m_chart.m_objectid+i+t+")",a.setAttributeNS(null,"fill",e);var l,t=!!document.documentMode;IsBoolean(this.m_chart.m_enableanimation)&&IsBoolean(!this.m_chart.scaleFlag)&&0<this.m_chart.m_bubbleanimationduration&&!t&&((e=document.createElementNS("http://www.w3.org/2000/svg","animate")).setAttribute("attributeName","r"),e.setAttribute("from","1"),e.setAttribute("to",this.radius),e.setAttribute("dur",s.m_chart.m_bubbleanimationduration+"s"),$(a).append(e),$(a).attr("class","pointShapeAnimation"),l=this.radius,a.addEventListener("mouseover",function(t){var i=+s.radius+ +s.m_chart.m_hovershape,e=s.drawAnimateCircle(s,+s.pointOpacity-.2*s.pointOpacity,l,s.m_chart.m_hovershape,"1",i),i=(i+=+s.m_chart.m_hovershape,s.drawAnimateCircle(s,+s.pointOpacity-.4*s.pointOpacity,l,s.m_chart.m_hovershape,"1",i));$(this).find("animate")[0].setAttribute("repeatCount","indefinite"),$("#"+s.m_chart.svgContainerId).append(e),$("#"+s.m_chart.svgContainerId).append(i)}),a.addEventListener("mouseout",function(){$(this).find("animate")[0].setAttribute("repeatCount",""),$("#"+s.m_chart.svgContainerId).find(".animateCircle").remove()})),$("#defsElement"+s.m_chart.m_objectid).append(n),$("#shapegrp"+i+s.m_chart.m_objectid).append(a)},SVGPoint.prototype.drawCircle=function(n,t,i){var s,h=this,i="ring"===i?"transparent":hex2rgb(this.color,this.pointOpacity),e=document.createElementNS("http://www.w3.org/2000/svg","circle"),i=(e.setAttribute("id","linestack"+h.m_chart.svgContainerId+t+n),e.setAttributeNS(null,"cx",this.xPosition),e.setAttributeNS(null,"cy",this.yPosition),e.setAttributeNS(null,"r",this.radius),e.setAttributeNS(null,"stroke",hex2rgb(this.color,this.pointOpacity)),e.setAttributeNS(null,"fill",i),!!document.documentMode);IsBoolean(this.m_chart.m_enableanimation)&&IsBoolean(!this.m_chart.scaleFlag)&&0<this.m_chart.m_bubbleanimationduration&&!i&&((i=document.createElementNS("http://www.w3.org/2000/svg","animate")).setAttribute("attributeName","r"),i.setAttribute("from","1"),i.setAttribute("to",this.radius),i.setAttribute("dur",h.m_chart.m_bubbleanimationduration+"s"),$(e).append(i),$(e).attr("class","pointShapeAnimation"),s=this.radius,void 0!==h.m_chart.m_drillcomptoggle&&void 0!==h.m_chart.m_slidercatarr&&0!==h.m_chart.m_slidercatarr.length&&(IsBoolean(!h.m_chart.m_drillcomptoggle)&&IsBoolean(h.m_chart.m_slidercatarr.includes(n))||(h.m_chart.m_slidercatarr.length,h.m_chart.SerData[0].length),$(e).attr("opacity","1")),e.addEventListener("click",function(t){for(var i=n,e=0;e<h.m_chart.m_seriesData.length;e++)for(var s,a,r=h.m_chart.m_allSeriesNames[e],o=0;o<h.m_chart.SerData[0].length;o++)void 0!==h.m_chart.m_columnSeries[r]?(a="topRoundedStack"+h.m_chart.svgContainerId+e+o,s="topRoundedStack_stackgrpslider"+h.m_chart.svgContainerId+e+o):a="linestack"+h.m_chart.svgContainerId+e+o,i!=o&&"1"==$("#"+a).css("opacity")&&IsBoolean(h.m_chart.m_drilltoggle)?($("#"+a).css("opacity","0.5"),$("#"+s).css("opacity","0.5")):($("#"+a).css("opacity","1"),$("#"+s).css("opacity","1"))}),e.addEventListener("mouseover",function(t){var i=+h.radius+ +h.m_chart.m_hovershape,e=h.drawAnimateCircle(h,+h.pointOpacity-.2*h.pointOpacity,s,h.m_chart.m_hovershape,"1",i),i=(i+=+h.m_chart.m_hovershape,h.drawAnimateCircle(h,+h.pointOpacity-.4*h.pointOpacity,s,h.m_chart.m_hovershape,"1",i));$(this).find("animate")[0].setAttribute("repeatCount","indefinite"),$("#"+h.m_chart.svgContainerId).append(e),$("#"+h.m_chart.svgContainerId).append(i)}),e.addEventListener("mouseout",function(){$(this).find("animate")[0].setAttribute("repeatCount",""),$("#"+h.m_chart.svgContainerId).find(".animateCircle").remove()})),$("#shapegrp"+t+h.m_chart.m_objectid).append(e)},SVGPoint.prototype.drawAnimateCircle=function(t,i,e,s,a,r){var o=document.createElementNS("http://www.w3.org/2000/svg","circle"),e=(o.setAttributeNS(null,"cx",t.xPosition),o.setAttributeNS(null,"cy",t.yPosition),o.setAttributeNS(null,"r",e),o.setAttributeNS(null,"stroke",hex2rgb(t.color,i)),o.setAttributeNS(null,"stroke-width",s),o.setAttributeNS(null,"fill","none"),document.createElementNS("http://www.w3.org/2000/svg","animate"));return e.setAttribute("attributeName","r"),e.setAttribute("from",a),e.setAttribute("to",r),e.setAttribute("repeatCount","indefinite"),e.setAttribute("dur",t.m_chart.m_bubbleanimationduration+"s"),$(o).append(e),$(o).attr("class","animateCircle"),o},svgYAxis.prototype=new Yaxis,svgYAxis.prototype.drawSecondaryAxis=function(t){this.m_isSecodaryAxis=!0;var i=drawSVGLine(this.m_endX,this.m_startY,this.m_endX,+this.m_endY,"1",this.m_chart.m_linesecondaxiscolor);$("#"+this.m_chart.svgContainerId).append(i)},svgYAxis.prototype.markRightYaxis=function(){for(var t=this.m_chart.m_lineCalculation.rightAxisInfo.markerarray,i=t.length,e=[],s=0;s<i;s++){var a=t[s];a=this.getSecondaryAxisFormattedText(a,this.m_secondaryAxisPrecision),e.push(a)}if(!isUniqueArray(e))for(var r=getDuplicatesFromArray(e),s=0;s<i;s++){var a=t[s],o=this.getSecondaryAxisFormattedText(a,this.m_secondaryAxisPrecision);a="default"==this.m_secondaryAxisPrecision&&"auto"==this.m_secondAxisSecondaryUnitSymbol&&0<Object.keys(r).length?this.getSecondaryAxisFormattedText(a,1):o,e[s]=a}if(1<t.length)for(var n=0;n<e.length;n++)this.drawSVGTextRightAxis(this.m_chart.getEndX()+this.m_axislinetotextgap,+this.m_startY-n*this.getYAxisDiv(t),"",this.m_chart.m_secondaryaxislabelfontcolor,e[n],"left");""!=this.m_chart.m_secondaxisdiscription&&null!=this.m_chart.m_secondaxisdiscription&&this.drawRightAxisDescription()},Yaxis.prototype.drawRightAxisDescription=function(){var t,i=convertColorToHex(this.m_chart.m_secondaxisfontcolor),e=+this.m_chart.fontScaling(this.getSecondAxisFontSize()),s=this.m_chart.formattedDescription(this.m_chart,this.m_chart.m_secondaxisdiscription),a=IsBoolean(this.m_chart.m_enablehtmlformate.secondaryaxis)?"<br>":"\\n",a=s.split(a),r=(3<a.length&&a.splice(3,a.length-3),t=IsBoolean(this.m_chart.m_updateddesign)?(t=0<a.length?e*(3<a.length?4:a.length-1):0,+this.m_chart.m_x+ +this.m_chart.m_width-this.m_chart.fontScaling(this.getSecondAxisFontSize())/2-(IsBoolean(this.m_chart.m_showlegends)?20:10)-t):(t=0<a.length?e*(3<a.length?2:a.length-1):0,+this.m_chart.m_x+ +this.m_chart.m_width-+this.m_chart.fontScaling(this.getSecondAxisFontSize())-(IsBoolean(this.m_chart.m_showlegends)?20:5)-t),!IsBoolean(this.m_chart.getShowLegends())||IsBoolean(this.m_chart.m_fixedlegend)||"verticalRightTop"!=this.m_chart.m_legendposition&&"verticalRightMiddle"!=this.m_chart.m_legendposition&&"verticalRightBottom"!=this.m_chart.m_legendposition||(t-=this.m_chart.m_rightFloatingLegendMargin*this.m_chart.minWHRatio()),this.getYDesc());IsBoolean(this.m_chart.m_enablehtmlformate.secondaryaxis)?this.drawRightAxisDescriptionInHTML(t,s,e):(s=drawSVGText(t,r,"",i,"middle","end",270),wrapSVGText(this,t,r,a,s,e,+this.m_startY-+this.m_endY),s.setAttribute("style","font-family:"+this.getSecondAxisFontFamily()+";font-style:"+this.getSecondAxisFontStyle()+";font-size:"+e+"px;font-weight:"+this.getSecondAxisFontWeight()+";text-decoration:"+this.getSecondAxisTextDecoration()+";"),$("#"+this.m_chart.svgContainerId).append(s))},Yaxis.prototype.drawRightAxisDescriptionInHTML=function(t,i,e){var s=this,a=document.createElement("div"),r=document.createElement("span");r.innerHTML=i,$(a).css({position:"absolute",top:+s.m_startY+"px",left:t-+this.m_axislinetotextgap+"px",width:+s.m_startY-+s.m_endY+"px","font-family":selectGlobalFont(s.getFontFamily()),"font-style":s.getFontStyle(),"font-size":e+"px","font-weight":s.getFontWeight(),"text-align":"center",color:convertColorToHex(this.m_fontcolor),"line-height":"normal",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","text-decoration":s.getTextDecoration(),"-webkit-transform-origin":" 0 0",transform:"rotate(270deg)"}),$(a).append(r),$("#draggableDiv"+s.m_chart.m_objectid).append(a)},svgYAxis.prototype.getYAxisDiv=function(t){return(this.m_startY-this.m_endY)/(t.length-1)},svgYAxis.prototype.horizontalMarkerLines=function(){for(var t,i=(""!=this.m_chart.leftAxisInfo.markerarray?this.m_chart.leftAxisInfo:this.m_chart.rightAxisInfo).markerarray,e=0;e<i.length;e++)1<i.length&&(t=drawSVGLine(this.m_startX,this.m_startY-e*this.getYAxisDiv(i),this.m_endX,this.m_startY-e*this.getYAxisDiv(i),"1",hex2rgb(this.m_chart.m_markercolor,this.m_chart.m_markertransparency)),$("#horizontallinegrp"+this.m_chart.m_objectid).append(t))},svgYAxis.prototype.zeroMarkerLine=function(t,i){for(var e=t.markerarray,s=0;s<e.length;s++)if(1<e.length&&0==e[s]){var a=drawSVGLine(this.m_startX,this.m_startY-s*this.getYAxisDiv(e),this.m_endX,this.m_startY-s*this.getYAxisDiv(e),"1",hex2rgb(i,this.m_chart.m_markertransparency));$("#"+this.m_chart.svgContainerId).append(a);break}},svgYAxis.prototype.hasNegativeAxisMarker=function(t){var i=!1;return i=Array.isArray(t)&&0<t.length&&Math.min.apply(null,t)<0?!0:i},svgYAxis.prototype.drawYAxis=function(){var t;IsBoolean(this.m_showlineyaxis)&&(t=drawSVGLine(this.m_startX,this.m_startY,this.m_startX,this.m_endY,"1",this.m_lineyaxiscolor),$("#"+this.m_chart.svgContainerId).append(t))},svgYAxis.prototype.markYaxis=function(){for(var t=this.m_chart.m_lineCalculation.leftAxisInfo.markerarray,i=t.length,e=[],s=0;s<i;s++){var a=IsBoolean(this.m_isSecodaryAxis)?this.getSecondaryAxisFormattedText(t[s],this.m_secondaryAxisPrecision):this.getFormattedText(t[s],this.m_precision);e.push(a)}if(!isUniqueArray(e))for(var r=getDuplicatesFromArray(e),o=0;o<i;o++){var n,h=t[o],h=IsBoolean(this.m_isSecodaryAxis)?(n=this.getSecondaryAxisFormattedText(h,this.m_secondaryAxisPrecision),"default"==this.m_secondaryAxisPrecision&&"auto"==this.m_secondAxisSecondaryUnitSymbol&&0<Object.keys(r).length?this.getSecondaryAxisFormattedText(h,1):n):(n=this.getFormattedText(h,this.m_precision),"default"==this.m_precision&&"auto"==this.m_secondaryUnitSymbol&&0<Object.keys(r).length?this.getFormattedText(h,1):n);e[o]=h}if(1<t.length){this.m_chart.createYAxisMarkerLabelGroup("yaxislabelgrp");for(var m=0;m<e.length;m++)this.drawSVGText(this.m_chart.getStartX()-this.m_axislinetotextgap,+this.m_startY-m*this.getYAxisDiv(t),"",this.m_labelfontcolor,getFormattedNumberWithCommas(e[m],this.m_chart.m_numberformatter),"right")}0<this.m_chart.getAxisData(this.m_chart.seriesDataMap.left).all.length&&this.drawDescription()},svgYAxis.prototype.drawDescription=function(){var t,i,e,s,a=this,r=this.m_chart.m_allSeriesDisplayNames.reduce(function(t,i){return""!==i?""===t?i:t+", "+i:t},""),r=IsBoolean(this.m_chart.m_yAxis.m_showdatasetdescription)?this.m_chart.formattedDescription(this.m_chart,r):this.m_chart.formattedDescription(this.m_chart,this.getDescription());""!=r&&null!=r&&(r=this.m_chart.formattedDescription(this.m_chart,r),t=IsBoolean(this.m_chart.m_enablehtmlformate.yaxis)?"<br>":"\\n",3<(t=r.split(t)).length&&t.splice(3,t.length-3),i=this.getXDesc(),!IsBoolean(this.m_chart.getShowLegends())||IsBoolean(this.m_chart.m_fixedlegend)||"verticalLeftTop"!=this.m_chart.m_legendposition&&"verticalLeftMiddle"!=this.m_chart.m_legendposition&&"verticalLeftBottom"!=this.m_chart.m_legendposition||(i+=this.m_chart.m_leftFloatingLegendMargin*this.m_chart.minWHRatio()),e=this.getYDesc(),s=+a.m_chart.fontScaling(a.getFontSize()),IsBoolean(this.m_chart.m_enablehtmlformate.yaxis)?this.drawDescriptionInHTML(r,s):(r=drawSVGText(i,e,this.m_chart.formattedDescription(this.m_chart,""),convertColorToHex(this.getFontColor()),"middle","middle",270),wrapSVGText(a,i,e,t,r,s,+a.m_startY-+this.m_endY),$(r).css({"font-family":selectGlobalFont(a.getFontFamily()),"font-style":a.getFontStyle(),"font-size":s+"px","font-weight":a.getFontWeight(),"text-decoration":a.getTextDecoration()}),$("#"+a.m_chart.svgContainerId).append(r)))},svgYAxis.prototype.drawDescriptionInHTML=function(t,i){var e=this,s=document.createElement("div"),a=document.createElement("span");a.innerHTML=t,$(s).css({position:"absolute",top:+e.m_startY+"px",left:+this.m_chart.m_chartpaddings.leftBorderToDescription/2+"px",width:+e.m_startY-+e.m_endY+"px","font-family":selectGlobalFont(e.getFontFamily()),"font-style":e.getFontStyle(),"font-size":i+"px","font-weight":e.getFontWeight(),"text-align":"center",color:convertColorToHex(this.m_fontcolor),"line-height":"normal",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","text-decoration":e.getTextDecoration(),"-webkit-transform-origin":" 0 0",transform:"rotate(270deg)"}),$(s).append(a),$("#draggableDiv"+e.m_chart.m_objectid).append(s)},svgYAxis.prototype.drawSVGText=function(t,i,e,s,a,r){t=drawSVGText(t,i,a,s,r,"middle");$("#yaxislabelgrp"+this.m_chart.m_objectid).append(t)},svgYAxis.prototype.drawSVGTextRightAxis=function(t,i,e,s,a,r){t=drawSVGText(t,i,a,s,r,"middle");$("#rightyaxislabelgrp"+this.m_chart.m_objectid).append(t)},svgXAxis.prototype=new Xaxis,svgXAxis.prototype.init=function(t){this.m_chart=t,this.ctx=this.m_chart.ctx,this.m_startX=this.m_chart.getStartX(),this.m_startY=this.m_chart.getStartY(),this.m_endX=this.m_chart.getEndX(),this.m_endY=this.m_chart.getEndY(),this.m_xAxisData=this.m_chart.m_lineCalculation.getXAxisMarkersArray(),this.m_xPositionData=this.m_chart.m_lineCalculation.getXAxisPositionForMarkers(),this.m_axiscolor=convertColorToHex(this.m_chart.getAxisColor()),this.m_linexaxiscolor=""!=this.m_linexaxiscolor?convertColorToHex(this.m_linexaxiscolor):this.m_axiscolor,this.m_labelfontcolor=convertColorToHex(this.getLabelFontColor())},svgXAxis.prototype.drawXAxis=function(){var t;IsBoolean(this.m_showlinexaxis)&&(t=drawSVGLine(this.m_startX,this.m_startY,this.m_endX,+this.m_startY,"1",this.m_linexaxiscolor),$("#"+this.m_chart.svgContainerId).append(t))},svgXAxis.prototype.drawVerticalLine=function(){if(IsBoolean(this.m_chart.m_showverticalmarkerline))for(var t=this.m_xAxisData.length,i=0;i<t;i++){var e=this.m_xPositionData[i],e=drawSVGLine(e,this.m_startY,e,this.m_endY,"1",hex2rgb(this.m_chart.m_markercolor,this.m_chart.m_markertransparency));$("#verticallinegrp"+this.m_chart.m_objectid).append(e)}},svgXAxis.prototype.markXaxis=function(){this.drawAxisLabels(),this.drawDescription()},svgXAxis.prototype.drawAxisLabels=function(){for(var t=this.calculateAxisLineToTextGap(),i=this.m_xAxisData.length,e=0;e<i;e++){var s,a,r,o,n=this.m_xPositionData[e],h=+this.m_startY+t/2+10+this.calculateAxisLineToTextGap()/2;IsBoolean(this.m_tickmarks)&&(s=drawSVGLine(n,this.m_startY,n,+this.m_startY+8,"1",this.m_categorymarkingcolor),$("#xaxistickgrp"+this.m_chart.m_objectid).append(s)),o=IsBoolean(this.getLabelTilted())?(s=""!==this.getDescription()?this.m_fontsize:5,a=this.m_chart.m_height/4-t/2-s-this.calculateAxisLineToTextGap()/2,this.ctx.font=this.getLabelFontProperties(),this.ctx.measureText(this.m_xAxisData[e]).width,r=this.getText(""+this.m_xAxisData[e],a,this.getLabelFontProperties()),o=0<this.m_labelrotation?"left":"right",drawSVGText(n,h,r,this.m_labelfontcolor,o,"start",this.getLabelrotation())):(a=(this.m_chart.m_endX-this.m_chart.m_startX)/this.m_xAxisData.length,IsBoolean(this.m_xaxistextwrap)?(r=this.m_xAxisData[e],this.drawSVGTextForCategory(n,h,r,this.m_labelfontcolor,"center","start",this.getLabelrotation(),a)):(r=this.getText(""+this.m_xAxisData[e],a,this.getLabelFontProperties()),drawSVGText(n,h,r,this.m_labelfontcolor,"center","start",this.getLabelrotation()))),$("#xaxislabelgrp"+this.m_chart.m_objectid).append(o)}},svgXAxis.prototype.drawSVGTextForCategory=function(t,i,e,s,a,r,o,n){var h=document.createElementNS(NS,"text"),m=this.getTexts(""+e,n,this.getLabelFontProperties());if(1==m.length)isNaN(t)||isNaN(i)||(h.setAttribute("x",t),h.setAttribute("y",i),h.setAttribute("fill",s),""!==o&&void 0!==o&&0!==o&&h.setAttribute("transform","rotate("+o+" "+t+","+i+")"),h.textContent=m[0],h.setAttribute("text-anchor",getSVGAlignment(a)),h.setAttribute("alignment-baseline",r));else if(!isNaN(t)&&!isNaN(i)){h.setAttribute("y",i),h.setAttribute("fill",s),""!==o&&void 0!==o&&0!==o&&h.setAttribute("transform","rotate("+o+" "+t+","+i+")"),h.setAttribute("text-anchor",getSVGAlignment(a)),h.setAttribute("alignment-baseline",r);for(var l=0;l<m.length;l++){var c=document.createElementNS(NS,"tspan");0==l?c.setAttribute("x",t):(c.setAttribute("x",t),c.setAttribute("dy",+this.m_chart.fontScaling(this.getLabelFontSize()))),c.textContent=m[l],h.appendChild(c)}}return h},svgXAxis.prototype.getTexts=function(t,i,e){var t=""+t,s=[],a=(this.ctx.font=e,this.ctx.measureText(t).width),r=t.split(" "),o="";if(i<a){for(var n=0;n<=r.length;n++){var h=o+r[n]+" ",m=this.ctx.measureText(h).width;if(s.length==this.m_chart.m_xaxislabellines)break;i<m&&0<n?o=(this.ctx.measureText(o).width>i?s.push(this.getText(o,i,e)):s.push(o),r[n]+" "):n==r.length&&m<i?s.push(o):o=h}s[this.m_chart.m_xaxislabellines-1]&&this.ctx.measureText(s[this.m_chart.m_xaxislabellines-1]).width>=i&&(s[this.m_chart.m_xaxislabellines-1]=this.getText(s[this.m_chart.m_xaxislabellines-1],i,e))}else s.push(t);return s},svgXAxis.prototype.drawDescription=function(){var t,i,e,s=this,a=+s.m_chart.fontScaling(s.getFontSize()),r=this.m_chart.m_allCategoryDisplayNames.join(""),r=IsBoolean(this.m_chart.m_xAxis.m_showdatasetdescription)?this.m_chart.formattedDescription(this.m_chart,r):this.m_chart.formattedDescription(this.m_chart,this.m_description);""!=r&&(r=this.m_chart.formattedDescription(this.m_chart,r),t=IsBoolean(this.m_chart.m_enablehtmlformate.xaxis)?"<br>":"\\n",3<(t=r.split(t)).length&&t.splice(3,t.length-3),e=0<t.length?a*(t.length-1):0,i=this.getXDesc(),e=this.getYDesc()-(IsBoolean(this.m_chart.m_showslider)?this.m_chart.sliderMargin:0)-e,!IsBoolean(this.m_chart.getShowLegends())||IsBoolean(this.m_chart.m_fixedlegend)||"horizontalBottomLeft"!=this.m_chart.m_legendposition&&"horizontalBottomCenter"!=this.m_chart.m_legendposition&&"horizontalBottomRight"!=this.m_chart.m_legendposition||IsBoolean(this.m_chart.scaleFlag)||(e-=this.m_chart.m_bottomFloatingLegendMargin*this.m_chart.minWHRatio()),IsBoolean(this.m_chart.m_enablehtmlformate.xaxis)?this.drawDescriptionInHTML(e,r,a):(r=drawSVGText(i,e,this.m_chart.formattedDescription(this.m_chart,""),convertColorToHex(this.m_fontcolor),"middle","middle",0),wrapSVGText(s,i,e,t,r,a,+s.m_endX-+s.m_startX),$(r).css({"font-family":selectGlobalFont(s.getFontFamily()),"font-style":s.getFontStyle(),"font-size":a+"px","font-weight":s.getFontWeight(),"text-decoration":s.getTextDecoration()}),$("#"+s.m_chart.svgContainerId).append(r)))},svgXAxis.prototype.drawDescriptionInHTML=function(t,i,e){var s=this,a=document.createElement("div"),r=document.createElement("span");r.innerHTML=i,$(a).css({position:"absolute",top:t-e+1+"px",left:s.m_startX+"px",width:+s.m_endX-+s.m_startX+"px","font-family":selectGlobalFont(s.getFontFamily()),"font-style":s.getFontStyle(),"font-size":e+"px","font-weight":s.getFontWeight(),"text-align":"center",color:convertColorToHex(this.m_fontcolor),"line-height":"normal",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","text-decoration":s.getTextDecoration()}),$(a).append(r),$("#draggableDiv"+s.m_chart.m_objectid).append(a)},svgXAxis.prototype.drawAxisTick=function(){if(IsBoolean(this.m_tickmarks))for(var t=this.m_xAxisData.length,i=0;i<t;i++){var e=parseInt(this.m_startX)+this.getXaxisDivison()*i,e=drawSVGLine(e,this.m_startY,e,+this.m_startY+8,"1",this.m_chart.m_categorymarkingcolor);$("#"+this.m_chart.svgContainerId).append(e)}},svgXAxis.prototype.getXaxisDivison=function(){return(this.m_endX-this.m_startX)/(this.m_xAxisData.length-1)},svgXAxis.prototype.calculateAxisLineToTextGap=function(){return this.m_chart.fontScaling(this.getLabelFontSize())},svgXAxis.prototype.drawSVGText=function(t,i,e,s,a){t=drawSVGText(t,i,a,s,"middle","middle",e);t.setAttribute("style","font-family:"+this.getLabelFontFamily()+";font-style:"+this.getLabelFontStyle()+";font-size:"+this.m_chart.fontScaling(this.getLabelFontSize())+"px;font-weight:"+this.getLabelFontWeight()+";text-decoration:"+this.getTextDecoration()+";"),$("#"+this.m_chart.svgContainerId).append(t)};
//# sourceMappingURL=TimelineChart.min.js.map