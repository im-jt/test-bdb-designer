/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function KnowledgeGraphChart(e,t){this.base=Chart,this.base(),this.m_chartContainer=e,this.m_zIndex=t,this.m_x=680,this.m_y=320,this.m_axistoitemmargin=15,this.m_marginbetweenitem=5,this.m_filtertextcolor="#000000",this.m_maxnodes=5,this.m_hierarchiallayuot="false",this.m_hierarchydirection="UD",this.m_fixed="false",this.m_nodeshape="dot",this.m_nodecolor="#EEEEEE",this.m_nodesize="50",this.m_nodebordercolor="#EEEEEE",this.m_nodehovercolor="#EEEEEE",this.m_nodeopacity="1",this.m_nodefontcolor="#000000",this.m_nodefontsize="12",this.m_nodefontstyle="normal",this.m_nodefontweight="normal",this.m_nodefontfamily="BizvizFont",this.m_nodetextalign="left",this.m_edgecolorinherit="default",this.m_edgecolor="#000000",this.m_edgefontcolor="#00000get0",this.m_edgefontsize="12",this.m_edgefontstyle="normal",this.m_edgefontweight="normal",this.m_edgefontfamily="BizvizFont",this.m_edgelabelalign="horizontal",this.m_edgelabelpadding="0",this.m_showarrows="true",this.m_dashededge="false",this.m_usecustomshapes="false",this.m_usecustomcolors="false",this.m_shapeindicatortype="type",this.m_colorindicatortype="type",this.m_customnodetypecolors="#E08283,#38d3a9,#797979",this.m_customnoderangecolors="#E08283,#38d3a9,#797979",this.m_customnodetypeshapes="dot,box,ellipsis",this.m_customnoderangeshapes="dot,box,ellipsis",this.m_customnodelevelshapes="dot,box,ellipsis",this.m_customnodelevelcolors="#E08283,#38d3a9,#797979",this.m_customshaperange="",this.m_customcolorrange="",this.m_nodetypes="Type1,Type2,Type3",this.m_colortypes="Type1,Type2,Type3",this.m_shapelevel="Level1,Level2,Level3",this.m_colorLevel="Level1,Level2,Level3",this.m_filterbgcolor="#FFFFFF",this.m_filterfontcolor="#000000",this.m_filterlabelcolor="#000000",this.filterdatavalue="",this.nodeFilterValue="Node Name"}KnowledgeGraphChart.prototype=new Chart,KnowledgeGraphChart.prototype.setProperty=function(e){this.ParseJsonAttributes(e.Object,this),this.initCanvas()},KnowledgeGraphChart.prototype.ParseJsonAttributes=function(e,t){for(var i in e)if("Chart"==i)for(var a in e[i])switch(a){case"Title":for(var o in e[i][a]){var s=this.getNodeAttributeName(o);t.m_title[s]=e[i][a][o]}break;case"SubTitle":for(var r in e[i][a]){var s=this.getNodeAttributeName(r);t.m_subTitle[s]=e[i][a][r]}break;case"TaskDetails":for(var n in e[i][a])t[s=this.getNodeAttributeName(n)]=e[i][a][n];break;case"MileStoneDetails":for(var l in e[i][a])t[s=this.getNodeAttributeName(l)]=e[i][a][l];break;default:t[s=this.getNodeAttributeName(a)]=e[i][a]}else t[s=this.getNodeAttributeName(i)]=e[i]},KnowledgeGraphChart.prototype.getDataProvider=function(){return this.m_dataProvider},KnowledgeGraphChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},KnowledgeGraphChart.prototype.initializeDraggableDivAndCanvas=function(e,t){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseClickEvent()},KnowledgeGraphChart.prototype.createInnerDiv=function(e){var t=document.createElement("div"),t=(t.style.width="100%",t.style.height="100%",t.style.zIndex="3",t.style.top="0px",t.style.position="absolute",t.style.background="transparent",$(e).append(t),document.createElement("div"));return t.setAttribute("id","innerDiv"+this.m_objectid),t.style.height="100%",t.style.width="100%",t.style.top="0px",t.style.position="absolute",t.style.zIndex="2",$(e).append(t),t},KnowledgeGraphChart.prototype.setFields=function(e){for(var t=[],i=[],a=[],o=[],s=[],r=[],n=0,l=(this.m_fieldsJson=e).length;n<l;n++)switch(this.getProperAttributeNameValue(e[n],"Type")){case"Source":t.push(e[n]);break;case"Target":i.push(e[n]);break;case"Edge":a.push(e[n]);break;case"Nodevalue":s.push(e[n]);break;case"NodeSize":r.push(e[n]);break;case"Nodetype":o.push(e[n])}this.setSource(t),this.setTarget(i),this.setEdge(a),this.setType(o),this.setValue(s),this.setNodeSize(r)},KnowledgeGraphChart.prototype.setSource=function(e){this.m_sourceNames=[],this.m_sourceDisplayNames=[],this.m_allSourceNames=[],this.m_allSourceDisplayNames=[],this.m_sourceVisibleArr=[];for(var t=0,i=0;i<e.length;i++){this.m_allSourceNames[i]=this.getProperAttributeNameValue(e[i],"Name");var a=this.formattedDescription(this,this.getProperAttributeNameValue(e[i],"DisplayName"));this.m_allSourceDisplayNames[i]=a,this.m_sourceVisibleArr[this.m_allSourceDisplayNames[i]]=this.getProperAttributeNameValue(e[i],"visible"),IsBoolean(this.m_sourceVisibleArr[this.m_allSourceDisplayNames[i]])&&(this.m_sourceNames[t]=this.getProperAttributeNameValue(e[i],"Name"),this.m_sourceDisplayNames[t]=a,t++)}},KnowledgeGraphChart.prototype.setTarget=function(e){this.m_targetNames=[],this.m_targetDisplayNames=[],this.m_allTargetNames=[],this.m_allTargetDisplayNames=[],this.m_targetVisibleArr=[];for(var t=0,i=0;i<e.length;i++){this.m_allTargetNames[i]=this.getProperAttributeNameValue(e[i],"Name");var a=this.formattedDescription(this,this.getProperAttributeNameValue(e[i],"DisplayName"));this.m_allTargetDisplayNames[i]=a,this.m_targetVisibleArr[this.m_allTargetDisplayNames[i]]=this.getProperAttributeNameValue(e[i],"visible"),IsBoolean(this.m_targetVisibleArr[this.m_allTargetDisplayNames[i]])&&(this.m_targetNames[t]=this.getProperAttributeNameValue(e[i],"Name"),this.m_targetDisplayNames[t]=a,t++)}},KnowledgeGraphChart.prototype.setEdge=function(e){this.m_edgeNames=[],this.m_edgeDisplayNames=[],this.m_allEdgeNames=[],this.m_allEdgeDisplayNames=[],this.m_edgeVisibleArr=[];for(var t=0,i=0;i<e.length;i++){this.m_allEdgeNames[i]=this.getProperAttributeNameValue(e[i],"Name");var a=this.formattedDescription(this,this.getProperAttributeNameValue(e[i],"DisplayName"));this.m_allEdgeDisplayNames[i]=a,this.m_edgeVisibleArr[this.m_allEdgeDisplayNames[i]]=this.getProperAttributeNameValue(e[i],"visible"),IsBoolean(this.m_edgeVisibleArr[this.m_allEdgeDisplayNames[i]])&&(this.m_edgeNames[t]=this.getProperAttributeNameValue(e[i],"Name"),this.m_edgeDisplayNames[t]=a,t++)}},KnowledgeGraphChart.prototype.setValue=function(e){this.m_valueNames=[],this.m_valueDisplayNames=[],this.m_allValueNames=[],this.m_allValueDisplayNames=[],this.m_valueVisibleArr=[];for(var t=0,i=0;i<e.length;i++){this.m_allValueNames[i]=this.getProperAttributeNameValue(e[i],"Name");var a=this.formattedDescription(this,this.getProperAttributeNameValue(e[i],"DisplayName"));this.m_allValueDisplayNames[i]=a,this.m_valueVisibleArr[this.m_allValueDisplayNames[i]]=this.getProperAttributeNameValue(e[i],"visible"),IsBoolean(this.m_valueVisibleArr[this.m_allValueDisplayNames[i]])&&(this.m_valueNames[t]=this.getProperAttributeNameValue(e[i],"Name"),this.m_valueDisplayNames[t]=a,t++)}},KnowledgeGraphChart.prototype.setType=function(e){this.m_typeNames=[],this.m_typeDisplayNames=[],this.m_allTypeNames=[],this.m_allTypeDisplayNames=[],this.m_typeVisibleArr=[];for(var t=0,i=0;i<e.length;i++){this.m_allTypeNames[i]=this.getProperAttributeNameValue(e[i],"Name");var a=this.formattedDescription(this,this.getProperAttributeNameValue(e[i],"DisplayName"));this.m_allTypeDisplayNames[i]=a,this.m_typeVisibleArr[this.m_allTypeDisplayNames[i]]=this.getProperAttributeNameValue(e[i],"visible"),IsBoolean(this.m_typeVisibleArr[this.m_allTypeDisplayNames[i]])&&(this.m_typeNames[t]=this.getProperAttributeNameValue(e[i],"Name"),this.m_typeDisplayNames[t]=a,t++)}},KnowledgeGraphChart.prototype.setNodeSize=function(e){this.m_nodeSizeNames=[],this.m_nodeSizeDisplayNames=[],this.m_allNodeSizeNames=[],this.m_allNodeSizeDisplayNames=[],this.m_nodeSizeVisibleArr=[];for(var t=0,i=0;i<e.length;i++){this.m_allNodeSizeNames[i]=this.getProperAttributeNameValue(e[i],"Name");var a=this.formattedDescription(this,this.getProperAttributeNameValue(e[i],"DisplayName"));this.m_allNodeSizeDisplayNames[i]=a,this.m_nodeSizeVisibleArr[this.m_allNodeSizeDisplayNames[i]]=this.getProperAttributeNameValue(e[i],"visible"),IsBoolean(this.m_nodeSizeVisibleArr[this.m_allNodeSizeDisplayNames[i]])&&(this.m_nodeSizeNames[t]=this.getProperAttributeNameValue(e[i],"Name"),this.m_nodeSizeDisplayNames[t]=a,t++)}},KnowledgeGraphChart.prototype.getSourceNames=function(){return this.m_sourceNames},KnowledgeGraphChart.prototype.getValueNames=function(){return this.m_valueNames},KnowledgeGraphChart.prototype.getTargetNames=function(){return this.m_targetNames},KnowledgeGraphChart.prototype.getEdgeNames=function(){return this.m_edgeNames},KnowledgeGraphChart.prototype.getTypeNames=function(){return this.m_typeNames},KnowledgeGraphChart.prototype.getNodeSizeNames=function(){return this.m_nodeSizeNames},KnowledgeGraphChart.prototype.getAllEdgeNames=function(){return this.m_allEdgeNames},KnowledgeGraphChart.prototype.getAllTargetNames=function(){return this.m_allTargetNames},KnowledgeGraphChart.prototype.getAllSourceNames=function(){return this.m_allSourceNames},KnowledgeGraphChart.prototype.getAllTypeNames=function(){return this.m_allTypeNames},KnowledgeGraphChart.prototype.getAllValueNames=function(){return this.m_allValueNames},KnowledgeGraphChart.prototype.getAllNodeSizeNames=function(){return this.m_allNodeSizeNames},KnowledgeGraphChart.prototype.init=function(){this.setSourceData(),this.setTargetData(),this.setEdgeData(),this.setValueData(),this.setTypeData(),this.setNodeSizeData(),this.setAllFieldsName(),this.isSeriesDataEmpty(),this.getDataItems(),this.m_chartFrame.init(this),this.m_tooltip.init(this),this.m_title.init(this),this.m_subTitle.init(this),this.initializeCalculation()},KnowledgeGraphChart.prototype.drawMessage=function(e){$("#textcanvas"+this.m_objectid).remove();var t=this.ctx.measureText(e).width,i=document.createElement("div");i.setAttribute("id","textcanvas"+this.m_objectid),i.width="250",i.height="250",i.style.background="transparent",i.style.position="absolute",i.style.color=convertColorToHex(this.m_statuscolor),i.style.fontSize=this.m_statusfontsize+"px ",i.style.fontFamily=selectGlobalFont(this.m_statusfontfamily),i.style.left=this.m_width/2*1+"px",i.style.top=this.m_height/2*1+"px",i.style.left=(this.m_width-t)/2+30+"px",$("#draggableDiv"+this.m_objectid).append(i),i.innerHTML=e},KnowledgeGraphChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle();var e,t=this.IsDrawingPossible();IsBoolean(t.permission)?0<this.m_sourceData[0].length?(this.createFilterContainer(),e=this.drawKnowledgeGraph(),this.drawGraph(e),this.createFilterContainer()):($("#filterDiv"+this.m_objectid).remove(),$("#chartDiv"+this.m_objectid).remove(),$("#reseticon"+this.m_objectid).remove(),this.drawMessage(this.m_status.noData)):this.drawMessage(t.message)},KnowledgeGraphChart.prototype.getIconCode=function(e){var t="<div class="+e+" style='position:absolute;height:10px;width:10px;'></div>";$("#draggableDiv"+this.m_objectid).append(t);t=getComputedStyle(document.querySelector("."+e),"::before").content.charCodeAt(1).toString(16),t=String.fromCodePoint(parseInt(t,16));return $("."+e).remove(),t},KnowledgeGraphChart.prototype.drawGraph=function(){var r=this,e=($("#reseticon"+r.m_objectid).remove(),document.getElementById("chartDiv"+r.m_objectid)),t=(r.m_nodeData,r.m_nodeData.map(function(e){return Object.assign({},e)})),i=r.m_edgeData.map(function(e){return Object.assign({},e)}),t=(r.visnodes=new vis.DataSet(t),r.visedges=new vis.DataSet(i),r.visdata={nodes:r.visnodes,edges:r.visedges},this.getOptions()),i=new vis.Network(e,r.visdata,t);r.m_network=i,r.m_allNodes=r.visnodes.get({returnType:"Object"}),r.highlightActive=!1,i.on("dragEnd",function(){}).on("zoom",function(){r.drawResetButton()}).on("click",function(e){var t,o,i=r.m_network.body.data.nodes.get({returnType:"Object"}),s=r.m_network.body.data.edges.get();0<e.nodes.length&&!IsBoolean(r.highlightActive)?(r.highlightActive=!0,t=e.nodes[0],r.visnodes,r.m_network,s.forEach(function(e){e.hidden=!0}),o=[],null!=s.find(function(e){return e.from==t})?s.forEach(function(e){e.from!==t&&e.to!==t||(e.hidden=!1)}):o=function i(a){return s.forEach(function(e){var t;e.to===a&&(t=e.from,o.push(t),e.hidden=!1,i(t))}),o}(t),r.updateDataPoints(i[t])):!0===r.highlightActive&&(s.forEach(function(e){e.hidden=!1}),r.highlightActive=!1),r.m_network.body.data.edges.update(s),r.m_network.unselectAll()}).on("hoverNode",function(e){pageX=e.event.pageX,pageY=e.event.pageY;var t,e=r.m_network.body.data.nodes.get(e.node),i=[],a=("type"in e&&i.push(["Type",e.type]),"datavalue"in e&&((a=e.datavalue)%1!=0&&r.m_tooltipprecision<1?a=a.toFixed(0):"default"!==r.m_tooltipprecision&&(a=a.toFixed(r.m_tooltipprecision)),i.push(["Value",a])),a=null!=e.shape?e.shape:r.m_nodeshape,t=null!=e.color?e.color:r.m_nodecolor,{cat:[[{shape:a="icon"==(a="dot"==a||"circle"==a?"point":"diamond"==a?"quad":"triangledown"==a?"invertedtriangle":a)?e.iconName:"image"==a?"bd-image":a,color:t},e.label]],data:i,highlightIndex:0});r.m_tooltip.drawKnowledgeToolTip(a)}).on("blurNode",function(){r.hideToolTip()})},KnowledgeGraphChart.prototype.resetHiglightedNodes=function(){var e;IsBoolean(this.highlightActive)&&((e=this.m_network.body.data.edges.get()).forEach(function(e){e.hidden=!1}),this.m_network.body.data.edges.update(e),this.highlightActive=!1)},KnowledgeGraphChart.prototype.getFilterOptions=function(){this.m_dataProvider;var e=[];return e.unshift("Node Name","Edge Name"),e},KnowledgeGraphChart.prototype.filterData=function(t){var o,s,i,e,a=this,r=a.m_network,n=a.m_network.body.data;"Node Name"==a.nodeFilterValue?(s=[],(o=n.nodes.get({filter:function(e){return 0<=e.label.toUpperCase().indexOf(t.toUpperCase())}})).map(function(e){!function t(i){var e=r.body.data.edges.get().reduce(function(e,t){return t.from===i&&(e.outgoingEdges.push(t),e.neighboringNodeIds.push(t.to)),e},{outgoingEdges:[],neighboringNodeIds:[]}),a=(e.neighboringNodeIds.map(function(e){return r.body.nodes[e]}),r.body.data.nodes.get(e.neighboringNodeIds));o=o.concat(a).filter(function(e,t,i){return i.indexOf(e)===t}),s=s.concat(e.outgoingEdges.filter(function(t){return!s.some(function(e){return e.id===t.id})})),0<e.neighboringNodeIds.length&&e.neighboringNodeIds.map(function(e){t(e)})}(e.id)}),e={nodes:new vis.DataSet(o),edges:new vis.DataSet(s)}):"Edge Name"==a.nodeFilterValue&&(o=[],i=(s=n.edges.get({filter:function(e){return 0<=e.label.toUpperCase().indexOf(t.toUpperCase())}})).map(e=>e.id).reduce(function(e,t){t=r.getConnectedNodes(t);return e.concat(t)},[]).filter(function(e,t,i){return i.indexOf(e)===t}),n.nodes.get({filter:function(e){i.includes(e.id)&&o.push(e)}}),e={nodes:new vis.DataSet(o),edges:new vis.DataSet(s)}),this.filterdatavalue=t,0==o.length&&0==s.length?($("#chartDiv"+a.m_objectid).css("display","none"),this.m_isfilteravailable=!1,this.drawMessage(a.nodeFilterValue+" Not Available")):a.m_network.setData(e)},KnowledgeGraphChart.prototype.createFilterContainer=function(){var e,t,i,a,o,s,r,n=this;n.m_designMode||(this.m_titleHeight=IsBoolean(this.m_title.m_showtitle)||IsBoolean(this.m_showgradient)||IsBoolean(this.m_showmaximizebutton)?this.m_title.m_titleBarHeight:0,this.m_subTitleHeight=IsBoolean(this.m_subTitle.m_showsubtitle)&&""!=this.m_subTitle.getDescription()?this.m_subTitle.m_formattedDescription.length*this.m_subTitle.getFontSize()*1.5:0,$("#filterDiv"+n.m_objectid).remove(),(e=document.createElement("div")).setAttribute("id","filterDiv"+n.m_objectid),$("#draggableDiv"+n.m_objectid).append(e),t=IsBoolean(this.m_subTitle.m_showsubtitle)&&""!=this.m_subTitle.getDescription()?4:0,t=+this.m_y+ +this.m_titleHeight+ +this.m_subTitleHeight+t,$("#filterDiv"+n.m_objectid).css({width:n.m_width+"px",height:"50px",top:t+"px",overflow:"hidden",position:"absolute",background:"transparent","font-family":"BizvizFont",display:"flex","justify-content":"center","align-items":"center"}),(t=document.createElement("div")).innerHTML="Filter Value ",t.setAttribute("style","color:"+n.m_filterlabelcolor),(i=document.createElement("input")).setAttribute("id","filterinput"+n.m_objectid),i.setAttribute("class","filterelements"+n.m_objectid),(a=document.createElement("div")).innerHTML="Filter By",a.setAttribute("style","color:"+n.m_filterlabelcolor),(o=document.createElement("select")).setAttribute("id","filterselect"+n.m_objectid),o.setAttribute("class","filterelements"+n.m_objectid),r=n.getFilterOptions(),s="",r.forEach(function(e){s+='<option value="'+e+'">'+e+"</option>"}),o.innerHTML=s,o.addEventListener("change",function(e){i.value="",n.nodeFilterValue=e.target.value}),o.value=n.nodeFilterValue,$(e).append(a,o,t,i),i.addEventListener("focus",function(){this.style.outline="none"}),r=(+this.m_width-20-t.clientWidth-a.clientWidth)/3*1+"px",$(".filterelements"+n.m_objectid).css({height:"30px",width:r,padding:"0px 5px",background:n.m_filterbgcolor,"-webkit-appearance":"none",border:"1px solid #E0DFDF","border-radius":"5px",margin:"0px 10px",color:n.m_filterfontcolor}),i.addEventListener("click",function(e){n.resetHiglightedNodes()}),i.addEventListener("change",function(e){e.preventDefault();e=i.value;n.filterData(e),n.fresetFlag="true",n.drawResetButton()}),this.filterdatavalue&&(i.value=this.filterdatavalue,n.filterData(this.filterdatavalue),n.fresetFlag="true",n.drawResetButton()),$("#draggableCanvas"+n.m_objectid).css("position","absolute"))},KnowledgeGraphChart.prototype.getMarginForFilter=function(){return $("#filterDiv"+this.m_objectid).height()+10},KnowledgeGraphChart.prototype.drawKnowledgeGraph=function(){var e,t=this,i=(this.m_width,+this.getMarginForTitle()+ +this.getMarginForSubTitle()),i=IsBoolean(t.m_designMode)?i:i+ +this.getMarginForFilter(),a=this.m_height-i-1,o=($("#chartDiv"+t.m_objectid).remove(),$("#textcanvas"+t.m_objectid).remove(),document.createElement("div"));return o.id="chartDiv"+t.m_objectid,o.style.height=a+"px",o.style.width="inherit",o.style.verticalAlign="middle",o.style.display="table-cell",o.style.textAlign="center",o.style.top=i+"px",o.style.position="absolute",o.style.overflowY="auto",o.style.overflowX="auto",$("#draggableDiv"+t.m_objectid).css("overflow-x","hidden"),$("#draggableDiv"+t.m_objectid).css("overflow-y","hidden"),$("#draggableDiv"+t.m_objectid).css("background",hex2rgb("#ffffff",this.m_bgalpha)),$("#draggableDiv"+t.m_objectid).append(o),IsBoolean(this.m_designMode)&&((e=document.createElement("div")).style.height=a+"px",e.style.background="transparent",e.style.width="inherit",e.style.top=i+"px",e.style.position="absolute",$("#draggableDiv"+t.m_objectid).append(e)),o},KnowledgeGraphChart.prototype.IsDrawingPossible=function(){return IsBoolean(this.isEmptyCategory)?{permission:"false",message:this.m_status.noCategory}:IsBoolean(this.m_isEmptyStartValue)&&IsBoolean(this.m_isEmptyEndValue)?{permission:"false",message:this.m_status.noDate}:{permission:"true",message:this.m_status.success}},KnowledgeGraphChart.prototype.setSourceData=function(){if(this.m_sourceData=[],this.isEmptySource=!0,0<this.getSourceNames().length){this.isEmptySource=!1;for(var e=0;e<this.getSourceNames().length;e++)this.m_sourceData[e]=this.getDataFromJSON(this.getSourceNames()[e])}this.m_seriesData=this.m_sourceData},KnowledgeGraphChart.prototype.setTargetData=function(){if(this.m_targetData=[],this.isEmptyTarget=!0,0<this.getTargetNames().length){this.isEmptySource=!1;for(var e=0;e<this.getTargetNames().length;e++)this.m_targetData[e]=this.getDataFromJSON(this.getTargetNames()[e])}},KnowledgeGraphChart.prototype.setEdgeData=function(){if(this.m_edgeData=[],this.isEmptyEdge=!0,0<this.getSourceNames().length){this.isEmptySource=!1;for(var e=0;e<this.getEdgeNames().length;e++)this.m_edgeData[e]=this.getDataFromJSON(this.getEdgeNames()[e])}},KnowledgeGraphChart.prototype.setValueData=function(){if(this.m_valueData=[],this.isEmptyValue=!0,null!=this.getValueNames()&&0<this.getValueNames().length){this.isEmptyValue=!1;for(var e=0;e<this.getValueNames().length;e++)this.m_valueData[e]=this.getDataFromJSON(this.getValueNames()[e])}},KnowledgeGraphChart.prototype.setTypeData=function(){if(this.m_typeData=[],this.isEmptyType=!0,null!=this.getTypeNames()&&0<this.getTypeNames().length){this.isEmptyType=!1;for(var e=0;e<this.getTypeNames().length;e++)this.m_typeData[e]=this.getDataFromJSON(this.getTypeNames()[e])}},KnowledgeGraphChart.prototype.setNodeSizeData=function(){if(this.m_nodeSizeData=[],this.isEmptynodeSize=!0,null!=this.getNodeSizeNames()&&0<this.getNodeSizeNames().length){this.isEmptyNodeSize=!1;for(var e=0;e<this.getNodeSizeNames().length;e++)this.m_nodeSizeData[e]=this.getDataFromJSON(this.getNodeSizeNames()[e])}},KnowledgeGraphChart.prototype.getSourceData=function(){return this.m_sourceData},KnowledgeGraphChart.prototype.getTargetData=function(){return this.m_targetData},KnowledgeGraphChart.prototype.getEdgeData=function(){return this.m_edgeData},KnowledgeGraphChart.prototype.getTypeData=function(){return this.m_typeData},KnowledgeGraphChart.prototype.getValueData=function(){return this.m_valueData},KnowledgeGraphChart.prototype.getnodeSizeData=function(){return this.m_nodeSizeData},KnowledgeGraphChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var e=0;e<this.getAllSourceNames().length;e++)this.m_allfieldsName.push(this.getAllSourceNames()[e]);for(e=0;e<this.getAllTargetNames().length;e++)this.m_allfieldsName.push(this.getAllTargetNames()[e]);for(e=0;e<this.getAllEdgeNames().length;e++)this.m_allfieldsName.push(this.getAllEdgeNames()[e])},KnowledgeGraphChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var e=0;e<this.getCategoryDisplayNames().length;e++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[e]);for(var t=0;t<this.getSeriesDisplayNames().length;t++)this.m_allfieldsDisplayName.push(this.getStartValueNames()[t]);for(t=0;t<this.getSeriesDisplayNames().length;t++)this.m_allfieldsDisplayName.push(this.getEndValueNames()[t]);for(t=0;t<this.getSeriesDisplayNames().length;t++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[t])},KnowledgeGraphChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},KnowledgeGraphChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},KnowledgeGraphChart.prototype.initializeCalculation=function(){this.setChartDrawingArea()},KnowledgeGraphChart.prototype.setStartX=function(){this.m_startX=+this.m_x},KnowledgeGraphChart.prototype.setEndX=function(){this.m_endX=+this.m_startX+ +this.m_width},KnowledgeGraphChart.prototype.setStartY=function(){this.m_startY=+this.m_y+this.m_height},KnowledgeGraphChart.prototype.setEndY=function(){this.m_endY=+this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()},KnowledgeGraphChart.prototype.getMarginForTitle=function(){return IsBoolean(this.getShowGradient())||IsBoolean(this.m_showmaximizebutton)||IsBoolean(this.getTitle().m_showtitle)?+this.getTitleBarHeight()+15:0},KnowledgeGraphChart.prototype.setRangeColors=function(){for(var e=this.m_ranges.split(","),t=0;t<Object.keys(this.m_nodeDataValue).length;t++)for(var i=Object.entries(this.m_nodeDataValue)[t][1],a=0;a<e.length;a++)(i>=e[a][0]||i<=e[a][0])&&(i=this.m_customnodeshapes.split(",")[a])},KnowledgeGraphChart.prototype.createTypeData=function(){var e,a,t,i=this;IsBoolean(i.m_usecustomshapes)&&"type"==this.m_shapeindicatortype&&(e=i.m_nodetypes.split(","),a=i.m_customnodetypeshapes.split(","),t=e.reduce((e,t,i)=>(e[t]=a[i],e),{}),i.m_groupshapes=t),IsBoolean(i.m_usecustomcolors)&&"type"==this.m_colorindicatortype&&(e=i.m_colortypes.split(","),a=i.m_customnodetypecolors.split(","),t=e.reduce((e,t,i)=>(e[t]=a[i],e),{}),i.m_groupcolors=t)},KnowledgeGraphChart.prototype.getDataItems=function(){var o,s,r,n,e,t=this,i=this.m_dataProvider,a=[],l=this.getSourceData(),h=this.getTargetData(),l=l[0].filter(function(e,t,i){return i.indexOf(e)===t}),h=h[0].filter(function(e,t,i){return i.indexOf(e)===t}),m=t.getSourceNames()[0],d=t.getTargetNames()[0],p=t.getEdgeNames()[0],g=t.getTypeNames()[0],u=t.getValueNames()[0],c=t.getNodeSizeNames()[0],_=(null!=g&&t.createTypeData(),null!=u&&(o={},i.forEach(function(e){isNaN(Number(e[u]))||(null==o[e[m]]&&(o[e[m]]=0),o[e[m]]+=+e[u],null==o[e[d]]&&(o[e[d]]=0),o[e[d]]+=+e[u])}),IsBoolean(t.m_usecustomshapes)&&"value"==this.m_shapeindicatortype&&(r=t.m_customshaperange.split(","),s=t.m_customnoderangeshapes.split(","),e=Object.keys(o).reduce(function(e,t){var i=o[t],a=r.findIndex(function(e){var e=e.split("~"),t=parseInt(e[0]),e=parseInt(e[1]);return t<=i&&i<=e});return-1!==a&&(e[t]=s[a]),e},{}),t.m_rangeShapes=e),IsBoolean(t.m_usecustomcolors))&&"value"==this.m_colorindicatortype&&(r=t.m_customcolorrange.split(","),n=t.m_customnoderangecolors.split(","),e=Object.keys(o).reduce(function(e,t){var i=o[t],a=r.findIndex(function(e){var e=e.split("~"),t=parseInt(e[0]),e=parseInt(e[1]);return t<=i&&i<=e});return-1!==a&&(e[t]=n[a]),e},{}),t.m_rangeColors=e),l.concat(h),{}),f=0;i.map(function(e,t,i){a[t]={},a[t].source=e[m],a[t].target=e[d],a[t].edge=e[p],a[t].group=e[g],a[t].nodeSize=e[c],null!=_[e[m]]?a[t].srcid=_[e[m]].id:(f++,a[t].srcid=f,_[e[m]]={},_[e[m]].id=f,_[e[m]].value=e[c],null!=o&&(_[e[m]].datavalue=o[e[m]])),null!=_[e[d]]?(a[t].trgid=_[e[d]].id,_[e[d]].group=e[g]):(f++,a[t].trgid=f,_[e[d]]={},_[e[d]].id=f,_[e[d]].group=e[g],_[e[d]].value=e[c],null!=o&&(_[e[d]].datavalue=o[e[d]]))}),this.createEdgeData(a),this.createleveldata(),this.createNodeData(_)},KnowledgeGraphChart.prototype.createleveldata=function(){var s=this.m_edgeData,r={},n={};s.reduce((e,t)=>(function i(a,o){n[a]||(r[a]=o,n[a]=!0,s.reduce((e,t)=>(t.from===a&&i(t.to,o+1),e),null))}(t.from,0),e),null),this.m_levels=r},KnowledgeGraphChart.prototype.createNodeData=function(e){var t,i,a,o,s,r,n=this,l=(this.m_nodeData=[],this.m_nodeDataValue,0);for(t in e)this.m_nodeData[l]={},this.m_nodeData[l].id=e[t].id,null!=e[this.m_nodeData[l].label=t].datavalue&&(this.m_nodeData[l].datavalue=e[t].datavalue),null!=e[t].group&&"defaultGroup"!=e[t].group&&(this.m_nodeData[l].type=e[t].group),null!=e[t].value&&(this.m_nodeData[l].size=e[t].value),this.m_nodeData[l].type&&(null!=this.m_groupshapes&&"type"==this.m_shapeindicatortype&&null!=this.m_groupshapes[this.m_nodeData[l].type]&&(-1<(i=this.m_groupshapes[this.m_nodeData[l].type]).indexOf("<svg")?(o="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(i),this.m_nodeData[l].shape="image",this.m_nodeData[l].image=o):-1<i.indexOf("bd-")?(s=n.getIconCode(i),r=null!=e[t].value?3*e[t].value:3*n.m_nodesize,this.m_nodeData[l].shape="icon",this.m_nodeData[l].iconName=i,this.m_nodeData[l].icon={face:"'bdbizviz'",code:s,size:r}):this.m_nodeData[l].shape=i),null!=this.m_groupcolors)&&null!=this.m_groupcolors[this.m_nodeData[l].type]&&"type"==this.m_colorindicatortype&&(this.m_nodeData[l].color=this.m_groupcolors[this.m_nodeData[l].type]),null!=n.getValueNames()[0]&&(IsBoolean(n.m_usecustomcolors)&&"value"==n.m_colorindicatortype&&null!=n.m_rangeColors[t]&&(this.m_nodeData[l].color=n.m_rangeColors[t]),IsBoolean(n.m_usecustomshapes))&&"value"==n.m_shapeindicatortype&&null!=n.m_rangeShapes[t]&&(-1<(i=n.m_rangeShapes[t]).indexOf("<svg")?(o="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(i),this.m_nodeData[l].shape="image",this.m_nodeData[l].image=o):-1<i.indexOf("bd-")?(s=n.getIconCode(i),r=null!=e[t].value?3*e[t].value:3*n.m_nodesize,this.m_nodeData[l].shape="icon",this.m_nodeData[l].iconName=i,this.m_nodeData[l].icon={face:"'bdbizviz'",code:s,size:r}):this.m_nodeData[l].shape=i),IsBoolean(n.m_usecustomcolors)&&"level"==n.m_colorindicatortype&&null!=(a=n.m_customnodelevelcolors.split(","))[n.m_levels[n.m_nodeData[l].id]]&&(this.m_nodeData[l].color=a[n.m_levels[n.m_nodeData[l].id]]),IsBoolean(n.m_usecustomshapes)&&"level"==n.m_shapeindicatortype&&null!=(a=n.m_customnodelevelshapes.split(",")[n.m_levels[n.m_nodeData[l].id]])&&(-1<a.indexOf("<svg")?(o="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(a),this.m_nodeData[l].shape="image",this.m_nodeData[l].image=o):-1<a.indexOf("bd-")?(s=n.getIconCode(a),r=null!=e[t].value?3*e[t].value:3*n.m_nodesize,this.m_nodeData[l].shape="icon",this.m_nodeData[l].iconName=a,this.m_nodeData[l].icon={face:"'bdbizviz'",code:s,size:r}):this.m_nodeData[l].shape=a),"icon"==this.m_nodeData[l].shape&&(this.m_nodeData[l].icon.color=this.m_nodeData[l].color||this.m_nodecolor),l++},KnowledgeGraphChart.prototype.createEdgeData=function(e){this.m_edgeData=[];for(var t=e,i=0;i<t.length;i++)this.m_edgeData[i]={},this.m_edgeData[i].from=t[i].srcid,this.m_edgeData[i].to=t[i].trgid,this.m_edgeData[i].label=t[i].edge},KnowledgeGraphChart.prototype.generateId=function(e){var a=0,o=[];return e.map(function(e,t,i){o[t]={},o.name=e,o[t].id=a++}),o},KnowledgeGraphChart.prototype.getNodeOptions=function(){var e=this,t={opacity:e.m_nodeopacity,size:Number(e.m_nodesize),font:{color:this.m_nodefontcolor,size:Number(this.m_nodefontsize),face:this.m_nodefontfamily},color:{background:this.m_nodecolor,highlight:{border:this.m_nodebordercolor,background:this.m_nodehovercolor},hover:{border:this.m_nodebordercolor,background:this.m_nodehovercolor}}};return"circle"!=e.m_nodeshape&&"box"!=e.m_nodeshape&&"ellipse"!=e.m_nodeshape&&"database"!=e.m_nodeshape||(t.widthConstraint=Number(e.m_nodesize)),t},KnowledgeGraphChart.prototype.getOptions=function(){var e=this,t=!IsBoolean(this.m_designMode),i=!IsBoolean(this.m_designMode),a=!IsBoolean(e.m_hierarchiallayuot),o=!!IsBoolean(e.m_hierarchiallayuot),o={width:"100%",height:"100%",nodes:{shape:e.m_nodeshape,opacity:Number(e.m_nodeopacity),size:Number(e.m_nodesize),margin:10,font:{color:this.m_nodefontcolor,size:Number(this.m_nodefontsize),face:this.m_nodefontfamily,vadjust:-10},color:{background:this.m_nodecolor,highlight:{border:this.m_nodebordercolor,background:this.m_nodecolor},hover:{border:this.m_nodebordercolor,background:this.m_nodehovercolor}}},layout:{improvedLayout:!1,hierarchical:{enabled:o,direction:e.m_hierarchydirection,sortMethod:"directed",parentCentralization:!1,edgeMinimization:!0,levelSeparation:500,nodeSpacing:100}},groups:{color:{border:this.m_nodebordercolor,highlight:{border:this.m_nodebordercolor,background:e.m_nodehovercolor},hover:{border:this.m_nodebordercolor,background:e.m_nodehovercolor}}},physics:{enabled:a,barnesHut:{gravitationalConstant:-800,springConstant:.001},maxVelocity:146,solver:"forceAtlas2Based",timestep:.35,stabilization:{iterations:150}},edges:{arrows:{to:{enabled:e.m_showarrows,type:"arrow"}},color:{},dashes:e.m_dashededge,font:{color:this.m_edgefontcolor,size:Number(this.m_edgefontsize),face:this.m_edgefontfamily,strokeWidth:0,align:this.m_edgelabelalign,multi:!1,vadjust:Number(this.m_edgelabelpadding)}},interaction:{hideEdgesOnDrag:!0,zoomView:i,dragView:t,hover:!0}};return"circle"!=e.m_nodeshape&&"box"!=e.m_nodeshape&&"ellipse"!=e.m_nodeshape&&"database"!=e.m_nodeshape||(o.nodes.widthConstraint=Number(e.m_nodesize)),"default"==e.m_edgecolorinherit?(o.edges.color.inherit=!1,o.edges.color.color=e.m_edgecolor,o.edges.color.hover=e.m_nodehovercolor,o.edges.color.highlight=e.m_nodehovercolor):o.edges.color.inherit=e.m_edgecolorinherit,IsBoolean(e.m_usecustomcolors)||(o.nodes.color.border=e.m_nodebordercolor),o},KnowledgeGraphChart.prototype.drawResetButton=function(){var s=this,e=($("#reseticon"+s.m_objectid).remove(),IsBoolean(this.m_showmaximizebutton)||IsBoolean(this.m_showlegends)&&IsBoolean(this.m_fixedlegend)?IsBoolean(this.m_showsettingmenubutton)?this.m_width-this.fontScaling(25)-60:this.m_width-this.fontScaling(25)-30:IsBoolean(this.m_showsettingmenubutton)?this.m_width-this.fontScaling(25)-30:this.m_width-this.fontScaling(25)),t=this.m_title.startY-this.fontScaling(10),i=this.fontScaling(16),e=this.drawFontIcons("reseticon","",e,t,"bd-refresh",i),r=(e.setAttribute("id","reseticon"+s.m_objectid),$(e).on("click",function(){var e,t;s.filterdatavalue="",$("#resetTooltipDiv").remove(),IsBoolean(s.fresetFlag)&&($("#textcanvas"+s.m_objectid).remove(),$("#chartDiv"+s.m_objectid).css("display","block"),$("#filterinput"+s.m_objectid)[0].value="",t=s.m_nodeData.map(function(e){return Object.assign({},e)}),e=s.m_edgeData.map(function(e){return Object.assign({},e)}),t={nodes:new vis.DataSet(t),edges:new vis.DataSet(e)},s.m_network.setData(t),s.highlightActive=!1,s.fresetFlag="false"),s.m_network.fit(),$("#reseticon"+s.m_objectid).remove()}),selectGlobalFont(this.m_title.m_fontfamily)),n=(IsBoolean(this.m_showmaximizebutton)||IsBoolean(this.m_showlegends)&&IsBoolean(this.m_fixedlegend)?this.fontScaling(50):this.fontScaling(30),IsBoolean(this.m_showmaximizebutton)||IsBoolean(this.m_showlegends)&&IsBoolean(this.m_fixedlegend)?"settingIcon":"minMax");this.m_title.startY;IsBoolean(isTouchEnabled)||s.m_designMode||$("#reseticon"+s.m_objectid).hover(function(e){var t=document.getElementById("draggablesParentDiv"+s.m_dashboard.m_id),i=(t.scrollLeft,t.scrollTop,$(t).offset()),a=i.top+$(t)[0].clientTop-$(t)[0].scrollTop,i=i.left+$(t)[0].clientLeft-$(t)[0].scrollLeft,t=e.pageY-e.offsetY+$(this)[0].offsetHeight-a+1+"px",a=e.pageX-e.offsetX+$(this)[0].offsetWidth/2-i+8+"px",o=document.createElement("div"),t=(o.innerHTML="Reset",o.setAttribute("class",n),o.setAttribute("placement","bottom"),o.setAttribute("id","resetTooltipDiv"),$(o).css({"font-family":r,"font-size":"12px",top:t,left:a,"z-index":1e4,border:"1px solid #e0dfdf",padding:"24px",position:"absolute","border-radius":"6px","background-color":"#ffffff"}),$("#draggablesParentDiv"+s.m_dashboard.m_id).append(o),e.pageX-e.offsetX+$(this)[0].offsetWidth-o.offsetWidth-i+28+"px");$(o).css({left:t})},function(){$("#resetTooltipDiv").remove()})},KnowledgeGraphChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},KnowledgeGraphChart.prototype.drawTitle=function(){this.m_title.draw()},KnowledgeGraphChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},KnowledgeGraphChart.prototype.getToolTipData=function(e,t){},KnowledgeGraphChart.prototype.drawTooltipContent=function(e){this.m_tooltip.draw(e,this.m_componenttype)},KnowledgeGraphChart.prototype.getDrillDataPoints=function(e,t){};
//# sourceMappingURL=KnowledgeGraphChart.min.js.map