/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function HierarchicalCombo(e,t){this.base=Filter,this.base(),this.m_x=450,this.m_y=30,this.m_width=100,this.m_height=30,this.m_hierDropDownWidth=10,this.m_hierDropDownHeight=120,this.m_HierTabLeftMargin=50,this.m_HierTabTopMargin=60,this.m_roots=[],this.m_chipRemoved=!1;this.m_dragDivToFilterMargin=4,this.m_controlleddrill=!1,this.finalArray=[{id:1,name:"City",parentId:0},{id:11,name:"Albin",parentId:1},{id:112,name:"Albin1",parentId:11}],this.m_objectID=[],this.m_componentid="",this.mapToPutInArray={},this.cid=0,this.m_root,this.m_nodeArr=[],this.selectedRecordArray=[],this.m_panelId="",this.m_chartContainer=e,this.m_zIndex=t,this.m_hierarchytype=[],this.m_visible=[],this.m_displayname=[],this.m_name=[],this.m_fieldaggregation=[],this.m_currentIndexSelect="",this.m_previousIndexSelect="",this.updateflag=!1,this.onExpandflag=!1,this.onCollapseflag=!1,this.m_categoryName=[],this.m_seriesName=[],this.m_menupanelfontcolor="",this.m_menupanelfontsize="12",this.m_menupanelrowheight=30,this.m_textboxmargin=2,this.m_cursortype="pointer",this.m_bordercolor="#d3d3d3",this.m_chromecolorpanel="",this.m_panelborderradius="",this.m_advancetheme="default",this.m_advanceproperties={borderColor:"",iconColor:"",borderRadius:"",rightActionIconPadding:"",rightIconPadding:"",borderWidth:"",showParentCheckbox:"true"},this.m_advancehighlighter={borderColor:"#808080",borderWidth:"3",borderStyle:"solid"},this.m_showselectionlimitui={borderColor:"",borderRadius:"",borderWidth:"",width:""},this.m_showonselectionlimit=!1,this.m_childnodeproperties={backgroundColor:"",fontColor:"",selectionColor:"",selectionFontColor:"",rolloverColor:"",rolloverFontColor:""},this.m_expandiconsize=10}function convert(e){for(var t=[],o=0;o<e.length;o++)!function(e,t){for(var o=0;o<e.length;o++)if(e[o].id==t)return 1}(e,(r=e[o]).parentId)&&t.push({id:r.id,text:r.name,state:"closed"});for(var i=[],o=0;o<t.length;o++)i.push(t[o]);for(;i.length;)for(var r,n,a=i.shift(),o=0;o<e.length;o++)(r=e[o]).parentId==a.id&&(n={id:r.id,text:r.name,state:"closed"},a.children?a.children.push(n):a.children=[n],i.push(n));return t}function searchTree(e,t){if(e.name==t)return e;if(null==e.children)return null;for(var o=null,i=0;null==o&&i<e.children.length;i++)o=searchTree(e.children[i],t);return o}HierarchicalCombo.prototype=new Filter,HierarchicalCombo.prototype.setProperty=function(e){this.ParseJsonAttributes(e.Object,this),this.initCanvas()},HierarchicalCombo.prototype.getDataProvider=function(){return this.m_dataProvider},HierarchicalCombo.prototype.ParseJsonAttributes=function(e,t){for(var o in this.chartJson=e)if("Filter"==o)for(var i in e[o])"DataSet"!==i&&(t[this.getNodeAttributeName(i)]=e[o][i]);else t[this.getNodeAttributeName(o)]=e[o]},HierarchicalCombo.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas(this.m_chartContainer,this.m_zIndex)},HierarchicalCombo.prototype.setDashboardNameAndObjectId=function(){this.m_objectId=this.m_objectid,2==this.m_objectid.split(".").length&&(this.m_objectid=this.m_objectid.split(".")[1]),this.m_componentid="ComboTree"+this.m_objectid},HierarchicalCombo.prototype.setFields=function(e){this.m_fieldsJson=e,this.m_fields=[],this.m_fieldDisplayName=[],this.m_Value=[],this.m_additionalFields=[];this.m_hierarchytype=[],this.m_visible=[],this.m_displayname=[],this.m_name=[],this.m_namebyhierarchyType={};for(var t=0;t<e.length;t++)this.m_name[t]=this.getProperAttributeNameValue(e[t],"Name"),this.m_hierarchytype[t]=this.getProperAttributeNameValue(e[t],"hierarchyType"),this.m_displayname[t]=this.getProperAttributeNameValue(e[t],"DisplayName"),this.m_visible[t]=this.getProperAttributeNameValue(e[t],"visible"),this.m_namebyhierarchyType[this.m_hierarchytype[t]]=this.m_name[t],this.m_fieldaggregation[t]=this.getProperAttributeNameValue(e[t],"parentAggregation");this.setCategoryNames(e),this.setSeriesNames(e),this.setFieldsByNames(e),this.setNoneFieldsByNames(e),this.setCss()},HierarchicalCombo.prototype.setCategoryNames=function(e){this.m_categoryName=[];for(var t=0;t<e.length;t++)""==this.getProperAttributeNameValue(e[t],"Name")?this.m_categoryName[t]=this.getProperAttributeNameValue(e[t],"Value"):this.m_categoryName[t]=this.getProperAttributeNameValue(e[t],"Name")},HierarchicalCombo.prototype.setSeriesNames=function(e){this.m_seriesName=[];for(var t=0;t<e.length;t++)""==this.getProperAttributeNameValue(e[t],"DisplayName")?this.m_seriesName[t]=this.getProperAttributeNameValue(e[t],"DisplayField"):this.m_seriesName[t]=this.getProperAttributeNameValue(e[t],"DisplayName")},HierarchicalCombo.prototype.setFieldsByNames=function(e){this.m_fieldByName=[];for(var t=0;t<e.length;t++){var o=this.getProperAttributeNameValue(e[t],"hierarchyType");"parent"!=o&&"child"!=o||this.m_fieldByName.push(this.getProperAttributeNameValue(e[t],"Name"))}},HierarchicalCombo.prototype.setNoneFieldsByNames=function(e){this.m_noneFieldByName=[];for(var t=0;t<e.length;t++)"none"==this.getProperAttributeNameValue(e[t],"hierarchyType")&&this.m_noneFieldByName.push(this.getProperAttributeNameValue(e[t],"Name"))},HierarchicalCombo.prototype.setCss=function(){this.m_chromecolorpanel=void 0!==this.m_chromecolorpanel&&""!==this.m_chromecolorpanel?this.m_chromecolorpanel:this.m_chromecolor,this.m_panelborderradius=void 0!==this.m_panelborderradius?this.m_panelborderradius:this.m_filterborderradius,this.m_advancetheme=void 0!==this.m_advancetheme?this.m_advancetheme:"default",this.m_menupanelfontcolor=void 0!==this.m_menupanelfontcolor&&""!==this.m_menupanelfontcolor?this.m_menupanelfontcolor:this.m_fontcolor},HierarchicalCombo.prototype.getSeriesNames=function(){return this.m_seriesName},HierarchicalCombo.prototype.getCategoryNames=function(){return this.m_categoryName},HierarchicalCombo.prototype.getFieldsByNames=function(){return this.m_fieldByName},HierarchicalCombo.prototype.getNoneFieldsByNames=function(){return this.m_noneFieldByName},HierarchicalCombo.prototype.drawObject=function(){this.m_isDataSetavailable||IsBoolean(this.m_designMode)?this.getDataProvider()?(this.init(),0<this.m_seriesData.length?this.drawChart():this.drawMessage("No Field Available")):this.drawMessage(this.m_status.noData):this.drawMessage(this.m_status.noDataset)},HierarchicalCombo.prototype.init=function(){this.setCategoryData(),this.setSeriesData(),"Multiple"==this.m_hierarchylevel||"Single"==this.m_hierarchylevel||"single"==this.m_hierarchylevel||""==this.m_hierarchylevel?(this.globalArray=[],this.finalArray=[],this.m_roots=[],this.m_roots=this.getDataProvider()):(this.m_categoryData=this.getCategoryData(),this.m_seriesData=this.getSeriesData(),this.m_root=this.createTree(),this.m_root&&this.m_root.createChild(this.m_nodeArr))},HierarchicalCombo.prototype.isProperData=function(){if("Single"!=this.m_hierarchylevel||IsBoolean(this.m_designMode))return 0==this.getDataProvider().length?{status:!1,msg:this.m_status.noData}:{status:!0,msg:"OK"};if(0==this.getDataProvider().length)return{status:!1,msg:this.m_status.noData};for(var e=0;e<this.m_roots.length;e++)for(var t=0;t<this.m_name.length;t++)if((this.m_name[t]==this.m_namebyhierarchyType.parent||this.m_name[t]==this.m_namebyhierarchyType.child)&&(isNaN(this.m_roots[e][this.m_name[t]])||""===this.m_roots[e][this.m_name[t]]))return{status:!1,msg:"Invalid Data!"};return{status:!0,msg:"OK"}},HierarchicalCombo.prototype.drawChart=function(){if(this.isProperData().status){this.removeMessage(),this.selectdiv=this.createSelectBoxDivision(),this.createSelectBox(this.selectdiv),"Multiple"==this.m_hierarchylevel?this.drawMultiHierarchyComboTree():"Single"==this.m_hierarchylevel||"single"==this.m_hierarchylevel?this.drawSingleHierarchyComboTree():this.drawComboTree();try{IsBoolean(this.m_allowmultipleselection)?this.initJeasyUIMultiSelectComboTree():this.initJeasyUISingleSelectComboTree(),this.openPanelOnClickOfTextBox(),this.setDefaultValueToShowInComboTree(),this.setComboPanelId(),this.createActionIcons(),this.setHierComboCSS()}catch(e){}}else $("#ComboTree"+this.m_objectid).remove(),this.drawMessage(this.isProperData().msg)},HierarchicalCombo.prototype.setSeriesData=function(){this.m_seriesData=[];for(var e=0;e<this.getSeriesNames().length;e++)this.m_seriesData[e]=this.getDataFromJSON(this.getSeriesNames()[e])},HierarchicalCombo.prototype.getSeriesData=function(){return this.m_seriesData},HierarchicalCombo.prototype.setCategoryData=function(){this.m_categoryData=[];for(var e=0;e<this.getCategoryNames().length;e++)this.m_categoryData[e]=this.getDataFromJSON(this.getCategoryNames()[e])},HierarchicalCombo.prototype.getCategoryData=function(){return this.m_categoryData},HierarchicalCombo.prototype.createSelectBoxDivision=function(){$("#"+this.m_componentid).remove();var e=document.createElement("div");return e.setAttribute("id",this.m_componentid),e.style.display="block",e.style.position="absolute",e.style.height=this.m_height-2*this.m_textboxmargin+"px",e.style.width=this.m_width-2*this.m_textboxmargin+"px",e.style.margin=this.m_textboxmargin+"px",$("#draggableDiv"+this.m_objectid).append(e),e},HierarchicalCombo.prototype.createSelectBox=function(e){$("#ComboTree"+this.m_componentid).remove();var t=document.createElement("input");t.id="ComboTree"+this.m_componentid,t.style.width=+this.m_width-2*this.m_textboxmargin+"px",t.style.height=+this.m_height-2*this.m_textboxmargin+"px",t.style.font=this.m_fontstyle+" "+this.m_fontweight+" "+this.fontScaling(this.m_fontsize)+"px "+selectGlobalFont(this.m_fontfamily),e.appendChild(t)},HierarchicalCombo.prototype.drawMultiHierarchyComboTree=function(){if(null!=this.m_roots&&"Multiple"==this.m_hierarchylevel){var e=this.getFieldsByNames(),t=new Object;t.NoneFields=new Object;for(var o=0;o<this.m_roots.length;o++)this.arrangeDataIntoMap(this.m_roots,t,o,e,0);this.cid=0,this.convertInArray(t,0);for(var i=0;i<this.globalArray.length;i++)this.mapToPutInArray={},this.mapToPutInArray.name=this.globalArray[i][0],this.mapToPutInArray.id=this.globalArray[i][1],this.mapToPutInArray.parentId=this.globalArray[i][2],this.mapToPutInArray.NoneFields=this.globalArray[i][3],this.finalArray.push(this.mapToPutInArray)}},HierarchicalCombo.prototype.arrangeDataIntoMap=function(e,t,o,i,r){if(r<i.length){var n=e[o][i[r]];if(null==t[n]){t[n]=new Object,t[n].NoneFields={};for(var a=0;a<this.getNoneFieldsByNames().length;a++)t[n].NoneFields[this.getNoneFieldsByNames()[a]]=e[o][this.getNoneFieldsByNames()[a]]}else for(a=0;a<this.getNoneFieldsByNames().length;a++)t[n].NoneFields[this.getNoneFieldsByNames()[a]]+="~"+e[o][this.getNoneFieldsByNames()[a]];if(!this.arrangeDataIntoMap(e,t[n],o,i,++r))return!1}},HierarchicalCombo.prototype.convertInArray=function(e,t){for(var o in e){var i;"NoneFields"!=o&&(i=e[o],this.cid++,o=[o,this.cid,t,e[o].NoneFields],this.globalArray.push(o),this.convertInArray(i,this.cid))}},HierarchicalCombo.prototype.drawSingleHierarchyComboTree=function(){this.finalArray=[];for(var e=0;e<this.m_roots.length;e++){for(var t={},o=0;o<this.m_name.length;o++)this.m_roots[e][this.m_namebyhierarchyType.parent]==this.m_roots[e][this.m_namebyhierarchyType.child]&&(this.m_roots[e].parentid=0),this.m_name[o]==this.m_namebyhierarchyType.parent?(t.parentId={},t.parentId=this.m_roots[e][this.m_name[o]]):this.m_name[o]==this.m_namebyhierarchyType.child?(t.id={},t.id=this.m_roots[e][this.m_name[o]]):(t.name={},t.name=this.m_roots[e][this.m_name[o]]);this.finalArray.push(t)}},HierarchicalCombo.prototype.drawComboTree=function(){var e=this.getWhiteDivision();this.m_root&&this.createUlLiSpanDivision(e),this.createDropDownDivision()},HierarchicalCombo.prototype.initJeasyUISingleSelectComboTree=function(){var t=this;jqEasyUI("#ComboTree"+t.m_componentid).combotree({data:this.finalArray,state:closed,loadFilter:function(e){return convert(e)},advanceTheme:t.m_advancetheme,onClick:function(e){t.setPanelExpandCollapse(e),jqEasyUI("#ComboTree"+t.m_componentid).combotree("showPanel"),t.setPanelScroll(),jqEasyUI("#ComboTree"+t.m_componentid).combotree("setValue",e.id),t.m_currentIndexSelect=$("#ComboTree"+t.m_componentid).combotree("getValue")},onShowPanel:function(){$("#SearchTextBox"+t.m_componentid).val(""),$("#combotreeDiv"+t.m_panelId+" .tree-node").show(),t.setHierComboCSS()},onHidePanel:function(){IsBoolean(t.updateflag)?t.updateflag=!1:""!=t.m_previousIndexSelect&&(jqEasyUI("#ComboTree"+t.m_componentid).combotree("clear"),jqEasyUI("#ComboTree"+t.m_componentid).combotree("setValue",t.m_previousIndexSelect)),t.setHierComboCSS()}})},HierarchicalCombo.prototype.initJeasyUIMultiSelectComboTree=function(){var o=this;jqEasyUI("#ComboTree"+o.m_componentid).combotree({data:this.finalArray,temp:o,multiple:!0,cascadeCheck:!IsBoolean(o.m_controlledselection),advanceTheme:o.m_advancetheme,showCheckBox:IsBoolean(o.m_advanceproperties.showParentCheckbox),onLoadSuccess:function(e,t){o.setHierComboCSS()},loadFilter:function(e){e=convert(e);return e.d||e},onClick:function(e){o.setPanelExpandCollapse(e),jqEasyUI("#ComboTree"+o.m_componentid).combotree("showPanel"),o.setPanelScroll()},onShowPanel:function(){$("#SearchTextBox"+o.m_componentid).val(""),$("#combotreeDiv"+o.m_panelId+" .tree-node").show(),o.setPanelScroll()},onHidePanel:function(){o.panelOpen=!1,IsBoolean(o.updateflag)?o.updateflag=!1:IsBoolean(o.onExpandflag)||IsBoolean(o.onCollapseflag)?(o.onExpandflag=!1,o.onCollapseflag=!1,jqEasyUI("#ComboTree"+o.m_componentid).combotree("clear"),""!=o.m_previousIndexSelect&&jqEasyUI("#ComboTree"+o.m_componentid).combotree("setValues",o.m_previousIndexSelect)):(jqEasyUI("#ComboTree"+o.m_componentid).combotree("clear"),Array.isArray(o.m_previousIndexSelect)?""!=o.m_previousIndexSelect&&jqEasyUI("#ComboTree"+o.m_componentid).combotree("setValues",o.m_previousIndexSelect):jqEasyUI("#ComboTree"+o.m_componentid).combotree("setValue",o.m_previousIndexSelect)),o.setHierComboCSS()},onExpand:function(e){o.onExpandflag=!0,o.setPanelScroll(),"open"!==e.state&&(jqEasyUI("#ComboTree"+o.m_componentid).combotree("hidePanel"),jqEasyUI("#ComboTree"+o.m_componentid).combotree("showPanel"))},onCollapse:function(e){o.onCollapseflag=!0},onChange:function(){o.m_currentIndexSelect=$("#ComboTree"+o.m_componentid).combotree("getValues");var e=o.finalArray.map(function(e){return e.id});IsBoolean(o.m_hideokbutton)&&(0<o.m_currentIndexSelect.length?$("#OK"+o.m_componentid).css("display","block"):$("#OK"+o.m_componentid).css("display","none")),o.m_currentIndexSelect.length==e.length?$("#SelectAll"+o.m_componentid).removeClass("bd-checkbox").addClass("bd-checked"):$("#SelectAll"+o.m_componentid).removeClass("bd-checked").addClass("bd-checkbox"),"Multiple"==o.m_hierarchylevel&&!IsBoolean(o.m_controlledselection)&&IsBoolean(o.m_customselection)&&(e=o.m_currentIndexSelect.length+"/"+o.m_selectionlimit,$("#ComboTreeSelectionLimit"+o.m_componentid).val(e),IsBoolean(o.m_showonselectionlimit))&&(o.m_currentIndexSelect.length!==o.m_selectionlimit?$("#OK"+o.m_componentid).css("display","none"):$("#OK"+o.m_componentid).css("display","block"))}})},HierarchicalCombo.prototype.setPanelExpandCollapse=function(e){var t=jqEasyUI("#ComboTree"+this.m_componentid).combotree("tree");"closed"==e.state?(t.tree("expand",e.target),$(e.target).find(".icons.bd-plus").removeClass("icons bd-plus").addClass("icons bd-minus")):(t.tree("collapse",e.target),$(e.target).find(".icons.bd-minus").removeClass("icons bd-minus").addClass("icons bd-plus"))},HierarchicalCombo.prototype.setPanelScroll=function(){jqEasyUI("#ComboTree"+this.m_componentid).combotree("tree");$("#combotreeDiv"+this.m_panelId).css({width:"100%","border-radius":"0px"})},HierarchicalCombo.prototype.openPanelOnClickOfTextBox=function(){var e=this;e.panelOpen=!1,e.m_designMode?$("#"+e.m_componentid).on("click",function(){$(".panel.combo-p").css("display","none")}):$("#"+e.m_componentid).find("input.combo-text").on("click",function(){e.panelOpen?(e.panelOpen=!1,jqEasyUI("#ComboTree"+e.m_componentid).combotree("hidePanel")):(e.panelOpen=!0,jqEasyUI("#ComboTree"+e.m_componentid).combotree("showPanel"))})},HierarchicalCombo.prototype.setDefaultValueToShowInComboTree=function(){var e="Select",o=this,t=[],i=(this.m_previousIndexSelect=[],this.getFilterChipsComponentObj());if(void 0!==i&&0<i.m_legendObjectArr.length){var r,n=i.m_filterDisplayValues[this.m_objectid];void 0!==i.m_removedChipValue&&IsBoolean(o.m_allowmultipleselection)?o.m_previousIndexSelect=[]:o.selectedRecordArray=[],""!==this.m_associatedfilterchipsid&&void 0!==i.m_removedChipValue&&(r=this.m_dataProvider.filter(function(e){for(var t in e)if(e[t]==i.m_removedChipValue)return e}),removedInd=this.finalArray.indexOf(i.m_removedChipValue)),void 0!==n&&0<n.length&&void 0!==r&&0<r.length&&r.map(function(e){var t;0<=n.indexOf(e[o.m_categoryName[0]])&&0<=(t=n.indexOf(e[o.m_categoryName[0]]))&&n.splice(t,1),0<=n.indexOf(e[o.m_categoryName[1]])&&0<=(t=n.indexOf(e[o.m_categoryName[1]]))&&n.splice(t,1)}),o.m_previousIndexSelect=0==n.length?[]:o.m_currentIndexSelect;for(var a=0;a<o.finalArray.length;a++)if(i.m_removedChipValue!==o.finalArray[a].name){o.m_currentIndexSelect=[];break}if(0<i.m_legendObjectArr.length&&0<o.m_previousIndexSelect.length&&void 0!==i.m_removedChipValue)jqEasyUI("#ComboTree"+o.m_componentid).combotree("setValues",o.m_previousIndexSelect),i.m_removedChipValue=void 0;else{var s=Array.isArray(o.m_previousIndexSelect)?o.m_previousIndexSelect.map(Number):[];if(!IsBoolean(this.m_designMode)&&0<s.length){var l=sdk.getGlobalVariable(this.m_referenceid).attributes,c=this.finalArray.map(function(e){var t,o={};for(t in e)o[t]=e[t];return o}),h=this.createHierarichalData(c),m=null,d=0;for(g in l){var p=l[g].split(",");if(""!=l[g]){if(0==d){var u=[],f=0;for(a=0;a<p.length;a++)for(var _=0;_<h.length;_++)if(null!=(m=searchTree(h[_],p[a]))){u[f]=m,f++;break}}else if(null!=u)for(this.m_previousIndexSelect=[],a=0;a<u.length;a++)this.m_previousIndexSelect.push(String(u[a].id));d++}}if(null!=u)for(t=[],a=0;a<u.length;a++)t.push(String(u[a].id));else t=[-1],o.m_previousIndexSelect=[-1]}jqEasyUI("#ComboTree"+o.m_componentid).combotree("setValues",o.m_previousIndexSelect)}}else{s=Array.isArray(o.m_previousIndexSelect)?o.m_previousIndexSelect.map(Number):[];for(g in this.finalArray)if(null!=this.finalArray[g].parentId)if(e=this.finalArray[0].id,0<s.length)-1<s.indexOf(this.finalArray[g].id)&&t.push(this.finalArray[g].id);else if(IsBoolean(this.m_designMode)){if(0==this.finalArray[g].parentId){e=this.finalArray[g].id,t.push(this.finalArray[g].id);break}}else if(IsBoolean(this.m_designMode)||IsBoolean(this.m_chipRemoved))e="Select";else if(0==this.finalArray[g].parentId){e=this.finalArray[g].id,t.push(this.finalArray[g].id);break}if(!IsBoolean(this.m_designMode)&&0<s.length){var g,l=sdk.getGlobalVariable(this.m_referenceid).attributes,c=this.finalArray.map(function(e){var t,o={};for(t in e)o[t]=e[t];return o}),h=this.createHierarichalData(c),m=null,d=0;for(g in l)if(""!=l[g]){if(0==d)for(_=0;_<h.length&&null==(m=searchTree(h[_],l[g]));_++);else null!=m&&this.m_previousIndexSelect.push(m.id);d++}null!=m&&((t=[]).push(m.id),e=m.id)}if("Multiple"==o.m_hierarchylevel&&o.m_allowmultipleselection&&!IsBoolean(o.m_controlledselection)&&IsBoolean(o.m_customselection)){if(o.isSingleChild=!1,1<o.m_hierarchytype.length){for(d=0,_=0;_<o.m_hierarchytype.length;_++)"none"!=o.m_hierarchytype[_]&&d++;o.isSingleChild=!(2<d)&&0<s.length}if(o.isSingleChild){for(var b,a=0;a<this.finalArray.length;a++)0==this.finalArray[a].parentId&&-1<t.indexOf(this.finalArray[a].id)&&(b=t.indexOf(this.finalArray[a].id),t.splice(b,1));""!=o.m_selectionlimit&&o.m_selectionlimit<t.length&&t.splice(o.m_selectionlimit,t.length)}}0==(this.m_previousIndexSelect=t).length&&(this.m_previousIndexSelect=e),0<s.length&&0<t.length?jqEasyUI("#ComboTree"+o.m_componentid).combotree("setValues",t):jqEasyUI("#ComboTree"+o.m_componentid).combotree("setValue",e)}IsBoolean(this.m_enablegvautoupdate)&&(this.m_notifychange=this.m_notifygvautoupdate,this.getValueAndUpdateGlobalVariable())},HierarchicalCombo.prototype.createHierarichalData=function(e){for(var t={},o=0;o<e.length;o++){var i=e[o],r=(i.children=[],(t[i.id]=i).parentId||"0");t[r]||(t[r]={children:[]}),t[r].children.push(i)}return t[0]?t[0].children:[]},HierarchicalCombo.prototype.compareDefaultValue=function(e,t){for(var o=t,i=sdk.getGlobalVariable(this.m_referenceid).attributes,r=0;r<e.length;r++)if(null!=i[e[r]]&&""!=i[e[r]])for(var n=0;n<this.finalArray.length;n++)i[e[r]]==this.finalArray[n].name&&(o=this.finalArray[n].id);return o},HierarchicalCombo.prototype.setComboPanelId=function(){for(var e=$(".combo-panel"),e=document.getElementsByClassName("combo-panel"),t=0;t<e.length;t++)e[t].id="combotreeDiv"+t;this.m_panelId=t-1},HierarchicalCombo.prototype.createActionIcons=function(){var d=this,e=(d.m_selectAll="Select All",$("#OK"+d.m_componentid).remove(),$("#Cancel"+d.m_componentid).remove(),$("#SelectAll"+d.m_componentid).remove(),d.m_menupanelfontsize),t=d.createSearchBox(),o=0,i=document.createElement("input"),r=document.createElement("div"),n=+d.m_menupanelrowheight+2*d.m_searchboxuiobj.margin,a=(r.setAttribute("id","SearchBoxDiv"+d.m_componentid),d.setAdvanceThemeCSS()),s=d.setSelectionLimitCSS(),l=($(r).css({display:"block",height:n+"px",width:"100%","background-color":d.m_hexChromeColor,"padding-right":"2px"}),"Multiple"==d.m_hierarchylevel&&!IsBoolean(d.m_controlledselection)&&IsBoolean(d.m_customselection)&&IsBoolean(d.m_showselectionlimit)?($("#ComboTreeSelectionLimit"+d.m_componentid).remove(),i.id="ComboTreeSelectionLimit"+d.m_componentid,o=s.width,$(i).css({width:o+"px",height:+d.m_menupanelrowheight+"px",border:d.m_searchboxuiobj.border+"px","border-style":d.m_searchboxuiobj.borderStyle,display:"block","border-color":d.m_searchboxuiobj.borderColor,"background-color":d.m_searchboxuiobj.backgroundColor,margin:d.m_searchboxuiobj.margin+"px",padding:d.m_searchboxuiobj.padding+"px",color:convertColorToHex(d.m_fontcolor),"font-size":d.m_fontsize*d.minWHRatio()+"px","font-family":selectGlobalFont(d.m_fontfamily),"font-weight":d.m_fontweight,"font-style":d.m_fontstyle,"border-width":s.borderWidth+"px","border-color":convertColorToHex(s.borderColor),"border-radius":s.borderRadius+"px",position:"relative",float:"left"}),s=jqEasyUI("#ComboTree"+d.m_componentid).combotree("getValues").length+"/"+d.m_selectionlimit,$(i).val(s),r.appendChild(i)):i.style.display="none",void 0!==d.m_advancetheme&&"advance"==d.m_advancetheme?($(t).css({width:"calc(100% - "+(2*a.rightActionIconPadding+d.m_fontsize*d.minWHRatio()*2)+"px)","border-radius":a.borderRadius+"px","border-color":convertColorToHex(a.borderColor),"border-width":a.borderWidth+"px"}),$(r).append(t),s="<span class='icons bd-close' value='' id=\"Cancel"+d.m_componentid+"\" style='color:"+convertColorToHex(a.iconColor)+";font-size:"+e+"px; cursor:pointer; position:relative;float:right;line-height:"+n+"px;padding-right: "+a.rightActionIconPadding+"px;'></span>",n="<span class='icons bd-check-2' value='' id=\"OK"+d.m_componentid+"\" style='color:"+convertColorToHex(a.iconColor)+";font-size:"+e+"px; cursor:pointer; position:relative;float:right;line-height:"+n+"px;padding-right: "+a.rightActionIconPadding+"px;'></span>",$(r).append(i),$(r).append(s),$(r).append(n),$(r).insertBefore($("#combotreeDiv"+d.m_panelId).find(".tree")),$("#combotreeDiv"+d.m_panelId).find(".tree").css({"max-height":"calc(100% - "+(2*d.m_searchboxuiobj.margin+ +d.m_menupanelrowheight)+"px)",overflow:"auto"})):(s=IsBoolean(d.m_allowmultipleselection)?"<div style='position:absolute;bottom:0px;padding:4px 2px 0px 2px;width:100%;height:24px;background:"+convertColorToHex(d.m_chromecolorpanel)+";box-shadow: 0px 1px 2px 2px rgba(0,0,0,0.1)'><span class='icons bd-checkbox' value='' id=\"SelectAll"+d.m_componentid+"\" style='color:"+convertColorToHex(d.m_menupanelfontcolor)+";font-size:"+e+"px; cursor:pointer; position:relative;float:left;padding:2px 5px 0px 5px;'></span><span class='icons bd-close' value='' id=\"Cancel"+d.m_componentid+"\" style='color:"+convertColorToHex(d.m_menupanelfontcolor)+";font-size:"+e+"px; cursor:pointer; position:relative;float:right;padding:0px 5px 0px 5px;'></span><span class='icons bd-check-2' value='' id=\"OK"+d.m_componentid+"\" style='color:"+convertColorToHex(d.m_menupanelfontcolor)+";font-size:"+e+"px; cursor:pointer; position:relative;float:right;padding:0px 5px 0px 10px;'></span></div>":"<div style='position:absolute;bottom:0px;padding:4px 2px 0px 2px;width:100%;height:24px;background:"+convertColorToHex(d.m_chromecolorpanel)+";box-shadow: 0px 1px 2px 2px rgba(0,0,0,0.1)'><span class='icons bd-close' value='' id=\"Cancel"+d.m_componentid+"\" style='color:"+convertColorToHex(d.m_menupanelfontcolor)+";font-size:"+e+"px; cursor:pointer; position:relative;float:right;padding:2px 5px 0px 5px;'></span><span class='icons bd-check-2' value='' id=\"OK"+d.m_componentid+"\" style='color:"+convertColorToHex(d.m_menupanelfontcolor)+";font-size:"+e+"px; cursor:pointer; position:relative;float:right;padding:0px 10px 0px 5px;'></span></div>",$(t).css({width:"calc(100% - "+(2*a.rightIconPadding+ +o)+"px)","border-radius":d.m_panelborderradius+"px","border-color":convertColorToHex(a.borderColor),"border-width":a.borderWidth+"px"}),$($(t)[0].childNodes[1]).css({right:2*a.rightIconPadding+ +o+10+"px"}),$(r).append(t),$(r).append(i),$(r).insertBefore($("#combotreeDiv"+d.m_panelId).find(".tree")),$("#combotreeDiv"+d.m_panelId).append(s),$("#combotreeDiv"+d.m_panelId).find(".tree").css({"max-height":"calc(100% - "+(2*d.m_searchboxuiobj.margin+ +d.m_menupanelrowheight+25)+"px)",overflow:"auto"})),$("#SearchTextCross"+d.m_componentid).click(function(m){$("#SearchTextBox"+d.m_componentid).val(""),$("#"+p+" .tree-node").hide(),$("#"+p+" .tree-node").filter(function(e){var t=$(m.target).val().toLowerCase(),o=-1!=$(this).find("span.tree-title").text().toLowerCase().indexOf("")||-1!=$(this).find("span.tree-title-child").text().toLowerCase().indexOf("");if(o)for(var i,r=$.data($("#"+p).find("ul")[0],"tree").data,n=$(this).attr("index")?$(this).attr("index").split("node_")[1]:"",a=!0,s=0;s<r.length;s++)if(void 0!==r[s].children){var l=r[s].children.length;if(r[s].children&&0<l)for(var c,h=0;h<l;h++)r[s].children[h].id==n&&a&&(i=$("#"+r[s].domId),a=!1,$(i).css("display","block"),c=jqEasyUI("#ComboTree"+d.m_componentid).combotree("tree"),i.hasClass("icons bd-minus")||""==t?c.tree("collapse",i):c.tree("expand",i))}return o}).show()}),"advance"==d.m_advancetheme?28:12),p=($("#OK"+d.m_componentid).on("mouseenter",function(e){d.removeToolTipDiv();var t=document.getElementById("draggablesParentDiv"+d.m_dashboard.m_id),o=(t.scrollLeft,t.scrollTop,$(t).offset()),o=(o.top,$(t)[0].clientTop,$(t)[0].scrollTop,o.left+$(t)[0].clientLeft-$(t)[0].scrollLeft),t=$(this)[0].offsetLeft,i=$(this)[0].offsetTop,i=e.pageY-e.offsetY+i+l,o=e.pageX-o-t+25,t=document.createElement("div"),i=(t.innerHTML="OK",t.setAttribute("id","toolTipDiv"),t.setAttribute("class","settingIcon"),t.setAttribute("placement","bottom"),$(document.body).append(t),$.extend(d.getTooltipStyles(),{top:i+"px",left:o+"px","z-index":"999999"})),o=($(t).css(i),+t.offsetWidth),i=(ht=+t.offsetHeight,e.pageX-e.offsetX-o/2-8+"px");$(t).css("left",i)}).on("mouseleave",function(){d.removeToolTipDiv()}).on("click",function(){d.updateflag=!0,""!=d.m_currentIndexSelect&&(d.m_previousIndexSelect=d.m_currentIndexSelect),d.m_notifychange=!0,d.getValueAndUpdateGlobalVariable(),d.panelOpen=!1,jqEasyUI("#ComboTree"+d.m_componentid).combotree("hidePanel"),d.m_isRowClicked=!1}),$("#Cancel"+d.m_componentid).on("mouseenter",function(e){d.removeToolTipDiv();var t=document.getElementById("draggablesParentDiv"+d.m_dashboard.m_id),o=(t.scrollLeft,t.scrollTop,$(t).offset()),o=(o.top,$(t)[0].clientTop,$(t)[0].scrollTop,o.left+$(t)[0].clientLeft-$(t)[0].scrollLeft),t=$(this)[0].offsetLeft,i=$(this)[0].offsetTop,i=e.pageY-e.offsetY+i+l,o=e.pageX-o-t+25,t=document.createElement("div"),i=(t.innerHTML="Cancel",t.setAttribute("id","toolTipDiv"),t.setAttribute("class","settingIcon"),t.setAttribute("placement","bottom"),$(document.body).append(t),$.extend(d.getTooltipStyles(),{top:i+"px",left:o+"px","z-index":"999999"})),o=($(t).css(i),+t.offsetWidth),i=(ht=+t.offsetHeight,e.pageX-e.offsetX-o/2-8+"px");$(t).css("left",i)}).on("mouseleave",function(){d.removeToolTipDiv()}).on("click",function(){d.m_isRowClicked&&jqEasyUI("#ComboTree"+d.m_componentid).combotree("clear"),""!=d.m_previousIndexSelect&&jqEasyUI("#ComboTree"+d.m_componentid).combotree("setValues",d.m_previousIndexSelect),d.panelOpen=!1,jqEasyUI("#ComboTree"+d.m_componentid).combotree("hidePanel"),$("#combotreeDiv"+d.m_panelId).find(".tree-node").each(function(){$(this).css("background",convertColorToHex(d.m_chromecolorpanel)),d.m_advancetheme="advance",!IsBoolean(d.m_advanceproperties.showParentCheckbox)||!$("#combotreeDiv"+d.m_panelId).find(".tree-node-selected").hasClass("parent-node")||$("#combotreeDiv"+d.m_panelId).find(".tree-node-selected").css("background",convertColorToHex(d.m_selectioncolor))})}),$("#SelectAll"+d.m_componentid).on("mouseenter",function(e){d.removeToolTipDiv();var t=document.getElementById("draggablesParentDiv"+d.m_dashboard.m_id),o=(t.scrollLeft,t.scrollTop,$(t).offset()),o=(o.top,$(t)[0].clientTop,$(t)[0].scrollTop,o.left+$(t)[0].clientLeft-$(t)[0].scrollLeft),t=$(this)[0].offsetLeft,i=$(this)[0].offsetTop,i=e.pageY-e.offsetY+i+l,o=e.pageX-o-t+25,t=document.createElement("div"),i=(t.innerHTML=d.m_selectAll,t.setAttribute("id","toolTipDiv"),t.setAttribute("class","settingIcon"),t.setAttribute("placement","bottom"),$(document.body).append(t),$.extend(d.getTooltipStyles(),{top:i+"px",left:o+"px","z-index":"999999"})),o=($(t).css(i),+t.offsetWidth),i=(ht=+t.offsetHeight,e.pageX-e.offsetX-o/2-9+"px");$(t).css("left",i)}).on("mouseleave",function(){$(this).css({color:convertColorToHex(d.m_menupanelfontcolor)}),d.removeToolTipDiv()}).on("click",function(){-1!=$(this).attr("class").indexOf("bd-checked")?(d.removeToolTipDiv(),d.m_selectAll="Select All",$(this).removeClass("bd-checked"),$(this).addClass("bd-checkbox"),jqEasyUI("#ComboTree"+d.m_componentid).combotree("setValues",[])):(d.removeToolTipDiv(),d.m_selectAll="Remove All",$(this).removeClass("bd-checkbox"),$(this).addClass("bd-checked"),jqEasyUI("#ComboTree"+d.m_componentid).combotree("setValues",d.finalArray.map(function(e){return e.id})))}),"combotreeDiv"+d.m_panelId);$("#"+p+" .tree-node").show(),$("#SearchTextBox"+d.m_componentid).keyup(function(e){var h=$(e.target).val().toLowerCase();$("#"+p+" .tree-node").hide(),$("#"+p+" .tree-node").filter(function(e){var t=-1!=$(this).find("span.tree-title").text().toLowerCase().indexOf(h)||-1!=$(this).find("span.tree-title-child").text().toLowerCase().indexOf(h);if(t)for(var o,i=$.data($("#"+p).find("ul")[0],"tree").data,r=$(this).attr("index")?$(this).attr("index").split("node_")[1]:"",n=!0,a=0;a<i.length;a++)if(void 0!==i[a].children){var s=i[a].children.length;if(i[a].children&&0<s)for(var l,c=0;c<s;c++)i[a].children[c].id==r&&n&&(o=$("#"+i[a].domId),n=!1,$(o).css("display","block"),l=jqEasyUI("#ComboTree"+d.m_componentid).combotree("tree"),o.hasClass("icons bd-minus")||""==h?l.tree("collapse",o):l.tree("expand",o))}return t}).show()})},HierarchicalCombo.prototype.setAdvanceThemeCSS=function(){var e={};return e.borderColor=""===this.m_advanceproperties.borderColor?this.m_menupanelfontcolor:this.m_advanceproperties.borderColor,e.iconColor=""===this.m_advanceproperties.iconColor?this.m_menupanelfontcolor:this.m_advanceproperties.iconColor,e.borderRadius=""===this.m_advanceproperties.borderRadius?this.m_panelborderradius:this.m_advanceproperties.borderRadius,e.rightActionIconPadding=""===this.m_advanceproperties.rightActionIconPadding?5:this.m_advanceproperties.rightActionIconPadding,e.rightIconPadding=""===this.m_advanceproperties.rightIconPadding?1:this.m_advanceproperties.rightIconPadding,e.borderWidth=""===this.m_advanceproperties.borderWidth?1:this.m_advanceproperties.borderWidth,e},HierarchicalCombo.prototype.setSelectionLimitCSS=function(){var e={},t=this.setAdvanceThemeCSS();return e.borderColor=(""===this.m_showselectionlimitui.borderColor?t:this.m_showselectionlimitui).borderColor,e.borderRadius=(""===this.m_showselectionlimitui.borderRadius?t:this.m_showselectionlimitui).borderRadius,e.borderWidth=(""===this.m_showselectionlimitui.borderWidth?t:this.m_showselectionlimitui).borderWidth,e.width=""===this.m_showselectionlimitui.width?"40":this.m_showselectionlimitui.width,e},HierarchicalCombo.prototype.childNodeCSS=function(){var e={};return e.backgroundColor=""===this.m_childnodeproperties.backgroundColor?this.m_chromecolorpanel:this.m_childnodeproperties.backgroundColor,e.fontColor=""===this.m_childnodeproperties.fontColor?this.m_menupanelfontcolor:this.m_childnodeproperties.fontColor,e.selectionColor=""===this.m_childnodeproperties.selectionColor?this.m_selectioncolor:this.m_childnodeproperties.selectionColor,e.selectionFontColor=""===this.m_childnodeproperties.selectionFontColor?this.m_menupanelfontcolor:this.m_childnodeproperties.selectionFontColor,e.rolloverColor=""===this.m_childnodeproperties.rolloverColor?this.m_rollovercolor:this.m_childnodeproperties.rolloverColor,e.rolloverFontColor=""===this.m_childnodeproperties.rolloverFontColor?this.m_menupanelfontcolor:this.m_childnodeproperties.rolloverFontColor,e},HierarchicalCombo.prototype.setHierComboCSS=function(){var e,t=this,o=this.childNodeCSS(),i=($("#"+t.m_componentid).find("span.combo").css({"border-radius":"0px",border:"1px solid #eeeeee",top:"0px",position:"absolute"}),$("#"+t.m_componentid).find("input.combo-text").css("height",this.m_height+"px"),$("#"+t.m_componentid).find("span.combo-arrow").css("height",+this.m_height+"px"),$("#"+t.m_componentid).find(".textbox-icon").css("width","25px"),$("#ComboTree"+t.m_objectid).find(".combo-text").css("vertical-align","top"),$("#"+t.m_componentid).find("span span .combo-arrow").css("background-color",convertColorToHex(this.m_chromecolor)),$("#combotreeDiv"+t.m_panelId).css("font-size",this.fontScaling(this.m_fontsize)+"px"),void 0!==t.m_advancetheme&&"advance"==t.m_advancetheme&&$("#combotreeDiv"+t.m_panelId).find("ul:first").css({padding:"5px 0px 5px 0px"}),$("#combotreeDiv"+t.m_panelId).find("span").removeClass("tree-icon tree-folder tree-folder-open").removeClass("tree-file").removeClass("datagrid-sort-icon"),$("#combotreeDiv"+t.m_panelId).css({"text-align":"left",background:convertColorToHex(this.m_chromecolorpanel),padding:"0px"}),this.m_menupanelrowheight-24),r=void 0!==this.m_advancetheme&&"advance"==this.m_advancetheme?this.m_menupanelrowheight+5:this.m_menupanelrowheight,i=($("#combotreeDiv"+t.m_panelId).find(".tree-node").css({"padding-top":i+"px","padding-bottom":i+"px",height:r+"px",display:"flex"}),"advance"==this.m_advancetheme?"75%":"85%");$("#combotreeDiv"+t.m_panelId).find(".tree-title").css({"font-size":this.fontScaling(this.m_fontsize)+"px","text-decoration":this.m_textdecoration,width:i,overflow:"hidden","white-space":"nowrap"}),$("#combotreeDiv"+t.m_panelId).find(".tree-title-child").css({"font-size":this.fontScaling(this.m_fontsize)+"px","text-decoration":this.m_textdecoration,width:"75%","padding-top":"4px","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}),e=void 0!==t.m_advancetheme&&"advance"==t.m_advancetheme?t.m_advancehighlighter.borderWidth+"px "+t.m_advancehighlighter.borderStyle+" "+t.m_advancehighlighter.borderColor:"none",$("#combotreeDiv"+t.m_panelId).find(".tree-node").find("span").each(function(){if("tree-checkbox tree-checkbox0"===this.getAttribute("class"))return!1;$(this).css("text-decoration",t.m_textdecoration),"tree-title parent-node"===this.getAttribute("class")&&$(this).parent().css({"border-left":e})}),$("#combotreeDiv"+t.m_panelId).find(".tree-node").each(function(){$(this).find(".icons.bd-plus").css({display:"inline-block",color:t.m_menupanelfontcolor,"font-size":t.fontScaling(t.m_expandiconsize)+"px","line-height":t.m_menupanelrowheight-5+"px","margin-right":"10px"}),$(this).find("span").hasClass("child-node")&&($(this).css({background:convertColorToHex(o.backgroundColor),color:convertColorToHex(o.fontColor)}),null!=t.m_advancetheme&&"default"!=t.m_advancetheme||$(this).parent().find(".tree-indent").css({"margin-right":"5px"}))}),$("#combotreeDiv"+t.m_panelId).find("li").each(function(e,t){0<$(t).find("ul").find("li").length||$(t).find(".tree-hit").remove()}),$("#combotreeDiv"+t.m_panelId).css({color:this.m_menupanelfontcolor,"font-family":selectGlobalFont(this.m_fontfamily),"font-style":this.m_fontstyle,"font-weight":this.m_fontweight,overflow:"hidden"}),$("#"+t.m_componentid).find(".textbox-text").css({height:"100%","font-style":this.m_fontstyle,"font-size":this.fontScaling(this.m_fontsize)+"px","text-decoration":this.m_textdecoration,color:this.m_fontcolor,"font-family":selectGlobalFont(this.m_fontfamily),"font-weight":this.m_fontweight,cursor:this.m_cursortype,"padding-left":"5px","text-overflow":"ellipsis"}),$("#combotreeDiv"+t.m_panelId).find(".tree-node-selected").css({color:t.m_menupanelfontcolor}),$("#combotreeDiv"+t.m_panelId).find(".tree-node").hover(function(){$(this).find("span").hasClass("child-node")?$(this).css({background:convertColorToHex(o.rolloverColor),color:convertColorToHex(o.rolloverFontColor)}):$(this).css({background:convertColorToHex(t.m_rollovercolor),color:convertColorToHex(t.m_menupanelfontcolor)})},function(){$(this).find("span").hasClass("child-node")?$(this).css({background:convertColorToHex(o.backgroundColor),color:convertColorToHex(o.fontColor)}):$(this).css({background:convertColorToHex(t.m_chromecolorpanel)}),$("#combotreeDiv"+t.m_panelId).queue(function(e){$("#combotreeDiv"+t.m_panelId).find(".tree-node-selected").hasClass("child-node")?$("#combotreeDiv"+t.m_panelId).find(".tree-node-selected").css({background:convertColorToHex(o.selectionColor),color:convertColorToHex(o.selectionFontColor)}):"advance"==t.m_advancetheme&&!IsBoolean(t.m_advanceproperties.showParentCheckbox)||$("#combotreeDiv"+t.m_panelId).find(".tree-node-selected").css({background:convertColorToHex(t.m_selectioncolor)}),$("#combotreeDiv"+t.m_panelId).find(".tree-checkbox1").parent().each(function(){$(this).find("span").hasClass("child-node")?$(this).css({background:convertColorToHex(o.selectionColor),color:convertColorToHex(o.selectionFontColor)}):"advance"==t.m_advancetheme&&!IsBoolean(t.m_advanceproperties.showParentCheckbox)||$(this).css({background:convertColorToHex(t.m_selectioncolor)})}),$("#combotreeDiv"+t.m_panelId).find(".tree-checkbox0").parent().each(function(){$(this).find("span").hasClass("child-node")?$(this).css({background:convertColorToHex(o.backgroundColor),color:convertColorToHex(o.fontColor)}):$(this).css({background:convertColorToHex(t.m_chromecolorpanel)})}),e()})}).click(function(){t.m_isRowClicked=!0,$("#combotreeDiv"+t.m_panelId).find(".tree-node").each(function(){$(this).find("span").hasClass("child-node")?$(this).css({background:convertColorToHex(o.backgroundColor),color:convertColorToHex(o.fontColor)}):$(this).css({background:convertColorToHex(t.m_chromecolorpanel)})}),$("#combotreeDiv"+t.m_panelId).delay(20).queue(function(e){$("#combotreeDiv"+t.m_panelId).find(".tree-node-selected").hasClass("child-node")?$("#combotreeDiv"+t.m_panelId).find(".tree-node-selected").css({background:convertColorToHex(o.selectionColor),color:convertColorToHex(o.selectionFontColor)}):"advance"==t.m_advancetheme&&!IsBoolean(t.m_advanceproperties.showParentCheckbox)||$("#combotreeDiv"+t.m_panelId).find(".tree-node-selected").css({background:convertColorToHex(t.m_selectioncolor)}),$("#combotreeDiv"+t.m_panelId).find(".tree-checkbox1").parent().each(function(){$(this).find("span").hasClass("child-node")?$(this).css({background:convertColorToHex(o.selectionColor),color:convertColorToHex(o.selectionFontColor)}):"advance"==t.m_advancetheme&&!IsBoolean(t.m_advanceproperties.showParentCheckbox)||$(this).css({background:convertColorToHex(t.m_selectioncolor)})}),$("#combotreeDiv"+t.m_panelId).find(".tree-checkbox0").parent().each(function(){$(this).find("span").hasClass("child-node")?$(this).css({background:convertColorToHex(o.backgroundColor),color:convertColorToHex(o.fontColor)}):$(this).css({background:convertColorToHex(t.m_chromecolorpanel)})}),e()})}),$("#combotreeDiv"+t.m_panelId).delay(20).queue(function(e){$("#combotreeDiv"+t.m_panelId).find(".tree-node").each(function(){$(this).find("span").hasClass("child-node")?$(this).css({background:convertColorToHex(o.backgroundColor),color:convertColorToHex(o.fontColor)}):$(this).css({background:convertColorToHex(t.m_chromecolorpanel)})}),$("#combotreeDiv"+t.m_panelId).find(".tree-node-selected").hasClass("child-node")?$("#combotreeDiv"+t.m_panelId).find(".tree-node-selected").css({background:convertColorToHex(o.selectionColor),color:convertColorToHex(o.selectionFontColor)}):"advance"==t.m_advancetheme&&!IsBoolean(t.m_advanceproperties.showParentCheckbox)||$("#combotreeDiv"+t.m_panelId).find(".tree-node-selected").css({background:convertColorToHex(t.m_selectioncolor)}),$("#combotreeDiv"+t.m_panelId).find(".tree-checkbox1").parent().each(function(){$(this).find("span").hasClass("child-node")?$(this).css({background:convertColorToHex(o.selectionColor),color:convertColorToHex(o.selectionFontColor)}):"advance"==t.m_advancetheme&&!IsBoolean(t.m_advanceproperties.showParentCheckbox)||$(this).css({background:convertColorToHex(t.m_selectioncolor)})}),$("#combotreeDiv"+t.m_panelId).find(".tree-checkbox0").parent().each(function(){$(this).find("span").hasClass("child-node")?$(this).css({background:convertColorToHex(o.backgroundColor),color:convertColorToHex(o.fontColor)}):$(this).css({background:convertColorToHex(t.m_chromecolorpanel)})}),e()}),$("#combotreeDiv"+t.m_panelId).parent().css({"border-right":"1px solid "+convertColorToHex(this.m_bordercolor),"border-left":"1px solid "+convertColorToHex(this.m_bordercolor),"border-bottom":"1px solid "+convertColorToHex(this.m_bordercolor)}),$("#ComboTree"+t.m_objectid).find(".textbox").css({"border-radius":t.m_filterborderradius+"px",backgroundColor:convertColorToHex(t.m_chromecolor)}),$("#combotreeDiv"+t.m_panelId).parent().css({"border-radius":t.m_panelborderradius+"px"}),$("#ComboTree"+t.m_objectid).find(".textbox-text-readonly").css("backgroundColor",convertColorToHex(t.m_chromecolor))},HierarchicalCombo.prototype.getValueAndUpdateGlobalVariable=function(){var e={},e="Single"==this.m_hierarchylevel||"single"==this.m_hierarchylevel?this.getSelctedValueMap():this.getFieldNameValueMap(this.getSelctedValueMap());this.updateDataPoints(e)},HierarchicalCombo.prototype.getFieldNameValueMap=function(e){var t=new Object;if(0<e.length)if(IsBoolean(this.m_allowmultipleselection)){for(n=0;n<this.getName().length;n++)t[this.getName()[n]]=e[n];for(a=0;a<this.m_hierarchytype.length;a++)if("none"==this.m_hierarchytype[a]){for(var o=(""+e[a]).split(","),i=[],r=0;r<o.length;r++)i.push(o[r]);"none"==this.m_fieldaggregation[a]&&1==i.length?t["drillField_"+this.getName()[a]]=i[0]:"none"==this.m_fieldaggregation[a]?t["drillField_"+this.getName()[a]]="":t["drillField_"+this.getName()[a]]=getAggregationOperatedData(i,this.m_fieldaggregation[a])}}else{for(var n=0;n<this.getName().length;n++)t[this.getName()[n]]=e[0][n];for(var a=0;a<this.m_hierarchytype.length;a++)if("none"==this.m_hierarchytype[a]){for(var i=[],r=0;r<e.length;r++)i.push(e[r][a]);"none"==this.m_fieldaggregation[a]&&1==i.length?t["drillField_"+this.getName()[a]]=i[0]:"none"==this.m_fieldaggregation[a]?t["drillField_"+this.getName()[a]]="":t["drillField_"+this.getName()[a]]=getAggregationOperatedData(i,this.m_fieldaggregation[a])}}else for(t={},n=0;n<this.getName().length;n++)t[this.getName()[n]]="";return t},HierarchicalCombo.prototype.getDataProviderInArrayForm=function(){for(var e=[],t=0;t<this.getDataProvider().length;t++){e[t]=[];for(var o=0;o<this.getName().length;o++)e[t][o]=this.getDataProvider()[t][this.getName()[o]]}return e},HierarchicalCombo.prototype.getSelectedRecord=function(e,t){for(var o=0;o<this.getName().length;o++)this.singleMap[this.getName()[o]]=0==e?""+t[this.getName()[o]]:this.singleMap[this.getName()[o]]+","+t[this.getName()[o]]},HierarchicalCombo.prototype.getSelctedValueMapOfSingleLevel=function(){this.singleMap={};if(IsBoolean(this.m_allowmultipleselection)){var e=jqEasyUI("#ComboTree"+this.m_componentid).combotree("getValues"),t=0;if(0==e.length)for(var o=0;o<this.getName().length;o++)this.singleMap[this.getName()[o]]="";for(a=0;a<this.m_roots.length;a++)for(var i=0;i<e.length;i++)this.m_roots[a][this.m_namebyhierarchyType.child]==e[i]&&this.getSelectedRecord(t++,this.m_roots[a])}else{var r=jqEasyUI("#ComboTree"+this.m_componentid).combotree("tree").tree("getSelected");if(null!=r)for(var n=r.id,a=0;a<this.m_roots.length;a++)this.m_roots[a][this.m_namebyhierarchyType.child]==n&&this.getSelectedRecord(0,this.m_roots[a])}return this.singleMap},HierarchicalCombo.prototype.getSelctedValueMapOfMultiLevel=function(){var e=[],t=this.getDataProviderInArrayForm();if(IsBoolean(this.m_allowmultipleselection)){var o;jqEasyUI("#ComboTree"+this.m_componentid).combotree("tree");if(null!=(o=jqEasyUI("#ComboTree"+this.m_componentid).combotree("getValues"))){a=o;this.selectedRecordArray=[];for(s=0;s<a.length;s++)this.getMultiLevelMultiSelect(a[s]);for(s=0;s<this.selectedRecordArray.length;s++)if(e.push(this.getCommaSeparatedString(this.getUniqueArr(this.selectedRecordArray[s]))),s==this.selectedRecordArray.length-1)for(c=0;c<this.getNoneFieldsByNames().length;c++){for(var i="",r=0;r<this.selectedRecordArray[s].length;r++){var n=r<this.selectedRecordArray[s].length-1?",":"";i+=this.selectedRecordArray[s][r].NoneFields[this.getNoneFieldsByNames()[c]]+n}e.push(i)}}}else if(null!=(o=jqEasyUI("#ComboTree"+this.m_componentid).combotree("tree").tree("getSelected"))){var a=o.id;this.selectedRecordArray=[],this.getParentArray(a);for(var s=0;s<t.length;s++){for(var r=0,l=!0,c=this.selectedRecordArray.length-1;0<=c;c--){if(this.selectedRecordArray[c]!=t[s][r]){l=!1;break}r++}l&&e.push(this.updateDataMap(t[s],this.selectedRecordArray))}}return e},HierarchicalCombo.prototype.updateDataMap=function(e,t){if(IsBoolean(this.m_controlleddrill)){var o,i={},r=!1;for(o in e)if(e.hasOwnProperty(o)){for(var n in t)if(e[o]===t[n]){r=!0;break}IsBoolean(r)?(i[o]=e[o],r=!1):i[o]=""}return i}return e},HierarchicalCombo.prototype.getSelctedValueMap=function(){return"Single"==this.m_hierarchylevel||"single"==this.m_hierarchylevel?this.getSelctedValueMapOfSingleLevel():"Multiple"==this.m_hierarchylevel?this.getSelctedValueMapOfMultiLevel():void 0},HierarchicalCombo.prototype.getUniqueArr=function(e){var o=[];return $.each(e,function(e,t){-1==$.inArray(t.name,o)&&o.push(t.name)}),o},HierarchicalCombo.prototype.getCommaSeparatedString=function(e){for(var t="",o=0;o<e.length;o++){var i=o<e.length-1?",":"";t+=e[o]+i}return t},HierarchicalCombo.prototype.getParentArray=function(e){this.selectedRecordArray=[],this.getIterativeParentArray(e)},HierarchicalCombo.prototype.getIterativeParentArray=function(e){for(var t,o=0;o<this.finalArray.length;o++)this.finalArray[o].id==e&&0<+e&&(this.selectedRecordArray.push(this.finalArray[o].name),t=this.finalArray[o].parentId,this.getIterativeParentArray(t))},HierarchicalCombo.prototype.getMultiLevelMultiSelect=function(e,t){var o;o=null!=t?t:[];for(var i=0;i<this.finalArray.length;i++)if(this.finalArray[i].id==e&&0<+e){var r=this.finalArray[i].parentId;if(o.push(this.finalArray[i]),0==r)return void this.setInSelectedArray(o);this.getMultiLevelMultiSelect(r,o)}},HierarchicalCombo.prototype.setInSelectedArray=function(e){for(var t=0;t<e.length;t++)null==this.selectedRecordArray[e.length-(t+1)]&&(this.selectedRecordArray[e.length-(t+1)]=[]),this.selectedRecordArray[e.length-(t+1)].push(e[t])},HierarchicalCombo.prototype.getHierarchyType=function(){return this.m_hierarchytype},HierarchicalCombo.prototype.setHierarchyType=function(e){this.m_hierarchytype=e},HierarchicalCombo.prototype.getVisible=function(){return this.m_visible},HierarchicalCombo.prototype.setVisible=function(e){this.m_visible=e},HierarchicalCombo.prototype.getDisplayName=function(){return this.m_displayname},HierarchicalCombo.prototype.setDisplayName=function(e){this.m_displayname=e},HierarchicalCombo.prototype.setName=function(e){this.m_name=e},HierarchicalCombo.prototype.getName=function(){return this.m_name},HierarchicalCombo.prototype.createTree=function(){for(var e="",t=0;t<this.m_seriesData.length;t++){var o=new Node(this.m_seriesData[t]);this.m_nodeArr.push(o)}for(var i=0;i<this.m_nodeArr.length;i++)this.m_nodeArr[i].m_pid==this.m_nodeArr[i].m_cid&&(e=this.m_nodeArr[i]);return e},HierarchicalCombo.prototype.getWhiteDivision=function(){return $("#outerdiv").css("top",this.m_height+"px"),$("#outerdiv").css("width",parseInt(this.m_width)+parseInt(this.m_hierDropDownWidth)+"px"),$("#outerdiv").css("height",parseInt(this.m_hierDropDownHeight)+"px"),$("#outerdiv").css("position","absolute"),$("#outerdiv").css("border","1px solid black"),$("#outerdiv").css("background","#f8f8f8"),$("#outerdiv").css("display","#none"),$("#outerdiv").css("overflow","#scroll"),$("#draggableDiv"+this.m_objectid).append($("#outerdiv")),$("#outerdiv")},HierarchicalCombo.prototype.createUlLiSpanDivision=function(e){var t=document.createElement("div"),o=(t.setAttribute("id","myNav"),$("#draggableDiv"+this.m_objectid).append(t),this.createUlLiSpan()),i=this.anchorOnclick(this.m_root);o[1].appendChild(i),o[0].appendChild(o[1]),t.appendChild(o[0]),this.spanOnclick(o[2],o[0],this.m_root),$("#outerdiv").append(t)},HierarchicalCombo.prototype.createUlLiSpan=function(){var e=document.createElement("ul"),t=(e.style.type="none",document.createElement("li")),o=(t.style.type="none",document.createElement("span"));return t.appendChild(o),this.plusString='<span id="plusSign" style="font-size:16px; font-weight:bold"><img src="images/plus.png"></span>',this.minusString='<span id="minusSign" style="font-size:16px;font-weight:bold"><img src="images/minus.png"> </span>',o.innerHTML=this.plusString,[e,t,o]},HierarchicalCombo.prototype.anchorOnclick=function(n){var a=this,s=document.createElement("a");return s.appendChild(document.createTextNode(n.m_name)),s.style.font=this.m_fontstyle+" "+this.m_fontweight+" "+this.fontScaling(this.m_fontsize)+"px "+selectGlobalFont(this.m_fontfamily),s.onclick=function(){$("#hier").val(s.innerHTML),$("#outerdiv").css("display","none");for(var e=$("#hier").val(),t=n.m_cid,o=[n.m_pid,t,e],t=a.getGlobalKey(),e=a.m_dashboard.getGlobalVariable().map[t],i=new Object,r=0;r<a.getDataSet().getFields().length;r++)i[a.getDataSet().getFields()[r].getName()]=o[r];e.update(i)},s},HierarchicalCombo.prototype.spanOnclick=function(o,i,r){var n,a=this;o.onclick=function(){if(o.innerHTML=o.innerHTML===a.plusString?a.minusString:a.plusString,o.innerHTML===a.minusString){n=a.drawChild(r,i);for(var e=0;e<n.length;e++)i.appendChild(n[e])}else for(var t=0;t<n.length;t++)i.removeChild(n[t])}},HierarchicalCombo.prototype.createDropDownDivision=function(){var e=document.createElement("div"),t=(e.setAttribute("id","selectDiv"),e.style.display="inline-flex",e.style.position="absolute",e.style.height=this.m_height+"px",$("#draggableDiv"+this.m_objectid).append(e),$("#footleft").append($("#draggablesParentDiv"+this.m_dashboardname)),this.createSelectButton());this.createVButton();e.appendChild(t),e.appendChild($("#hier1"))},HierarchicalCombo.prototype.createSelectButton=function(){var e=document.createElement("input");e.style.zIndex="1",e.type="button",e.id="hier",e.name="hier",e.value="Select";return e.style.font=this.m_fontstyle+" "+this.m_fontweight+" "+this.fontScaling(this.m_fontsize)+"px "+selectGlobalFont(this.m_fontfamily),e.style.fontSize=this.fontScaling(this.m_fontsize),e.style.width="Select".clientWidth+"px",e.style.height=parseInt(this.m_height)+"px",e.style.background="#ECECEC",e.style.float="left",e},HierarchicalCombo.prototype.createVButton=function(){return $("#hier1").attr("name","hier1"),$("#hier1").css("display","block"),$("#hier1").css("z-index","1"),$("#hier1").css("background","url(images/hierDown.png)"),$("#hier1").css("backgroundColor","f1f1f1"),$("#hier1").css("height",parseInt(this.m_height)-.5+"px"),$("#hier1").css("width","22px"),$("#hier1").css("float","left"),$("#hier1").css("margin-left","-1px"),$("#hier1")},HierarchicalCombo.prototype.drawChild=function(e,t){for(var o=[],i=0;i<e.m_childArr.length;i++)o[i]=this.addAChild(e.m_childArr[i]);return o},HierarchicalCombo.prototype.addAChild=function(e){var t=this.createUlLiSpan(),e=(this.spanOnclick(t[2],t[0],e),this.anchorOnclick(e));return t[1].appendChild(e),t[0].appendChild(t[1]),t[0]},HierarchicalCombo.prototype.divHide=function(){null==$("#outerdiv")&&null==$("#outerdiv")||"block"==$("#outerdiv").css("display")&&$("#outerdiv").css("display","none")};
//# sourceMappingURL=HierarchicalCombo.min.js.map