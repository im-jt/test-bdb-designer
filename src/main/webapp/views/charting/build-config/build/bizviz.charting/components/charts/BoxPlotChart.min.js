/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function BoxPlotChart(t,i){this.base=Chart,this.base(),this.m_x=400,this.m_y=20,this.m_width=300,this.m_height=200,this.m_candleWidth="",this.m_generatexml="",this.m_candleColor="",this.m_seriesNames=[],this.m_categoryData=[],this.m_seriesData=[],this.m_xPixelArray=[],this.m_yPixelArray=[],this.m_medianLinePixelArray=[],this.m_outlierPixelArray=[],this.m_linePixelArray=[],this.m_candleHeightArray=[],this.m_candlesArray=[],this.m_lowerboxfillcolors="#4183d7,#663399",this.m_upperboxfillcolors="#f7ca18,#2ecc71",this.m_boxfillopacity="0.8,0.8",this.m_boxgroupnames="Male,Female",this.m_boxPlotCalculation=new BoxPlotCalculation,this.m_xAxis=new Xaxis,this.m_yAxis=new Yaxis,this.noOfRows=1,this.m_chartContainer=t,this.m_zIndex=i,this.m_fieldtypes=["Max","Min","Q3","Q1","Median","Outlier"],this.isValidConfig=!0}function BoxPlotCalculation(){this.m_xAxisPixelArray=[],this.m_yAxisPixelArray=[],this.max=0,this.m_candleGap,this.m_numberOfMarkers=6,this.m_percentileValue,this.m_yAxisText,this.m_xpixelArray=[],this.m_ypixelArray=[],this.m_candleHeightArray=[],this.m_yAxisMarkersArray=[],this.m_linepixelArray=[],this.m_startX,this.m_startY,this.m_endX,this.m_endY,this.m_chartYMargin,this.m_chartEndXMargin,this.m_chartTitleMargin=0,this.m_chartSubTitleMargin=0,this.data="",this.m_util=new Util,this.noOfRows=1}function BoxCandles(){this.m_xPixel=[],this.m_yPixelArray=[],this.m_candleHeightArray=[],this.m_candleWidth=[],this.m_linePixelArray=[],this.m_candleColor="",this.m_strokeColor="",this.medianLinePixelArray="",this.ctx="",this.m_outlierfillcolor="#cccccc"}BoxPlotChart.prototype=new Chart,BoxPlotChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},BoxPlotChart.prototype.ParseJsonAttributes=function(t,i){for(var e in this.chartJson=t)if("Chart"==e)for(var a in t[e])switch(a){case"xAxis":for(var s in t[e][a]){var r=this.getNodeAttributeName(s);i.m_xAxis[r]=t[e][a][s]}break;case"yAxis":for(var o in t[e][a]){var r=this.getNodeAttributeName(o);i.m_yAxis[r]=t[e][a][o]}break;case"Title":for(var h in t[e][a]){var r=this.getNodeAttributeName(h);i.m_title[r]=t[e][a][h]}break;case"SubTitle":for(var l in t[e][a]){r=this.getNodeAttributeName(l);i.m_subTitle[r]=t[e][a][l]}break;default:i[r=this.getNodeAttributeName(a)]=t[e][a]}else i[r=this.getNodeAttributeName(e)]=t[e]},BoxPlotChart.prototype.setStartX=function(){this.yaxisLabelFont=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),this.yaxisDescriptionFont=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily);var t=this.getBorderToDescriptionMargin(),i=this.getYAxisDescriptionMargin(),e=this.getDescriptionToLabelMargin(),a=this.getLabelToAxisMargin(),s=(this.setMaxMinSeriesValue(),this.getYAxisLabelMargin());this.m_startX=+this.m_x+ +t+ +i+ +e+ +s+ +a},BoxPlotChart.prototype.getYAxisLabelMargin=function(){var t=this.getLabelFormatterMargin();return this.setLabelWidth(),+t+ +this.getLabelWidth()+ +this.getLabelSignMargin()+ +this.getLabelPrecisionMargin()+ +this.getLabelSecondFormatterMargin()},BoxPlotChart.prototype.getLabelFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.m_formater&&""!=this.m_formater&&"none"!=this.m_unit&&""!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(t).width,this.ctx.closePath()),i},BoxPlotChart.prototype.getLabelWidth=function(){return this.m_labelwidth},BoxPlotChart.prototype.setLabelWidth=function(){var t=[];if((this.m_labelwidth=0)<this.fontScaling(this.m_yAxis.m_labelfontsize)){for(var i=0;i<this.m_yAxisMarkersArray.length;i++){var e,a=this.m_yAxisMarkersArray[i];IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&("none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(e=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?a=getNumberFormattedNumericValue(+a,this.m_precision,this.m_unit):"auto"==this.getSecondaryUnit()?a=getNumberFormattedNumericValue(+a):"none"!==this.getSecondaryUnit()&&(a=this.m_util.updateTextWithFormatter(a,e,this.m_precision))),0!==a&&"default"!==this.m_precision&&(a=this.m_yAxis.setPrecision(a,this.m_precision)),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),a=getFormattedNumberWithCommas(a,this.m_numberformatter),t[i]=this.ctx.measureText(a).width,this.ctx.closePath())}this.m_labelwidth=getMaxValueFromArray(t)}},BoxPlotChart.prototype.getLabelSignMargin=function(){var t=0,i=0,e=this.min;return e<0&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(e).width,this.ctx.closePath()),t=this.getLabelWidth()<i?this.ctx.measureText("-").width:t},BoxPlotChart.prototype.getLabelPrecisionMargin=function(){var t=5;return"auto"==this.getSecondaryUnit()&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t=this.ctx.measureText(".0").width,this.ctx.closePath()),t},BoxPlotChart.prototype.getMinimumSeriesValue=function(){return this.m_minimumseriesvalue},BoxPlotChart.prototype.getMaximumSeriesValue=function(){return this.m_maximumSeriesValue},BoxPlotChart.prototype.setMaxMinSeriesValue=function(){this.m_maximumSeriesValue=0;for(var t=this.m_minimumseriesvalue=0,i=this.m_seriesData.length;t<i;t++)for(var e=0;e<this.m_seriesData[t].length;e++)for(var a=0;a<this.m_seriesData[t][e].length;a++){var s=this.m_seriesData[t][e][a],s=isNaN(s)||null==s||""==s?0:s;0==t&&0==e&&0==a&&(this.max_maximumSeriesValue=s,this.m_minimumseriesvalue=s),+this.m_maximumSeriesValue<=+s&&(this.m_maximumSeriesValue=s),+this.m_minimumseriesvalue>=+s&&(this.m_minimumseriesvalue=s)}},BoxPlotChart.prototype.getLabelSecondFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(t="auto"!=this.getSecondaryUnit()?this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()):"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?getNumberFormattedSymbol(+this.max,this.m_unit):"K",this.ctx.font=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily),i=this.ctx.measureText(t).width),i},BoxPlotChart.prototype.getFormatterMargin=function(){var t,i=0,e=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&("none"!=this.m_formater&&""!=this.m_formater&&""!=this.m_unit&&"none"!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),i=this.ctx.measureText(t).width),"none"!=this.getSecondaryFormater())&&""!=this.getSecondaryFormater()&&""!=this.getSecondaryUnit()&&"none"!=this.getSecondaryUnit()&&(secondunit=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),e=this.ctx.measureText(secondunit).width),+i+ +e+4},BoxPlotChart.prototype.setEndX=function(){var t=this.getBorderToLegendMargin(),i=this.getVerticalLegendMargin(),e=this.getVerticalLegendToXAxisMargin();this.m_endX=+this.m_x+ +this.m_width-(+t+ +i+ +e)},BoxPlotChart.prototype.setStartY=function(){var t=this.getChartMargin(),i=this.getXAxisLabelMargin(),e=this.getXAxisDescriptionMargin();this.m_startY=+this.m_y+ +this.m_height-(+t+ +i+ +e)},BoxPlotChart.prototype.getXAxisLabelMargin=function(){var t=15,i=this.m_xAxis.m_labelrotation*(Math.PI/180);if(this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily(),IsBoolean(this.m_xAxis.getLabelTilted())){for(var e=0,a=this.m_categoryData.length;e<a;e++)for(var s=0;s<this.m_categoryData[e].length;s++)var r=Math.abs(this.ctx.measureText(this.m_categoryData[e][s]).width*i),t=t<=r?r:t;t>this.m_height/4-this.getXAxisDescriptionMargin()&&(t=this.m_height/4-this.getXAxisDescriptionMargin())}else{var o=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize);this.noOfRows=this.setNoOfRows(),t=o*this.noOfRows}return t},BoxPlotChart.prototype.setNoOfRows=function(){this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily);this.ctx.measureText(this.m_categoryData[0][0]).width;for(var t=(this.getEndX()-this.getStartX())/this.m_categoryData[0].length,i=1,e=1,a=this.m_categoryData[0].length;e<a;e++)this.ctx.measureText(this.m_categoryData[0][e]).width>t&&(i=2);return i},BoxPlotChart.prototype.setEndY=function(){this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()},BoxPlotChart.prototype.getDataProvider=function(){return this.m_dataProvider},BoxPlotChart.prototype.getCategoryNames=function(){return this.m_categoryNames},BoxPlotChart.prototype.getSubCategoryNames=function(){return this.m_subCategoryNames},BoxPlotChart.prototype.getSubCategoryDisplayNames=function(){return this.m_subCategoryDisplayNames},BoxPlotChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},BoxPlotChart.prototype.setFields=function(t){for(var i=[],e=[],a=[],s=0,r=(this.m_fieldsJson=t).length;s<r;s++)switch(this.getProperAttributeNameValue(t[s],"Type")){case"Category":i.push(t[s]);break;case"SubCategory":e.push(t[s]);break;default:a.push(t[s])}this.setCategory(i),this.setSubCategory(e),this.setChartTypeAccordingToSubCategory(),this.setSeries(a)},BoxPlotChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr={},this.m_categoryFieldColor=[];for(var i=0,e=0,a=t.length;e<a;e++){var s=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allCategoryDisplayNames[e]=s,this.m_allCategoryNames[e]=this.getProperAttributeNameValue(t[e],"Name"),this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]])&&(this.m_categoryNames[i]=this.getProperAttributeNameValue(t[e],"Name"),this.m_categoryDisplayNames[i]=s,this.m_categoryFieldColor[i]=this.getProperAttributeNameValue(t[e],"Color"),i++)}},BoxPlotChart.prototype.setChartTypeAccordingToSubCategory=function(){this.m_chartType="clustered",0!=this.m_categoryNames.length&&0!=this.m_subCategoryNames.length||(this.m_chartType="stacked")},BoxPlotChart.prototype.setSubCategory=function(t){this.m_subCategoryNames=[],this.m_subCategoryDisplayNames=[],this.m_allSubCategoryNames=[],this.m_allSubCategoryDisplayNames=[],this.m_subCategoryVisibleArr={},this.m_subCategoryFieldColor=[];for(var i=0,e=0,a=t.length;e<a;e++){var s=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allSubCategoryDisplayNames[e]=s,this.m_allSubCategoryNames[e]=this.getProperAttributeNameValue(t[e],"Name"),this.m_subCategoryVisibleArr[this.m_allSubCategoryDisplayNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),IsBoolean(this.m_subCategoryVisibleArr[this.m_allSubCategoryDisplayNames[e]])&&(this.m_subCategoryNames[i]=this.getProperAttributeNameValue(t[e],"Name"),this.m_subCategoryDisplayNames[i]=s,this.m_subCategoryFieldColor[i]=this.getProperAttributeNameValue(t[e],"Color"),i++)}},BoxPlotChart.prototype.setSeries=function(t){this.m_fieldtypes;this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors=[],this.m_legendNames=[],this.m_outlierShapes=[],this.m_outlierColors=[],this.m_outlierOpacity=[],this.m_outlierRadius=[],this.m_outlierDataSeperator=[],this.m_allSeriesDisplayNames=[],this.m_allSeriesNames=[],this.m_seriesVisibleArr={},this.m_reqSeriesVisibleArr={};for(var i=0,e=this.m_fieldtypes.length;i<e;i++){this.m_reqSeriesVisibleArr[this.m_fieldtypes[i]]={},this.m_reqSeriesVisibleArr[this.m_fieldtypes[i]].visible="Outlier"==this.m_fieldtypes[i];for(var a=0;a<t.length;a++){var s=this.getProperAttributeNameValue(t[a],"Type"),r=this.getProperAttributeNameValue(t[a],"visible"),o=this.formattedDescription(this,this.getProperAttributeNameValue(t[a],"DisplayName"));if(this.m_allSeriesDisplayNames[a]=o,this.m_allSeriesNames[a]=this.getProperAttributeNameValue(t[a],"Name"),this.m_seriesVisibleArr[this.m_allSeriesNames[a]]=r,IsBoolean(r)&&this.m_fieldtypes[i]==s){this.m_reqSeriesVisibleArr[this.m_fieldtypes[i]].visible=!0,this.m_seriesNames.push(this.getProperAttributeNameValue(t[a],"Name")),this.m_legendNames.push(o),this.m_seriesDisplayNames.push(o),this.m_seriesColors.push(convertColorToHex(this.getProperAttributeNameValue(t[a],"Color"))),this.m_outlierShapes.push(this.getProperAttributeNameValue(t[a],"PlotType")),this.m_outlierColors.push(this.getProperAttributeNameValue(t[a],"Color")),this.m_outlierOpacity.push(this.getProperAttributeNameValue(t[a],"PlotTransparency")),this.m_outlierRadius.push(this.getProperAttributeNameValue(t[a],"PlotRadius"));r=this.getProperAttributeNameValue(t[a],"DataSeperator");if(this.m_outlierDataSeperator.push(null!=r&&null!==r&&""!==r?r:"~"),"Outlier"!=s)break}}}},BoxPlotChart.prototype.getSeriesNames=function(){return this.m_seriesNames},BoxPlotChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},BoxPlotChart.prototype.getSeriesColors=function(){return this.m_seriesColors},BoxPlotChart.prototype.getBoxFillColors=function(){return this.m_boxFillColors},BoxPlotChart.prototype.setBoxFillColors=function(){if(this.m_boxFillColors=[],0<this.m_lowerboxfillcolors.length)for(var t=this.m_lowerboxfillcolors.split(","),i=this.m_upperboxfillcolors.split(","),e=this.m_boxfillopacity.split(","),a=(this.m_boxgroupnames.split(","),0),s=t.length;a<s;a++)this.m_boxFillColors[a]=[],this.m_boxFillColors[a][0]=t[a],this.m_boxFillColors[a][1]=i[a],this.m_boxFillColors[a][2]=e[a]},BoxPlotChart.prototype.setLegendNames=function(t){"clustered"==this.m_chartType?this.m_legendNames=this.m_subCateogryData:this.m_legendNames=["LowerBox","UpperBox"]},BoxPlotChart.prototype.getLegendNames=function(){return this.m_legendNames},BoxPlotChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0;t<this.getCategoryNames().length;t++)this.m_allfieldsName.push(this.getCategoryNames()[t]);for(var i=0;i<this.getSeriesNames().length;i++)this.m_allfieldsName.push(this.getSeriesNames()[i])},BoxPlotChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},BoxPlotChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var t=0;t<this.getCategoryDisplayNames().length;t++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[t]);for(var i=0;i<this.getSeriesDisplayNames().length;i++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[i])},BoxPlotChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},BoxPlotChart.prototype.setCategorySeriesData=function(){this.m_categoryData=[],this.m_subCategoryData=[],this.m_seriesData=[],this.m_seriesDataForToolTip=[],this.m_displaySeriesDataFlag=[];for(var t=0,i=this.getDataProvider().length;t<i;t++){var e=this.getDataProvider()[t];if(this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var a=0,s=this.getCategoryNames().length;a<s;a++){this.m_categoryData[a]||(this.m_categoryData[a]=[]);var r=this.getValidFieldDataFromRecord(e,this.getCategoryNames()[a]);this.m_categoryData[a][t]=r}}if(this.isEmptySubCategory=!0,0<this.getSubCategoryNames().length){this.isEmptySubCategory=!1;for(var o=0,s=this.getSubCategoryNames().length;o<s;o++){this.m_subCategoryData[o]||(this.m_subCategoryData[o]=[]);r=this.getValidFieldDataFromRecord(e,this.getSubCategoryNames()[o]);this.m_subCategoryData[o][t]=r}}this.m_displaySeriesDataFlag[t]=[];for(var h=0,s=this.getSeriesNames().length;h<s;h++){this.m_seriesData[h]||(this.m_seriesData[h]=[],this.m_seriesDataForToolTip[h]=[]);r=this.getValidFieldDataFromRecord(e,this.getSeriesNames()[h]);this.m_displaySeriesDataFlag[t][h]=!0,isNaN(r)&&(this.m_displaySeriesDataFlag[t][h]=!1,r=getNumericComparableValue(r)),this.m_seriesData[h][t]=r,this.m_seriesDataForToolTip[h][t]=r}}},BoxPlotChart.prototype.setCategoryData=function(){this.m_categoryData=[],this.isEmptyCategory=!0;for(var t=0,i=this.getCategoryNames().length;t<i;t++)this.isEmptyCategory=!1,this.m_categoryData[t]=this.getDataFromJSON(this.getCategoryNames()[t])},BoxPlotChart.prototype.getCategoryData=function(){return this.m_categoryData},BoxPlotChart.prototype.setSubCategoryData=function(){this.m_subCategoryData=[],this.isEmptySubCategory=!0;for(var t=0,i=this.getSubCategoryNames().length;t<i;t++)this.isEmptySubCategory=!1,this.m_subCategoryData[t]=this.getDataFromJSON(this.getSubCategoryNames()[t])},BoxPlotChart.prototype.getSubCategoryData=function(){return this.m_subCategoryData},BoxPlotChart.prototype.convert2DTo1D=function(t){for(var i=[],e=0,a=t.length;e<a;e++)for(var s=0,r=t[e].length;s<r;s++)i.push(t[e][s]);return i},BoxPlotChart.prototype.unique=function(t){for(var i=[],e=0,a=t.length;e<a;e++)-1==$.inArray(t[e],i)&&i.push(t[e]);return i},BoxPlotChart.prototype.setSeriesData=function(){this.m_seriesData=[];for(var t=0,i=this.getSeriesNames().length;t<i;t++)this.m_seriesData[t]=this.getDataFromJSON(this.getSeriesNames()[t])},BoxPlotChart.prototype.getSeriesData=function(){return this.m_seriesData},BoxPlotChart.prototype.setSeriesColor=function(t){this.m_seriesColor=t},BoxPlotChart.prototype.getSeriesColor=function(){return this.m_seriesColor},BoxPlotChart.prototype.checkValidConfiguration=function(){this.isValidConfig=!0;for(var t=0,i=this.m_fieldtypes.length;t<i;t++)IsBoolean(this.m_reqSeriesVisibleArr[this.m_fieldtypes[t]].visible)||(this.isValidConfig=!1)},BoxPlotChart.prototype.updateDataForBoxPlot=function(){if("clustered"==this.m_chartType)for(var t=this.unique(this.convert2DTo1D(this.m_categoryData)),i=this.m_subCateogryData=this.unique(this.convert2DTo1D(this.m_subCategoryData)),e=[],a=0,s=t.length;a<s;a++){e[a]=[];for(var r=0,o=i.length;r<o;r++){for(var h=[],l=0,n=this.getDataProvider().length;l<n;l++)if(this.getDataProvider()[l][this.getCategoryNames()]==t[a]&&this.getDataProvider()[l][this.getSubCategoryNames()]==i[r])for(var m=0;m<this.getSeriesNames().length;m++){var c=this.getDataProvider()[l][this.getSeriesNames()[m]];m<5?h[m]=c:(_=this.m_outlierDataSeperator[m],c&&-1<(""+c).indexOf(_)?(y=(""+c).split(_),h[m]=y):h[m]=[c])}e[a][r]=h}}else for(t=0!=this.m_categoryNames.length?this.convert2DTo1D(this.m_categoryData):this.convert2DTo1D(this.m_subCategoryData),i=[],e=(this.m_subCateogryData=[[]],[]),a=0,s=t.length;a<s;a++){e[a]=[];for(r=0;r<1;r++){for(h=[],m=0,o=this.getSeriesNames().length;m<o;m++){var _,y,c=this.getDataProvider()[a][this.getSeriesNames()[m]];m<5?h[m]=c:(_=this.m_outlierDataSeperator[m],c&&-1<(""+c).indexOf(_)?(y=(""+c).split(_),h[m]=y):h[m]=[c])}e[a][r]=h}}this.m_categoryData=[t],this.m_subCategoryData=[i],this.m_seriesData=e,this.m_seriesDataForToolTip=JSON.parse(JSON.stringify(this.m_seriesData)),this.m_seriesData=this.getUpdateSeriesData(this.m_seriesData)},BoxPlotChart.prototype.init=function(){this.setCategorySeriesData(),this.checkValidConfiguration(),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.isSeriesDataEmpty(),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),IsBoolean(this.m_isEmptySeries)||IsBoolean(this.isValidConfig)&&(this.updateDataForBoxPlot(),this.initializeCalculation(),this.m_xAxis.init(this,this.m_boxPlotCalculation),this.m_yAxis.init(this,this.m_boxPlotCalculation)),this.initializeToolTipProperty(),this.m_tooltip.init(this)},BoxPlotChart.prototype.getUpdateSeriesData=function(t){for(var i=0,e=t.length;i<e;i++)t[i]=this.getUpdateSeriesDataWithCommaSeperators(t[i]);return t},BoxPlotChart.prototype.getUpdateSeriesDataWithCommaSeperators=function(t){for(var i=0,e=t.length;i<e;i++)for(var a=0,s=t[i].length;a<s;a++)isNaN(t[i][a])&&"object"!=typeof t[i][a]?t[i][a]=null==t[i][a]?0:getNumericComparableValue(t[i][a]):t[i][a]=t[i][a];return t},BoxPlotChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.drawLegends(),IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isEmptySubCategory)?this.drawMessage("No Visible Category Or SubCategory Field Available"):IsBoolean(this.m_isEmptySeries)?this.drawMessage(this.m_status.noData):IsBoolean(this.isValidConfig)?(this.drawXAxis(),this.drawYAxis(),this.drawCandleChart()):this.drawMessage("Invalid chart configuration")},BoxPlotChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},BoxPlotChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEvent()},BoxPlotChart.prototype.drawTitle=function(){this.m_title.draw()},BoxPlotChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},BoxPlotChart.prototype.drawXAxis=function(){this.m_xAxis.drawTickMarks(),this.m_xAxis.drawVerticalLine(),this.m_xAxis.markXaxis(),this.m_xAxis.drawXAxis()},BoxPlotChart.prototype.drawYAxis=function(){IsBoolean(this.m_showmarkerline)&&this.m_yAxis.horizontalMarkerLines(),IsBoolean(this.m_zeromarkerline)&&!IsBoolean(this.m_basezero)&&IsBoolean(this.m_yAxis.hasNegativeAxisMarker(this.m_yAxisMarkersArray))&&this.m_yAxis.zeroMarkerLine(),this.m_yAxis.markYaxis(),this.m_yAxis.drawYAxis()},BoxPlotChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},BoxPlotChart.prototype.initializeCalculation=function(){this.calculateMaxMinValue(this.m_seriesData),this.calculateMinMax(),this.setChartDrawingArea(),this.m_boxPlotCalculation.initGlobalCalculation(this),this.setBoxFillColors(),this.setLegendNames(this.m_legendNames);var t=this.updateSeriesData(this.m_categoryData),t=(this.m_boxPlotCalculation.init(this,t,this.m_seriesData),this.m_xPixelArray=this.m_boxPlotCalculation.getxPixelArray(),this.m_yPixelArray=this.m_boxPlotCalculation.getyPixelArray(),this.m_candleWidth=this.m_boxPlotCalculation.getcandleWidth(),this.m_linePixelArray=this.m_boxPlotCalculation.getLinePixelArray(),this.m_medianLinePixelArray=this.m_boxPlotCalculation.getMedianLinePixelArray(),this.m_outlierPixelArray=this.m_boxPlotCalculation.getOutlierPixelArray(),this.m_outlierShapeArray=this.m_boxPlotCalculation.getOutlierShapeArray(),this.m_outlierColorsArray=this.m_boxPlotCalculation.getOutlierColorsArray(),this.m_outlierOpacityArray=this.m_boxPlotCalculation.getOutlierOpacityArray(),this.m_outlierRadiusArray=this.m_boxPlotCalculation.getOutlierRadiusArray(),this.m_candleHeightArray=this.m_boxPlotCalculation.getcandleHeightArray(),this.m_candleColor=this.m_boxPlotCalculation.getCandleColor(),convertColorToHex(this.m_strokecolor));this.initializeCandles(t)},BoxPlotChart.prototype.calculateMaxMinValue=function(t){this.calculateMax=0;for(var i=[],e=this.calculateMin=0,a=0,s=t.length;e<s;e++)for(var r=0,o=t[e].length;r<o;r++)for(var h=0,l=t[e][r].length;h<l;h++)if(4<h)if(t[e][r][h]&&"object"==typeof t[e][r][h])for(var n=0;n<t[e][r][h].length;n++)isNaN(t[e][r][h][n])||(i[a++]=+t[e][r][h][n]);else isNaN(t[e][r][h])||(i[a++]=+t[e][r][h]);else isNaN(t[e][r][h])||(i[a++]=+t[e][r][h]);var m=i.sort(numOrdA);this.calculateMin=m[0],this.calculateMax=m[m.length-1]},BoxPlotChart.prototype.calculateMinMax=function(){var t=this.calculateMin,i=this.calculateMax,t=this.getCalculateNiceScale(t,i,this.m_basezero,this.m_autoaxissetup,this.m_minimumaxisvalue,this.m_maximumaxisvalue,this.m_height);this.min=t.min,this.max=t.max,this.yAxisNoOfMarker=t.markerArray.length,this.yAxisText=t.step,this.m_yAxisMarkersArray=t.markerArray},BoxPlotChart.prototype.initializeCandles=function(t){for(var i=0,e=this.m_yPixelArray.length;i<e;i++){this.m_candlesArray[i]=[];for(var a=0,s=this.m_yPixelArray[i].length;a<s;a++)this.m_candlesArray[i][a]=new BoxCandles,this.m_candlesArray[i][a].init(this.m_xPixelArray[i][a],this.m_yPixelArray[i][a],this.m_candleWidth,this.m_candleHeightArray[i][a],this.m_linePixelArray[i][a],this.m_medianLinePixelArray[i][a],this.m_outlierPixelArray[i][a],this.m_outlierShapeArray[i][a],this.m_outlierColorsArray[i][a],this.m_outlierOpacityArray[i][a],this.m_outlierRadiusArray[i][a],this.m_candleColor[i][a],t,this.ctx)}},BoxPlotChart.prototype.updateSeriesData=function(t){var i=[];if(null!=t&&null!==t&&""!==t&&0!=t.length)for(var e=0,a=t[0].length;e<a;e++){i[e]=[];for(var s=0,r=t.length;s<r;s++)i[e][s]=t[s][e]}return i},BoxPlotChart.prototype.drawCandleChart=function(){for(var t=0,i=this.m_yPixelArray.length;t<i;t++)for(var e=0,a=this.m_yPixelArray[t].length;e<a;e++)this.isInRange(t)||this.m_candlesArray[t][e].drawCandle()},BoxPlotChart.prototype.isInRange=function(t){return 0==t?this.m_yPixelArray[t]>this.getStartY()||this.m_yPixelArray[t]<this.getEndY():this.m_yPixelArray[t-1]>this.getStartY()||this.m_yPixelArray[t-1]<this.getEndY()||this.m_yPixelArray[t]>this.getStartY()||this.m_yPixelArray[t]<this.getEndY()},BoxPlotChart.prototype.getLegendTableContent=function(){var t="";if("clustered"==this.m_chartType)for(var i=0,e=this.getLegendNames().length;i<e;i++){var a=this.getLegendGradient(this.m_candleColor[0][i][0],this.m_candleColor[0][i][1]);t+='<tr style="font-style:'+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'"><td><span style="background-image:'+a+'; width:10px;height:10px;"></span><span style="display:inline;">'+this.getLegendNames()[i]+"</span></td></tr>"}else for(i=0,e=this.getLegendNames().length;i<e;i++){var s=this.m_candleColor[0][0][i];t+='<tr style="font-style:'+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'"><td><span style="background-color:'+s+'; width:10px;height:10px;"><span style="display:inline;">'+this.getLegendNames()[i]+"</span></td></tr>"}return t},BoxPlotChart.prototype.getLegendGradient=function(t,i){return t!==i?"undefined"!=typeof InstallTrigger?"-moz-linear-gradient(to top, "+t+", "+i+");":document.documentMode?"-ms-linear-gradient(bottom, "+t+" 0%, "+i+" 100%)":"-webkit-linear-gradient("+i+", "+i+", "+t+", "+t+");":t},BoxPlotChart.prototype.getXPositionforToolTip=function(){for(var t=[],i=0,e=this.m_xPixelArray.length;i<e;i++)t.push(this.m_xPixelArray[0][i]);return t},BoxPlotChart.prototype.getToolTipData=function(t,i){var e;if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType)){if(t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY()){for(var a=0,s=this.m_xPixelArray.length;a<s;a++)for(var r=0,o=this.m_xPixelArray[a].length;r<o;r++)if(t<=+this.m_xPixelArray[a][r]+ +this.m_boxPlotCalculation.getcandleWidth()&&t>=+this.m_xPixelArray[a][r])if((e={cat:"",color:""}).data=new Array,e.cat=this.getCategoryData()[0][a],e.data[0]=[],"clustered"==this.m_chartType){e.color=this.getLegendGradient(this.m_candleColor[a][r][0],this.m_candleColor[a][r][1]),e.data[0][0]="SubCategory",e.data[0][1]=this.getSubCategoryDisplayNames()[0],e.data[0][2]=this.getSubCategoryData()[0][r];for(var h=0;h<this.m_fieldtypes.length;h++)if(h<5)e.data[h+1]=[],e.data[h+1][0]=this.m_fieldtypes[h],e.data[h+1][1]=this.m_seriesDisplayNames[h],e.data[h+1][2]=this.m_seriesDataForToolTip[a][r][h]?this.getFormatterForToolTip(this.m_seriesDataForToolTip[a][r][h]):"";else for(var l=this.m_boxPlotCalculation.getOutlierPixelArray()[a][r],n=0;n<l.length;n++)for(var m=0;m<l[n].length;m++)if(i<=+l[n][m]+5&&i>=l[n][m]-5){e.data[h+1]=[],e.data[h+1][0]=this.m_fieldtypes[+h],e.data[h+1][1]=this.m_seriesDisplayNames[+h+n],e.data[h+1][2]=this.m_seriesDataForToolTip[a][r][+h+n]&&this.m_seriesDataForToolTip[a][r][+h+n][m]?this.getFormatterForToolTip(this.m_seriesDataForToolTip[a][r][+h+n][m]):"";break}}else{e.color=this.getLegendGradient(this.m_candleColor[a][r][0],this.m_candleColor[a][r][1]);for(h=0;h<this.m_fieldtypes.length;h++)if(h<5)e.data[h]=[],e.data[h][0]=this.m_fieldtypes[h],e.data[h][1]=this.m_seriesDisplayNames[h],e.data[h][2]=this.m_seriesDataForToolTip[a][r][h]?this.getFormatterForToolTip(+this.m_seriesDataForToolTip[a][r][h]):"";else for(l=this.m_boxPlotCalculation.getOutlierPixelArray()[a][r],n=0;n<l.length;n++)for(m=0;m<l[n].length;m++)if(i<=+l[n][m]+5&&i>=l[n][m]-5){e.data[5]=[],e.data[5][0]=this.m_fieldtypes[+h],e.data[5][1]=this.m_seriesDisplayNames[+h+n],e.data[5][2]=this.m_seriesDataForToolTip[a][r][+h+n]&&this.m_seriesDataForToolTip[a][r][+h+n][m]?this.getFormatterForToolTip(this.m_seriesDataForToolTip[a][r][+h+n][m]):"";break}}}else this.hideToolTip();return e}},BoxPlotChart.prototype.drawTooltip=function(t,i){var e;IsBoolean(this.m_isEmptySeries)||this.m_designMode||(e=this.getToolTipData(t,i),this.m_hovercallback&&""!=this.m_hovercallback?this.drawCallBackContent(t,i,e):this.drawTooltipContent(e))},BoxPlotChart.prototype.drawTooltipContent=function(t){this.m_tooltip.draw(t,this.m_componenttype)},BoxPlotChart.prototype.getDrillDataPoints=function(t,i){if(!IsBoolean(this.m_isEmptySeries)&&t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY())for(var e=0,a=this.m_xPixelArray.length;e<a;e++)for(var s=0,r=this.m_xPixelArray[e].length;s<r;s++)if(t<=this.m_xPixelArray[e][s]+this.m_boxPlotCalculation.getcandleWidth()&&t>=this.m_xPixelArray[e][s]){for(var o={},h=0;h<this.m_fieldtypes.length-1;h++)o[this.m_fieldtypes[h]]=this.m_seriesData[e][s][h];o[this.getCategoryNames()[0]]=this.getCategoryData()[0][e],"clustered"==this.m_chartType&&(o[this.getSubCategoryNames()[0]]=this.getSubCategoryData()[0][e]);return{drillRecord:o,drillColor:""}}},BoxPlotCalculation.prototype.initGlobalCalculation=function(t){this.m_chart=t,this.m_x=this.m_chart.m_x,this.m_y=this.m_chart.m_y,this.m_width=this.m_chart.m_width,this.m_height=this.m_chart.m_height,this.m_seriesData=this.m_chart.m_seriesData,this.m_categoryData=this.m_chart.m_categoryData,this.m_chartYMargin=5,this.m_chartEndXMargin=35,this.m_verticalLegendMargin=60,this.m_chartTitleMargin=this.m_chart.m_title.getFontSize(),this.m_chartSubTitleMargin=this.m_chart.m_subTitle.getFontSize()},BoxPlotCalculation.prototype.init=function(t,i,e){this.m_chart=t,this.ctx=this.m_chart.ctx;t=e;this.m_xAxisData=i,this.data=this.setDataForCandle(t),this.m_yAxisData=this.data.candleHighdata,this.m_startX=this.m_chart.getStartX(),this.m_startY=this.m_chart.getStartY(),this.m_endX=this.m_chart.getEndX(),this.m_endY=this.m_chart.getEndY(),this.m_chartType=this.m_chart.getChartType(),this.setDrawHeight(),this.setDrawWidth(),this.m_candleGap=10,this.calculateCandleWidth(),this.max=this.m_chart.max,this.min=this.m_chart.min,this.setRatio(),this.setxPixelArray(),this.setyPixelArray(),this.setcandleHeightArray(t,this.data),this.setlinePixelArray(this.m_lineData,this.data),this.setMedianLinePixelArray(),this.setOutlierPixelArray()},BoxPlotCalculation.prototype.setDataForCandle=function(t){for(var i=[],e=[],a=[],s=[],r=[],o=[],h=[],l=[],n=[],m=[],c=[],_=[],y=[],g=[],u=(convertColorToHex(this.m_chart.m_declinefillcolor),convertColorToHex(this.m_chart.m_fillcolor),0),d=t.length;u<d;u++){i[u]=[],e[u]=[],a[u]=[],s[u]=[],r[u]=[],o[u]=[],h[u]=[],l[u]=[],n[u]=[],m[u]=[],c[u]=[],_[u]=[],y[u]=[],g[u]=[];for(var x=0,p=t[u].length;x<p;x++){var C=0,f=0;l[u][x]=[],c[u][x]=[],_[u][x]=[],y[u][x]=[],g[u][x]=[];for(var A,P,b=0,D=0;b<t[u][x].length;b++)if(0==b&&(C=t[u][x][b],f=t[u][x][b]),+t[u][x][b]>=C&&(C=+t[u][x][b]),+t[u][x][b]<=f&&(f=+t[u][x][b]),b<4&&(A=C,P=f),4<b){if(l[u][x][D]=[],c[u][x][D]=[],_[u][x][D]=[],y[u][x][D]=[],g[u][x][D]=[],t[u][x][b]&&"object"==typeof t[u][x][b])for(var v=0;v<t[u][x][b].length;v++)l[u][x][D].push(t[u][x][b][v]),c[u][x][D].push(+t[u][x][b][v]?this.m_chart.m_outlierShapes[b]:"NA"),_[u][x][D].push(this.m_chart.m_outlierColors[b]),y[u][x][D].push(this.m_chart.m_outlierOpacity[b]),g[u][x][D].push(this.m_chart.m_outlierRadius[b]);else l[u][x][D].push(+t[u][x][b]),c[u][x][D].push(+t[u][x][b]?this.m_chart.m_outlierShapes[b]:"NA"),_[u][x][D].push(this.m_chart.m_outlierColors[b]),y[u][x][D].push(this.m_chart.m_outlierOpacity[b]),g[u][x][D].push(this.m_chart.m_outlierRadius[b]);D++}i[u][x]=C,e[u][x]=f,a[u][x]=[this.getBoxFillColorMap(x).lower,this.getBoxFillColorMap(x).upper],s[u][x]=A,r[u][x]=P,o[u][x]=t[u][x][2]-t[u][x][3],h[u][x]=t[u][x][4],n[u][x]=t[u][x][2],m[u][x]=t[u][x][3]}}return this.m_lineData=this.setDataForCandleLine(t),this.m_candleColor=a,{candleHighdata:i,candleLowdata:e,candleMaxCandledata:s,candleMinCandledata:r,candleHeightCandledata:o,candleMedianCandledata:h,candleOutlierCandledata:l,candleQ3Candledata:n,candleQ1Candledata:m,candleOutlierShapes:c,candleOutlierColors:_,candleOutlierOpacity:y,candleOutlierRadius:g}},BoxPlotCalculation.prototype.getBoxFillColorMap=function(t){var i={lower:hex2rgb("#F89406",.8),upper:hex2rgb("#6C7A89",.8)};return this.m_chart.getBoxFillColors()[t]&&(i.lower=hex2rgb(this.m_chart.getBoxFillColors()[t][0],this.m_chart.getBoxFillColors()[t][2]),i.upper=hex2rgb(this.m_chart.getBoxFillColors()[t][1],this.m_chart.getBoxFillColors()[t][2])),i},BoxPlotCalculation.prototype.setDataForCandleLine=function(t){for(var i=[],e=0,a=t.length;e<a;e++){i[e]=[];for(var s=0,r=t[e].length;s<r;s++)i[e].push([t[e][s][0],t[e][s][1]])}return i},BoxPlotCalculation.prototype.minValue=function(){return this.m_chart.min},BoxPlotCalculation.prototype.getMaxValue=function(){return this.m_chart.max},BoxPlotCalculation.prototype.getRatio=function(){return this.ratio},BoxPlotCalculation.prototype.setRatio=function(){var t=this.getMaxValue()-this.minValue();this.ratio=0<t?this.getDrawHeight()/t:1},BoxPlotCalculation.prototype.getDrawHeight=function(){return this.drawHeight},BoxPlotCalculation.prototype.setDrawHeight=function(){this.drawHeight=this.m_startY-this.m_endY},BoxPlotCalculation.prototype.getDrawWidth=function(){return this.drawWidth},BoxPlotCalculation.prototype.setDrawWidth=function(){this.drawWidth=+this.m_endX-+this.m_startX},BoxPlotCalculation.prototype.calculateCandleWidth=function(){var t=this.m_xAxisData.length,i=(+t+1)*this.m_candleGap,i=(+this.getDrawWidth()-i)/t;100<i?(this.setCandleWidth(100),this.setCandleGap(100)):i<9?(this.setCandleWidth(9),this.setCandleGap(9)):this.setCandleWidth(i)},BoxPlotCalculation.prototype.getxPixelArray=function(){return this.m_xPixelArray},BoxPlotCalculation.prototype.setxPixelArray=function(){for(var t=[],i=0,e=this.m_yAxisData.length;i<e;i++){t[i]=[];for(var a=0,s=this.m_yAxisData[i].length;a<s;a++)t[i][a]=+this.m_startX+ +this.getcandleWidth()*i*this.m_chart.m_subCateogryData.length+this.getcandleWidth()*a+this.getcandleGap()/2+ +this.getcandleGap()*i}this.m_xPixelArray=t},BoxPlotCalculation.prototype.getyPixelArray=function(){return this.m_ypixelArray},BoxPlotCalculation.prototype.setyPixelArray=function(){for(var t=[],i=0,e=this.data.candleQ3Candledata.length;i<e;i++){t[i]=[];for(var a=0,s=this.data.candleQ3Candledata[i].length;a<s;a++){this.data.candleQ3Candledata[i][a]>=this.max&&(this.data.candleQ3Candledata[i][a]=this.max);var r=this.getRatio();(!IsBoolean(this.m_chart.isAxisSetup())||IsBoolean(this.m_chart.isBaseZero()))&&IsBoolean(this.m_chart.isBaseZero())?t[i][a]=this.m_startY-r*this.data.candleQ3Candledata[i][a]:t[i][a]=this.m_startY-r*this.data.candleQ3Candledata[i][a]+r*this.minValue()}}this.m_ypixelArray=t},BoxPlotCalculation.prototype.getcandleHeightArray=function(){return this.m_candleHeightArray},BoxPlotCalculation.prototype.setcandleHeightArray=function(t,i){for(var e=[],a=0,s=i.candleHeightCandledata.length;a<s;a++){e[a]=[];for(var r=0,o=i.candleHeightCandledata[a].length;r<o;r++){var h=this.getRatio(),l=i.candleHeightCandledata[a][r];e[a][r]=0!=l?Math.abs(l*h):+this.getMaxValue()/100*h}}this.m_candleHeightArray=e},BoxPlotCalculation.prototype.getLinePixelArray=function(){return this.m_linePixelArray},BoxPlotCalculation.prototype.getCandleColor=function(){return this.m_candleColor},BoxPlotCalculation.prototype.setlinePixelArray=function(t,i){for(var e=[],a=0,s=(t=this.updateCandleLinedata(t,i.candleQ3Candledata,i.candleQ1Candledata)).length;a<s;a++){e[a]=[];for(var r=0,o=t[a].length;r<o;r++){e[a][r]=[];for(var h=0,l=t[a][r].length;h<l;h++){var n,m=this.getRatio();IsBoolean(this.m_chart.isAxisSetup())&&!IsBoolean(this.m_chart.isBaseZero())?e[a][r][h]=this.m_startY-t[a][r][h]*m+m*this.minValue():(n=t[a][r][h],1==r?t[a][r][1]>=+this.max&&(n=+this.max):3==r&&t[a][r][3]<=+this.min&&(n=+this.min),IsBoolean(this.m_chart.isBaseZero())?e[a][r][h]=1==r||3==r?this.m_startY-n*m:this.m_startY-t[a][r][h]*m:e[a][r][h]=1==r||3==r?this.m_startY-n*m+m*this.minValue():this.m_startY-t[a][r][h]*m+m*this.minValue())}}}this.m_linePixelArray=e},BoxPlotCalculation.prototype.getMedianLinePixelArray=function(){return this.m_medianLinePixelArray},BoxPlotCalculation.prototype.setMedianLinePixelArray=function(t,i){for(var e=[],a=0,s=this.data.candleMedianCandledata.length;a<s;a++){e[a]=[];for(var r=0,o=this.data.candleMedianCandledata[a].length;r<o;r++){var h=this.getRatio();(!IsBoolean(this.m_chart.isAxisSetup())||IsBoolean(this.m_chart.isBaseZero()))&&IsBoolean(this.m_chart.isBaseZero())?e[a][r]=this.m_startY-h*this.data.candleMedianCandledata[a][r]:e[a][r]=this.m_startY-h*this.data.candleMedianCandledata[a][r]+h*this.minValue()}}this.m_medianLinePixelArray=e},BoxPlotCalculation.prototype.getOutlierPixelArray=function(){return this.m_outlierPixelArray},BoxPlotCalculation.prototype.setOutlierPixelArray=function(){for(var t=[],i=0,e=this.data.candleOutlierCandledata.length;i<e;i++){t[i]=[];for(var a=0,s=this.data.candleOutlierCandledata[i].length;a<s;a++){t[i][a]=[];for(var r=0,o=this.data.candleOutlierCandledata[i][a].length;r<o;r++){t[i][a][r]=[];for(var h=0;h<this.data.candleOutlierCandledata[i][a][r].length;h++){var l=this.getRatio();(!IsBoolean(this.m_chart.isAxisSetup())||IsBoolean(this.m_chart.isBaseZero()))&&IsBoolean(this.m_chart.isBaseZero())?t[i][a][r].push(this.m_startY-l*this.data.candleOutlierCandledata[i][a][r][h]):t[i][a][r].push(this.m_startY-l*this.data.candleOutlierCandledata[i][a][r][h]+l*this.minValue())}}}}this.m_outlierPixelArray=t},BoxPlotCalculation.prototype.getOutlierShapeArray=function(){return this.data.candleOutlierShapes},BoxPlotCalculation.prototype.getOutlierColorsArray=function(){return this.data.candleOutlierColors},BoxPlotCalculation.prototype.getOutlierOpacityArray=function(){return this.data.candleOutlierOpacity},BoxPlotCalculation.prototype.getOutlierRadiusArray=function(){return this.data.candleOutlierRadius},BoxPlotCalculation.prototype.updateCandleLinedata=function(t,i,e){for(var a=t,s=i,r=e,o=[],h=0,l=s.length;h<l;h++){o[h]=[];for(var n=0,m=s[h].length;n<m;n++){o[h][n]=[];var c=s[h][n],_=r[h][n],y=(c>=this.max&&(c=this.max),_<=this.min?_=this.min:_>+a[h][n][1]&&_>this.max&&(_=+a[h][n][1]),+a[h][n][0]),g=+a[h][n][1];y>this.max?y=this.max:y<this.min&&(y=this.min),g>this.max?g=this.max:g<this.min&&(g=this.min),o[h][n][0]=c,o[h][n][1]=y,o[h][n][2]=_,o[h][n][3]=g}}return o},BoxPlotCalculation.prototype.getYAxisMarkersArray=function(){return this.m_chart.m_yAxisMarkersArray},BoxPlotCalculation.prototype.getYAxisText=function(){return this.m_chart.m_yAxisText},BoxPlotCalculation.prototype.getcandleWidth=function(){return this.candleWidth},BoxPlotCalculation.prototype.setCandleWidth=function(t){this.candleWidth=t,1<this.m_chart.m_subCateogryData.length&&(this.candleWidth/=this.m_chart.m_subCateogryData.length)},BoxPlotCalculation.prototype.getcandleGap=function(){return this.m_candleGap},BoxPlotCalculation.prototype.setCandleGap=function(t){t*=this.m_xAxisData.length,t=this.getDrawWidth()-t;this.m_candleGap=t/this.m_xAxisData.length},BoxCandles.prototype.init=function(t,i,e,a,s,r,o,h,l,n,m,c,_,y){this.ctx=y,this.m_xPixel=t,this.m_yPixelArray=i,this.m_candleWidth=e,this.m_candleHeightArray=a,this.m_linePixelArray=s,this.m_medianLinePixelArray=r,this.m_outlierPixelArray=o,this.m_plotShapeArray=h,this.m_outlierColorsArray=l,this.m_outlierOpacityArray=n,this.m_plotRadiusArray=m,this.m_candleColor=c,this.m_strokeColor=_},BoxCandles.prototype.drawBoxCandles=function(){for(var t=0,i=this.m_yPixelArray.length;t<i;t++)this.drawCandle(+this.m_xPixel[t],+this.m_yPixelArray[t],+this.m_candleWidth,+this.m_candleHeightArray[t])},BoxCandles.prototype.drawCandle=function(){this.drawline(),this.drawOutliers(),this.ctx.save(),this.ctx.beginPath(),this.ctx.fillStyle=this.m_candleColor[1],this.ctx.rect(this.m_xPixel,this.m_yPixelArray,this.m_candleWidth,this.m_candleHeightArray),this.ctx.fill(),this.ctx.strokeStyle=this.m_strokeColor,this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.fillStyle=this.m_candleColor[0],this.ctx.rect(this.m_xPixel,this.m_medianLinePixelArray,this.m_candleWidth,this.m_candleHeightArray-(this.m_medianLinePixelArray-this.m_yPixelArray)),this.ctx.fill(),this.ctx.strokeStyle=this.m_strokeColor,this.ctx.stroke(),this.ctx.restore(),this.ctx.closePath()},BoxCandles.prototype.drawline=function(){this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.m_xPixel+ +this.m_candleWidth/2,+this.m_linePixelArray[0]),this.ctx.lineTo(this.m_xPixel+ +this.m_candleWidth/2,+this.m_linePixelArray[1]),this.ctx.lineWidth="2.2",this.ctx.strokeStyle=this.m_strokeColor,this.ctx.stroke(),this.ctx.restore(),this.ctx.closePath(),this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.m_xPixel+ +this.m_candleWidth/2,+this.m_linePixelArray[2]),this.ctx.lineTo(this.m_xPixel+ +this.m_candleWidth/2,+this.m_linePixelArray[3]),this.ctx.lineWidth="2.2",this.ctx.strokeStyle=this.m_strokeColor,this.ctx.stroke(),this.ctx.restore(),this.ctx.closePath()},BoxCandles.prototype.drawOutliers=function(){this.ctx.save();for(var t=0,i=this.m_outlierPixelArray.length;t<i;t++)for(var e=0,a=this.m_outlierPixelArray[t].length;e<a;e++){this.ctx.beginPath();var s=+this.m_xPixel+ +this.m_candleWidth/2,r=this.m_outlierPixelArray[t][e];switch(this.m_plotShapeArray[t][e]){case"cube":this.ctx.rect(s-+this.m_plotRadiusArray[t][e],r-+this.m_plotRadiusArray[t][e],2*+this.m_plotRadiusArray[t][e],2*+this.m_plotRadiusArray[t][e]);break;case"cross":this.ctx.moveTo(s-+this.m_plotRadiusArray[t][e],+r-+this.m_plotRadiusArray[t][e]),this.ctx.lineTo(s+ +this.m_plotRadiusArray[t][e],+r+ +this.m_plotRadiusArray[t][e]),this.ctx.moveTo(s+ +this.m_plotRadiusArray[t][e],+r-+this.m_plotRadiusArray[t][e]),this.ctx.lineTo(s-+this.m_plotRadiusArray[t][e],+r+ +this.m_plotRadiusArray[t][e]);break;case"quad":this.ctx.moveTo(s,+r-+this.m_plotRadiusArray[t][e]),this.ctx.lineTo(s+ +this.m_plotRadiusArray[t][e],+r),this.ctx.lineTo(s,+r+ +this.m_plotRadiusArray[t][e]),this.ctx.lineTo(s-+this.m_plotRadiusArray[t][e],+r),this.ctx.lineTo(s,+r-+this.m_plotRadiusArray[t][e]);break;case"triangle":this.ctx.moveTo(s,+r-+this.m_plotRadiusArray[t][e]),this.ctx.lineTo(s+ +this.m_plotRadiusArray[t][e],+r+ +this.m_plotRadiusArray[t][e]),this.ctx.lineTo(s-+this.m_plotRadiusArray[t][e],+r+ +this.m_plotRadiusArray[t][e]),this.ctx.lineTo(s,+r-+this.m_plotRadiusArray[t]);break;case"point":this.ctx.arc(s,+r,+this.m_plotRadiusArray[t][e],0,2*Math.PI,!1),this.ctx.arc(s,+r,+this.m_plotRadiusArray[t][e],0,2*Math.PI,!1),this.ctx.lineTo(s+ +this.m_plotRadiusArray[t][e],+r);break;case"polygon":this.drawPolygon(this.ctx,s,r,+this.m_plotRadiusArray[t][e],6,Math.PI/2,!1);break;case"star":this.drawStar(this.ctx,s,r,+this.m_plotRadiusArray[t][e],2*this.m_plotRadiusArray[t][e]/5,5);break;case"NA":break;case"default":this.ctx.arc(s,+r,+this.m_plotRadiusArray[t][e],0,2*Math.PI,!1),this.ctx.arc(s,+r,+this.m_plotRadiusArray[t][e],0,2*Math.PI,!1),this.ctx.lineTo(s,+r)}this.ctx.fillStyle=hex2rgb(this.m_outlierColorsArray[t][e],this.m_outlierOpacityArray[t][e]),this.ctx.fill(),this.ctx.lineWidth="0.3",this.ctx.strokeStyle=this.m_strokeColor,this.ctx.stroke(),this.ctx.closePath()}this.ctx.restore()},BoxCandles.prototype.drawPolygon=function(t,i,e,a,s,r,o){if(!(s<3)){var h=2*Math.PI/s,h=o?-h:h;t.save(),t.translate(i,e),t.rotate(r),t.moveTo(a,0);for(var l=1;l<s;l++)t.lineTo(a*Math.cos(h*l),a*Math.sin(h*l));t.closePath(),t.restore()}},BoxCandles.prototype.drawStar=function(t,i,e,a,s,r){var o,h,l=Math.PI/2*3,n=Math.PI/r;t.beginPath(),t.moveTo(i,e-s);for(var m=0;m<r;m++)o=+i+Math.cos(l)*s,h=+e+Math.sin(l)*s,t.lineTo(o,h),l=+l+n,o=+i+Math.cos(l)*a,h=+e+Math.sin(l)*a,t.lineTo(o,h),l=+l+n;t.lineTo(i,e-s),t.closePath()};
//# sourceMappingURL=BoxPlotChart.min.js.map