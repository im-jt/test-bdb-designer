/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function FilterSaver(e,t){this.base=Widget,this.base(),this.m_height="",this.m_width="",this.m_tooltip="",this.m_chromecolor="",this.m_label="",this.m_fontfamily="",this.m_fontsize="12",this.m_color="",this.m_fontweight="",this.m_fontstyle="",this.m_objectId=0,this.m_chartRef,this.m_objectID=[],this.m_componentid,this.m_borderradius=0,this.m_iconfontsize=12,this.m_checkboxfontsize=14,this.m_chartContainer=e,this.m_zIndex=t,this.m_cursortype="pointer",this.isCriteriaUpdated=!1,this.dashboardCriteriaList=[],this.m_filtersavermap={enableCheckBox:"false",popupHeaderText:"Filter Saver",popupAddCriteriaText:"Add Criteria",popupListCriteriaText:"Criteria List",listFilterComponents:"",cascadingDefinition:[]},this.m_updateddesign=!0}FilterSaver.prototype=new Widget,FilterSaver.prototype.setProperty=function(e){this.ParseJsonAttributes(e.Object,this),this.initCanvas()},FilterSaver.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},FilterSaver.prototype.getObjectName=function(){return this.getObjectType()},FilterSaver.prototype.ParseJsonAttributes=function(e,t){for(var i in this.chartJson=e)if("FilterSaver"==i)for(var a in e[i])this.setAttributeValueToNode(a,e[i],t);else this.setAttributeValueToNode(i,e,t)},FilterSaver.prototype.initializeDraggableDivAndCanvas=function(e,t){this.setDashboardNameAndObjectId(),this.createDraggableDiv(this.m_chartContainer,this.m_zIndex)},FilterSaver.prototype.setDashboardNameAndObjectId=function(){this.m_objectId=this.m_objectid,2==this.m_objectid.split(".").length&&(this.m_objectid=this.m_objectid.split(".")[1]),this.m_componentid="FilterSaver"+this.m_objectid},FilterSaver.prototype.draw=function(){this.drawObject()},FilterSaver.prototype.drawObject=function(){this.init(),this.drawChart(),""!=this.m_onafterrendercallback&&onAfterRender(this.m_onafterrendercallback)},FilterSaver.prototype.init=function(){this.setBorderRadius()},FilterSaver.prototype.setBorderRadius=function(){var e="undefined"==typeof InstallTrigger&&15<this.m_borderradius&&this.m_height<50?14:this.m_borderradius;this.m_borderradius=20<=this.m_height?e:9},FilterSaver.prototype.drawChart=function(){this.createButtonDIv(),this.initMouseAndTouchEventSVC("#"+this.m_objectid)},FilterSaver.prototype.createButtonDIv=function(){var e=this,t=($("#"+e.m_objectid).remove(),document.createElement("input")),i=(t.setAttribute("type","button"),t.setAttribute("id",e.m_objectid),(this.m_height-1.5*this.fontScaling(+this.m_fontsize))/2);return $(t).css({height:this.m_height+"px",width:this.m_width+"px",font:this.m_fontstyle+" "+this.m_fontweight+" "+this.fontScaling(this.m_fontsize)+"px "+selectGlobalFont(this.m_fontfamily),background:convertColorToHex(this.m_chromecolor),color:convertColorToHex(this.m_color),border:"5px","border-radius":this.m_borderradius+"px",padding:i+"px 2px "+i+"px 2px"}),t.value=this.formattedDescription(this,this.m_label),$("#draggableDiv"+e.m_objectid).append(t),t},FilterSaver.prototype.createPopupForFilterSaver=function(){var e=document.createElement("div"),t=(e.setAttribute("class","filterSvaer-controlBtn-container"),this.createControlButton("addCriteria",this.m_filtersavermap.popupAddCriteriaText)),i=this.createControlButton("getCriteriaList",this.m_filtersavermap.popupListCriteriaText),t=(e.appendChild(t),e.appendChild(i),this.mainDiv()),i=(t.appendChild(e),document.createElement("div"));i.setAttribute("id","mainContainer"+this.m_objectid),i.setAttribute("class","filterSaver-mainContainer"),t.appendChild(i),$(t).dialog({title:this.m_filtersavermap.popupHeaderText,closed:!1,cache:!1,modal:!0,draggable:!1,position:{my:"center",at:"center",of:window},onClose:function(){$("#dialogdiv").dialog("destroy")}}),$(".panel-title").css({"background-color":IsBoolean(this.m_updateddesign)?"#ffffff":this.m_chromeColor,padding:IsBoolean(this.m_updateddesign)?"24px":"5px","font-style":this.m_fontstyle,"font-weight":IsBoolean(this.m_updateddesign)?"800":this.m_fontweight,"font-size":IsBoolean(this.m_updateddesign)?"24px":this.fontScaling(this.m_fontsize)+"px","font-family":selectGlobalFont(this.m_fontfamily),color:IsBoolean(this.m_updateddesign)?"#434344":this.m_color,"text-align":IsBoolean(this.m_updateddesign)?"left":"center"}),$(".panel-tool").css({height:"21px",width:"26px",margin:"-14px 3px 0px 0px"}),$(".panel-tool a").css("vertical-align","middle"),$("dialogdiv .panel-header, .panel-body").css({"font-style":this.m_fontstyle,"font-weight":this.m_fontweight,"font-size":this.fontScaling(this.m_fontsize)+"px","font-family":selectGlobalFont(this.m_fontfamily),"border-style":"none"}),$(".window").css("background","linear-gradient(to bottom,#ffffff 0,#ffffff 20%)"),$(".window-shadow").css("display","none"),this.initializeClickEvents()},FilterSaver.prototype.createControlButton=function(e,t){var i=document.createElement("input");return i.type="button",i.setAttribute("id",e+this.m_objectid),i.setAttribute("class","filterSaverControlBtn"),i.value=t,$(i).css({font:"normal "+(IsBoolean(this.m_updateddesign)?"600":"normal")+" "+(IsBoolean(this.m_updateddesign)?"18":"14")*this.minWHRatio()+"px "+(IsBoolean(this.m_updateddesign)?this.m_fontfamily:selectGlobalFont(this.m_defaultFontFamily)),cursor:this.m_cursortype,"box-shadow":IsBoolean(this.m_updateddesign)?"none":"rgba(0, 0, 0, 0.14) 0px 0px 2px 0px, rgba(0, 0, 0, 0.01) 0px 0px 0px 1px"}),i},FilterSaver.prototype.mainDiv=function(){var e=document.createElement("div"),t=(e.id="dialogdiv",IsBoolean(this.m_designMode)||"MobileLayout"!=this.m_dashboard.m_AbsoluteLayout.m_layouttype?IsBoolean(this.m_updateddesign)?"700px":"500px":"90%");return $(e).css({width:t,height:"auto",padding:IsBoolean(this.m_updateddesign)?"13px":"0px",color:IsBoolean(this.m_updateddesign)?"#434344":this.m_color}),e},FilterSaver.prototype.createFilterInfoContainer=function(){var e=this.m_dashboard.m_widgetsArray,t=document.createElement("div"),i=(t.setAttribute("id","boxSecondInnerDiv"),t.setAttribute("class","filterSaver-filterInfoListContainer"),IsBoolean(this.m_updateddesign)?t.setAttribute("class","filterSaver-filterInfoListCont"):t.setAttribute("class","filterSaver-filterInfoListContainer"),document.createElement("ul"));if(i.setAttribute("class","filterSaver-filterInfo-ul"),t.append(i),""===this.m_filtersavermap.listFilterComponents){for(var a=0;a<e.length;a++)if("filter"==e[a].m_objecttype)if(0<(l=e[a]).m_variable.DefaultValues.DefaultValue.length&&l.fieldNameValueMap){var r=[],o={compName:l.chartJson.designData.class,compId:l.m_title.m_description};if(!l.chartJson||"combo_filter"!=l.chartJson.componentType&&"list_filter"!=l.chartJson.componentType){if(l.chartJson&&"radio_filter"==l.chartJson.componentType)r.push({name:"Label",value:l.fieldNameValueMap.Label});else if(l.chartJson&&"hierarchical_combo"==l.chartJson.componentType)for(var s=0;s<l.m_variable.DefaultValues.DefaultValue.length;s++){var n=l.m_variable.DefaultValues.DefaultValue[s];r.push({name:n.name,value:l.fieldNameValueMap[n.name]})}}else r.push({name:l.m_categoryName[0],value:l.fieldNameValueMap[l.m_categoryName[0]]});this.createRow(l.m_objectid,o,r,i)}}else for(var l,a=0;a<e.length;a++)if("filter"==e[a].m_objecttype&&-1<this.m_filtersavermap.listFilterComponents.indexOf(e[a].m_referenceid))if(0<(l=e[a]).m_variable.DefaultValues.DefaultValue.length&&l.fieldNameValueMap){r=[],o={compName:l.chartJson.designData.class,compId:l.m_title.m_description};if(!l.chartJson||"combo_filter"!=l.chartJson.componentType&&"list_filter"!=l.chartJson.componentType){if(l.chartJson&&"radio_filter"==l.chartJson.componentType)r.push({name:"Label",value:l.fieldNameValueMap.Label});else if(l.chartJson&&"hierarchical_combo"==l.chartJson.componentType)for(s=0;s<l.m_variable.DefaultValues.DefaultValue.length;s++){n=l.m_variable.DefaultValues.DefaultValue[s];r.push({name:n.name,value:l.fieldNameValueMap[n.name]})}}else r.push({name:l.m_categoryName[0],value:l.fieldNameValueMap[l.m_categoryName[0]]});this.createRow(l.m_objectid,o,r,i)}$("#mainContainer"+this.m_objectid).append(t)},FilterSaver.prototype.createCriteriaNameInputContainer=function(){var e=document.createElement("div"),t=(e.setAttribute("id","criteriaNameDiv"+this.m_objectid),IsBoolean(this.m_updateddesign)?e.setAttribute("class","filterSaver-crtriaNameDiv"):e.setAttribute("class","filterSaver-criteriaNameDiv"),document.createElement("input"));t.type="text",t.setAttribute("id","criteriaSaverTextBox"+this.m_objectid),t.innerHTML="",this.setFontCSS(t),t.setAttribute("placeholder","Enter criteria name"),e.appendChild(t),$("#mainContainer"+this.m_objectid).append(e)},FilterSaver.prototype.drawCriteriaList=function(){var e=this,t=($("#criteriaList"+e.m_objectid).remove(),document.createElement("div")),i=(t.setAttribute("id","criteriaList"+e.m_objectid),t.setAttribute("class","filterSaverListDiv"),document.createElement("ul"));i.setAttribute("id","criteriaUL"+e.m_objectid);for(var a=0;a<this.dashboardCriteriaList.length;a++){var r=this.dashboardCriteriaList[a],r=e.createList(r);i.appendChild(r)}return $(t).append(i),$("#mainContainer"+this.m_objectid).append(t),$("#criteriaList"+e.m_objectid).hide(),t},FilterSaver.prototype.createEmptyListAlert=function(e,t){$("#"+e+this.m_objectid).remove();var i=document.createElement("div"),e=(i.setAttribute("id",e+this.m_objectid),IsBoolean(this.m_updateddesign)?i.setAttribute("class","filterSaver-emptyListAlrt"):i.setAttribute("class","filterSaver-emptyListAlert"),document.createElement("span"));e.innerHTML=t,this.setFontCSS(e),$(i).append(e),$("#mainContainer"+this.m_objectid).append(i),$(i).hide()},FilterSaver.prototype.deleteCriteriaPopUpModal=function(e,t){var i=this,a=($("#deletetCriteriaPopUp"+i.m_objectid).remove(),$("#transparentBGDiv"+i.m_objectid).remove(),document.createElement("div")),r=(a.setAttribute("id","transparentBGDiv"+i.m_objectid),a.setAttribute("class","filterSaver-deleteCriteriaPopUp-bgDiv"),$(".window").height()),r=(a.style.height=r+10+"px",document.createElement("div")),e=(r.setAttribute("id","deletetCriteriaPopUp"+i.m_objectid),r.setAttribute("class","filterSaver-deleteCriteriaPopUp"),"<div style='background-color: #006684; width: 100%; height: 24%;'> <span style='float: left; padding: 8px; color: #ffffff;'> Delete Criteria </span>   <span class='bdmenuicon icons bd-close close-modalPopUp'  title='Close' style='float: right; padding: 8px; color: #ffffff; cursor: pointer;'></span>  </div><div style='height: 52%; width: 100%; background-color: #ffffff; text-align: left; padding: 20px 8px 20px 8px;'>Do you want to delete criteria '"+e+"'. </div><div style='width: 100%; height: 24%; background-color: #eaeaea; padding: 3px;'> <button class='filterSaver-DelPopUpBtns close-modalPopUp' style='background:rgb(255,87,34); float: right;'>No</button> <button class='filterSaver-DelPopUpBtns' id='delCriteria'style='background-color: #006684; float: right;'> Yes </button> </div>");r.innerHTML=e,a.appendChild(r),$("#dialogdiv").append(a),$(r).find("#delCriteria").on("click",function(e){i.deleteDashboardCriterias({selectedIds:t}),$(a).remove()}),$(r).find(".close-modalPopUp").on("click",function(e){$(a).remove()})},FilterSaver.prototype.createList=function(e){var t=document.createElement("li"),i=(t.setAttribute("id","li"+e.id),t.setAttribute("class","filterSaver-li"),document.createElement("span")),a=(i.setAttribute("class","filterSaver-li-label"),i.innerHTML=e.criteriaName,i.title=e.criteriaName,this.setFontCSS(i),this.createCriteriaListControlBtns("apply"+e.id,"Apply",e,"bd-ok")),e=this.createCriteriaListControlBtns("delete"+e.id,"Delete",e,"bd-cross");return t.appendChild(i),t.appendChild(a),t.appendChild(e),t},FilterSaver.prototype.createCriteriaListControlBtns=function(e,o,t,i){var s=this,a=document.createElement("span");return a.setAttribute("id",e+s.m_objectid),a.setAttribute("class","filterSaver-li-controlBtn bdmenuicon icons "+i),a.value=o,$(a).on("mouseenter",function(e){s.removeToolTipDiv();var t=document.getElementById("draggablesParentDiv"+s.m_dashboard.m_id),i=(t.scrollLeft,t.scrollTop,$(t).offset()),a=i.top+$(t)[0].clientTop-$(t)[0].scrollTop,i=i.left+$(t)[0].clientLeft-$(t)[0].scrollLeft,t=$(this)[0].offsetLeft,a=($(this)[0].offsetTop,e.pageY-e.offsetY-a+30),t=e.pageX-i-t+25,r=document.createElement("div"),a=(r.innerHTML=o,r.setAttribute("id","toolTipDiv"),r.setAttribute("class","settingIcon"),r.setAttribute("placement","bottom"),$(document.body).append(r),$.extend(s.getTooltipStyles(),{top:a+"px",left:t+"px"})),t=($(r).css(a),+r.offsetWidth),a=(ht=+r.offsetHeight,e.pageX-e.offsetX-i-t/2+14+"px");$(r).css("left",a)}).on("mouseleave",function(){s.removeToolTipDiv()}),$(a).css({"font-size":this.fontScaling(this.m_iconfontsize)+"px"}),$(a).bind("click",t,function(e){var t=e.data;switch(this.value){case"Delete":var i,a=[];""!=(i=s.m_dashboard.m_dashboardjson.Niv.Dashboard.backendId)&&null!=i&&(a.push(t.id),s.deleteCriteriaPopUpModal(t.criteriaName,a));break;case"Apply":""!=(i=s.m_dashboard.m_dashboardjson.Niv.Dashboard.backendId)&&null!=i&&s.getDashboardCriteriaById({criteriaId:t.id})}}),a},FilterSaver.prototype.applyDashboardCriteria=function(e){var t=e,i=[];if(0<this.m_filtersavermap.cascadingDefinition.length)for(var a=0;a<this.m_filtersavermap.cascadingDefinition.length;a++)for(var r=0;r<t.length;r++)this.m_filtersavermap.cascadingDefinition[a]===t[r].key&&i.push(t[r]);else i=t;if(0<i.length)if(0!==this.m_filtersavermap.cascadingDefinition.length)for(var o=i.length-1;0<=o;o--)0===o?(s=i[o],sdk.updateGlobalVariable(s.key,s.attributes),n=sdk.getWidget(s.key),this.updateComponentSelectedIndex(n,s)):(s=i[o],sdk.updateGlobalVariable(s.key,s.attributes),n=sdk.getWidget(s.key),this.updateOnlyComponentSelectedIndex(n,s));else for(o=0;o<i.length;o++){var s=i[o],n=(sdk.updateGlobalVariable(s.key,s.attributes),sdk.getWidget(s.key));this.updateComponentSelectedIndex(n,s)}$("#dialogdiv").dialog("destroy")},FilterSaver.prototype.updateComponentSelectedIndex=function(e,t){if(e)switch(e.chartJson.componentType){case"combo_filter":case"list_filter":e.m_selectedindex=t.selectedIndex,e.draw();break;case"checkbox_filter":var i="1"==t.selectedIndex;e.m_checkboxselected=i,e.draw();break;case"radio_filter":e.m_selectedindex=t.selectedIndex,e.draw();break;case"hierarchical_combo":IsBoolean(e.m_allowmultipleselection)?(e.m_currentIndexSelect=t.selectedIndex,jqEasyUI("#ComboTree"+e.m_componentid).combotree("setValues",e.m_currentIndexSelect)):(e.m_currentIndexSelect=t.selectedIndex,jqEasyUI("#ComboTree"+e.m_componentid).combotree("setValue",e.m_currentIndexSelect))}},FilterSaver.prototype.updateOnlyComponentSelectedIndex=function(e,t){if(e)switch(e.chartJson.componentType){case"combo_filter":case"list_filter":e.m_selectedindex=t.selectedIndex;break;case"checkbox_filter":var i="1"==t.selectedIndex;e.m_checkboxselected=i;break;case"radio_filter":e.m_selectedindex=t.selectedIndex;break;case"hierarchical_combo":IsBoolean(e.m_allowmultipleselection)?(e.m_currentIndexSelect=t.selectedIndex,jqEasyUI("#ComboTree"+e.m_componentid).combotree("setValues",e.m_currentIndexSelect)):(e.m_currentIndexSelect=t.selectedIndex,jqEasyUI("#ComboTree"+e.m_componentid).combotree("setValue",e.m_currentIndexSelect))}},FilterSaver.prototype.createRow=function(e,t,i,a){var r,o=document.createElement("li"),s=(o.setAttribute("id","filterDetailLi"+e),IsBoolean(this.m_updateddesign)?o.setAttribute("class","filterSaver-flterInfo-li"):o.setAttribute("class","filterSaver-filterInfo-li"),IsBoolean(this.m_filtersavermap.enableCheckBox)&&((r=document.createElement("span")).setAttribute("class","li-inputCheck filterSaver-li-controlBtn"),s=this.createCheckBoxButton(e),r.appendChild(s),o.appendChild(r)),document.createElement("span")),n=(s.setAttribute("class","filterSaver-filterInfo-li-label"),s.setAttribute("id",e),s.innerHTML="<span style='font-style: (IsBoolean(this.m_updateddesign) ? normal : italic);'> "+t.compId+" </span> ",this.setFontCSS(s),document.createElement("div"));n.setAttribute("class","filterDisplayInfoDiv panel");for(var l=0;l<i.length;l++){var d=document.createElement("span"),c=(d.setAttribute("class","filterDisplayInfoSpan-left"),d.innerHTML=i[l].name,this.setFontCSS(d),document.createElement("span"));c.setAttribute("class","filterDisplayInfoSpan-right"),c.innerHTML=i[l].value,this.setFontCSS(c),n.appendChild(d),n.appendChild(c)}o.appendChild(s),$(a).append(o),$(a).append(n),this.m_designMode},FilterSaver.prototype.initMouseAndTouchEvent=function(t){var h,i,a;IsBoolean(this.m_designMode)||((h=this).checkToolTipDesc=this.updateToolTipInfo(this.m_tooltip),i=function(e){h.removeToolTipDiv()},a=function(e){h.createPopupForFilterSaver()},"ontouchstart"in document.documentElement?$("#draggableDiv"+h.m_objectid).bind("touchstart",function(e){e.stopImmediatePropagation(),($("."+h.m_objecttype+"ToolTipDiv").length?i.bind($(t)):function(e){var t,i,a,r,o,s;e.stopImmediatePropagation(),h.m_designMode||""==h.m_tooltip||" "==h.m_tooltip||(0===$(".draggablesParentDiv").find("#toolTipDiv").length?(t=(i=document.getElementById("draggablesParentDiv"+h.m_dashboard.m_id)).scrollLeft,i=i.scrollTop,r=+(a=e.originalEvent.touches[0].pageY)+ +i+20,e=+(e=e.originalEvent.touches[0].pageX)+ +t-150<0?+e+ +t:+e+ +t-160,(o=document.createElement("div")).innerHTML=h.checkToolTipDesc,o.setAttribute("id","toolTipDiv"),o.setAttribute("class",h.m_objecttype+"ToolTipDiv"),$(".draggablesParentDiv").append(o),s=$.extend(h.getTooltipStyles(),{top:r+"px",left:e+"px"}),$(o).css(s),20+r+ +$(o).height()>h.m_dashboard.m_AbsoluteLayout.m_height+i&&(r=+a-20+ +i-+$(o).height(),$(o).css("top",r)),10+e+ +$(o).width()>h.m_dashboard.m_AbsoluteLayout.m_width+t&&(e=+a-10+ +t-+$(o).width(),$(o).css("left",e))):h.removeToolTipDiv())}.bind(this))(e),a.bind(this)(e)}).bind("touchend",function(e){}):$(t).click(function(e){i.bind(this)(e),a.bind(this)(e)}).hover(function(e){!function(e){$(this).css("cursor",h.m_cursortype)}.bind(this)(e)}).mousemove(function(e){!function(e){var t,i,a,r,o,s,n,l,d,c,p;h.m_designMode||""==h.m_tooltip||" "==h.m_tooltip||(e.stopPropagation(),h.removeToolTipDiv(),t=(o=document.getElementById("draggablesParentDiv"+h.m_dashboard.m_id)).scrollLeft,i=o.scrollTop,a=(r=$(o).offset()).top+$(o)[0].clientTop-$(o)[0].scrollTop,r=r.left+$(o)[0].clientLeft-$(o)[0].scrollLeft,o=$(this)[0].offsetLeft,p=$(this)[0].offsetTop,s=e.pageY-a-p+5,n=e.pageX-r-o+5,(l=document.createElement("div")).innerHTML=h.checkToolTipDesc,l.setAttribute("id","toolTipDiv"),l.setAttribute("class","settingIcon"),l.setAttribute("placement","bottom"),$(".draggablesParentDiv").append(l),d=+h.m_width,c=+h.m_height,c=$.extend(h.getTooltipStyles(),{top:e.pageY-e.offsetY+c-a-p-11+"px",left:e.pageX-e.offsetX-r-o+10+"px"}),$(l).css(c),p=e.pageX-e.offsetX+d/2-l.offsetWidth/2-8+"px",$(l).css("left",p),$(l).css("box-shadow","0 5px 15px -5px rgb(0 0 0 / 50%)"),10+s+ +$(l).height()>+h.m_dashboard.m_AbsoluteLayout.m_height+i&&(s=a-10+ +i-+$(l).height(),$(l).css("top",s)),10+n+ +$(l).width()>+h.m_dashboard.m_AbsoluteLayout.m_width+t&&(n-=+$(l).width(),$(l).css("left",n)))}.bind(this)(e)}).mouseout(function(e){i.bind(this)(e)}),$("#draggableDiv"+h.m_objectid).on("swipeleft",function(e){onSwipeLeft(h,e)}).on("swiperight",function(e){onSwipeRight(h,e)}).on("mousewheel",function(e){h.hideToolTip()}),$(".draggablesParentDiv").on("scroll",function(e){h.hideToolTip()}),$("#WatermarkDiv").on("scroll",function(e){h.hideToolTip()}))},FilterSaver.prototype.createCheckBoxButton=function(e){var t=document.createElement("input");return t.setAttribute("type","checkbox"),t.setAttribute("name","checkboxbutton"),t.setAttribute("id",e),t.setAttribute("class","option-input-cr cr-checkbox"),$(t).css({height:this.fontScaling(this.m_checkboxfontsize)+"px",width:this.fontScaling(this.m_checkboxfontsize)+"px",margin:"auto",cursor:this.m_cursortype}),t},FilterSaver.prototype.createSaveCancelBtn=function(){var e=document.createElement("div"),t=(e.setAttribute("id","saveCriteria"+this.m_objectid),e.setAttribute("class","filterSaver-save-btn-container"),this.createSaveCriteriaButton("Save"));e.appendChild(t),$("#mainContainer"+this.m_objectid).append(e)},FilterSaver.prototype.showEmptyDivMsg=function(){var e=this;(0<e.dashboardCriteriaList.length?($("#savedCriteriaListEmptyAlert"+e.m_objectid).hide(),$("#criteriaList"+e.m_objectid)):($("#criteriaList"+e.m_objectid).hide(),$("#savedCriteriaListEmptyAlert"+e.m_objectid))).show(),$(".filterSaverControlBtn").removeClass("filterSaver-selectedBtn"),$("#getCriteriaList"+e.m_objectid).addClass("filterSaver-selectedBtn")},FilterSaver.prototype.createSaveCriteriaButton=function(e){var t=document.createElement("input");return t.type="submit",t.setAttribute("class","filterSaver-save-btn"),t.value=e,$(t).css({"font-style":this.m_fontstyle,"font-weight":this.m_fontweight,"font-size":this.fontScaling(this.m_fontsize)+"px","font-family":selectGlobalFont(this.m_fontfamily),cursor:this.m_cursortype,background:IsBoolean(this.m_updateddesign)?"#0D78BF":"#006684",padding:IsBoolean(this.m_updateddesign)?"8px":"0px","border-radius":IsBoolean(this.m_updateddesign)?"4px":"0px"}),t},FilterSaver.prototype.initializeClickEvents=function(){var t=this;this.createCriteriaNameInputContainer(),this.createFilterInfoContainer(),this.createSaveCancelBtn();var e="No filter component available.",i="No saved criteria available.",e=(this.createEmptyListAlert("filterInfoListEmptyAlert",e),this.createEmptyListAlert("savedCriteriaListEmptyAlert",i),this.m_dashboard.m_dashboardjson.Niv.Dashboard.backendId),a=(this.isCriteriaUpdated||""==e?(this.drawCriteriaList(),this.showEmptyDivMsg()):(this.getDashboardCriteriaList({dashboardId:e}),this.isCriteriaUpdated=!0),$("#usetittlediv").hide(),$("#criteriaNameDiv"+t.m_objectid).hide(),$("#boxSecondInnerDiv").hide(),$("#saveCriteria"+t.m_objectid).hide(),IsBoolean(this.m_updateddesign)?$("#getCriteriaList"+t.m_objectid).addClass("filterSaver-slctdBtn"):$("#getCriteriaList"+t.m_objectid).addClass("filterSaver-selectedBtn"),$("#addCriteria"+t.m_objectid).click(function(){$("#criteriaList"+t.m_objectid).hide(),$("#savedCriteriaListEmptyAlert"+t.m_objectid).hide(),(0<$("#boxSecondInnerDiv").find("li").length?($("#filterInfoListEmptyAlert"+t.m_objectid).hide(),$("#criteriaNameDiv"+t.m_objectid).show(),$("#criteriaSaverTextBox"+t.m_objectid).focus(),$("#boxSecondInnerDiv").show(),$("#saveCriteria"+t.m_objectid)):($("#criteriaNameDiv"+t.m_objectid).hide(),$("#saveCriteria"+t.m_objectid).hide(),$("#boxSecondInnerDiv").hide(),$("#filterInfoListEmptyAlert"+t.m_objectid))).show(),IsBoolean(!this.m_updateddesign)?($(".filterSaverControlBtn").removeClass("filterSaver-slctdBtn"),$(".filterSaverControlBtn").removeClass("filterSaver-selectedBtn"),$(this).addClass("filterSaver-slctdBtn")):($(".filterSaverControlBtn").removeClass("filterSaver-selectedBtn"),$(".filterSaverControlBtn").removeClass("filterSaver-slctdBtn"),$(this).addClass("filterSaver-selectedBtn"))}),$("#getCriteriaList"+t.m_objectid).click(function(){$("#criteriaNameDiv"+t.m_objectid).hide(),$("#saveCriteria"+t.m_objectid).hide(),$(".filterSaver-save-btn-container").hide(),$("#boxSecondInnerDiv").hide(),$("#filterInfoListEmptyAlert"+t.m_objectid).hide(),(0<t.dashboardCriteriaList.length?($("#savedCriteriaListEmptyAlert"+t.m_objectid).hide(),$("#criteriaList"+t.m_objectid)):($("#criteriaList"+t.m_objectid).hide(),$("#savedCriteriaListEmptyAlert"+t.m_objectid))).show(),IsBoolean(!this.m_updateddesign)?($(".filterSaverControlBtn").removeClass("filterSaver-slctdBtn"),$(this).addClass("filterSaver-slctdBtn")):($(".filterSaverControlBtn").removeClass("filterSaver-selectedBtn"),$(this).addClass("filterSaver-selectedBtn"))}),[]);IsBoolean(this.m_filtersavermap.enableCheckBox)?($("input[name='checkboxbutton']").each(function(){$(this).attr("checked","checked"),a.push(this.id)}),$(".li-inputCheck").on("click",function(){$("#saveCriteria"+t.m_objectid).show();var e=$(this).find("input")[0];$(this).find("input").is(":checked")?a.push(e.id):-1<a.indexOf(e.id)&&(e=a.indexOf(e.id),a.splice(e,1))})):$(".filterSaver-filterInfo-li-label").each(function(){$(this).attr("checked","checked"),a.push(this.id)}),$(".filterSaver-save-btn").click(function(){t.saveNewCriteria(a)})},FilterSaver.prototype.setFontCSS=function(e){var t=this;$(e).css({"font-style":t.m_fontstyle,"font-weight":t.m_fontweight,"font-size":t.fontScaling(t.m_fontsize)+"px","font-family":selectGlobalFont(t.m_fontfamily)})},FilterSaver.prototype.handleOnChangeEvent=function(){var e={};e[""==this.m_fieldname||null==this.m_fieldname?"Value":this.m_fieldname]=this.m_fieldvalue,this.updateDataPoints(e)},FilterSaver.prototype.saveNewCriteria=function(e){var t=this,i=t.m_dashboard.m_widgetsArray,a=[],r=$("#criteriaSaverTextBox"+t.m_objectid).val();if(""!=r&&null!=r){var o=this.m_dashboard.m_dashboardjson.Niv.Dashboard.backendId;if(""!=o){for(var s=0;s<i.length;s++){var n=i[s];if("filter"==n.m_objecttype&&void 0!==e&&-1<e.indexOf(n.m_objectid))try{var l=sdk.getGlobalVariable(n.m_globalkey);a.push(l),l.objectID=n.m_objectId,"hierarchical_combo"==n.chartJson.componentType?l.selectedIndex=n.m_currentIndexSelect:l.selectedIndex=n.m_selectedindexarray}catch(e){}}0<a.length?(this.saveDashboardCriteria({criteriaName:r,Id:"",dashboardId:o,criteriaList:a}),$("#criteriaSaverTextBox"+t.m_objectid).val(""),$("#criteriaSaverTextBox"+t.m_objectid).focus()):alertPopUpModal({type:"warning",message:"Criteria can not be empty",timeout:"3000"})}else alertPopUpModal({type:"warning",message:"Please save the dashboard before saving a criteria",timeout:"3000"})}else alertPopUpModal({type:"warning",message:"Criteria name can not be empty",timeout:"3000"}),$("#criteriaSaverTextBox"+t.m_objectid).focus()},FilterSaver.prototype.parseDashboardCriteria=function(e){e=JSON.parse(e.criteriaData);this.handleOnChangeEvent(),this.applyDashboardCriteria(e)},FilterSaver.prototype.setCriteriaList=function(e){e=e.DashboardCriteriaReponse.dashboardcriterialist;this.dashboardCriteriaList=e,this.drawCriteriaList(),this.showEmptyDivMsg()},FilterSaver.prototype.updateCriteriaList=function(e,t){switch(e){case"Delete":for(var i=-1,a=0;a<this.dashboardCriteriaList.length;a++)if(this.dashboardCriteriaList[a].id==t[0]){i=a;break}-1<i&&this.dashboardCriteriaList.splice(i,1),this.drawCriteriaList(),this.showEmptyDivMsg();break;case"ADD":var r={id:t.id,criteriaName:t.criteriaName};this.dashboardCriteriaList.push(r),this.drawCriteriaList(),$("#getCriteriaList"+this.m_objectid).click()}},FilterSaver.prototype.getDashboardCriteriaList=function(e){var a=this,t=req_url.designer.getDashboardCriteriaList;showLoader(),this.webServiceCall(t,e,function(e,t){var i;(e=getDecryptedResponse(e))&&(i=e.DashboardCriteriaReponse)&&i.success&&(a.setCriteriaList(e),alertPopUpModal({type:"success",message:"Saved criteria has been loaded",timeout:"3000"}))},function(e,t){alertPopUpModal({type:"error",message:"Failed to load saved criteria",timeout:"3000"})})},FilterSaver.prototype.saveDashboardCriteria=function(e){var a=this,t=req_url.designer.saveDashboardCriteria,e={data:JSON.stringify(e)};showLoader(),this.webServiceCall(t,e,function(e,t){var i;(e=getDecryptedResponse(e))&&(i=e.DashboardCriteriaReponse)&&i.success&&(a.isCriteriaUpdated=!0,a.updateCriteriaList("ADD",e.DashboardCriteriaReponse),alertPopUpModal({type:"success",message:"Criteria has been saved",timeout:"3000"}))},function(e,t){alertPopUpModal({type:"error",message:"Failed to save criteria",timeout:"3000"})})},FilterSaver.prototype.getDashboardCriteriaById=function(e){var a=this,t=req_url.designer.getDashboardCriteriaById;showLoader(),this.webServiceCall(t,e,function(e,t){var i;(e=getDecryptedResponse(e))&&(i=e.DashboardCriteriaReponse)&&i.success&&(a.isCriteriaUpdated=!0,a.parseDashboardCriteria(e.DashboardCriteriaReponse),alertPopUpModal({type:"success",message:"Criteria has been applied",timeout:"3000"}))},function(e,t){alertPopUpModal({type:"error",message:"Failed to apply the criteria",timeout:"3000"})})},FilterSaver.prototype.deleteDashboardCriterias=function(i){var a=this,e=req_url.designer.deleteDashboardCriterias,t={criteriaIds:JSON.stringify(i)};showLoader(),this.webServiceCall(e,t,function(e,t){(e=getDecryptedResponse(e))&&(e=e.DashboardCriteriaReponse)&&e.success&&(a.updateCriteriaList("Delete",i.selectedIds),alertPopUpModal({type:"success",message:"Criteria has been deleted",timeout:"3000"}))},function(e,t){alertPopUpModal({type:"error",message:"Failed to delete criteria",timeout:"3000"})})};
//# sourceMappingURL=FilterSaver.min.js.map