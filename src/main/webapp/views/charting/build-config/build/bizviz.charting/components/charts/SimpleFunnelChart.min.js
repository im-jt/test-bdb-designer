/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function SimpleFunnelChart(e,t){this.base=Chart,this.base(),this.m_x=20,this.m_y=20,this.m_width=400,this.m_height=300,this.m_isEmptySeries=!0,this.m_showlayervalue=!1,this.m_layerXpositionArray=[],this.m_layerYpositionArray=[],this.m_layerWidthArray=[],this.m_layerHeightArray=[],this.m_layerXLeftpositionArray=[],this.m_layerXRightpositionArray=[],this.m_seriesDataAndLegendName=[],this.m_layer=new Layer,this.m_yAxis=new Yaxis,this.m_layerCalculation=new LayerCalculation,this.m_chartContainer=e,this.m_zIndex=t,this.m_legendShape="invertedtriangle",this.calculatedPercent=[]}SimpleFunnelChart.prototype=new Chart,SimpleFunnelChart.prototype.ParseJsonAttributes=function(e,t){for(var i in this.chartJson=e)if("Funnel"==i)for(var s in e[i])switch(s){case"Title":for(var r in e[i][s]){var a=this.getNodeAttributeName(r);t.m_title[a]=e[i][s][r]}break;case"SubTitle":for(var l in e[i][s]){var a=this.getNodeAttributeName(l);t.m_subTitle[a]=e[i][s][l]}break;case"legends":for(var o in e[i][s])t[a=this.getNodeAttributeName(o)]=e[i][s][o];break;default:t[a=this.getNodeAttributeName(s)]=e[i][s]}else t[a=this.getNodeAttributeName(i)]=e[i]},SimpleFunnelChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},SimpleFunnelChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEvent()},SimpleFunnelChart.prototype.setProperty=function(e){this.ParseJsonAttributes(e.Object,this),this.initCanvas()},SimpleFunnelChart.prototype.setFields=function(e){this.m_fieldsJson=e;for(var t=[],i=[],s=0;s<e.length;s++)switch(this.getProperAttributeNameValue(e[s],"Type")){case"Category":t.push(e[s]);break;case"Series":case"CalculatedField":i.push(e[s])}this.setCategory(t),this.setSeries(i)},SimpleFunnelChart.prototype.setCategory=function(e){this.m_categoryNames=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr={};for(var t=0,i=0;i<e.length;i++){this.m_allCategoryNames[i]=this.getProperAttributeNameValue(e[i],"Name");var s=this.formattedDescription(this,this.getProperAttributeNameValue(e[i],"DisplayName"));this.m_allCategoryDisplayNames[i]=s,this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[i]]=this.getProperAttributeNameValue(e[i],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[i]])&&(this.m_categoryNames[t]=this.getProperAttributeNameValue(e[i],"Name"),this.m_categoryDisplayNames[t]=s,t++)}},SimpleFunnelChart.prototype.setSeries=function(e){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors=[],this.m_legendNames=[],this.m_seriesVisibleArr={},this.m_visibleSeriesNames={},this.m_plotTrasparencyArray=[],this.m_seriesDataLabelProperty=[],this.legendMap={};for(var t=0;t<e.length;t++){this.m_seriesNames[t]=this.getProperAttributeNameValue(e[t],"Name");var i=this.formattedDescription(this,this.getProperAttributeNameValue(e[t],"DisplayName")),i=(this.m_legendNames[t]=i,this.m_seriesDisplayNames[t]=i,this.m_seriesColors[t]=convertColorToHex(this.getProperAttributeNameValue(e[t],"Color")),this.m_seriesVisibleArr[this.m_seriesDisplayNames[t]]=this.getProperAttributeNameValue(e[t],"visible"),this.m_visibleSeriesNames[this.m_seriesNames[t]]=this.getProperAttributeNameValue(e[t],"visible"),this.getProperAttributeNameValue(e[t],"PlotTransparency")),i=(this.m_plotTrasparencyArray[t]=null==i||null===i||""===i||isNaN(i)?1:i,this.m_seriesDataLabelProperty[t]=this.getProperAttributeNameValue(e[t],"DataLabelCustomProperties"),void 0!==this.m_seriesDataLabelProperty[t]?IsBoolean(this.m_seriesDataLabelProperty[t].dataLabelUseComponentFormater)&&(this.m_seriesDataLabelProperty[t].datalabelFormaterCurrency=this.m_unit,this.m_seriesDataLabelProperty[t].datalabelFormaterPrecision=this.m_precision,this.m_seriesDataLabelProperty[t].datalabelFormaterPosition=this.m_signposition,this.m_seriesDataLabelProperty[t].datalabelFormaterUnit=this.m_secondaryunit):(this.m_seriesDataLabelProperty[t]=this.getDataLabelProperties(),this.m_seriesDataLabelProperty[t].showDataLabel=IsBoolean(this.m_showlayervalue)?"true":this.m_seriesDataLabelProperty[t].showDataLabel),{seriesName:this.m_seriesNames[t],displayName:this.m_seriesDisplayNames[t],color:this.m_seriesColors[t],shape:this.m_legendShape,index:t});this.legendMap[this.m_seriesNames[t]]=i}},SimpleFunnelChart.prototype.getLegendInfo=function(){return this.legendMap},SimpleFunnelChart.prototype.setLegendNames=function(e){this.m_legendNames=e},SimpleFunnelChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var e=0;e<this.getCategoryNames().length;e++)this.m_allfieldsName.push(this.getCategoryNames()[e]);for(var t=0;t<this.getSeriesNames().length;t++)this.m_allfieldsName.push(this.getSeriesNames()[t])},SimpleFunnelChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},SimpleFunnelChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var e=0;e<this.getCategoryDisplayNames().length;e++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[e]);for(var t=0;t<this.getSeriesDisplayNames().length;t++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[t])},SimpleFunnelChart.prototype.setCategoryData=function(){if(this.m_categoryData=[],this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var e=0;e<this.getCategoryNames().length;e++)this.m_categoryData[e]=this.getDataFromJSON(this.getCategoryNames()[e])}},SimpleFunnelChart.prototype.setSeriesData=function(){this.m_seriesData=[];var e=[];if(this.multiSeriesData=[],this.m_isEmptySeries=!0,0<this.getSeriesNames().length){this.m_isEmptySeries=!1;for(var t=0,i=0;i<this.getSeriesNames().length;i++)this.m_seriesVisibleArr[this.getSeriesDisplayNames()[i]]&&(e[t]=this.getDataFromJSON(this.getSeriesNames()[i]),t++);for(var t=0,s=e[0].length;t<s;t++){this.multiSeriesData[t]=[];for(var r=0,a=e.length;r<a;r++)this.multiSeriesData[t][r]=e[r][t]}for(var l=0,s=this.multiSeriesData.length;l<s;l++)this.m_seriesData.push(this.getArraySUM(this.multiSeriesData[l]))}},SimpleFunnelChart.prototype.getArraySUM=function(e){for(var t=0,i=0,s=e.length;i<s;i++)e[i]<0&&(e[i]=-1*e[i]),isNaN(e[i])||(t=+t+ +e[i]);return t},SimpleFunnelChart.prototype.setSeriesColor=function(e){for(var t=this.m_seriescolor.split(","),i=(this.seriesColors=[],this.getSeriesData().length-1),s=0,r=0;s<=i;s++){var a=t[s]||this.seriesColors[r++];this.seriesColors[s]=convertColorToHex(a)}},SimpleFunnelChart.prototype.getDataProvider=function(){return this.m_dataProvider},SimpleFunnelChart.prototype.getCategoryNames=function(){return this.m_categoryNames},SimpleFunnelChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},SimpleFunnelChart.prototype.getSeriesNames=function(){return this.m_seriesNames},SimpleFunnelChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},SimpleFunnelChart.prototype.getLegendNames=function(){return this.m_legendNames},SimpleFunnelChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},SimpleFunnelChart.prototype.getCategoryData=function(){return this.m_categoryData},SimpleFunnelChart.prototype.getSeriesData=function(){return this.m_seriesData},SimpleFunnelChart.prototype.getSeriesColor=function(){return this.seriesColors},SimpleFunnelChart.prototype.getSeriesColors=function(){return null==this.visibleSeriesColors?this.m_seriesColors:this.visibleSeriesColors},SimpleFunnelChart.prototype.init=function(){this.setCategoryData(),this.setSeriesData(),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.setSeriesColor(),this.isSeriesDataEmpty(),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),IsBoolean(this.m_isEmptySeries)||IsBoolean(this.isEmptyCategory)||(this.setPercentageForHundred(),this.initializeCalculation(),this.setVisibleData()),this.initializeToolTipProperty(),this.m_tooltip.init(this)},SimpleFunnelChart.prototype.initializeCalculation=function(){if(this.m_categoryData=this.updateCategoryData(this.m_categoryData),this.m_legendNames=this.m_categoryData,this.m_seriesColor=this.getSeriesColor(),this.multiSeriesData=this.updateSeriesData(this.multiSeriesData),!IsBoolean(this.m_isEmptySeries)){this.m_seriesDataAndLegendName=[];for(var e=0;e<this.getSeriesNames().length;e++)if(IsBoolean(this.m_seriesVisibleArr[this.m_seriesDisplayNames[e]])){for(var t=0;t<this.m_seriesData.length;t++)this.m_seriesDataAndLegendName[t]=[],this.m_seriesDataAndLegendName[t][0]=this.m_seriesData[t],this.m_seriesDataAndLegendName[t][1]=this.m_legendNames[t][0],this.m_seriesDataAndLegendName[t][2]=this.m_seriesColor[t],this.m_seriesDataAndLegendName[t][3]=this.m_categoryData[t][0],this.m_seriesDataAndLegendName[t][4]=this.m_displaySeriesDataFlag[t],this.m_seriesDataAndLegendName[t][5]=this.seriesDataPercent[t],this.m_seriesDataAndLegendName[t][6]=this.multiSeriesData[t],this.m_seriesDataAndLegendName[t][7]=this.getDataProvider()[t];break}this.m_seriesDataAndLegendName.sort(function(e,t){return e[0]-t[0]});for(var i=[],s=[],r=[],a=[],l=[],o=[],h={},n=0;n<this.m_seriesDataAndLegendName.length;n++)s.push(this.m_seriesDataAndLegendName[n][1]),i.push(this.m_seriesDataAndLegendName[n][0]),r.push(this.m_seriesDataAndLegendName[n][3]),a.push(this.m_seriesDataAndLegendName[n][4]),l.push(this.m_seriesDataAndLegendName[n][5]),o.push(this.m_seriesDataAndLegendName[n][6]),h[n]=this.m_seriesDataAndLegendName[n][7];this.m_seriesValue=i,this.m_displaySeriesDataInToolTipFlagArray=a,this.visibleLegend=s,this.m_categoryValue=r,this.m_percentSeries=l,this.m_seriesDataArray=o,this.allDataObj=h,this.startX=this.m_width/2*1+ +this.m_x,this.startY=+this.m_height+ +this.m_y-this.m_height/20,this.m_layerCalculation.init(this),this.m_layer.init(this),this.m_yAxis.init(this,this.m_layerCalculation);var m=this.mapSeriesWithCategory(r,i,s,this.m_seriesColor);this.visibleSeriesData=m.ser,this.funnelWidth=3*this.m_width/4,this.funnelHeight=this.m_layerCalculation.getFunnelHeight(),this.sliceGap=this.m_layerCalculation.sliceSpace(m.ser),this.visibleSeries=this.m_layerCalculation.updatedSeriesValue(m.ser),this.calculatedPercent=this.m_layerCalculation.getCalculatePercent(m.ser),this.angle=this.m_layerCalculation.angle(),this.setMapForDrill(m.ser,this.visibleCategories)}},SimpleFunnelChart.prototype.setPercentageForHundred=function(){var e=this.multiSeriesData,t=(this.m_SeriesDataInPerForHundredChart,[]);this.seriesDataPercent=[];for(var i=0,s=e.length;i<s;i++){var r=this.getArraySUM(e[i]);t[i]=[];for(var a=0,l=e[i].length;a<l;a++)""===e[i][a]||isNaN(e[i][a])||0==r?t[i][a]=0:t[i][a]=e[i][a]/r*100}this.seriesDataPercent=t},SimpleFunnelChart.prototype.setVisibleData=function(){this.seriesDisplayName=[],this.visibleCategoryNames=[],this.seriesData=[],this.seriesPercent=[],this.allDataObjects={};var e=[];this.visibleTrasparency=[],this.m_legendNames.length=0,this.m_visibleseriesdatalabel=[];for(var t=0,i=0;i<this.getSeriesNames().length;i++)this.m_seriesVisibleArr[this.getSeriesDisplayNames()[i]]&&(this.seriesDisplayName[t]=this.getSeriesDisplayNames()[i],this.visibleTrasparency[t]=this.m_plotTrasparencyArray[i],this.m_visibleseriesdatalabel[t]=this.m_seriesDataLabelProperty[i],t++);for(var s=0,r=0;r<this.m_categoryValue.length;r++)this.m_seriesVisibleArr[this.m_categoryValue[r]]&&(this.visibleCategoryNames[s]=this.m_categoryValue[r],this.seriesData[s]=this.m_seriesDataArray[r],this.seriesPercent[s]=this.m_percentSeries[r],this.allDataObjects[s]=this.allDataObj[r],e[s]=this.visibleLegend[r],s++);this.m_legendNames=this.reverseSeries(e)},SimpleFunnelChart.prototype.mapSeriesWithCategory=function(e,t,i,s){var r=e,a=t,l=[],o=!0;if(this.m_defaultlegendfields&&!IsBoolean(this.m_designMode))for(var h=0;h<this.m_defaultlegendfields.length&&0!=(o=this.m_defaultlegendfields[h].value);h++);for(var n=0;n<r.length;n++)l.push(s[n]);for(var m=this.reverseSeries(l),n=0;n<r.length;n++)null==this.m_seriesVisibleArr[r[n]]&&(this.m_seriesVisibleArr[r[n]]=o);this.visibleCategories=[],this.visibleSeries=[],this.visibleSeriesNames=[],this.visibleSeriesColors=[],this.legendMap={};for(h=0,n=0;n<r.length;n++)this.m_seriesVisibleArr[r[n]]&&(this.visibleCategories[h]=r[n],this.visibleSeriesColors[h]=m[n],this.visibleSeries[h]=a[n],h++);for(var h=0,p=0;p<this.getSeriesNames().length;p++)this.m_visibleSeriesNames[this.getSeriesNames()[p]]&&(this.visibleSeriesNames[h]=this.getSeriesNames()[p],h++);this.visibleSeriesColors=this.reverseSeries(this.visibleSeriesColors),i=this.reverseSeries(i);for(h=0,n=0;n<i.length;n++){var u={seriesName:i[n],displayName:i[n],color:this.reverseSeries(m)[n],shape:this.m_legendShape};this.legendMap[i[n]]=u,h++}return{cat:this.visibleCategories,ser:this.visibleSeries,color:this.visibleSeriesColors}},SimpleFunnelChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.drawLegends();var e=this.IsDrawingPossible();IsBoolean(e.permission)?(this.drawSimpleFunnel(),this.drawValueOnLayers()):this.drawMessage(e.message)},SimpleFunnelChart.prototype.IsDrawingPossible=function(){return IsBoolean(this.isEmptyCategory)?{permission:"false",message:this.m_status.noCategory}:IsBoolean(this.m_isEmptySeries)?{permission:"false",message:this.m_status.noData}:IsBoolean(this.isVisibleSeriesAvailable())&&0<this.visibleSeries.length?{permission:"true",message:this.m_status.success}:{permission:"false",message:this.m_status.noSeries}},SimpleFunnelChart.prototype.drawTitle=function(){this.m_title.draw()},SimpleFunnelChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},SimpleFunnelChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},SimpleFunnelChart.prototype.isSeriesDataAvailable=function(e){return!!IsBoolean(e.associatedChartObject.m_isrepeater)||0<e.associatedChartObject.m_seriesData.length},SimpleFunnelChart.prototype.drawSimpleFunnel=function(){this.m_layerYpositionArray=[],this.m_layerXpositionArray=[],this.m_layerWidthArray=[],this.m_layerHeightArray=[],this.m_layerXLeftpositionArray=[],this.m_layerXRightpositionArray=[],this.yPos=[],this.m_seriescolorforFunnel=this.updateSeriesColor(this.visibleSeriesColors),this.perviousValue=0;for(var e=this.currentValue=0;e<this.visibleSeries.length;e++)e<1?(this.currentValue=+this.visibleSeries[e],this.m_layer.drawFirstSlice(e,this.currentValue,this.m_seriescolorforFunnel[this.visibleSeries.length-1-e],this.seriesPercent,this.visibleTrasparency)):(this.perviousValue=this.currentValue,this.currentValue=+this.perviousValue+ +this.visibleSeries[e]+ +this.sliceGap,this.m_layer.drawOtherSlices(e,this.perviousValue,this.currentValue,this.m_seriescolorforFunnel[this.visibleSeries.length-1-e],this.seriesPercent,this.visibleTrasparency))},SimpleFunnelChart.prototype.getDataLabel=function(){var e,t=[];for(e in this.allDataObjects)for(var i=this.allDataObjects[e],s=0,r=this.seriesDisplayName.length;s<r;s++){t[s]||(t[s]=[]);var a=this.getValidFieldDataFromRecord(i,this.m_visibleseriesdatalabel[s].datalabelField);t[s][e]=a}return t[0]},SimpleFunnelChart.prototype.drawValueOnLayers=function(){if(IsBoolean(this.m_visibleseriesdatalabel[0].showDataLabel))for(var e=IsBoolean(this.m_showlayervalue)?this.getRoundValue(this.calculatedPercent,100):this.getDataLabel(),t=0;t<this.m_layerXpositionArray.length;t++){this.ctx.beginPath(),this.ctx.fillStyle=this.m_visibleseriesdatalabel[0].dataLabelFontColor,this.ctx.font=this.m_visibleseriesdatalabel[0].datalabelFontStyle+" "+this.m_visibleseriesdatalabel[0].datalabelFontWeight+" "+this.fontScaling(this.m_visibleseriesdatalabel[0].dataLabelFontSize)+"px "+selectGlobalFont(this.m_visibleseriesdatalabel[0].datalabelFontFamily),this.ctx.textAlign="left";var i,s=IsBoolean(this.m_showlayervalue)?e[t]+"%":this.getFormattedText(e[t]),r=this.ctx.measureText(s).width,a="",a=t%2==0||0==t?(i=+this.m_layerXRightpositionArray[t],+this.m_layerXRightpositionArray[t]+10):(i=+this.m_layerXLeftpositionArray[t],+this.m_layerXLeftpositionArray[t]-10),l=0==t?+this.m_layerYpositionArray[t]+(+this.startY-+this.m_layerYpositionArray[t])/2:+this.m_layerYpositionArray[t]+(+this.m_layerYpositionArray[t-1]-+this.m_layerYpositionArray[t])/2,o=l,o=(this.ctx.lineWidth=.5,this.ctx.strokeStyle=this.m_visibleseriesdatalabel[0].dataLabelFontColor,this.ctx.moveTo(i,l),this.ctx.lineTo(a,o),this.ctx.stroke(),t%2==0||0==t?a+3:a-+r-3),a=(t%2==0||0==t?this.getupdatetext(o,r,s,a+3+ +r,"width"):this.getupdatetext(o,r,s,i-3)).text,o=t%2==0||0==t?o:this.getupdatetext(o,r,s,i-3).textPosition;this.ctx.fillText(a,o,l),this.ctx.fill(),this.ctx.closePath()}},SimpleFunnelChart.prototype.getFormattedText=function(e){var t,i,s,r,a,l,o;return isNaN(getNumericComparableValue(e))?e:((""+e).indexOf(","),t=""!=this.m_visibleseriesdatalabel[0].datalabelFormaterPosition?this.m_visibleseriesdatalabel[0].datalabelFormaterPosition:"suffix",i=this.m_visibleseriesdatalabel[0].datalabelFormaterPrecision,a=this.m_visibleseriesdatalabel[0].datalabelFormaterCurrency,r=this.m_visibleseriesdatalabel[0].datalabelFormaterUnit,o="default"===i?+getNumericComparableValue(e):(+getNumericComparableValue(e)).toFixed(i),""!=a?(s=this.m_util.getFormatterSymbol("Currency",a),"auto"==(r=this.m_util.getFormatterSymbol("Number",r))?(e=getNumericComparableValue(e,a),a=getNumberFormattedSymbol(+e,a),l=getNumberFormattedNumericValue(+e,i),l=this.m_util.updateTextWithFormatter(l,"",i),o=this.m_util.addFormatter(l,a,"suffix")):(o=this.m_util.updateTextWithFormatter(o,r,i),"none"!=r&&""!=r&&(o=this.m_util.addFormatter(o,r,"suffix"))),"NaN"==o||""===o?"":this.m_util.addFormatter(getFormattedNumberWithCommas(o,this.m_numberformatter),s,t)):"NaN"==o?e:o)},SimpleFunnelChart.prototype.getupdatetext=function(e,t,i,s,r){var a,l=e,o=i;return e<1&&(a=s-(l=2),o=this.calculateTitleWidth(i,a)),"width"===r&&s>=this.m_width&&(a=this.m_width-l-2,o=this.calculateTitleWidth(i,a)),{text:o,textPosition:l}},SimpleFunnelChart.prototype.calculateTitleWidth=function(e,t){for(var i,s=e.split(""),r=t-30,a=0,l="",o=0,h="12px "+this.m_defaultfontfamily,n=0;n<s.length;n++)a<r?(l+=s[n],a=(i=$("<div>"+l+"</div>").css({position:"absolute",float:"left","white-space":"nowrap",visibility:"hidden",font:h}).appendTo($("body"))).width(),i.remove()):o++;return 0!=o&&(l+=".."),l},SimpleFunnelChart.prototype.updateSeriesData=function(e){var t=[];if(this.m_displaySeriesDataFlag=[],null!=e&&null!==e&&""!==e&&0!=e.length)for(var i=0;i<e.length;i++){t[i]=[],this.m_displaySeriesDataFlag[i]=[];for(var s=0;s<e[0].length;s++)this.m_displaySeriesDataFlag[i][s]=!0,isNaN(e[i][s])?(this.m_displaySeriesDataFlag[i][s]=!1,t[i][s]=getNumericComparableValue(e[i][s]),isNaN(t[i][s])&&(t[i][s]=0)):t[i][s]=e[i][s]}return t},SimpleFunnelChart.prototype.setMapForDrill=function(e,t){for(var i=this.getDataProvider(),s=(this.m_updateDataForDrill=[],"false"),r=0;r<t.length;r++)for(var a=0;a<i.length;a++){for(var l in i[a])if(t[r]==i[a][l]){this.m_updateDataForDrill.push(i[a]),s="true";break}if("true"==s){s="false";break}}},SimpleFunnelChart.prototype.getMapForDrill=function(){return this.m_updateDataForDrill},SimpleFunnelChart.prototype.isVisibleSeriesAvailable=function(){for(var e=0;e<this.getSeriesNames().length;e++)if(IsBoolean(this.m_seriesVisibleArr[this.m_seriesDisplayNames[e]]))return!0;return!1},SimpleFunnelChart.prototype.getColorAccordingData=function(e){var t=[];if(e.length<this.m_seriesData.length){for(var i=0;i<this.m_seriesData.length;i++){var s=i%e.length;t.push(e[s])}return t}return e},SimpleFunnelChart.prototype.reverseSeries=function(e){for(var t=[],i=e.length-1;0<=i;i--)t.push(e[i]);return t},SimpleFunnelChart.prototype.initializeSeriesValues=function(){for(var e=[],t=0;t<this.m_seriesData[0].length;t++){e[t]=[];for(var i=0;i<this.m_seriesData.length;i++)e[t][i]=this.m_seriesData[i][t]}this.m_seriesData=e},SimpleFunnelChart.prototype.updateCategoryData=function(e){var t=[];if(null!=e&&null!==e&&""!==e&&0!=e.length)for(var i=0;i<e[0].length;i++){t[i]=[];for(var s=0;s<e.length;s++)t[i][s]=e[s][i]}return t},SimpleFunnelChart.prototype.updateSeriesColor=function(e){var t=[];if(null!=e&&null!==e&&""!==e&&0!=e.length)for(var i=0;i<e.length;i++){t[i]=[];for(var s=0;s<e.length;s++)t[i][s]=convertColorToHex(e[i])}return t},SimpleFunnelChart.prototype.getDrillDataPoints=function(e,t){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeriesAvailable()))for(var i=0;i<this.visibleSeries.length;i++)if(e>=+this.startX-this.funnelWidth/2&&e<=+this.startX+ +this.funnelWidth/2&&t<=+this.m_layerYpositionArray[i]+ +this.visibleSeries[i]+7)if(i==this.visibleSeries.length-1){if(t>=+this.m_layerYpositionArray[i]-7)for(var s=0;s<this.m_layerYpositionArray.length;s++)if(t>=this.m_layerYpositionArray[s])for(var r=0;r<this.yPos[s].length;r++)if(t>=this.m_layerYpositionArray[s]&&t>=+this.yPos[s][r])return a=this.getFieldNameValueMap(i),l=this.reverseSeries(this.visibleSeriesColors)[i],o=this.visibleSeriesNames[r],h=this.seriesDisplayName[r],n=a[o],a.drillField=o,a.drillDisplayField=h,a.drillValue=n,{drillRecord:a,drillColor:l}}else if("0"==i){if(t<=+this.m_layerYpositionArray[i]+ +this.visibleSeries[i]+1&&t>=+this.m_layerYpositionArray[i])for(s=0;s<this.m_layerYpositionArray.length;s++)if(t>=this.m_layerYpositionArray[s])for(r=0;r<this.yPos[s].length;r++)if(t>=this.m_layerYpositionArray[s]&&t>=+this.yPos[s][r])return a=this.getFieldNameValueMap(i),l=this.reverseSeries(this.visibleSeriesColors)[i],o=this.visibleSeriesNames[r],h=this.seriesDisplayName[r],n=a[o],a.drillField=o,a.drillDisplayField=h,a.drillValue=n,{drillRecord:a,drillColor:l}}else if(t>=+this.m_layerYpositionArray[i]+ +this.sliceGap)for(s=0;s<this.m_layerYpositionArray.length;s++)if(t>=this.m_layerYpositionArray[s])for(var a,l,o,h,n,r=0;r<this.yPos[s].length;r++)if(t>=this.m_layerYpositionArray[s]&&t>=+this.yPos[s][r])return a=this.getFieldNameValueMap(i),l=this.reverseSeries(this.visibleSeriesColors)[i],o=this.visibleSeriesNames[r],h=this.seriesDisplayName[r],n=a[o],a.drillField=o,a.drillDisplayField=h,a.drillValue=n,{drillRecord:a,drillColor:l}},SimpleFunnelChart.prototype.getFieldNameValueMap=function(e){for(var t=new Object,i=this.getAllFieldsName(),s=0;s<i.length;s++)t[i[s]]=this.allDataObjects[e][i[s]];return t},SimpleFunnelChart.prototype.getLegendTableContent=function(){for(var e="",t=0;t<this.getLegendNames().length;t++){var i=this.m_legendShape,i=this.getHTMLShape(i);e+='<tr style="font-style:'+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'"><td>'+this.drawLegendShape(i,this.getSeriesColors()[t])+'<span style="display:inline;">'+this.getLegendNames()[t]+"</span></td></tr>"}return e},SimpleFunnelChart.prototype.getToolTipData=function(e,t){var i;if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeriesAvailable())&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType))for(var s=this.reverseSeries(this.visibleSeriesColors),r=this.seriesDisplayName,a=this.visibleCategoryNames,l=(this.calculatedPercent,this.seriesData),o=this.seriesPercent,h=0;h<this.m_layerYpositionArray.length;h++)if(e>=+this.startX-this.funnelWidth/2&&e<=+this.startX+ +this.funnelWidth/2&&t<=+this.m_layerYpositionArray[h]+ +this.visibleSeries[h]+7)if(i={},IsBoolean("Default"==this.m_customtextboxfortooltip.dataTipType)){if(i.cat="",i.data=new Array,h==this.visibleSeries.length-1){if(t>=+this.m_layerYpositionArray[h]-7){for(var n,m=0;m<l[h].length;m++)1==r.length?(i.cat=a[h],(p=[])[0]={color:s[h],shape:this.m_legendShape},p[1]=r[m],n=(u=+l[h][m])%1!=0&&"default"!==this.m_precision?u.toFixed(0==this.m_precision?2:this.m_precision):+l[h][m],g=this.getFormatterForToolTip(n),p[2]=g):(i.cat=a[h],(p=[])[0]={color:s[h],shape:this.m_legendShape},p[1]=r[m],n=(u=+l[h][m])%1!=0&&"default"!==this.m_precision?u.toFixed(0==this.m_precision?2:this.m_precision):+l[h][m],g=this.getFormatterForToolTip(n),p[2]=g,p[3]=o[h][m].toFixed(2)+"%"),i.data.push(p);i.highlightIndex=this.getDrillColor(e,t)}}else if("0"==h){if(t<=+this.m_layerYpositionArray[h]+ +this.visibleSeries[h]+1&&t>=+this.m_layerYpositionArray[h]){for(m=0;m<l[h].length;m++)1==r.length?(i.cat=a[h],(p=[])[0]={color:s[h],shape:this.m_legendShape},p[1]=r[m],n=(u=+l[h][m])%1!=0&&"default"!==this.m_precision?u.toFixed(0==this.m_precision?2:this.m_precision):+l[h][m],g=this.getFormatterForToolTip(n),p[2]=g):(i.cat=a[h],(p=[])[0]={color:s[h],shape:this.m_legendShape},p[1]=r[m],n=(u=+l[h][m])%1!=0&&"default"!==this.m_precision?u.toFixed(0==this.m_precision?2:this.m_precision):+l[h][m],g=this.getFormatterForToolTip(n),p[2]=g,p[3]=o[h][m].toFixed(2)+"%"),i.data.push(p);i.highlightIndex=this.getDrillColor(e,t)}}else if(t>=+this.m_layerYpositionArray[h]+ +this.sliceGap){for(var p,u,g,m=0;m<l[h].length;m++)1==r.length?(i.cat=a[h],(p=[])[0]={color:s[h],shape:this.m_legendShape},p[1]=r[m],n=(u=+l[h][m])%1!=0&&"default"!==this.m_precision?u.toFixed(0==this.m_precision?2:this.m_precision):+l[h][m],g=this.getFormatterForToolTip(n),p[2]=g):(i.cat=a[h],(p=[])[0]={color:s[h],shape:this.m_legendShape},p[1]=r[m],n=(u=+l[h][m])%1!=0&&"default"!==this.m_precision?u.toFixed(0==this.m_precision?2:this.m_precision):+l[h][m],g=this.getFormatterForToolTip(n),p[2]=g,p[3]=o[h][m].toFixed(2)+"%"),i.data.push(p);i.highlightIndex=this.getDrillColor(e,t)}}else i=this.getDataProvider()[h];else this.hideToolTip();return i},SimpleFunnelChart.prototype.getDrillColor=function(e,t){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory))for(var i=0;i<this.m_layerYpositionArray.length;i++)if(t>=this.m_layerYpositionArray[i])for(var s=0;s<this.yPos[i].length;s++)if(t>=this.m_layerYpositionArray[i]&&t>=+this.yPos[i][s])return s},SimpleFunnelChart.prototype.getFormatterText=function(e){var t=e;return t=IsBoolean(this.getFixedLabel())?t:this.m_yAxis.getFormattedText(e)},SimpleFunnelChart.prototype.getStartX=function(){return this.m_x+50},SimpleFunnelChart.prototype.getStartY=function(){return this.m_y+this.m_height-50},SimpleFunnelChart.prototype.getEndX=function(){return this.m_x+this.m_width-50},SimpleFunnelChart.prototype.getEndY=function(){return this.m_y+50},SimpleFunnelChart.prototype.getMarginForSubTitle=function(){var e=IsBoolean(this.m_subTitle.m_showsubtitle)&&3==this.m_subTitle.m_formattedDescription.length?""!=this.m_subTitle.getDescription()?1.5*this.m_subTitle.getFontSize()+ +this.m_chartpaddings.topTitleToSubtitle:10:IsBoolean(this.m_subTitle.m_showsubtitle)?""!=this.m_subTitle.getDescription()?1.5*this.m_subTitle.getFontSize():10:0;return e};
//# sourceMappingURL=SimpleFunnelChart.min.js.map