/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function NewWordCloudChart(t,e){this.base=Chart,this.base(),this.m_x=400,this.m_y=240,this.m_width=300,this.m_height=240,this.m_categoryNames=[],this.m_seriesNames=[],this.m_confidenceNames=[],this.m_categoryData=[],this.m_seriesData=[],this.m_confidenceData=[],this.m_chartData=[],this.m_chartContainer=t,this.m_zIndex=e,this.m_isCategoryAvailable=!0,this.m_shuffledtext=!1,this.m_nthtextvalue=10,this.m_maxtextvalue=2e3,this.m_showntext=!1,this.m_maxvalue=0,this.m_minvalue=0,this.m_cmaxvalue=0,this.m_cminvalue=0,this.m_maxvaluefontsize=60,this.m_minvaluefontsize=20,this.m_rotatetext=!0,this.m_excludepronouns=!0,this.m_excludedwords="all,another,any,anybody,anyone,anything,both,each,each other,either,everybody,everyone,everything,few,he,her,hers,herself,him,himself,his,I,it,its,itself,little,many,me,mine,more,most,much,my,myself,neither,no one,nobody,none,nothing,one,one another,other,others,our,ours,ourselves,several,she,some,somebody,someone,something,that,their,theirs,them,themselves,these,they,this,those,us,we,what,whatever,which,whichever,who,whoever,whom,whomever,whose,you,your,yours,yourself,yourselves",this.m_range1=[],this.m_range2=[],this.m_color=[],this.m_ranges="0-20,20-100",this.m_colors="#cccccc,26265",this.m_defaultcolor="#808080",this.m_cloudgradients="#216cdf, #285bbb, #284b99, #253b77, #202c58",this.m_rangecolorbarwidth=15,this.m_rangecolorbartextwidth=20,this.m_highlightcolor="#fff2a8",this.m_highlightfontsize="12",this.m_userandomcolor=!0,this.m_showrangebar=!1,this.m_wordfontfamily="BizvizFont",this.m_layoutanimation=!1,this.m_wordcloudshape="square",this.m_rotationrangemin="0",this.m_rotationrangemax="90",this.m_rotationrangestep="90",this.m_shadowdepth="0",this.m_shadowoffestx="0",this.m_shadowoffesty="0",this.m_shadowcolor="#fff",this.m_converttolowercase=!1,this.m_shrinktofit=!0,this.m_cloudgridsize="5",this.m_wordpadding="0",this.m_tooltipbackgroundtransparency="1",this.m_wordlayoutshape="none",this.m_wordinputformat="word"}NewWordCloudChart.prototype=new Chart,NewWordCloudChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},NewWordCloudChart.prototype.ParseJsonAttributes=function(t,e){for(var o in this.chartJson=t)if("Chart"==o)for(var i in t[o])switch(i){case"xAxis":case"yAxis":break;case"Title":for(var a in t[o][i]){var r=this.getNodeAttributeName(a);e.m_title[r]=t[o][i][a]}break;case"SubTitle":for(var s in t[o][i]){var r=this.getNodeAttributeName(s);e.m_subTitle[r]=t[o][i][s]}break;case"Legend":for(var n in t[o][i])e[r=this.getNodeAttributeName(n)]=t[o][i][n];break;default:e[r=this.getNodeAttributeName(i)]=t[o][i]}else e[r=this.getNodeAttributeName(o)]=t[o]},NewWordCloudChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},NewWordCloudChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.m_draggableDiv.style.overflow="hidden",this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEvent()},NewWordCloudChart.prototype.setDraggableCanvasSize=function(){var t=document.getElementById("draggableCanvas"+this.m_objectid);""!=t&&null!=t&&(this.getMarginForTitle(),this.getMarginForSubTitle(),t.height=this.m_height,t.width=this.m_width)},NewWordCloudChart.prototype.getDataProvider=function(){return this.m_dataProvider},NewWordCloudChart.prototype.setFields=function(t){this.m_fieldsJson=t;var e=[],o=[],i=[];this.m_fieldsJson=t;for(var a=0;a<t.length;a++)switch(this.getProperAttributeNameValue(t[a],"Type")){case"Category":e.push(t[a]);break;case"Series":case"CalculatedField":case"Lift":o.push(t[a]);break;case"Confidence":i.push(t[a])}0<e.length?(this.m_isCategoryAvailable=!0,this.setCategory(e),this.setSeries(o),this.setConfidence(i)):this.m_isCategoryAvailable=!1},NewWordCloudChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryDisplayNames=[],this.m_categoryVisibleArr={};for(var e=0,o=0;o<t.length;o++){this.m_allCategoryNames[o]=this.getProperAttributeNameValue(t[o],"Name");var i=this.formattedDescription(this,this.getProperAttributeNameValue(t[o],"DisplayName")),a=(this.m_allCategoryDisplayNames[o]=i,this.getProperAttributeNameValue(t[o],"visible"));this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[o]]=a,IsBoolean(a)&&(this.m_categoryDisplayNames[e]=i,this.m_categoryNames[e]=this.getProperAttributeNameValue(t[o],"Name"),e++)}},NewWordCloudChart.prototype.setSeries=function(t){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesVisibleArr={},this.m_allSeriesDisplayNames=[],this.m_allSeriesNames=[],this.m_precisionArr=[],this.m_isfixedlabelArr=[],this.m_formatterArr=[],this.m_unitnameArr=[],this.m_signpositionArr=[],this.m_secondformatterArr=[],this.m_secondunitnameArr=[],this.m_columnTypeArr=[],this.formatterMap={},this.legendMap={};for(var e=0,o=0;o<t.length;o++){var i=this.formattedDescription(this,this.getProperAttributeNameValue(t[o],"DisplayName")),a=(this.m_allSeriesDisplayNames[o]=i,this.m_allSeriesNames[o]=this.getProperAttributeNameValue(t[o],"Name"),this.getProperAttributeNameValue(t[o],"visible"));this.m_seriesVisibleArr[this.m_allSeriesDisplayNames[o]]=a,IsBoolean(a)&&(this.m_seriesDisplayNames[e]=i,this.m_seriesNames[e]=this.getProperAttributeNameValue(t[o],"Name"),this.m_precisionArr[e]=this.getProperAttributeNameValue(t[o],"Precision"),this.m_isfixedlabelArr[e]=this.getProperAttributeNameValue(t[o],"isfixedlabel"),this.m_formatterArr[e]=this.getProperAttributeNameValue(t[o],"formatter"),this.m_unitnameArr[e]=this.getProperAttributeNameValue(t[o],"unitname"),this.m_signpositionArr[e]=this.getProperAttributeNameValue(t[o],"signposition"),this.m_secondformatterArr[e]=this.getProperAttributeNameValue(t[o],"secondformatter"),this.m_secondunitnameArr[e]=this.getProperAttributeNameValue(t[o],"secondunitname"),this.m_columnTypeArr[e]=this.getProperAttributeNameValue(t[o],"cellType"),a={precision:this.m_precisionArr[e],isfixedlabel:this.m_isfixedlabelArr[e],formatter:this.m_formatterArr[e],unitname:this.m_unitnameArr[e],signposition:this.m_signpositionArr[e],secondformatter:this.m_secondformatterArr[e],secondunitname:this.m_secondunitnameArr[e]},this.formatterMap[this.m_seriesNames[e]]=a,e++)}},NewWordCloudChart.prototype.setConfidence=function(t){this.m_confidenceNames=[],this.m_allConfidenceNames=[],this.m_confidenceDisplayNames=[];for(var e=0,o=0;o<t.length;o++){this.m_allConfidenceNames[o]=this.getProperAttributeNameValue(t[o],"Name");var i=this.getProperAttributeNameValue(t[o],"visible");this.m_confidenceNames[o]=this.getProperAttributeNameValue(t[o],"Name"),IsBoolean(i)&&(this.m_confidenceNames[e]=this.getProperAttributeNameValue(t[o],"Name"),i=this.formattedDescription(this,this.getProperAttributeNameValue(t[o],"DisplayName")),this.m_confidenceDisplayNames[e]=i,e++)}},NewWordCloudChart.prototype.getAllCategoryNames=function(){return this.m_allCategoryNames},NewWordCloudChart.prototype.getAllSeriesNames=function(){return this.m_allSeriesNames},NewWordCloudChart.prototype.getAllConfidenceNames=function(){return this.m_allConfidenceNames},NewWordCloudChart.prototype.getCategoryNames=function(){return this.m_categoryNames},NewWordCloudChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},NewWordCloudChart.prototype.getSeriesNames=function(){return this.m_seriesNames},NewWordCloudChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},NewWordCloudChart.prototype.getConfidenceNames=function(){return this.m_confidenceNames},NewWordCloudChart.prototype.getConfidenceDisplayNames=function(){return this.m_confidenceDisplayNames},NewWordCloudChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0;t<this.getAllCategoryNames().length;t++)this.m_allfieldsName.push(this.getAllCategoryNames()[t]);for(var e=0;e<this.getAllSeriesNames().length;e++)this.m_allfieldsName.push(this.getAllSeriesNames()[e]);for(var o=0;o<this.getAllConfidenceNames().length;o++)this.m_allfieldsName.push(this.getAllConfidenceNames()[o])},NewWordCloudChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},NewWordCloudChart.prototype.setCategoryData=function(){this.m_categoryData=[];for(var t=0;t<this.getCategoryNames().length;t++)this.m_categoryData[t]=this.getDataFromJSON(this.getCategoryNames()[t])},NewWordCloudChart.prototype.setSeriesData=function(){this.m_seriesData=[];for(var t=0;t<this.getSeriesNames().length;t++)this.m_seriesData[t]=this.getDataFromJSON(this.getSeriesNames()[t])},NewWordCloudChart.prototype.setConfidenceData=function(){if(this.m_confidenceData=[],null!=this.getConfidenceNames()[0])for(var t=0;t<this.getConfidenceNames().length;t++)this.m_confidenceData[t]=this.getDataFromJSON(this.getConfidenceNames()[t]);else this.m_confidenceData=this.m_seriesData},NewWordCloudChart.prototype.getSeriesData=function(){return this.m_seriesData},NewWordCloudChart.prototype.getCategoryData=function(){return this.m_categoryData},NewWordCloudChart.prototype.getConfidenceData=function(){return this.m_confidenceData},NewWordCloudChart.prototype.init=function(){this.setPronounsMap(),this.initializeColor(),this.getRanges(),this.excludePronounsFromDataProvider(),this.showLimitedWords(),this.shuffleDataProvider(),this.setCategoryData(),this.setSeriesData(),this.setConfidenceData(),this.setAllFieldsName(),this.isSeriesDataEmpty(),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),this.setFormatter(),this.setSecondaryFormatter(),IsBoolean(this.m_isEmptySeries)||"word"==this.m_wordinputformat&&(this.setMaxMinFrequencyOfWords(),this.setMaxMinConfidenceOfWords()),this.setRangeColorBarTextWidth(),this.initializeToolTipProperty(),this.m_tooltip.init(this)},NewWordCloudChart.prototype.setRangeColorBarTextWidth=function(){var e,t;this.ctx.font="12px "+selectGlobalFont(this.m_wordfontfamily),IsBoolean(this.m_showdynamicrange)?this.m_rangecolorbartextwidth=Math.max(this.ctx.measureText(this.m_cminvalue).width,this.ctx.measureText(this.m_cmaxvalue).width):(t=(e=this).m_range1.concat(this.m_range2).map(function(t){return e.ctx.measureText(t).width}),this.m_rangecolorbartextwidth=Math.max.apply(Math,t))},NewWordCloudChart.prototype.setPronounsMap=function(){if(IsBoolean(this.m_excludepronouns)){var t=this.m_excludedwords?this.m_excludedwords.split(","):[];this.m_pronounsmap=new Object;for(var e=0;e<t.length;e++)this.m_pronounsmap[(""+t[e]).toLowerCase()]=(""+t[e]).toLowerCase()}},NewWordCloudChart.prototype.getPronounsMap=function(){return this.m_pronounsmap},NewWordCloudChart.prototype.initializeColor=function(){if(this.m_color=[],IsBoolean(this.m_userandomcolor))for(t=this.m_cloudgradients.split(","),e=0;e<t.length;e++)null!=t[e]?this.m_color[e]=convertColorToHex(t[e]):this.m_color[e]=this.m_color[e-1];else for(var t=this.m_colors.split(","),e=0;e<t.length;e++)null!=t[e]?this.m_color[e]=convertColorToHex(t[e]):this.m_color[e]=this.m_color[e-1]},NewWordCloudChart.prototype.getRanges=function(){if(!IsBoolean(this.m_userandomcolor)){this.m_range=this.m_ranges.split(","),this.m_range1=[],this.m_range2=[];for(var t=0;t<this.m_range.length;t++){var e=-1<this.m_range[t].indexOf("~")?"~":"-",e=this.m_range[t].split(e);this.m_range1[t]=e[0],this.m_range2[t]=e[1]}Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)},this.m_minRangeValue=[this.m_range1.min(),this.m_range2.min()].min(),this.m_maxRangeValue=[this.m_range1.max(),this.m_range2.max()].max()}},NewWordCloudChart.prototype.showLimitedWords=function(){var t=this.getDataProvider();if(IsBoolean(this.m_showntext)){var o=this.m_seriesNames[0],e=t.sort(function(t,e){return e[o]-t[o]});this.m_dataProvider=[];for(var i=0;i<this.m_nthtextvalue;i++)i<t.length&&(this.m_dataProvider[i]=e[i])}},NewWordCloudChart.prototype.shuffleDataProvider=function(){var t=this.getDataProvider();if(IsBoolean(this.m_shuffledtext)){for(var e=0;e<t.length-1;e++){var o=e+Math.floor(Math.random()*(t.length-e)),i=t[o];t[o]=t[e],t[e]=i}this.m_dataProvider=t}},NewWordCloudChart.prototype.excludePronounsFromDataProvider=function(){if(IsBoolean(this.m_excludepronouns))for(var t=0;t<this.getCategoryNames().length;t++){var e=this.getCategoryNames()[t];if(0==t){for(var o,i=[],a=0;a<this.getDataProvider().length;a++)null!==this.getDataProvider()[a]&&(!IsBoolean(this.m_excludepronouns)||(o=this.getDataProvider()[a][e])&&this.getPronounsMap()[o.toString().toLowerCase()]!=o.toString().toLowerCase())&&i.push(this.getDataProvider()[a]);this.m_dataProvider=i}}},NewWordCloudChart.prototype.setMaxMinFrequencyOfWords=function(){for(var t=this.getSeriesData()[0].filter(function(t){return null!=t&&""!=t&&!isNaN(+t)}),e=0;e<t.length;e++)0==e&&(this.m_maxvalue=+t[e],this.m_minvalue=+t[e]),+t[e]>=+this.m_maxvalue&&(this.m_maxvalue=+t[e]),+t[e]<=+this.m_minvalue&&(this.m_minvalue=+t[e])},NewWordCloudChart.prototype.setMaxMinConfidenceOfWords=function(){for(var t=this.getConfidenceData()[0],e=(this.m_cmaxvalue=0,this.m_cminvalue=0,t.filter(function(t){return null!=t&&""!=t&&!isNaN(+t)})),o=0;o<e.length;o++)0==o&&(this.m_cmaxvalue=+e[o],this.m_cminvalue=+e[o]),+e[o]>=+this.m_cmaxvalue&&(this.m_cmaxvalue=+e[o]),+e[o]<=+this.m_cminvalue&&(this.m_cminvalue=+e[o])},NewWordCloudChart.prototype.drawChart=function(){var t;IsBoolean(this.m_isEmptySeries)&&(document.getElementById("draggableCanvas"+this.m_objectid).height=this.m_height),this.ctx.clearRect(this.m_x,this.m_y,this.m_width,this.m_height),this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),IsBoolean(this.m_isEmptySeries)||"word"!=this.m_wordinputformat?this.getCategoryData()&&0<this.getCategoryData()[0].length&&"word"!=this.m_wordinputformat?(t=this.drawWordCloudChart(),this.drawRangeColorBar(),this.createParaWordData(),this.drawCloud(t)):($("#tagCloudDiv"+this.m_objectid).remove(),$("#draggableCanvas"+this.m_objectid).css("display","block"),this.drawMessage(this.m_status.noData)):(t=this.drawWordCloudChart(),this.drawRangeColorBar(),this.createWordData(),this.drawCloud(t))},NewWordCloudChart.prototype.removeCanvasFromDiv=function(){IsBoolean(this.getShowGradient())||IsBoolean(this.m_showmaximizebutton)||IsBoolean(this.getTitle().m_showtitle)||IsBoolean(this.m_subTitle.m_showsubtitle)?$("#draggableCanvas"+this.m_objectid).css("display","block"):$("#draggableCanvas"+this.m_objectid).css("display","none")},NewWordCloudChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},NewWordCloudChart.prototype.drawTitle=function(){this.m_title.draw()},NewWordCloudChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},NewWordCloudChart.prototype.drawRangeColorBarRanges=function(t){$("#colorRangeBarRangesDiv"+this.m_objectid).remove();var e=document.createElement("div"),o=0==(o=+this.getMarginForTitle()+ +this.getMarginForSubTitle())?10:o;e.id="colorRangeBarRangesDiv"+this.m_objectid,e.style.width=this.m_rangecolorbartextwidth+"px",e.style.height=t+"px",e.style.display="inline-block",e.style.top=o+"px",e.style.position="absolute",e.style.left="4px",this.m_title.m_titleBarHeight;for(var i=IsBoolean(this.m_showdynamicrange)?[parseInt(this.m_cminvalue)]:this.m_range1,a=IsBoolean(this.m_showdynamicrange)?[parseInt((+this.m_cmaxvalue+ +this.m_cminvalue)/2),parseInt(this.m_cmaxvalue)]:this.m_range2,r=a.length-1;-1<=r;r--){var s=document.createElement("div"),n=(s.id="colorRangeBarRangesTextDiv"+this.m_objectid,s.style.verticalAlign="bottom",s.style.textAlign="center",document.createElement("span"));n.style.height="inherit",n.style.fontSize=this.fontScaling(12)+"px",n.style.fontFamily=selectGlobalFont(this.m_wordfontfamily),-1==r?(n.innerHTML=i[0],n.style.verticalAlign="bottom",s.style.marginTop="-5px"):(s.style.height=t/a.length+"px",n.innerHTML=a[r],n.style.verticalAlign="top"),s.appendChild(n),e.appendChild(s)}$("#draggableDiv"+this.m_objectid).append(e)},NewWordCloudChart.prototype.drawRangeColorBar=function(){var t=this;if(IsBoolean(this.m_userandomcolor))$("#colorRangeBarRangesDiv"+t.m_objectid).remove(),$("#colorRangeBarDiv"+t.m_objectid).remove();else if(IsBoolean(this.m_showrangebar)){var e=+this.getMarginForTitle()+ +this.getMarginForSubTitle(),o=this.m_height-(e=0==e?10:e)-20,i=(this.drawRangeColorBarRanges(o),IsBoolean(this.m_showdynamicrange)?[this.m_minrangecolor,this.m_maxrangecolor]:this.m_color),a=IsBoolean(this.m_showdynamicrange)?[parseInt(this.m_minvalue),parseInt(this.m_maxvalue/2)]:this.m_range1,r=IsBoolean(this.m_showdynamicrange)?[parseInt(this.m_maxvalue/2),parseInt(this.m_maxvalue)]:this.m_range2,s=+this.m_rangecolorbartextwidth+8,n=($("#colorRangeBarDiv"+t.m_objectid).remove(),document.createElement("div"));n.id="colorRangeBarDiv"+t.m_objectid,n.style.height=o+"px",n.style.cursor="pointer",n.style.width=this.m_rangecolorbarwidth+"px",n.style.display="inline-block",n.style.top=e+"px",n.style.position="absolute",n.style.left=s+"px";for(var l=i.length-1;0<=l;l--){var h=document.createElement("div");h.style.height=o/i.length+"px",h.id=t.m_objectid+"colorRangeBar"+l,h.setAttribute("class","colorRangeBarSection"+this.m_objectid),h.style.backgroundColor=i[l],h.title=a[l]+" to "+r[l],h.onclick=function(){$(".colorRangeBarSection"+t.m_objectid).css("border","0px solid #cccccc"),$(".wordCloudText"+t.m_objectid).css("background","transparent"),$("#"+this.id).hasClass("selectedRangeBar")?$(this).removeClass("selectedRangeBar"):($(".colorRangeBarSection"+t.m_objectid).removeClass("selectedRangeBar"),$(this).addClass("selectedRangeBar"),$(this).css("border","1px solid #000000"),$("."+this.id).css("background",convertColorToHex(t.m_highlightcolor)))},n.appendChild(h)}$("#draggableDiv"+t.m_objectid).append(n)}else $("#colorRangeBarRangesDiv"+t.m_objectid).remove(),$("#colorRangeBarDiv"+t.m_objectid).remove()},NewWordCloudChart.prototype.drawWordCloudChart=function(){var t=this,e=(this.m_width,+this.getMarginForTitle()+ +this.getMarginForSubTitle()),o=this.m_height-e-1,i=0,a=(!IsBoolean(this.m_userandomcolor)&&IsBoolean(this.m_showrangebar)&&(i=+this.m_rangecolorbarwidth+ +this.m_rangecolorbartextwidth+5),$("#tagCloudDiv"+t.m_objectid).remove(),document.createElement("div"));return a.id="tagCloudDiv"+t.m_objectid,IsBoolean(this.m_showborder)?(a.style.width=+this.m_width-+i-4+"px",a.style.left=+i+2+"px"):(a.style.width=this.m_width-i+"px",a.style.left=i+"px"),a.style.height=o+"px",a.style.verticalAlign="middle",a.style.display="table-cell",a.style.textAlign="center",a.style.top=e+"px",a.style.position="absolute",a.style.overflow="hidden",$("#draggableDiv"+t.m_objectid).css("overflow-x","hidden"),$("#draggableDiv"+t.m_objectid).css("overflow-y","hidden"),$("#draggableDiv"+t.m_objectid).css("background",hex2rgb("#ffffff",this.m_bgalpha)),$("#draggableDiv"+t.m_objectid).append(a),a},NewWordCloudChart.prototype.drawCloud=function(){var t=this,e=echarts.init(document.getElementById("tagCloudDiv"+t.m_objectid),null,{renderer:"svg"}),o=document.getElementById("tagCloudDiv"+t.m_objectid),i=o.offsetWidth,o=o.offsetHeight;t.drawLoaderIcon(i/2,o/2);try{var a=null===(a=null)?setTimeout(function(){a=null,t.drawWordCloudText(e)},500):(clearTimeout(a),null)}catch(t){}},NewWordCloudChart.prototype.drawLoaderIcon=function(t,e){var o=this,i=document.createElement("div");i.setAttribute("id","dcloaderImage"+o.m_objectid),i.setAttribute("class","loaderImage"),$("#tagCloudDiv"+o.m_objectid).append(i),$("#dcloaderImage"+o.m_objectid).css({"z-index":o.m_zIndex+2,left:t+"px",top:e+"px"}).on("click",function(){$("#loaderImageContent"+o.m_objectid).toggle("slide",{direction:"up"},200),$("#loaderImageContentArrow"+o.m_objectid).toggle()}).append('<div style="position:absolute;height:100%;width:100%;left:0px;top:0px;" class="la-ball-clip-rotate la-dark la-lg loaderImageRotation"><div style="border-width:2px;height:80%;width:80%;"></div></div>'),$("#dcloaderImage"+o.m_objectid).show()},NewWordCloudChart.prototype.drawWordCloudD3=function(){var t=10,e=10,o=10,i=10,a=450-i-e,r=450-t-o,s=d3.select("#tagCloudDiv"+this.m_objectid).append("svg").attr("width",a+i+e).attr("height",r+t+o).append("g").attr("transform","translate("+i+","+t+")"),n=d3.layout.cloud().size([a,r]).words(["Hello","Everybody","How","Are","You","Today","It","Is","A","Lovely","Day","I","Love","Coding","In","My","Van","Mate","Peace","Love","Keep","The","Good","Work","Make","Love","Not","War","Surfing","R","R","Data-Viz","Python","Linux","Programming","Graph Gallery","Biologie","Resistance","Computing","Data-Science","Reproductible","GitHub","Script","Experimentation","Talk","Conference","Writing","Publication","Analysis","Bioinformatics","Science","Statistics","Data","Programming","Wheat","Virus","Genotyping","Work","Fun","Surfing","R","R","Data-Viz","Python","Linux","Programming","Hello","Everybody","How","Are","You","Today","It","Is","A","Lovely","Day","I","Love","Coding","In","My","Van","Mate","Peace","Love","Keep","The","Good","Work","Make","Love","Not","War","Surfing","R","R","Data-Viz","Python","Linux","Programming","Graph Gallery","Biologie","Resistance","Computing","Data-Science","Reproductible","GitHub","Script","Experimentation","Talk","Conference","Writing","Publication","Analysis","Bioinformatics","Science","Statistics","Data","Programming","Wheat","Virus","Genotyping","Work","Fun","Surfing","R","R","Data-Viz","Python","Linux","Programming"].map(function(t){return{text:t}})).padding(5).rotate(-45).fontSize(20).on("end",function(t){s.append("g").attr("transform","translate("+n.size()[0]/2+","+n.size()[1]/2+")").selectAll("text").data(t).enter().append("text").style("font-size",20).style("fill","#69b3a2").attr("text-anchor","middle").style("font-family","Impact").attr("transform",function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"}).text(function(t){return t.text})});n.start()},NewWordCloudChart.prototype.drawWordCloudText=function(e){var o=this,t=o.m_chartData,i=null,a="95%",r="95%",s=10,n=10,l=(setTimeout(function(){$("#dcloaderImage"+o.m_objectid).hide()},500),"none"!==o.m_wordlayoutshape&&(i=new Image,r=a="100%",n=s=0),s=IsBoolean(o.m_shrinktofit)?{type:"wordCloud",gridSize:parseInt(o.m_cloudgridsize),sizeRange:[+o.m_minvaluefontsize,+o.m_maxvaluefontsize],rotationRange:[o.m_rotationrangemin,o.m_rotationrangemax],rotationStep:parseInt(o.m_rotationrangestep),shape:o.m_wordcloudshape,drawOutOfBound:!1,shrinkToFit:IsBoolean(o.m_shrinktofit),maskImage:i,keepAspect:!1,left:s,right:n,top:0,width:a,height:r,layoutAnimation:IsBoolean(o.m_layoutanimation),emphasis:{focus:"self",textStyle:{color:convertColorToHex(o.m_highlightcolor),fontSize:o.m_highlightfontsize},itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}},textStyle:{fontFamily:selectGlobalFont(o.m_wordfontfamily),fontWeight:"bold",textShadowBlur:parseInt(o.m_shadowdepth),textShadowOffsetX:parseInt(o.m_shadowoffestx),textShadowOffsetY:parseInt(o.m_shadowoffesty),textShadowColor:o.m_shadowcolor,color:function(){return hex2rgb(o.m_color[Math.floor(Math.random()*o.m_color.length)],o.m_fillopacity)}},data:t}:{type:"wordCloud",gridSize:parseInt(o.m_cloudgridsize),sizeRange:[+o.m_minvaluefontsize,+o.m_maxvaluefontsize],rotationRange:[o.m_rotationrangemin,o.m_rotationrangemax],rotationStep:parseInt(o.m_rotationrangestep),shape:o.m_wordcloudshape,drawOutOfBound:!1,shrinkToFit:IsBoolean(o.m_shrinktofit),maskImage:i,keepAspect:!1,left:s,right:n,top:0,width:a,height:r,layoutAnimation:IsBoolean(o.m_layoutanimation),textStyle:{fontFamily:selectGlobalFont(o.m_wordfontfamily),fontWeight:"bold",textShadowBlur:parseInt(o.m_shadowdepth),textShadowOffsetX:parseInt(o.m_shadowoffestx),textShadowOffsetY:parseInt(o.m_shadowoffesty),textShadowColor:o.m_shadowcolor,color:function(){return hex2rgb(o.m_color[Math.floor(Math.random()*o.m_color.length)],o.m_fillopacity)}},data:t},{tooltip:{show:IsBoolean("None"!=o.m_customtextboxfortooltip.dataTipType),responsive:!0,trigger:"item",backgroundColor:o.m_tooltipbackgroundcolor,borderColor:o.m_tooltipbordercolor,padding:0,opacity:parseFloat(o.m_tooltipbackgroundtransparency),formatter:function(t){t=o.getToolTipData(t,t.dataIndex);return o.drawDefaultChartToolTip(t)},textStyle:{}},series:[s]});"none"!==o.m_wordlayoutshape?(i.onload=function(){l.series[0].maskImage,e.setOption(l),e.hideLoading()},i.src=appRootPath+"designer/views/designer/resources/images/cloud-"+o.m_wordlayoutshape+".png"):(e.setOption(l),e.hideLoading()),e.on("click","series.wordCloud",function(t){var e=o.getFieldNameValueMap(t.dataIndex),t=t.color;o.updateDataPointsToGV({drillRecord:e,drillColor:t})}),e.on("mouseover",function(t){t.event.target.style.fontSize>o.m_highlightfontsize&&IsBoolean(o.m_shrinktofit)&&e.dispatchAction({type:"downplay",seriesIndex:t.seriesIndex,dataIndex:t.dataIndex})})},NewWordCloudChart.prototype.drawDefaultChartToolTip=function(t){var t=t.data,e='<table class=" chart-tooltip bdtooltip" style = \'border:'+(this.m_tooltipborderwidth+"px solid "+this.m_tooltipbordercolor)+";background:"+this.m_tooltipbackgroundcolor+";width:"+this.m_customtooltipwidth+";'>",e=(e+='<tr><td colspan="3" class="chart-tooltip-head" style=\'background:'+this.m_tooltipbackgroundcolor+";font-size:"+parseInt(this.m_tooltipfontsize)+'px;\'><span class="colorspan" style="background-color:'+t[0].color+';"></span>'+t[0].text+"</td></tr>")+('<tr><td align="left" style=\'background:'+this.m_tooltipbackgroundcolor+";font-size:"+parseInt(this.m_tooltipfontsize)+"px;'>"+t[1].text+'</td><td align="left" style=\'background:'+this.m_tooltipbackgroundcolor+";font-size:"+parseInt(this.m_tooltipfontsize)+"px;'>"+t[1].value+"</td></tr>");return 0!==this.m_confidenceDisplayNames.length&&"word"==this.m_wordinputformat&&(e+='<tr><td align="left" style=\'background:'+this.m_tooltipbackgroundcolor+";font-size:"+parseInt(this.m_tooltipfontsize)+"px;'>"+t[2].text+'</td><td align="left" style=\'background:'+this.m_tooltipbackgroundcolor+";font-size:"+parseInt(this.m_tooltipfontsize)+"px;'>"+t[2].value+"</td></tr>"),e+="</table>"},NewWordCloudChart.prototype.getToolTipData=function(t,e){var o=[],i=this.getSeriesData()[0],a=this.getConfidenceData()[0],i=(o[0]={text:t.data.name,value:t.data.value,color:t.color},o[1]={text:"word"==this.m_wordinputformat?this.m_seriesDisplayNames[0]:"Frequency",value:"word"==this.m_wordinputformat?i[e]:t.data.value},0!==this.m_confidenceDisplayNames.length&&"word"==this.m_wordinputformat&&(o[2]={text:this.m_confidenceDisplayNames[0],value:"word"==this.m_wordinputformat?a[e]:t.data.value}),{});i.cat="",i.data=new Array;for(var r,e=0;e<o.length;e++)""==o[e].value||isNaN(o[e].value)||null==o[e].value||"null"==o[e].value?o[e].value=o[e].value:(r=+o[e].value,"default"!==this.m_tooltipprecision?o[e].value=r.toFixed(this.m_tooltipprecision):o[e].value=+r),o[e].value=this.getUpdatedFormatterForToolTip(o[e].value,o[e].text);return i.data=o,i},NewWordCloudChart.prototype.setFormatter=function(){var t,e;this.m_unitSymbol="",this.m_formatterPosition="",this.m_isFormatter=!1,"none"!=this.m_formater&&""!=this.m_formater&&(t=this.getFormater(),"none"!=(e=this.getUnit()))&&""!=e&&(this.m_isFormatter=!0,this.m_unitSymbol=this.m_util.getFormatterSymbol(t,e),this.m_formatterPosition=this.getSignPosition(),""==this.m_formatterPosition)&&(this.m_formatterPosition="suffix")},NewWordCloudChart.prototype.setSecondaryFormatter=function(){var t,e;this.m_secondaryUnitSymbol="",this.m_secondaryFormatterPosition="",this.m_isSecondaryFormatter=!1,"none"!=this.m_secondaryformater&&""!=this.m_secondaryformater&&(t=this.getSecondaryFormater(),""!=(e=this.getSecondaryUnit())&&"none"!=e&&null!=e&&(this.m_isSecondaryFormatter=!0,this.m_secondaryUnitSymbol=this.m_util.getFormatterSymbol(t,e)),this.m_secondaryFormatterPosition="suffix")},NewWordCloudChart.prototype.getFormatterForToolTip=function(t){var e,o,i,a,r,s,n;return isNaN(getNumericComparableValue(t))?t:((""+t).indexOf(","),e=""!=this.m_signposition?this.m_signposition:"suffix",o=this.m_tooltipprecision,s=this.m_unit,a=this.m_secondaryunit,n="default"===o?+getNumericComparableValue(t):(+getNumericComparableValue(t)).toFixed(o),""!=s?(i=this.m_util.getFormatterSymbol("Currency",s),"auto"==(a=this.m_util.getFormatterSymbol("Number",a))?(t=getNumericComparableValue(t),r=getNumberFormattedSymbol(+t,s),s=getNumberFormattedNumericValue(+t,o,s),s=this.m_util.updateTextWithFormatter(s,"",o),n=this.m_util.addFormatter(s,r,"suffix")):(n=this.m_util.updateTextWithFormatter(n,a,o),"none"!=a&&""!=a&&(n=this.m_util.addFormatter(n,a,"suffix"))),"NaN"==n||""===n?"":this.m_util.addFormatter(getFormattedNumberWithCommas(n,this.m_numberformatter),i,e)):"NaN"==n?t:n)},NewWordCloudChart.prototype.getSecondaryFormaterAddedText=function(textValue,secondaryUnitSymbol){var formattedText=textValue,secondaryFormatterPosition="suffix";try{eval("var formattedText = this.m_util.addUnitAs"+secondaryFormatterPosition+"(textValue,secondaryUnitSymbol);")}catch(e){}return formattedText},NewWordCloudChart.prototype.getFieldFormatterForToolTip=function(fieldname,value){var data=value,m_precision;if(data=getNumericComparableValue(data),isNaN(data)||""==data||null==data)return data;if(this.m_precision=this.formatterMap[fieldname].precision,m_precision="default"!==this.m_precision?this.m_precision:(m_precision=(data+"").split("."),void 0!==m_precision[1]?m_precision[1].length:0),"none"!=this.formatterMap[fieldname].secondformatter&&""!=this.formatterMap[fieldname].secondformatter&&""!=this.formatterMap[fieldname].secondunitname&&"none"!=this.formatterMap[fieldname].secondunitname)if(this.m_secondaryUnitSymbol=this.m_util.getFormatterSymbol(this.formatterMap[fieldname].secondformatter,this.formatterMap[fieldname].secondunitname),this.m_secondaryFormatterPosition="suffix","auto"!=this.m_secondaryUnitSymbol)try{data=this.m_util.updateTextWithFormatter(data,this.m_secondaryUnitSymbol,m_precision),data=this.getLocaleWithPrecision(data,m_precision),eval("data = this.m_util.addUnitAs"+this.m_secondaryFormatterPosition+"(data,this.m_secondaryUnitSymbol);")}catch(e){}else{var symbol=getNumberFormattedSymbol(+data),data=getNumberFormattedNumericValue(+data,m_precision);data=this.getLocaleWithPrecision(data,m_precision),eval("data = this.m_util.addUnitAs"+this.m_secondaryFormatterPosition+"(data,symbol);")}else data=this.getLocaleWithPrecision(data,m_precision);return"none"!=this.formatterMap[fieldname].formatter&&""!=this.formatterMap[fieldname].formatter&&"none"!=this.formatterMap[fieldname].unitname&&""!=this.formatterMap[fieldname].unitname&&(this.m_unitSymbol=this.m_util.getFormatterSymbol(this.formatterMap[fieldname].formatter,this.formatterMap[fieldname].unitname),null!=this.m_unitSymbol)?(""==this.formatterMap[fieldname].signposition&&(this.formatterMap[fieldname].signposition="suffix"),this.m_util.addFormatter(data,this.m_unitSymbol,this.formatterMap[fieldname].signposition,m_precision)):data},NewWordCloudChart.prototype.createWordData=function(){for(var t=this,e=this.getCategoryData()[0],o=this.getSeriesData()[0],i=this.getConfidenceData()[0],a=[],r=0;r<e.length;r++){var s=this.getWordWithFontCase(String(e[r])),n=parseInt(this.getFontRatio(o[r])),l={fontSize:n,color:hex2rgb(t.m_color[Math.floor(Math.random()*t.m_color.length)],t.m_fillopacity),highligherSize:parseInt(t.m_highlightfontsize)};IsBoolean(this.m_userandomcolor)||(l={color:hex2rgb(this.getColorAsRange(i[r]).color,this.m_fillopacity),fontSize:n,highligherSize:parseInt(t.m_highlightfontsize)}),n=n>parseInt(t.m_highlightfontsize)?{focus:"self",textStyle:{color:convertColorToHex(t.m_highlightcolor)}}:{focus:"self",textStyle:{color:convertColorToHex(t.m_highlightcolor),fontSize:parseInt(t.m_highlightfontsize)}},IsBoolean(t.m_shrinktofit)?a[r]={name:s,value:parseFloat(o[r]),textStyle:l}:a[r]={name:s,value:parseFloat(o[r]),textStyle:l,emphasis:n}}this.m_chartData=a},NewWordCloudChart.prototype.createParaWordData=function(){for(var e=this,t=[],o="",i=this.getCategoryData()[0],a=0;a<i.length;a++)o=o+", "+i[a];if(t=(t=o.replace(/[^\w\s]/g,"").split(/\s+/).filter(t=>""!==t)).slice(0,this.m_maxtextvalue),IsBoolean(this.m_excludepronouns)){for(var r=[],a=0;a<t.length;a++){var s=t[a];s&&this.getPronounsMap()[s.toString().toLowerCase()]!=s.toString().toLowerCase()&&r.push(s)}t=r}if(IsBoolean(this.m_showntext)&&(t=t.slice(0,this.m_nthtextvalue)),IsBoolean(this.m_shuffledtext)){for(var n=t,l=0;l<n.length-1;l++){var h=l+Math.floor(Math.random()*(n.length-l)),m=n[h];n[h]=n[l],n[l]=m}t=n}var d,c=t.map(function(t){return e.getWordWithFontCase(t.trim())}),u={},g=((t=c).forEach(function(t){t=t.trim();u[t]?u[t]++:u[t]=1}),0),p=0;for(const f in u)u.hasOwnProperty(f)&&((d=u[f])<g&&(g=d),p<d)&&(p=d);this.m_minvalue=g,this.m_maxvalue=p;var _,r=[],a=0;for(_ in u){var f=_,y=parseInt(this.getFontRatio(u[_])),C={fontSize:y,color:hex2rgb(e.m_color[Math.floor(Math.random()*e.m_color.length)],e.m_fillopacity),highligherSize:parseInt(e.m_highlightfontsize)};IsBoolean(this.m_userandomcolor)||(C={color:hex2rgb(this.getColorAsRange(u[_]).color,this.m_fillopacity),fontSize:y,highligherSize:parseInt(e.m_highlightfontsize)}),y=y>parseInt(e.m_highlightfontsize)?{focus:"self",textStyle:{color:convertColorToHex(e.m_highlightcolor)}}:{focus:"self",textStyle:{color:convertColorToHex(e.m_highlightcolor),fontSize:parseInt(e.m_highlightfontsize)}},IsBoolean(e.m_shrinktofit)?r[a]={name:f,value:parseFloat(u[_]),textStyle:C}:r[a]={name:f,value:parseFloat(u[_]),textStyle:C,emphasis:y},a++}this.m_chartData=r},NewWordCloudChart.prototype.getWordWithFontCase=function(t){switch(this.m_wordcase){case"none":return t;case"lower":return t.toLowerCase();case"upper":return t.toUpperCase();case"title":return(""+t).replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()});default:return t}},NewWordCloudChart.prototype.getColorAsRange=function(t){var e="#CCCCCC",o=0;if(IsBoolean(this.m_showdynamicrange)){var i=(+this.m_cmaxvalue+ +this.m_cminvalue)/2;+t>=this.m_cminvalue&&+t<i?(e=this.m_minrangecolor,o=0):i<=+t&&+t<=this.m_cmaxvalue&&(e=this.m_maxrangecolor,o=1)}else{for(var a=0;a<this.m_range1.length;a++)if(+t>=+this.m_range1[a]&&+t<+this.m_range2[a]){e=this.m_color[a],o=a;break}+t<+this.m_range1[0]&&(e=this.m_defaultcolor,o=0),+t>=+this.m_range2[this.m_range2.length-1]&&(e=this.m_defaultcolor,o=this.m_range2.length-1)}return{color:e,cssClass:this.m_objectid+"colorRangeBar"+o}},NewWordCloudChart.prototype.createShuffledArray=function(t,e){for(var o=e-t+1,i=Array(o);o;){var a=Math.floor(Math.random()*o--),r=isNaN(i[o])?o+t:i[o];i[o]=isNaN(i[a])?a+t:i[a],i[a]=r}return i},NewWordCloudChart.prototype.getTextWidth=function(t,e){return $("#textWidthCalcDiv"+this.m_objectid).css({font:e+"px "+selectGlobalFont(this.m_wordfontfamily)}),$("#textWidthCalcDiv"+this.m_objectid).html(""+t),$("#textWidthCalcDiv"+this.m_objectid).width()},NewWordCloudChart.prototype.getTextHeight=function(t,e){var o=0;$("#textWidthCalcSpan"+this.m_objectid).css({font:e+"px "+selectGlobalFont(this.m_wordfontfamily)}),$("#textWidthCalcSpan"+this.m_objectid).html(""+t);try{o=$("#textWidthCalcSpan"+this.m_objectid)[0].clientHeight}catch(t){}return $("#textWidthCalcSpan"+this.m_objectid).html(""),o},NewWordCloudChart.prototype.rotateText=function(t,e,o,i,a){var r=this.getTextHeight(o,a),r=(i.style.width=r+"px",i.style.lineHeight="1",i.innerHTML="",document.createElement("div"));r.id="rotated"+t,r.className="rotated",r.innerHTML=o,r.style.fontSize=a+"px",i.appendChild(r)},NewWordCloudChart.prototype.getFontRatio=function(t){return(this.m_maxvalue==this.m_minvalue?1:t-this.m_minvalue)/(this.m_maxvalue==this.m_minvalue?1:this.m_maxvalue-this.m_minvalue)*(this.m_maxvaluefontsize-this.m_minvaluefontsize)*1+ +this.m_minvaluefontsize},NewWordCloudChart.prototype.showTooltipOnText=function(t,e){var o=this,e=o.getToolTipData(e,t);o.m_hovercallback&&""!=o.m_hovercallback?o.drawCallBackContent(mouseX,mouseY,e):o.drawTooltipContent(e)},NewWordCloudChart.prototype.drawTooltipContent=function(t){this.m_tooltip.draw(t,this.m_componenttype)},NewWordCloudChart.prototype.hideTooltipOnText=function(t){$("#toolTipDiv").remove()},NewWordCloudChart.prototype.getStartX=function(){return this.m_x+0},NewWordCloudChart.prototype.getStartY=function(){return+(this.m_y+this.m_height)},NewWordCloudChart.prototype.getEndX=function(){return+(this.m_x+this.m_width)},NewWordCloudChart.prototype.getEndY=function(){return this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()},NewWordCloudChart.prototype.drawTooltip=function(t,e){};
//# sourceMappingURL=NewWordCloudChart.min.js.map