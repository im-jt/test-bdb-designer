/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
var sentimentInfo={infoID:1,dialogBoxes:[]};function SentimentPlotChart(t,i){this.base=Chart,this.base(),this.m_x=350,this.m_y=20,this.m_width=300,this.m_height=260,this.m_seriesNames=[],this.m_categoryData=[],this.m_seriesData=[],this.m_chartData=[],this.m_plotRadius=[],this.m_chartTypeNames=[],this.m_showSeries=[],this.m_sentimentShapeSeries=[],this.m_maximumaxisvalue,this.m_minimumaxisvalue,this.m_showrangecolorbar=!0,this.m_yPositionArray=[],this.m_calculation=new SentimentPlotChartCalculation,this.m_xAxis=new Xaxis,this.m_yAxis=new Yaxis,this.m_chartContainer=t,this.m_zIndex=i,this.noOfRows=1,this.m_chartMargin=50,this.m_emoticonwidth=18,this.m_emoticonalpha=1,this.m_chartbase="gradient",this.m_luminance="0.4",this.m_transparency="1",this.m_showalldatapointsintooltip=!1,this.m_showtweetsinmodel=!0}function SentimentPlotChartCalculation(){this.m_xAxisMarkersArray=[],this.m_yAxisMarkersArray=[],this.m_xPixelArray=[],this.m_yPixelArray=[],this.m_xMax=0,this.m_xRatio=0,this.m_yRatio=0,this.m_yMax=0,this.m_yAxisText=1,this.m_noOfXAxisMarkers=5,this.m_noOfYAxisMarkers=5,this.m_axisToChartMargin=5}function SentimentShapeSeries(){this.color,this.xPositionArray=[],this.yPositionArray=[],this.common=[],this.shape,this.plotradius,this.m_chart}function SentimentShape(){this.color,this.xPosition,this.yPosition,this.s,this.plotradius=3,this.ctx=""}SentimentPlotChart.prototype=new Chart,SentimentPlotChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},SentimentPlotChart.prototype.ParseJsonAttributes=function(t,i){for(var e in this.chartJson=t)if("Chart"==e)for(var s in t[e])switch(s){case"xAxis":for(var r in t[e][s]){var a=this.getNodeAttributeName(r);i.m_xAxis[a]=t[e][s][r]}break;case"yAxis":for(var o in t[e][s]){var a=this.getNodeAttributeName(o);i.m_yAxis[a]=t[e][s][o]}break;case"Title":for(var h in t[e][s]){var a=this.getNodeAttributeName(h);i.m_title[a]=t[e][s][h]}break;case"SubTitle":for(var n in t[e][s]){a=this.getNodeAttributeName(n);i.m_subTitle[a]=t[e][s][n]}break;default:i[a=this.getNodeAttributeName(s)]=t[e][s]}else i[a=this.getNodeAttributeName(e)]=t[e]},SentimentPlotChart.prototype.getDataProvider=function(){return this.m_dataProvider},SentimentPlotChart.prototype.refineSentimentPlotData=function(){var t=[];this.origionalDPLength=this.getDataProvider().length;for(var i=0;i<this.getDataProvider().length;i++){var e=this.getDataProvider()[i],s=e[this.nameArr[0]],r=e[this.otherFieldArr[0]],a=e[this.colorArr[0]],o=e[this.plotRadiusFieldArr[0]];void 0!==this.nameArr[0]&&null!=s&&"null"!==s&&""!==s&&1<s&&s<9&&void 0!==this.otherFieldArr[0]&&null!=r&&"null"!==r&&""!==r&&1<r&&r<9&&void 0!==this.colorArr[0]&&null!=a&&"null"!==a&&""!==a&&void 0!==this.plotRadiusFieldArr[0]&&null!=o&&"null"!==o&&""!==o&&t.push(e)}this.m_dataProvider=[],this.m_dataProvider=t},SentimentPlotChart.prototype.setFields=function(t){this.m_fieldsJson=t,this.setCategory(t),this.setSeries(t),this.setAllFieldNames()},SentimentPlotChart.prototype.setAllFieldNames=function(){var t=[];this.m_allfieldsName=[];for(var i=0;i<this.nameArr.length;i++)t.push(this.nameArr[i]),""!=this.otherFieldArr[i]&&t.push(this.otherFieldArr[i]);t=this.getUniqueValueFromArray(t),this.m_allfieldsName=t},SentimentPlotChart.prototype.getFieldbyYFields=function(){for(var t=[],i=0;i<this.nameArr.length;i++)"YField"==this.typeArr[i]&&""!=this.otherFieldArr[i]?t.push(this.nameArr[i]):"XField"==this.typeArr[i]&&""!=this.otherFieldArr[i]&&t.push(this.otherFieldArr[i]);return t},SentimentPlotChart.prototype.getFieldbyYFieldsDisplayName=function(){for(var t=[],i=0;i<this.seriesNameArr[i].length;i++)("YField"==this.typeArr[i]&&""!=this.otherFieldArr[i]||"XField"==this.typeArr[i]&&""!=this.otherFieldArr[i])&&t.push(this.displayFieldArr[i]);return t},SentimentPlotChart.prototype.getUniqueValueFromArray=function(t){for(var i={},e=0;e<t.length;e++)i[t[e]]=!0;var s,r=[];for(s in i)r.push(s);return r},SentimentPlotChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryDisplayNames=[];for(var i=0;i<t.length;i++){var e=this.getProperAttributeNameValue(t[i],"Type"),s=this.getProperAttributeNameValue(t[i],"OtherField");"YField"==e&&""!=s?this.m_categoryNames.push(s):"XField"==e&&""!=s&&this.m_categoryNames.push(this.getProperAttributeNameValue(t[i],"Name"))}},SentimentPlotChart.prototype.getOtherFields=function(){for(var t=[],i=0;i<this.nameArr.length;i++)"YField"==this.typeArr[i]&&""!=this.otherFieldArr[i]?t.push(this.otherFieldArr[i]):"XField"==this.typeArr[i]&&""!=this.otherFieldArr[i]&&t.push(this.nameArr[i]);return t},SentimentPlotChart.prototype.getCategoryNames=function(){return this.getOtherFields()},SentimentPlotChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},SentimentPlotChart.prototype.setSeries=function(t){this.nameArr=[],this.otherFieldArr=[],this.legendArr=[],this.displayNamesArr=[],this.colorArr=[],this.plotRadiusFieldArr=[],this.typeArr=[],this.toolTipArr=[];for(var i=0;i<1;i++){this.nameArr[i]=this.getProperAttributeNameValue(t[i],"Name"),this.otherFieldArr[i]=this.getProperAttributeNameValue(t[i],"OtherField");var e=this.formattedDescription(this,this.getProperAttributeNameValue(t[i],"DisplayName")),e=(this.displayNamesArr[i]=e,this.getProperAttributeNameValue(t[i],"Color")),s=this.getProperAttributeNameValue(t[i],"ColorField"),s=(this.colorArr[i]=s||e||"Color",this.plotRadiusFieldArr[i]=this.getProperAttributeNameValue(t[i],"PlotRadius"),this.getProperAttributeNameValue(t[i],"ToolTip"));this.toolTipArr[i]=s&&""!==s?s.split(","):"",this.typeArr[i]=this.getProperAttributeNameValue(t[i],"Type"),"Category"!=this.typeArr[i]&&(this.m_showSeries[i]=this.getProperAttributeNameValue(t[i],"visible"))}},SentimentPlotChart.prototype.getSeriesNames=function(){return this.getFieldbyYFields()},SentimentPlotChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},SentimentPlotChart.prototype.getSeriesColors=function(){var t=[];this.m_tooltipsentiment=[],this.plotRadiusArr=[];for(var i=0;i<this.getDataProvider().length;i++){for(var e=this.getDataProvider()[i][this.nameArr[0]],s=this.getDataProvider()[i][this.otherFieldArr[0]],r=this.getDataProvider()[i][this.colorArr[0]],e=(t.push(""==e||null==e||""==s||null==s||""==r||null==r?"rgba(255,255,255,1)":this.tweetColor(e,s,r)),this.getDataProvider()[i][this.plotRadiusFieldArr[0]]),a=(""==e||null==e?this.plotRadiusArr.push(0):this.plotRadiusArr.push(e),[]),o=0;o<this.toolTipArr[0].length;o++){var h=this.getDataProvider()[i][this.toolTipArr[0][o]];a.push(""==h||null==h?"":h)}this.m_tooltipsentiment.push(a)}return t},SentimentPlotChart.prototype.tweetColor=function(t,i,e){i=.4+(i-1)/8*.5,t=t<5?this.getColorWL(i,.08):this.getColorWL(i,.55);return t.a=(e-1.5)/2,t.a<0?t.a=0:1<t.a&&(t.a=1),"rgba("+t.r+","+t.g+","+t.b+","+(1-t.a)+")"},SentimentPlotChart.prototype.getColorWL=function(t,i){var e,s,r,a,o,h,n,l;return t<0?t=0:1<t&&(t=1),i<0?i=0:1<i&&(i=1),e=10*t-(t=Math.floor(10*t)),o=39*i-(i=Math.floor(39*i)),s=colorPath[t][i][0],r=colorPath[t][i][1],a=colorPath[t][i][2],.01<Math.abs(o)&&(s+=(colorPath[t][i+1][0]-s)*o,r+=(colorPath[t][i+1][1]-r)*o,a+=(colorPath[t][i+1][2]-a)*o),.01<Math.abs(e)&&(h=colorPath[t+1][i][0],n=colorPath[t+1][i][1],l=colorPath[t+1][i][2],.01<Math.abs(o)&&(h+=(colorPath[t+1][i+1][0]-h)*o,n+=(colorPath[t+1][i+1][1]-n)*o,l+=(colorPath[t+1][i+1][2]-l)*o),s+=(h-s)*e,r+=(n-r)*e,a+=(l-a)*e),{r:s=Math.round(s),g:r=Math.round(r),b:a=Math.round(a)}},SentimentPlotChart.prototype.setCategorySeriesData=function(){this.m_categoryData=[],this.m_seriesData=[];for(var t=0;t<this.getDataProvider().length;t++){var i=this.getDataProvider()[t];if(this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var e=0;e<this.getCategoryNames().length;e++){this.m_categoryData[e]||(this.m_categoryData[e]=[]);var s=this.getValidFieldDataFromRecord(i,this.getCategoryNames()[e]);this.m_categoryData[e][t]=s}}for(var r=0;r<this.getSeriesNames().length;r++){this.m_seriesData[r]||(this.m_seriesData[r]=[]);s=this.getValidFieldDataFromRecord(i,this.getSeriesNames()[r]);isNaN(s)&&(s=getNumericComparableValue(s)),this.m_seriesData[r][t]=s}}},SentimentPlotChart.prototype.setCategoryData=function(){this.m_categoryData=[];for(var t=0;t<this.getCategoryNames().length;t++)this.m_categoryData[t]=this.getDataFromJSON(this.getCategoryNames()[t])},SentimentPlotChart.prototype.getCategoryData=function(){return this.m_categoryData},SentimentPlotChart.prototype.setSeriesData=function(){this.m_seriesData=[];for(var t=0;t<this.getSeriesNames().length;t++)this.m_seriesData[t]=this.getDataFromJSON(this.getSeriesNames()[t])},SentimentPlotChart.prototype.getSeriesData=function(){return this.m_seriesData},SentimentPlotChart.prototype.setSeriesColor=function(t){this.m_seriesColor=t},SentimentPlotChart.prototype.getSeriesColor=function(){return this.m_seriesColor},SentimentPlotChart.prototype.setLegendNames=function(t){this.m_legendNames=t},SentimentPlotChart.prototype.getLegendNames=function(){return this.m_legendNames=this.displayNamesArr,this.m_legendNames},SentimentPlotChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0;t<this.getCategoryNames().length;t++)this.m_allfieldsName.push(this.getCategoryNames()[t]);for(var i=0;i<this.getSeriesNames().length;i++)this.m_allfieldsName.push(this.getSeriesNames()[i])},SentimentPlotChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},SentimentPlotChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var t=0;t<this.getCategoryDisplayNames().length;t++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[t]);for(var i=0;i<this.getSeriesDisplayNames().length;i++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[i])},SentimentPlotChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},SentimentPlotChart.prototype.getOtherField=function(){return this.m_otherFields},SentimentPlotChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},SentimentPlotChart.prototype.init=function(){if(this.refineSentimentPlotData(),this.setCategorySeriesData(),this.m_chartTypeNames=this.getChartTypeNames(),this.isSeriesDataEmpty(),this.m_seriesNames=this.getSeriesNames(),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),this.m_chartMargin=this.m_title.m_showtitle?this.getTitleBarHeight()+25:this.m_chartMargin,!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)){this.m_calculation.init(this,this.getCategoryData(),this.getSeriesData());for(var t=0;t<this.m_seriesData.length;t++)this.m_sentimentShapeSeries[t]=new SentimentShapeSeries,this.m_sentimentShapeSeries[t].init(this.getSeriesColors(),this.m_calculation.getXPixelArray()[t],this.m_calculation.getYPixelArray()[t],this.getChartTypeNames()[t],this.plotRadiusArr,this)}this.initializeToolTipProperty(),this.m_tooltip.init(this)},SentimentPlotChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),IsBoolean(this.m_showrangecolorbar)&&this.drawColorRange(),this.drawSentimentAxisAndText(),IsBoolean(this.m_isEmptySeries)||IsBoolean(this.isEmptyCategory)||this.drawSentimentBubble()},SentimentPlotChart.prototype.drawSentimentAxisAndText=function(){$("#draggableCanvas"+this.m_objectid);var t,i,e=this.m_width,s=this.m_height,r=["Pleasant","Unpleasant","Active","Subdued","Happy","Upset","Sad","Contented","Elated","Stressed","Unhappy","Serene","Excited","Nervous","Depressed","Relaxed","Alert","Tense","Bored","Calm"],a=IsBoolean(this.m_updateddesign)?1.5*this.m_chartMargin:this.m_chartMargin,o=IsBoolean(this.m_updateddesign)?3*this.m_chartMargin:2*this.m_chartMargin,h=IsBoolean(this.m_updateddesign)?this.m_chartMargin+20:this.m_chartMargin-10;for(this.ctx.strokeStyle=convertColorToHex(this.m_axiscolor),this.ctx.beginPath(),this.ctx.save(),this.ctx.translate(.5,.5),this.ctx.moveTo(parseInt(e/2),parseInt(a)),this.ctx.lineTo(parseInt(e/2),parseInt(a)),this.ctx.stroke(),this.ctx.restore(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.save(),this.ctx.translate(.5,.5),this.ctx.moveTo(parseInt(this.m_chartMargin),parseInt(s/2)),this.ctx.lineTo(parseInt(e-this.m_chartMargin),parseInt(s/2)),this.ctx.stroke(),this.ctx.restore(),this.ctx.closePath(),i=(e-2*this.m_chartMargin)/8,t=0;t<9;t++)this.ctx.beginPath(),this.ctx.moveTo(this.m_chartMargin+t*i,s/2-5),this.ctx.lineTo(this.m_chartMargin+t*i,s/2+5),this.ctx.stroke();for(i=(s-o)/8,t=0;t<9;t++)this.ctx.beginPath(),this.ctx.moveTo(e/2-5,a+t*i),this.ctx.lineTo(e/2+5,a+t*i),this.ctx.stroke();for(this.ctx.beginPath(),this.ctx.textAlign="center",this.ctx.fillStyle=convertColorToHex(this.m_xAxis.m_labelfontcolor),this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(+this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily),this.ctx.fillText(r[0],e-this.m_chartMargin,s/2-10),this.ctx.fillText(r[1],this.m_chartMargin+10+this.fontScaling(+this.m_xAxis.m_labelfontsize),s/2-10),this.ctx.fillText(r[2],e/2,h),this.ctx.fillText(r[3],e/2,s-h),t=1;t<5;t++){var n=18*t/180*Math.PI,l=e/2+Math.cos(n)*((e-o)/2),n=s/2-Math.sin(n)*((s-o)/2);this.ctx.fillText(r[4*t],l,n),this.ctx.fillText(r[4*t+1],e-l,n),this.ctx.fillText(r[4*t+2],e-l,s-n),this.ctx.fillText(r[4*t+3],l,s-n),3==t&&this.drawSentimentEmoticons(l,n,e,s)}this.ctx.fillStyle=convertColorToHex(this.m_xAxis.m_labelfontcolor),this.ctx.closePath();var h="Reviews ("+this.m_reviews+")",h=this.ctx.measureText(h).width,m=($("#Reviews"+this.m_objectid).remove(),document.createElement("div"));m.id="Reviews"+this.m_objectid,m.innerHTML="Reviews ("+this.getDataProvider().length+")",m.title="Actual Reviews ("+this.origionalDPLength+")",m.style.top=this.getMarginForTitle()+"px",m.style.left=e-h+"px",m.style.color=this.m_xAxis.m_labelfontcolor,m.style.fontSize=this.m_xAxis.m_labelfontsize+"px",m.style.fontFamily=selectGlobalFont(this.m_xAxis.m_labelfontfamily),m.style.cursor="pointer",m.style.position="absolute",$("#draggableDiv"+this.m_objectid).append(m)},SentimentPlotChart.prototype.drawSentimentEmoticons=function(t,i,e,s){var r=(this.m_width>this.m_height?this.m_height:this.m_width)/(30-this.m_emoticonwidth),a=(this.m_width>this.m_height?this.m_height:this.m_width)/(30-this.m_emoticonwidth);this.createEmoticon(e-this.m_chartMargin-r/2,i-a+10,r,r,"Happy"+this.m_objectid,"bd-happy","#2ECC71"),this.createEmoticon(this.m_chartMargin-r/2,i-a+10,r,r,"Nervous"+this.m_objectid,"bd-stress","#F89406"),this.createEmoticon(this.m_chartMargin-r/2,s-i-10,r,r,"Angry"+this.m_objectid,"bd-angry","#E74C3C"),this.createEmoticon(e-this.m_chartMargin-r/2,s-i-10,r,r,"Relax"+this.m_objectid,"bd-relax","#4183D7")},SentimentPlotChart.prototype.createEmoticon=function(t,i,e,s,r,a,o){$("#"+r).remove();var h=document.createElement("span");h.setAttribute("id",r),h.setAttribute("class"," icons "+a),h.style.fontSize=s+"px",h.style.color=o,h.style.left=t+"px",h.style.top=i+"px",h.style.height=Math.ceil(s)+"px",h.style.width=e+"px",h.style.opacity=this.m_emoticonalpha,h.style.position="absolute",$("#draggableDiv"+this.m_objectid).append(h)},SentimentPlotChart.prototype.drawColorRange=function(){this.m_width;var t=this.m_height,i=this.color;try{(i=this.ctx.createLinearGradient(this.m_chartMargin/4,t-this.m_chartMargin,this.m_chartMargin/4,this.m_chartMargin)).addColorStop(0,"rgba(67,17,29,1)"),i.addColorStop(.5,"rgba(233,186,215,1)"),i.addColorStop(.5,"rgba(169,211,200,1)"),i.addColorStop(1,"rgba(5,40,23,1)")}catch(t){}var e=IsBoolean(this.m_updateddesign)?this.m_chartMargin+10:this.m_chartMargin;this.ctx.beginPath(),this.ctx.fillStyle=i,this.ctx.rect(this.m_chartMargin/4,e,8,t-2*this.m_chartMargin),this.ctx.fill(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(+this.m_xAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_xAxis.m_labelfontfamily),this.ctx.fillStyle="#000000",this.ctx.textAlign="left",this.ctx.fillText("1",this.m_chartMargin/4,t-e+this.fontScaling(+this.m_xAxis.m_labelfontsize)/2),this.ctx.fillText("9",this.m_chartMargin/4,e-this.fontScaling(+this.m_xAxis.m_labelfontsize)/2),this.ctx.fill(),this.ctx.closePath()},SentimentPlotChart.prototype.drawLine=function(t,i,e,s){this.ctx.beginPath(),this.ctx.moveTo(t,i),this.ctx.lineTo(e,s),this.ctx.strokeStyle="#036861",this.ctx.stroke(),this.ctx.closePath()},SentimentPlotChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},SentimentPlotChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEvent()},SentimentPlotChart.prototype.drawTitle=function(){this.m_title.draw()},SentimentPlotChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},SentimentPlotChart.prototype.drawXAxis=function(){this.m_xAxis.drawXAxis(),this.m_xAxis.markXaxis()},SentimentPlotChart.prototype.drawYAxis=function(){this.m_yAxis.drawYAxis(),this.m_yAxis.markYaxis()},SentimentPlotChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},SentimentPlotChart.prototype.drawSentimentBubble=function(){for(var t=0;t<this.getCategoryData().length;t++)IsBoolean(this.m_showSeries[t])&&this.m_sentimentShapeSeries[t].drawSentimentShapeSeries()},SentimentPlotChart.prototype.getStartX=function(){var t=this.m_chartMargin;return this.m_x+t},SentimentPlotChart.prototype.getStartY=function(){var t=this.m_chartMargin;return this.m_y+this.m_height-t},SentimentPlotChart.prototype.getEndX=function(){var t=this.m_chartMargin;return this.m_x+this.m_width-t},SentimentPlotChart.prototype.getEndY=function(){return this.m_y+this.m_chartMargin},SentimentPlotChart.prototype.getMarginForTitle=function(){var t=IsBoolean(this.m_updateddesign)?60:40;return margin=IsBoolean(this.getShowGradient())||IsBoolean(this.m_showmaximizebutton)||IsBoolean(this.getTitle().m_showtitle)?t:15},SentimentPlotChart.prototype.getMarginForSubTitle=function(){var t=IsBoolean(this.m_subTitle.m_showsubtitle)?""!=this.m_subTitle.getDescription()?1.5*this.fontScaling(+this.m_subTitle.getFontSize()):10:0;return t},SentimentPlotChart.prototype.getToolTipData=function(t,i){if(!IsBoolean(this.m_isEmptySeries)&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType)){var e=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g);if(!IsBoolean(e)){var s,r=[];if(this.xPositionArr=this.m_calculation.getXPixelArray(),this.yAxisDataArray=this.m_calculation.getYPixelArray(),t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY()){(s={}).data=new Array;for(var a=0;a<this.xPositionArr.length;a++)for(var o=0;o<this.xPositionArr[a].length;o++)if(t<=+this.xPositionArr[a][o]+ +this.plotRadiusArr[o]&&t>=+this.xPositionArr[a][o]-+this.plotRadiusArr[o]&&i<=+this.yAxisDataArray[a][o]+ +this.plotRadiusArr[o]&&i>=+this.yAxisDataArray[a][o]-+this.plotRadiusArr[o]){for(var r=[],h=0;h<this.m_tooltipsentiment[o].length;h++)40<this.m_tooltipsentiment[o][h].length?r[h]=this.m_tooltipsentiment[o][h].substring(0,38)+"  ....":r[h]=this.m_tooltipsentiment[o][h];if(s.data.push(r),!IsBoolean(this.m_showalldatapointsintooltip))break}else this.hideToolTip()}else this.hideToolTip();return s}this.getDataPointAndUpdateGlobalVariable(t,i)}},SentimentPlotChart.prototype.drawTooltip=function(t,i){var e;IsBoolean(this.m_isEmptySeries)||this.m_designMode||!IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType)||(e=this.getToolTipData(t,i),this.m_hovercallback&&""!=this.m_hovercallback?this.drawCallBackContent(t,i,e):this.drawTooltipContent(e))},SentimentPlotChart.prototype.drawTooltipContent=function(t){this.m_tooltip.draw(t,this.m_componenttype)},SentimentPlotChart.prototype.showToolTipDiv=function(t){var i=document.createElement("div");i.setAttribute("id","dialog"),i.setAttribute("class","toolTipDiv1"),i.title="Review Details",i.innerHTML="",i.innerHTML=t,i.style.fontSize=this.fontScaling(+this.m_xAxis.m_labelfontsize)+"px",i.style.fontFamily=selectGlobalFont(this.m_xAxis.m_labelfontfamily),i.style.fontWeight=this.m_xAxis.m_labelfontweight,i.style.zIndex=999,document.body.appendChild(i),$("#dialog").dialog()},SentimentPlotChart.prototype.getDataPointAndUpdateGlobalVariable=function(t,i){var e=this.getDrillDataPoints(t,i);IsBoolean(this.m_showtweetsinmodel)&&this.getDialogBoxes(t,i),this.updateDataPointsToGV(e)},SentimentPlotChart.prototype.getDialogBoxes=function(t,i){var e;IsBoolean(this.m_isEmptySeries)||this.m_designMode||(e=this.getTweetNumAtThatRange(t,i),this.drawDialogBox(e,t,i))},SentimentPlotChart.prototype.getDrillDataPoints=function(t,i){if(!IsBoolean(this.m_isEmptySeries)&&!this.m_designMode){t=this.getTweetNumAtThatRange(t,i);if(""!=this.getGlobalKey()){i=this.getDataProvider()[t[t.length-1]];if(null!=i)return{drillRecord:i,drillColor:""}}}},SentimentPlotChart.prototype.getTweetNumAtThatRange=function(t,i){if(!IsBoolean(this.m_isEmptySeries)){var e=[];if(this.xPositionArr=this.m_calculation.getXPixelArray(),this.yAxisDataArray=this.m_calculation.getYPixelArray(),t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY())for(var s=0;s<this.xPositionArr.length;s++)for(var r=0;r<this.xPositionArr[s].length;r++)t<=+this.xPositionArr[s][r]+ +this.plotRadiusArr[r]&&t>=+this.xPositionArr[s][r]-+this.plotRadiusArr[r]&&i<=+this.yAxisDataArray[s][r]+ +this.plotRadiusArr[r]&&i>=+this.yAxisDataArray[s][r]-+this.plotRadiusArr[r]&&e.push(r);return e}},SentimentPlotChart.prototype.drawDialogBox=function(t,i,e){var s=5,r=5,a=($("#WatermarkDiv").scrollLeft(),$("#WatermarkDiv").scrollTop(),+$("#draggableDiv"+this.m_objectid)[0].offsetLeft),o=+$("#draggableDiv"+this.m_objectid)[0].offsetTop;if(0!=t.length){$("#draggableCanvas"+this.m_objectid),this.m_width,this.m_height;for(var h=0;h<t.length;h++){for(var n="div-"+sentimentInfo.infoID,l="txt-"+sentimentInfo.infoID,m="btn-"+sentimentInfo.infoID,c=this.m_x+200+s+a,p=this.m_y+100+r+o,g=this.m_tooltipsentiment[t[h]],d="",y=0;y<g.length;y++)d=d+"<div class='sentimentTweetDiv'><p>"+g[y]+"</p></div>";this.createDailogBox(c,p,n,l,m,d),sentimentInfo.infoID++,h>t.length-25&&(s+=5,r+=1)}}},SentimentPlotChart.prototype.createDailogBox=function(t,i,e,s,r,a){var o=this,t=o.createDiv(e,t,i,375,120),i=(t.setAttribute("class","dailogboxDiv"),t.style.background="#e2e2e2",t.style.zIndex="1000",$(".draggablesParentDiv").append(t),$("#"+e).draggable({containment:$(".draggablesParentDiv"),ghost:!0,cancel:!1,stop:function(t,i){},drag:function(t,i){}}),o.createDiv(s,1,1,348,118)),t=(i.style.fontFamily=selectGlobalFont(this.m_xAxis.m_labelfontfamily),i.style.position="absolute",i.style.fontSize=o.fontScaling(12)+"px",i.style.color="#000000",i.style.background="#FFFFFF",i.style.overflow="auto",$("#"+e).append(i),o.createDiv("headerDiv"+e,350,1,25,118)),s=(t.style.borderBottom="1px solid #cccccc",$("#"+e).append(t),o.cancelButton(r,e)),t=($("#headerDiv"+e).append(s),o.cancelAllButton());$("#headerDiv"+e).append(t),i.innerHTML=a},SentimentPlotChart.prototype.createDiv=function(t,i,e,s,r){var a=document.createElement("div");return a.setAttribute("id",t),a.style.width=s+"px",a.style.height=r+"px",a.style.position="absolute",a.style.top=e+"px",a.style.left=i+"px",a.style.borderRadius="2px",a},SentimentPlotChart.prototype.cancelButton=function(t,i){var e=document.createElement("span");return e.setAttribute("id",t),e.setAttribute("class","icon bd-close"),e.style.width="25px",e.style.height="25px",e.style.right="0px",e.style.top="5px",e.style.cursor="pointer",e.style.textAlign="center",e.style.position="absolute",e.title="Close",e.onclick=function(){$("#"+i).remove()},$(e).on("touchstart",function(t){$("#"+i).remove()}),e},SentimentPlotChart.prototype.cancelAllButton=function(){var t=document.createElement("span");return t.setAttribute("class","icon bd-delete-all"),t.value="Close All",t.style.height="25px",t.style.width="25px",t.style.right="0px",t.style.top="35px",t.style.cursor="pointer",t.style.textAlign="center",t.style.position="absolute",t.title="Close All",t.onclick=function(){$(".dailogboxDiv").remove()},$(t).on("touchstart",function(t){$(".dailogboxDiv").remove()}),t},SentimentPlotChart.prototype.closeAllInfoDlg=function(){for(var t=0;t<sentimentInfo.dialogBoxes.length;t++)sentimentInfo.dialogBoxes[t].dialog("destroy").remove();sentimentInfo.dialogBoxes.splice(0,sentimentInfo.dialogBoxes.length)},SentimentPlotChart.prototype.closeIndividualInfoDlg=function(t){for(var i=this.getDlgID(t),e=0;e<sentimentInfo.dialogBoxes.length;e++)if(this.getDlgID(sentimentInfo.dialogBoxes[e])==i){sentimentInfo.dialogBoxes.splice(e,1);break}t.dialog("destroy").remove()},SentimentPlotChart.prototype.getDlgID=function(t){var t=t[0].innerHTML,i=t.indexOf("txt-")+4,e=t.substr(i).indexOf('"');return t.substr(i,e)},SentimentPlotChart.prototype.getChartTypeNames=function(){for(var t=[],i=["point","quad","triangle","cross","cube"],e=0,s=0;e<this.getSeriesData().length;e++)"YField"==this.typeArr[e]&&""!=this.otherFieldArr[e]&&(t.push(i[s]),5==++s)&&(s=0),"XField"==this.typeArr[e]&&""!=this.otherFieldArr[e]&&(t.push(i[s]),5==++s)&&(s=0);return t},SentimentPlotChart.prototype.initializeSeriesValues=function(){for(var t=[],i=0;i<this.m_seriesData[0].length;i++){t[i]=[];for(var e=0;e<this.m_seriesData.length;e++)t[i][e]=this.m_seriesData[e][i]}this.m_seriesData=t},SentimentPlotChart.prototype.initializeCategoryValues=function(){for(var t=[],i=0;i<this.m_categoryData[0].length;i++){t[i]=[];for(var e=0;e<this.m_categoryData.length;e++)t[i][e]=this.m_categoryData[e][i]}this.m_categoryData=t},SentimentPlotChartCalculation.prototype.init=function(t,i,e){this.m_chart=t,this.m_calculation=this.m_chart.m_calculation,this.m_categoryData=i,this.m_seriesData=e,this.startX=this.m_chart.getStartX(),this.startY=this.m_chart.getStartY(),this.endX=this.m_chart.getEndX(),this.endY=this.m_chart.getEndY(),this.setXRatio(),this.setYRatio(),this.setXPixelArray(),this.setYPixelArray()},SentimentPlotChartCalculation.prototype.setXRatio=function(){this.m_xRatio=(this.endX-this.startX)/8},SentimentPlotChartCalculation.prototype.setYRatio=function(){this.m_yRatio=(this.startY-this.endY)/8},SentimentPlotChartCalculation.prototype.setXPixelArray=function(){this.m_xPixelArray=[];for(var t=0;t<this.m_categoryData.length;t++){this.m_xPixelArray[t]=[];for(var i=0;i<this.m_categoryData[t].length;i++)this.m_xPixelArray[t][i]=+this.startX+(this.m_categoryData[t][i]-+this.getMinValue())*this.m_xRatio}},SentimentPlotChartCalculation.prototype.getXPixelArray=function(){return this.m_xPixelArray},SentimentPlotChartCalculation.prototype.setYPixelArray=function(){this.m_yPixelArray=[];for(var t=0;t<this.m_seriesData.length;t++){this.m_yPixelArray[t]=[];for(var i=0;i<this.m_seriesData[t].length;i++)this.m_yPixelArray[t][i]=+this.startY-(this.m_seriesData[t][i]-+this.getMinValue())*this.m_yRatio}},SentimentPlotChartCalculation.prototype.getMinValue=function(){return 1},SentimentPlotChartCalculation.prototype.getYPixelArray=function(){return this.m_yPixelArray},SentimentShapeSeries.prototype.init=function(t,i,e,s,r,a){this.color=t,this.xPositionArray=i,this.yPositionArray=e,this.shape=s,this.plotradius=r,this.m_chart=a;for(var o=0;o<this.xPositionArray.length;o++)this.common[o]=new SentimentShape,this.common[o].init(this.color[o],this.xPositionArray[o],this.yPositionArray[o],this.shape,this.plotradius[o],this.m_chart)},SentimentShapeSeries.prototype.drawSentimentShapeSeries=function(){try{this.drawSentimentShapes(0)}catch(t){}},SentimentShapeSeries.prototype.drawSentimentShapes=function(t){for(var i=this,e=this.xPositionArray,s=t*i.m_chart.m_chunkdatalimit;s<e.length;s++){if(!(s<(t+1)*i.m_chart.m_chunkdatalimit)){setTimeout(function(){++t*i.m_chart.m_chunkdatalimit<e.length&&i.drawSentimentShapes(t)},i.m_chart.m_chunkdatatimeout);break}IsBoolean(i.checkValidPoints(this.xPositionArray[s],this.yPositionArray[s]))&&i.common[s].draw()}},SentimentShapeSeries.prototype.checkValidPoints=function(t,i){var e=this.m_chart.m_width/2-+this.m_chart.m_chartMargin,s=this.m_chart.m_height/2-+this.m_chart.m_chartMargin,r=this.m_chart.m_width/2,a=this.m_chart.m_height/2,s=s*s,e=e*e;return Math.pow(t-r,2)/e+Math.pow(i-a,2)/s<=1?!0:!1},SentimentShapeSeries.prototype.isInRange=function(t){var i=this.m_chart.getStartY(),e=this.m_chart.getEndY(),s=this.m_chart.getStartX(),r=this.m_chart.getEndX();return this.xPositionArray[t]>s&&this.xPositionArray[t]<r&&this.yPositionArray[t]<i&&this.yPositionArray[t]>e},SentimentShape.prototype.init=function(t,i,e,s,r,a){this.m_chart=a,this.ctx=this.m_chart.ctx,this.color=t,this.xPosition=i,this.yPosition=e,this.s=s,this.plotradius=r},SentimentShape.prototype.draw=function(){null==this.m_chart.m_chartbase||"plane"==this.m_chart.m_chartbase?this.drawPlainPoint():this.drawGradientPoint()},SentimentShape.prototype.drawPlainPoint=function(){this.ctx.beginPath(),this.ctx.strokeStyle="rgb(192, 192, 192)",this.ctx.fillStyle=this.color,this.ctx.arc(this.xPosition,this.yPosition,this.plotradius,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.fill(),this.ctx.closePath()},SentimentShape.prototype.drawGradientPoint=function(){this.ctx.beginPath();var t=this.getColorValue(),i=this.xPosition,e=this.yPosition,s=this.plotradius,r=this.color,a=2*s/100,o=s;try{(r=this.ctx.createRadialGradient(i-s/2,e-s/2,a,i,e,o)).addColorStop(0,this.color),r.addColorStop(1,t)}catch(t){}this.ctx.strokeStyle=this.color,this.ctx.fillStyle=r,this.ctx.arc(this.xPosition,this.yPosition,this.plotradius,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.stroke(),this.ctx.closePath()},SentimentShape.prototype.getColorValue=function(){this.color=null==this.color?"#993366":this.color;var t=ColorLuminance(rgb2hex(this.color),.6);return this.color==t?hex2rgb(this.color,.3):t};var colorPath=[[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],[[5,1,5],[5,1,4],[6,1,4],[6,1,4],[6,1,3],[6,1,3],[6,1,2],[6,1,2],[6,1,1],[6,2,1],[6,2,1],[5,2,0],[5,2,0],[4,2,0],[4,3,0],[3,3,0],[3,3,1],[2,3,1],[2,3,2],[2,3,2],[1,3,2],[1,3,2],[1,3,3],[1,3,3],[1,3,3],[1,3,4],[1,3,4],[1,3,4],[1,3,5],[1,3,5],[1,3,6],[1,3,6],[1,3,6],[2,2,6],[2,2,6],[3,2,6],[4,2,6],[4,2,6],[4,2,6],[5,1,5]],[[15,4,13],[16,4,11],[17,4,10],[17,4,9],[18,4,8],[18,4,6],[18,4,5],[18,4,4],[18,4,3],[17,5,2],[16,5,1],[15,6,1],[13,6,0],[12,7,0],[10,7,0],[9,8,0],[7,8,0],[6,9,1],[4,9,2],[3,9,4],[2,10,5],[2,10,6],[2,10,7],[1,10,8],[1,10,9],[0,10,11],[0,10,12],[0,9,14],[0,9,15],[0,9,17],[1,9,18],[1,8,19],[3,8,20],[4,7,20],[6,6,20],[8,6,19],[10,5,18],[11,5,17],[13,5,16],[14,4,14]],[[30,10,24],[32,10,21],[33,10,19],[34,10,16],[35,10,14],[35,10,12],[35,10,10],[35,10,9],[34,11,7],[32,12,6],[30,13,5],[28,13,4],[26,14,3],[23,15,3],[21,16,3],[19,17,3],[16,18,3],[14,19,4],[11,19,6],[9,20,9],[7,20,11],[6,20,13],[5,20,14],[4,21,16],[4,20,19],[3,20,21],[3,20,24],[2,20,27],[3,20,30],[3,19,32],[4,18,34],[6,18,35],[8,17,36],[10,16,37],[14,14,37],[17,13,36],[20,12,35],[23,12,33],[25,11,30],[28,11,28]],[[58,18,46],[62,17,39],[65,17,33],[67,17,29],[68,17,25],[69,17,20],[70,17,17],[69,18,13],[67,19,10],[63,21,7],[60,22,5],[55,24,3],[50,26,2],[45,28,1],[40,30,1],[36,32,1],[30,34,1],[25,35,3],[18,37,7],[13,39,10],[8,40,17],[6,40,22],[4,40,25],[3,40,29],[2,40,34],[0,40,40],[0,39,46],[0,38,52],[0,38,58],[2,36,63],[5,35,67],[8,33,69],[13,31,71],[17,30,72],[25,27,72],[32,25,70],[37,23,66],[42,22,62],[48,20,57],[53,19,52]],[[86,34,70],[92,33,61],[96,33,54],[99,32,48],[101,32,43],[102,33,37],[103,33,32],[102,34,26],[100,35,21],[96,37,17],[92,39,13],[86,42,10],[79,45,7],[72,47,6],[65,50,5],[59,52,5],[51,55,7],[44,57,10],[34,60,16],[28,61,22],[21,63,31],[17,63,38],[15,64,43],[13,63,49],[12,63,54],[10,63,63],[9,62,70],[8,62,79],[9,60,86],[12,59,93],[16,56,98],[20,54,101],[27,52,104],[33,49,105],[43,46,105],[52,43,103],[59,41,98],[66,39,92],[74,37,85],[80,35,78]],[[138,50,108],[148,48,92],[153,48,81],[157,47,71],[161,47,62],[163,47,53],[165,48,44],[164,49,34],[160,52,27],[153,55,19],[144,59,14],[134,63,9],[123,68,6],[111,72,3],[100,77,2],[91,80,2],[78,85,3],[65,89,7],[49,94,15],[37,97,26],[25,99,42],[18,100,54],[14,100,63],[11,100,72],[8,100,82],[5,100,96],[3,99,108],[2,97,123],[3,95,138],[7,92,152],[14,88,160],[23,84,166],[34,80,170],[45,75,172],[62,70,169],[77,65,164],[90,61,158],[102,58,148],[117,54,134],[128,52,122]],[[189,76,149],[201,74,129],[207,73,116],[213,73,102],[217,72,91],[220,73,80],[223,73,67],[221,75,55],[215,79,45],[205,83,35],[195,88,28],[182,94,21],[169,99,16],[153,105,13],[141,110,11],[129,114,11],[114,120,14],[98,125,19],[77,131,30],[61,135,44],[45,139,64],[36,140,81],[31,140,92],[27,140,103],[23,140,115],[19,139,131],[17,138,147],[16,136,166],[18,133,183],[23,129,200],[30,125,212],[41,120,220],[56,114,226],[70,109,229],[91,101,229],[110,95,223],[126,90,212],[140,87,200],[161,82,181],[175,78,166]],[[196,130,179],[202,129,169],[207,128,162],[211,128,154],[214,127,147],[217,127,140],[220,127,131],[222,128,122],[220,129,112],[216,132,104],[210,135,97],[202,139,89],[193,143,84],[182,147,80],[176,150,78],[169,152,78],[158,156,81],[150,158,85],[132,164,96],[120,166,108],[109,169,123],[102,169,135],[99,170,143],[96,170,152],[93,170,159],[92,169,169],[92,168,180],[91,167,190],[93,165,199],[98,162,208],[104,159,213],[113,155,218],[123,151,220],[132,148,221],[144,144,220],[153,141,217],[163,138,214],[170,136,209],[183,132,197],[190,131,188]],[[226,187,226],[229,187,222],[231,187,219],[233,186,215],[232,187,213],[236,186,208],[238,186,203],[240,186,199],[242,186,191],[243,187,181],[242,188,173],[238,191,165],[233,193,160],[227,196,157],[222,198,155],[218,199,154],[212,201,156],[205,203,158],[192,207,168],[182,209,178],[174,211,189],[170,211,197],[167,211,204],[166,211,210],[165,211,215],[165,210,221],[165,209,229],[167,208,234],[171,206,239],[176,204,242],[182,201,244],[186,200,245],[193,197,245],[197,196,245],[203,193,244],[208,192,243],[211,191,242],[214,190,240],[220,189,234],[223,188,230]],[[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255]]];
//# sourceMappingURL=SentimentPlotChart.min.js.map