/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function MixedChart(t,i){this.base=Chart,this.base(),this.m_x=680,this.m_y=20,this.m_width=300,this.m_height=260,this.m_radius=2,this.m_lineSeries={},this.m_columnSeries={},this.m_colorNames=[],this.m_pointSeries={},this.m_valueTextSeries={},this.m_categoryNames=[],this.m_seriesNames=[],this.m_seriesarr=[],this.m_categoryData=[],this.m_seriesData=[],this.m_alertData=[],this.m_yPositionArray=[],this.m_xAxis=new Xaxis,this.m_yAxis=new Yaxis,this.noOfRows=1,this.m_chartContainer=t,this.m_zIndex=i,this.m_mixedCalculation="",this.m_yaxisArr=[],this.m_marginXArray=[],this.count=0,this.m_showrangeselector="true",this.isSeriesValueWithComma=!1,this.m_charttype="clustered",this.m_barsize=60,this.enableDrillHighlighter=!1,this.m_drilltoggle=!0,this.m_showannotation=!1,this.m_showyannotation=!1,this.m_showxannotation=!1,this.m_annotationradius="3",this.m_annotationshape="point",this.m_annotationcolor="#7F00FF",this.m_annotationtextcolor="#CF9FFF",this.m_annotationseriescolor=!1,this.m_annotationopacity="1",this.m_annotationData=[],this.m_annotationXData=[],this.m_annotationXData2=[],this.m_annotationNames=[],this.m_annotationdatatype="number",this.m_annotationformat="year",this.m_annotationTooltip="default;",this.m_showannotationTooltip=!1,this.m_annotationtooltiptitle="Annotation",this.m_linetype=!1,this.m_showyaxisthreshold=!1,this.m_minimumyaxisthreshold="0",this.m_maximumyaxisthreshold="50",this.m_yaxisthresholdlinewidth="1",this.m_yaxisthresholdstrokecolor="#000000",this.m_minimumthresholdstrokecolor="#00FF00",this.m_maximumthresholdstrokecolor="#FF0000",this.m_thresholdlinetype="straight",this.m_minimumyaxisthresholdline=!0,this.m_enablethresholdfill=!1,this.m_fillBelowLowerThreshold="#ffea00",this.m_fillBetweenThreshold="#00FF00",this.m_fillAboveUpperThreshold="#ff0000",this.m_thresholdfillcolor="#ffea00,#00FF00,#ff0000",this.m_thresholdfilllevel="low,middle,top",this.m_thresholdfillopacity="0.3,0.3,0.3",this.m_thresholdfilllabel="Low,Middle,Top",this.m_thresholdfilllabelcolor="#000000,#000000,#000000",this.m_fillBelowThresholdOpacity=.3,this.m_fillBetweenThresholdOpacity=.3,this.m_fillUpperThresholdOpacity=.3,this.m_BelowThresholdLabel="Low",this.m_BetweenThresholdLabel="Middle",this.m_UpperThresholdLabel="Top",this.m_BelowThresholdLabelColor="#000000",this.m_BetweenThresholdLabelColor="#000000",this.m_UpperThresholdLabelColor="#000000"}function MixedCalculation(){this.startX,this.startY,this.endX,this.endY,this.marginX,this.xAxisData=[],this.yAxisData=[],this.xPositionMap={},this.yPositionMap={},this.heightMap={},this.columnWidthMap={},this.columnGapeMap={},this.basePoint="",this.columnWidth="",this.columnGap=""}function MixedColumns(){this.m_xPixel=[],this.m_yPixelArray=[],this.m_stackHeightArray=[],this.m_stackColorArray=[],this.m_svgStackArray=[],this.m_transparency="",this.m_strokeColor="",this.m_showGradient="",this.m_ySeriesData=[],this.m_valueOnDataPoints}function MixedLines(){this.color,this.width,this.xPositionArray=[],this.yPositionArray=[],this.line=[],this.ctx="",this.m_chart="",this.seriesName=""}function MixedPoints(){this.color,this.radius,this.xPositionArray=[],this.yPositionArray=[],this.point=[],this.ctx="",this.m_chart=""}function MixAnnotSeries(){this.color,this.radius,this.xPositionArray=[],this.yPositionArray=[],this.point=[],this.ctx="",this.m_chart=""}MixedChart.prototype=new Chart,MixedChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},MixedChart.prototype.ParseJsonAttributes=function(t,i){for(var s in this.chartJson=t)if("Chart"==s)for(var e in t[s])switch(e){case"xAxis":for(var a in t[s][e]){var r=this.getNodeAttributeName(a);i.m_xAxis[r]=t[s][e][a]}break;case"yAxis":for(var o in t[s][e]){var r=this.getNodeAttributeName(o);i.m_yAxis[r]=t[s][e][o]}break;case"Title":for(var h in t[s][e]){var r=this.getNodeAttributeName(h);i.m_title[r]=t[s][e][h]}break;case"SubTitle":for(var n in t[s][e]){r=this.getNodeAttributeName(n);i.m_subTitle[r]=t[s][e][n]}break;case"CategoryColors":var m,l=new CategoryColors;for(m in this.setCategoryColors(l),t[s][e])if("CategoryColor"===m){var _=this.getArrayOfSingleLengthJson(t[s][e][m]);l.cateogryNameColorMap=new Object;for(var c=0;c<_.length;c++){var d,y=new CategoryColor;for(d in l.setCategoryColor(y),_[c])y[r=this.getNodeAttributeName(d)]=_[c][d];l.cateogryNameColorMap[y.getCategoryName()]=y.getColor()}}else{r=this.getNodeAttributeName(m);i.m_categoryColors[r]=t[s][e][m]}l.setCategoryDefaultColorSet();break;case"ConditionalColors":if(""!=t[s][e])for(var x=new ConditionalColors,g=(this.setConditionalColors(x),this.getArrayOfSingleLengthJson(t[s][e].ConditionalColor)),c=0;c<g.length;c++){var u,p=new ConditionalColor;for(u in x.setConditionalColor(p),g[c])p[r=this.getNodeAttributeName(u)]=g[c][u]}break;default:i[r=this.getNodeAttributeName(e)]=t[s][e]}else i[r=this.getNodeAttributeName(s)]=t[s]},MixedChart.prototype.setFields=function(t){try{t=getDuplicateArray(t),sortAscArrayOfJsonByKey(t,"ChartType")}catch(t){}for(var i=[],s=[],e=[],a=(this.m_fieldsJson=t).length,r=0;r<a;r++)switch(this.getProperAttributeNameValue(t[r],"Type")){case"Category":i.push(t[r]);break;case"Series":s.push(t[r]);break;case"Annotation":e.push(t[r]);break;case"CalculatedField":s.push(t[r])}this.setCategory(i),this.setSeries(s),this.setAnnotation(e)},MixedChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryFieldColor=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_categoryVisibleArr={};for(var i=0,s=t.length,e=0;e<s;e++){this.m_allCategoryNames[e]=this.getProperAttributeNameValue(t[e],"Name");var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allCategoryDisplayNames[e]=a,this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]])&&(this.m_categoryNames[i]=this.getProperAttributeNameValue(t[e],"Name"),this.m_categoryDisplayNames[i]=a,this.m_categoryFieldColor[i]=this.getProperAttributeNameValue(t[e],"Color"),i++)}},MixedChart.prototype.setSeries=function(t){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors={},this.m_legendNames=[],this.m_seriesVisibleArr={},this.m_plotRadiusArray={},this.m_plotTrasparencyArray={},this.m_plotShapeArray={},this.m_allSeriesDisplayNames=[],this.m_allSeriesNames=[],this.m_seriesDisplayNamesMap={},this.m_seriesDataLabelProperty={},this.m_lineWidthArray={},this.m_lineTypeArray={};for(var i=0,s=(this.legendMap={},this.m_seriesAxis=[],this.m_seriesChartType=[],this.m_LegendColors=[],t.length),e=0;e<s;e++){var a=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allSeriesDisplayNames[e]=a,this.m_allSeriesNames[e]=this.getProperAttributeNameValue(t[e],"Name"),this.m_seriesVisibleArr[this.m_allSeriesNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),IsBoolean(this.m_seriesVisibleArr[this.m_allSeriesNames[e]])&&(this.m_seriesDisplayNames[i]=a,this.m_legendNames[i]=a,this.m_seriesNames[i]=this.getProperAttributeNameValue(t[e],"Name"),this.m_seriesDisplayNamesMap[this.m_seriesNames[i]]=a,this.m_seriesColors[this.m_seriesNames[i]]=convertColorToHex(this.getProperAttributeNameValue(t[e],"Color")),this.m_LegendColors[i]=convertColorToHex(this.getProperAttributeNameValue(t[e],"Color")),a=this.getProperAttributeNameValue(t[e],"axis"),this.m_seriesAxis[i]=IsBoolean(this.m_secondaryaxisshow)?a:"left",this.m_seriesChartType[i]=this.getProperAttributeNameValue(t[e],"ChartType"),this.m_seriesDataLabelProperty[this.m_seriesNames[i]]=this.getProperAttributeNameValue(t[e],"DataLabelCustomProperties"),void 0!==this.m_seriesDataLabelProperty[this.m_seriesNames[i]]?(IsBoolean(this.m_seriesDataLabelProperty[this.m_seriesNames[i]].useFieldColor)&&(this.m_seriesDataLabelProperty[this.m_seriesNames[i]].dataLabelFontColor=this.m_seriesColors[this.m_seriesNames[i]]),IsBoolean(this.m_seriesDataLabelProperty[this.m_seriesNames[i]].dataLabelUseComponentFormater)&&(IsBoolean("left"==this.m_seriesAxis[i])?(this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterCurrency=this.m_unit,this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterPrecision=this.m_precision,this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterPosition=this.m_signposition,this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterUnit=this.m_secondaryunit):(this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterCurrency=this.m_secondaryaxisunit,this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterPrecision=this.m_secondaryaxisprecision,this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterPosition=this.m_secondaryaxissignposition,this.m_seriesDataLabelProperty[this.m_seriesNames[i]].datalabelFormaterUnit=this.m_secondaryaxissecondaryunit))):this.m_seriesDataLabelProperty[this.m_seriesNames[i]]=this.getDataLabelProperties(),a=this.getProperAttributeNameValue(t[e],"PlotRadius"),this.m_plotRadiusArray[this.m_seriesNames[i]]=null!=a&&null!==a&&""!==a?a:3,a=this.getProperAttributeNameValue(t[e],"LineWidth"),this.m_lineWidthArray[this.m_seriesNames[i]]=null!=a&&null!==a&&""!==a?a:2,a=this.getProperAttributeNameValue(t[e],"LineType"),this.m_lineTypeArray[this.m_seriesNames[i]]=null!=a&&null!==a&&""!==a?a:"simple",a=this.getProperAttributeNameValue(t[e],"PlotTransparency"),this.m_plotTrasparencyArray[this.m_seriesNames[i]]=null!=a&&null!==a&&""!==a?a:1,a=this.getProperAttributeNameValue(t[e],"PlotType"),this.m_plotShapeArray[this.m_seriesNames[i]]=null!=a&&null!==a&&""!==a?"line"==this.m_seriesChartType[i]?a:"cube":"point",a={seriesName:this.m_seriesNames[i],displayName:this.m_seriesDisplayNames[i],color:this.m_seriesColors[this.m_seriesNames[i]],shape:this.m_plotShapeArray[this.m_seriesNames[i]],axisType:this.m_seriesAxis[i],index:i},this.legendMap[this.m_seriesNames[i]]=a,i++)}this.setLegendsIntialLoad(this.m_defaultlegendfields)},MixedChart.prototype.setAnnotation=function(t){var i=this,s=(i.m_annotationNames={text:[],category:[]},i.m_annotationDisplayNames={text:[],category:[]},i.m_allAnnotationNames={text:[],category:[]},i.m_allAnnotationDisplayNames={text:[],category:[]},i.m_annotationVisibleArr={text:{},category:{}},{text:0,category:0});if(IsBoolean(this.m_designMode))for(var e=0,a=t.length;e<a;e++)"text"===i.getProperAttributeNameValue(t[e],"SeriesType")&&(r=i.getProperAttributeNameValue(t[e],"Name"),h=i.formattedDescription(this,i.getProperAttributeNameValue(t[e],"DisplayName")),i.m_allAnnotationNames.text[e]=r,i.m_allAnnotationDisplayNames.text[e]=h,i.m_annotationVisibleArr.text[h]=i.getProperAttributeNameValue(t[e],"visible"),IsBoolean(i.m_annotationVisibleArr.text[h]))&&(i.m_annotationNames.text[s.text]=r,i.m_annotationDisplayNames.text[s.text]=h,s.series++),"category"===i.getProperAttributeNameValue(t[e],"SeriesType")&&(o=i.getProperAttributeNameValue(t[e],"Name"),h=i.formattedDescription(this,i.getProperAttributeNameValue(t[e],"DisplayName")),i.m_allAnnotationNames.category[e]=o,i.m_allAnnotationDisplayNames.category[e]=h,i.m_annotationVisibleArr.category[h]=i.getProperAttributeNameValue(t[e],"visible"),IsBoolean(i.m_annotationVisibleArr.category[h]))&&(i.m_annotationNames.category[s.category]=o,i.m_annotationDisplayNames.category[s.category]=h,s.category++);else{var r,o,h,n=i.chartJson.Chart.Annotation;null!=n&&(r=n.DataLabel,h=n.DataLabel,i.m_allAnnotationNames.text[0]=r,i.m_allAnnotationDisplayNames.text[0]=h,i.m_annotationVisibleArr.text[h]=!0,IsBoolean(i.m_annotationVisibleArr.text[h])&&(i.m_annotationNames.text[s.text]=r,i.m_annotationDisplayNames.text[s.text]=h,s.series++),o=n.DataValue,h=n.DataValue,i.m_allAnnotationNames.category[0]=o,i.m_allAnnotationDisplayNames.category[0]=h,i.m_annotationVisibleArr.category[h]=!0,IsBoolean(i.m_annotationVisibleArr.category[h]))&&(i.m_annotationNames.category[s.category]=o,i.m_annotationDisplayNames.category[s.category]=h,s.category++)}},MixedChart.prototype.getLegendInfo=function(){return this.legendMap},MixedChart.prototype.setSeriesColor=function(t){this.m_seriesColor=t},MixedChart.prototype.setLegendNames=function(t){this.m_legendNames=t},MixedChart.prototype.setCategorySeriesData=function(){this.m_categoryData=[],this.m_seriesData=[],this.m_seriesDataForToolTip=[],this.m_displaySeriesDataFlag=[],this.m_transparencyarr={};for(var t=0,i=this.getDataProvider().length;t<i;t++){var s=this.getDataProvider()[t];if(this.isEmptyCategory=!0,0<this.getCategoryNames().length){this.isEmptyCategory=!1;for(var e=0;e<this.getCategoryNames().length;e++){this.m_categoryData[e]||(this.m_categoryData[e]=[]);var a="";null!=s[o=this.getCategoryNames()[e]]&&"undefined"!=s[o]&&(a=s[o]),this.m_categoryData[e][t]=a}}this.m_displaySeriesDataFlag[t]=[];for(var r=0;r<this.getSeriesNames().length;r++){this.m_seriesData[r]||(this.m_seriesData[r]=[],this.m_seriesDataForToolTip[r]=[],this.m_transparencyarr[this.getSeriesNames()[r]]=[]);var o,a="";null!=s[o=this.getSeriesNames()[r]]&&"undefined"!=s[o]&&(a=s[o]),this.m_displaySeriesDataFlag[t][r]=!0,isNaN(a)&&(this.m_displaySeriesDataFlag[t][r]=!1,a=getNumericComparableValue(a)),this.m_seriesData[r][t]=a,this.m_seriesDataForToolTip[r][t]=a,this.m_transparencyarr[this.getSeriesNames()[r]][t]=this.m_plotTrasparencyArray[this.getSeriesNames()[r]]}}if(this.m_annotationData=[],IsBoolean(this.m_designMode)){if(0<this.m_annotationNames.text.length)for(var h=this.m_annotationNames.text,n=this.getDataFromJSON(this.m_annotationNames.text[0]),e=0;e<n.length;e++)this.m_annotationData.push({type:"event",label:n[e],point:h[e],property:{color:"red",radius:10}});if(0<this.m_annotationNames.category.length){if(this.m_annotationXData=[],null!=this.m_annotationNames.category[0])for(var m=this.getDataFromJSON(this.m_annotationNames.category[0]),e=0;e<m.length;e++)"null"==m[e]&&""==m[e]&&null==m[e]||this.m_annotationXData.push({type:"event",label:this.m_annotationData[e].label,point:m[e],property:{color:"red",radius:10}});if(this.m_annotationXData2=[],null!=this.m_annotationNames.category[1])for(m=this.getDataFromJSON(this.m_annotationNames.category[1]),e=0;e<m.length;e++)"null"==m[e]&&""==m[e]&&null==m[e]||this.m_annotationXData2.push({type:"event",label:this.m_annotationData[e],point:m[e],property:{color:"red",radius:10}})}}else{var l=this.chartJson.Chart.Annotation,l=null!=l?l.DataSourceId:"",_=[];if(""!=l&&(_=sdk.getConnection(l).m_wholeData),0<this.m_annotationNames.text.length){h=this.m_annotationNames.text;if(_&&0<_.length)for(n=_.map(t=>null===t[h]||void 0===t[h]||"null"===t[h]?"No label":t[h]),e=0;e<n.length;e++)this.m_annotationData.push({type:"event",label:n[e],point:h[e],property:{color:"red",radius:10}})}if(0<this.m_annotationNames.category.length){if(this.m_annotationXData=[],null!=this.m_annotationNames.category[0]&&_&&0<_.length&&""!=this.m_annotationNames.category[0])for(m=_.map(t=>t[this.m_annotationNames.category[0]]),e=0;e<m.length;e++)"null"==m[e]&&""==m[e]&&null==m[e]||this.m_annotationXData.push({type:"event",label:this.m_annotationData[e].label,point:m[e],property:{color:"red",radius:10}});if(this.m_annotationXData2=[],null!=this.m_annotationNames.category[1])for(m=_.map(t=>t[this.m_annotationNames.category[1]]),e=0;e<m.length;e++)"null"==m[e]&&""==m[e]&&null==m[e]||this.m_annotationXData2.push({type:"event",label:this.m_annotationData[e],point:m[e],property:{color:"red",radius:10}})}}},MixedChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0;t<this.getAllCategoryNames().length;t++)this.m_allfieldsName.push(this.getAllCategoryNames()[t]);for(var i=0;i<this.getAllSeriesNames().length;i++)this.m_allfieldsName.push(this.getAllSeriesNames()[i])},MixedChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var t=0;t<this.getCategoryDisplayNames().length;t++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[t]);for(var i=0;i<this.getSeriesDisplayNames().length;i++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[i])},MixedChart.prototype.setColorsForSeries=function(){this.m_seriesColorsArray={},this.m_PointsColorsArray={};for(var t=!0,i=0;i<this.m_categoryData.length&&t;i++)t=Array.isArray(this.m_categoryData[i])&&0===this.m_categoryData[i].length;if(IsBoolean(this.m_enablecolorfromdrill)&&IsBoolean(this.m_startDrill))for(var s=this.m_seriesData.length,i=0;i<s;i++){this.m_seriesColorsArray[this.m_seriesNames[i]]=[],this.m_PointsColorsArray[this.m_seriesNames[i]]=[];for(var e=this.m_seriesData[i].length,a=0;a<e;a++)this.m_seriesColorsArray[this.m_seriesNames[i]][a]=this.m_drillColor,this.m_PointsColorsArray[this.m_seriesNames[i]][a]=this.m_drillColor}else if(!IsBoolean(this.m_designMode)&&""!=this.getCategoryColors()&&0<this.getCategoryColors().getCategoryColor().length&&IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName()))for(var r=this.getSeriesColors(),o=this.getCategoryColors().getCategoryColorsForCategoryNames(this.getCategoryData()[0],this.m_categoryFieldColor),s=this.m_seriesData.length,i=0;i<s;i++){this.m_seriesColorsArray[this.m_seriesNames[i]]=[],this.m_PointsColorsArray[this.m_seriesNames[i]]=[];for(e=this.m_seriesData[i].length,a=0;a<e;a++)this.m_seriesColorsArray[this.m_seriesNames[i]][a]=r[this.m_seriesNames[i]],this.m_PointsColorsArray[this.m_seriesNames[i]][a]=o[a]}else if(IsBoolean(this.m_designMode)||""==this.getCategoryColors()||IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName())&&0!=this.getCategoryColors().getCategoryColor().length||""==this.getConditionalColors()||null==this.getConditionalColors()||!(0<this.getConditionalColors().getConditionalColor().length)||IsBoolean(t))for(r=this.getSeriesColors(),s=this.m_seriesData.length,i=0;i<s;i++){this.m_seriesColorsArray[this.m_seriesNames[i]]=[],this.m_PointsColorsArray[this.m_seriesNames[i]]=[];for(e=this.m_seriesData[i].length,a=0;a<e;a++)this.m_seriesColorsArray[this.m_seriesNames[i]][a]=r[this.m_seriesNames[i]],this.m_PointsColorsArray[this.m_seriesNames[i]][a]=r[this.m_seriesNames[i]]}else for(var h=this.getConditionalColors().getConditionalColorsForConditionsForMixedTime(this.getSeriesNames(),this.getSeriesColors(),this.m_seriesData,this),r=this.getSeriesColors(),s=this.m_seriesData.length,i=0;i<s;i++){this.m_seriesColorsArray[this.m_seriesNames[i]]=[],this.m_PointsColorsArray[this.m_seriesNames[i]]=[];for(var e=this.m_seriesData[i].length,a=0;a<e;a++)this.m_seriesColorsArray[this.m_seriesNames[i]][a]=r[this.m_seriesNames[i]],this.m_PointsColorsArray[this.m_seriesNames[i]][a]=h[this.m_seriesNames[i]][a]}},MixedChart.prototype.getDataProvider=function(){return this.m_dataProvider},MixedChart.prototype.getAllSeriesNames=function(){return this.m_allSeriesNames},MixedChart.prototype.getAllCategoryNames=function(){return this.m_allCategoryNames},MixedChart.prototype.getCategoryNames=function(){return this.m_categoryNames},MixedChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},MixedChart.prototype.getSeriesNames=function(){return this.m_seriesNames},MixedChart.prototype.getSeriesNames=function(){return this.m_seriesNames},MixedChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},MixedChart.prototype.getLegendColors=function(){return this.m_LegendColors},MixedChart.prototype.getLegendTableContent=function(){for(var t="",i=0;i<this.getLegendNames().length;i++){var s=this.legendMap[this.m_seriesNames[i]].shape,s=this.getHTMLShape(s);t+='<tr style="font-style:'+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'"><td>'+this.drawLegendShape(s,this.getLegendColors()[i])+'<span style="display:inline;">'+this.getLegendNames()[i]+"</span></td></tr>"}return t},MixedChart.prototype.getSeriesColors=function(){return this.m_seriesColors},MixedChart.prototype.getLegendNames=function(){return this.m_legendNames},MixedChart.prototype.getDataFromJSON=function(t){for(var i=[],s=this.getDataProvider(),e=this.getDataProvider().length,a=0;a<e;a++)null==s[a][t]?i[a]="":i[a]=s[a][t];return i},MixedChart.prototype.getCategoryData=function(){return this.m_categoryData},MixedChart.prototype.getSeriesData=function(){return this.m_seriesData},MixedChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},MixedChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},MixedChart.prototype.getColorsForSeries=function(){return this.m_seriesColorsArray},MixedChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},MixedChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEvent()},MixedChart.prototype.init=function(){this.setCategorySeriesData(),this.setAllFieldsName(),this.setAllFieldsDisplayName(),this.setColorsForSeries(),this.isSeriesDataEmpty(),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),IsBoolean(this.m_isEmptySeries)||!IsBoolean(this.isVisibleSeries())||IsBoolean(this.isEmptyCategory)||(this.registerDataInMap(),this.registerDateInMapForSeriesIndex(),this.updateDataforHundred(this.seriesDataMap),this.calculateMinMax(),this.initializeCalculationClass(),this.initializeYAxis(),this.instanciateSeries(this.seriesDataMap)),this.initializeToolTipProperty(),this.m_tooltip.init(this)},MixedChart.prototype.registerDateInMapForSeriesIndex=function(){this.seriesDataMapForIndex={},this.seriesIndexMap={};for(var t=0,i=(this.seriesDataMapForIndex={line:{left:{},right:{}},column:{left:{},right:{}}},this.seriesIndexMap={left:{column:{},line:{}},right:{column:{},line:{}}},this.m_seriesNames.length),s=0;s<i;s++)this.m_seriesVisibleArr[this.m_seriesNames[s]]&&(this.seriesDataMapForIndex[this.m_seriesChartType[s]][this.m_seriesAxis[s]][this.m_seriesNames[s]]=this.m_seriesData[s],this.seriesIndexMap[this.m_seriesAxis[s]][this.m_seriesChartType[s]][this.m_seriesNames[s]]={seriesIndex:t++})},MixedChart.prototype.registerDataInMap=function(){this.seriesDataMap={},this.seriesDataMap={left:{column:{},line:{}},right:{column:{},line:{}}};for(var t=this.m_seriesNames.length,i=0;i<t;i++)this.m_seriesVisibleArr[this.m_seriesNames[i]]&&(this.seriesDataMap[this.m_seriesAxis[i]][this.m_seriesChartType[i]][this.m_seriesNames[i]]=this.m_seriesData[i])},MixedChart.prototype.updateDataforHundred=function(t){this.changedDataMap=getDuplicateObject(t),this.m_actualseriesdatamap=getDuplicateObject(t),"100%"==this.m_charttype&&(this.changedDataMap.left.column=$.isEmptyObject(this.changedDataMap.left.column)?this.changedDataMap.left.column:this.getUpdatedData(this.changedDataMap.left.column),this.changedDataMap.right.column=$.isEmptyObject(this.changedDataMap.right.column)?this.changedDataMap.right.column:this.getUpdatedData(this.changedDataMap.right.column))},MixedChart.prototype.getUpdatedData=function(t){var i,s=[],e=[];for(i in t)"unique"!=i&&"contains"!=i&&(s.push(i),e.push(t[i]));for(var a=this.getUpdateSeriesDataWithCategory(e),r=this.arrengeDataforHundred(a,e),o={},h=0;h<s.length;h++)o[s[h]]=r[h];return o},MixedChart.prototype.arrengeDataforHundred=function(t,i){for(var s=t,e=(this.m_SeriesDataInPerForHundredChart,[]),a=0,r=s.length;a<r;a++){var o=this.getArraySUM(s[a]);e[a]=[];for(var h=0,n=s[a].length;h<n;h++)""===s[a][h]||isNaN(s[a][h])?e[a][h]=0:e[a][h]=s[a][h]/o*100}if(0<e.length)return this.m_SeriesDataInPerForHundredChart=this.getUpdateSeriesDataForHundredPercentageChart(e,i),this.m_SeriesDataInPerForHundredChart},MixedChart.prototype.getArraySUM=function(t){for(var i=0,s=0,e=t.length;s<e;s++)t[s]<0&&(t[s]=-1*t[s]),isNaN(t[s])||(i=+i+ +t[s]);return i},MixedChart.prototype.getUpdateSeriesDataWithCategory=function(t){for(var i=[],s=0,e=t[0].length;s<e;s++){i[s]=[];for(var a=0,r=t.length;a<r;a++)i[s][a]=t[a][s]}return i},MixedChart.prototype.getUpdateSeriesDataForHundredPercentageChart=function(t,i){for(var s=[],e=0,a=t[0].length;e<a;e++){s[e]=[];for(var r=0,o=t.length;r<o;r++)s[e][r]=t[r][e]}for(e=0,a=i.length;e<a;e++)for(r=0,o=i[e].length;r<o;r++)isNaN(i[e][r])||+i[e][r]<0&&(s[e][r]=-1*s[e][r]);return s},MixedChart.prototype.calculateMinMax=function(){var t=this.getAxisData(this.seriesDataMap.left),i=this.getAxisData(this.seriesDataMap.right);this.leftAxisInfo=this.getAxisInfo("left",t),this.rightAxisInfo=this.getAxisInfo("right",i),this.manageLeftRightMarker(this.leftAxisInfo,this.rightAxisInfo)},MixedChart.prototype.manageLeftRightMarker=function(t,i){if(1<t.markerarray.length&&1<i.markerarray.length&&t.markerarray.length!==i.markerarray.length)if(t.markerarray.length>i.markerarray.length){for(var s=t.markerarray.length-i.markerarray.length,e=0;e<s;e++)i.markerarray.push(i.max+i.markertext),i.max=i.max+i.markertext;this.rightAxisInf=i}else{for(s=i.markerarray.length-t.markerarray.length,e=0;e<s;e++)t.markerarray.push(t.max+t.markertext),t.max=t.max+t.markertext;this.leftAxisInfo=t}},MixedChart.prototype.getAxisData=function(t){var i,s=[],e=[],a=[];for(i in t)for(var r in t[i])"unique"!=r&&"contains"!=r&&(a.push(t[i][r]),"line"==i&&s.push(t[i][r]),"column"==i)&&e.push(t[i][r]);return{all:a,line:s,column:e}},MixedChart.prototype.getAxisInfo=function(t,i){var s,e,a,r,o,h;return 0<i.all.length?(s="left"==t?this.m_basezero:this.m_secondaxisbasezero,e="left"==t?this.m_autoaxissetup:this.m_secondaxisautosetup,a="left"==t?this.m_minimumaxisvalue:this.m_secondaxisminimumvalue,r="left"==t?this.m_maximumaxisvalue:this.m_secondaxismaximumvalue,o=(h=("stacked"==this.m_charttype||"100%"==this.m_charttype)&&0<i.column.length?(h=0<i.line.length?this.calculateMinMaxValue(i.line):{min:"",max:""},o=this.calculateStackMinMaxValue(i.column),{min:(""!==h.min&&h.min<o.min?h:o).min,max:(""!==h.max&&h.max>o.max?h:o).max}):this.calculateMinMaxValue(i.all)).min,i=h.max,{max:(h=this.getCalculateNiceScale(o,i,s,e,a,r,this.m_height,t)).max,min:h.min,noofmarker:h.markerArray.length,markertext:h.step,markerarray:h.markerArray}):{max:"",min:"",noofmarker:"",markertext:"",markerarray:""}},MixedChart.prototype.getSeriesInfo=function(t){var i,s=this.seriesDataMap;for(i in s)for(var e in s[i])for(var a in s[i][e])if(t==a)return{axis:i,chart:e,data:s[i][e][a]}},MixedChart.prototype.calculateStackMinMaxValue=function(t){var i=isNaN(+t[0][0])?0:+t[0][0],s=isNaN(+t[0][0])?0:+t[0][0],e=t[0].length;if("stacked"==this.m_charttype)for(var a=0,r=0;a<e;a++){for(var o=0,h=0,n=t.length,m=0;m<n;m++)r++,+t[m][a],isNaN(+t[m][a])||(0<+t[m][a]?o=+o+ +t[m][a]:h=+t[m][a]+ +h);i<=o&&(i=+o),+h<s&&(s=+h)}if("100%"==this.m_charttype){for(var l=!1,a=0,_=t.length;a<_;a++)for(var m=0,c=t[a].length;m<c;m++)if(t[a][m]<0){l=!0;break}i=100,s=IsBoolean(l)?-100:0}return{min:s,max:i}},MixedChart.prototype.instanciateSeries=function(t){var i;for(key in t)for(var s in t[key])for(var e in t[key][s])"unique"!=e&&"contains"!=e&&("column"==s?("clustered"==this.m_charttype&&(this.m_mixedCalculation.columnWidthMap[e]=this.m_mixedCalculation.columnWidthMap[e]*this.clusteredbarpadding),this.m_columnSeries[e]=new MixedColumns,this.m_columnSeries[e].init(this.m_PointsColorsArray[e],this.m_mixedCalculation.getXPositionArray(e),this.m_mixedCalculation.getYPositionArray(e),this.m_mixedCalculation.getHeightArray(e),this.m_mixedCalculation.columnWidthMap[e]/this.m_mixedCalculation.totalColumn,this.m_strokecolor,this.m_showgradient,this,this.m_transparencyarr[e],this.m_mixedCalculation.seriesDataMap[key][s][e])):(this.m_lineSeries[e]=new MixedLines,this.m_lineSeries[e].init(this.getColorsForSeries()[e],this.m_mixedCalculation.getXPositionArray(e),this.m_mixedCalculation.getYPositionArray(e),this.m_linewidth,this,1,e,this.m_lineWidthArray[e],this.m_lineTypeArray[e]),!this.getShowPoint()&&1!=this.m_mixedCalculation.xAxisData.length||(this.m_pointSeries[e]=new MixedPoints,this.m_pointSeries[e].init(this.m_PointsColorsArray[e],this.m_plotRadiusArray[e],this.m_mixedCalculation.getXPositionArray(e),this.m_mixedCalculation.getYPositionArray(e),this,this.m_transparencyarr[e],this.m_plotShapeArray[e]))),IsBoolean(this.m_seriesDataLabelProperty[e].showDataLabel))&&(this.setSeriesDataLabel(e),i=("100%"==this.m_charttype?this.m_actualseriesdatamap:this.m_mixedCalculation.seriesDataMap)[key][s][e],this.m_valueTextSeries[e]=new ValueTextSeries,this.m_valueTextSeries[e].init(this.m_mixedCalculation.getXPositionArray(e),this.m_mixedCalculation.getYPositionArray(e),this,this.m_seriesDataForDataLabel[e],this.m_seriesDataLabelProperty[e],i,this.m_mixedCalculation.columnWidthMap[e]/this.m_mixedCalculation.totalColumn,this.m_mixedCalculation.heightMap[e],s))},MixedChart.prototype.setSeriesDataLabel=function(t){this.m_seriesDataForDataLabel={};for(var i=0,s=this.getDataProvider().length;i<s;i++){var e=this.getDataProvider()[i],e=(this.m_seriesDataForDataLabel[t]||(this.m_seriesDataForDataLabel[t]=[]),this.getValidFieldDataFromRecord(e,this.m_seriesDataLabelProperty[t].datalabelField));this.m_seriesDataForDataLabel[t][i]=e}},MixedChart.prototype.initializeCalculationClass=function(){this.m_annotationSeries={},this.m_radius=this.m_lineWidthArray,this.m_mixedCalculation=new MixedCalculation,this.setChartDrawingArea(),this.m_mixedCalculation.init(this,this.m_seriesData,0,this.m_categoryData,this.changedDataMap),this.setThresholdFillColors()},MixedChart.prototype.initializeYAxis=function(){this.m_yAxis.init(this,this.m_mixedCalculation),this.m_xAxis.init(this,this.m_mixedCalculation)},MixedChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.drawLegends();var t=this.IsDrawingPossible();IsBoolean(t.permission)?(this.drawXAxis(),this.drawYAxis(),this.drawMixedSeries(),IsBoolean(this.m_showannotation)&&(0<this.m_annotationXData.length||0<this.m_annotationxdata.length?(0<this.m_annotationxdata.length&&(this.m_annotationXData=this.m_annotationxdata),this.drawAnnotationChart()):this.drawMessage(this.m_status.noAnnotationValue)),this.drawDataLabel(),this.drawThreshold()):this.drawMessage(t.message)},MixedChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawFrame()},MixedChart.prototype.drawTitle=function(){this.m_title.draw()},MixedChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},MixedChart.prototype.drawXAxis=function(){this.m_xAxis.drawTickMarks(),this.m_xAxis.drawVerticalLine(),this.m_xAxis.markXaxis(),this.m_xAxis.drawXAxis()},MixedChart.prototype.drawYAxis=function(){IsBoolean(this.m_showmarkerline)&&this.m_yAxis.horizontalMarkerLines(),IsBoolean(this.m_zeromarkerline)&&!IsBoolean(this.m_basezero)&&IsBoolean(this.m_yAxis.hasNegativeAxisMarker(this.m_yAxis.m_yAxisMarkersArray))&&this.m_yAxis.zeroMarkerLine(),0<this.leftAxisInfo.markerarray.length&&(this.m_yAxis.markYaxis(),this.m_yAxis.drawYAxis()),IsBoolean(this.m_secondaryaxisshow)&&0<this.rightAxisInfo.markerarray.length&&this.drawSecondaryAxis()},MixedChart.prototype.drawSecondaryAxis=function(){this.m_yAxis.secondaryAxisInit(this.m_mixedCalculation),this.m_yAxis.drawSecondaryAxis()},MixedChart.prototype.drawMixedSeries=function(){for(var t=this.m_seriesNames.length,i=0;i<t;i++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[i]])&&(null==this.m_lineSeries[this.m_seriesNames[i]]?this.m_columnSeries[this.m_seriesNames[i]].drawColumns():(this.m_lineSeries[this.m_seriesNames[i]].drawLineSeries(),!IsBoolean(this.getShowPoint())&&1!=this.m_mixedCalculation.xAxisData.length||this.m_pointSeries[this.m_seriesNames[i]].drawPointSeries()))},MixedChart.prototype.drawAnnotationChart=function(){if(this.m_annotationSeries={},1<this.m_categoryData[0].length||1==this.m_categoryData[0].length&&"year"==this.m_annotationformat)for(var t=0,i=this.m_seriesNames.length;t<i;t++)!IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[t]])||!IsBoolean(this.m_showannotation)&&1!=this.m_mixedCalculation.xannotationPosArray||(this.m_annotationSeries[this.m_seriesNames[t]]=new MixAnnotSeries,this.m_annotationSeries[this.m_seriesNames[t]].init(this.m_PointsColorsArray[this.m_seriesNames[t]],+this.m_radius[this.m_seriesNames[t]]+1,this.m_mixedCalculation.xannotationPosArray,this.m_mixedCalculation.getYPositionArray(this.m_seriesNames[t]),this,this.m_transparencyarr[this.m_seriesNames[t]],this.m_plotShapeArray[this.m_seriesNames[t]],this.m_plotRadiusArray[this.m_seriesNames[t]]),this.m_annotationSeries[this.m_seriesNames[t]].drawPointSeries())},MixedChart.prototype.drawDataLabel=function(){this.m_overlappeddatalabelarrayY=[],this.m_overlappeddatalabelarrayX=[];for(var t=this.m_seriesNames.length,i=0;i<t;i++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[i]])&&IsBoolean(this.m_seriesDataLabelProperty[this.m_seriesNames[i]].showDataLabel)&&this.m_valueTextSeries[this.m_seriesNames[i]].drawValueTextSeries()},MixedChart.prototype.drawThreshold=function(){var t,i,s,e,a;IsBoolean(this.m_showyaxisthreshold)&&(t=this.m_mixedCalculation.rightAxisInfo.markerarray,e=1/((s=this.m_secondaryaxisshow&&""!=t?(i=+t[0],+t[t.length-1]):(i=+this.m_yAxis.m_yAxisMarkersArray[0],+this.m_yAxis.m_yAxisMarkersArray[this.m_yAxis.m_yAxisMarkersArray.length-1]))-i)*(+this.m_startY-+this.m_endY),this.m_minimumyaxisthreshold=IsBoolean(this.m_minimumyaxisthresholdline)?this.m_minimumyaxisthreshold:this.m_yAxis.m_yAxisMarkersArray[0],a={},this.m_secondaryaxisshow&&""!=t?IsBoolean(this.m_secondaxisautosetup)&&IsBoolean(this.m_secondaxisbasezero)?(+this.m_minimumyaxisthreshold<i&&(this.m_minimumyaxisthreshold=i),+this.m_maximumyaxisthreshold>s&&(this.m_maximumyaxisthreshold=s),+this.m_maximumyaxisthreshold<i&&(this.m_maximumyaxisthreshold=i),+this.m_minimumyaxisthreshold>s&&(this.m_minimumyaxisthreshold=s),+this.m_minimumyaxisthreshold<+i&&+this.m_maximumyaxisthreshold>+s?(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY,a.x2=+this.m_endX,a.y2=+this.m_startY,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_endY,a.X2=+this.m_endX,a.Y2=+this.m_endY):+this.m_minimumyaxisthreshold<+i?(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY,a.x2=+this.m_endX,a.y2=+this.m_startY,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_startY-this.m_maximumyaxisthreshold*e,a.X2=+this.m_endX,a.Y2=+this.m_startY-this.m_maximumyaxisthreshold*e):+this.m_maximumyaxisthreshold>+s?(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY-this.m_minimumyaxisthreshold*e,a.x2=+this.m_endX,a.y2=+this.m_startY-this.m_minimumyaxisthreshold*e,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_endY,a.X2=+this.m_endX,a.Y2=+this.m_endY):(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY-this.m_minimumyaxisthreshold*e,a.x2=+this.m_endX,a.y2=+this.m_startY-this.m_minimumyaxisthreshold*e,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_startY-this.m_maximumyaxisthreshold*e,a.X2=+this.m_endX,a.Y2=+this.m_startY-this.m_maximumyaxisthreshold*e)):a=this.thresholdYAxisCalculation(i,s,e):IsBoolean(this.m_autoaxissetup)&&IsBoolean(this.m_basezero)?(+this.m_minimumyaxisthreshold<i&&(this.m_minimumyaxisthreshold=i),+this.m_maximumyaxisthreshold>s&&(this.m_maximumyaxisthreshold=s),+this.m_maximumyaxisthreshold<i&&(this.m_maximumyaxisthreshold=i),+this.m_minimumyaxisthreshold>s&&(this.m_minimumyaxisthreshold=s),+this.m_minimumyaxisthreshold<+i&&+this.m_maximumyaxisthreshold>+s?(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY,a.x2=+this.m_endX,a.y2=+this.m_startY,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_endY,a.X2=+this.m_endX,a.Y2=+this.m_endY):+this.m_minimumyaxisthreshold<+i?(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY,a.x2=+this.m_endX,a.y2=+this.m_startY,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_startY-this.m_maximumyaxisthreshold*e,a.X2=+this.m_endX,a.Y2=+this.m_startY-this.m_maximumyaxisthreshold*e):+this.m_maximumyaxisthreshold>+s?(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY-this.m_minimumyaxisthreshold*e,a.x2=+this.m_endX,a.y2=+this.m_startY-this.m_minimumyaxisthreshold*e,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_endY,a.X2=+this.m_endX,a.Y2=+this.m_endY):(a.x1=+this.m_startX-this.m_axistodrawingareamargin,a.y1=+this.m_startY-this.m_minimumyaxisthreshold*e,a.x2=+this.m_endX,a.y2=+this.m_startY-this.m_minimumyaxisthreshold*e,a.X1=+this.m_startX-this.m_axistodrawingareamargin,a.Y1=+this.m_startY-this.m_maximumyaxisthreshold*e,a.X2=+this.m_endX,a.Y2=+this.m_startY-this.m_maximumyaxisthreshold*e)):a=this.thresholdYAxisCalculation(i,s,e),this.m_fillcolorarray=[],hex2rgb(this.m_markercolor,this.m_markertransparency),this.drawThresholdLineBetweenPoints(i,s,this.m_minimumyaxisthreshold,this.m_yaxisthresholdlinewidth,.5,this.m_minimumthresholdstrokecolor,a.x1,a.y1,a.x2,a.y2),this.drawThresholdLineBetweenPoints(i,s,this.m_maximumyaxisthreshold,this.m_yaxisthresholdlinewidth,.5,this.m_maximumthresholdstrokecolor,a.X1,a.Y1,a.X2,a.Y2),this.fillColorBetweenPoints(this.m_fillcolorarray))},MixedChart.prototype.thresholdYAxisCalculation=function(s,e,a){var r={};if(s<0)e<0||(+this.m_minimumyaxisthreshold<s&&(this.m_minimumyaxisthreshold=s),+this.m_maximumyaxisthreshold>e&&(this.m_maximumyaxisthreshold=e),+this.m_maximumyaxisthreshold<s&&(this.m_maximumyaxisthreshold=s),+this.m_minimumyaxisthreshold>e&&(this.m_minimumyaxisthreshold=e)),+this.m_minimumyaxisthreshold<+s&&+this.m_maximumyaxisthreshold>+e?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY,r.x2=+this.m_endX,r.y2=+this.m_startY,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_endY,r.X2=+this.m_endX,r.Y2=+this.m_endY):+this.m_minimumyaxisthreshold<+s?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY,r.x2=+this.m_endX,r.y2=+this.m_startY,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY-this.m_maximumyaxisthreshold*a+s*a,r.X2=+this.m_endX,r.Y2=+this.m_startY-this.m_maximumyaxisthreshold*a+s*a):+this.m_maximumyaxisthreshold>+e?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY-this.m_minimumyaxisthreshold*a+s*a,r.x2=+this.m_endX,r.y2=+this.m_startY-this.m_minimumyaxisthreshold*a+s*a,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_endY,r.X2=+this.m_endX,r.Y2=+this.m_endY):(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY-this.m_minimumyaxisthreshold*a+s*a,r.x2=+this.m_endX,r.y2=+this.m_startY-this.m_minimumyaxisthreshold*a+s*a,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY-this.m_maximumyaxisthreshold*a+s*a,r.X2=+this.m_endX,r.Y2=+this.m_startY-this.m_maximumyaxisthreshold*a+s*a);else if(!(e<0)){let t=+this.m_minimumyaxisthreshold,i=+this.m_maximumyaxisthreshold;t<s&&(t=s),i>e&&(i=e),t>+e&&i<=+e&&i>=+s?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_endY,r.x2=+this.m_endX,r.y2=+this.m_endY,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY-i*a+s*a,r.X2=+this.m_endX,r.Y2=+this.m_startY-i*a+s*a):t>+e&&i>=+e?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_endY,r.x2=+this.m_endX,r.y2=+this.m_endY,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_endY,r.X2=+this.m_endX,r.Y2=+this.m_endY):i<+s&&t>=+s?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY-t*a+s*a,r.x2=+this.m_endX,r.y2=+this.m_startY-t*a+s*a,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY,r.X2=+this.m_endX,r.Y2=+this.m_startY):i<+s&&t<+s?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY,r.x2=+this.m_endX,r.y2=+this.m_startY,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY,r.X2=+this.m_endX,r.Y2=+this.m_startY):t<+s?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY,r.x2=+this.m_endX,r.y2=+this.m_startY,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY-i*a+s*a,r.X2=+this.m_endX,r.Y2=+this.m_startY-i*a+s*a):i>+e?(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY-t*a+s*a,r.x2=+this.m_endX,r.y2=+this.m_startY-t*a+s*a,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_endY,r.X2=+this.m_endX,r.Y2=+this.m_endY):(r.x1=+this.m_startX-this.m_axistodrawingareamargin,r.y1=+this.m_startY-t*a+s*a,r.x2=+this.m_endX,r.y2=+this.m_startY-t*a+s*a,r.X1=+this.m_startX-this.m_axistodrawingareamargin,r.Y1=+this.m_startY-i*a+s*a,r.X2=+this.m_endX,r.Y2=+this.m_startY-i*a+s*a)}return r},MixedChart.prototype.drawThresholdLineBetweenPoints=function(t,i,s,e,a,r,o,h,n,m,l,_,c){this.ctx.beginPath(),this.ctx.save(),this.ctx.lineWidth=e,this.ctx.translate(a,a),this.ctx.strokeStyle=hex2rgb(r,c);e=r;this.ctx.moveTo(parseInt(o),parseInt(h)),this.ctx.lineTo(parseInt(n),parseInt(m)),this.ctx.stroke(),this.ctx.fillStyle=e,this.ctx.rotate(-Math.PI/2),this.ctx.restore(),this.ctx.closePath(),t<s&&s<i&&this.m_fillcolorarray.push({X1:o,Y1:h,X2:n,Y2:m})},MixedChart.prototype.fillColorBetweenPoints=function(t){if(IsBoolean(this.m_enablethresholdfill)&&0<t.length){for(var i=t[0].Y1,s=t[0].Y1,e=1;e<t.length;e++)(a=t[e]).Y1<i&&(i=a.Y1),a.Y1>s&&(s=a.Y1);var a,r=(a=t[0]).X1,o=a.X2,h=Math.min(r,o),r=Math.max(r,o),o=Math.min(s,this.m_startY),r=r-h,n=Math.max(s,this.m_startY)-o,m=h+r/2,l=o+n/2,o=(this.ctx.fillStyle=hex2rgb(this.m_fillBelowLowerThreshold,+this.m_fillBelowThresholdOpacity),this.ctx.fillRect(h,o,r,n),this.ctx.font="16px Arial",this.ctx.fillStyle=hex2rgb(this.m_BelowThresholdLabelColor,1),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(this.m_BelowThresholdLabel,m,l),i),n=s-o,l=(this.ctx.fillStyle=hex2rgb(this.m_fillBetweenThreshold,+this.m_fillBetweenThresholdOpacity),this.ctx.fillRect(h,o,r,n),o+n/2),o=(this.ctx.font="16px Arial",this.ctx.fillStyle=hex2rgb(this.m_BetweenThresholdLabelColor,1),this.ctx.textAlign="center",this.ctx.textBaseline="middle",0<n&&this.ctx.fillText(this.m_BetweenThresholdLabel,m,l),Math.min(i,this.m_endY)),n=Math.max(i,this.m_endY)-o,l=o+n/2;this.ctx.fillStyle=hex2rgb(this.m_fillAboveUpperThreshold,+this.m_fillUpperThresholdOpacity),this.ctx.fillRect(h,o,r,n),this.ctx.font="16px Arial",this.ctx.fillStyle=hex2rgb(this.m_UpperThresholdLabelColor,1),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(this.m_UpperThresholdLabel,m,l)}},MixedChart.prototype.setThresholdFillColors=function(){var t,i,s,e;0<this.m_thresholdfillcolor.length&&(t=this.m_thresholdfillcolor.split(","),this.m_thresholdfilllevel.split(","),i=this.m_thresholdfillopacity.split(","),s=this.m_thresholdfilllabel.split(","),e=this.m_thresholdfilllabelcolor.split(","),this.m_fillBelowLowerThreshold=t[0],this.m_fillBetweenThreshold=t[1],this.m_fillAboveUpperThreshold=t[2],this.m_fillBelowThresholdOpacity=i[0],this.m_fillBetweenThresholdOpacity=i[1],this.m_fillUpperThresholdOpacity=i[2],this.m_BelowThresholdLabel=s[0],this.m_BetweenThresholdLabel=s[1],this.m_UpperThresholdLabel=s[2],this.m_BelowThresholdLabelColor=e[0],this.m_BetweenThresholdLabelColor=e[1],this.m_UpperThresholdLabelColor=e[2])},MixedChart.prototype.getDrillDataPoints=function(t,i){var s=this,e=this.seriesDataMapForIndex;if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries())){this.m_mixedCalculation.columnWidth,this.m_mixedCalculation.totalColumn;var a=5,r=!1,o="stacked"==this.m_charttype?0:this.m_drillminstackheight;if(t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY()){for(chartKey in e)for(var h in e[chartKey])if("overlaid"==this.m_charttype&&"column"==chartKey)for(var n=this.m_seriesNames,m=(this.m_mixedCalculation.overlaidColWidth[h][chartKey],n.length-1);0<=m;m--){var l=this.m_mixedCalculation.getXPositionArray(n[m]),c=this.m_mixedCalculation.getYPositionArray(n[m]);if(null!=l&&null!=c)for(var d=0,y=l.length;d<y;d++){var x=0,g=0,u=("column"==chartKey&&void 0!==this.m_columnSeries[n[m]]&&+this.m_columnSeries[n[m]].m_stackHeightArray[d]<o&&(x=!(+this.m_columnSeries[n[m]].m_ySeriesData[d]<0)||IsBoolean(this.m_basezero)?0:o,g=+this.m_columnSeries[n[m]].m_ySeriesData[d]<0?0:o),"line"==chartKey?l[d]-a:l[d]),p="line"==chartKey?+l[d]+a:_.has(this.m_columnSeries,n[m])?l[d]+this.m_mixedCalculation.columnWidthMap[n[m]]:0,f="line"==chartKey?c[d]+a:_.has(this.m_columnSeries,n[m])?c[d]+this.m_columnSeries[n[m]].m_stackHeightArray[d]+x:0,A="line"==chartKey?+c[d]-a:c[d]-g;if(t<=+p&&+u<=t&&i<=f&&A<=i)return N=this.getFieldNameValueMap(d),P=this.m_PointsColorsArray[this.m_seriesNames[m]][d],v=this.m_seriesNames[m],w=this.m_seriesDisplayNamesMap[this.m_seriesNames[m]],Y=N[v],N.drillField=v,N.drillDisplayField=w,N.drillValue=Y,{drillRecord:N,drillColor:P}}0}else for(var C=(n=this.m_seriesNames.filter(function(t){return s.m_seriesVisibleArr[t]})).length-1;0<=C;C--)if("unique"!=n[C]&&"contains"!=n[C])for(l=this.m_mixedCalculation.getXPositionArray(n[C]),c=this.m_mixedCalculation.getYPositionArray(n[C]),y=l.length,d=0;d<y;d++){x=0,g=0,u=("column"==chartKey&&void 0!==this.m_columnSeries[n[C]]&&+this.m_columnSeries[n[C]].m_stackHeightArray[d]<o&&(x=!(+this.m_columnSeries[n[C]].m_ySeriesData[d]<0)||IsBoolean(this.m_basezero)?0:o,g=+this.m_columnSeries[n[C]].m_ySeriesData[d]<0?0:o),a=this.m_plotRadiusArray[n[C]]>a?this.m_plotRadiusArray[n[C]]:a,"line"==chartKey?l[d]-a:l[d]),p="line"==chartKey?+l[d]+a:_.has(this.m_columnSeries,n[C])?l[d]+this.m_columnSeries[n[C]].m_stackWidth:0,f="line"==chartKey?c[d]+ +this.m_plotRadiusArray[n[C]]:_.has(this.m_columnSeries,n[C])?c[d]+this.m_columnSeries[n[C]].m_stackHeightArray[d]+x:0,A="line"==chartKey?+c[d]-a:c[d]-g;if(t<=+p&&+u<=t&&i<=f&&A<=i){if(IsBoolean(this.enableDrillHighlighter)){for(var b=0;b<n.length;b++){for(var M=0;M<this.m_transparencyarr[n[b]].length;M++)IsBoolean(this.m_drilltoggle)?this.m_transparencyarr[n[b]][M]=.5:this.m_transparencyarr[n[b]][M]=1;this.m_transparencyarr[n[b]][d]=1}this.instanciateSeries(this.seriesDataMap),this.drawChart()}this.m_drilltoggle=!1;for(var N=this.getFieldNameValueMap(d),D=this.m_categoryNames,S=[],b=0;b<D.length;b++)S.push(N[D[b]]);var P=this.m_PointsColorsArray[n[C]][d],v=n[C],w=this.m_seriesDisplayNamesMap[n[C]],Y=N[v];return N.drillField=v,N.drillDisplayField=w,N.drillValue=Y,r=!0,N.drillIndex=d,N.drillCategoriesNames=D,N.drillCategory=S,{drillRecord:N,drillColor:P}}}if("stacked"==this.m_charttype&&!r)for(var X=this.m_mixedCalculation.getxPositionTooltipArray(),F=this.m_mixedCalculation.columnWidth/2,C=0,I=X.length;C<I;C++)if(t<=+X[C]+F&&t>=+X[C]-F)for(var T=0,L=(n=this.m_seriesNames).length;T<L;T++)if(i>=(c=this.m_mixedCalculation.getYPositionArray(n[T]))[C]&&i<=c[C]+this.m_drillminstackheight||i<=c[C]+this.m_columnSeries[n[T]].m_stackHeightArray[C]&&i>=c[C]-this.m_drillminstackheight)return N=this.getFieldNameValueMap(C),P=this.m_drillColor,Y=w=v="",N.drillField=v,N.drillDisplayField=w,N.drillValue=Y,r=!0,{drillRecord:N,drillColor:P}}}},MixedChart.prototype.getToolTipData=function(t,i){if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)&&IsBoolean(this.isVisibleSeries())&&IsBoolean("None"!==this.m_customtextboxfortooltip.dataTipType)){var s,e=this.m_mixedCalculation.columnWidth/2;if(t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY()){for(var a=this.m_mixedCalculation.getxPositionTooltipArray(),r=this.getSeriesData(),o=a.length,h=0;h<o;h++)if(t<=+a[h]+e&&t>=+a[h]-e){if((s={cat:""}).data=new Array,s.cat=this.getCategoryData()[0][h],IsBoolean("Default"==this.m_customtextboxfortooltip.dataTipType)){for(var n,m=r.length,l=0,_=0;l<m;l++)IsBoolean(this.m_seriesVisibleArr[this.m_seriesNames[l]])&&(p=[],n=(IsBoolean(this.getShowPoint())||1==this.m_mixedCalculation.xAxisData.length?this.m_PointsColorsArray:this.getColorsForSeries())[this.m_seriesNames[l]][h],p[0]={color:n,shape:this.legendMap[this.m_seriesNames[l]].shape},p[1]=this.getSeriesDisplayNames()[l],n=""!=r[l][h]&&!isNaN(r[l][h])&&null!=r[l][h]&&"null"!=r[l][h]&&(n=+r[l][h])%1!=0&&"default"!==this.m_tooltipprecision?n.toFixed(this.m_tooltipprecision):r[l][h],n={seriesName:this.m_seriesNames[l],axisType:this.legendMap[this.m_seriesNames[l]].axisType,serVal:n},n=this.getUpdatedLeftRightAxisFormatterForToolTip(n),p[2]=n,"100%"==this.m_charttype&&1<this.getSeriesDisplayNames().length&&(n=this.getValuefromMap(this.getSeriesNames()[l],h),"auto"==this.m_tooltipproperties.tooltippercentprecision?0==countDecimal(n.toString())?p[3]=n+"%":(p[3]=n.toFixed(2),p[3]%1==0?p[3]=(+p[3]).toFixed()+"%":p[3]=p[3]+"%"):p[3]=n.toFixed(this.m_tooltipproperties.tooltippercentprecision)+"%"),s.data[_]=p,_++);s.highlightIndex=this.getDrillColor(t,i),IsBoolean(this.m_controlledtooltip)&&(s=this.updateTooltipData(s));break}s=this.getDataProvider()[h]}}else this.hideToolTip();o=(a=this.m_mixedCalculation.getxPositionTooltipArray()).length;if(IsBoolean(this.m_showannotation))for(var c=0;c<this.m_annotationXData.length;c++)if(""!=this.m_annotationXData[c]){var d=Math.round(+this.m_annotationXData[c].xposition);if(t>=d-this.m_annotationradius&&t<=d+ +this.m_annotationradius&&i<=this.getStartY()&&i>=this.getEndY()){(s={cat:""}).data=new Array;var y,x,g,d=this.m_annotationXData[c].point.toString(),u=this.getMonthYear(d);s.cat=this.m_annotationtooltiptitle,g="year"==this.m_annotationformat?(x=(y=this.m_annotationXData.filter(t=>{return""!==t&&this.getMonthYear(t.point.toString()).year===u.year})).map(t=>t.label),y.map(t=>t.point)):(x=(y=this.m_annotationXData.filter(t=>{return!!t&&(t=this.getMonthYear(t.point.toString())).mon===u.mon&&t.year===u.year})).map(t=>t.label),y.map(t=>t.point));for(var p,f=0,A=0;f<x.length;f++)(p=[])[0]={color:this.m_annotationcolor,shape:"cube"},p[1]=x[f],p[2]=Array.isArray(g)?g[f]:g,s.data[A]=p,A++;this.m_showannotationTooltip=!0;break}}return s}},MixedChart.prototype.getMonthYear=function(t){var i,s,e,a=[],r=t.match(/^(0[1-9]|1[0-2])[-/.](0[1-9]|[12][0-9]|3[01])[-/.](\d{4})$|^(0[1-9]|[12][0-9]|3[01])[-/.](0[1-9]|1[0-2])[-/.](\d{4})$/);return r?(e=s=i=0,r[1]&&r[2]&&r[3]?(i=r[1],s=r[2],e=r[3]):r[4]&&r[5]&&r[6]&&(s=r[4],i=r[5],e=r[6])):t.match(/^\d{4}$/)&&(e=t),a.mon=i,a.day=s,a.year=e,a},MixedChart.prototype.getValuefromMap=function(t,i){for(var s in this.changedDataMap)for(var e in this.changedDataMap[s])for(var a in this.changedDataMap[s][e])if(a==t)return"line"==e?0:this.changedDataMap[s][e][a][i]},MixedChart.prototype.getDrillColor=function(t,i){var s=this,e=this.seriesDataMapForIndex;if(!IsBoolean(this.m_isEmptySeries)&&!IsBoolean(this.isEmptyCategory)){this.m_mixedCalculation.columnWidth,this.m_mixedCalculation.totalColumn;if(t>=this.getStartX()&&t<=this.getEndX()&&i<=this.getStartY()&&i>=this.getEndY()){var a="stacked"==this.m_charttype?0:this.m_drillminstackheight;for(chartKey in e)for(axisKay in e[chartKey])if("overlaid"==this.m_charttype&&"column"==chartKey)for(var r=this.m_seriesNames,o=(this.m_mixedCalculation.overlaidColWidth[axisKay][chartKey],r.length-1);0<=o;o--){var h=this.m_mixedCalculation.getXPositionArray(r[o]),n=this.m_mixedCalculation.getYPositionArray(r[o]);if(null!=h&&null!=n)for(var m=0,l=h.length;m<l;m++){var c=0,d=0,y=("column"==chartKey&&void 0!==this.m_columnSeries[r[o]]&&+this.m_columnSeries[r[o]].m_stackHeightArray[m]<a&&(c=!(+this.m_columnSeries[r[o]].m_ySeriesData[m]<0)||IsBoolean(this.m_basezero)?0:a,d=+this.m_columnSeries[r[o]].m_ySeriesData[m]<0?0:a),"line"==chartKey?h[m]-5:h[m]),x="line"==chartKey?+h[m]+5:_.has(this.m_columnSeries,r[o])?h[m]+this.m_mixedCalculation.columnWidthMap[r[o]]:0,g="line"==chartKey?n[m]+5:_.has(this.m_columnSeries,r[o])?n[m]+this.m_columnSeries[r[o]].m_stackHeightArray[m]+c:0,u="line"==chartKey?+n[m]-5:n[m]-d;if(t<=+x&&+y<=t&&i<=g&&u<=i){for(var p=0;p<this.m_categoryData[0].length&&this.m_categoryData[0][m]!=this.m_categoryData[0][p];p++);return o}}}else for(o=(r=this.m_seriesNames.filter(function(t){return s.m_seriesVisibleArr[t]})).length-1;0<=o;o--)if("unique"!=r[o]&&"contains"!=r[o])for(h=this.m_mixedCalculation.getXPositionArray(r[o]),n=this.m_mixedCalculation.getYPositionArray(r[o]),l=h.length,m=0;m<l;m++){c=0,d=0,y=("column"==chartKey&&void 0!==this.m_columnSeries[r[o]]&&+this.m_columnSeries[r[o]].m_stackHeightArray[m]<a&&(c=!(+this.m_columnSeries[r[o]].m_ySeriesData[m]<0)||IsBoolean(this.m_basezero)?0:a,d=+this.m_columnSeries[r[o]].m_ySeriesData[m]<0?0:a),"line"==chartKey?h[m]-+this.m_plotRadiusArray[r[o]]:h[m]),x="line"==chartKey?+h[m]+ +this.m_plotRadiusArray[r[o]]:_.has(this.m_columnSeries,r[o])?h[m]+this.m_columnSeries[r[o]].m_stackWidth:0,g="line"==chartKey?n[m]+ +this.m_plotRadiusArray[r[o]]:_.has(this.m_columnSeries,r[o])?n[m]+this.m_columnSeries[r[o]].m_stackHeightArray[m]+c:0,u="line"==chartKey?+n[m]-+this.m_plotRadiusArray[r[o]]:n[m]-d;if(t<=+x&&+y<=t&&i<=g&&u<=i){for(p=0;p<this.m_categoryData[0].length&&this.m_categoryData[0][m]!=this.m_categoryData[0][p];p++);return o}}}}},MixedChart.prototype.setStartX=function(){this.yaxisLabelFont=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),this.yaxisDescriptionFont=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily);var t=this.getBorderToDescriptionMargin(),i=this.getYAxisDescriptionMargin(),s=this.getDescriptionToLabelMargin(),e=this.getLabelToAxisMargin(),a=this.getYAxisLabelMargin(),t=+this.m_x+ +t+ +i+ +s+ +a+ +e;this.m_startX=t},MixedChart.prototype.getYAxisLabelMargin=function(){var t=this.getLabelFormatterMargin();return this.setLabelWidth(),+t+ +this.getLabelWidth()+ +this.getLabelSignMargin()+ +this.getLabelPrecisionMargin()+ +this.getLabelSecondFormatterMargin()},MixedChart.prototype.getLabelFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.m_formater&&""!=this.m_formater&&"none"!=this.m_unit&&""!=this.m_unit&&(t=this.m_util.getFormatterSymbol(this.m_formater,this.m_unit),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(t).width,this.ctx.closePath()),i},MixedChart.prototype.getLabelWidth=function(){return this.m_labelwidth},MixedChart.prototype.setLabelWidth=function(){var t=[];if((this.m_labelwidth=0)<this.fontScaling(this.m_yAxis.m_labelfontsize)){for(var i=0;i<this.leftAxisInfo.markerarray.length;i++){var s,e=this.leftAxisInfo.markerarray[i];IsBoolean(this.m_fixedlabel)||(IsBoolean(this.m_yAxis.getLeftaxisFormater())&&("none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(s=this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()),"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?e=getNumberFormattedNumericValue(+e,this.m_precision,this.m_unit):"auto"==this.getSecondaryUnit()?e=getNumberFormattedNumericValue(+e):"none"!==this.getSecondaryUnit()&&(e=this.m_util.updateTextWithFormatter(e,s,this.m_precision))),0!==e)&&"default"!==this.m_precision&&(e=this.m_yAxis.setPrecision(e,this.m_precision)),e=getFormattedNumberWithCommas(e,this.m_numberformatter),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t[i]=this.ctx.measureText(e).width,this.ctx.closePath())}this.m_labelwidth=getMaxValueFromArray(t)}},MixedChart.prototype.getLabelSignMargin=function(){var t=0,i=0,s=this.leftAxisInfo.min;return s<0&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(s).width,this.ctx.closePath()),t=this.getLabelWidth()<i?this.ctx.measureText("-").width:t},MixedChart.prototype.getLabelPrecisionMargin=function(){var t=0;return"auto"==this.getSecondaryUnit()&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t=this.ctx.measureText(".0").width,this.ctx.closePath()),t},MixedChart.prototype.getLabelSecondFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_fixedlabel)||IsBoolean(this.m_yAxis.getLeftaxisFormater())&&"none"!=this.getSecondaryFormater()&&""!=this.getSecondaryFormater()&&"none"!=this.getSecondaryUnit()&&""!=this.getSecondaryUnit()&&(t="auto"!=this.getSecondaryUnit()?this.m_util.getFormatterSymbol(this.getSecondaryFormater(),this.getSecondaryUnit()):"auto"==this.getSecondaryUnit()&&"Rupees"==this.m_unit?getNumberFormattedSymbol(+this.leftAxisInfo.max,this.m_unit):"K",this.ctx.font=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily),i=this.ctx.measureText(t).width),i},MixedChart.prototype.setEndX=function(){var t=this.getBorderToLegendMargin(),i=this.getVerticalLegendMargin(),s=this.getSecondAxisToXAxisMargin(),e=this.getSecondAxisLabelFormatterMargin(),a=this.getSecondYAxisDescriptionMargin(),r=(this.setLabelWidthForSecondAxis(),this.getLabelWidthForSecondAxis()),o=this.getLabelPrecisionMarginForSecondAxis(),h=this.getLabelSecondFormatterMarginForSecondAxis(),n=this.getSecondAxisLabelToAxisMargin();this.m_spaceForSecondAxisDec=+this.fontScaling(this.m_secondaxisfontsize),this.m_rightAxisSpace=+t+ +i+ +s+ +o+ +a+ +e+ +r+ +h+ +n+this.m_spaceForSecondAxisDec/2,this.m_endX=+this.m_x+ +this.m_width-+this.m_rightAxisSpace,this.m_endX=this.m_endX<35?35:this.m_endX},MixedChart.prototype.getLabelPrecisionMarginForSecondAxis=function(){var t=0;return"auto"==this.m_secondaryaxissecondaryunit&&(this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t=this.ctx.measureText(".0").width,this.ctx.closePath()),t},MixedChart.prototype.getLabelWidthForSecondAxis=function(){return this.m_labelwidthsecondaxis},MixedChart.prototype.setLabelWidthForSecondAxis=function(){var t=[];if((this.m_labelwidthsecondaxis=0)<this.fontScaling(this.m_yAxis.m_labelfontsize)){for(var i=0;i<this.rightAxisInfo.markerarray.length;i++){var s=this.rightAxisInfo.markerarray[i];this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),this.ctx.closePath(),IsBoolean(this.m_secondaryaxisshow)&&(IsBoolean(this.m_yAxis.m_rightaxisformater)&&("none"!=this.m_secondaryaxissecondaryunit&&""!=this.m_secondaryaxissecondaryunit&&(secondunit=this.m_util.getFormatterSymbol(this.m_secondaryaxissecondaryformatter,this.m_secondaryaxissecondaryunit),"auto"==this.m_secondaryaxissecondaryunit&&"Rupees"==this.m_secondaryaxisunit?s=getNumberFormattedNumericValue(+s,this.m_secondaryaxisprecision,this.m_secondaryaxisunit):"auto"==this.m_secondaryaxissecondaryunit?s=getNumberFormattedNumericValue(+s):"none"!==this.m_secondaryaxissecondaryunit&&(s=this.m_util.updateTextWithFormatter(s,secondunit,this.m_secondaryaxisprecision))),0!==s)&&"default"!==this.m_secondaryaxisprecision&&(s=this.m_yAxis.setPrecision(s,this.m_secondaryaxisprecision)),s=getFormattedNumberWithCommas(s,this.m_secondaryaxisnumberformatter),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),t[i]=this.ctx.measureText(s).width,this.ctx.closePath())}this.m_labelwidthsecondaxis=getMaxValueFromArray(t)}},MixedChart.prototype.getSecondAxisLabelFormatterMargin=function(){var t,i=0;return IsBoolean(this.m_secondaryaxisshow)&&IsBoolean(this.m_yAxis.m_rightaxisformater)&&"none"!=this.m_secondaryaxisunit&&""!=this.m_secondaryaxisunit&&(t=this.m_util.getFormatterSymbol(this.m_secondaryaxisformater,this.m_secondaryaxisunit),this.ctx.beginPath(),this.ctx.font=this.m_yAxis.m_labelfontstyle+" "+this.m_yAxis.m_labelfontweight+" "+this.fontScaling(this.m_yAxis.m_labelfontsize)+"px "+selectGlobalFont(this.m_yAxis.m_labelfontfamily),i=this.ctx.measureText(t).width,this.ctx.closePath()),i},MixedChart.prototype.getSecondYAxisDescriptionMargin=function(){var t=0;return t=IsBoolean(""!=this.m_secondaxisdiscription)?1.5*this.fontScaling(this.m_secondaxisfontsize):t},MixedChart.prototype.getLabelSecondFormatterMarginForSecondAxis=function(){var t,i=0;return IsBoolean(this.m_yAxis.m_rightaxisformater)&&"none"!=this.m_secondaryaxissecondaryformatter&&""!=this.m_secondaryaxissecondaryformatter&&"none"!=this.m_secondaryaxissecondaryunit&&""!=this.m_secondaryaxissecondaryunit&&(t="auto"!=this.m_secondaryaxissecondaryunit?this.m_util.getFormatterSymbol(this.m_secondaryaxissecondaryformatter,this.m_secondaryaxissecondaryunit):"auto"==this.m_secondaryaxissecondaryunit&&"Rupees"==this.m_secondaryaxisunit?getNumberFormattedSymbol(+this.rightAxisInfo.max,this.m_secondaryaxisunit):"K",this.ctx.font=this.m_yAxis.m_fontstyle+" "+this.m_yAxis.m_fontweight+" "+this.fontScaling(this.m_yAxis.m_fontsize)+"px "+selectGlobalFont(this.m_yAxis.m_fontfamily),i=this.ctx.measureText(t).width),i},MixedChart.prototype.setStartY=function(){var t=this.getChartMargin();this.m_startY=+this.m_y+ +this.m_height-t-this.getXAxisLabelMargin()-this.getXAxisDescriptionMargin()-this.getHorizontalLegendMargin()-(IsBoolean(this.m_showslider)?this.sliderMargin:0),this.m_startY=IsBoolean(this.scaleFlag)?+this.m_y+ +this.m_height-5:this.m_startY},MixedChart.prototype.getXAxisLabelMargin=function(){var t=15,i=this.m_xAxis.m_labelrotation*(Math.PI/180);if(IsBoolean(this.m_xAxis.getLabelTilted())){this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();for(var s=1;s<this.m_categoryData[0].length;s++)t<Math.abs(this.ctx.measureText(this.m_categoryData[0][s]).width*i)&&(t=Math.abs(this.ctx.measureText(this.m_categoryData[0][s]).width*i));t>this.m_height/4&&(t=this.m_xAxis.getLabelrotation()<=70?this.m_height/4-15:this.m_height/4)}else{this.ctx.font=this.m_xAxis.getLabelFontWeight()+" "+this.fontScaling(this.m_xAxis.getLabelFontSize())+"px "+this.m_xAxis.getLabelFontFamily();var e=1.8*this.fontScaling(this.m_xAxis.m_labelfontsize);this.noOfRows=this.setNoOfRows(),t=e*this.noOfRows}return t},MixedChart.prototype.setNoOfRows=function(){this.ctx.font=this.m_xAxis.m_labelfontstyle+" "+this.m_xAxis.m_labelfontweight+" "+this.fontScaling(this.m_xAxis.m_labelfontsize)+"px "+this.m_xAxis.m_labelfontfamily;this.ctx.measureText(this.m_categoryData[0][0]).width;for(var t=(this.getEndX()-this.getStartX())/this.m_categoryData[0].length,i=1,s=this.m_categoryData[0].length,e=1;e<s;e++)this.ctx.measureText(this.m_categoryData[0][e]).width>t&&(i=2);return i=IsBoolean(this.m_xAxis.getLabelTilted())?1:i},MixedChart.prototype.getXAxisDescriptionMargin=function(){var t=2;return t=""!=this.m_xAxis.getDescription()?1.5*this.fontScaling(this.m_xAxis.getFontSize()):t},MixedChart.prototype.setEndY=function(){"rectangle"==this.m_chartbase?(this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()+ +this.getRangeSelectorMargin(),this.m_height,this.m_startY):this.m_endY=this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()+ +this.getRangeSelectorMargin()},MixedChart.prototype.getMarginForSubTitle=function(){var t=IsBoolean(this.m_updateddesign)?2.5:1.5,t=IsBoolean(this.m_subTitle.m_showsubtitle)?""!=this.m_subTitle.getDescription()?this.fontScaling(this.m_subTitle.getFontSize())*t:10:0;return t},MixedChart.prototype.getRangeSelectorMargin=function(){return 0},MixedChart.prototype.getFieldNameValueMap=function(t){for(var i=new Object,s=this.getAllFieldsName().length,e=0;e<s;e++)i[this.getAllFieldsName()[e]]=this.getDataProvider()[t][this.getAllFieldsName()[e]];return i},MixedCalculation.prototype.init=function(t,i,s,e,a){this.m_chart=t,this.index=s,this.startX=this.m_chart.getStartX(),this.endX=this.m_chart.getEndX(),this.startY=this.m_chart.getStartY(),this.endY=this.m_chart.getEndY(),this.xAxisData=e[0],this.yAxisData=this.m_chart.getVisibleSeriesData(i).seriesData,this.seriesDataMap=a,this.leftAxisInfo=this.m_chart.leftAxisInfo,this.rightAxisInfo=this.m_chart.rightAxisInfo,this.totalColumn="stacked"==this.m_chart.m_charttype||"100%"==this.m_chart.m_charttype||"overlaid"==this.m_chart.m_charttype?1:this.getTotalColumn(this.seriesDataMap),this.setColumnWidthGap(),this.setXPositionTooltipArr(this.xAxisData),this.setYPositionArray(this.seriesDataMap),this.setXAnnotationPosition()},MixedCalculation.prototype.getTotalColumn=function(t){var i=0;for(axisKay in t)for(chartKey in t[axisKay])for(seriesKey in t[axisKay][chartKey])"column"==chartKey&&"contains"!=seriesKey&&"unique"!=seriesKey&&i++;return i},MixedCalculation.prototype.setColumnWidthGap=function(t,i){var s=this.endX-this.startX,e=s/this.xAxisData.length;this.onePartWidth=isNaN(e)?s:e,this.columnWidth=this.onePartWidth*this.m_chart.m_barwidth/100,this.columnGap=this.onePartWidth*((100-this.m_chart.m_barwidth)/2)/100},MixedCalculation.prototype.setYPositionArray=function(t){var i,s=0;for(i in this.overlaidColWidth={left:{column:[]},right:{column:[]}},t){var e,a=1,r="",o="";for(e in t[i]){var h,n,m=[];for(h in t[i][e])"unique"!=h&&"contains"!=h&&("column"==e&&("overlaid"==this.m_chart.m_charttype?(r=""!=r?50*r/100:this.columnWidth,this.columnGapeMap[h]=""!==o?+o+r/2:0,o=this.columnGapeMap[h],this.columnWidthMap[h]=r,m.push({name:h,value:r}),a++):this.columnWidthMap[h]=this.columnWidth/a),n=this.getYPositionArr(i,e,t[i][e][h],h,t),null==this.yPositionMap[h]&&null!=n&&(this.yPositionMap[h]=n),"column"==e&&(s++,this.heightMap[h]=this.getHeightArr(i,t[i][e][h])),this.xPositionMap[h]=this.getXPositionArr(i,e,s,this.xAxisData,h));if("column"==e&&"overlaid"==this.m_chart.m_charttype){for(var m=m.reverse(),l=[],_=0;_<m.length;_++)l.push(m[_].name);this.overlaidColWidth[i][e]=m=l}}}},MixedCalculation.prototype.getYPositionArr=function(t,i,s,e,a){var r="left"==t?this.leftAxisInfo:this.rightAxisInfo,o=(+this.startY-+this.endY)/(r.max-r.min),h=r.min,r=r.max;if("stacked"!=this.m_chart.m_charttype&&"100%"!=this.m_chart.m_charttype||"column"!=i){for(var n=[],m=s.length,l=0;l<m;l++)""===s[l]||isNaN(s[l])||null==s[l]||"NIL"==s[l]?n[l]="":"column"==i&&s[l]<0?n[l]=this.startY-(o*(s[l]-h)-o*s[l]):n[l]=this.startY-o*(s[l]-h);return n}this.getyPixelArrayForStacked(t,i,e,a,o,h,r)},MixedCalculation.prototype.findClosestNumber=function(t,i){for(var s=t[0],e=0,a=Math.abs(t[0]-i),r=1;r<t.length;r++){var o=Math.abs(t[r]-i);o<a&&(a=o,s=t[r],e=r)}return{closest:s,closestIndex:e}},MixedCalculation.prototype.checkIndexOfData=function(t){for(var i=-1,s=this.m_chart.m_mixedCalculation.xAxisData,e=0;e<s.length;e++)this.m_chart.getMonthYear(s[e].toString()).year==t&&(i=e);return i},MixedCalculation.prototype.getyPixelArrayForStacked=function(t,i,s,e,a,r,o){var h,n=[],m=[];for(h in e[t][i])"unique"!=h&&"contains"!=h&&(m.push(h),n.push(e[t][i][h]));for(var l=[],_=[],c=[],d=n.length,y=0;y<d;y++){l[y]=[],_[y]=[],c[y]=[];for(var x=n[y].length,g=0;g<x;g++)isNaN(n[y][g])&&(n[y][g]=""),0==y?0<=+n[y][g]?(l[y][g]=0<+o?this.m_chart.getStartY()+a*r-a*n[y][g]:this.m_chart.getStartY()-a*n[y][g]+a*r,_[y][g]=l[y][g],c[y][g]=+this.m_chart.getStartY()+a*r):(l[y][g]=this.m_chart.getStartY()+a*r,c[y][g]=l[y][g]-a*n[y][g],_[y][g]=+this.m_chart.getStartY()+a*r):0<=n[y][g]?(_[y][g]=_[y-1][g],c[y][g]=c[y-1][g],l[y][g]=_[y][g]-a*n[y][g],_[y][g]=+l[y][g]):(c[y][g]=c[y-1][g],_[y][g]=_[y-1][g],l[y][g]=+c[y][g],c[y][g]=+l[y][g]-a*n[y][g]);null==this.yPositionMap[m[y]]&&(this.yPositionMap[m[y]]=l[y])}},MixedCalculation.prototype.getXAxisPixel=function(t){return(this.endX-this.startX)/(this.xAxisData.length-1)},MixedCalculation.prototype.setXPositionTooltipArr=function(t){this.xPositionTooltipArray=[];for(var i=t.length,s=0;s<i;s++)this.xPositionTooltipArray[s]=+this.startX+(this.onePartWidth*s+this.onePartWidth/2)},MixedCalculation.prototype.setXAxisAnnotationOnePart=function(){this.onePartAnnotationWidth=this.endX-this.startX},MixedCalculation.prototype.setXAnnotationPosition=function(){this.xannotationPosArray=[];for(var t=0,i=this.xAxisData.length;t<i;t++)1==this.xAxisData.length?this.xannotationPosArray[t]=+this.startX+(this.endX-this.startX)/2:(this.xannotationPosArray[t]=+this.startX+(this.onePartWidth*t+this.onePartWidth/2),t,this.startX,this.onePartWidth,this.onePartWidth)},MixedCalculation.prototype.getXPositionArr=function(t,i,s,e,a){s="stacked"==this.m_chart.m_charttype||"100%"==this.m_chart.m_charttype||"overlaid"==this.m_chart.m_charttype?1:s;for(var r=[],o=(this.columnWidth-this.columnWidth*this.m_chart.clusteredbarpadding)/2,h=e.length,n=0;n<h;n++)"line"==i?r[n]=+this.startX+(this.onePartWidth*n+this.onePartWidth/2):"overlaid"==this.m_chart.m_charttype?r[n]=+this.startX+this.columnGap*(2*n+1)+this.columnWidth*n+(this.columnWidth/this.totalColumn*(s-1)+this.columnGapeMap[a]):"clustered"==this.m_chart.m_charttype?r[n]=+this.startX+this.columnGap*(2*n+1)+this.columnWidth*n+this.columnWidth/this.totalColumn*(s-1)+o:r[n]=+this.startX+this.columnGap*(2*n+1)+this.columnWidth*n+this.columnWidth/this.totalColumn*(s-1);return r},MixedCalculation.prototype.getHeightArr=function(t,i){for(var s,t="left"==t?this.leftAxisInfo:this.rightAxisInfo,e=(+this.startY-+this.endY)/(t.max-t.min),a=(t.min,[]),r=i.length,o=0;o<r;o++)""===i[o]||isNaN(i[o])||null==i[o]||"NIL"==i[o]?a[o]="":(s=i[o],a[o]=Math.abs(e*s));return a},MixedCalculation.prototype.getYPositionArray=function(t){return this.yPositionMap[t]},MixedCalculation.prototype.getXPositionArray=function(t){return this.xPositionMap[t]},MixedCalculation.prototype.getHeightArray=function(t){return this.heightMap[t]},MixedCalculation.prototype.getxPositionTooltipArray=function(){return this.xPositionTooltipArray},MixedCalculation.prototype.getYAxisText=function(){return this.leftAxisInfo.markertext},MixedCalculation.prototype.getYAxisMarkersArray=function(){return this.leftAxisInfo.markerarray},MixedCalculation.prototype.getXAxisMarkersArray=function(){return this.setXAxisMarkerforAdvanceLine(),this.m_xAxisMarkersArray},MixedCalculation.prototype.setXAxisMarkerforAdvanceLine=function(){this.m_xAxisMarkersArray=[],this.xPositionForMarker=[];for(var t=this.xAxisData.length,i=0;i<t;i++){var s=+this.startX+(this.onePartWidth*i+this.onePartWidth/2);this.m_xAxisMarkersArray.push(this.xAxisData[i]),this.xPositionForMarker.push(s)}},MixedCalculation.prototype.getXAxisPositionForMarkers=function(){return this.xPositionForMarker},MixedColumns.prototype.init=function(t,i,s,e,a,r,o,h,n,m){for(var l=this,_=(this.m_xPixel=i,this.m_yPixelArray=s,this.m_stackWidth=a,this.m_stackHeightArray=e,this.m_stackColorArray=t,this.m_chart=h,this.m_transparency=n,this.m_strokeColor=r,this.m_showGradient=o,this.m_ySeriesData=m,this.m_yPixelArray.length),c=0;c<_;c++)this.m_svgStackArray[c]=new Stack,this.m_yPixelArray[c]>=l.m_chart.getStartY()||""===this.m_yPixelArray?this.m_stackHeightArray[c]=0:this.m_yPixelArray[c]<l.m_chart.getEndY()?(this.m_stackHeightArray[c]=this.m_stackHeightArray[c]-(l.m_chart.getEndY()-this.m_yPixelArray[c]),this.m_yPixelArray[c]=l.m_chart.getEndY()):+this.m_yPixelArray[c]+ +this.m_stackHeightArray[c]>l.m_chart.getStartY()&&(this.m_stackHeightArray[c]=l.m_chart.getStartY()-this.m_yPixelArray[c]),+this.m_yPixelArray[c]+this.m_stackHeightArray[c]>l.m_chart.getStartY()&&(this.m_stackHeightArray[c]=l.m_chart.getStartY()-this.m_yPixelArray[c]),this.m_stackHeightArray[c]=this.m_stackHeightArray[c]<0?0:this.m_stackHeightArray[c],this.m_svgStackArray[c].init(this.m_xPixel[c],this.m_yPixelArray[c],this.m_stackWidth,this.m_stackHeightArray[c],this.m_stackColorArray[c],this.m_strokeColor,this.m_showGradient,this.m_chart.ctx,this.m_chart.m_chartbase,"","","false",this.m_transparency[c],this.m_ySeriesData[c],this.m_chart)},MixedColumns.prototype.drawColumns=function(){for(var t,i=this.m_yPixelArray.length,s=0;s<i;s++)this.isInRange(s)||null==(t=this.m_svgStackArray[s].m_stackHeight)||"null"==t||""==t||isNaN(t)||0==t||this.m_svgStackArray[s].drawStack()},MixedColumns.prototype.isInRange=function(t){return this.m_yPixelArray[t]>=this.m_chart.getStartY()&&this.m_yPixelArray[t]<=this.m_chart.getEndY()},MixedLines.prototype.init=function(t,i,s,e,a,r,o,h,n){if(this.m_chart=a,this.seriesName=o,this.ctx=this.m_chart.ctx,this.color=t,this.width=e,this.xPositionArray=i,this.yPositionArray=s,this.plotTrasparency=r,this.lineWidth=h,this.lineType=n,"curve"!==this.m_chart.m_lineform)for(var m=0;m<this.xPositionArray.length;m++)this.line[m]=new Line,""!==this.xPositionArray[m]&&""!==this.yPositionArray[m]&&(0==m?this.line[m].init(this.color[m],this.xPositionArray[m],this.yPositionArray[m],this.xPositionArray[m],this.yPositionArray[m],this.m_chart,this.plotTrasparency,this.lineWidth,this.lineType):this.line[m].init(this.color[m],this.xPositionArray[m-1],this.yPositionArray[m-1],this.xPositionArray[m],this.yPositionArray[m],this.m_chart,this.plotTrasparency,this.lineWidth,this.lineType))},MixedLines.prototype.drawLineSeries=function(){"curve"==this.m_chart.m_lineform?this.drawSplines():this.drawSegmentLines()},MixedLines.prototype.isInRange=function(t){return 0==t?Math.floor(this.yPositionArray[t])>Math.ceil(this.m_chart.getStartY())||Math.ceil(this.yPositionArray[t])<Math.floor(this.m_chart.getEndY()):Math.floor(this.yPositionArray[t-1])>Math.ceil(this.m_chart.getStartY())||Math.ceil(this.yPositionArray[t-1])<Math.floor(this.m_chart.getEndY())||Math.floor(this.yPositionArray[t])>Math.ceil(this.m_chart.getStartY())||Math.ceil(this.yPositionArray[t])<Math.floor(this.m_chart.getEndY())},MixedLines.prototype.drawSegmentLines=function(){for(var t=0;t<this.xPositionArray.length;t++)this.isInRange(t)||this.line[t].drawLine()},MixedLines.prototype.drawSegmentLine=function(t,i,s,e,a,r){this.ctx.beginPath(),this.ctx.lineWidth=this.m_chart.m_linewidth,this.ctx.strokeStyle=hex2rgb(t,r),this.ctx.moveTo(i,s),this.ctx.lineTo(e,a),this.ctx.stroke(),this.ctx.closePath()},MixedLines.prototype.drawSplines=function(){for(var t=[],i=0,s=(t[i]=[],this.getLineDashArray(this.lineType,this.lineWidth)),e=0;e<this.xPositionArray.length;e++)null!=this.xPositionArray[e]&&""!=this.xPositionArray[e]&&null!=this.yPositionArray[e]&&""!=this.yPositionArray[e]&&this.yPositionArray[e]<=this.m_chart.getStartY()&&this.yPositionArray[e]>=this.m_chart.getEndY()?(t[i].push(this.xPositionArray[e]),t[i].push(this.yPositionArray[e])):t[++i]=[];for(var a=0;a<=i;a++)0<t[a].length&&(this.ctx.beginPath(),this.ctx.save(),this.ctx.lineWidth=this.lineWidth,this.ctx.strokeStyle=hex2rgb(this.color[a],this.m_plotTrasparency),this.ctx.moveTo(t[a][0],t[a][1]),this.ctx.curve(t[a],.5,25,this),0<this.lineWidth&&(this.ctx.setLineDash(s),this.ctx.stroke()),this.ctx.restore(),this.ctx.closePath())},MixedLines.prototype.getLineDashArray=function(t,i){return"dot"===t?[+i,2*i+1,0,0]:"dash1"===t?[+i,+i,4*i,+i]:"dash"===t?[2*i+1,2*i+1,0,0]:[]},MixedPoints.prototype.init=function(t,i,s,e,a,r,o){this.m_chart=a,this.ctx=this.m_chart.ctx,this.color=t,this.m_chart=a,this.radius=i,this.xPositionArray=s,this.yPositionArray=e,this.pointOpacity=r,this.pointShape=o;for(var h=this.xPositionArray.length,n=0;n<h;n++)this.point[n]=new Point,this.point[n].init(this.color[n],this.radius,this.xPositionArray[n],this.yPositionArray[n],this.ctx,this.m_chart,this.pointOpacity[n],this.pointShape,this.radius)},MixedPoints.prototype.isInRange=function(t){return Math.floor(this.yPositionArray[t])>Math.ceil(this.m_chart.getStartY())||Math.ceil(this.yPositionArray[t])<Math.floor(this.m_chart.getEndY())},MixedPoints.prototype.drawPointSeries=function(t){for(var i=this.xPositionArray.length,s=0;s<i;s++)this.isInRange(s)||this.point[s].drawPoint()},MixAnnotSeries.prototype.init=function(t,i,s,e,a,r,o,h,n,m){this.m_chart=a,this.ctx=this.m_chart.ctx,this.color=t,this.m_chart=a,this.radius=i,this.xPositionArray=s,this.yPositionArray=e,this.m_plotTrasparency=r,this.m_plotType=o,this.m_plotRadius=h;var l=this.m_chart.m_annotationData,_=0;if(IsBoolean(this.m_chart.m_showyannotation))for(F=0;F<l.length;F++)for(var c=0,d=this.xPositionArray.length;c<d;c++){this.point[_]=new Point;var y=IsBoolean(this.m_chart.m_annotationseriescolor)?this.color[c]:this.m_chart.m_annotationcolor,i=this.m_chart.m_annotationradius,x=this.m_chart.m_annotationopacity,g=this.m_chart.m_annotationshape,u=this.m_chart.m_annotationradius;this.point[_].init(y,u,this.xPositionArray[c],this.m_chart.m_mixedCalculation.getYAnotPosition(l[F].point),this.ctx,this,x,g,u),this.isInRange(c)||this.point[_].drawPoint(),_++}for(var p,f,A,C,b,M,N,D,S,P,v,w={},Y=[{month:0,year:0}],X=this.m_chart.m_annotationXData,F=0;F<X.length;F++)""!==X[F].point&&null!=X[F].point&&"null"!=X[F].point&&"NULL"!=X[F].point&&"Null"!=X[F].point||(X[F]=""),""!=X[F]&&((D=X[F].point.toString().match(/^(0[1-9]|1[0-2])[-/.](0[1-9]|[12][0-9]|3[01])[-/.](\d{4})$|^(0[1-9]|[12][0-9]|3[01])[-/.](0[1-9]|1[0-2])[-/.](\d{4})$/))?(D[1]&&D[2]&&D[3]?(p=D[1],D[2],f=D[3]):D[4]&&D[5]&&D[6]&&(D[4],p=D[5],f=D[6]),"month"==this.m_chart.m_annotationformat?Y.some(function(t){return t.month===p&&t.year===f})?(M=0,N=NaN):(Y.push({month:p,year:f}),C=(A=this.m_chart.m_mixedCalculation.findClosestNumber(this.m_chart.m_mixedCalculation.xAxisData,f)).closestIndex,b=A.closest,D=(p-1)/12,1<this.m_chart.m_mixedCalculation.xAxisData.length?(M=0<=f-b?this.m_chart.m_mixedCalculation.xAxisData[C+1]:this.m_chart.m_mixedCalculation.xAxisData[C-1],N=(Math.abs(b-f)+D)/Math.abs(M-b)*100):1==this.m_chart.m_mixedCalculation.xAxisData.length&&f===b&&(M=b,N=(Math.abs(b-f)+D)/1*100)):"year"==this.m_chart.m_annotationformat?N=w[f]?(M=0,NaN):(w[f]=!0,C=(A=this.m_chart.m_mixedCalculation.findClosestNumber(this.m_chart.m_mixedCalculation.xAxisData,f)).closestIndex,b=A.closest,1==this.m_chart.m_mixedCalculation.xAxisData.length&&f===b?(M=b,0):(M=(0<=f-b?this.m_chart.m_mixedCalculation.xAxisData[C+1]:this.m_chart.m_mixedCalculation.xAxisData[C-1])||0,(f<b?b-f:f-b)/(M-b)*100)):this.m_chart.m_annotationformat):N=isNaN(X[F].point)?(C=this.m_chart.m_mixedCalculation.xAxisData.indexOf(X[F].point),0):w[X[F].point]?(M=0,NaN):(w[X[F].point]=!0,C=(A=this.m_chart.m_mixedCalculation.findClosestNumber(this.m_chart.m_mixedCalculation.xAxisData,X[F].point)).closestIndex,b=A.closest,M=(0<=X[F].point-b?this.m_chart.m_mixedCalculation.xAxisData[C+1]:this.m_chart.m_mixedCalculation.xAxisData[C-1])||0,(b>X[F].point?b-X[F].point:X[F].point-b)/(M-b)*100),D=s[C]+this.m_chart.m_mixedCalculation.onePartWidth*N/100,Array.from(new Set(this.m_chart.m_yPositionArray.flat(1))).sort((t,i)=>t-i),y=IsBoolean(this.m_chart.m_annotationseriescolor)?this.color[c]:this.m_chart.m_annotationcolor,i=this.m_chart.m_annotationradius,x=this.m_chart.m_annotationopacity,S=X[F].label,P=this.m_chart.m_annotationtextcolor,v=this.m_chart.getMonthYear(X[F].point.toString()),-1!=this.m_chart.m_mixedCalculation.checkIndexOfData(v.year))&&(this.m_chart.m_annotationXData[F].xposition=D,this.drawLineBetweenPoints(i,.5,y,D,this.m_chart.getStartY(),D,this.m_chart.getEndY(),S,P,x))},MixAnnotSeries.prototype.drawLineBetweenPoints=function(t,i,s,e,a,r,o,h,n,m){this.ctx.beginPath(),this.ctx.save(),this.ctx.lineWidth=t,this.ctx.translate(i,i),this.ctx.strokeStyle=hex2rgb(s,m);i=s;IsBoolean(this.m_chart.m_linetype)&&this.ctx.setLineDash([10,3]),this.ctx.moveTo(parseInt(e),parseInt(a)),this.ctx.lineTo(parseInt(r),parseInt(o)),this.ctx.stroke(),this.ctx.fillStyle=i,IsBoolean(this.m_chart.m_designMode)?this.ctx.translate(parseInt(r+10+t),parseInt(o+35)):this.ctx.translate(parseInt(r+10+t),parseInt(o)),this.ctx.rotate(-Math.PI/2),this.ctx.restore(),this.ctx.closePath()},MixAnnotSeries.prototype.isInRange=function(t){return this.yPositionArray[t]>this.m_chart.getStartY()||this.yPositionArray[t]<=this.m_chart.getEndY()-.1},MixAnnotSeries.prototype.drawPointSeries=function(){for(var t=0,i=this.xPositionArray.length;t<i;t++);};
//# sourceMappingURL=MixedChart.min.js.map