/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function PieChart(t,i){this.base=Chart,this.base(),this.m_x=400,this.m_y=240,this.m_width=300,this.m_height=240,this.m_radius=0,this.m_centerX=0,this.m_centerY=0,this.m_aggregation="",this.m_charttype="Pie",this.m_chartbase="plane",this.m_linewidth=40,this.m_categoryNames=[],this.m_seriesNames=[],this.m_categoryData=[],this.m_seriesData=[],this.m_maxdatalabel=10,this.m_mindatalabelpercentage=5,this.m_startAngle=[],this.m_endAngle=[],this.m_slice=[],this.m_xaxis=null,this.m_yAxis=new Yaxis,this.m_calculation=new Piecalculation,this.m_chartContainer=t,this.m_zIndex=i,this.m_percentageInnerCutout=0,this.m_isCategoryAvailable=!0,this.m_luminance=.5,this.m_showslicevalue="false",this.m_slicelimit="false",this.m_noofslices="5",this.m_slicefontsize="12",this.m_slicelabelfontfamily="Roboto",this.m_slicelabelfontweight="normal",this.m_slicelabelfontstyle="normal",this.m_globalFontSize=0,this.m_slicelabelfontsize="",this.noOfTextOutSide=0,this.m_originalRadius=0,this.m_maxtooltiprows=10,this.m_isSpaceForTextDrawing=!0,this.calculatedPercent=[],this.m_percentlabelposition=75,this.m_seriesDataLabel=[],this.m_seriesDataLabelProperty=[],this.m_enableanimation="false",this.m_pieanimationduration=.5,this.m_slicingdistance=5,this.m_strokelinewidth=1,this.m_datalabelmarkerlength=10,this.m_canvastype="svg",this.m_otherslicescollapse=!1,this.m_enablehundredpercentsum=!0,this.m_enablePercentForTooltip=!0,this.m_drilltoggle=!0,this.m_actualvalues="false"}function Piecalculation(){this.m_globalCal="",this.m_categoryData=[],this.m_seriesData=[],this.m_endX="",this.m_endY="",this.m_width="",this.m_height="",this.m_marginX,this.m_marginLegend,this.m_availableHeight,this.m_availabeWidth,this.total,this.ratio=[],this.m_startAngle=[],this.m_endAngle=[],this.m_chart}function Slice(){this.m_centerX,this.m_centerY,this.m_radius,this.m_startAngle,this.m_endAngle,this.m_color,this.m_chart,this.ctx=""}function PieDoughnutChart(t,i){this.base=PieChart,this.base(),this.m_percentageInnerCutout=.5,this.m_chartContainer=t,this.m_zIndex=i}PieChart.prototype=new Chart,PieChart.prototype.initCanvas=function(){$("#draggableDiv"+this.m_objectid).remove(),this.initializeDraggableDivAndCanvas()},PieChart.prototype.initializeDraggableDivAndCanvas=function(){this.setDashboardNameAndObjectId(),this.m_draggableDiv=this.createDraggableDiv(this.m_chartContainer,this.m_zIndex),this.createDraggableCanvas(this.m_draggableDiv),this.setCanvasContext(),$("#draggableCanvas"+this.m_objectid).hide(),this.createSVG()},PieChart.prototype.createSVG=function(){$("#draggableSvgDiv"+this.m_objectid).remove();var t=document.createElement("div");t.id="draggableSvgDiv"+this.m_objectid,t.style.height=this.m_height+"px",t.style.width=this.m_width+"px",this.m_draggableDiv.appendChild(t),this.paper=Raphael("draggableSvgDiv"+this.m_objectid,this.m_width,this.m_height),this.svgContainerId="svgContainer"+this.m_objectid,this.paper.canvas.setAttribute("id",this.svgContainerId),this.paper.canvas.setAttribute("class","svg_chart_container")},PieChart.prototype.removeSVG=function(){$("#"+this.svgContainerId).remove()},PieChart.prototype.setProperty=function(t){this.ParseJsonAttributes(t.Object,this),this.initCanvas()},PieChart.prototype.ParseJsonAttributes=function(t,i){this.ParsePropertyJsonAttributes(t,i)},PieChart.prototype.updateSvgClassRef=function(){this.m_title=new svgTitle(this),this.m_subTitle=new svgSubTitle},PieChart.prototype.ParsePropertyJsonAttributes=function(t,i){for(var e in this.chartJson=t,this.updateSvgClassRef(),t)if("Chart"==e)for(var a in t[e])switch(a){case"xAxis":case"yAxis":break;case"Title":for(var s in t[e][a]){var r=this.getNodeAttributeName(s);i.m_title[r]=t[e][a][s]}break;case"SubTitle":for(var h in t[e][a]){var r=this.getNodeAttributeName(h);i.m_subTitle[r]=t[e][a][h]}break;case"CategoryColors":var l,o=new CategoryColors;for(l in this.setCategoryColors(o),t[e][a])if("CategoryColor"===l){var n=this.getArrayOfSingleLengthJson(t[e][a][l]);o.cateogryNameColorMap=new Object;for(var m=0,c=n.length;m<c;m++){var _,g=new CategoryColor;for(_ in o.setCategoryColor(g),n[m])g[r=this.getNodeAttributeName(_)]=n[m][_];o.cateogryNameColorMap[g.getCategoryName()]=g.getColor()}}else{var r=this.getNodeAttributeName(l);i.m_categoryColors[r]=t[e][a][l]}o.setCategoryDefaultColorSet();break;default:i[r=this.getNodeAttributeName(a)]=t[e][a]}else i[r=this.getNodeAttributeName(e)]=t[e];void 0!==t.showSliceValue&&(i.m_showslicevalue=t.showSliceValue),void 0!==t.sliceLimit&&(i.m_slicelimit=t.sliceLimit)},PieChart.prototype.getDataProvider=function(){return this.m_dataProvider},PieChart.prototype.getFieldsJson=function(){return this.m_fieldsJson},PieChart.prototype.setFields=function(t){this.m_fieldsJson=t;for(var i=[],e=[],a=0,s=this.m_fieldsJson.length;a<s;a++)switch(this.getProperAttributeNameValue(this.m_fieldsJson[a],"Type")){case"Category":i.push(this.m_fieldsJson[a]);break;case"Series":case"CalculatedField":e.push(this.m_fieldsJson[a])}if(0<i.length&&IsBoolean(i[0].visible))this.m_isCategoryAvailable=!0,this.setCategory(i);else if(1<i.length)for(a=1;a<i.length;a++){if(IsBoolean(i[a].visible)){this.m_isCategoryAvailable=!0,this.setCategory(i);break}this.m_isCategoryAvailable=!1}else this.m_isCategoryAvailable=!1;this.setSeries(e)},PieChart.prototype.setCategory=function(t){this.m_categoryNames=[],this.m_categoryDisplayNames=[],this.m_allCategoryNames=[],this.m_allCategoryDisplayNames=[],this.m_allCategoryFieldsColorForAction=[],this.m_categoryVisibleArr={};for(var i=0,e=0,a=t.length;e<a;e++){this.m_allCategoryNames[e]=this.getProperAttributeNameValue(t[e],"Name");var s=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allCategoryDisplayNames[e]=s,this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),IsBoolean(this.m_categoryVisibleArr[this.m_allCategoryDisplayNames[e]])&&(this.m_categoryNames[i]=this.getProperAttributeNameValue(t[e],"Name"),this.m_categoryDisplayNames[i]=s,this.m_allCategoryFieldsColorForAction[i]=this.getProperAttributeNameValue(t[e],"Color"),i++)}},PieChart.prototype.setSeries=function(t){this.m_seriesNames=[],this.m_seriesDisplayNames=[],this.m_seriesColors=[],this.m_legendNames=[],this.m_seriesVisibleArr={},this.m_allSeriesDisplayNames=[],this.m_allSeriesNames=[];var i=0;this.legendMap={};for(var e=0,a=t.length;e<a;e++){var s=this.formattedDescription(this,this.getProperAttributeNameValue(t[e],"DisplayName"));this.m_allSeriesDisplayNames[e]=s,this.m_allSeriesNames[e]=this.getProperAttributeNameValue(t[e],"Name"),this.m_seriesVisibleArr[this.m_allSeriesNames[e]]=this.getProperAttributeNameValue(t[e],"visible"),IsBoolean(this.m_seriesVisibleArr[this.m_allSeriesNames[e]])&&(this.m_seriesDisplayNames[i]=s,this.m_seriesNames[i]=this.getProperAttributeNameValue(t[e],"Name"),this.m_legendNames[i]=s,this.m_seriesColors[i]=convertColorToHex(this.getProperAttributeNameValue(t[e],"Color")),this.m_seriesDataLabelProperty[i]=this.getProperAttributeNameValue(t[e],"DataLabelCustomProperties"),void 0!==this.m_seriesDataLabelProperty[i]?(IsBoolean(this.m_seriesDataLabelProperty[i].useFieldColor)&&(this.m_seriesDataLabelProperty[i].dataLabelFontColor=this.m_seriesColors[i]),IsBoolean(this.m_showslicevalue)?this.m_seriesDataLabelProperty[i].datalabelField=this.m_seriesNames[i]:IsBoolean(this.m_seriesDataLabelProperty[i].dataLabelUseComponentFormater)&&(this.m_seriesDataLabelProperty[i].datalabelFormaterCurrency=this.m_unit,this.m_seriesDataLabelProperty[i].datalabelFormaterPrecision=this.m_precision,this.m_seriesDataLabelProperty[i].datalabelFormaterPosition=this.m_signposition,this.m_seriesDataLabelProperty[i].datalabelFormaterUnit=this.m_secondaryunit)):this.m_seriesDataLabelProperty[i]=this.getDataLabelProperties(),s={seriesName:this.m_seriesNames[i],displayName:this.m_seriesDisplayNames[i],color:this.m_seriesColors[i],shape:"piechart",index:i},this.legendMap[this.m_seriesNames[i]]=s,i++)}},PieChart.prototype.getSeriesColors=function(){return this.getColors()},PieChart.prototype.getLegendInfo=function(){return this.legendMap},PieChart.prototype.getAllSeriesNames=function(){return this.m_allSeriesNames},PieChart.prototype.getAllCategoryNames=function(){return this.m_allCategoryNames},PieChart.prototype.setLegendNames=function(t){this.m_legendNames=t},PieChart.prototype.getLegendNames=function(){return this.m_categoryData[0]},PieChart.prototype.getCategoryNames=function(){return this.m_categoryNames},PieChart.prototype.getCategoryDisplayNames=function(){return this.m_categoryDisplayNames},PieChart.prototype.getSeriesNames=function(){return this.m_seriesNames},PieChart.prototype.getSeriesDisplayNames=function(){return this.m_seriesDisplayNames},PieChart.prototype.getCategoryColorsForAction=function(){return this.m_allCategoryFieldsColorForAction},PieChart.prototype.getSeriesColorsForAction=function(){return this.m_seriesColors},PieChart.prototype.setCategoryData=function(){this.m_categoryData=[];for(var t=0,i=this.getCategoryNames().length;t<i;t++)this.m_categoryData[t]=this.getDataFromJSON(this.getCategoryNames()[t])},PieChart.prototype.setSeriesDataLabel=function(){this.maxtextwidth=[];for(var t=(IsBoolean(this.m_limitedslicesdisable)?this.getSeriesNames():this.m_seriesDataLabel).length,i=0;i<t;i++)IsBoolean(this.m_limitedslicesdisable)&&(this.m_seriesDataLabel[i]=this.getDataFromJSON(this.m_seriesDataLabelProperty[i].datalabelField)),IsBoolean(this.m_showslicevalue)?this.maxtextwidth[i]=this.getTextWidth("99 %"):(this.m_seriesDataLabel[i]=this.calculateFormatter(this.m_seriesDataLabel[i],this.m_seriesDataLabelProperty[i]),this.maxtextwidth[i]=this.calculatemaxtextwidth(this.m_seriesDataLabel[i]))},PieChart.prototype.setRowWiseDataLabel=function(){if(!IsBoolean(this.m_limitedslicesdisable)&&!IsBoolean(this.m_showslicevalue))for(var t=this.m_seriesDataLabel[0].length,i=0;i<t;i++)this.m_seriesDataLabel[0][i]=this.getFormattedText(this.m_seriesDataLabel[0][i],this.m_seriesDataLabelProperty[0][i])},PieChart.prototype.calculateFormatter=function(t,i){for(var e=0,a=t.length;e<a;e++)t[e]=this.getFormattedText(t[e],i);return t},PieChart.prototype.calculatemaxtextwidth=function(t){for(var i=[],e=0,a=t.length;e<a;e++)i[e]=this.getTextWidth(t[e]);return Math.max.apply(null,i)},PieChart.prototype.getSeriesDataLabel=function(){return this.m_seriesDataLabel},PieChart.prototype.getCategoryData=function(){return this.m_categoryData},PieChart.prototype.setSeriesData=function(){this.m_seriesData=[];for(var t=0,i=this.getSeriesNames().length;t<i;t++)this.m_seriesData[t]=this.getDataFromJSON(this.getSeriesNames()[t])},PieChart.prototype.getSeriesData=function(){return this.m_seriesData},PieChart.prototype.manageSliceData=function(){if(this.m_limitedslicesdisable=!0,IsBoolean(this.m_slicelimit)&&""!=this.m_noofslices&&this.m_noofslices<this.m_categoryData[0].length){this.m_sorteddataarr=[],this.m_limitedslicesdisable=!1,this.m_seriesDataLabel=[],this.remainingData={};var t="";if(1==this.m_noofslices)t=this.sortDataInDescOrder(this.m_seriesData[0],this.m_categoryData[0],this.m_noofslices),this.m_seriesDataLabel[0]=IsBoolean(this.m_showslicevalue)?getDuplicateArray(this.m_seriesData[0]):[t.seriesDataSum],this.m_seriesData[0]=[t.seriesDataSum],this.m_categoryData[0]=["Sum"];else{t=this.sortDataInDescOrder(this.m_seriesData[0],this.m_categoryData[0],this.m_noofslices);this.m_sorteddataarr=t.DataMapArray;for(var i=0,e=this.m_sorteddataarr.length;i<e;i++)this.m_categoryData[0][i]=t.DataMapArray[i].categoryData,this.m_seriesData[0][i]=t.DataMapArray[i].seriesData;this.remainingData=t.remainingData;for(var a=[],s=[],r=0,h=this.m_noofslices-1;r<h;r++)a.push(this.m_categoryData[0][r]),s.push(this.m_seriesData[0][r]);a.push("Others"),s.push(t.seriesDataSum),this.m_seriesData[0]=s,this.m_seriesDataLabel[0]=getDuplicateArray(s),this.m_categoryData[0]=a}}},PieChart.prototype.getOriginalCategoryData=function(){this.m_originalCategoryData=[];for(var t=0,i=this.getCategoryNames().length;t<i;t++)this.m_originalCategoryData[t]=this.getDataFromJSON(this.getCategoryNames()[t]);return this.m_originalCategoryData},PieChart.prototype.setAllFieldsName=function(){this.m_allfieldsName=[];for(var t=0,i=this.getAllCategoryNames().length;t<i;t++)this.m_allfieldsName.push(this.getAllCategoryNames()[t]);for(var e=0,a=this.getAllSeriesNames().length;e<a;e++)this.m_allfieldsName.push(this.getAllSeriesNames()[e])},PieChart.prototype.getAllFieldsName=function(){return this.m_allfieldsName},PieChart.prototype.setAllFieldsDisplayName=function(){this.m_allfieldsDisplayName=[];for(var t=0,i=this.getCategoryDisplayNames().length;t<i;t++)this.m_allfieldsDisplayName.push(this.getCategoryDisplayNames()[t]);for(var e=0,a=this.getSeriesDisplayNames().length;e<a;e++)this.m_allfieldsDisplayName.push(this.getSeriesDisplayNames()[e])},PieChart.prototype.getAllFieldsDisplayName=function(){return this.m_allfieldsDisplayName},PieChart.prototype.mapSeriesWithCategory=function(){if(0<this.getSeriesData().length){var t=this.m_categoryData[0],i=this.getSeriesData()[0],e=this.getColors(),a=!0;if(this.m_defaultlegendfields&&!IsBoolean(this.m_designMode))for(var s=0;s<this.m_defaultlegendfields.length&&0!=(a=this.m_defaultlegendfields[s].value);s++);for(var r=0,h=t.length;r<h;r++)null==this.m_seriesVisibleArr[t[r]]&&(this.m_seriesVisibleArr[t[r]]=a);this.visibleCategories=[],this.visibleSeries=[],this.visibleSeriesColors=[],this.m_visibledataprovider=[],this.m_visibleseriesnames=[],this.legendMap={};for(var l=this.getDataProvider(),o=this.getSeriesNames(),s=0,r=0,n=t.length;r<n;r++){this.m_seriesVisibleArr[t[r]]&&(this.visibleCategories[s]=t[r],this.visibleSeries[s]=i[r],this.visibleSeriesColors[s]=e[r],this.m_visibledataprovider[s]=l[r],this.m_visibleseriesnames[s]=o[r],s++);var m={seriesName:t[r],displayName:t[r],color:e[r],shape:"piechart"};this.legendMap[t[r]]=m}}},PieChart.prototype.getVisibleSeries=function(){return this.visibleSeries},PieChart.prototype.getVisibleCategory=function(){return this.visibleCategories},PieChart.prototype.getVisibleSeriesColor=function(){return this.visibleSeriesColors},PieChart.prototype.setRowWiseFieldsData=function(){for(var t,i=this.getFieldsJson(),e=(this.m_categoryNames[0]="category",this.m_seriesNames[0]="values",[]),a=[],s=[],r=(this.m_seriesDataLabel=[],this.maxtextwidth=[],0),h=0,l=i.length;h<l;h++)IsBoolean(i[h].visible)&&"Series"===i[h].Type&&(e[r]=this.getProperAttributeNameValue(i[h],"Name"),t=this.formattedDescription(this,this.getProperAttributeNameValue(i[h],"DisplayName")),a[r]=t,s[r]=this.getProperAttributeNameValue(i[h],"DataLabelCustomProperties"),r++);this.m_categoryData[0]=a,this.m_seriesData=[];for(var o=[],n=[],m=0,c=this.getDataProvider().length;m<c;m++)if(0==m)for(var _ in e)if(e.hasOwnProperty(_)){for(var r=0,g=e.length;r<g;r++)e[r]==e[_]&&o.push(this.getDataProvider()[m][e[_]]);var d=""===s[_].datalabelField?e[_]:s[_].datalabelField;n.push(this.getDataProvider()[m][d]),IsBoolean(this.m_showslicevalue)||(IsBoolean(s[_].dataLabelUseComponentFormater)&&(s[_].datalabelFormaterCurrency=this.m_unit,s[_].datalabelFormaterPrecision=this.m_precision,s[_].datalabelFormaterPosition=this.m_signposition,s[_].datalabelFormaterUnit=this.m_secondaryunit),IsBoolean(n[_])&&(n[_]=this.getFormattedText(n[_],s[_])))}this.m_seriesData[0]=o,this.m_seriesDataLabel[0]=n,IsBoolean(this.m_showslicevalue)?this.maxtextwidth[0]=this.getTextWidth("99 %"):this.maxtextwidth[0]=this.calculatemaxtextwidth(this.m_seriesDataLabel[0]),this.m_seriesDataLabelProperty[0]=s},PieChart.prototype.setAllFieldsNameForUnavailableCategory=function(){this.m_allfieldsName=[];for(var t=0,i=this.getAllSeriesNames().length;t<i;t++)this.m_allfieldsName.push(this.getAllSeriesNames()[t])},PieChart.prototype.setAllFieldsDisplayNameForUnavailableCategory=function(){this.m_allfieldsDisplayName=[];for(var t=0,i=this.m_seriesNames.length;t<i;t++)this.m_allfieldsDisplayName.push(this.m_seriesDisplayNames[t])},PieChart.prototype.init=function(){this.createSVG(),this.initMouseMoveEvent(this.m_chartContainer),this.initMouseClickEventForSVG(this.svgContainerId),this.m_isCategoryAvailable?(this.setCategoryData(),this.setSeriesData(),this.manageSliceData(),this.setSeriesDataLabel(),this.setAllFieldsName(),this.setAllFieldsDisplayName()):(this.setRowWiseFieldsData(),this.manageSliceData(),this.setRowWiseDataLabel(),this.setAllFieldsNameForUnavailableCategory(),this.setAllFieldsDisplayNameForUnavailableCategory()),this.mapSeriesWithCategory(),this.isSeriesDataEmpty(),this.m_chartFrame.init(this),this.m_title.init(this),this.m_subTitle.init(this),IsBoolean(this.m_isEmptySeries)||(this.initializeCalculation(),this.setSlice()),this.initializeToolTipProperty(),this.m_tooltip.init(this)},PieChart.prototype.initializeCalculation=function(){var t=this.updateSeriesData(this.visibleSeries);this.m_calculation.init(this,t),this.m_yAxis.init(this,this.m_calculation),this.m_xmlColor=this.m_seriescolor.split(",")},PieChart.prototype.updateSeriesData=function(t){var i,e=[];this.m_displaySeriesDataFlag=[];for(var a=0,s=t.length;a<s;a++)this.m_displaySeriesDataFlag[a]=!0,isNaN(t[a])?(this.m_displaySeriesDataFlag[a]=!1,i=getNumericComparableValue(t[a]),isNaN(i)?e.push(0):e.push(i)):e.push(t[a]);return e},PieChart.prototype.setSlice=function(){var t=this.getVisibleSeriesColor();this.m_startAngle=this.m_calculation.getStartAngle(),this.m_endAngle=this.m_calculation.getEndAngle(),this.m_strkelinewidth=2,this.m_strokeangle=.0349066,this.checkNoOfSlices(),IsBoolean(this.m_seriesDataLabelProperty[0].showDataLabel)||this.m_seriesDataLabelProperty[0][0]&&IsBoolean(this.m_seriesDataLabelProperty[0][0].showDataLabel)?this.m_radius=150<this.m_height?this.radius-(this.m_datalabelmarkerlength+10):this.radius:this.m_radius=this.radius,this.m_centerX=this.centerX,this.m_centerY=this.centerY,this.m_slice=[];for(var i=0,e=this.getVisibleSeries().length;i<e;i++)this.m_slice[i]=new Slice,this.m_slice[i].init(this.m_centerX,this.m_centerY,this.m_radius,this.m_startAngle[i],this.m_endAngle[i],t[i],this.ctx,this.m_chartbase,this.m_luminance,this,this.m_strkelinewidth,this.m_strokecolor,this.m_strokeangle)},PieChart.prototype.showDataLabelCheck=function(){for(var t=!1,i=0,e=this.m_seriesDataLabelProperty[0].length;i<e;i++)if(IsBoolean(""!==this.m_seriesDataLabelProperty[0][i]&&this.m_seriesDataLabelProperty[0][i].showDataLabel)){t=!0;break}return t},PieChart.prototype.manageCalulationForTextDrawing=function(){return this.m_originalRadius=this.radius,this.m_isSpaceForTextDrawing=!0,"Pie"==this.m_charttype?this.m_globalFontSize=+this.radius/10:this.m_globalFontSize="SemiDoughnut"==this.m_charttype?(+this.radius+this.m_linewidth/2)/15:(+this.radius+this.m_linewidth/2)/10,this.m_slicelabelfontsize=""==this.m_slicefontsize?this.fontScaling(this.m_globalFontSize):this.fontScaling(this.m_slicefontsize),this.m_oldRadius=this.radius,IsBoolean(this.isMarkOutsideOfSlice())?("Pie"==this.m_charttype?this.m_radius=this.radius-(this.radius*this.noOfTextOutSide/8+this.maxtextwidth[0]):(this.radius=+this.radius+this.m_linewidth/2-(this.radius+this.m_linewidth/2)*this.noOfTextOutSide/8-this.maxtextwidth[0],this.m_radius=this.radius),this.m_radius<0&&(this.m_isSpaceForTextDrawing=!1,this.m_radius=this.m_oldRadius),this.m_radius):(this.m_radius=this.radius,this.m_radius-20)},PieChart.prototype.isMarkOutsideOfSlice=function(){for(var t=!1,i=this.noOfTextOutSide=0,e=this.getCategoryData()[0].length;i<e;i++){var a="Pie"==this.m_charttype?this.m_originalRadius:this.m_linewidth,s=this.m_startAngle[i],r=this.m_endAngle[i],h="Pie"==this.m_charttype?this.m_originalRadius:this.m_linewidth,h=this.calCulateDistanceBetweenTwoPoints(h,+r-+s);(this.maxtextwidth[0]>h||this.maxtextwidth[0]>a)&&(t=!0,this.noOfTextOutSide++)}return this.noOfTextOutSide=3<this.noOfTextOutSide?3:this.noOfTextOutSide%4,t},PieChart.prototype.checkNoOfSlices=function(){for(var t,i=0,e=0,a=this.getCategoryData()[0].length;e<a;e++)this.m_seriesVisibleArr[this.getCategoryData()[0][e]]&&(t=getNumericComparableValue(this.getSeriesData()[0][e]),isNaN(t)||0==+t||(i+=1));this.m_isOneSlice=!(1<i)},PieChart.prototype.drawChart=function(){this.drawChartFrame(),this.drawTitle(),this.drawSubTitle(),this.drawLegends();var t=this.getArraySUM(this.getVisibleSeries());IsBoolean(this.m_isEmptySeries)||0===t||isNaN(t)?this.drawSVGMessage(this.m_status.noData):0<this.getVisibleSeries().length?(this.angleDiff=[],"Pie"!=this.m_charttype?this.drawPieDoughnutChart():this.drawPieChart(),150<this.m_height&&this.drawDataLabels()):this.drawSVGMessage("No visible Series Available")},PieChart.prototype.drawObject=function(){this.drawSVGObject()},PieChart.prototype.drawChartFrame=function(){this.m_chartFrame.drawSVGFrame()},PieChart.prototype.drawTitle=function(){this.m_title.draw()},PieChart.prototype.drawSubTitle=function(){this.m_subTitle.draw()},PieChart.prototype.drawPieChart=function(){this.drawSlices()},PieChart.prototype.drawGradientOnArc=function(){"plane"!=this.m_chartbase&&(this.ctx.beginPath(),this.ctx.save(),this.ctx.shadowColor="#BCBDC8",this.ctx.shadowBlur=8,this.ctx.fillStyle="#dcdcff",this.ctx.arc(this.m_centerX,this.m_centerY,this.m_radius,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.closePath(),this.ctx.restore())},PieChart.prototype.drawSlices=function(){if(""!==this.getCategoryData()[0])for(var t=0,i=0,e=this.getCategoryData()[0].length;i<e;i++)this.m_seriesVisibleArr[this.getCategoryData()[0][i]]&&(this.m_slice[t]&&this.m_slice[t].draw(t),t++)},PieChart.prototype.drawDataLabels=function(){this.m_datalabelproperty={};for(var t,i,e,a,s,r,h,l,o,n,m,c,_,g,d,u,p,f,y=0,b=0,C=0,D=0,v=this.getVisibleCategory().length;D<v;D++)C<this.m_maxdatalabel&&(_=D-1,IsBoolean(this.m_isCategoryAvailable)?this.m_datalabelproperty=this.m_seriesDataLabelProperty[0]:this.m_datalabelproperty=this.m_datalabelproperties[D],m=this.m_dataLabelsValues[D],t=this.m_datalabelproperty,n=IsBoolean(this.m_showslicevalue)?m:getNumericComparableValue(this.m_seriesData[0][D]),m=IsBoolean(t.hideDataLabel)&&n==t.hideDataLabelText?"":m,m=IsBoolean(this.m_showslicevalue)&&0==m?"":m,""!==(m=IsBoolean(this.m_showslicevalue)?m>this.m_mindatalabelpercentage?m:"":m))&&(IsBoolean(this.m_showslicevalue)&&(m+="%"),C++,n=this.m_centerX+(this.m_datalabelmarkerlength+10+this.m_radius)*Math.cos(this.angleDiff[D]),i=this.m_centerY+(this.m_datalabelmarkerlength+10+this.m_radius)*Math.sin(this.angleDiff[D]),e=this.m_centerX+this.m_radius*Math.cos(this.angleDiff[D]),a=this.m_centerY+this.m_radius*Math.sin(this.angleDiff[D]),s=this.m_centerX+(this.m_datalabelmarkerlength+this.m_radius)*Math.cos(this.angleDiff[D]),r=this.m_centerY+(this.m_datalabelmarkerlength+this.m_radius)*Math.sin(this.angleDiff[D]),f=p=o=null,this.ctx.font=t.datalabelFontStyle+" "+t.datalabelFontWeight+" "+t.dataLabelFontSize+"px "+selectGlobalFont(t.datalabelFontFamily),u=this.ctx.measureText(m),n=(g=this.textXpositionCalculation(n,u,m)).xPos,m=g.Text,g=Number(t.dataLabelFontSize),d=Number(t.dataLabelFontSize),IsBoolean(this.m_updateddesign)&&(1==D&&(c=this.m_centerY+(this.m_datalabelmarkerlength+this.m_radius)*Math.sin(this.angleDiff[_])),e<s?(y++,n=(h=s+30)+u.width/2+5,c=r=r<c+g&&1!=y?c+g:r):s<e?(b++,n=(h=s-30)-u.width/2-5,c=r=c-g<r&&1!=b?c-g:r):n=(h=s+30)+d,l=i=r),IsBoolean(n+u.width>this.m_width)?n=(h=s)+u.width/2+5:IsBoolean(n-u.width<this.m_x)&&(n=(h=s)-u.width/2-5),IsBoolean(t.showDataLabel))&&""!==m&&(p=this.paper.path(["M",e,a,"L",s,r]),f=this.paper.path(["M",s,r,"L",h,l]),p.id="line"+D,f.id="linex"+D,p.attr({stroke:this.m_slice[D].m_color}),IsBoolean(this.m_updateddesign)&&f.attr({stroke:this.m_slice[D].m_color}),IsBoolean(t.datalabelBackgroundRect)&&""!==m&&(this.m_datalablebackgroundrect=!!IsBoolean(t.datalabelBackgroundRect)||this.m_datalablebackgroundrect,(o=this.paper.text(n,i,m)).attr({"font-size":t.dataLabelFontSize,"font-family":selectGlobalFont(t.datalabelFontFamily),"font-style":t.datalabelFontStyle,"font-weight":t.datalabelFontWeight,fill:t.dataLabelFontColor}),g=(_=o.getBBox()).width,d=_.height,(u=this.paper.rect(n-g/2-5,i-3*d/4,g+10,d+10,2)).id="rect"+D,u.attr({fill:t.datalabelBackgroundRectColor,stroke:t.datalabelStrokeColor})),(o=this.paper.text(n,i,m)).id="text"+D,o.attr({"font-size":t.dataLabelFontSize,"font-family":selectGlobalFont(t.datalabelFontFamily),"font-style":t.datalabelFontStyle,"font-weight":t.datalabelFontWeight,fill:t.dataLabelFontColor}))},PieChart.prototype.textXpositionCalculation=function(t,i,e){var a=i.width/2,s=this.m_x,r=this.m_width;return r-s<i.width?{xPos:t,Text:""}:t-a<s?{xPos:t+Math.abs(a-(t-s))+5,Text:e}:r<t+a?{xPos:t-Math.abs(a-(r-t))-5,Text:e}:{xPos:t,Text:e}},PieChart.prototype.drawValueOnSlices=function(){var t=this.m_seriesDataLabel[0];this.m_datalabelproperty={};for(var i,e,a,s,r,h,l,o=this.counter=0,n=this.getVisibleCategory().length;o<n;o++)IsBoolean(this.m_isCategoryAvailable)?this.m_datalabelproperty=this.m_seriesDataLabelProperty[0]:this.m_datalabelproperty=this.m_seriesDataLabelProperty[0][o],""!=this.m_seriesData[0][o]&&0!=t[o]&&(i="Pie"==this.m_charttype?this.m_radius:this.m_linewidth,e=this.m_slice[o].m_centerX,a=this.m_slice[o].m_centerY,s=this.m_slice[o].m_startAngle,r=this.m_slice[o].m_endAngle,l="Pie"==this.m_charttype?this.m_radius:this.m_linewidth,h=(+r-+s)/2+s,l=this.calCulateDistanceBetweenTwoPoints(l,+r-+s),IsBoolean(this.m_showslicevalue)&&(t[o]=t[o]+"%"),IsBoolean(this.m_datalabelproperty.showDataLabel))&&(this.maxtextwidth[0]>l||this.maxtextwidth[0]>i?(this.checkLastSeries(t,o),this.drawStraightLineToSlice(h,e,a,this.counter,t[o]),this.counter++):this.drawTextOnSlice(h,e,a,t[o],this.m_slicelabelfontsize))},PieChart.prototype.getFormattedText=function(t,i){var e,a,s,r,h,l;return isNaN(getNumericComparableValue(t))?t:((""+t).indexOf(","),e=""!=i.datalabelFormaterPosition?i.datalabelFormaterPosition:"suffix",a=i.datalabelFormaterPrecision,h=i.datalabelFormaterCurrency,i=i.datalabelFormaterUnit,l="default"===a?+getNumericComparableValue(t):(+getNumericComparableValue(t)).toFixed(a),""!=h?(s=this.m_util.getFormatterSymbol("Currency",h),"auto"==(i=this.m_util.getFormatterSymbol("Number",i))?(t=getNumericComparableValue(t),r=getNumberFormattedSymbol(+t,h),h=getNumberFormattedNumericValue(+t,a,h),h=this.m_util.updateTextWithFormatter(h,"",a),l=this.m_util.addFormatter(h,r,"suffix")):(l=this.m_util.updateTextWithFormatter(l,i,a),"none"!=i&&""!=i&&(l=this.m_util.addFormatter(l,i,"suffix"))),"NaN"==l||""===l?"":this.m_util.addFormatter(getFormattedNumberWithCommas(l,this.m_numberformatter),s,e)):"NaN"==l?t:l)},PieChart.prototype.getColors=function(){var t=this.getSeriesData()[0];if(IsBoolean(this.m_isCategoryAvailable)&&null!=t){var i=this.m_seriescolor.split(",");if(!IsBoolean(this.m_designMode)&&""!=this.getCategoryColors()&&0<this.getCategoryColors().getCategoryColor().length&&IsBoolean(this.getCategoryColors().getshowColorsFromCategoryName())&&(i=this.getCategoryColors().getCategoryColorsForCategoryNames(this.getCategoryData()[0],this.m_allCategoryFieldsColorForAction)),t&&i.length<t.length)for(var e=i.length,a=0;e<t.length;e++,a++)i[e]=i[a]}else{null==this.m_seriesVisibleArr&&(this.m_seriesVisibleArr=[]);for(var i=[],s=0,r=this.getFieldsJson(),e=0,h=r.length;e<h;e++)IsBoolean(r[e].visible)&&(i[s]=this.getProperAttributeNameValue(r[e],"Color"),s++)}return i},PieChart.prototype.isTextDrawingOutSide=function(){return!!IsBoolean(this.m_showslicevalue)&&!!IsBoolean(this.isMarkOutsideOfSlice())},PieChart.prototype.allCategoryValuesSame=function(t,i){if(null==i[t])return!1;for(var e=t,a=i.length;e<a;e++)if(i[e]!==i[t])return!1;return!0},PieChart.prototype.sortDataInDescOrder=function(t,i,e){for(var a=t,s=i,r="",h=[],l={},o=[],n={},m=0,c=0,_=a.length;c<_;c++)r=+getNumericComparableValue(a[c]),(isNaN(r)||""===a[c]?(l={categoryData:s[c],index:c,seriesData:a[c],value:a[c]},o):(l={categoryData:s[c],index:c,seriesData:a[c],value:r},h)).push(l);h.sort(function(t,i){return i.value-t.value});for(var g=0,_=o.length;g<_;g++)h.push(o[g]);for(var d=e-1,_=h.length;d<_;d++)n[h[d].categoryData+"-"+h[d].index]=h[d].seriesData,m+=r=isNaN(h[d].value)?0:h[d].value;return{DataMapArray:h,seriesDataSum:m,remainingData:n}},PieChart.prototype.calCulateDistanceBetweenTwoPoints=function(t,i){i=180*i/Math.PI;return 2*Math.PI*t*(i/360)},PieChart.prototype.calculatePercent=function(){for(var t=this.getCalculatedPercent(),i=!0,e=0,a=t.length;e<a;e++)0!=t[e]&&(i=!1);try{i||(t=this.getRoundValue(t,100))}catch(t){}return t},PieChart.prototype.getCalculatedPercent=function(){return this.calculatedPercent},PieChart.prototype.setCalculatedPercent=function(){for(var t=0,i=0,e=0,a=this.getCategoryData()[0].length;e<a;e++)this.m_seriesVisibleArr[this.getCategoryData()[0][e]]&&(h=getNumericComparableValue(this.m_seriesData[0][e]),isNaN(h)||(t+=Math.abs(+h),IsBoolean(this.m_showslicevalue)&&(o=getNumericComparableValue(this.m_seriesDataLabel[0][e]),isNaN(o)||(i+=Math.abs(+o)))));var s=[],r=[];this.m_dataLabelsValues=[],this.m_datalabelproperties=[];for(var h,l,o,n,e=0,m=this.getCategoryData()[0].length;e<m;e++)this.m_seriesVisibleArr[this.getCategoryData()[0][e]]&&(h=getNumericComparableValue(this.m_seriesData[0][e]),l=isNaN(h)||0==+h?"":this.m_seriesDataLabel[0][e],n=isNaN(100*h/t)?0:100*h/t,s.push(Math.abs(n)),this.m_dataLabelsValues.push(l),this.m_datalabelproperties.push(this.m_seriesDataLabelProperty[0][e]),IsBoolean(this.m_showslicevalue))&&(o=""===l?"":getNumericComparableValue(l),n=isNaN(100*o/i)?0:100*o/i,r.push(Math.abs(n)));this.m_actualvalues=null==this.m_actualValues?this.m_actualvalues:this.m_actualValues,this.calculatedPercent=s,IsBoolean(this.m_showslicevalue)&&IsBoolean(this.m_enablehundredpercentsum)&&(IsBoolean(this.m_actualvalues)?this.m_dataLabelsValues=r.map(function(t){return(Math.round(100*t)/100).toFixed(2)}):this.m_dataLabelsValues=this.getCloserRoundValue(r,100))},PieChart.prototype.checkLastSeries=function(t,i){for(var e=this.getCategoryData()[0].length-1;0==t[e];)--e;e==i&&this.counter%3==0&&this.counter++},PieChart.prototype.drawStraightLineToSlice=function(t,i,e,a,s){var r=0,h=0,l=0,o=this.m_originalRadius/8,n="Pie"==this.m_charttype?.7*this.m_radius:this.radius+this.m_linewidth/2,m=this.m_radius,c=+i+n*Math.cos(t),n=+e+n*Math.sin(t),l="Pie"==this.m_charttype?(h=+i+(m+ +(r=o+a%3*o))*Math.cos(t),+e+(m+ +r)*Math.sin(t)):(i=a%3,i++,h=c+ +(r="SemiDoughnut"==this.m_charttype?(this.m_oldRadius-this.m_linewidth/2)*i/8:(this.m_oldRadius+this.m_linewidth/2)*i/8)*Math.cos(t),n+ +r*Math.sin(t));this.drawLine(c,n,h,l),this.drawValueOutOfSlice(h,l,s,t)},PieChart.prototype.drawValueOutOfSlice=function(t,i,e,a){var s=this.getTextWidth(e)/2,t=t+s*Math.cos(a),i=i+s*Math.sin(a);this.ctx.beginPath(),this.ctx.font=this.m_datalabelproperty.datalabelFontStyle+" "+this.m_datalabelproperty.datalabelFontWeight+" "+this.fontScaling(this.m_datalabelproperty.dataLabelFontSize)+"px "+selectGlobalFont(this.m_datalabelproperty.datalabelFontFamily),this.ctx.textAlign="center",this.ctx.fillStyle=this.m_datalabelproperty.dataLabelFontColor,this.ctx.fillText(e,t,i),this.ctx.closePath()},PieChart.prototype.drawLine=function(t,i,e,a){this.ctx.beginPath(),this.ctx.lineWidth=1,this.ctx.strokeStyle=this.m_datalabelproperty.dataLabelFontColor,this.ctx.moveTo(t,i),this.ctx.lineTo(e,a),this.ctx.stroke()},PieChart.prototype.drawTextOnSlice=function(t,i,e,a,s){var r="Pie"==this.m_charttype?this.radius*this.m_percentlabelposition/100:this.radius,i=("Pie"==this.m_charttype&&this.getTextWidth(a)>.3*this.m_radius&&(r=this.m_radius-this.getTextWidth(a)/2),1==this.m_seriesData[0].length&&"Pie"==this.m_charttype?i:+i+r*Math.cos(t)),e=1==this.m_seriesData[0].length&&"Pie"==this.m_charttype?e:+e+r*Math.sin(+t);this.ctx.beginPath(),this.ctx.font=this.m_datalabelproperty.datalabelFontStyle+" "+this.m_datalabelproperty.datalabelFontWeight+" "+this.fontScaling(this.m_datalabelproperty.dataLabelFontSize)+"px "+selectGlobalFont(this.m_datalabelproperty.datalabelFontFamily),this.ctx.textAlign="center",this.ctx.fillStyle=this.m_datalabelproperty.dataLabelFontColor,this.ctx.fillText(a,i,e),this.ctx.closePath()},PieChart.prototype.getTextWidth=function(t){return this.ctx.font=this.m_slicelabelfontstyle+" "+this.m_slicelabelfontweight+" "+this.fontScaling(this.m_slicelabelfontsize)+"px "+selectGlobalFont(this.m_slicelabelfontfamily),this.ctx.measureText(t).width},PieChart.prototype.getArraySUM=function(t){return void 0!==t&&1<t.length?t.reduce(function(t,i){t=getNumericComparableValue(t),t=isNaN(t)?0:t,i=getNumericComparableValue(i);return+t+ +(isNaN(i)?0:i)}):void 0!==t&&1===t.length?(t=getNumericComparableValue(t[0]),isNaN(t)?0:+t):""},PieChart.prototype.getStartX=function(){return this.m_x+0},PieChart.prototype.getStartY=function(){return+(this.m_y+this.m_height)},PieChart.prototype.getEndX=function(){return+(this.m_x+this.m_width)},PieChart.prototype.getEndY=function(){return this.m_y+ +this.getMarginForTitle()+ +this.getMarginForSubTitle()},PieChart.prototype.getMarginForSubTitle=function(){var t=IsBoolean(this.m_updateddesign)?3:1.5,t=IsBoolean(this.m_subTitle.m_showsubtitle)?""!=this.m_subTitle.getDescription()?this.m_subTitle.getFontSize()*t:10:0;return t},PieChart.prototype.getToolTipData=function(t,i){return"Pie"!=this.m_charttype?this.getDoughnutToolTipData(t,i):this.getPieToolTipData(t,i)},PieChart.prototype.getPieToolTipData=function(t,i){if(!IsBoolean(this.m_isEmptySeries)&&"None"!==this.m_customtextboxfortooltip.dataTipType&&!IsBoolean(this.isEmptyCategory)){if("None"===this.m_customtextboxfortooltip.dataTipType)return!1;this.seriesValue=[],this.categoryValue=[],this.percentVal=this.getCalculatedPercent();var e=this.updateSeriesData(this.getVisibleSeries()),a=this.getVisibleCategory(),t=t-this.centerX,i=i-this.centerY,s=Math.atan2(i,t),t=Math.sqrt(Math.pow(t,2)+Math.pow(i,2));if(this.m_startAngle=[],this.m_endAngle=[],this.m_startAngle=this.m_calculation.getStartAngle(),this.m_endAngle=this.m_calculation.getEndAngle(),t<=this.m_radius)for(var r,h,l,o=0,n=e.length;o<n;o++)(s=s<-Math.PI/2?2*Math.atan2(0,-1)+s:s)>=this.m_startAngle[o]&&s<=this.m_endAngle[o]?(l={},"Default"==this.m_customtextboxfortooltip.dataTipType?((l={cat:"",color:"",ser:"",data:[]}).cat=a[o],l.color=this.getVisibleSeriesColor()[o],IsBoolean(this.m_isCategoryAvailable)&&(l.ser=this.getSeriesDisplayNames()[0]),"Others"==a[o]&&IsBoolean(this.m_slicelimit)&&""!=this.m_noofslices&&this.m_noofslices<this.getOriginalCategoryData()[0].length?l.data=this.remainingRecordInToolTip():(r=+e[o],isNaN(r)||r%1==0||"default"===this.m_tooltipprecision||(r=r.toFixed(this.m_tooltipprecision)),r=this.getFormatterForToolTip(r),(h=new Array)[0]=r,IsBoolean(this.m_enablePercentForTooltip)&&(h[1]=this.percentVal[o].toFixed(2)+"%"),l.data.push(h))):l=this.getDataProvider()[o]):this.hideToolTip();else this.hideToolTip();return l}},PieChart.prototype.getFormatterForToolTip=function(t){var i;return!isNaN(getNumericComparableValue(t))&&""!=t&&null!=t&&(t=getNumericComparableValue(t),i="default"!==this.m_precision?0==this.m_precision&&t%1!=0?2:this.m_precision:void 0!==(i=(t+"").split("."))[1]?i[1].length:0,t=this.getLocaleWithPrecision(t,i,this.m_numberformatter),IsBoolean(this.m_yAxis.m_isFormatter)&&null!=this.m_yAxis.m_unitSymbol&&(t=this.m_yAxis.m_util.addFormatter(t,this.m_yAxis.m_unitSymbol,this.m_yAxis.m_formatterPosition,this.m_precision)),IsBoolean(this.m_yAxis.m_isSecondaryFormatter))&&"%"===this.m_yAxis.m_secondaryUnitSymbol?this.m_yAxis.getSecondaryFormaterAddedText(t,this.m_yAxis.m_secondaryUnitSymbol):t},PieChart.prototype.getFormatterText=function(t){t[0]=this.getFormatterText(this.seriesValue[i]);var e=t;return e=IsBoolean(this.getFixedLabel())?e:this.m_yAxis.getFormattedText(t)},PieChart.prototype.drawTooltip=function(t,i){var e;IsBoolean(this.m_isEmptySeries)||this.m_designMode||(e=this.getToolTipData(t,i),this.m_hovercallback&&""!=this.m_hovercallback?this.drawCallBackContent(t,i,e):this.drawTooltipContent(e))},PieChart.prototype.drawTooltipContent=function(t){this.m_tooltip.draw(t,this.m_componenttype)},PieChart.prototype.getDrillDataPoints=function(t,i){if(IsBoolean(this.m_drilltoggle)?this.m_drilltoggle=!1:this.m_drilltoggle=!0,!IsBoolean(this.m_isEmptySeries))return"Pie"!=this.m_charttype?this.getDoughnutDrillDataPoints(t,i):this.getPieDrillDataPoints(t,i)},PieChart.prototype.getPieDrillDataPoints=function(t,i){var e=this.updateSeriesData(this.getVisibleSeries()),t=(this.getVisibleCategory(),t-this.centerX),i=i-this.centerY,a=Math.atan2(i,t),t=Math.sqrt(Math.pow(t,2)+Math.pow(i,2));if(this.m_startAngle=[],this.m_endAngle=[],this.m_startAngle=this.m_calculation.getStartAngle(),this.m_endAngle=this.m_calculation.getEndAngle(),t<=this.m_radius)for(var s=0,r=e.length;s<r;s++)if((a=a<-Math.PI/2?2*Math.atan2(0,-1)+a:a)>=this.m_startAngle[s]&&a<=this.m_endAngle[s])return{drillRecord:IsBoolean(this.m_slicelimit)&&IsBoolean(this.m_isCategoryAvailable)&&+this.m_noofslices<this.getOriginalCategoryData()[0].length&&1!=+this.m_noofslices?this.getSliceValueMap(s):IsBoolean(this.m_isCategoryAvailable)?this.getFieldNameValueMapPie(s):this.getFieldNameValueMapPie(0),drillColor:this.getVisibleSeriesColor()[s]}},PieChart.prototype.getSliceValueMap=function(t){var i=new Object,e=[],a=this.m_categoryData[0],s=getDuplicateArray(this.getDataProvider()),r=getDuplicateArray(this.m_sorteddataarr);this.visibleSeriesFieldForSlice=this.getSeriesNames()[0];for(var h,l=0,o=0,n=a.length;o<n;o++)this.m_seriesVisibleArr[a[o]]&&(e[l]=s[+r[o].index],l++);for(h in e[t])i[h]=e[t][h];return i},PieChart.prototype.getFieldNameValueMapPie=function(t){var i=new Object;if(IsBoolean(this.m_isCategoryAvailable))for(var e in this.m_visibledataprovider[t])i[e]=this.m_visibledataprovider[t][e];else for(var e in this.getDataProvider()[t])i[e]=this.getDataProvider()[t][e];return i},Piecalculation.prototype.init=function(t,i){this.m_chart=t,this.total=0,this.m_categoryData=t.m_categoryData,this.m_seriesData=i,this.m_endX=t.getEndX(),this.m_endY=t.getEndY(),this.m_x=t.m_x,this.m_y=t.m_y,this.m_chart.availableWidth=t.m_width,this.m_chart.availableHeight=this.m_chart.m_height-this.m_chart.getTotalMarginForTitleSubtitle()-this.m_chart.getBottomBarMargin()-this.m_chart.getMarginForTooltip(),this.m_chart.lineWidthCalculation(),this.m_chart.radiusCalculation(),this.m_chart.centerXCalcalculation(),this.m_chart.centerYCalcalculation(),this.m_chart.setCalculatedPercent(),this.RatioCalc(),this.Ratiofun(),this.setStartAngle(),this.setEndAngle()},Piecalculation.prototype.RatioCalc=function(){for(var t=0,i=this.m_seriesData.length;t<i;t++)this.total=+this.total+Math.abs(+this.m_seriesData[t])},Piecalculation.prototype.Ratiofun=function(){for(var t,i=0,e=this.m_seriesData.length;i<e;i++)0!=this.total?(t="SemiDoughnut"==this.m_chart.m_charttype?Math.PI:2*Math.PI,this.ratio[i]=t*Math.abs(+this.m_seriesData[i])/this.total):this.ratio[i]=0},Piecalculation.prototype.getStartAngle=function(){return this.m_startAngle},Piecalculation.prototype.setStartAngle=function(){this.m_startAngle=[];for(var t=0,i=this.m_seriesData.length;t<i;t++)this.m_startAngle[t]=0==t?"SemiDoughnut"==this.m_chart.m_charttype?Math.PI:-Math.PI/2:this.ratio[t-1]+this.m_startAngle[t-1];return this.m_startAngle},Piecalculation.prototype.getEndAngle=function(){return this.m_endAngle},Piecalculation.prototype.setEndAngle=function(){this.m_endAngle=[];for(var t=0,i=this.m_seriesData.length;t<i;t++)this.m_endAngle[t]=0==t?"SemiDoughnut"==this.m_chart.m_charttype?+this.ratio[t]+Math.PI:+this.ratio[t]-Math.PI/2:+this.ratio[t]+ +this.m_endAngle[t-1];return this.m_endAngle},Piecalculation.prototype.radiusCalc=function(){return this.m_availableHeight>=this.m_availabeWidth?this.radius=this.m_availabeWidth/2:this.radius=this.m_availableHeight/2,this.radius<1&&(this.radius=1),this.radius},Piecalculation.prototype.centerXCalc=function(){return this.centerX},Piecalculation.prototype.centerYCalc=function(){return this.centerY},Slice.prototype.init=function(t,i,e,a,s,r,h,l,o,n,m,c,_){this.m_centerX=t,this.m_centerY=i,this.m_radius=e,this.m_startAngle=a,this.m_chart=n,this.m_endAngle=s,this.m_color=convertColorToHex(r),this.ctx=h,this.m_chartbase=l,this.m_luminance=o,this.m_strkelinewidth=m,this.m_strokecolor=c},Slice.prototype.draw=function(t){this.drawRaphael(t)},Slice.prototype.drawRaphael=function(t){var i,_=this,e=hex2rgb(this.m_color,this.m_chart.m_coloropacity),a=this.m_startAngle*(180/Math.PI),s=(i=this.m_chart.m_isOneSlice?this.m_endAngle.toFixed(3)*(180/Math.PI):this.m_endAngle*(180/Math.PI),this.m_chart.angleDiff[t]=(this.m_startAngle+this.m_endAngle)/2,this.m_radius),r=this.m_centerX,h=this.m_centerY,l=IsBoolean(this.m_chart.m_enableanimation)?1e3*this.m_chart.m_pieanimationduration:0,o=null;this.m_chart.paper.customAttributes.sector=function(t,i,e,a,s){var r=Math.PI/180,h=t+e*Math.cos(a*r),l=t+e*Math.cos(s*r),o=i+e*Math.sin(a*r),r=i+e*Math.sin(s*r);return{path:[["M",t,i],["L",h,o],["A",e,e,0,+(180<Math.abs(s-a)),1,l,r],["z"]]}},(o=this.m_chart.paper.path().attr({sector:[r,h,s,0,0],stroke:_.m_strokecolor,"stroke-width":_.m_chart.m_strokelinewidth,transform:"","stroke-linejoin":"round","stroke-linecap":"round",fill:e}).data("id","svgPath"+t).click(function(){var t=this[0],i=_.m_chart.paper.getById("line"+this.id.split("svgPath")[1]),e=_.m_chart.paper.getById("linex"+this.id.split("svgPath")[1]),a=_.m_chart.paper.getById("text"+this.id.split("svgPath")[1]),s=_.m_chart.paper.getById("rect"+this.id.split("svgPath")[1]);if(IsBoolean(_.m_chart.m_otherslicescollapse))for(var r=0;r<_.m_chart.m_slice.length;r++){var h=_.m_chart.paper.getById("line"+r),l=_.m_chart.paper.getById("linex"+r),o=_.m_chart.paper.getById("text"+r),n=_.m_chart.paper.getById("rect"+r),m=_.m_chart.paper.getById("svgPath"+r),c=m.id!=this.id;m[0].attributes.class&&"slice"==m[0].attributes.class.nodeValue&&c&&(m.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[r]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[r])),m[0].removeAttribute("class"),null!==o)&&(h.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[r]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[r])),l.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[r]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[r])),o.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[r]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[r])),n.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[r]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[r])))}t.attributes.class&&"slice"==t.attributes.class.nodeValue?(t.removeAttribute("class"),this.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),null!==a&&(i.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),e.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),a.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),s.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])))):(t.setAttribute("class","slice"),this.translate(_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),null!==a&&(i.translate(_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),e.translate(_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),a.translate(_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),s.translate(_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]]))))})).id="svgPath"+t,o.animate({sector:[r,h,s,a,i]},l,function(){})},Slice.prototype.drawDoughnutRaphael=function(t){var i,_=this,e=hex2rgb(this.m_color,this.m_chart.m_coloropacity),a=this.m_startAngle*(180/Math.PI),s=(i=this.m_chart.m_isOneSlice?this.m_endAngle.toFixed(3)*(180/Math.PI):this.m_endAngle*(180/Math.PI),this.m_chart.angleDiff[t]=(this.m_startAngle+this.m_endAngle)/2,this.m_radius),r=(this.m_radius,this.m_chart.m_linewidth,this.m_centerX),h=this.m_centerY,l=IsBoolean(this.m_chart.m_enableanimation)?1e3*this.m_chart.m_pieanimationduration:0;path=null,this.m_chart.paper.customAttributes.sector=function(t,i,e,a,s){var r=Math.PI/180,h=t+e*Math.cos(a*r),l=t+e*Math.cos(s*r),o=i+e*Math.sin(a*r),n=i+e*Math.sin(s*r),m=t+(e-_.m_chart.m_linewidth)*Math.cos(a*r),t=t+(e-_.m_chart.m_linewidth)*Math.cos(s*r),c=i+(e-_.m_chart.m_linewidth)*Math.sin(a*r),i=i+(e-_.m_chart.m_linewidth)*Math.sin(s*r),r=180<Math.abs(s-a);return{path:[["M",m,c],["L",h,o],["A",e,e,0,+r,1,l,n],["L",t,i],["A",e-_.m_chart.m_linewidth,e-_.m_chart.m_linewidth,0,+r,0,m,c],["z"]]}},(path=this.m_chart.paper.path().attr({sector:[r,h,s,0,0],stroke:_.m_strokecolor,"stroke-width":_.m_chart.m_strokelinewidth,transform:"","stroke-linejoin":"round","stroke-linecap":"round",fill:e}).data("id",t).click(function(){var t=this[0],i=_.m_chart.paper.getById("line"+this.id.split("svgPath")[1]),e=_.m_chart.paper.getById("linex"+this.id.split("svgPath")[1]),a=_.m_chart.paper.getById("text"+this.id.split("svgPath")[1]),s=_.m_chart.paper.getById("rect"+this.id.split("svgPath")[1]);if(IsBoolean(_.m_chart.m_otherslicescollapse))for(var r=0;r<_.m_chart.m_slice.length;r++){var h=_.m_chart.paper.getById("line"+r),l=_.m_chart.paper.getById("linex"+r),o=_.m_chart.paper.getById("text"+r),n=_.m_chart.paper.getById("text"+r),m=_.m_chart.paper.getById("svgPath"+r),c=m.id!=this.id;m[0].attributes.class&&"slice"==m[0].attributes.class.nodeValue&&c&&(m.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[r]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[r])),m[0].removeAttribute("class"),null!==o)&&(h.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[r]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[r])),l.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[r]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[r])),o.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[r]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[r])),n.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[r]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[r])))}t.attributes.class&&"slice"==t.attributes.class.nodeValue?(t.removeAttribute("class"),this.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),null!==a&&(i.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),e.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),a.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),s.translate(-_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),-_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])))):(t.setAttribute("class","slice"),this.translate(_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),null!==a&&(i.translate(_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),e.translate(_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),a.translate(_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]])),s.translate(_.m_chart.m_slicingdistance*Math.cos(_.m_chart.angleDiff[this.id.split("svgPath")[1]]),_.m_chart.m_slicingdistance*Math.sin(_.m_chart.angleDiff[this.id.split("svgPath")[1]]))))})).id="svgPath"+t,path.animate({sector:[r,h,s,a,i]},l,function(){})},Slice.prototype.drawPieGradient=function(){this.ctx.beginPath();var t=this.getFillColor(),i=this.m_color;this.ctx.fillStyle=t,this.ctx.strokeStyle=i,this.ctx.arc(this.m_centerX,this.m_centerY,this.m_radius,this.m_startAngle,this.m_endAngle,!1),this.ctx.lineTo(this.m_centerX,this.m_centerY),this.ctx.fill(),this.ctx.closePath()},Slice.prototype.drawDoughnutSlice=function(t){this.m_chart;this.drawDoughnutRaphael(t)},Slice.prototype.getFillColor=function(){var t=this.m_color;switch(this.m_chartbase){case"plane":t=this.m_color;break;case"gradient1":t=this.m_color;try{var i=""+ColorLuminance(this.m_color,this.m_luminance);(t=this.ctx.createRadialGradient(+this.m_centerX,+this.m_centerY,this.m_radius,this.m_centerX,this.m_centerY,1)).addColorStop(0,this.m_color),t.addColorStop(1,i)}catch(t){}break;case"gradient2":t=this.m_color;try{i=""+ColorLuminance(this.m_color,this.m_luminance);(t=this.ctx.createLinearGradient(+this.m_centerX-this.m_radius/2,+this.m_centerY-this.m_radius/2,+this.m_centerX+this.m_radius/2,+this.m_centerY+this.m_radius/2)).addColorStop(0,i),t.addColorStop(1,this.m_color)}catch(t){}break;case"gradient3":t=this.m_color;var e="Pie"==this.m_chart.m_charttype?this.m_radius-95*this.m_radius/100:1==this.m_chart.isTextDrawingOutSide()?this.m_radius-this.m_chart.m_linewidth/4:this.m_radius-this.m_chart.m_linewidth,a="Pie"==this.m_chart.m_charttype?this.m_radius:1==this.m_chart.isTextDrawingOutSide()?this.m_radius+this.m_radius*(this.m_chart.m_linewidth/4)*1/100:this.m_radius+this.m_radius*this.m_chart.m_linewidth/100;try{i=""+ColorLuminance(this.m_color,this.m_luminance);(t=this.ctx.createRadialGradient(+this.m_centerX,+this.m_centerY,e,this.m_centerX,this.m_centerY,a)).addColorStop(0,this.m_color),t.addColorStop(Math.abs(this.m_luminance),i),t.addColorStop(1,this.m_color)}catch(t){}break;default:t=this.m_color}return t},PieChart.prototype.centerXCalcalculation=function(){this.availableWidth=this.m_width;var t=this.getChartToBorderMargin();"Pie"==this.m_charttype?this.availableWidth/2>+this.radius+t?this.centerX="center"==this.m_chartalignment?this.availableWidth/2:"left"==this.m_chartalignment?this.availableWidth-(this.availableWidth-this.radius)+t:this.availableWidth-this.radius-t:this.centerX="center"==this.m_chartalignment?this.availableWidth/2:"left"==this.m_chartalignment?this.availableWidth-this.radius-t:this.availableWidth-(this.availableWidth-this.radius)+t:"Doughnut"==this.m_charttype?this.availableWidth/2>+this.radius+10+t?this.centerX="center"==this.m_chartalignment?this.availableWidth/2:"left"==this.m_chartalignment?+this.availableWidth-(this.availableWidth-this.radius)+t:+this.availableWidth-+this.radius-t:this.centerX="center"==this.m_chartalignment?this.availableWidth/2:"left"==this.m_chartalignment?+this.availableWidth-+this.radius-t:+this.availableWidth-(this.availableWidth-this.radius)+t:this.availableWidth/2>+this.radius+this.m_linewidth/2*1+t?this.centerX="center"==this.m_chartalignment?this.availableWidth/2:"left"==this.m_chartalignment?+this.availableWidth+this.m_linewidth/2*1-(this.availableWidth-this.radius)+t:+this.availableWidth-+this.radius-this.m_linewidth/2*1-t:this.centerX="center"==this.m_chartalignment?this.availableWidth/2:"left"==this.m_chartalignment?+this.availableWidth-+this.radius-this.m_linewidth/2*1-t:+this.availableWidth+this.m_linewidth/2*1-(this.availableWidth-this.radius)+t},PieChart.prototype.centerYCalcalculation=function(){this.availableHeight=this.m_height-this.getTotalMarginForTitleSubtitle()-this.getBottomBarMargin(),this.centerY=this.availableHeight/2+this.getTotalMarginForTitleSubtitle(),this.centerY="SemiDoughnut"==this.m_charttype?this.centerY+ +this.radius/2:this.centerY},PieChart.prototype.getTotalMarginForTitleSubtitle=function(){return+this.getMarginForTitle()+ +this.getMarginForSubTitle()},PieChart.prototype.getMarginForPieChart=function(){return 10},PieChart.prototype.getBottomBarMargin=function(){return IsBoolean(this.m_updateddesign)||this.isMaximized&&IsBoolean(this.getShowGradient())?30:0},PieChart.prototype.lineWidthCalculation=function(){this.availableWidth>=this.availableHeight?this.m_linewidth=this.m_linewidth>this.availableHeight/4?this.availableHeight/4:this.m_linewidth:this.m_linewidth=this.m_linewidth>this.availableWidth/4?this.availableWidth/4:this.m_linewidth,this.m_linewidth="Pie"!=this.m_charttype?this.m_linewidth:10},PieChart.prototype.radiusCalculation=function(){"SemiDoughnut"==this.m_charttype?this.availableHeight<=this.availableWidth/2?this.radius=Math.abs(this.availableHeight-(this.m_linewidth/2+20)):+this.availableHeight<+this.availableWidth?this.radius=Math.abs(+this.availableWidth/2-(+this.m_linewidth/2+15)):this.radius=Math.abs(this.availableWidth/2-(this.m_linewidth/2+10)):this.radius=Math.abs((this.availableWidth>=this.availableHeight?this.availableHeight/2:this.availableWidth/2)-10)},PieChart.prototype.drawSemiPieDoughnutChart=function(){this.ctx.beginPath(),this.ctx.save(),this.m_linecap="butt",this.ctx.translate(this.centerX,this.centerY);for(var t=0,i=this.m_slice.length;t<i;t++)this.drawCircle(this.m_slice[t].m_color,this.m_slice[t].m_startAngle,2*Math.PI);this.ctx.restore(),this.ctx.closePath()},PieChart.prototype.drawPieDoughnutChart=function(){for(var t=0;t<this.m_slice.length;t++)this.m_slice[t].drawDoughnutSlice(t)},PieChart.prototype.drawCircle=function(t,i,e){this.ctx.beginPath(),this.ctx.arc(0,0,this.radius,i,e,!1),this.ctx.strokeStyle=t,this.ctx.lineCap=this.m_linecap;i=this.m_linewidth;this.ctx.lineWidth=i,this.ctx.stroke()},PieChart.prototype.remainingRecordInToolTip=function(){var t,i=0,e=new Array;for(t in this.remainingData){var a=this.getFormatterForToolTip(this.remainingData[t]);if(i<this.m_maxtooltiprows&&""!=t){e[i]=new Array,e[i][0]=a;for(var s=t.split("-"),r="",h=0;s.length-1>h;h++)r+=s[h];e[i][1]=r,i++}}return e},PieChart.prototype.getDoughnutToolTipData=function(t,i){if(!IsBoolean(this.m_isEmptySeries)&&"None"!==this.m_customtextboxfortooltip.dataTipType&&!IsBoolean(this.isEmptyCategory)){if("None"===this.m_customtextboxfortooltip.dataTipType)return!1;this.percentVal=this.getCalculatedPercent(),seriesValue=this.updateSeriesData(this.getVisibleSeries()),categoryValue=this.getVisibleCategory();var t=t-this.m_centerX,i=i-this.m_centerY,e=Math.atan2(i,t),t=Math.sqrt(Math.pow(t,2)+Math.pow(i,2)),i=(this.m_startAngle=[],this.m_endAngle=[],this.m_startAngle=this.m_calculation.getStartAngle(),this.m_endAngle=this.m_calculation.getEndAngle(),+this.m_linewidth);if(t<=+this.m_radius&&t>=this.m_radius-i)for(var a,s,r,h=0,l=seriesValue.length;h<l;h++)(e=e<("SemiDoughnut"==this.m_charttype?0:-Math.PI/2)?2*Math.atan2(0,-1)+e:e)>=this.m_startAngle[h]&&e<=this.m_endAngle[h]?(a={},"Default"==this.m_customtextboxfortooltip.dataTipType?(s=[],(a={cat:"",color:"",ser:"",data:[]}).cat=categoryValue[h],a.color=this.getVisibleSeriesColor()[h],IsBoolean(this.m_isCategoryAvailable)&&(a.ser=this.getSeriesDisplayNames()[0]),"Others"==categoryValue[h]&&IsBoolean(this.m_slicelimit)&&""!=this.m_noofslices&&this.m_noofslices<this.getOriginalCategoryData()[0].length?a.data=this.remainingRecordInToolTip():(newVal=+seriesValue[h],isNaN(newVal)||newVal%1==0||"default"===this.m_tooltipprecision||(newVal=newVal.toFixed(this.m_tooltipprecision)),r=this.getFormatterForToolTip(newVal),s[0]=r,IsBoolean(this.m_enablePercentForTooltip)&&(s[1]=this.percentVal[h].toFixed(2)+"%"),a.data.push(s))):a=this.getDataProvider()[h]):this.hideToolTip();else this.hideToolTip();return a}},PieChart.prototype.getLegendTableContent=function(){for(var t="",i=0;i<this.getLegendNames().length;i++){var e=this.getHTMLShape("piechart");t+='<tr style="font-style:'+this.m_legendfontstyle+";color:"+convertColorToHex(this.m_legendfontcolor)+";text-decoration:"+this.m_legendtextdecoration+";font-weight:"+this.m_legendfontweight+";font-family:"+selectGlobalFont(this.m_legendfontfamily)+'"><td>'+this.drawLegendShape(e,this.getSeriesColors()[i])+'<span style="display:inline;">'+this.getLegendNames()[i]+"</span></td></tr>"}return t},PieChart.prototype.getFormatterText=function(t){var i=t;return i=IsBoolean(this.getFixedLabel())?i:this.m_yAxis.getFormattedText(t)},PieChart.prototype.getDoughnutDrillDataPoints=function(t,i){var e=this.updateSeriesData(this.getVisibleSeries()),t=(this.getVisibleCategory(),t-this.m_centerX),i=i-this.m_centerY,a=Math.atan2(i,t),t=Math.sqrt(Math.pow(t,2)+Math.pow(i,2));if(this.m_startAngle=[],this.m_endAngle=[],this.m_startAngle=this.m_calculation.getStartAngle(),this.m_endAngle=this.m_calculation.getEndAngle(),t<=+this.m_radius&&t>=this.m_radius-this.m_linewidth)for(var s=0,r=e.length;s<r;s++)if((a=a<("SemiDoughnut"==this.m_charttype?0:-Math.PI/2)?2*Math.atan2(0,-1)+a:a)>=this.m_startAngle[s]&&a<=this.m_endAngle[s])return{drillRecord:IsBoolean(this.m_slicelimit)&&IsBoolean(this.m_isCategoryAvailable)&&+this.m_noofslices<this.getOriginalCategoryData()[0].length&&1!=+this.m_noofslices?this.getSliceValueMap(s):IsBoolean(this.m_isCategoryAvailable)?this.getFieldNameValueMapPie(s):this.getFieldNameValueMapPie(0),drillColor:this.getVisibleSeriesColor()[s]}},PieDoughnutChart.prototype=new PieChart,PieDoughnutChart.prototype.ParseJsonAttributes=function(t,i){this.ParsePropertyJsonAttributes(t,i),this.m_charttype="Doughnut"};
//# sourceMappingURL=PieChart.min.js.map