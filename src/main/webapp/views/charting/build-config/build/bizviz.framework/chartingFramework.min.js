/*! BDB Charting Library V10.0.0 (2025-08-14 11:37:12) 
 Copyright 2015-2024 BDB (BizViz Technologies Pvt Ltd). All Rights Reserved */
function Parser(){this.dashboardJson="",this.dashboard=""}function DataManager(){this.allowTimelyRefresh=!1,this.timeoutIdsMap={},this.m_dashboard=""}function DataSetValues(){this.m_connectionId,this.m_fieldName=[],this.m_fieldNameValues=[],this.m_dataUrl,this.m_registerdWidgets=[],this.m_registeredDataSet=[],this.m_registeredVirtualDataSet=[],this.m_XMLData="",this.m_numberOfRecords=0,this.dashboard=""}function DataSet(){this.m_datasource="",this.m_id="",this.m_Fields=[],this.m_Aggregation=new Aggregation,this.m_AutoManipulator=new AutoManipulator,this.m_DataSetFilter=new DataSetFilter,this.m_CalculatedField=new CalculatedFields,this.m_AppendRowsEnable=!1,this.m_registeredWidget="",this.m_seriesJson=[],this.m_categoryJson=[],this.dashboard="",this.m_operationorder={0:"calcField",1:"appendRows",2:"autoManipulator",3:"filter",4:"aggregation"}}function Fields(){this.m_displayfield="",this.m_value="",this.m_charttype="",this.m_plotradius="",this.m_color="0",this.m_displayname="",this.m_otherfield="",this.m_precision="0",this.m_name="",this.m_radiusfield="",this.m_type="",this.m_axis="",this.m_formula="",this.m_visible="true",this.m_fexprn="",this.m_hierarchytype="",this.m_defaultchild="",this.m_additionalfields="",this.m_formatter="",this.m_align="center",this.m_isWeb="",this.m_expressionid="",this.m_textalign="center"}function Aggregation(){this.m_groupbynode="",this.m_summaryoperations="",this.m_enable="",this.m_summaryfields=""}function AggregationCalculation(){this.m_catArray,this.m_seriesArray,this.m_operation,this.groupByNode,this.fieldsData,this.summaryOperation,this.summaryFields}function AutoManipulator(){this.m_additionalfield="",this.m_enable="",this.m_seriesgroup="false",this.m_categorygroup="",this.m_valuefield="",this.m_agoperation="last"}function CalculatedFields(){this.m_recordsObj="",this.m_seriesName="",this.m_formula=""}function DataSetFilter(){this.m_condition,this.m_conditionsArr=[]}function ServiceManager(){}function Success(e,t){hideLoader()}function Error(e,t){hideLoader()}function ProcessResponse(){}function convertXMLToJSON(e,t,a){var i=[],r="records",o="record";t&&""!=t&&(r=t[0],o=t[1]);try{var s=$(e).find(r);"JSON"==a?$(s)[0]&&(i=(i=getDecryptedResponse(i=$(s)[0].textContent))&&frameworkUtil.convertStringToJson(i)):"ARRAY"!=a&&$(s).find(o).each(function(){for(var e={},t=$(this).children(),a=0;a<t.length;a++){var r=null==t[a].localName?t[a].tagName:t[a].localName,o=t[a].textContent;e[r]=o}i.push(e)})}catch(e){}return i}function convertToJSON(e,t,a){var r=[];try{"JSON"==a&&e&&(r=(r=getDecryptedResponse(r=e))&&frameworkUtil.convertStringToJson(r))}catch(e){}return r}function getDecryptedResponse(e){var t=parent.BIZVIZ.SDK.getAuthInfo();if(t.key&&e){var a=!1;try{if(("string"==typeof e||e instanceof String)&&(e=JSON.parse(e),a=!0),!e.data)return e;var r=CryptoJS.enc.Base64.parse(t.key),o=CryptoJS.TripleDES.decrypt(e.data,r,{mode:CryptoJS.mode.ECB}).toString(CryptoJS.enc.Utf8);a||(o=JSON.parse(o))}catch(e){o={}}return o}return e}function getDecryptedObjectForPA(e){var t=parent.BIZVIZ.SDK.getAuthInfo();if(t.key&&e.data){var a=!1;try{"object"!=typeof e&&(e=JSON.parse(e),a=!0);var r=CryptoJS.enc.Base64.parse(t.key),o=CryptoJS.TripleDES.decrypt(e.data,r,{mode:CryptoJS.mode.ECB}).toString(CryptoJS.enc.Utf8);a||(o=JSON.parse(o))}catch(e){o={}}return o}return e=JSON.parse(e.data)}function getDecryptedObjectForPAPython(t){var e=parent.BIZVIZ.SDK.getAuthInfo();if(e.key&&t.data){var a,r,e=CryptoJS.enc.Base64.parse(e.key);try{if(("object"!=typeof t||t instanceof String)&&(t=JSON.parse(t)),(a=CryptoJS.TripleDES.decrypt(t.data,e,{mode:CryptoJS.mode.ECB})).sigBytes=t.sig,"object"!=typeof(r=a.toString(CryptoJS.enc.Utf8))||r instanceof String){var o=(o=r.replace(new RegExp("True","g"),!0)).replace(new RegExp("False","g"),!1);try{r=JSON.parse(o)}catch(e){o=r.replace(new RegExp("'","g"),'"'),r=JSON.parse(o)}}}catch(e){r={}}return r}if(t instanceof Array||t instanceof Object)return t;try{return JSON.parse(t)}catch(e){return t}}function getEncryptedObject(e){var t,a,r=parent.BIZVIZ.SDK.getAuthInfo();if(e=transformRequest(e),r.key&&e){try{a=CryptoJS.enc.Base64.parse(r.key),t=CryptoJS.TripleDES.encrypt(e,a,{mode:CryptoJS.mode.ECB}).toString()}catch(e){t="{}"}return t}return e}function transformRequest(e){var t,a=[];for(t in e)if(Array.isArray(e[t]))for(var r=0,o=e[t].length;r<o;r++)a.push(encodeURIComponent(t)+"[]="+encodeURIComponent(e[t][r]));else a.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return a.join("&")}function encryptText(e){var t,a,r=parent.BIZVIZ.SDK.getAuthInfo();if(r.key&&e){e=e.toString();try{a=CryptoJS.enc.Base64.parse(r.key),t=CryptoJS.TripleDES.encrypt(e,a,{mode:CryptoJS.mode.ECB}).toString()}catch(e){t="{}"}return t}return e}function makeSecureRequest(e,a,r){var o={type:e.method,url:e.url,data:getEncryptedObject(e.formData),cname:e.compName,cache:!1,traditional:!0,crossDomain:!0,success:function(){hideLoader()},error:function(e,t,a){switch(hideLoader(),a.status){case 404:BIZVIZ.SDK.Auth.internalErrorOccured(e.status);break;case 304:parent.BIZVIZ.SDK.Auth.initSession();break;case 305:return BIZVIZ.SDK.Auth.pemissionDenied(),r&&r.call(this,e,status),null}r&&r()},complete:ProcessResponse};if(void 0!==e.global&&(o.global=e.global),null!==e.params)for(var t in e.params)o[t]=e.params[t];$.when($.ajax(o)).then(function(e,t){"notmodified"==t?parent.BIZVIZ.SDK.Auth.initSession():a&&a(e,t,o.cname)})}function makeUnSecureRequest(e,a,r){var o={type:e.method,url:e.url,data:e.formData,cname:e.compName,cache:!1,traditional:!0,crossDomain:!0,success:function(){hideLoader()},error:function(e,t,a){switch(hideLoader(),a.status){case 404:BIZVIZ.SDK.Auth.internalErrorOccured(a.status);break;case 304:parent.BIZVIZ.SDK.Auth.initSession();break;case 305:return BIZVIZ.SDK.Auth.pemissionDenied(),null}r&&r()},complete:ProcessResponse};if(void 0!==e.global&&(o.global=e.global),null!==e.params)for(var t in e.params)o[t]=e.params[t];$.when($.ajax(o)).then(function(e,t){"notmodified"==t?parent.BIZVIZ.SDK.Auth.initSession():a&&a(e,t,o.cname)})}function DataService(){this.m_datatype="JSON"}function NQueryWebService(){this.base=DataService,this.base(),this.m_url="",this.m_key=[],this.m_value=[],this.m_dashboard="",this.m_rowlimit=""}function ClarityWebService(){this.base=DataService,this.base(),this.m_url="",this.m_key=[],this.m_value=[],this.m_dataProvider="",this.m_rowlimit="",this.m_sortfield=[],this.m_sortdirection=[],this.m_sliceindex="",this.m_slicecount=""}function PAWebService(){this.base=DataService,this.base(),this.m_url="",this.m_key=[],this.m_value=[],this.m_dataProvider="",this.m_rowlimit="",this.m_ws="",this.m_workflowtype="",this.m_processid="",this.m_pythonintervaltimeout=3e3}function DSWebService(){this.base=DataService,this.base(),this.m_url="",this.m_key=[],this.m_value=[],this.m_dataProvider="",this.m_rowlimit=""}function DatasheetService(){this.base=DataService,this.base(),this.m_url="",this.m_key=[],this.m_value=[],this.m_dataProvider="",this.m_rowlimit="",this.m_sliceindex="0",this.m_slicecount="1000"}function WSWebService(){this.base=DataService,this.base(),this.m_url="",this.m_key=[],this.m_value=[],this.m_dataProvider="",this.m_rowlimit="",this.m_ws=""}function GlobalVariableController(){this.dashboard=""}function GlobalVariable(){this.m_Variable=[],this.map=new Object}function Variable(){this.m_key="",this.m_defaultvalue="",this.m_DataProviderMap="",this.m_DataSetMap="",this.m_VisibilityTriggerMap="",this.m_defaultValues=[],this.map=new Object,this.fieldNameDataArraymap=new Object,this.m_observer=[],this.m_observerDsetId=[],this.m_defaultValuekeys=[],this.m_observerDataProvider=[],this.m_observerDataSet=[],this.m_observerWidget=[],this.m_observerWidgetsForDrillColor=[],this.m_dashboard="",this.specialValues=["#SYSTEM.DATE"],this.userScript="",this.m_notifychange=!0}function RendererController(){this.dashboard=""}function FrameworkController(){this.dashboard="",this.m_dataStore="",this.m_chunkdatalimit=6,this.m_chunkdatatimeout=100,this.m_dashboardviewstate=!0}Parser.prototype.init=function(e,t){this.dashboardJson=e,this.dashboard=t},Parser.prototype.parseAttributesAndSetToNode=function(e,t){for(var a in e)this.setAttributeValueToNode(a,e[a],t)},Parser.prototype.setAttributeValueToNode=function(e,t,a){a[this.getNodeAttributeName(e)]=t},Parser.prototype.getNodeAttributeName=function(e){return"m_"+e.toLowerCase().replace("__","").replace("_","")},Parser.prototype.getKeyAfterRemoveUnderscore=function(e){return e.replace("__","").replace("_","")},Parser.prototype.getProperAttributeNameValue=function(e,t){for(var a in e)if(a.replace("__","").replace("_","")==t)return e[a]},Parser.prototype.getArrayOfSingleLengthJson=function(e){return $.isArray(e)?e:[e]},Parser.prototype.parseDashboardJSON=function(){var e=this.dashboardJson.Niv.Dashboard;this.dashboard.m_id=this.getProperAttributeNameValue(e,"id"),this.dashboard.m_layouttype=this.getProperAttributeNameValue(e,"layoutType")||"AbsoluteLayout",this.dashboard.m_enablecache=this.getProperAttributeNameValue(e,"enableCache")||"false",this.dashboard.m_enablereportburst=this.getProperAttributeNameValue(e,"enableReportBurst")||"false",this.dashboard.m_reportburstbutton=this.getProperAttributeNameValue(e,"reportBurstButtonId")||"reportBurstButton",this.parseDashboardOptions(e),this.parseLanguageMapping(e),this.parseFlashVars(e),this.parseAuthProfiles(e),this.parseDataProviders(e),this.parseGlobalVariable(e),this.parseOfflineData(e),this.parseDataSetExpressions(e),this.parseGroupings(e),this.parseAbsoluteLayout(e)},Parser.prototype.parseDashboardOptions=function(e){var t,e=e.DashboardOptions;""!=e&&null!=e&&(t=new DashboardOptions,this.dashboard.setDashboardOptions(t),this.parseAttributesAndSetToNode(e,t))},Parser.prototype.parseLanguageMapping=function(e){var t,e=e.LanguageMapping;""!=e&&null!=e&&(t=new LanguageMapping,this.parseAttributesAndSetToNode(e,t),this.dashboard.setLanguageMapping(t))},Parser.prototype.parseFlashVars=function(e){var e=e.FlashVars,t=new FlashVars;if(this.dashboard.setFlashVars(t),""!=e&&null!=e)for(var a=this.getArrayOfSingleLengthJson(e.Param),r=0;r<a.length;r++){var o=a[r],i=new Param;this.parseAttributesAndSetToNode(o,i),t.setParam(i)}},Parser.prototype.parseAuthProfiles=function(e){e=e.AuthProfiles;if(""!=e&&null!=e)for(var t=new AuthProfiles,a=(this.dashboard.setAuthProfiles(t),this.getArrayOfSingleLengthJson(e.Profile)),r=0;r<a.length;r++){var o=a[r],i=new Profile;this.parseAttributesAndSetToNode(o,i),t.setProfile(i)}},Parser.prototype.parseDataProviders=function(e){var e=e.DataProviders,t=new DataProviders;if(this.dashboard.setDataProviders(t),""!=e&&null!=e)for(var a=this.getArrayOfSingleLengthJson(e.DataURL),r=0;r<a.length;r++){var o,i=a[r],s=this.getProperAttributeNameValue(i,"Type"),n=new("offline"==s?OfflineDataProvider:"derived"==s?DerivedDataProvider:OnlineDataProvider),s=this.getProperAttributeNameValue(i,"dataType");for(o in n.setDataType(s),n.setDashboard(this.dashboard),i)switch(o){case"FieldSet":for(var l=this.getArrayOfSingleLengthJson(i[o]),u=0;u<l.length;u++){var d=l[u],p=new FieldSet;this.parseAttributesAndSetToNode(d,p),n.setFieldSet(p)}break;case"WhereClause":var h,c=new Con;for(h in i[o].Con)"ClauseMap"===h?c.m_clausemap=i[o].Con.ClauseMap:this.setAttributeValueToNode(h,i[o].Con[h],c);n.setCon(c);break;case"ClarityOptionalCondition":var m=new ClaritySlice,m=(n.setClaritySlice(m),this.parseAttributesAndSetToNode(i[o].ClaritySlice,m),new ClaritySort);n.setClaritySort(m),this.parseAttributesAndSetToNode(i[o].ClaritySort,m);break;case"query":var g=i[o];if(null!=g&&""!=g){var f,y=new Object;for(f in g)y[f]=this.getProperAttributeNameValue(g[f],"value");n.setQueryParamsMap(y)}break;default:n[this.getNodeAttributeName(o)]=i[o]}n.setKeys(),t.m_dataUrlIdObjMap[n.getId()]=n,t.setDataURL(n)}},Parser.prototype.parseGlobalVariable=function(e){var e=this.getAllVariables(e),t=new GlobalVariable;if(this.dashboard.setGlobalVariable(t),""!=e&&null!=e)for(var a=this.getArrayOfSingleLengthJson(e.Variable),r=0;r<a.length;r++){var o,i=a[r],s=new Variable;for(o in s.m_dashboard=this.dashboard,i)switch(o){case"DefaultValues":if(""!=i[o])for(var n=this.getArrayOfSingleLengthJson(i[o].DefaultValue),l=0;l<n.length;l++){var u=new DefaultValues;s.setDefaultValues(u),this.parseAttributesAndSetToNode(n[l],u),0==u.m_text.length&&(u.m_text=""),u.setDefaultValuesNameValueMap(u.m_name,u.m_text)}break;case"DataProviderMap":case"DataSetMap":case"VisibilityTriggerMap":case"ImageMap":break;case"userScript":""==i[o]&&null==i[o]||(null!=i[o].__cdata?s.setUserScript(i[o].__cdata):s.setUserScript(i[o].value));break;default:s[this.getNodeAttributeName(o)]=i[o]}s.setDefaultValuesInMap(),t.setVariable(s),t.setGlobalVariables(s)}},Parser.prototype.getAllVariables=function(e){for(var t={},a=(t.Variable=[],t.Variable.push({Key:"context",userScript:{value:""},DefaultValues:{DefaultValue:[]}}),t.Variable.push(e.variable),this.getLayoutByDevice(e).layoutType),r=0;r<e[a].Object.length;r++){var o=e[a].Object[r];if(o&&null!==o){t.Variable.push(e[a].Object[r].variable);try{var i=o.subElement,s=o.globalVariableKeyAttribute;o[i][s]=o.variable.Key}catch(e){}}}for(var n=0;n<e.DataProviders.DataURL.length;n++)t.Variable.push(e.DataProviders.DataURL[n].variable);return t},Parser.prototype.parseOfflineData=function(e){var t=e.OffLineData;if(""!=t&&null!=t)for(var a=this.getArrayOfSingleLengthJson(e.OffLineData.Data),r=0;r<a.length;r++){var o=a[r],i=[];null!=o.Records&&""!=o.Records&&null!=o.Records.Record&&""!=o.Records.Record&&(i=this.getArrayOfSingleLengthJson(o.Records.Record)),this.dashboard.m_dataMap[this.getProperAttributeNameValue(o,"id")]=i}},Parser.prototype.parseDataSetExpressions=function(e){e=e.DatasetExpressions;if(""!=e&&null!=e)for(var t=new DataSetExpressions,a=(this.dashboard.setDataSetExpressions(t),this.getArrayOfSingleLengthJson(e.DatasetExpression)),r=0;r<a.length;r++){var o=a[r],i=new DataSetExpression;if(this.parseAttributesAndSetToNode(o,i),""!=o.variables&&null!=o.variables)for(var s=this.getArrayOfSingleLengthJson(o.variables.variable),n=0;n<s.length;n++){var l=s[n],u=new DataSetExpressionVariable;i.setVariables(u),this.parseAttributesAndSetToNode(l,u)}var d,o=o.expressionScript;""!=o&&null!=o&&(d=new DataSetExpressionscript,i.setExpressionScript(d),d.setExpressionScript(this.getProperAttributeNameValue(o,"cdata"))),t.setDataSetExpression(i)}},Parser.prototype.getLayoutByDevice=function(e){return e.AbsoluteLayout.layoutType="AbsoluteLayout",detectDevice.mobile()?e.MobileLayout&&(e.MobileLayout.layoutType="MobileLayout",0<e.MobileLayout.Object.length)?e.MobileLayout:e.AbsoluteLayout:detectDevice.tablet()?e.TabletLayout&&(e.TabletLayout.layoutType="TabletLayout",0<e.TabletLayout.Object.length)?e.TabletLayout:e.AbsoluteLayout:(e[this.dashboard.m_layouttype||"AbsoluteLayout"].layoutType=this.dashboard.m_layouttype||"AbsoluteLayout",e[this.dashboard.m_layouttype||"AbsoluteLayout"])},Parser.prototype.ReAlignAbsoluteLayoutForMobile=function(e){if(""!=(e=this.getLayoutByDevice(e))&&null!=e)for(var t=this.dashboard.getAbsoluteLayout(),a=(t.m_width=e.width,t.m_height=e.height,this.getArrayOfSingleLengthJson(e.Object)),r=0;r<a.length;r++){var o=a[r].referenceID,i=this.dashboard.m_widgetsArray.find(function(e){return e.m_referenceid==o});i.m_x=a[r].x,i.m_y=a[r].y,i.m_width=a[r].width,i.m_height=a[r].height}},Parser.prototype.parseAbsoluteLayout=function(e){var t=this.getLayoutByDevice(e),a=(dGlobals.layoutType=t.layoutType,e[t.layoutType]);if(""!=a&&null!=a){var r,o=new AbsoluteLayout;for(r in this.dashboard.setAbsoluteLayout(o),a)if("Object"===r){o.m_width=t.width,o.m_height=t.height;for(var i,s=this.getArrayOfSingleLengthJson(t.Object||[]),n=0;n<s.length;n++)if("AbsoluteLayout"!==t.layoutType&&void 0!==t.pinedObject)for(var l=0;l<t.pinedObject.length;l++)t.pinedObject[l].objectID==s[n].objectID&&((i=this.widgetJSONParsing(s[n])).m_dashboard=this.dashboard,""!=i)&&this.dashboard.m_widgetsArray.push(i);else(i=this.widgetJSONParsing(s[n])).m_dashboard=this.dashboard,""!=i&&this.dashboard.m_widgetsArray.push(i)}else this.setAttributeValueToNode(r,a[r],o);o.m_bootstrap=this.dashboard.isBootstrap(),this.dashboard.setScalingEnabled(o.m_scalingenabled)}},Parser.prototype.parseGroupings=function(e){var t=e.componentGroups;if(void 0!==t)for(var a=e.AbsoluteLayout.Object,r=0;r<a.length;r++)if(a[r]){a[r].groupings="";for(var o=[],i=0;i<t.length;i++)t[i].aCompIds.length&&-1!=t[i].aCompIds.indexOf(a[r].objectID)&&o.push(t[i].gName);o.length&&(a[r].groupings=o.join())}},Parser.prototype.convertOldObjectTypes=function(e){return/n\w{4}h/.test(e)?e.replace(/n\w{4}h/i,""):e},Parser.prototype.widgetJSONParsing=function(e){var t="",a="",r=this.getProperAttributeNameValue(e,"objectType");if(r=this.convertOldObjectTypes(r))try{switch(r){case"chart":a=this.getProperAttributeNameValue(e.Chart,"Type"),(t=this.createWidgetObject(a)).chartJson=e,t.ParseJsonAttributes(e,t),this.dataSetJSONParsing(e.Chart.DataSet,t);break;case"funnel":a=this.getProperAttributeNameValue(e.Funnel,"Type"),(t=this.createWidgetObject(a)).chartJson=e,t.ParseJsonAttributes(e,t),this.dataSetJSONParsing(e.Funnel.DataSet,t);break;case"datagrid":a=this.getProperAttributeNameValue(e.DataGrid,"DataGridType"),(t=this.createWidgetObject(a)).chartJson=e,t.ParseJsonAttributes(e,t),this.dataSetJSONParsing(e.DataGrid.DataSet,t);break;case"filter":a=this.getProperAttributeNameValue(e.Filter,"Type"),(t=this.createWidgetObject(a)).chartJson=e,t.ParseJsonAttributes(e,t),this.dataSetJSONParsing(e.Filter.DataSet,t);break;case"scorecard":(t=new ScoreCard).chartJson=e,t.ParseJsonAttributes(e,t),this.dataSetJSONParsing(e.Scorecard.DataSet,t);break;case"hslider":(t=new HSlider).chartJson=e,t.ParseJsonAttributes(e,t);break;case"tabs":(t=new Tabs).chartJson=e,t.ParseJsonAttributes(e,t);break;case"rectangle":(t=new Rectangle).chartJson=e,t.ParseJsonAttributes(e,t);break;case"legend":(t=new Legend).chartJson=e,t.ParseJsonAttributes(e,t);break;case"filterchips":(t=new FilterChips).chartJson=e,t.ParseJsonAttributes(e,t);break;case"numericstepper":(t=new NumericStepper).chartJson=e,t.ParseJsonAttributes(e,t);break;case"vslider":(t=new VSlider).chartJson=e,t.ParseJsonAttributes(e,t);break;case"comments":(t=new Comments).chartJson=e,t.ParseJsonAttributes(e,t);break;case"bullet":(t=new Bullet).chartJson=e,t.ParseJsonAttributes(e,t),t.SetIsVirtualDataSetAvailable();break;case"gauge":(t=new Gauge).chartJson=e,t.ParseJsonAttributes(e,t),t.SetIsVirtualDataSetAvailable();break;case"guidedtour":(t=new GuidedTour).chartJson=e,t.ParseJsonAttributes(e,t),t.SetIsVirtualDataSetAvailable();break;case"semigauge":(t=new SemiGauge).chartJson=e,t.ParseJsonAttributes(e,t),t.SetIsVirtualDataSetAvailable();break;case"image":(t=new ImageComponent).chartJson=e,t.ParseJsonAttributes(e,t),t.SetIsVirtualDataSetAvailable();break;case"inputbox":(t=new InputBox).chartJson=e,t.ParseJsonAttributes(e,t),t.SetIsVirtualDataSetAvailable();break;case"label":(t=new Label).chartJson=e,t.ParseJsonAttributes(e,t),t.SetIsVirtualDataSetAvailable();break;case"textbox":(t=new TextBox).chartJson=e,t.ParseJsonAttributes(e,t),t.SetIsVirtualDataSetAvailable();break;case"trend":(t=new Trend).chartJson=e,t.ParseJsonAttributes(e,t),t.SetIsVirtualDataSetAvailable();break;case"date":(t=new DatePicker).chartJson=e,t.ParseJsonAttributes(e,t);break;case"dataSearch":(t=new DataSearch).chartJson=e,t.ParseJsonAttributes(e,t);break;case"checklist":(t=new CheckList).chartJson=e,t.ParseJsonAttributes(e,t);break;case"info":(t=new InfoButton).chartJson=e,t.ParseJsonAttributes(e,t);break;case"exportppt":(t=new ExportToPPTButton).chartJson=e,t.ParseJsonAttributes(e,t);break;case"filtersaver":(t=new FilterSaver).chartJson=e,t.ParseJsonAttributes(e,t);break;case"exportall":(t=new ExportAll).chartJson=e,t.ParseJsonAttributes(e,t);break;case"refreshbutton":(t=new RefreshButton).chartJson=e,t.ParseJsonAttributes(e,t);break;case"urlbutton":case"URLButton":(t=new UrlButton).chartJson=e,t.ParseJsonAttributes(e,t);break;case"InputButton":(t=new InputButton).chartJson=e,t.ParseJsonAttributes(e,t);break;case"TabComponent":(t=new TabComponent).chartJson=e,t.ParseJsonAttributes(e,t);break;case"SVGShape":(t=new SVGShape).chartJson=e,t.ParseJsonAttributes(e,t);break;case"SVGImage":(t=new SVGImage).chartJson=e,t.ParseJsonAttributes(e,t);break;default:alertPopUpModal({type:"warning",message:"Component"+r+" is not available",timeout:"3000"})}}catch(e){alertPopUpModal({type:"warning",message:"Component"+r+" is not available",timeout:"3000"})}return t},Parser.prototype.dataSetJSONParsing=function(e,t){if(""!=e&&null!=e){var a,r=new DataSet;for(a in r.setDashboard(this.dashboard),t.m_isDataSetavailable=!0,this.dashboard.m_dataSetsArray.push(r),e)try{switch(a){case"Fields":r.dataSetFieldsJSONParsing(e.Fields);break;case"AutoManipulator":var o=new AutoManipulator;r.setAutoManipulator(o),this.parseAttributesAndSetToNode(e[a],o);break;case"Aggregation":var i=new Aggregation;r.setAggregation(i),this.parseAttributesAndSetToNode(e[a],i);break;case"DataSetFilter":var s=new DataSetFilter;r.setDataSetFilter(s),this.parseAttributesAndSetToNode(e[a],s),s.conditionSplitter();break;default:"dataSource"==this.getKeyAfterRemoveUnderscore(a)?t.setDataSourceId(e[a]):"id"==this.getKeyAfterRemoveUnderscore(a)&&t.setDataSetId(e[a]),this.setAttributeValueToNode(a,e[a],r)}}catch(e){alertPopUpModal({type:"warning",message:"Data Set key"+a+" is not available",timeout:"3000"})}}},Parser.prototype.createWidgetObject=function(t){var e="";try{switch(t.toLowerCase()){case"area":e=new AreaChart;break;case"bar":e=new BarChart;break;case"benchmarkanalysis":e=new BenchmarkAnalysisChart;break;case"boxplot":e=new BoxPlotChart;break;case"bubble":e=new BubbleChart;break;case"candlestick":e=new CandleStickChart;break;case"chevron":e=new ChevronChart;break;case"circumplex":e=new CircumplexChart;break;case"column":e=new ColumnStackChart;break;case"dtc":e=new DecisionTreeChart;break;case"groupbar":e=new GroupBarChart;break;case"groupcolumn":e=new GroupColumnChart;break;case"heatmap":e=new HeatMapChart;break;case"histogram":e=new HistogramChart;break;case"knowledgegraph":e=new KnowledgeGraphChart;break;case"kpitile":e=new KPITile;break;case"line":e=new LineChart;break;case"mitoplot":e=new MitoPlotChart;break;case"mixed":e=new MixedChart;break;case"pie":e=new PieChart;break;case"piedoughnut":e=new PieDoughnutChart;break;case"sankey":e=new SankeyChart;break;case"plot":e=new ScatteredPlotChart;break;case"progress":e=new ProgressChart;break;case"projecttimeline":e=new ProjectTimelineChart;break;case"roadmap":e=new RoadMapChart;break;case"sentimentplot":e=new SentimentPlotChart;break;case"sparkline":e=new SparkLineChart;break;case"spider":e=new SpiderChart;break;case"timearea":e=new TimeAreaChart;break;case"timecolumnstack":e=new TimeColumnStackChart;break;case"timeline":e=new TimelineChart;break;case"decomposition":e=new DecompositionChart;break;case"treemap":e=new TreeMapChart;break;case"trellis":e=new TrellisChart;break;case"waterfall":e=new WaterfallChart;break;case"wordcloud":e=new WordCloudChart;break;case"newwordcloud":e=new NewWordCloudChart;break;case"datagrid":e=new SimpleDataGrid;break;case"dynamicdatagrid":e=new DynamicDataGrid;break;case"jexceldatagrid":e=new JExcelDataGrid;break;case"pagingdatagrid":e=new PagingDataGrid;break;case"funnel":e=new SimpleFunnelChart;break;case"invertedfunnel":e=new InvertedFunnelChart;break;case"pyramid":e=new PyramidChart;break;case"checkboxgroup":e=new CheckboxFilter;break;case"dropdown":e=new ComboFilter;break;case"combotree":e=new HierarchicalCombo;break;case"radiogroup":e=new RadioFilter;break;case"list":e=new ListFilter;break;case"worldmap":e=new WorldMapChart;break;case"globe":e=new GlobeChart;break;case"customchart":e=new CustomChart;break;case"widgetchart":e=new WidgetChart;break;default:return alertPopUpModal({type:"warning",message:"Component of type: "+t.toLowerCase()+" is not available",timeout:"3000"}),""}}catch(e){alertPopUpModal({type:"warning",message:"Component of type: "+t.toLowerCase()+" is not available",timeout:"3000"})}return e},DataManager.prototype.setDashboard=function(e){this.m_dashboard=e},DataManager.prototype.initiateService=function(e,t){this.timeoutIdsMap[e.m_id]="",IsBoolean(e.m_loadatstartup)&&(e.getDataFromConnection(e.getDataSetValues(),t),this.handleTimelyRefresh(e,t))},DataManager.prototype.handleTimelyRefresh=function(e,t){var a;IsBoolean(e.m_timelyrefresh)&&0!=e.m_refreshminutes&&null!=e.m_refreshminutes&&((a=this).clearTimelyRefresh(e.m_id),a.timeoutIdsMap[e.m_id]=setInterval(function(){e.getDataFromConnection(e.getDataSetValues(),t)},6e4*e.m_refreshminutes))},DataManager.prototype.stopTimelyRefresh=function(){this.allowTimelyRefresh=!1},DataManager.prototype.getProperInterval=function(e){var t=[];if(e){var a,r=60*e,o={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};for(a in o){var i=Math.floor(r/o[a]);1==i&&t.push(i+" "+a),2<=i&&t.push(i+" "+a+"s"),r%=o[a]}}return t.join(" ")},DataManager.prototype.clearTimelyRefresh=function(e){clearInterval(this.timeoutIdsMap[e])},DataManager.prototype.clearAllTimelyRefresh=function(){for(var e in this.timeoutIdsMap)this.timeoutIdsMap.hasOwnProperty(e)&&clearInterval(this.timeoutIdsMap[e])},DataManager.prototype.clearAllWebSockets=function(){if(""!==this.m_dashboard)for(var e=this.m_dashboard.getDataProviders().getDataURL(),t=0;t<e.length;t++)if("ws"==e[t].m_type)try{0<this.m_dashboard.m_widgetsArray.length&&(this.m_dashboard.m_widgetsArray[0].m_designMode=!0),e[t].m_webservice.m_ws.close()}catch(e){}},DataManager.prototype.clearAllHttpRequests=function(){$.ajaxQ.abortAll()},DataManager.prototype.clearAllPythonHttpRequests=function(){if(""!==this.m_dashboard)for(var e=this.m_dashboard.getDataProviders().getDataURL(),t=0;t<e.length;t++)if("pa"==e[t].m_typespecifier&&"python"==e[t].m_webservice.m_workflowtype)try{e[t].m_webservice.stopPythonProcess()}catch(e){}},DataManager.prototype.manipulateData=function(e){var t={};return t.DataSet=this.getDataSetChartObject(e),t.VirtualDataSet=this.getVirtualDataSetChartObject(e),t},DataManager.prototype.getDataSetChartObject=function(e){for(var t=[],a=0;a<e.dataSetValues.getDataSets().length;a++){var r=e.dataSetValues.getDataSets()[a];r.setDataStore(e.dataObject),r.setDataView(e.dataObject),t[a]=r.getData()}return t},DataManager.prototype.getVirtualDataSetChartObject=function(e){for(var t=[],a=0;a<e.dataSetValues.getVirtualDataSets().length;a++){t[a]={};var r=e.dataSetValues.getVirtualDataSets()[a],o=r.getRegisteredWidgetsArray(),r=r.getRegisteredWidgetsFieldInfoArray();t[a].Chart=o,t[a].Data=this.getVirtualDataSetValue(r,e.dataObject),t[a].DataPointToUpdate=this.getVirtualDataSetValueToUpdate(r,e.dataObject)}return t},DataManager.prototype.getVirtualDataSetValue=function(e,t){for(var a=[],r=0;r<e.length;r++)""!=e[r].dataRowNumber&&""!=e[r].virtualDataField&&0<t.length?a[r]=t[e[r].dataRowNumber][e[r].virtualDataField]:a[r]="";return a},DataManager.prototype.getVirtualDataSetValueToUpdate=function(e,t){for(var a=[],r=0;r<e.length;r++)""!=e[r].dataRowNumber&&""!=e[r].virtualDataField&&0<t.length?a[r]=t[e[r].dataRowNumber][e[r].valuefield]:a[r]="";return a},DataSetValues.prototype.init=function(e){this.m_dataUrl=e,this.dashboard=this.m_dataUrl.dashboard,this.m_connectionId=this.m_dataUrl.getId(),this.m_fieldName=this.m_dataUrl.m_fieldNamesArray},DataSetValues.prototype.getFieldNames=function(){return this.m_fieldName},DataSetValues.prototype.setXmlData=function(e){this.m_XMLData=e},DataSetValues.prototype.getXmlData=function(){return this.m_XMLData},DataSetValues.prototype.registerVirtualDataSetWithDataSetValues=function(e){this.m_registeredVirtualDataSet.push(e)},DataSetValues.prototype.getVirtualDataSets=function(){return this.m_registeredVirtualDataSet},DataSetValues.prototype.registerDataSetsWithDataSetValues=function(e){this.m_registeredDataSet.push(e)},DataSetValues.prototype.getDataSets=function(){return this.m_registeredDataSet},DataSetValues.prototype.update=function(e){this.setXmlData(e);e=this.parseDataInDataSetValues(e);this.setDataInMap(e),this.notifyDataUpdate()},DataSetValues.prototype.updateVirtualDataSet=function(){for(var e=0;e<this.m_registeredVirtualDataSet.length;e++)this.notifyVirtualDataUpdate(this.m_registeredVirtualDataSet[e].m_observerVirtualWidgetArray)},DataSetValues.prototype.notifyVirtualDataUpdate=function(e){for(var t,a=0;a<e.length;a++)e[a].m_fieldSetValue=this,e[a].m_initialvisibility=!0,e[a].m_isDataSetavailable?(t=e[a]).notifyWidgetsDataUpdate(t.m_fieldSetValue):e[a].updateWidgetsDataSetValues()},DataSetValues.prototype.notifyDataUpdate=function(){for(var e=0;e<this.m_registerdWidgets.length;e++)this.m_registerdWidgets[e].notifyWidgetsDataUpdate(this)},DataSetValues.prototype.parseDataInDataSetValues=function(e){var o=this,i=[],t="Records",a="Record",e=(/n\w{4}hWSDL/.test(this.m_dataUrl.m_type)||"web"==this.m_dataUrl.m_type?(t="records",a="record"):"clarityWSDL"==this.m_dataUrl.m_type&&(t="Records",a="Record"),$(e).find(t));return this.m_numberOfRecords=0,$(e).find(a).each(function(){for(var e=new Object,t=0;t<o.m_fieldName.length;t++){var a=o.m_fieldName[t],r=$(this).find(a).text();e[a]=r}i[o.m_numberOfRecords]=e,o.m_numberOfRecords++}),i},DataSetValues.prototype.setDataInMap=function(e){this.m_fieldNameValues=e},DataSetValues.prototype.setNumberOfRecord=function(e){this.m_numberOfRecords=e},DataSet.prototype.setOperationOrder=function(e){this.m_operationorder=e},DataSet.prototype.getOperationOrder=function(){return this.m_operationorder},DataSet.prototype.setDashboard=function(e){this.dashboard=e},DataSet.prototype.setDataSource=function(e){this.m_datasource=datasource},DataSet.prototype.getDataSource=function(){return this.m_datasource},DataSet.prototype.setId=function(e){this.m_id=e},DataSet.prototype.getId=function(){return this.m_id},DataSet.prototype.setAppendRows=function(e){this.m_AppendRows=e},DataSet.prototype.getAppendRows=function(){return this.m_AppendRows},DataSet.prototype.setAppendRowsEnable=function(e){this.m_AppendRowsEnable=e},DataSet.prototype.getAppendRowsEnable=function(){return this.m_AppendRowsEnable},DataSet.prototype.setAggregation=function(e){this.m_Aggregation=e},DataSet.prototype.getAggregation=function(){return this.m_Aggregation},DataSet.prototype.setAutoManipulator=function(e){this.m_AutoManipulator=e},DataSet.prototype.getAutoManipulator=function(){return this.m_AutoManipulator},DataSet.prototype.setDataSetFilter=function(e){this.m_DataSetFilter=e},DataSet.prototype.getDataSetFilter=function(){return this.m_DataSetFilter},DataSet.prototype.setFields=function(e){this.m_Fields.push(e)},DataSet.prototype.getFields=function(){return this.m_Fields},DataSet.prototype.setFieldsJson=function(e){this.m_fieldsJson=e},DataSet.prototype.getFieldsJson=function(){return this.m_fieldsJson},DataSet.prototype.setDataStore=function(e){this.m_dataStore=e},DataSet.prototype.setDataView=function(e){this.m_dataView=e},DataSet.prototype.getDataStore=function(){return this.m_dataStore},DataSet.prototype.getDataView=function(){return this.m_dataView},DataSet.prototype.dataSetFieldsJSONParsing=function(e){for(var t=parser.getArrayOfSingleLengthJson(e),a=0;a<t.length;a++){var r=new Fields;this.setFields(r),parser.parseAttributesAndSetToNode(t[a],r)}this.setFieldsJson(t)},DataSet.prototype.getData=function(){var e={},t=(e.Chart=this.getRegisteredWidget(),this.putOperationOnFieldJson(this.getFieldsJson(),this.getDataView()));return e.Fields=t,this.setDataView(this.putOperationOnDataView(this.getDataStore())),e.Data=this.getDataView(),e},DataSet.prototype.refreshDataFromConnection=function(e){var t={DataSet:[]},a={};a.Chart=this.getRegisteredWidget(),a.Fields=this.putOperationOnFieldJson(this.getFieldsJson(),this.getDataStore()),this.setDataView(this.putOperationOnDataView(this.getDataStore())),a.Data=this.getDataView(),t.DataSet[0]=a,e(t)},DataSet.prototype.putOperationOnFieldJson=function(e,t){return IsBoolean(this.getAggregation().getEnable())?this.getFieldJsonForAggregation(e):IsBoolean(this.getAutoManipulator().getEnable())?this.getFieldJsonForAutomanipulator(e,t):e},DataSet.prototype.getFieldJsonForAggregation=function(e){var t=e,a=this.getAggregation().getGroupByNode(),r=this.getUniqueSumeryOpFields(this.getAggregation()).field;if(""!=a&&"none"!=a){1<a.split(",").length?r=r.concat(a.split(",")):r.push(a);for(var t=[],o=0;o<e.length;o++)for(var i=0;i<r.length;i++)this.getProperAttributeNameValue(e[o],"fieldname")!=r[i]&&this.getProperAttributeNameValue(e[o],"Name")!=r[i]||t.push(e[o])}return t},DataSet.prototype.getFieldJsonForAutomanipulator=function(e,t){var a,r=this.getAutoManipulator().getCategoryGroup(),o=this.geCategoryNameFromCatGroup(t,r),o=this.getUniqueCatNames(o),i=this.getAutoManipulator().getSeriesGroup(),s=this.getAutoManipulator().getValueField(),n=[],l=this.m_AutoManipulator.m_subcategorygroup;return null==l?(n=this.getSeriesNamesFromUniqueCategorys(t,o,r,i,s),this.getSeriesNamesFromSerGroup(e,o,r,i,s,n)):(a=this.geCategoryNameFromCatGroup(t,l),a=this.getUniqueCatNamesByCat(a,o,t,r,l),n=this.getSeriesNamesFromUniqueSubCategorys(t,a,l,i,s),this.getSeriesNamesFromSerGroupWithSubCat(e,o,r,a,l,i,s,n))},DataSet.prototype.getUniqueCatNamesByCat=function(e,t,a,r,o){for(var i=[],s=0;s<t.length;s++){for(var n=[],l=0;l<a.length;l++)a[l][r]===t[s]&&n.push(a[l][o]);i.push(n)}for(var u=[],d=0;d<i.length;d++)u.push.apply(u,this.getUniqueCatNames(i[d]));return u},DataSet.prototype.getSeriesNamesFromSerGroupWithSubCat=function(e,t,a,r,o,i,s,n){var l=[],u=this.getCategoryColor(n);l.push(this.getFieldJsonforOneField("Category","#000000",a)),l.push(this.getFieldJsonforOneField("SubCategory","#000000",o));for(var d=0;d<n.length;d++){var p=this.getFieldJsonforOneField("Series",u[d],n[d]);l.push(this.updateAutoJson(p))}return l},DataSet.prototype.getSeriesNamesFromSerGroup=function(e,t,a,r,o,i){var s=[],n=this.getCategoryColor(i);s.push(this.getFieldJsonforOneField("Category","#000000",a));for(var l=0;l<i.length;l++){var u=this.getFieldJsonforOneField("Series",n[l],i[l]);s.push(this.updateAutoJson(u))}return s},DataSet.prototype.updateAutoJson=function(e){return e},DataSet.prototype.getFieldJsonforOneField=function(e,t,a){var r=new Object;return r.Type=e,r.Color=t,r.Name=a,r.DisplayName=a,r.visible=!0,r.ChartType="column",r.axis="left",r.Precision="0",r.PlotType="point",r.PlotRadius="5",r.OtherField="",r.PlotTransparency="1",r.DataSeperator="~",r.hierarchyType="none",r.DataLabelCustomProperties={showDataLabel:"false",useFieldColor:"false",dataLabelTextAlign:"center",dataLabelFontColor:"#000000",dataLabelRotation:"0",dataLabelFontSize:"12",datalabelFontStyle:"normal",datalabelFontWeight:"normal",datalabelFontFamily:"Roboto",datalabelField:"",datalabelPosition:"Top"},r.fieldname=a,r.displayname=a,r.DisplayField=a,r.Value=a,r},DataSet.prototype.getCategoryColor=function(e){var t=new Array;if(this.getRegisteredWidget().getCategoryColors()&&""!=this.getRegisteredWidget().getCategoryColors().m_categorydefaultcolorset){for(var a=this.getRegisteredWidget().getCategoryColors().m_categorydefaultcolorset.split(","),r=0;r<e.length;r++)a.push(convertColorToHex(a[r]));t=a.splice(0,e.length)}else for(r=0;r<e.length;r++)t.push(convertColorToHex(getRandomColor()));return t},DataSet.prototype.putOperationOnDataView=function(e){var t,a=getDuplicateArray(e);for(t in this.m_operationorder)if(this.m_operationorder.hasOwnProperty(t))switch(this.m_operationorder[t]){case"calcField":var r=this.getCalculatedFields();0<r.length&&(a=this.getCalculatedFieldAppendedData(r,a));break;case"appendRows":IsBoolean(this.getAppendRowsEnable())&&(a=this.getAppendRowsData(a));break;case"autoManipulator":IsBoolean(this.getAutoManipulator().getEnable())&&(a=this.getAutoManipulatorData(a));break;case"filter":0<this.getDataSetFilter().getConditionsArr().length&&(a=this.getFilteredData(a));break;case"aggregation":IsBoolean(this.getAggregation().getEnable())&&(a=this.getAggregatedData(a))}return a},DataSet.prototype.getCalculatedFields=function(){for(var e=this.dashboard.m_DataProviders.m_dataurl,t=0;t<e.length;t++)if(this.m_datasource==e[t].m_id){var a=e[t].m_calculatedfieldlist;break}return a},DataSet.prototype.getCalculatedFieldAppendedData=function(e,t){for(var a=0;a<t.length;a++)for(var r=0;r<e.length;r++){var o=this.dashboard.getDataSetExpressions().getDataSetExpressionbyID(e[r].dataSource+""+e[r].id);t[a][e[r].id]=o?this.getExpressionValue(o,t[a]):""}return t},DataSet.prototype.getExpressionValue=function(e,t){for(var a=[],r={},a=this.appendAllFieldAsVariable(t,a),o=0;o<a.length;o++){var i,s="";s=-1<a[o].m_value.indexOf(".")&&"@"==a[o].m_value.substring(0,1)?(i=(i=a[o].m_value).substring(1,i.length),this.dashboard.m_GlobalVariable.getFieldValue(i,this.dashboard)):getNumericComparableValue(a[o].m_value),r[a[o].m_name]=s=null==s?void 0:s}t=e.getExpressionScript().getExpressionScript(),t=this.m_registeredWidget.getValueFromGlobalVariable(t,"curly",!0);return this.m_CalculatedField.createDynamicVariableAndEval(r,t)},DataSet.prototype.appendAllFieldAsVariable=function(e,t){var a,r=(r=t.length)||0;for(a in e)e.hasOwnProperty(a)&&(t[r]={m_name:a+"",m_value:e[a]+""},r++);return t},DataSet.prototype.getProperAttributeNameValue=function(e,t){for(var a in e)if(e.hasOwnProperty(a)&&a.replace("__","").replace("_","")==t)return e[a]},DataSet.prototype.getAllFieldNames=function(e){for(var t={},a=0;a<e.length;a++)for(var r in e[a])e[a].hasOwnProperty(r)&&(t[r]="");var o,i=[];for(o in t)t.hasOwnProperty(o)&&i.push(o);return i},DataSet.prototype.convertConditions=function(e){for(var t=[],a=0;a<e.length;a++){var r=e[a],o=r;try{for(var i=/\{(.*?)\}/g,s=i.exec(r);s;s=i.exec(r)){var n,l=this.dashboard.getGlobalVariable();""!=l&&null!=l&&(n=l.getFieldValue(s[1]),o=o.replace(s[0],n))}}catch(e){}t[a]=o}return t},DataSet.prototype.getAppendRowsData=function(e){for(var t=this.getAppendRows(),a={},r=0;r<e.length;r++)for(var o in e[r])e[r].hasOwnProperty(o)&&(a[o]="");for(var i=0;i<t.length;i++){var s,n={};for(s in a)a.hasOwnProperty(s)&&(n[s]=t[i][s]);e.push(n)}return e},DataSet.prototype.getUniqueSumeryOpFields=function(e){for(var t={field:[],operation:[]},a={},r=e.getSummaryFields().split(","),o=e.getSummaryOperations().split(","),i=0;i<r.length;i++)null==a[r[i]]&&(a[r[i]]=o[i],t.field[i]=r[i],t.operation[i]=o[i]);return t},DataSet.prototype.getAggregatedData=function(e){var t,a,r,o=this.getAggregation(),i=o.getGroupByNode();return i&&""!==i&&1<i.split(",").length?this.getMultiDimensionAggregatedData(e):(r=this.getUniqueSumeryOpFields(o).operation,t=this.getUniqueSumeryOpFields(o).field,a=(e=this.getDataforAggregation(e,i,t)).groupNodeData,e=e.fieldsData,o.init(a,e,r,t),e=(a=o.calculate()).groupNode,(r=a.fieldDataMap)[i]=e,this.getReconvertedData(e,r))},DataSet.prototype.getMultiDimensionAggregatedData=function(e){var t=this.getAggregation(),r=t.getGroupByNode().split(","),a=this.getUniqueSumeryOpFields(t).field,o=this.getUniqueSumeryOpFields(t).operation;i=function(e){for(var t=[],a=0;a<r.length;a++)t[a]=e[r[a]];return t},s={},e.forEach(function(e){var t=JSON.stringify(i(e));s[t]=s[t]||[],s[t].push(e)});for(var i,s,n=Object.keys(s).map(function(e){return s[e]}),l=[],u=0;u<n.length;u++){l[u]={};for(var d={},p=0;p<n[u].length;p++){for(var h=0;h<r.length;h++)l[u][r[h]]=n[u][p][r[h]];for(var c=0;c<a.length;c++){null==d[a[c]]&&(d[a[c]]=[]);var m=n[u][p][a[c]];d[a[c]].push(m)}}for(var g=0;g<o.length;g++)l[u][a[g]]=t.calculateAggregation(o[g],d[a[g]])}return l},DataSet.prototype.getDataforAggregation=function(e,t,a){var r=[],o={};if(""!=t&&"none"!=t)for(var i in e)e.hasOwnProperty(i)&&r.push(""+e[i][t]);else for(var s in e)e.hasOwnProperty(s)&&r.push("Sum");o[t]=r;for(var n=0;n<a.length;n++){var l,u=[];for(l in e)e.hasOwnProperty(l)&&u.push(e[l][a[n]]);o[a[n]]=u}return{groupNodeData:r,fieldsData:o}},DataSet.prototype.getReconvertedData=function(e,t){for(var a=[],r=0;r<e.length;r++){var o,i={};for(o in t)t.hasOwnProperty(o)&&(i[o]=t[o][r]);a[r]=i}return a},DataSet.prototype.getFilteredData=function(data){var filterConditionsArray=this.convertConditions(this.getDataSetFilter().getConditionsArr()),sortedFilterConditionAndRecord=this.getSortedRecords(data,filterConditionsArray),filterConditionsArray=sortedFilterConditionAndRecord[0],filteredRecordsArray=sortedFilterConditionAndRecord[1],limitDataCondition=sortedFilterConditionAndRecord[2],filteredData=sortedFilterConditionAndRecord[1];if(""!=filterConditionsArray)for(var index=0,filteredRecordNumbers=[],fieldnames=this.getAllFieldNames(data),operators=["==","!=",">","<",">=","<="];index<filterConditionsArray.length;){var formula=filterConditionsArray[index];if(""!=formula){for(var formuladub="",mapField="",formulas=formula.split("||"),f=0;f<formulas.length;f++)for(var op=0;op<operators.length;op++){var arr=formulas[f].split(operators[op]);2==arr.length&&(mapField=arr[0].trim())}if(-1<formula.indexOf("[")&&-1<formula.indexOf("]"))for(var p=0;p<filteredRecordsArray.length;p++)for(var q=0;q<fieldnames.length;q++){var find="["+fieldnames[q].trim()+"]",isStrictStringCompare,value;if(""!=find&&-1!==formula.indexOf(find)&&find==mapField){var regbracket=/\[(.*?)\]/g,re=new RegExp(regbracket,"g"),formuladub=formula.replace(re,"value"),isStrictStringCompare=-1!=formula.indexOf("=='")||-1!=formula.indexOf("!='"),value=(find=find.replace(/[\[\]']+/g,""),isStrictStringCompare?filteredRecordsArray[p][find]:getNumericComparableValue(filteredRecordsArray[p][find])),result=!0;try{null==value?result=!0:eval("result = "+formuladub)}catch(e){}1==result&&filteredRecordNumbers.push(filteredRecordsArray[p])}}else for(var p=0;p<filteredRecordsArray.length;p++)for(var q=0;q<fieldnames.length;q++){var find=fieldnames[q].trim();if(""!=find&&-1!==formula.indexOf(find)&&find==mapField){var re=new RegExp(find,"g"),result=(formuladub=formula.replace(re,"value"),isStrictStringCompare=-1!=formula.indexOf("=='")||-1!=formula.indexOf("!='"),value=isStrictStringCompare?filteredRecordsArray[p][find]:getNumericComparableValue(filteredRecordsArray[p][find]),!0);try{null==value?result=!0:eval("result = "+formuladub)}catch(e){}1==result&&filteredRecordNumbers.push(filteredRecordsArray[p])}}filteredRecordsArray=null,filteredRecordsArray=filteredRecordNumbers,filteredData=filteredRecordNumbers,filteredRecordNumbers=[]}index++}return filteredData=this.getLimitedRecords(filteredData,limitDataCondition),filteredData},DataSet.prototype.getSortedRecords=function(e,t){for(var a=[],r=[],o="",i="",s=0;s<t.length;s++)-1!=t[s].toLowerCase().indexOf("order ")&&-1!=t[s].toLowerCase().indexOf(" by ")?o=t[s]:-1!=t[s].toLowerCase().indexOf("limit ")?i=t[s]:a.push(t[s]);if(""!=o&&2<o.match(/\w+|\[[^"]+\]/g).length){n=-1<o.indexOf("[")&&-1<o.indexOf("]")?o.match(/\w+|\[[^"]+\]/g):o.split(" ");for(var n,l=[],s=0;s<n.length;s++)"string"==typeof n[s]&&n[s]&&l.push(n[s]);var u=e,d=(n=l)[2].replace(/[[\]]/g,""),p=n[3];r=u;try{var h=this.isSortedFieldNumeric(d,u),r=this.sortOn(u,d,p,h)}catch(e){}}else r=(""!=i||(a=t),e);return[a,r,i]},DataSet.prototype.getLimitedRecords=function(e,t){var a;return""!=t&&2==(t=t.trim()).split("limit").length&&(t=t.split("limit"))[1]&&(-1!=(a=t[1].trim()).indexOf("~")||isNaN(+a)?2!=(t=(a=t[1].trim()).split("~")).length||isNaN(+t[0].trim())||isNaN(+t[1].trim())||(e=e.slice(t[0].trim(),t[1].trim())):e=""!=a&&e.length>a?e.slice(0,a):e),e},DataSet.prototype.isSortedFieldNumeric=function(e,t){for(var a=0;a<t.length;a++)if(isNaN(t[a][e]))return!1;return!0},DataSet.prototype.sortOn=function(e,t,a,r){var o,i,s,n,l;return t&&e&&(o="asc"!==a&&"numasc"!==a&&void 0!==a,i=function(a,r,o){return function(e,t){return((e=o(e[a]))<(t=o(t[a]))?-1:t<e?1:0)*(r?-1:1)}},"asc"===a||"desc"===a?r?e.sort(i(t,o,function(e){return parseFloat(String(e).replace(/[^0-9.-]+/g,""))})):e.sort(i(t,o,function(e){return String(e).toUpperCase()})):e.sort((s=t,n=o,l=function(e){var t=String(e);return t.replace(/\,/g,""),+(e=t.replace(/\,/g,""))},function(e,t){return e=l(e[s]),t=l(t[s]),isNaN(e)?1:isNaN(t)?-1:(e<t?-1:t<e?1:0)*(n?-1:1)}))),e},DataSet.prototype.getAutoManipulatorData=function(e){var t,a,r=this.getAutoManipulator().getCategoryGroup(),o=this.getAutoManipulator().getAggregationOperation(),i=this.geCategoryNameFromCatGroup(e,r),i=this.getUniqueCatNames(i),s=this.getAutoManipulator().getSeriesGroup(),n=this.getAutoManipulator().getValueField(),l=this.m_AutoManipulator.m_subcategorygroup,u=[];return null==l?(u=this.getSeriesNamesFromUniqueCategorys(e,i,r,s,n),this.getSeriesNamesDataFromSerGroup(e,i,r,s,n,u,o)):(a=this.geCategoryNameFromCatGroup(e,l),t=this.getUniqueCatNamesByCat(a,i,e,r,l),a=this.getUniqueCatNamesByCatArr(a,i,e,r,l),u=this.getSeriesNamesFromUniqueSubCategorys(e,t,l,s,n),this.getSeriesNamesDataFromSerGroupWithSubCat(e,i,r,a,l,s,n,u,o))},DataSet.prototype.getSeriesNamesDataFromSerGroupWithSubCat=function(e,t,a,r,o,i,s,n,l){for(var u=[],d=[],p=0;p<t.length;p++){for(var h=0;h<r[p].length;h++){u[h]={},u[h][a]=t[p],u[h][o]=r[p][h];for(var c=0;c<n.length;c++){for(var m=[],g=0;g<e.length;g++)t[p]==e[g][a]&&r[p][h]==e[g][o]&&n[c]==e[g][i]&&m.push(void 0!==e[g][s]?e[g][s]:"");u[h][n[c]]=this.getValueForAutomaipulatorResultArray(m,l)}}d.push.apply(d,u)}return d},DataSet.prototype.getUniqueCatNamesByCatArr=function(e,t,a,r,o){for(var i=[],s=0;s<t.length;s++){for(var n=[],l=0;l<a.length;l++)a[l][r]===t[s]&&n.push(a[l][o]);i.push(n)}for(var u=[],d=0;d<i.length;d++)u.push(this.getUniqueCatNames(i[d]));return u},DataSet.prototype.getValueForAutomaipulatorResultArray=function(e,t){return e&&0<e.length?"first"===t?e[0]:"last"===t?e[e.length-1]:getAggregationOperatedData(e,t):""},DataSet.prototype.getSeriesNamesFromUniqueSubCategorys=function(e,t,a,r,o){this.m_seriesNamesCategoryWise="";for(var i=[],s=[],n=0;n<t.length;n++){s[n]=[],n,0;for(var l=0;l<e.length;l++)t[n]==e[l][a]&&e[l][r]&&(s[n].push(e[l][r]),i.push(e[l][r]))}this.m_seriesNamesCategoryWise=s;return this.getUniqueCatNames(i)},DataSet.prototype.geCategoryNameFromCatGroup=function(e,t){for(var a=[],r=0;r<e.length;r++)e[r][t]&&a.push(e[r][t]);return a},DataSet.prototype.getUniqueCatNames=function(e){return e.filter(function(e,t,a){return a.indexOf(e)==t})},DataSet.prototype.getSeriesNamesFromUniqueCategorys=function(e,t,a,r,o){this.m_seriesNamesCategoryWise="";for(var i=[],s=[],n=0;n<t.length;n++){s[n]=[],n,0;for(var l=0;l<e.length;l++)t[n]==e[l][a]&&e[l][r]&&(s[n].push(e[l][r]),i.push(e[l][r]))}this.m_seriesNamesCategoryWise=s;return this.getUniqueCatNames(i)},DataSet.prototype.getSeriesNamesDataFromSerGroup=function(e,t,a,r,o,i,s){for(var n=[],l=0;l<t.length;l++){n[l]={},n[l][a]=t[l];for(var u=0;u<i.length;u++){for(var d=[],p=0;p<e.length;p++)t[l]==e[p][a]&&i[u]==e[p][r]&&d.push(void 0!==e[p][o]?e[p][o]:"");n[l][i[u]]=this.getValueForAutomaipulatorResultArray(d,s)}}return n},DataSet.prototype.registerWidgetsWithDataSet=function(e){this.m_registeredWidget=e},DataSet.prototype.getRegisteredWidget=function(){return this.m_registeredWidget},Fields.prototype.getFormatter=function(){return this.m_formatter},Fields.prototype.getdisplayField=function(){return this.m_displayfield},Fields.prototype.getvalue=function(){return this.m_value},Fields.prototype.getChartType=function(){return this.m_charttype},Fields.prototype.getPlotRadius=function(){return this.m_plotradius},Fields.prototype.getColor=function(){return this.m_color},Fields.prototype.getDisplayName=function(){return this.m_displayname},Fields.prototype.getOtherField=function(){return this.m_otherfield},Fields.prototype.getPrecision=function(){return this.m_precision},Fields.prototype.getName=function(){return this.m_name},Fields.prototype.getRadiusField=function(){return this.m_radiusfield},Fields.prototype.getType=function(){return this.m_type},Fields.prototype.getAxis=function(){return this.m_axis},Fields.prototype.getFormula=function(){return this.m_formula},Fields.prototype.setVisible=function(e){this.m_visible=e},Fields.prototype.getVisible=function(){return this.m_visible},Fields.prototype.getFexpr=function(){return this.m_fexprn},Fields.prototype.gethierarchyType=function(){return this.m_hierarchytype},Fields.prototype.getdefaultchild=function(){return this.m_defaultchild},Fields.prototype.getadditionalFields=function(){return this.m_additionalfields},Fields.prototype.getIsWeb=function(){return this.m_isWeb},Fields.prototype.getTextAlign=function(){return this.m_textalign},Aggregation.prototype.getGroupByNode=function(){return this.m_groupbynode},Aggregation.prototype.getSummaryOperations=function(){return this.m_summaryoperations},Aggregation.prototype.setSummaryOperations=function(e){return this.m_summaryoperations=e},Aggregation.prototype.getEnable=function(){return this.m_enable},Aggregation.prototype.getSummaryFields=function(){return this.m_summaryfields},Aggregation.prototype.setSummaryOperations=function(e){this.m_summaryoperations=e},Aggregation.prototype.init=function(e,t,a,r){this.groupByNode=e,this.fieldsData=t,this.summaryOperation=a,this.summaryFields=r,Array.prototype.contains=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return!0;return!1},Array.prototype.unique=function(){for(var e=[],t=0;t<this.length;t++)e.contains(this[t])||e.push(this[t]);return e}},Aggregation.prototype.calculate=function(){for(var e=this.groupByNode.unique(),t=[],a=0;a<this.summaryFields.length;a++){for(var r=0;r<e.length;r++){t[r]=[];for(var o,i=0;i<this.groupByNode.length;i++)e[r]==this.groupByNode[i]&&(o=getNumericComparableValue(this.fieldsData[this.summaryFields[a]][i]),t[r].push(o))}for(var s=[],n=0;n<t.length;n++)s.push(this.calculateAggregation(this.summaryOperation[a],t[n]));this.fieldsData[this.summaryFields[a]]=s}return{groupNode:e,fieldDataMap:this.fieldsData}},Aggregation.prototype.calculateAggregation=function(e,t){e=e?e.toLowerCase():"sum";return getAggregationOperatedData(t,e)},AggregationCalculation.prototype.init=function(e,t,a){this.m_catArray=e,this.m_seriesArray=t,this.m_operation=a,Array.prototype.contains=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return!0;return!1},Array.prototype.unique=function(){for(var e=[],t=0;t<this.length;t++)e.contains(this[t])||e.push(this[t]);return e}},AggregationCalculation.prototype.calculate=function(){for(var uniqueCat=[],m_sameDataTypedCategory=[],i=0;i<this.m_catArray.length;i++)m_sameDataTypedCategory.push(""+this.m_catArray[i]);for(var uniqueCat=m_sameDataTypedCategory.unique(),aggArr=[],i=0;i<uniqueCat.length;i++){var darr="aggArr["+i+"]= [];";eval(darr);for(var j=0;j<m_sameDataTypedCategory.length;j++)uniqueCat[i]==m_sameDataTypedCategory[j]&&eval("aggArr["+i+"].push(this.m_seriesArray[j])")}for(var aggSeries=[],temp=(this.m_operation=this.m_operation.split(","),this),i1=0;i1<uniqueCat.length;i1++)null!=aggArr[i1][0]&&(aggSeries[i1]=this.SUM(aggArr[i1]));return{category:uniqueCat,series:aggSeries}},AggregationCalculation.prototype.init1=function(e,t,a,r){this.groupByNode=e,this.fieldsData=t,this.summaryOperation=a,this.summaryFields=r,Array.prototype.contains=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return!0;return!1},Array.prototype.unique=function(){for(var e=[],t=0;t<this.length;t++)e.contains(this[t])||e.push(this[t]);return e}},AggregationCalculation.prototype.calculate1=function(){for(var e=this.groupByNode.unique(),t=[],a=0;a<this.summaryFields.length;a++){for(var r=0;r<e.length;r++){t[r]=[];for(var o,i=0;i<this.groupByNode.length;i++)e[r]==this.groupByNode[i]&&(o=getNumericComparableValue(this.fieldsData[this.summaryFields[a]][i]),t[r].push(o))}for(var s=[],n=0;n<t.length;n++)s.push(this.calculateAggregation(this.summaryOperation[a],t[n]));this.fieldsData[this.summaryFields[a]]=s}return{groupNode:e,fieldDataMap:this.fieldsData}},AggregationCalculation.prototype.calculateAggregation=function(e,t){switch(e=e.toLowerCase()){case"sum":for(var a="",r=0;r<t.length;r++)isNaN(t[r])||""==t[r]||(a=+a+ +t[r]);return a;case"avg":for(a="",r=0;r<t.length;r++)isNaN(t[r])||""==t[r]||(a=+a+ +t[r]);return""!=a?a/t.length:"";case"max":for(var o=t[0],r=0;r<t.length;r++)isNaN(t[r])||""==t[r]||t[r]>o&&(o=t[r]);return o;case"min":for(var i=t[0],r=0;r<t.length;r++)isNaN(t[r])||""==t[r]||t[r]<i&&(i=t[r]);return i;case"count":return t.length;default:return}},AggregationCalculation.prototype.SUM=function(e){for(var t=[],a=0,r=0;r<e[0].length;r++)for(var o=0;o<e.length;o++)""!==e[o][r]&&(a+=+e[o][r]);return t[0]=a,t},AggregationCalculation.prototype.AVG=function(e){for(var t=[],a=this.SUM(e),r=0;r<e[0].length;r++)t[r]=a[r]/e.length;return t},AggregationCalculation.prototype.MAX=function(e){for(var t=[],a=0;a<e[0].length;a++){for(var r=0,o=0;o<e.length;o++)parseInt(e[o][a])>parseInt(r)&&(r=e[o][a]);t[a]=r}return t},AggregationCalculation.prototype.MIN=function(e){for(var t=[],a=0;a<e[0].length;a++){for(var r=e[0][a],o=0;o<e.length;o++)e[o][a]<r&&(r=e[o][a]);t[a]=r}return t},AggregationCalculation.prototype.COUNT=function(e){for(var t=[],a=0;a<e[0].length;a++){for(var r=0,o=0;o<e.length;o++)parseInt(e[o][a])&&r++;t[a]=r}return t},AutoManipulator.prototype.getAdditionalField=function(){return this.m_additionalfield},AutoManipulator.prototype.getEnable=function(){return this.m_enable},AutoManipulator.prototype.getSeriesGroup=function(){return this.m_seriesgroup},AutoManipulator.prototype.getCategoryGroup=function(){return this.m_categorygroup},AutoManipulator.prototype.getValueField=function(){return this.m_valuefield},AutoManipulator.prototype.getAggregationOperation=function(){return this.m_agoperation},CalculatedFields.prototype.init=function(e,t,a){this.m_recordsObj=e,this.m_seriesName=t,this.m_formula=a},CalculatedFields.prototype.createDynamicVariableAndEval=function(NameValueMap,expScript){var scriptFlag,replacedVar,map,i,name;for(name in null!=/\[(.*?)\]/g.exec(expScript)&&(scriptFlag=!0),IsBoolean(scriptFlag)?(replacedVar="x",map={},i=0,Object.keys(NameValueMap).forEach(function(e){var t=replacedVar+i++;e!==(map[e]=t)&&(NameValueMap[t]=NameValueMap[e],delete NameValueMap[e])})):NameValueMap=JSON.parse(JSON.stringify(NameValueMap).replace(/\s(?=\w+":)/g,"")),NameValueMap){var variableName=IsBoolean(scriptFlag)?name:name.replace(/[[\]]/g,"").replace(/@/g,"").replace(/\./g,"_");try{isNaN(NameValueMap[name])?eval("var "+variableName+" = '"+NameValueMap[name]+"';"):eval("var "+variableName+" = "+NameValueMap[name]+";")}catch(e){}-1<name.indexOf(".")&&(expScript=expScript.replace(name.replace(/[[\]]/g,""),variableName))}try{if(IsBoolean(scriptFlag))for(;null!=/\[(.*?)\]/g.exec(expScript);)expScript=expScript.replace(/\[(.*?)\]/g.exec(expScript)[0],map[/\[(.*?)\]/g.exec(expScript)[1]]);else expScript=expScript.replace(/[[\]]/g,"").replace(/@/g,"");var resultOfScript=eval(expScript+";")}catch(ex){}return resultOfScript},CalculatedFields.prototype.addCalculatedFieldValueInSeries=function(e,t,a,r){for(var o=e.m_dashboard.getDataSetExpressions().getDataSetExpressionbyID(t),i=e.m_dashboard.getDataSetExpressions().getDataSetExpressionbyID(t).getExpressionScript().getExpressionScript(),s=o.getVariables(),n=r.m_fieldNameValues,l=[],u={},d=0;d<a;d++){for(var p=0;p<s.length;p++){var h,c="";""!=(c=-1<s[p].m_value.indexOf(".")&&"@"==s[p].m_value.substring(0,1)?(h=(h=s[p].m_value).substring(1,h.length),e.m_dashboard.m_GlobalVariable.getFieldValue(h,e.m_dashboard)):isNaN(s[p].m_value)?n[d][s[p].m_value]:s[p].m_value)&&null!=c&&!isNaN(c)||(c=0),u[s[p].m_name]=c}try{var m=this.createDynamicVariableAndEval(u,i);isNaN(m)?l[d]=0:l[d]=m}catch(e){alertPopUpModal({type:"error",message:"Calculated Field: "+e,timeout:"3000"})}}return l},DataSetFilter.prototype.getCondition=function(){return this.m_condition},DataSetFilter.prototype.getConditionsArr=function(){return this.m_conditionsArr},DataSetFilter.prototype.conditionSplitter=function(){var e=this.getCondition();-1!=e.indexOf(",")?(this.commaSplitArr=e.split(","),this.m_conditionsArr=this.commaSplitArr):this.m_conditionsArr.push(e)},DataService.prototype.setValue=function(e){this.m_value=e},DataService.prototype.setDataType=function(e){this.m_datatype=e},DataService.prototype.getDataType=function(){return this.m_datatype},DataService.prototype.clearComponentLoader=function(e){for(var t=0;t<e.m_registeredDataSet.length;t++){var a=e.m_registeredDataSet[t].m_registeredWidget;try{if(a&&a.getTitle()){a.getTitle().clearLoaderContent();break}}catch(e){}}},DataService.prototype.setComponentLoader=function(e,t){for(var a=0;a<e.m_registeredDataSet.length;a++){var r=e.m_registeredDataSet[a].m_registeredWidget;try{r.getTitle()&&(r.setShowLoaderIcon(t.isLoader),t.isLoader&&r&&r.getTitle()?r.getTitle().showLoaderIcon():r&&r.getTitle()&&r.getTitle().hideLoaderIcon(),r)&&r.getTitle()&&r.getTitle().setLoaderContent(t.message,t.state),"progress"==t.state?(r.m_status.noData="Data is loading...",r.m_statuscolor="#2E7D32"):(r.m_status.noData="Data not available !",r.m_statuscolor="#EF6C00")}catch(e){}}},NQueryWebService.prototype=new DataService,NQueryWebService.prototype.init=function(e){this.m_url=e.getUrl(),this.m_key=e.getKeys(),this.m_connid=e.getId(),this.m_skipfiltervalues=e.getSkipFilterValues(),this.m_queryendpoint=e.getSOAPEndPoint(),this.m_dashboard=e.m_dashboard},NQueryWebService.prototype.callWebservice=function(e,t,a){var r=this,o=this.m_url;this.setValue(e),o&&""!=o&&(-1<o.indexOf("?")?(showLoader(),makeSecureRequest({url:o,method:"POST",formData:r.getSOAPEnvelope(),params:{headers:{"X-Requested-With":"XMLHttpRequest"},jsonp:!1,jsonpCallback:!1,contentType:"text/xml; charset=utf-8"}},function(e){hideLoader();e={dataSetValues:t,dataObject:convertXMLToJSON(e,"",r.getDataType()),status:{isDataReceived:!0}};a(e)},function(){hideLoader(),a({dataSetValues:t,dataObject:{},status:{isDataReceived:!0}})})):this.getQueryEndPoint()&&""!==this.getQueryEndPoint()?r.callWebServiceWithQueryEndPoint(t,a):(e=r.m_dashboard.m_DataProviders.m_dataUrlIdObjMap[r.m_connid],(servicetypemap=[]).push({type:e.m_datasourcetype}),makeSecureRequest({url:base_url+req_url.designer.getEndpointUrl,method:"POST",formData:{data:JSON.stringify({dcType:servicetypemap}),spacekey:parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey,token:parent.BIZVIZ.SDK.getAuthInfo().authToken,userid:parent.BIZVIZ.SDK.getAuthInfo().user.id},params:{headers:{authtoken:parent.BIZVIZ.SDK.getAuthInfo().authToken,spacekey:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey),userid:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.id)}}},function(e){hideLoader(),e=getDecryptedResponse(e);e=JSON.parse(e);""!==e[0].url&&(r.m_dashboard.m_DataProviders.m_dataUrlIdObjMap[r.m_connid].setSOAPEndPoint(e[0].url),r.setQueryEndPoint(e[0].url),r.callWebServiceWithQueryEndPoint(t,a))},function(){hideLoader()})))},NQueryWebService.prototype.callWebserviceWithKey=function(t,a){var r=this,e=this.getServiceURL();showLoader(),makeSecureRequest({url:e,method:"GET",formData:{},params:null},function(e){hideLoader(),e&&""!==(e=r.getEndPointLocation(e))&&(r.setQueryEndPoint(e),r.callWebServiceWithQueryEndPoint(t,a))},function(){a({dataSetValues:t,dataObject:{},status:{isDataReceived:!0}})})},NQueryWebService.prototype.getServiceURL=function(){var e=this.m_url.split("/"),t=e[e.length-1];return null!=(t=""==t?e[e.length-2]:t)&&bizviz_dashboard_WSDL?bizviz_dashboard_WSDL+t:this.m_url},NQueryWebService.prototype.getEndPointLocation=function(e){try{return $($($($($($(e).children()[0]).children()[7])[0]).children()[0]).children()[0])[0].getAttribute("location")}catch(e){}return""},NQueryWebService.prototype.setQueryEndPoint=function(e){this.m_queryendpoint=e},NQueryWebService.prototype.getQueryEndPoint=function(){return this.m_queryendpoint},NQueryWebService.prototype.callWebServiceWithQueryEndPoint=function(a,r){var o,e=this.getProxyData(),t=this.getProxyURL();""!=t&&(o=this,IsBoolean(a.m_dataUrl.m_timelyrefresh)?o.setComponentLoader(a,{isLoader:!0,message:"Data is loading...",state:"progress"}):showLoader(),makeSecureRequest({url:t,method:"POST",formData:e,global:!IsBoolean(a.m_dataUrl.m_timelyrefresh),params:{headers:{authtoken:parent.BIZVIZ.SDK.getAuthInfo().authToken,spacekey:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey),userid:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.id)}}},function(e){IsBoolean(a.m_dataUrl.m_timelyrefresh)?o.setComponentLoader(a,{isLoader:!1,message:"Data loading completed",state:"completed"}):hideLoader();var t={dataSetValues:a,dataObject:convertXMLToJSON(e,"",o.getDataType()),status:{isDataReceived:!0}};try{null!=e&&null!=e.children&&null!=e.children[0]&&"Invalid Authentication Token"==e.children[0].textContent?alertPopUpModal({type:"warning",message:"Invalid auth token",timeout:"3000"}):r(t)}catch(e){r(t)}},function(){r({dataSetValues:a,dataObject:{},status:{isDataReceived:!0}})}))},NQueryWebService.prototype.getProxyData=function(){return{url:this.getQueryEndPoint(),wsdl:this.getProxyEnvelope(),isCached:this.getCachedFlag(),docId:this.getDocID()}},NQueryWebService.prototype.getDocID=function(){return IsBoolean(this.m_dashboard.m_enablecache)&&void 0!==pageInPortal?getUrlParameters().docid:""},NQueryWebService.prototype.getCachedFlag=function(){var e,t,a;return!(!IsBoolean(this.m_dashboard.m_enablecache)||void 0===pageInPortal)&&(e=getUrlParameters(),a={},t=JSON.parse(localStorage.getItem("dbCacheMap")),null===localStorage.getItem("dbCacheMap")||"{}"===localStorage.getItem("dbCacheMap")?(a[e.docid]=a[e.docid]||{},a[e.docid][this.m_connid]=this.m_value,a[e.docid].cacheddate=a[e.docid].cacheddate||new Date,localStorage.setItem("dbCacheMap",JSON.stringify(a)),this.m_dashboard.m_enablecache):void 0===t[e.docid]?(t[e.docid]=t[e.docid]||{},t[e.docid][this.m_connid]=this.m_value,t[e.docid].cacheddate=t[e.docid].cacheddate||new Date,localStorage.setItem("dbCacheMap",JSON.stringify(t)),this.m_dashboard.m_enablecache):void 0===(a=t[e.docid][this.m_connid])?(t[e.docid]=t[e.docid]||{},t[e.docid][this.m_connid]=this.m_value,localStorage.setItem("dbCacheMap",JSON.stringify(t)),this.m_dashboard.m_enablecache):JSON.stringify(a)===JSON.stringify(this.m_value))},NQueryWebService.prototype.getProxyEnvelope=function(){return btoa('<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Body><executeQuery xmlns="http://webservice.required.bdbizviz.com">'+this.getFilterParams()+'<AuthToken xmlns="">'+this.getAuthToken()+'</AuthToken><key xmlns="">'+this.getKeyParams()+"</key></executeQuery></Body></Envelope>")},NQueryWebService.prototype.getFilterParams=function(){if(0==this.m_key.length)return'<filter xmlns=""/>';for(var e="",t=0;t<this.m_key.length;t++)-1===this.m_skipfiltervalues.indexOf(this.m_value[t])&&(e+="<"+this.m_key[t]+">"+this.m_value[t]+"</"+this.m_key[t]+">");return'<filter xmlns="">'+e+"</filter>"},NQueryWebService.prototype.getAuthToken=function(){if(parent.opendoc&&void 0!==parent.opendoc&&void 0!==parent.$.jStorage)return parent.$.jStorage.get("opendoctoken");if(null!=pageInPortal&&null!=parent.BIZVIZ.SDK.getAuthInfo().authToken)return parent.BIZVIZ.SDK.getAuthInfo().authToken;for(var e="",t=this.m_dashboard.m_FlashVars.m_param,a=0;a<t.length;a++)!/n\w{4}hToken/.test(t[a].m_name)&&"token"!=t[a].m_name||(e=t[a].m_value);return e},NQueryWebService.prototype.getKeyParams=function(){return"<serviceName>"+this.getServiceName()+"</serviceName><dataType>"+this.getDataType()+"</dataType><Limit>"+this.getLimit()+"</Limit>"},NQueryWebService.prototype.getServiceName=function(){var e=this.m_url.split("/"),e=e[e.length-1];return-1<e.indexOf("?")?e.split("?")[0]:e},NQueryWebService.prototype.getLimit=function(){return this.m_rowlimit},NQueryWebService.prototype.getProxyURL=function(){return base_url+req_url.designer.getProxyURL},NQueryWebService.prototype.getSOAPEnvelope=function(){return'<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> <SOAP-ENV:Body> <ns:executeQuery xmlns:ns="http://qaaws.bdbizviz.com/xsd">'+this.getFilterParams()+' <AuthToken xmlns="">'+this.getAuthToken()+"</AuthToken> </ns:executeQuery> </SOAP-ENV:Body> </SOAP-ENV:Envelope>"},ClarityWebService.prototype=new DataService,ClarityWebService.prototype.init=function(e){this.m_url=removeParamsFromURL(e.getUrl()),this.m_key=e.getKeys(),this.m_connid=e.getId(),this.m_dashboard=e.m_dashboard,this.setClaritySortAndSlice(e)},ClarityWebService.prototype.setClaritySortAndSlice=function(e){try{this.m_sortfield=e.getClaritySortField(),this.m_sortdirection=e.getClaritySortDirection(),this.m_sliceindex=e.getClaritySliceIndex(),this.m_slicecount=e.getClaritySliceCount()}catch(e){}},ClarityWebService.prototype.callWebservice=function(e,t,a){var r;""!=this.m_url&&((r=this).setClaritySortAndSlice(t.m_dataUrl),this.setValue(e),showLoader(),makeSecureRequest({url:r.getProxyURL(),method:"POST",formData:r.getProxyData(),params:{headers:{authtoken:parent.BIZVIZ.SDK.getAuthInfo().authToken,spacekey:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey),userid:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.id)}}},function(e){hideLoader();e={dataSetValues:t,dataObject:convertXMLToJSON(e,["records","record"],r.getDataType()),status:{isDataReceived:!0}};a(e)},function(){a({dataSetValues:t,dataObject:{},status:{isDataReceived:!0}})}))},ClarityWebService.prototype.getProxyData=function(){return{url:this.getClarityWSDL(),wsdl:this.getClaritySOAP()}},ClarityWebService.prototype.getClarityWSDL=function(){return(void 0!==parent.$.jStorage&&parent.$.jStorage.get("user")&&parent.$.jStorage.get("user").clarityWsdl?parent.$.jStorage.get("user").clarityWsdl||"":parent.BIZVIZ.SDK.getAuthInfo().clarityWsdl||"")+"/niku/xog"},ClarityWebService.prototype.getClaritySOAP=function(){return'<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><SOAP-ENV:Header><tns:Auth xmlns:tns="http://www.niku.com/xog/Query"><tns:SessionID>'+this.getClaritySessionID()+'</tns:SessionID></tns:Auth></SOAP-ENV:Header><SOAP-ENV:Body><tns:Query xmlns:tns="http://www.niku.com/xog/Query"><tns:Code>'+this.getCode()+"</tns:Code><tns:Filter>"+this.getFilter()+"</tns:Filter><tns:Sort>"+this.getClaritySort()+"</tns:Sort><tns:Slice>"+this.getClaritySlice()+"</tns:Slice></tns:Query></SOAP-ENV:Body></SOAP-ENV:Envelope>"},ClarityWebService.prototype.getClaritySort=function(){var t="";try{0<this.m_sortfield.length&&0<this.m_sortdirection.length&&(t+="<tns:Column><tns:Name>"+this.m_sortfield.join(",")+"</tns:Name><tns:Direction>"+this.m_sortdirection.join(",")+"</tns:Direction></tns:Column>")}catch(e){t=""}return t},ClarityWebService.prototype.getClaritySlice=function(){var e="";return e=""!==this.m_sliceindex&&""!==this.m_slicecount?"<tns:Number>"+this.m_sliceindex+"</tns:Number><tns:Size>"+this.m_slicecount+"</tns:Size>":e},ClarityWebService.prototype.getClaritySessionID=function(){if(parent.opendoc&&null!=parent.opendoc&&void 0!==parent.$.jStorage)return parent.$.jStorage.get("opendoctoken");if(null!=pageInPortal&&null!=parent.BIZVIZ.SDK.getAuthInfo().authToken)return parent.BIZVIZ.SDK.getAuthInfo().authToken;for(var e="",t=this.m_dashboard.m_FlashVars.m_param,a=0;a<t.length;a++)!/n\w{4}hToken/.test(t[a].m_name)&&"token"!=t[a].m_name||(e=t[a].m_value);return e},ClarityWebService.prototype.getCode=function(){var e=this.m_url.split("/");return e[e.length-1]},ClarityWebService.prototype.getFilter=function(){for(var e="",t=0;t<this.m_key.length;t++)e+="<tns:"+this.m_key[t]+">"+this.m_value[t]+"</tns:"+this.m_key[t]+">";return e},ClarityWebService.prototype.getProxyURL=function(){return base_url+req_url.designer.getProxyURL},PAWebService.prototype=new DataService,PAWebService.prototype.init=function(e){this.m_url=e.getUrl(),this.m_key=e.getKeys(),this.m_connid=e.getId(),this.m_pajsondef=e.getPredictiveJsonDef(),this.m_dashboard=e.m_dashboard},PAWebService.prototype.getWorkFlowID=function(e){for(var t,a=0;a<this.m_dashboard.m_DataProviders.m_dataurl.length;a++){var r=this.m_dashboard.m_DataProviders.m_dataurl[a];if(r.m_id===e){t=r.m_selecteddatasourceid;break}}return t},PAWebService.prototype.callWebservice=function(e,t,a){var r=this,o=this.getWorkFlowID(this.m_connid);if(this.setValue(e),""!==o&&""!==t.m_dataUrl.m_predictivejsondef){e=IsBoolean(t.m_dataUrl.m_predictivejsondef.isSpark)||!1,o=IsBoolean(t.m_dataUrl.m_predictivejsondef.isPython)||!1;showLoader(),a({dataSetValues:t,dataObject:{},status:{isDataReceived:!1}}),hideLoader();try{r.setComponentLoader(t,{isLoader:!0,message:"Data is loading...",state:"progress"}),e?(this.m_workflowtype="spark",r.setSparkWebSocket(t,r,a)):o?(this.m_workflowtype="python",r.setPythonWebSocket(t,r,a)):(this.m_workflowtype="r",r.setCamelWebSocket(t,r,a))}catch(e){r.setComponentLoader(t,{isLoader:!1,message:"Data refresh failed",state:"completed"}),a({dataSetValues:t,dataObject:{},status:{isDataReceived:!0}})}}},PAWebService.prototype.setSparkWebSocket=function(l,u,d){this.getSparkSettings(function(e,t){var a=u.m_pajsondef.predictiveJosnDef;if(a&&IsBoolean(t)){if(a.processes)for(var r in a.processes)if("datafilter"==a.processes[r].ProcessMethod){var o=a.processes[r].FilterValuesFromPredictive;if(o){for(var i=0,s=u.m_key.length;i<s;i++)o=o.replace("@"+u.m_key[i]+"@","'"+u.m_value[i]+"'");o!==a.processes[r].FilterValuesFromPredictive&&(a.processes[r].options.expression=o)}break}var n,t=e.sparkBizvizLocation;dGlobals.webSocketTracker[u.m_connid]&&""!==dGlobals.webSocketTracker[u.m_connid]&&dGlobals.webSocketTracker[u.m_connid].close(),u.m_ws=new WebSocket(t),dGlobals.webSocketTracker[u.m_connid]=u.m_ws,u.m_ws.onopen=function(e){n=setInterval(function(){var e=u.m_ws,t={url:u.get_base_url_for_spark_internal(),token:parent.BIZVIZ.SDK.getAuthInfo().authToken,reqData:"ping"};null!=e&&1==e.readyState?e.send(JSON.stringify(t)):(clearInterval(n),e&&null!=e&&e.close())},6e4),a.ProcessID="SparkProcess"+(new Date).getTime()+"_"+u.getUUID();var t={url:u.get_base_url_for_spark_internal(),token:parent.BIZVIZ.SDK.getAuthInfo().authToken,reqData:a.ProcessID},t=(u.m_ws.send(JSON.stringify(t)),{});a.processParams.enableLogStatus=!1,t.jsonDefinition=JSON.stringify(a),makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:u.getFormData(t,"executeSparkProcess"),params:{headers:u.getHeaders(),async:!1,crossDomain:!0}},function(e){var e=getDecryptedResponse(e);e&&e.success?u.setComponentLoader(l,{isLoader:!0,message:"Spark socket open: "+e.message,state:"progress"}):(u.m_ws.close(),null!=e.outPutJsonData&&null!=e.outPutJsonData&&"702"!=(e=JSON.parse(e.outPutJsonData)).statusCode&&"700"!=e.statusCode&&e.statusCode,u.setComponentLoader(l,{isLoader:!1,message:"Failed",state:"completed"}),d({dataSetValues:l,dataObject:{},status:{isDataReceived:!0}}))},function(){})},u.m_ws.onmessage=function(e){e=JSON.parse(e.data);u.checkProcessStatusFromSocket(l,d,a,u.m_ws,e,null,null,n)},u.m_ws.onerror=function(e){clearInterval(n),u.m_ws.close(),dGlobals.webSocketTracker[u.m_connid].close(),u.setComponentLoader(l,{isLoader:!1,message:"Data refresh failed",state:"completed"}),d({dataSetValues:l,dataObject:{},status:{isDataReceived:!0}})},u.m_ws.onclose=function(e){dGlobals.webSocketTracker[u.m_connid]=null}}else u.setComponentLoader(l,{isLoader:!1,message:"Failed to get spark settings",state:"completed"}),d({dataSetValues:l,dataObject:{},status:{isDataReceived:!0}})})},PAWebService.prototype.getUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},PAWebService.prototype.getSparkBizvizLocation=function(e){for(var t,a=window.location.protocol.replace(":",""),r=0;r<bizviz_pa_spark_servers.server.length;r++){var o;(o=bizviz_pa_spark_servers.server[r]).ip==e.pahost&&o.port==e.paport&&o.protocol==a&&(t=o.ws_url)}return t},PAWebService.prototype.getSparkSettings=function(a){var r,o=this,e={id:o.m_sparkbizvizlocation="",type:12,status:1,spaceKey:parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey,IsSparkWorkspaceLoad:!0,settings:""},e={consumerName:"BIZVIZ_PA",serviceName:"getSettingsFromPa",data:JSON.stringify(e),isSecure:!0,spacekey:parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey,token:parent.BIZVIZ.SDK.getAuthInfo().authToken};function i(e){var t;null==(e=getDecryptedResponse(e))||e.hasOwnProperty("status")||null==e.predictiveSparkServerSettings?(o.showNotificationWindow("Predictive Spark Settings are not configured  !",3e3),a&&a({},!1)):((t=e.predictiveSparkServerSettings).paWebUrl,r=t.paWebUrl,o.m_sparkbizvizlocation=r,(t={}).sparkBizvizLocation=r,a&&a(t,e.success))}makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:e,params:{async:!1,crossDomain:!0,headers:o.getHeaders()}},function(e,t){i(e)},function(e,t){i(e)})},PAWebService.prototype.showNotificationWindow=function(e,t){var a=screen.width/2-200,r=screen.height/2-50,o=window.open("","","width=400, height=100, left="+a+", top="+r+", toolbar=0, location=0, directories=0, status=0, menubar=0");try{o.document.write(e),o.focus(),setTimeout(function(){o.close()},t)}catch(e){alertPopUpModal({type:"warning",message:"Pop-up Blocker is enabled! Please add this site to your exception list",timeout:"3000"})}},PAWebService.prototype.getHeaders=function(){return{"Content-Type":"application/x-www-form-urlencoded",authtoken:parent.BIZVIZ.SDK.getAuthInfo().authToken,spacekey:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey),userid:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.id)}},PAWebService.prototype.checkProcessStatusFromSocket=function(e,t,a,r,o,i,s,n){var l,u,d,p=this;"SparkJobStatus"==o.processStatus?p.setComponentLoader(e,{isLoader:!0,message:o.processStatus+": "+o.socketStatus.status,state:"progress"}):(l=[],"Completed"===(l=null!=o.processStatus?o.processStatus.split("_"):l)[0]?(p.setComponentLoader(e,{isLoader:!0,message:"Completed",state:"completed"}),u=parent.BIZVIZ.SDK.getAuthInfo().authToken,d=parent.BIZVIZ.SDK.getAuthInfo().user.id,r.send("remove_"+a.ProcessID+"_"+u+"_"+d),null!=n&&(r.close(),clearInterval(n)),p.setComponentLoader(e,{isLoader:!1,message:l[1],state:"completed"}),o.responseData,p.fetchResultViaSocket(a,e,t)):"Failed"===l[0]?(p.setComponentLoader(e,{isLoader:!1,message:"Failed",state:"completed"}),null!=s&&(r.send("remove_"+a.ProcessID+"_"+u+"_"+d),r.close(),clearInterval(s)),null!=n&&(r.close(),clearInterval(n)),u=parent.BIZVIZ.SDK.getAuthInfo().authToken,d=parent.BIZVIZ.SDK.getAuthInfo().user.id,null!=o.responseData&&null!=o.responseData.outPutJsonData&&(a=JSON.parse(o.responseData),null!=(s=JSON.parse(a.outPutJsonData)).message)&&s.message.split("||").map(function(e){}),t({dataSetValues:e,dataObject:{},status:{isDataReceived:!0}})):null!=l[1]?p.setComponentLoader(e,{isLoader:!0,message:l[1],state:"progress"}):p.setComponentLoader(e,{isLoader:!0,message:"Process is in progess..",state:"progress"}))},PAWebService.prototype.get_base_url_for_spark_internal=function(){try{var e;return(1==(e=bizviz_pa_spark_to_karaf_communication).https?"https://":"http://")+e.domain+(""==e.port?"":":"+e.port)+"/cxf"}catch(e){return""}},PAWebService.prototype.fetchResultViaSocket=function(e,a,t){var r,o=this,i=17;for(r in e.processes)if("applymodel"==e.processes[r].ProcessMethod){i=r;break}var s="response,"+e.ProcessID+","+i+",applymodel",n=""!==o.m_sparkbizvizlocation?o.m_sparkbizvizlocation:bizviz_pa_spark_socket,l=new WebSocket(n);return l.onopen=function(e){o.setComponentLoader(a,{isLoader:!0,message:"ApplyModel is started",state:"progress"});var t={url:o.get_base_url_for_spark_internal(),token:parent.BIZVIZ.SDK.getAuthInfo().authToken,reqData:s};l.send(JSON.stringify(t))},l.onmessage=function(e){e=o.processOutput(JSON.parse(e.data));o.setComponentLoader(a,{isLoader:!1,message:"Data loading successful",state:"completed"}),t({dataSetValues:a,dataObject:e,status:{isDataReceived:!0}})},l.onclose=function(e){o.setComponentLoader(a,{isLoader:!1,message:"Failed to get data from ApplyModel",state:"completed"})},l.onerror=function(e){o.setComponentLoader(a,{isLoader:!1,message:"Error in getting data from ApplyModel",state:"completed"})},!0},PAWebService.prototype.processOutput=function(e){return e.success&&e.responseData.success?e.responseData.outPutJsonData.OutputJsonData:[]},PAWebService.prototype.getRSettings=function(t){var a=this;function r(e){(e=getDecryptedResponse(e))&&null!=e.predictiveRServerSettings&&e.success&&e.predictiveRServerSettings?(e.predictiveRServerSettings.ip,e.predictiveRServerSettings.port,a.m_rbizvizvisuallocation=e.predictiveRServerSettings.rVisUrl,t&&t(e,!0)):(a.showNotificationWindow("Predictive R-settings are not configured",3e3),t&&t(e,!1))}this.m_rbizvizvisuallocation="",makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:a.getFormData({IsRWorkspaceLoad:!0},"getRserverSettings"),params:{async:!1,crossDomain:!0,headers:a.getHeaders()}},function(e,t){r(e)},function(e,t){r(e)})},PAWebService.prototype.setPythonWebSocket=function(dataSetValues,temp,callBack){function getSettingsCB(response,status){if(response=getDecryptedResponse(response),null!=response)if(!response.hasOwnProperty("status")&&IsBoolean(response.success))if(response.predictivePythonServerSettings){var tempJson=response.predictivePythonServerSettings,predictiveJsonDef=(temp.m_pythonbizvizlocation=tempJson.paWebUrl,temp.m_pythonbizvizvisuallocation=tempJson.paVizUrl||"",temp.m_pajsondef.predictiveJosnDef||{});try{if(predictiveJsonDef.processes)for(var key in predictiveJsonDef.processes)if(predictiveJsonDef.processes[key].filter){if(predictiveJsonDef.processes[key].filterXml){for(var tempXML='<filter xmlns="">',i=0,len=temp.m_key.length;i<len;i++)predictiveJsonDef.processes[key].filter[temp.m_key[i]]=temp.m_value[i],tempXML+="<"+temp.m_key[i]+">"+temp.m_value[i]+"</"+temp.m_key[i]+">";tempXML+="</filter>",predictiveJsonDef.processes[key].filterXml=tempXML}if(predictiveJsonDef.processes[key].filter)for(var fkey in predictiveJsonDef.processes[key].filter){var index=temp.m_key.indexOf(fkey);predictiveJsonDef.processes[key].filter[fkey]=0<=index?temp.m_value[index]:""}}}catch(e){}predictiveJsonDef.ProcessID="PythonProcess"+(new Date).getTime()+"_"+temp.getUUID(),temp.m_processid=predictiveJsonDef.ProcessID;var data={},url=req_url.predictive.pluginService,reqData=(data.consumerName="BIZVIZ_PA",data.serviceName="executePythonProcess",{}),isForceStart=!1;reqData.jsonDefinition=JSON.stringify(predictiveJsonDef),data.data=JSON.stringify(reqData),data.isSecure=!0,window.setTimeout(function(){showLoader(),makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:temp.getFormData(reqData,"executePythonProcess"),params:{crossDomain:!0,headers:temp.getHeaders()}},function(response,requestData){if(hideLoader(),response=getDecryptedResponse(response),response&&response.success){null!=isForceStart&&isForceStart||""!==response.outPutJsonData&&null!=response.outPutJsonData&&JSON.parse(response.outPutJsonData).statusCode;try{var pythonInterval=setInterval(function(){var requestData={};requestData.url=temp.get_base_url_for_python_internal(),requestData.token=parent.BIZVIZ.SDK.getAuthInfo().authToken,requestData.reqData=predictiveJsonDef.ProcessID,temp.checkStatus(requestData,"componentProcessStatus",function(responseData){var fileData,fileData,data;responseData&&!responseData.error?(fileData=responseData,fileData=eval(fileData)||[],temp.checkProcessStatusForPython(fileData,pythonInterval,dataSetValues,temp,predictiveJsonDef,callBack)):(clearInterval(pythonInterval),alertPopUpModal({type:"error",message:responseData.error,timeout:"3000"}),data={dataSetValues:dataSetValues,dataObject:{},status:{isDataReceived:!0,summary:"",graph:""}},temp.setComponentLoader(dataSetValues,{isLoader:!1,message:"Data loading failed, "+responseData.error,state:"completed"}),callBack(data))},function(e){clearInterval(pythonInterval),alertPopUpModal({type:"error",message:"Error in service calling",timeout:"3000"});var t={dataSetValues:dataSetValues,dataObject:{},status:{isDataReceived:!0,summary:"",graph:""}};temp.setComponentLoader(dataSetValues,{isLoader:!1,message:"Data loading failed, ",state:"completed"}),callBack(t)})},temp.m_pythonintervaltimeout);temp.m_ws=pythonInterval}catch(e){hideLoader()}}else{var x;null!=response.outPutJsonData&&null!=response.outPutJsonData?(x=JSON.parse(response.outPutJsonData),"702"!=x.statusCode&&"700"!=x.statusCode&&"701"==x.statusCode&&(isForceStart=!0)):null!=response.errorMessage&&null!=response.errorMessage&&response.errorMessage}})},0)}else temp.showNotificationWindow("Predictive Python Settings are not configured  !",3e3),callBack&&callBack({},!1);else temp.showNotificationWindow("Predictive Python Settings are not configured  !",3e3),callBack&&callBack({},!1);else temp.showNotificationWindow("Predictive Python Settings are not configured  !",3e3),callBack&&callBack({},!1)}this.m_pythonbizvizlocation="",this.m_pythonbizvizvisuallocation="";var reqData={id:"",type:201,status:1,spaceKey:parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey,token:parent.BIZVIZ.SDK.getAuthInfo().authToken,IsPythonWorkspaceLoad:!0,settings:""},data={consumerName:"BIZVIZ_PA",serviceName:"getSettingsFromPa"};data.spacekey=parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey,data.token=parent.BIZVIZ.SDK.getAuthInfo().authToken,data.data=JSON.stringify(reqData),data.isSecure=!0,makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:data,params:{async:!1,crossDomain:!0,headers:temp.getHeaders()}},function(e,t){getSettingsCB(e,t)},function(e,t){getSettingsCB(e,t)})},PAWebService.prototype.stopPythonProcess=function(e,t,a,r){var o,i,s=this;clearInterval(s.m_ws);""!==s.m_processid&&((o={}).url=s.get_base_url_for_python_internal(),o.token=parent.BIZVIZ.SDK.getAuthInfo().authToken,o.reqData=s.m_processid,(i={consumerName:"BIZVIZ_PA",serviceName:"stopPythonProcess"}).spacekey=parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey,i.token=parent.BIZVIZ.SDK.getAuthInfo().authToken,i.data=JSON.stringify(o),i.isSecure=!0,makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:i,params:{async:!1,crossDomain:!0,headers:s.getHeaders()}},function(e,t){},function(e,t){}))},PAWebService.prototype.checkStatus=function(e,t,a,r){var o=null;null==parent.BIZVIZ.SDK.getAuthInfo().key&&null==parent.BIZVIZ.SDK.getAuthInfo().key&&""==parent.BIZVIZ.SDK.getAuthInfo().key||(o=parent.BIZVIZ.SDK.getAuthInfo().key),e.ENC=o,makeUnSecureRequest({method:"POST",url:this.m_pythonbizvizvisuallocation+t,formData:e,params:{headers:{"Content-Type":void 0,ENC:o}}},function(e){e=getDecryptedObjectForPAPython(e),a&&a(e)},function(e){e=getDecryptedObjectForPAPython(e),r&&r(e)})},PAWebService.prototype.checkProcessStatusForPython=function(e,i,s,n,t,l){n.clearComponentLoader(s);for(var a,r,o=0;o<e.length;o++)if("string"==typeof e[o]&&(e[o]=JSON.parse(e[o])),null!=e[o].responseData&&null!=e[o].responseData)-1==e[o].responseData.indexOf("_PA_Python_Logging_")&&-1==e[o].responseData.indexOf("CSE_")&&-1==e[o].responseData.indexOf("ESW_")&&n.setComponentLoader(s,{isLoader:!0,message:e[o].responseData,state:"progress"});else{if(null!=e[o].error){hideLoader(),clearInterval(i);var u={dataSetValues:s,dataObject:{},status:{isDataReceived:!0,summary:"",graph:""}};n.setComponentLoader(s,{isLoader:!1,message:"Data loading failed, "+e[o].error,state:"completed"}),l(u);break}if(null!=e[o].finished&&"done"==e[o].finished){if(t.lastNodeDetails)a=t.lastNodeDetails,r=t.processes[t.lastNodeDetails].ProcessMethod;else for(var d in t.processes)"PythonProcess"!==t.processes[d].ProcessType&&"DataReaderProcess"!==t.processes[d].ProcessType||(a=d,r=t.processes[d].ProcessMethod);n.setComponentLoader(s,{isLoader:!1,message:e[o].responseData,state:"completed"}),clearInterval(i);u={};u.url=n.get_base_url_for_python_internal(),u.token=parent.BIZVIZ.SDK.getAuthInfo().authToken,u.reqData="response,"+t.ProcessID+","+a+","+r,n.checkStatus(u,"componentOutputData",function(e){if(e&&!e.error){hideLoader();var t={dataSetValues:s,dataObject:{},status:{isDataReceived:!0,summary:"",graph:""}};if(e.outPutJsonData&&(e.outPutJsonData.OutputJsonData&&(t.dataObject=e.outPutJsonData.OutputJsonData),e.outPutJsonData.Summary&&(t.status.summary=e.outPutJsonData.Summary),e.outPutJsonData.graphData)){for(var a=parser.getArrayOfSingleLengthJson(e.outPutJsonData.graphData),r=[],o=0;o<a.length;o++)r.push(n.m_pythonbizvizvisuallocation+""+a[o]);t.status.graph=r.join(",")}n.setComponentLoader(s,{isLoader:!1,message:"Data loading successful with summary",state:"completed"}),l(t)}else clearInterval(i),alertPopUpModal({type:"error",message:e.error,timeout:"3000"})},function(e){clearInterval(i),alertPopUpModal({type:"error",message:"Error in service calling",timeout:"3000"});var t={dataSetValues:s,dataObject:{},status:{isDataReceived:!0,summary:"",graph:""}};n.setComponentLoader(s,{isLoader:!1,message:"Data loading failed ",state:"completed"}),l(t)})}}},PAWebService.prototype.get_base_url_for_python_internal=function(){try{var e;return(1==(e=bizviz_pa_python_to_karaf_communication).https?"https://":"http://")+e.domain+(""==e.port?"":":"+e.port)+"/cxf"}catch(e){return""}},PAWebService.prototype.fetchResultViaPythonSocket=function(e,a,r,t,o){var i,s,n=this;if(null!=o.responseData)null!=o.responseData?n.setComponentLoader(a,{isLoader:!0,message:o.responseData,state:"progress"}):n.setComponentLoader(a,{isLoader:!0,message:"Process is in progess..",state:"progress"});else if(null!=o.finished&&"done"==o.finished){if(n.setComponentLoader(a,{isLoader:!0,message:"Completed",state:"completed"}),e.lastNodeDetails)i=e.lastNodeDetails,s=e.processes[e.lastNodeDetails].ProcessMethod;else for(var l in e.processes)"PythonProcess"!==e.processes[l].ProcessType&&"DataReaderProcess"!==e.processes[l].ProcessType||(i=l,s=e.processes[l].ProcessMethod);var u,d,p="response,"+e.ProcessID+","+i+","+s;t.send(p),n.setComponentLoader(a,{isLoader:!1,message:o.responseData,state:"completed"});try{""!==n.m_pythonbizvizlocation&&(u=new WebSocket(n.m_pythonbizvizlocation))}catch(e){}u.onopen=function(e){var t={};t.url=n.get_base_url_for_python_internal(),t.token=parent.BIZVIZ.SDK.getAuthInfo().authToken,t.reqData=p,u.send(JSON.stringify(t))},u.onmessage=function(e){hideLoader();var t={dataSetValues:a,dataObject:{},status:{isDataReceived:!0,summary:"",graph:""}};e&&e.data?(e=JSON.parse(e.data),t.dataObject=n.processOutput(e),e&&e.responseData&&e.responseData.outPutJsonData&&e.responseData.outPutJsonData.Summary&&(t.status.summary=e.responseData.outPutJsonData.Summary),e&&e.responseData&&e.responseData.outPutJsonData&&e.responseData.outPutJsonData.graphData&&(t.status.graph=n.m_pythonbizvizvisuallocation+""+e.responseData.outPutJsonData.graphData),n.setComponentLoader(a,{isLoader:!1,message:"Data loading successful with summary",state:"completed"})):n.setComponentLoader(a,{isLoader:!1,message:"Data loading in progress",state:"progress"}),r(t)},u.onclose=function(e){hideLoader()},u.onerror=function(e){hideLoader(),u.close(),n.setComponentLoader(a,{isLoader:!1,message:"Failed to get data from python workflow",state:"completed"})}}else null!=o.error&&(hideLoader(),n.setComponentLoader(a,{isLoader:!(d={dataSetValues:a,dataObject:{},status:{isDataReceived:!0,summary:"",graph:""}}),message:"Data loading failed, "+o.error,state:"completed"}),t&&null!=t&&t.close(),r(d))},PAWebService.prototype.setCamelWebSocket=function(l,u,d){var p=u.m_pajsondef.predictiveJosnDef||{};u.getRSettings(function(e,t){if(IsBoolean(t)){if(p.Process){for(var a in p.Process){if(p.Process[a].filter&&p.Process[a].filterXml){for(var r=0,o=u.m_key.length;r<o;r++)p.Process[a].filter[u.m_key[r]]=u.m_value[r],u.m_key[r],u.m_value[r],u.m_key[r];p.Process[a].filterXml=""}"RProcess"==p.Process[a].ProcessType&&p.Process[a].connectionMap&&(p.Process[a].connectionMap.IP=e.predictiveRServerSettings.ip,p.Process[a].connectionMap.Password=e.predictiveRServerSettings.password,p.Process[a].connectionMap.Port=e.predictiveRServerSettings.port,p.Process[a].connectionMap.Username=e.predictiveRServerSettings.username)}for(var a in p.Processw)p.Processw[a].filter&&(p.Processw[a].filterXml="")}p.ProcessID="RProcess"+u.getUUID().split("-").join(""),p.token=parent.BIZVIZ.SDK.getAuthInfo().authToken,dGlobals.webSocketTracker[u.m_connid]&&""!==dGlobals.webSocketTracker[u.m_connid]&&dGlobals.webSocketTracker[u.m_connid].close();t={};t.jsonDefinition=JSON.stringify(p),t.isRWorkSpace=!!IsBoolean(l.m_dataUrl.m_predictivejsondef.isR),t.dataSource=p.Process?JSON.stringify(p.Process[0]):"",makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:u.getFormData(t,"excecutePaDProcess"),params:{crossDomain:!0,headers:u.getHeaders()}},function(e){hideLoader(),null!=(e=getDecryptedResponse(e))&&IsBoolean(e.success)?u.setComponentLoader(l,{isLoader:!0,message:"Execute PA-process is successful, Waiting for WebSocket response",state:"progress"}):u.setComponentLoader(l,{isLoader:!1,message:"Failed to execute PA-process",state:"completed"});d({dataSetValues:l,dataObject:{},status:{isDataReceived:!1}});var s=!1,t={processId:p.ProcessID},t=JSON.stringify(t),n=(JSON.parse(e.outPutJsonData),window.setInterval(function(){makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:{consumerName:"BIZVIZ_PA",serviceName:"workflowStatus",data:t,isSecure:!0,spacekey:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey)},params:{crossDomain:!0,headers:u.getHeaders()}},function(e){if(hideLoader(),null!=(e=getDecryptedResponse(e))&&IsBoolean(e.success))for(var t=JSON.parse(e.outPutJsonData),a=0;a<t.length;a++)u.setComponentLoader(l,{isLoader:!0,message:t[a],state:"progress"}),"Workflow finished"===t[a]&&(s=!0);else u.setComponentLoader(l,{isLoader:!1,message:"Failed to execute PA-process",state:"completed"});var r,o={},i={dataSetValues:l,dataObject:{},status:{isDataReceived:!1,summary:"",graph:""}};try{o=getDecryptedResponse(e)}catch(e){}o.success&&IsBoolean(s)?IsBoolean(p.isPerformancePresent)?(r={ProcessId:p.ProcessID,NodeId:p.NodeIdOfApplyModel||11,tabType:"data",ConnectionIndex:[0]},makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:u.getFormData(r,"getCachedData"),params:{crossDomain:!0,headers:u.getHeaders()}},function(e){hideLoader(),(e=getDecryptedResponse(e))&&null!==e.outPutJsonData&&JSON.parse(e.outPutJsonData)[0]&&JSON.parse(JSON.parse(e.outPutJsonData)[0]).OutputJsonData&&(i.status.isDataReceived=!0,i.dataObject=frameworkUtil.convertStringToJson(JSON.parse(JSON.parse(e.outPutJsonData)[0]).OutputJsonData),u.setComponentLoader(l,{isLoader:!0,message:"Data refresh completed",state:"progress"}),null!=dGlobals.webSocketTracker[u.m_connid])?u.getRPerformanceWorkflowSummary(p,i,l,function(){u.getRPerformanceWorkflowGraph(p,i,l,d)}):(u.setComponentLoader(l,{isLoader:!1,message:"Data refresh failed",state:"completed"}),d(i))},function(e){hideLoader(),d({dataSetValues:l,dataObject:{},status:{isDataReceived:!0}})})):(r={ProcessId:p.ProcessID,NodeId:p.lastNodeDetails||11,tabType:"data",ConnectionIndex:[0]},clearInterval(n),makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:u.getFormData(r,"getCachedData"),params:{crossDomain:!0,headers:u.getHeaders()}},function(e){hideLoader(),e=getDecryptedResponse(e),i.status.isDataReceived=!0,e&&e.outPutJsonData&&null!==e.outPutJsonData&&JSON.parse(e.outPutJsonData)[0]&&JSON.parse(JSON.parse(e.outPutJsonData)[0]).OutputJsonData?(i.dataObject=frameworkUtil.convertStringToJson(JSON.parse(JSON.parse(e.outPutJsonData)[0]).OutputJsonData),u.getRWorkflowSummary(p,i,l,function(){u.getRWorkflowGraph(p,i,l,d)})):(u.setComponentLoader(l,{isLoader:!1,message:"Data refresh failed",state:"completed"}),d(i))},function(e){hideLoader(),d({dataSetValues:l,dataObject:{},status:{isDataReceived:!0}})})):u.setComponentLoader(l,{isLoader:!0,message:o.processStatus,state:"progress"})},function(e){hideLoader()})},3e3))},function(e){hideLoader(),u.setComponentLoader(l,{isLoader:!1,message:"Failed to execute PA-process",state:"completed"}),d({dataSetValues:l,dataObject:{},status:{isDataReceived:!0}})})}else u.setComponentLoader(l,{isLoader:!1,message:"Data refresh failed",state:"completed"}),d({dataSetValues:l,dataObject:{},status:{isDataReceived:!0}})})},PAWebService.prototype.getRWorkflowSummary=function(e,r,o,i){var s=this,e={ProcessId:e.ProcessID,NodeId:e.lastNodeDetails||11,tabType:"summary",ConnectionIndex:[0]};makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:s.getFormData(e,"getCachedData"),params:{crossDomain:!0,headers:s.getHeaders()}},function(e){if(e=getDecryptedResponse(e),r.status.isDataReceived=!0,e&&e.outPutJsonData&&null!==e.outPutJsonData&&JSON.parse(e.outPutJsonData)[0])try{var t=JSON.parse(JSON.parse(e.outPutJsonData)).summary,a=t||JSON.parse(JSON.parse(e.outPutJsonData)).Summary;r.status.summary="string"==typeof a?a:a&&a[0]?a[0][0]:void 0,s.setComponentLoader(o,{isLoader:!1,message:"Getting summary successful",state:"progress"})}catch(e){s.setComponentLoader(o,{isLoader:!1,message:"Failed to get summary",state:"progress"})}i()},function(e){i()})},PAWebService.prototype.getRWorkflowGraph=function(e,r,o,i){var s=this,e={ProcessId:e.ProcessID,NodeId:e.lastNodeDetails||11,tabType:"chart",ConnectionIndex:[0]};makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:s.getFormData(e,"getCachedData"),params:{crossDomain:!0,headers:s.getHeaders()}},function(e){if(hideLoader(),e=getDecryptedResponse(e),r.status.isDataReceived=!0,e&&e.outPutJsonData&&null!==e.outPutJsonData&&JSON.parse(e.outPutJsonData)[0])try{var t=JSON.parse(e.outPutJsonData)[0].url,a=t||JSON.parse(JSON.parse(e.outPutJsonData)[0]).url;r.status.graph=a?s.m_rbizvizvisuallocation+""+a:void 0}catch(e){}s.setComponentLoader(o,{isLoader:!1,message:"Data refresh completed",state:"completed"}),i(r)},function(e){hideLoader(),i({dataSetValues:o,dataObject:{},status:{isDataReceived:!0}})})},PAWebService.prototype.getRPerformanceWorkflowSummary=function(e,r,o,i){var s=this,e={ProcessId:e.ProcessID,NodeId:e.lastNodeDetails||11,tabType:"summary",ConnectionIndex:[0]};makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:s.getFormData(e,"getCachedData"),params:{crossDomain:!0,headers:s.getHeaders()}},function(e){if(e=getDecryptedResponse(e),r.status.isDataReceived=!0,e&&e.outPutJsonData&&null!==e.outPutJsonData&&JSON.parse(e.outPutJsonData)[0]&&JSON.parse(JSON.parse(e.outPutJsonData)[0]).OutputJsonData)try{r.status.summary=JSON.parse(JSON.parse(e.outPutJsonData)).Summary,s.setComponentLoader(o,{isLoader:!1,message:"Getting summary successful",state:"progress"})}catch(e){s.setComponentLoader(o,{isLoader:!1,message:"Failed to get summary",state:"progress"})}else if(e&&e.outPutJsonData&&null!==e.outPutJsonData&&JSON.parse(e.outPutJsonData)[0])try{var t=JSON.parse(JSON.parse(e.outPutJsonData)).summary,a=t||JSON.parse(JSON.parse(e.outPutJsonData)).Summary;r.status.summary="string"==typeof a?a:a&&a[0]?a[0][0]:void 0,s.setComponentLoader(o,{isLoader:!1,message:"Getting summary successful",state:"progress"})}catch(e){s.setComponentLoader(o,{isLoader:!1,message:"Failed to get summary",state:"progress"})}i()},function(e){i()})},PAWebService.prototype.getRPerformanceWorkflowGraph=function(e,r,o,i){var s=this,e={ProcessId:e.ProcessID,NodeId:e.lastNodeDetails||11,tabType:"chart",ConnectionIndex:[0]};makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:s.getFormData(e,"getCachedData"),params:{crossDomain:!0,headers:s.getHeaders()}},function(e){if(hideLoader(),e=getDecryptedResponse(e),r.status.isDataReceived=!0,e&&e.outPutJsonData&&null!==e.outPutJsonData&&JSON.parse(e.outPutJsonData)[0])try{var t=JSON.parse(e.outPutJsonData)[0].url,a=t||JSON.parse(JSON.parse(e.outPutJsonData)[0]).url;r.status.graph=a?s.m_rbizvizvisuallocation+""+a:void 0}catch(e){}s.setComponentLoader(o,{isLoader:!1,message:"Data refresh completed",state:"completed"}),null!=dGlobals.webSocketTracker[s.m_connid]&&(dGlobals.webSocketTracker[s.m_connid].close(),dGlobals.webSocketTracker[s.m_connid]=null,i(r))},function(e){hideLoader(),i({dataSetValues:o,dataObject:{},status:{isDataReceived:!0}})})},PAWebService.prototype.getFormData=function(e,t){return{consumerName:"BIZVIZ_PA",data:JSON.stringify(e),from:0,isSecure:!0,rows:9999,serviceName:t,spacekey:parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey,token:parent.BIZVIZ.SDK.getAuthInfo().authToken,userid:parent.BIZVIZ.SDK.getAuthInfo().user.id}},PAWebService.prototype.getDataAndSummary=function(e,t){var a={data:{},summary:""};try{var r=e.Process[e.lastNodeDetails].ProcessType,o="summary";-1<["DirectData","dataTypeDefinition","filter","formula","normalization","sample","rdatasplit","clustering"].indexOf(r)?o="summary":-1<["forecasting","association","outliers","regression","decisionTree","correlation","rapplymodel"].indexOf(r)&&(o="Summary"),a.data=frameworkUtil.convertStringToJson(JSON.parse(JSON.parse(t.outPutJsonData)[0]).OutputJsonData),a.summary=JSON.parse(JSON.parse(t.outPutJsonData))[o]}catch(e){}return a},DSWebService.prototype=new DataService,DSWebService.prototype.init=function(e){this.m_url=e.getUrl(),this.m_key=e.getKeys(),this.m_connid=e.getId(),this.m_dashboard=e.m_dashboard},DSWebService.prototype.callWebservice=function(e,r,o){var i=this,s=-1,t=(this.setValue(e),this.getWorkFlowID(this.m_connid));this.getDSFormDataset(e,r,t),0<this.m_registeredDataSetFormData.length&&showLoader();for(var a=0;a<this.m_registeredDataSetFormData.length;a++){var n=this.m_registeredDataSetFormData[a],l=t+parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey,l=i.getFormData(n,l);makeSecureRequest({url:base_url+req_url.designer.getDsData,method:"POST",formData:l,compName:n.DsComponent,params:{headers:{authtoken:parent.BIZVIZ.SDK.getAuthInfo().authToken,spacekey:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey),userid:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.id)}}},function(e,t,a){e=getDecryptedResponse(e),hideLoader(),s++;e={dataSetValues:r,dataObject:convertToJSON(e,"",i.getDataType()),status:{isDataReceived:!0}};o(e,s,a)},function(){o({dataSetValues:r,dataObject:{},status:{isDataReceived:!0}},s,component)})}},DSWebService.prototype.getDSFormDataset=function(e,t,a){this.m_registeredDataSetFormData=[];for(var r=this.filterOperation(e),o=0;o<t.m_registeredDataSet.length;o++){var i={},s=this.objectOperation(t.m_registeredDataSet[o],a);i.category=s.dataDimesnionARR,i.series=s.dataMeasureARR,i.filter=r,i.filterList="None",i.mergedCubes=[],i.currentCube=null,i.isMergeEnabled=!1,i.mergedCubeDetails={},i.transDim="",i.customField=[],i.rules=[],i.properties={},i.querytype="simple",i.mergedDataStore={},i.masterDataStore=a,i.DsComponent=t.m_registeredDataSet[o].m_id,this.m_registeredDataSetFormData.push(i)}},DSWebService.prototype.objectOperation=function(e,t){for(var a={},r=[],o=[],i=["year","quarter","month","date","week"],s=0;s<e.m_fieldsJson.length;s++){var n,l,u={},d={},p=e.m_fieldsJson[s];"none"===p.dstype&&"Plot"!==e.m_registeredWidget.m_type||"Category"===p.Type||"SubCategory"===p.Type||"parent"===p.hierarchyType||"child"===p.hierarchyType?(void 0!==p.dsdate?(n=(l=p.dsdate.split(":"))[0],l=l[1],d.dimension=p.Name,d.interval=-1<i.indexOf(n)?n:"",d.sourceID=t,-1<i.indexOf(n)&&(d.format=l)):(d.dimension=p.Name,d.interval="",d.sourceID=t),o.push(d)):(u.measure=p.OtherField,u.op="Plot"===e.m_registeredWidget.m_type?"none":p.dstype,u.sourceID=t,r.push(u))}return a.dataDimesnionARR=o,a.dataMeasureARR=r,a},DSWebService.prototype.filterOperation=function(e){for(var t,a={},r=0;r<e.length;r++)""!==e[r]&&void 0!==e[r]&&0<e.length&&(t=e[r].split(","),a[this.m_key[r]]=t);return a},DSWebService.prototype.getWorkFlowID=function(e){for(var t,a=0;a<this.m_dashboard.m_DataProviders.m_dataurl.length;a++){var r=this.m_dashboard.m_DataProviders.m_dataurl[a];if(r.m_id===e){t=r.m_selectedserviceid;break}}return t},DSWebService.prototype.getFormData=function(e,t){return{isSecure:!0,consumerName:"CUBEPROCESSSERVICE",serviceName:t,viewId:0,viewInfo:JSON.stringify(e),facts:"{}",data:"{}",token:parent.BIZVIZ.SDK.getAuthInfo().authToken,spacekey:parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey}},DatasheetService.prototype=new DataService,DatasheetService.prototype.init=function(e){this.m_url=e.getUrl(),this.m_key=e.getKeys(),this.m_connid=e.getId(),this.m_dashboard=e.m_dashboard,this.m_skipfiltervalues=e.getSkipFilterValues()},DatasheetService.prototype.setSlicerDetails=function(e){this.m_sliceindex=e.m_dataUrl.getClaritySliceIndex(),this.m_slicecount=e.m_dataUrl.getClaritySliceCount()},DatasheetService.prototype.getFilterParams=function(e){var t="";if(0!=this.m_key.length)try{for(var a=e.m_dataUrl.m_datasheetjsondef.columns,r=0;r<a.length;r++){var o=this.m_key.indexOf(a[r].title);-1<o&&null!=this.m_value[o]&&("autocomplete"==a[r].type||"dropdown"==a[r].type?t+=""!=t?" and "+this.m_key[o]+" eq '"+this.m_value[o]+"'":this.m_key[o]+" eq '"+this.m_value[o]+"'":t+=""!=t?" and contains("+this.m_key[o]+",'"+this.m_value[o]+"')":"contains("+this.m_key[o]+",'"+this.m_value[o]+"')")}}catch(e){}return t},DatasheetService.prototype.callWebservice=function(e,r,o){this.setSlicerDetails(r),this.setValue(e);e={isSecure:!0,consumerName:"BDBDATASHEET",serviceName:"getSheetRecords",data:JSON.stringify({bizvizdatasheetId:r.m_dataUrl.m_selecteddatasourceid,top:"500",skip:""+this.m_sliceindex,filter:this.getFilterParams(r),dataType:"json"}),spacekey:parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey};makeSecureRequest({url:base_url+req_url.designer.pluginService,method:"POST",formData:e,params:{headers:{authtoken:parent.BIZVIZ.SDK.getAuthInfo().authToken,spacekey:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey),userid:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.id)}}},function(e,t,a){e=getDecryptedResponse(e),hideLoader();e=e.value;o({dataSetValues:r,dataObject:e,status:{isDataReceived:!0}})},function(){o({dataSetValues:r,dataObject:{},status:{isDataReceived:!0}})})},WSWebService.prototype=new DataService,WSWebService.prototype.init=function(e){this.m_url=e.getUrl(),this.m_key=e.getKeys(),this.m_connid=e.getId(),this.m_dashboard=e.m_dashboard},WSWebService.prototype.getWebSocket=function(){return this.m_ws},WSWebService.prototype.callWebservice=function(e,t,a){try{this.initWebSocket(e,t,a)}catch(e){}},WSWebService.prototype.initWebSocket=function(e,t,a){var r=this,e=(r.m_value=e,r.m_datasetvalues=t,parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey),o={dataSetValues:t,dataObject:{},status:{isDataReceived:!0,state:"",message:""}},e=t.m_dataUrl.m_guid&&""!==t.m_dataUrl.m_guid&&t.m_dataUrl.m_igid&&""!==t.m_dataUrl.m_igid&&t.m_dataUrl.m_igs&&""!==t.m_dataUrl.m_igs?r.m_url+"?guid="+t.m_dataUrl.m_guid+"&spaceKey="+e+"&ingestionId="+t.m_dataUrl.m_igid+"&ingestionSecret="+t.m_dataUrl.m_igs:r.m_url;dGlobals.webSocketTracker[r.m_connid]&&""!==dGlobals.webSocketTracker[r.m_connid]&&dGlobals.webSocketTracker[r.m_connid].close();try{r.m_ws=new WebSocket(e),dGlobals.webSocketTracker[r.m_connid]=r.m_ws}catch(e){}r.m_ws.onopen=function(e){o.status.state="open",o.status.message=e.data||"",a(o)},r.m_ws.onmessage=function(t){if(o.dataObject={},o.status.state="message",o.status.message=t.data||"",t&&t.data)try{o.dataObject=[JSON.parse(t.data)],o.status.message=JSON.parse(t.data).key}catch(e){o.dataObject=[{key:t.data}],o.status.message=t.data}a(o)},r.m_ws.onerror=function(e){r.m_ws.close(),dGlobals.webSocketTracker[r.m_connid].close(),o.status.state="error",o.status.message=e.data||"",a(o)},r.m_ws.onclose=function(e){dGlobals.webSocketTracker[r.m_connid]=null,o.dataObject={},o.status.state="close",o.status.message=e.data||"",a(o),IsBoolean(!r.m_dashboard.m_widgetsArray[0].m_designMode)&&r.initWebSocket(r.m_value,r.m_datasetvalues,a)}},GlobalVariableController.prototype.init=function(e){this.dashboard=e},GlobalVariableController.prototype.updateGlobalVariable=function(e,t,a){var r;""!=this.dashboard&&""!=(r=this.dashboard.getGlobalVariable())&&null!=r&&null!=(r=r.map[e.getGlobalKey()])&&(""!=a&&null!=a&&r.updateDrillColor(a),r.m_notifychange=null==e.m_notifychange||e.m_notifychange,r.update(t))},GlobalVariableController.prototype.updateGlobalVarAttribute=function(e,t,a){var r;""!=this.dashboard&&""!=(r=this.dashboard.getGlobalVariable())&&null!=r&&null!=(r=r.map[e])&&r.updateAttribute(t,a)},GlobalVariable.prototype.setVariable=function(e){this.m_Variable.push(e)},GlobalVariable.prototype.getVariable=function(){return this.m_Variable},GlobalVariable.prototype.setGlobalVariables=function(e){this.createKeyVariableObjectMap(e)},GlobalVariable.prototype.createKeyVariableObjectMap=function(e){var t=e.getkey();this.createMap(t,e)},GlobalVariable.prototype.createMap=function(e,t){this.map[e]=t},GlobalVariable.prototype.getDefaultValueParameters=function(e){var e=e.getdefaultValue(),t=new RegExp("{(.*?)}"),a=[];return a=null!=e&&""!=e&&2==(e=e.match(t)).length?e[1].split(","):a},GlobalVariable.prototype.addField=function(e,t){this.map[e].createField(t)},GlobalVariable.prototype.addFieldByKey=function(e,t){e=e.split("\\.");2===e.length&&this.addFieldValueByKeyAndField(e[0],e[1],t)},GlobalVariable.prototype.addFieldValueByKeyAndField=function(e,t,a){this.map[e].createFieldValue(t,a)},GlobalVariable.prototype.getFieldValue=function(e){var t,a=e.split(".");return 2==a.length?this.getFieldValueByKeyAndField(a[0],a[1]):3==a.length&&(t=this.getFieldValueByKeyAndField(a[0],a[1]))?t[a[2]]:e},GlobalVariable.prototype.getFieldValueByKeyAndField=function(key,field){if(-1==field.indexOf("@")){var variable=this.map[key];if(null!=variable)return variable.getFieldValue(field)}else{var re=new RegExp("@(.*?)@"),matchedStr=field.match(re),op=(field=field.replace(matchedStr[0],""),matchedStr[1].replace(matchedStr[0],"")),variable=this.map[key];if(null!=variable)return this.reqColumnDataArr=variable.getFieldValueArray(field),""==this.reqColumnDataArr||null==this.reqColumnDataArr?0:eval("this.get"+op+"();")}},GlobalVariable.prototype.getAVG=function(){for(var e=0,t=0;t<this.reqColumnDataArr.length;t++)e=+e+ +this.reqColumnDataArr[t];return+(e/this.reqColumnDataArr.length).toFixed(1)},Variable.prototype.setUserScript=function(e){this.userScript=e},Variable.prototype.setDataProviderMap=function(e){this.m_DataProviderMap=e},Variable.prototype.getDataProviderMap=function(){return this.m_DataProviderMap},Variable.prototype.setDataSetMap=function(e){this.m_DataSetMap=e},Variable.prototype.getDataSetMap=function(){return this.m_DataSetMap},Variable.prototype.setDefaultValues=function(e){this.m_defaultValues.push(e)},Variable.prototype.getDefaultValues=function(){return this.m_defaultValues},Variable.prototype.getkey=function(){return this.m_key},Variable.prototype.getdefaultValue=function(){return this.m_defaultvalue},Variable.prototype.getDefaultValuekeys=function(){return this.m_defaultValuekeys},Variable.prototype.setDefaultValuekeys=function(e){this.m_defaultValuekeys.push(e)},Variable.prototype.update=function(e){this.updateDefaultValueMap(e),IsBoolean(this.m_notifychange)&&this.notify()},Variable.prototype.updateDefaultValueMap=function(e){for(var t=0;t<this.getDefaultValuekeys().length;t++){var a=this.getDefaultValuekeys()[t];this.map[a]=e[a]}if(null!=e)for(var r in e)this.map[r]=e[r]},Variable.prototype.updateAttribute=function(e,t){this.map[e]=t},Variable.prototype.updateDefaultValueArrayMap=function(e){for(var t=0;t<this.getDefaultValuekeys().length;t++){var a=this.getDefaultValuekeys()[t];this.fieldNameDataArraymap[a]=e[a]}},Variable.prototype.notify=function(){this.notifyDataProviders(),this.notifyDataSet(),this.notifyWidget(),""!=this.userScript&&UserScriptExecuter.prototype.execute(this.userScript,this.toSimplifiedObject()),this.notifyDynamicalyUpdateComponents()},Variable.prototype.toSimplifiedObject=function(){return{key:this.m_key,attributes:this.map}},Variable.prototype.notifyDataProviders=function(){for(var e=0;e<this.m_observerDataProvider.length;e++)this.m_observerDataProvider[e].getDataFromConnection(this.m_observerDataProvider[e].getDataSetValues(),frameworkController.setXMLResponse.bind(frameworkController))},Variable.prototype.notifyDataSet=function(){for(var e=0;e<this.m_observerDataSet.length;e++)this.m_observerDataSet[e].refreshDataFromConnection(frameworkController.renderComponentsWithDataSet)},Variable.prototype.notifyWidget=function(){for(var e=0;e<this.m_observerWidget.length;e++)IsBoolean(this.m_observerWidget[e].m_isVisibiltyConstraintFlag)&&IsBoolean(this.m_observerWidget[e].m_isChartVisible)&&this.m_observerWidget[e].componentVisibility()},Variable.prototype.notifyDynamicalyUpdateComponents=function(){frameworkController.renderComponentsWithDynamicUpdate(this.m_dashboard.m_observerDynamicalyUpdateComponent)},Variable.prototype.updateDrillColor=function(e){for(var t=0;t<this.m_observerWidgetsForDrillColor.length;t++)this.m_observerWidgetsForDrillColor[t].m_startDrill=!0,this.m_observerWidgetsForDrillColor[t].m_drillColor=e},Variable.prototype.registerDataProvider=function(e){this.m_observerDataProvider.push(e)},Variable.prototype.registerDataSet=function(e){this.m_observerDataSet.push(e)},Variable.prototype.registerWidgetsForDrillColor=function(e){this.m_observerWidgetsForDrillColor.push(e)},Variable.prototype.registerWidgets=function(e){this.registerWidgets.push(e)},Variable.prototype.createField=function(e){this.map[e]=""},Variable.prototype.createFieldValue=function(e,t){var a,r,o=this.specialValueExist(t);""!=t?(a=t.match(/'(.*?)'/),r=t.match(/"(.*?)"/),null!=a&&2==a.length?this.map[e]=a[1]:null!=r&&2==r.length?this.map[e]=r[1]:this.map[e]=""!=o?this.getSpecialValues(t,o):t):this.map[e]=t},Variable.prototype.specialValueExist=function(e){for(var t in this.specialValues)if(0==e.indexOf(this.specialValues[t]))return this.specialValues[t];return""},Variable.prototype.getSpecialValues=function(e,t){return parseSystemDateDefaultValue(e,t)},Variable.prototype.getFieldValue=function(e){return this.map[e]},Variable.prototype.getFieldValueArray=function(e){return this.fieldNameDataArraymap[e]},Variable.prototype.setDefaultValuesInMap=function(){for(var e=0;e<this.getDefaultValues().length;e++){var t,a=this.getDefaultValues()[e].getDefaultValuesNameValueMap();for(t in a)this.createField(t),this.createFieldValue(t,a[t]),this.setDefaultValuekeys(t)}},RendererController.prototype.setDashboard=function(e){this.dashboard=e},RendererController.prototype.getDashboard=function(){return this.dashboard},RendererController.prototype.initiateComponents=function(e){this.dashboard=e,this.initializeScaling(),this.initializeGlobalFont(),this.initializeAbsoluteLayout(),this.initializeBootstraping(),this.initializeDraggableDivAndCanvas(),this.dashboard.dashboardclick(this.dashboard.m_id)},RendererController.prototype.initializeScaling=function(){isTouchEnabled=this.getDashboard().isTouchEnabledDevice(),isScaling=!this.getDashboard().isBootstrap()&&this.getDashboard().isScalingEnabled(),widthRatio=1,heightRatio=1;var e=this.getDashboard().getAbsoluteLayout();if(isScaling){e.initializeScaling();for(var t=0,a=this.getDashboard().m_widgetsArray.length;t<a;t++)this.getDashboard().m_widgetsArray[t].initializeScaling()}else e.m_ALWidth=e.m_width,e.m_ALHeight=e.m_height},RendererController.prototype.initializeGlobalFont=function(){var e={useGlobal:IsBoolean(this.getDashboard().getAbsoluteLayout().m_useglobalfont),fontFamily:this.getDashboard().getAbsoluteLayout().m_fontfamily,useFontFromUrl:this.getDashboard().getAbsoluteLayout().m_usefontfromurl,fontUrl:this.getDashboard().getAbsoluteLayout().m_fonturl};setGlobalFont(e)},RendererController.prototype.initializeBootstraping=function(){var e=this.getDashboard().getId(),t=this.getDashboard().getContainers();t&&t.create("draggablesParentDiv"+e)},RendererController.prototype.initializeAbsoluteLayout=function(){var e=this.getDashboard().getId(),t=this.getDashboard().isBootstrap();this.getDashboard().getAbsoluteLayout().init(e,t),this.getDashboard().getAbsoluteLayout().drawAbsoluteCanvas(),this.getDashboard().getAbsoluteLayout().drawMaximizeOverlayDiv(),t&&$("#WatermarkDiv").css("margin","0px")},RendererController.prototype.initializeDraggableDivAndCanvas=function(){for(var e=this.getDashboard().getId(),t=0,a=this.getDashboard().m_widgetsArray.length;t<a;t++){this.getDashboard().m_widgetsArray[t].m_parent&&""!=this.getDashboard().m_widgetsArray[t].m_parent?(this.getDashboard().m_widgetsArray[t].m_bootstrap=!0,this.getDashboard().m_widgetsArray[t].m_chartContainer=$("#"+this.getDashboard().m_widgetsArray[t].m_parent)):this.getDashboard().m_widgetsArray[t].m_chartContainer=$("#draggablesParentDiv"+e),this.getDashboard().m_widgetsArray[t].m_zIndex=t;try{this.getDashboard().m_widgetsArray[t].initializeDraggableDivAndCanvas(t)}catch(e){}}},RendererController.prototype.drawStaticComponents=function(){for(var e=0,t=this.getDashboard().m_widgetsArray.length;e<t;e++){var a=this.getDashboard().m_widgetsArray[e];if(IsBoolean(this.getDashboard().m_widgetsArray[e].m_isDataSetavailable))try{this.componentIniitialVisibility(a)}catch(e){}else{try{a.drawObject()}catch(e){this.throwExceptionMessage(a,e)}try{this.componentIniitialVisibility(a)}catch(e){this.throwExceptionMessage(a,e)}}}},RendererController.prototype.drawComponent=function(e){try{var t=e.Chart;""!=t&&(t.setDataProvider(e.Data),t.setFields(e.Fields),setTimeout(function(){t.draw()},1),this.componentIniitialVisibility(t))}catch(e){this.throwExceptionMessage(t,e),this.componentIniitialVisibility(t)}},RendererController.prototype.drawSingleValueComponent=function(e){for(var t=0;t<e.Chart.length;t++){var a=e.Chart[t];try{""!=a&&(a.setDataProvider(e.Data[t]),a.setDataPointToUpdate(e.DataPointToUpdate[t]),a.draw(),this.componentIniitialVisibility(a))}catch(e){this.throwExceptionMessage(a,e),this.componentIniitialVisibility(a)}}},RendererController.prototype.throwExceptionMessage=function(e,t){},RendererController.prototype.componentIniitialVisibility=function(e){IsBoolean(e.m_initialvisibility)||(e.hideWidget(),e.m_initialvisibility=!0)},RendererController.prototype.drawDashboard=function(e){this.setDashboard(e)},FrameworkController.prototype.initializeDashboardXMLOrJson=function(e){var t,a;-1!=e.trees.tree.fileName.indexOf(".bvzx")?null!=(a=frameworkUtil.convertStringToJson(e.trees.tree.data))&&""!==a?void 0!==a.Niv&&void 0!==a.Niv.Dashboard?this.processDashboardDrawing(a):((t={}).Niv=a.dashboardJson,void 0!==t.Niv&&void 0!==t.Niv.Dashboard?this.processDashboardDrawing(t):alertPopUpModal({type:"error",message:"Dashboard is not valid",timeout:"5000"})):alertPopUpModal({type:"error",message:"Dashboard is not valid",timeout:"5000"}):-1===e.trees.tree.fileName.indexOf(".niv")&&-1===e.trees.tree.fileName.indexOf(".bvz")||(a=decrypt(e.trees.tree.data),this.init(a))},FrameworkController.prototype.init=function(e){e=frameworkUtil.convertXMLToJSON(e);this.processDashboardDrawing(e)},FrameworkController.prototype.setDashboardViewState=function(e){this.m_dashboardviewstate=e},FrameworkController.prototype.getDashboardViewState=function(){return this.m_dashboardviewstate},FrameworkController.prototype.processDashboardDrawing=function(e){var t=this,a=e.Niv.Dashboard.imports||[],r=e.Niv.Dashboard.importsStat||1;if(a.length<1||r<1||e.Niv.Dashboard.AbsoluteLayout&&e.Niv.Dashboard.AbsoluteLayout.Object&&a.length!=e.Niv.Dashboard.AbsoluteLayout.Object.length)for(var o=0;o<e.Niv.Dashboard.AbsoluteLayout.Object.length;o++){if(!(s=e.Niv.Dashboard.AbsoluteLayout.Object[o])||null==s||!s.designData){a=["*"];break}var i=s.designData.class;-1==a.indexOf(i)&&a.push(i)}if(a.length<1||r<1||e.Niv.Dashboard.MobileLayout&&e.Niv.Dashboard.MobileLayout.Object&&a.length!=e.Niv.Dashboard.MobileLayout.Object.length)for(o=0;o<e.Niv.Dashboard.MobileLayout.Object.length;o++){if(!(s=e.Niv.Dashboard.MobileLayout.Object[o])||null==s||!s.designData){a=["*"];break}i=s.designData.class;-1==a.indexOf(i)&&a.push(i)}if(a.length<1||r<1||e.Niv.Dashboard.TabletLayout&&e.Niv.Dashboard.TabletLayout.Object&&a.length!=e.Niv.Dashboard.TabletLayout.Object.length)for(var s,o=0;o<e.Niv.Dashboard.TabletLayout.Object.length;o++){if(!(s=e.Niv.Dashboard.TabletLayout.Object[o])||null==s||!s.designData){a=["*"];break}i=s.designData.class;-1==a.indexOf(i)&&a.push(i)}frameworkUtil.loadCompScripts(a,function(){window.jqEasyUI=jQuery.noConflict(!0),window.$=jqEasyUI,t.dashboard=new DashBoard,e.Niv.Dashboard.AbsoluteLayout.Object=frameworkUtil.removeNullFromObjectsArray(e.Niv.Dashboard.AbsoluteLayout.Object),t.dashboard.setDashboardJson(e),parser.init(e,t.dashboard),parser.parseDashboardJSON(),t.onBeforeDashboardLoad(),t.enableGlobalFilter()})},FrameworkController.prototype.resizeRedraw=function(e){var t=this;t.dashboard=new DashBoard,e.Niv.Dashboard.AbsoluteLayout.Object=frameworkUtil.removeNullFromObjectsArray(e.Niv.Dashboard.AbsoluteLayout.Object),t.dashboard.setDashboardJson(e),parser.init(e,t.dashboard),parser.parseDashboardJSON(),t.onBeforeDashboardLoad(),t.enableGlobalFilter()},FrameworkController.prototype.enableGlobalFilter=function(){setTimeout(function(){sdk.filterReportBurst()},12e4)},FrameworkController.prototype.onBeforeDashboardLoad=function(){IsBoolean(frameworkController.dashboard.m_enablereportburst)&&sdk.createExportComponentForReportBurst(),bizviz.init(frameworkController.dashboard),gvController.init(frameworkController.dashboard),this.setValuesFromQueryString(),this.registerObserverNotifiers(),this.dashboard.initWindowResizeEvent(),this.initiateComponents(),bizviz.updateGlobalVariable("dashboard",{},!0),this.getLanguageMappingAndDrawDashboard(),frameworkUtil.initUnloadEvent()},FrameworkController.prototype.getLanguageMappingAndDrawDashboard=function(){var e=this;setTimeout(function(){e.initLanguageMapping(function(){e.drawStaticComponents(),e.initService()})},100)},FrameworkController.prototype.drawHiddenComponents=function(){try{IsBoolean(this.dashboard.m_enablereportburst)&&sdk.createExportComponentForReportBurst()}catch(e){}},FrameworkController.prototype.initLanguageMapping=function(a){var r,e;!IsBoolean(dGlobals.langMap.isEnabled)||!req_url.designer.getLanguageSettingContents||""===dGlobals.langMap.name&&""===dGlobals.langMap.id?a():(showLoader(),r=this,e={languageSettingName:dGlobals.langMap.name,languageKey:dGlobals.langMap.language},dGlobals.langMap.id&&(e.languageSettingId=dGlobals.langMap.id),makeSecureRequest({url:base_url+req_url.designer.getLanguageSettingContents,method:"POST",formData:{data:JSON.stringify(e),serviceName:"getLanguageSettingContents",spacekey:parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey,token:parent.BIZVIZ.SDK.getAuthInfo().authToken,userid:parent.BIZVIZ.SDK.getAuthInfo().user.id},params:{headers:{authtoken:parent.BIZVIZ.SDK.getAuthInfo().authToken,spacekey:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey),userid:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.id)}}},function(e){if(hideLoader(),e)try{var t=e=getDecryptedResponse(e);t&&IsBoolean(t.success)&&r.setLanguageMappingData(t.languageSettingContents)}catch(e){}a&&a()},function(){hideLoader(),a&&a()}))},FrameworkController.prototype.setLanguageMappingData=function(e){var t={};e&&e.map(function(e){"all"!==dGlobals.langMap.language&&e.languageKey!=dGlobals.langMap.language||(t[""+e.key]=e.value)}),dGlobals.langMap.data=t},FrameworkController.prototype.resizeDashboard=function(){isScaling&&(parser.parseDashboardJSON(),gvController.init(this.dashboard),this.setValuesFromQueryString(),this.registerObserverNotifiers(),this.initiateComponents(),this.getLanguageMappingAndDrawDashboard())},FrameworkController.prototype.setValuesFromQueryString=function(){var e,t=this.getQueryStrings();for(e in t)void 0!==e&&""!==e&&(-1<e.indexOf(".")?this.setValuesToGlobalVariable(e,t[e]):this.setValuesToFlashVars(e,t[e]))},FrameworkController.prototype.getQueryStrings=function(){function e(e){return decodeURIComponent(e.replace(/\+/g," "))}var t={},a=location.search.substring(1);if(""!==a&&void 0!==a)for(var r=a.split("&"),o=0;o<r.length;o++){var i=r[o].split("=");1<i.length&&(t[e(i[0])]=e(i[1]))}return t},FrameworkController.prototype.setValuesToGlobalVariable=function(e,t){e=e.split(".");gvController.updateGlobalVarAttribute(e[0],e[1],t)},FrameworkController.prototype.setValuesToFlashVars=function(e,t){var a,r;void 0!==this.dashboard&&""!==this.dashboard&&(""===(a=this.dashboard.getFlashVars())&&(r=new FlashVars,this.dashboard.setFlashVars(r)),""===(r=a.getParamFromName(e))?((r=new Param).setName(e),r.setValue(t),a.setParam(r)):r.setValue(t))},FrameworkController.prototype.registerObserverNotifiers=function(){this.dashboard.initializeDataProvider()},FrameworkController.prototype.initiateComponents=function(){rendererController.initiateComponents(this.dashboard)},FrameworkController.prototype.drawStaticComponents=function(){rendererController.drawStaticComponents()},FrameworkController.prototype.initService=function(){initLoader();for(var i=this,e=(dataManager.setDashboard(this.dashboard),[]),s={load:[],noLoad:[]},n=this.dashboard.getDataProviders().getDataURL(),t=0;t<n.length;t++){var a=n[t].m_servicetype||n[t].m_type;"web"!==n[t].m_type||"clarityWSDL"!=a&&"bizvizPA"===a||!e.some(function(e){return e.type===n[t].m_datasourcetype})&&n[t].m_datasourcetype&&e.push({type:n[t].m_datasourcetype}),(IsBoolean(n[t].m_loadatstartup)?s.load:s.noLoad).push(n[t])}this.initWSDLCalls(e,function(e){if(e)try{e=getDecryptedResponse(e);for(var t=JSON.parse(e),a=0;a<n.length;a++){var r=n[a].m_servicetype||n[a].m_type;if("web"===n[a].m_type&&("clarityWSDL"==r||"bizvizPA"!==r))for(var o=0;o<t.length;o++)if(t[o]&&t[o].type===n[a].m_datasourcetype){n[a].setSOAPEndPoint(t[o].url),n[a].getWebService().setQueryEndPoint(t[o].url);break}}}catch(e){}i.initServiceBlocks(0,s.load.concat(s.noLoad))})},FrameworkController.prototype.initWSDLCalls=function(e,t){0<e.length&&req_url.designer.getEndpointUrl?(showLoader(),makeSecureRequest({url:base_url+req_url.designer.getEndpointUrl,method:"POST",formData:{data:JSON.stringify({dcType:e}),spacekey:parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey,token:parent.BIZVIZ.SDK.getAuthInfo().authToken,userid:parent.BIZVIZ.SDK.getAuthInfo().user.id},params:{headers:{authtoken:parent.BIZVIZ.SDK.getAuthInfo().authToken,spacekey:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.spaceKey),userid:encryptText(parent.BIZVIZ.SDK.getAuthInfo().user.id)}}},function(e){hideLoader(),t&&t(e)},function(){hideLoader(),t&&t()})):t&&t()},FrameworkController.prototype.initServiceBlocks=function(e,t){var a=this;function r(){++e*a.m_chunkdatalimit<t.length&&a.initServiceBlocks(e,t)}for(var o=e*a.m_chunkdatalimit;o<t.length;o++){if(!(o<(e+1)*a.m_chunkdatalimit)){setTimeout(r,a.m_chunkdatatimeout);break}var i=this.dashboard.getDataProviders().getDataURL()[o];"ds"===i.m_type?dataManager.initiateService(i,this.setXMLResponseForDs.bind(this)):dataManager.initiateService(i,this.setXMLResponse.bind(this))}},FrameworkController.prototype.setXMLResponse=function(e){this.getDashboardViewState()&&this.notifyObserverComponents(e)},FrameworkController.prototype.setXMLResponseForDs=function(e,t,a){this.getDashboardViewState()&&this.notifyObserverComponentsForDs(e,t,a)},FrameworkController.prototype.notifyObserverComponents=function(e){e.dataObject=frameworkUtil.cleanData(e.dataObject),this.m_dataStore=e,this.updateWholeData(e),IsBoolean(e&&e.status&&e.status.isDataReceived)&&(this.callNotifierCallbacks(e),this.m_dataStore=e,this.updateConnectionGlobalVariable(this.m_dataStore));e=dataManager.manipulateData(e);this.renderComponentsWithDataSet(e),this.renderComponentsWithVirtualDataSet(e)},FrameworkController.prototype.notifyObserverComponentsForDs=function(e,t,a){e.dataObject=frameworkUtil.cleanData(e.dataObject),this.m_dataStore=e,this.updateWholeData(e),IsBoolean(e&&e.status&&e.status.isDataReceived)&&(this.callNotifierCallbacks(e),this.m_dataStore=e,this.updateConnectionGlobalVariable(this.m_dataStore));e=dataManager.manipulateData(e);this.renderComponentsWithDataSetForDs(e,t,a),this.renderComponentsWithVirtualDataSet(e)},FrameworkController.prototype.updateWholeData=function(e){e.dataSetValues.m_dataUrl.setWholeData(e.dataObject)},FrameworkController.prototype.callNotifierCallbacks=function(e){e.dataSetValues.m_dataUrl.callNotifierCallbacks(e.dataObject)},FrameworkController.prototype.updateConnectionGlobalVariable=function(e){gvController.updateGlobalVariable(e.dataSetValues.m_dataUrl,{data:e.dataObject,FrameworkComponent:this.m_dataStore},"")},FrameworkController.prototype.renderComponentsWithDataSet=function(e){if(e)for(var t=0;t<e.DataSet.length;t++)rendererController.drawComponent(e.DataSet[t])},FrameworkController.prototype.renderComponentsWithDataSetForDs=function(e,t,a){if(e){if(e.DataSet[t].Chart.m_datasetid!==a)for(var r=0;r<e.DataSet.length;r++)if(e.DataSet[r].Chart.m_datasetid===a){t=r;break}for(var o=e.DataSet[t].Fields,i=this.getFieldValues(o,"hierarchyType"),s=0;s<o.length;s++)if(("none"!==o[s].dstype||"XField"===o[s].Type)&&void 0!==o[s].dstype)if("datagrid"==e.DataSet[t].Chart.m_objecttype){var n,l=o[s].fieldname.split("_");o[s].fieldname=l[0]===o[s].dstype?o[s].fieldname:o[s].dstype+"_"+o[s].fieldname,e.DataSet[t].Chart.m_defaultlegendfields&&e.DataSet[t].Chart.m_defaultlegendfields[s]&&(e.DataSet[t].Chart.m_defaultlegendfields[s].key=o[s].fieldname),e.DataSet[t].Chart.m_alertObj&&e.DataSet[t].Chart.m_alertObj[o[s].Name]&&((n=e.DataSet[t].Chart.m_alertObj)[o[s].fieldname]=l[0]===o[s].dstype?e.DataSet[t].Chart.m_alertObj[o[s].fieldname]:e.DataSet[t].Chart.m_alertObj[o[s].Name],n[o[s].fieldname].m_name=l[0]===o[s].dstype?n[o[s].fieldname].m_name:o[s].dstype+"_"+n[o[s].fieldname].m_name,n[o[s].fieldname].m_comparecolumn=l[0]===o[s].dstype?n[o[s].fieldname].m_comparecolumn:o[s].dstype+"_"+n[o[s].fieldname].m_comparecolumn,delete n[o[s].Name])}else{l=o[s].Name.split("_");if(e.DataSet[t].Chart.m_conditionalColors&&e.DataSet[t].Chart.m_conditionalColors.m_ConditionalColor&&"Category"!==o[s].Type&&l[0]!==o[s].dstype){for(var u=e.DataSet[t].Chart.m_conditionalColors.m_ConditionalColor,d=e.DataSet[t].Chart.chartJson[e.DataSet[t].Chart.m_subelement].ConditionalColors.ConditionalColor,p=0;p<u.length;p++)u[p].m_seriesname===o[s].Name&&(u[p].m_seriesname=o[s].dstype+"_"+u[p].m_seriesname,u[p].m_comparedfield=o[s].dstype+"_"+u[p].m_comparedfield,d[p].seriesName=o[s].dstype+"_"+d[p].seriesName,d[p].comparedField=o[s].dstype+"_"+d[p].comparedField);if(e.DataSet[t].Chart.m_defaultlegendfields)for(var h=0;h<e.DataSet[t].Chart.m_defaultlegendfields.length;h++)e.DataSet[t].Chart.m_defaultlegendfields[h].key===o[s].Name&&(e.DataSet[t].Chart.m_defaultlegendfields[h].key=l[0]===o[s].dstype?o[s].Name:o[s].dstype+"_"+o[s].Name)}var c="Category"===o[s].Type||"parent"===o[s].hierarchyType||"child"===o[s].hierarchyType||l[0]===o[s].dstype;if(o[s].Name=IsBoolean(c)?o[s].Name:o[s].dstype+"_"+o[s].Name,"Plot"===e.DataSet[t].Chart.m_type&&(o[s].OtherField=IsBoolean(c)?o[s].OtherField:o[s].dstype+"_"+o[s].OtherField,o[s].ColorField=IsBoolean(c)?o[s].ColorField:o[s].dstype+"_"+o[s].ColorField),o[s].DataLabelCustomProperties.datalabelField=IsBoolean(c)?o[s].DataLabelCustomProperties.datalabelField:o[s].dstype+"_"+o[s].DataLabelCustomProperties.datalabelField,"TreeMap"===e.DataSet[t].Chart.m_type){for(var m="",g=o[s].AdditionalField.split(","),f=0;f<g.length;f++){var y="parent"===i[g[f]]||"child"===i[g[f]],y=IsBoolean(c)||IsBoolean(y)?g[f]:o[s].dstype+"_"+g[f];f===g.length-1?m+=y:m=m+y+","}o[s].AdditionalField=m}}rendererController.drawComponent(e.DataSet[t])}},FrameworkController.prototype.getFieldValues=function(e,t){for(var a={},r=0;r<e.length;r++)void 0!==e[r].Name&&(a[e[r].Name]=e[r][t]);return a},FrameworkController.prototype.renderComponentsWithVirtualDataSet=function(e){if(e)for(var t=0;t<e.VirtualDataSet.length;t++)rendererController.drawSingleValueComponent(e.VirtualDataSet[t])},FrameworkController.prototype.renderComponentsWithDynamicUpdate=function(e){if(e)for(var t=0;t<e.length;t++)e[t].draw(),rendererController.componentIniitialVisibility(e[t])},FrameworkController.prototype.redrawObjects=function(){var e=rendererController.getDashboard().m_widgetsArray,t=rendererController.getDashboard().isBootstrap();t&&(rendererController.getDashboard().getAbsoluteLayout().drawAbsoluteCanvas(),rendererController.getDashboard().getAbsoluteLayout().drawMaximizeOverlayDiv());for(var a=0;a<e.length;a++)t&&e[a].initializeForBootstrap(),e[a].setDraggableCanvasSize(),e[a].draw()};var parser=new Parser,dataManager=new DataManager,serviceManager=new ServiceManager,gvController=new GlobalVariableController,rendererController=new RendererController,frameworkController=new FrameworkController,frameworkUtil=new FrameworkUtil;function DashBoard(){this.m_id="",this.m_DashboardOptions="",this.m_LanguageMapping="",this.m_FlashVars="",this.m_AuthProfiles="",this.m_DataProviders="",this.m_GlobalVariable="",this.m_AbsoluteLayout="",this.m_ManageConnection="",this.m_VisibilityConstraint="",this.m_DataSetExpressions="",this.m_Containers="",this.m_bootstrap=!1,this.m_scalingenabled=!1,this.m_touchenabled=!1,this.m_virtualDataSet=[],this.m_dataMap=new Object,this.m_widgetsArray=[],this.m_dataSetsArray=[],this.showWidgetArray=[],this.hideWidgetArray=[],this.availableGroups=[],this.m_dashboardjson="",this.m_enablecache=!1,this.m_enablereportburst=!0,this.m_enableresize=!1,this.m_crosshighligter=!0}function AbsoluteLayout(){this.m_width="800",this.m_borderthickness="0",this.m_gradients="",this.m_height="500",this.m_gradientrotation="",this.m_bordercolor="",this.m_bgalpha=1,this.m_dashBoard="",this.m_manageConnection="",this.m_widgetsArray=[],this.m_widgetsGroupArray=[],this.m_widgetsGroup=[],this.m_group=[],this.GaugeObjectArray=[],this.m_chartFrame=new ChartFrame,this.m_showborder=!0,this.m_left=0,this.m_top=0,this.m_absoluteLayoutName="",this.m_bootstrap=!1,this.m_scalingenabled=!1,this.m_scalingview="fitToPage",this.m_dashboardalign="none",this.m_ALWidth=this.m_width,this.m_ALHeight=this.m_height,this.m_dashboardmargin=0,this.m_dashboardmarginratio=0,this.m_defaultabslolutelayoutpadding=0}function DashboardOptions(){this.m_expirydate="",this.m_hasexpiry="",this.m_publishwsdlserver=""}function FlashVars(){this.m_param=[]}function Param(){this.m_name,this.m_value}function AuthProfiles(){this.m_profile=[]}function Profile(){this.m_name,this.m_username,this.m_password}function DataProviders(){this.m_dataurl=[],this.m_dataUrlIdObjMap=new Object}function DataURL(){this.m_userid,this.m_id,this.m_profilename,this.m_url,this.m_islangwebservice,this.m_allowsessionid,this.m_profilename,this.m_refreshseconds,this.m_timelyrefresh,this.m_drillwhendatachanges,this.m_offlinedataid,this.m_password,this.m_type,this.m_loadatstartup,this.m_fieldSet=[],this.m_con,this.m_clarityslice,this.m_claritysort,this.isSorting=!1,this.m_keys=[],this.m_dashboard="",this.m_webservice="",this.m_dataSetValues="",this.m_languageMappingValues="",this.m_fieldNamesArray=[],this.m_queryParamsMap="",this.m_dataLoadCount=0,this.m_wholeData,this.m_notifierCallbacks=[],this.m_datatype="JSON",this.m_soapendpoint="",this.m_skipfiltervalues=[""],this.m_clausevalues={}}function OfflineDataProvider(){this.base=DataURL,this.base(),this.m_fieldName=[],this.m_allFieldName=[],this.m_completeParsedData=[],this.m_completeParsedDataLowerCase=[],this.m_excluderecordsforemptymatch=!0}function OnlineDataProvider(){this.base=DataURL,this.base()}function DerivedDataProvider(){this.base=DataURL,this.base(),this.m_fieldName=[],this.m_allFieldName=[],this.m_completeParsedData=[],this.m_completeParsedDataLowerCase=[],this.m_parentDataReady=!1,this.m_childDataReady=!1,this.m_parentData=[],this.m_childData=[],this.m_dataDirty=!0,this.mergedData=[],this.m_registeredCallBack,this.m_registeredCallBackData}function ClaritySlice(){this.m_sliceindex="",this.m_slicecount=""}function ClaritySort(){this.m_columns=[],this.m_sortfield=[],this.m_sortdirection=[]}function FieldSet(){this.m_type,this.m_name,this.m_displayname}function LanguageMapping(){this.base=DataURL,this.base(),this.m_source="",this.m_dataUrl="",this.m_connectionId="",this.m_fieldName=[],this.m_fieldNameValues=[],this.m_registerdWidgets=[],this.m_enable=!1,this.m_mappingname="",this.m_mappingid="",this.m_language="",this.m_hidebrackets=!1}function Con(){this.m_orderby="",this.m_clause="",this.m_defaultclause="",this.m_groupby="",this.clauseMap=new Object,this.defaultclauseMap=new Object,this.keyArr=[],this.m_clausemap=""}function DefaultValues(){this.m_name="",this.m_text="",this.m_defaultValuesNameValueMap=new Object}function DataProvider(){this.m_id=""}function DataSetExpressions(){this.m_dataSetExpression=[],this.m_dataSetExpressionMap=new Object,this.m_dataSetCount=0}function DataSetExpression(){this.m_id="",this.m_expressionScript="",this.m_Variable=[],this.m_count=0}function DataSetExpressionVariable(){this.m_name="",this.m_value=""}function DataSetExpressionscript(){this.m_expressionScript=""}DashBoard.prototype.setDashboardJson=function(e){this.m_dashboardjson=e},DashBoard.prototype.getDashboardJson=function(e){return this.m_dashboardjson},DashBoard.prototype.dashboardclick=function(e){var n=this;$("#draggablesParentDiv"+e).click(function(e){if(n.m_crosshighligter&&void 0!==n.m_dataobj&&void 0!==n.m_dataobj.drillComponent){n.m_dataobj.drillComponent.m_drilltoggle=!0,sdk.applyDrill(n.m_drillcomps,n.m_dataobj),n.m_dataobj.drillComponent.m_drilltoggle=!1,"column_stack_chart"!=n.m_dataobj.drillComponent.m_componenttype&&"line_chart"!=n.m_dataobj.drillComponent.m_componenttype&&"mixed_chart"!=n.m_dataobj.drillComponent.m_componenttype&&"bubble_chart"!=n.m_dataobj.drillComponent.m_componenttype||(n.m_dataobj.drillComponent.m_drilltoggle=!0);var t=n.m_dataobj.drillComponent.m_componenttype,a=n.m_dataobj.drillComponent;switch(t){case"bar_chart":for(var r=0;r<a.m_noofseries;r++)for(var o=0;o<a.m_categoryData[0].length;o++)$("#stackgrp"+a.m_objectid+"s"+r+"c"+o).css("opacity","1");break;case"bubble_chart":for(r=0;r<a.m_seriesData[0].length;r++)for(o=0;o<a.m_categoryData.length;o++)a.m_transparencyarr[r][o]=1;a.initializeBubble(),a.drawChart();break;case"timeline_chart":for(r=0;r<a.m_seriesData.length;r++)for(o=0;o<a.SerData[0].length;o++){var i=void 0!==a.m_columnSeries[a.m_seriesNames[r]]?"topRoundedStack"+a.svgContainerId+r+o:"linestack"+a.svgContainerId+r+o,s=void 0!==a.m_columnSeries[a.m_seriesNames[r]]?"topRoundedStack_stackgrpslider"+a.svgContainerId+r+o:"linestack"+a.svgContainerId+r+o;(IsBoolean(!a.m_showslider)?$("#"+i):($("#"+i).css("opacity","1"),$("#"+s))).css("opacity","1")}break;case"group_bar_chart":case"group_column_chart":for(r=0;r<a.m_seriesData.length;r++)for(o=0;o<a.m_categoryData[0].length;o++)$("#stackgrp"+a.m_objectid+r+o).css("opacity","1");break;case"scattered_plot_chart":for(r=0;r<a.m_seriesData.length;r++)for(o=0;o<a.m_categoryData[0].length;o++)$("#scatterplot"+a.m_objectid+r+o).css("opacity","1");break;case"mixed_chart":for(r=0;r<a.m_seriesData[0].length;r++)for(o=0;o<a.m_seriesNames.length;o++)a.m_transparencyarr[a.m_seriesNames[o]][r]=1;a.instanciateSeries(a.seriesDataMap),a.drawChart();break;case"line_chart":for(r=0;r<a.m_seriesData[0].length;r++)for(o=0;o<a.m_seriesNames.length;o++)a.m_transparencyarr[a.m_seriesNames[o]][r]=1;a.initializeCalculation(),a.drawChart();break;case"column_stack_chart":for(r=0;r<a.m_seriesData[0].length;r++)for(o=0;o<a.m_seriesNames.length;o++)a.m_transparencyarr[a.m_seriesNames[o]][r]=1;a.m_stackWidth=a.m_calculation.getBarWidth(),a.initializeColumns(),a.drawChart()}}})},DashBoard.prototype.setId=function(e){this.m_id=e},DashBoard.prototype.getId=function(){return this.m_id},DashBoard.prototype.setAbsoluteLayout=function(e){this.m_AbsoluteLayout=e},DashBoard.prototype.getAbsoluteLayout=function(){return this.m_AbsoluteLayout},DashBoard.prototype.setContainers=function(e){this.m_Containers=e},DashBoard.prototype.getContainers=function(){return this.m_Containers},DashBoard.prototype.isBootstrap=function(){return IsBoolean(this.m_bootstrap)},DashBoard.prototype.setBootstrap=function(e){this.m_bootstrap=e},DashBoard.prototype.isScalingEnabled=function(){return this.isValidMobileView()?(this.m_scalingenabled=!0,this.getAbsoluteLayout().m_scalingview="fitToWidth",this.getAbsoluteLayout().m_height=windowWH.h-this.getAbsoluteLayout().getBorderThickness()*this.getAbsoluteLayout().getDashboardMarginRatio(),!0):!!IsBoolean(this.m_scalingenabled)||!!this.isTouchEnabledDevice()},DashBoard.prototype.setScalingEnabled=function(e){this.m_scalingenabled=e},DashBoard.prototype.isTouchEnabledDevice=function(){return!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g)},DashBoard.prototype.isValidMobileView=function(){return detectDevice.mobile()?!!this.m_dashboardjson.Niv.Dashboard.MobileLayout&&0<this.m_dashboardjson.Niv.Dashboard.MobileLayout.Object.length:!!detectDevice.tablet()&&!!this.m_dashboardjson.Niv.Dashboard.TabletLayout&&0<this.m_dashboardjson.Niv.Dashboard.TabletLayout.Object.length},DashBoard.prototype.setTouchEnabledDevice=function(e){this.m_touchenabled=e},DashBoard.prototype.setDashboardOptions=function(e){this.m_DashboardOptions=e},DashBoard.prototype.getDashboardOptions=function(){return this.m_DashboardOptions},DashBoard.prototype.setLanguageMapping=function(e){this.m_LanguageMapping=e,dGlobals.langMap.isEnabled=IsBoolean(this.m_LanguageMapping.m_enable),dGlobals.langMap.id=this.m_LanguageMapping.m_mappingid,dGlobals.langMap.name=this.m_LanguageMapping.m_mappingname,dGlobals.langMap.language=this.m_LanguageMapping.m_language,dGlobals.langMap.hideBrackets=this.m_LanguageMapping.m_hidebrackets},DashBoard.prototype.getLanguageMapping=function(){return this.m_LanguageMapping},DashBoard.prototype.setFlashVars=function(e){this.m_FlashVars=e},DashBoard.prototype.getFlashVars=function(){return this.m_FlashVars},DashBoard.prototype.setAuthProfiles=function(e){this.m_AuthProfiles=e},DashBoard.prototype.getAuthProfiles=function(){return this.m_AuthProfiles},DashBoard.prototype.setVisibilityConstraint=function(e){this.m_VisibilityConstraint=e},DashBoard.prototype.getVisibilityConstraint=function(){return this.m_VisibilityConstraint},DashBoard.prototype.setDataSetExpressions=function(e){this.m_DataSetExpressions=e},DashBoard.prototype.getDataSetExpressions=function(){return this.m_DataSetExpressions},DashBoard.prototype.setDataProviders=function(e){this.m_DataProviders=e},DashBoard.prototype.getDataProviders=function(){return this.m_DataProviders},DashBoard.prototype.setGlobalVariable=function(e){this.m_GlobalVariable=e},DashBoard.prototype.getGlobalVariable=function(){return this.m_GlobalVariable},DashBoard.prototype.setManageConnection=function(e){this.m_ManageConnection=e},DashBoard.prototype.getManageConnection=function(){return this.m_ManageConnection},DashBoard.prototype.setVirtualDataSet=function(e){this.m_virtualDataSet.push(e)},DashBoard.prototype.getVirtualDataSet=function(){return this.m_virtualDataSet},DashBoard.prototype.getdataMap=function(){return this.m_dataMap},DashBoard.prototype.getXMLData=function(e){return this.m_dataMap[e]},DashBoard.prototype.pushUniqueToAvailableGroups=function(t){pushIfNotExist(this.availableGroups,t,function(e){return e===t})},DashBoard.prototype.getAllGroups=function(){return this.availableGroups},DashBoard.prototype.drawDashBoard=function(){if(IsBoolean(isGroup))for(var e=0;e<this.getAbsoluteLayout().m_group.length;e++)this.getAbsoluteLayout().m_group[e].drawObject();this.initializeScaling(),this.initializeDataProvider(),this.initializeDraggableDivAndCanvas(),this.getAbsoluteLayout().drawAbsoluteCanvas(),this.getAbsoluteLayout().drawMaximizeOverlayDiv(),this.drawComponentsDontHaveDataSet(),this.notify()},DashBoard.prototype.initializeScaling=function(){isTouchEnabled=this.isTouchEnabledDevice(),isScaling=!this.isBootstrap()&&this.isScalingEnabled(),widthRatio=1,heightRatio=1,isScaling?(this.initializeScalingOfAbsoluteLayout(),this.initializeScalingOfWidgets()):(this.m_top=0,this.m_left=0)},DashBoard.prototype.initializeScalingOfAbsoluteLayout=function(){this.getAbsoluteLayout().initializeScaling()},DashBoard.prototype.initializeScalingOfWidgets=function(){for(var e=0;e<this.m_widgetsArray.length;e++)this.m_widgetsArray[e].initializeScaling()},DashBoard.prototype.initializeDataProvider=function(){this.initDataProviders(),this.registerWidgetsForDrillColorWithGlobalVariable(),this.registerWebSeviceWithDataprovider(),this.registerDataSetValuesWithDataprovider(),this.registerDataSetsWithDataSetValues(),this.registerWidgetsWithDataSet(),this.registerDynamicalyUpdateComponent()},DashBoard.prototype.initDataProviders=function(){for(var e=0;e<this.getDataProviders().getDataURL().length;e++)this.getDataProviders().getDataURL()[e].init()},DashBoard.prototype.registerWidgetsForDrillColorWithGlobalVariable=function(){for(var e=this.getGlobalVariable().getVariable(),t=0;t<e.length;t++)for(var a=0;a<this.getDataProviders().getDataURL().length;a++)for(var r=this.getDataProviders().getDataURL()[a].getId(),o=0;o<this.m_widgetsArray.length;o++){var i=this.m_widgetsArray[o];"chart"==i.m_objecttype&&i.getDataSourceId()==r&&IsBoolean(i.m_enablecolorfromdrill)&&e[t].registerWidgetsForDrillColor(i)}},DashBoard.prototype.registerWebSeviceWithDataprovider=function(){for(var e=0;e<this.getDataProviders().getDataURL().length;e++){var t=this.getDataProviders().getDataURL()[e];"offline"!=t.getType()&&t.registerWebServiceWithDataProvider(this)}},DashBoard.prototype.registerDataSetValuesWithDataprovider=function(){for(var e=0;e<this.getDataProviders().getDataURL().length;e++)this.getDataProviders().getDataURL()[e].registerDataSetValuesWithDataprovider()},DashBoard.prototype.registerDataSetsWithDataSetValues=function(){for(var e=0;e<this.getDataProviders().getDataURL().length;e++)for(var t=this.getDataProviders().getDataURL()[e],a=0;a<this.m_dataSetsArray.length;a++)this.m_dataSetsArray[a].getDataSource()==t.getId()&&t.getDataSetValues().registerDataSetsWithDataSetValues(this.m_dataSetsArray[a])},DashBoard.prototype.registerWidgetsWithDataSet=function(){for(var e=0;e<this.m_dataSetsArray.length;e++)for(var t=0;t<this.m_widgetsArray.length;t++)this.m_dataSetsArray[e].getId()==this.m_widgetsArray[t].getDataSetId()&&this.m_dataSetsArray[e].registerWidgetsWithDataSet(this.m_widgetsArray[t])},DashBoard.prototype.registerDynamicalyUpdateComponent=function(){this.m_observerDynamicalyUpdateComponent=[];for(var e=0;e<this.m_widgetsArray.length;e++){var t,a,r=this.m_widgetsArray[e].m_objecttype;"label"==r||"textbox"==r?(t=this.m_widgetsArray[e].m_isdynamic,a=this.m_widgetsArray[e].m_isVirtualDataSetavailable,frameworkUtil.IsBoolean(t)&&!frameworkUtil.IsBoolean(a)&&this.setDynamicalyUpdateComponent(this.m_widgetsArray[e])):"gauge"!=r&&"semigauge"!=r||""==this.m_widgetsArray[e].m_valuevariable||frameworkUtil.IsBoolean(this.m_widgetsArray[e].m_isVirtualDataSetavailable)||this.setDynamicalyUpdateComponent(this.m_widgetsArray[e])}},DashBoard.prototype.setDynamicalyUpdateComponent=function(e){this.m_observerDynamicalyUpdateComponent.push(e)},DashBoard.prototype.initializeDraggableDivAndCanvas=function(){var e="dashboardName";this.getAbsoluteLayout().init(e);for(var t=0;t<this.m_widgetsArray.length;t++)this.m_widgetsArray[t].initializeDraggableDivAndCanvas(e,t)},DashBoard.prototype.drawComponentsDontHaveDataSet=function(){for(var e=0;e<this.m_widgetsArray.length;e++)IsBoolean(this.m_widgetsArray[e].m_isDataSetavailable)||this.m_widgetsArray[e].drawObject()},DashBoard.prototype.notify=function(){for(var e=0;e<this.getDataProviders().getDataURL().length;e++)this.getDataProviders().getDataURL()[e].notify()},DashBoard.prototype.initializeData=function(){for(var e=0;e<this.m_widgetsArray.length;e++)this.m_widgetsArray[e].initializeData()},DashBoard.prototype.initWindowResizeEvent=function(){navigator.userAgent.match(/(iPad|iPhone)/g)||"MobileLayout"==this.getAbsoluteLayout().m_layouttype?dGlobals.dashboardState.orientationchange&&$(window).on("orientationchange",function(e){dGlobals.dashboardState.orientationchange=!1,setTimeout(function(){Math.abs(windowWH.o)===Math.abs(window.orientation)||180!=window.orientation&&0!=window.orientation?Math.abs(windowWH.o)===Math.abs(window.orientation)||90!=window.orientation&&-90!=window.orientation?(windowWH.w=windowWH.aw,windowWH.h=windowWH.ah):(windowWH.w=windowWH.aw+256,windowWH.h=windowWH.ah-256):(windowWH.w=windowWH.aw-256,windowWH.h=windowWH.ah+256),frameworkController.resizeDashboard()},10)}):dGlobals.dashboardState.resize?($(window).resize(function(){dGlobals.dashboardState.resize=!1,frameworkController.dashboard&&frameworkController.dashboard.getAbsoluteLayout()&&(this.windowResizeTO&&clearTimeout(windowResizeTO),this.windowResizeTO=setTimeout(function(){$(this).trigger("resizeEnd")},100))}),$(window).bind("resizeEnd",function(){windowWH={aw:window.innerWidth,ah:window.innerHeight,w:window.innerWidth,h:window.innerHeight,o:window.orientation},frameworkController.resizeDashboard()})):windowWH={aw:window.innerWidth,ah:window.innerHeight,w:window.innerWidth,h:window.innerHeight,o:window.orientation}},AbsoluteLayout.prototype.setBorderThickness=function(e){this.m_borderthickness=e},AbsoluteLayout.prototype.getBorderThickness=function(){return this.m_borderthickness},AbsoluteLayout.prototype.setWidgetObjectsArray=function(e){this.m_widgetsArray.push(e)},AbsoluteLayout.prototype.getWidgetObjectsArray=function(){return this.m_widgetsArray},AbsoluteLayout.prototype.setGroupObject=function(e){this.m_group.push(e)},AbsoluteLayout.prototype.setGroupWidgetsToArray=function(e){this.m_widgetsGroup.push(e)},AbsoluteLayout.prototype.setGroupToArray=function(e){this.m_widgetsGroupArray.push(e)},AbsoluteLayout.prototype.setnivGaugeObject=function(e){this.GaugeObjectArray.push(e)},AbsoluteLayout.prototype.getnivGaugeObject=function(){return this.GaugeObjectArray},AbsoluteLayout.prototype.getDefaultAbsloluteLayoutPadding=function(){return this.m_defaultabslolutelayoutpadding},AbsoluteLayout.prototype.getDashboardMarginRatio=function(){return this.m_dashboardmarginratio},AbsoluteLayout.prototype.getDashboardMargin=function(e,t){return this.m_dashboardmargin},AbsoluteLayout.prototype.initializeScaling=function(){var e,t,a,r,o,i=windowWH.w,s=windowWH.h;this.m_ALWidth=this.m_width,this.m_ALHeight=this.m_height,"fitToPage"==this.m_scalingview?(e=this.getDashboardMargin(i,i),this.m_top=e,this.m_left=e,o=i-2*this.getBorderThickness(),t=s-2*this.getBorderThickness(),widthRatio=o/this.m_width,heightRatio=t/this.m_height,this.m_ALWidth=o,this.m_ALHeight=t):"fitToWidth"==this.m_scalingview?(e=this.getDashboardMargin(i,s),this.m_top=e,this.m_left=e,o=i-2*this.getBorderThickness(),widthRatio=o/this.m_width,heightRatio=this.m_height/this.m_height,this.m_ALWidth=o,this.m_ALHeight=this.m_height,this.m_left=e,this.m_top="alignTop"==this.m_dashboardalign?0:(s-this.m_height)/2<0?e:(s-this.m_height)/2):"fitToHeight"==this.m_scalingview?(e=this.getDashboardMargin(s,s),t=s-2*this.getBorderThickness(),widthRatio=this.m_width/this.m_width,heightRatio=t/this.m_height,this.m_ALWidth=this.m_width,this.m_ALHeight=t,this.m_top=e,this.m_left="alignLeft"==this.m_dashboardalign?0:(i-this.m_width)/2<0?e:(i-this.m_width)/2):"proportionate"==this.m_scalingview&&(o=this.m_width/this.m_height,s<i?i<(a=(r=s)*o)&&(r=(a=i)/o):s<(r=(a=i)/o)&&(a=s*o,r=s),e=this.getDashboardMargin(a,r),widthRatio=(a-2*e)/this.m_width,heightRatio=(r-2*e)/this.m_height,this.m_ALWidth=Math.floor(a-2*this.getBorderThickness()),this.m_ALHeight=Math.floor(r-2*this.getBorderThickness()),i/s<o?(this.m_top=(s-r)/2,this.m_left=e):(this.m_top=e,this.m_left=(i-a)/2))},AbsoluteLayout.prototype.init=function(e,t){this.m_absoluteLayoutName=e,this.m_bordercolor=convertColorToHex(this.m_bordercolor),this.absoluteLayoutId="draggablesParentDiv"+this.m_absoluteLayoutName,$("#"+this.absoluteLayoutId).remove();var e=document.createElement("div"),a=(e.setAttribute("class","draggablesParentDiv"),e.id=this.absoluteLayoutId,$("#WatermarkDiv").append(e),{"overflow-x":"auto","overflow-y":"auto"}),a=(IsBoolean(isScaling)&&("fitToWidth"==this.m_scalingview?a["overflow-x"]="hidden":"fitToHeight"==this.m_scalingview&&(a["overflow-y"]="hidden")),$("#WatermarkDiv").css(a),$("#maximizeOverlayDiv").remove(),document.createElement("div"));a.setAttribute("id","maximizeOverlayDiv"),e.appendChild(a),""===this.m_borderthickness&&this.setBorderThickness(0),this.m_ALWidth=+this.m_ALWidth+ +this.getDefaultAbsloluteLayoutPadding()+2*this.getBorderThickness(),this.m_ALHeight=+this.m_ALHeight+ +this.getDefaultAbsloluteLayoutPadding()+2*this.getBorderThickness(),"AbsoluteLayout"==this.m_layouttype&&(IsBoolean(isScaling)&&IsBoolean(this.m_enableresize)?$(".ui-mobile-viewport").css("overflow","hidden"):$(".ui-mobile-viewport").css("overflow",""))},AbsoluteLayout.prototype.drawAbsoluteCanvas=function(){this.draw(this.absoluteLayoutId,0,{x:this.m_left+"px",y:this.m_top+"px",w:this.m_ALWidth+"px",h:this.m_ALHeight+"px"},this.getBorderThickness()+"px solid "+this.m_bordercolor,"auto")},AbsoluteLayout.prototype.drawMaximizeOverlayDiv=function(){this.draw("maximizeOverlayDiv",0,{x:"0px",y:"0px",w:"0%",h:"0%"},"0px","none")},AbsoluteLayout.prototype.draw=function(e,t,a,r,o){this.m_bootstrap?($("#"+e).css({width:"100%",height:"auto"}),$("#"+e).addClass("container"),$("#"+e).css("overflow","auto")):($("#"+e).css({left:a.x,top:a.y,width:a.w,height:a.h}),IsBoolean(isScaling)?$("#WatermarkDiv").css("overflow","hidden"):$("#"+e).css("margin","auto")),$("#"+e).css({border:r,overflow:o,"z-index":t}),navigator.userAgent.match(/(iPad|iPhone)/g)?($("#"+e).css("position","absolute"),$("#"+e).addClass("iPhoneScrollBar")):($("#"+e).css("position","relative"),$("#"+e).removeClass("iPhoneScrollBar")),"MobileLayout"==this.m_layouttype?($("#"+e).addClass("hideScrollBar"),detectDevice.mobile()?($("#"+e).css("overflow-x","hidden"),$("#WatermarkDiv").css("overflow","hidden"),$(window.parent.document.getElementById("contentView")).css("overflow","hidden"),$("#dashboardViewerFrame").css("overflow","hidden"),$("#"+e).addClass("mobileViewCSS")):$("#"+e).removeClass("mobileViewCSS")):($("#"+e).removeClass("hideScrollBar"),$("#"+e).removeClass("mobileViewCSS")),this.setDashboardCSS(e)},AbsoluteLayout.prototype.setDashboardCSS=function(e,t,a){var r=this.m_gradientrotation,o=["rgba(255,255,255,1)","rgba(255,255,255,1)"],i=this.m_gradients,s=this.m_bgalpha;if(i&&""!=i){var n=i.split(",");if(1==n.length)o[0]=hex2rgb(convertColorToHex(n[0]),s),o[1]=hex2rgb(convertColorToHex(n[0]),s);else for(var l=0;l<n.length;l++)o[l]=hex2rgb(convertColorToHex(n[l]),s)}for(var u="",d=0;d<o.length;d++)u+=o[d]+(d<o.length-1?" ,":"");$("#"+e).css({background:"linear-gradient("+r+"deg, "+u+")"}),$("#"+e).css({background:"-webkit-linear-gradient("+r+"deg, "+u+")"}),$("#"+e).css({background:"-o-linear-gradient("+r+"deg, "+u+")"}),$("#"+e).css({background:"-moz-linear-gradient("+r+"deg, "+u+")"})},DashboardOptions.prototype.setExpiryDate=function(e){this.m_expirydate=e},DashboardOptions.prototype.getExpiryDate=function(){return this.m_expirydate},DashboardOptions.prototype.setHasExpiry=function(e){this.m_hasexpiry=e},DashboardOptions.prototype.getHasExpiry=function(){return this.m_hasexpiry},DashboardOptions.prototype.setPublishWSDLServer=function(e){this.m_publishwsdlserver=e},DashboardOptions.prototype.getPublishWSDLServer=function(){return this.m_publishwsdlserver},FlashVars.prototype.setParam=function(e){this.m_param.push(e)},FlashVars.prototype.getParam=function(){return this.m_param},FlashVars.prototype.getParamFromName=function(e){for(var t=0;t<this.m_param.length;t++){var a=this.m_param[t];if(a.m_name==e)return a}return""},Param.prototype.getName=function(){return this.m_name},Param.prototype.setName=function(e){this.m_name=e},Param.prototype.getValue=function(){return this.m_value},Param.prototype.setValue=function(e){this.m_value=e},AuthProfiles.prototype.setProfile=function(e){this.m_profile.push(e)},AuthProfiles.prototype.getProfile=function(){return this.m_profile},Profile.prototype.setName=function(e){this.m_name=e},Profile.prototype.getName=function(){return this.m_name},Profile.prototype.setUserName=function(e){this.m_username=e},Profile.prototype.getUserName=function(){return this.m_username},Profile.prototype.setPassword=function(e){this.m_password=e},Profile.prototype.getPassword=function(){return this.m_password},DataProviders.prototype.setDataURL=function(e){this.m_dataurl.push(e)},DataProviders.prototype.getDataURL=function(){return this.m_dataurl},DataProviders.prototype.getDataProviderObject=function(e){for(var t=new DataURL,a=0;a<e.attributes.length;a++){var r=e.attributes[a];"type"==r.name&&(t=new("offline"==r.value?OfflineDataProvider:OnlineDataProvider))}return t},DataURL.prototype.init=function(){this.m_fieldNamesArray=this.setFieldNames()},DataURL.prototype.setQueryParamsMap=function(e){this.m_queryParamsMap=e},DataURL.prototype.getQueryParamsMap=function(){return this.m_queryParamsMap},DataURL.prototype.getUpdatedQueryParamsMap=function(){var e=this.getQueryParamsMap(),t={filters:""};return""!=this.m_queryParamsMap&&null!=(e=e.filters)&&(t.filters=this.getGlobalVariableValue(e)),t},DataURL.prototype.getGlobalVariableValue=function(t){try{for(var e=t.replace(new RegExp("{","g"),"[").replace(new RegExp("}","g"),"]"),a=e,r=/\[(.*?)\]/g,o=r.exec(e);o;o=r.exec(e)){var i,s=this.getDashboard().getGlobalVariable();""!=s&&null!=s&&(i=s.getFieldValue(o[1]),a=a.replace(o[0],i))}}catch(e){return t}return a},DataURL.prototype.notify=function(){this.getData()},DataURL.prototype.registerWebServiceWithDataProvider=function(){this.setWebService(),this.getWebService().init(this)},DataURL.prototype.setWebService=function(){switch(this.m_servicetype||this.m_type){case"clarityWSDL":this.m_webservice=new ClarityWebService;break;case"bizvizPA":this.m_webservice=new PAWebService;break;case"bizvizDS":this.m_webservice=new DSWebService;break;case"bizvizWS":this.m_webservice=new WSWebService;break;case"bizvizdatasheet":this.m_webservice=new DatasheetService;break;default:this.m_webservice=new NQueryWebService}},DataURL.prototype.getWebService=function(){return this.m_webservice},DataURL.prototype.registerDataSetValuesWithDataprovider=function(){this.m_dataSetValues=new DataSetValues,this.m_dataSetValues.init(this)},DataURL.prototype.getDataSetValues=function(){return this.m_dataSetValues},DataURL.prototype.registerLanguageMappingWithDataprovider=function(){var e=new LanguageMapping;(this.m_languageMappingValues=e).init(this)},DataURL.prototype.updateDataSet=function(e){IsBoolean(this.m_islangwebservice)&&this.m_languageMappingValues.update(e,this),this.m_dataSetValues.update(e,this),this.m_dataSetValues.updateVirtualDataSet()},DataURL.prototype.registerNotifyCallBack=function(e){this.m_notifierCallbacks.push(e)},DataURL.prototype.setWholeData=function(e){this.m_wholeData=e},DataURL.prototype.callNotifierCallbacks=function(e){for(var t=0;t<this.m_notifierCallbacks.length;t++)this.m_notifierCallbacks[t](this.m_id,e)},DataURL.prototype.getFieldNames=function(){return this.m_fieldNamesArray},DataURL.prototype.setFieldNames=function(){for(var e=[],t=0;t<this.getFieldSet().length;t++){var a=this.getFieldSet()[t].getName();e.push(a)}return Array.prototype.contains=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return!0;return!1},Array.prototype.unique=function(){for(var e=[],t=0;t<this.length;t++)e.contains(this[t])||e.push(this[t]);return e},e=e.unique()},DataURL.prototype.getOffLineDataId=function(){return this.m_offlinedataid},DataURL.prototype.getId=function(){return this.m_id},DataURL.prototype.getuserId=function(){return this.m_userid},DataURL.prototype.getPassword=function(){return this.m_password},DataURL.prototype.getType=function(){return this.m_type},DataURL.prototype.getFieldSet=function(e){return this.m_fieldSet},DataURL.prototype.setFieldSet=function(e){this.m_fieldSet.push(e)},DataURL.prototype.getCon=function(){return this.m_con},DataURL.prototype.setCon=function(e){this.m_con=e},DataURL.prototype.setClaritySort=function(e){this.m_claritysort=e},DataURL.prototype.getClaritySortField=function(){return this.m_claritysort&&""!==this.m_claritysort?this.m_claritysort.getSortField():""},DataURL.prototype.getClaritySortDirection=function(){return this.m_claritysort&&""!==this.m_claritysort?this.m_claritysort.getSortDirection():""},DataURL.prototype.setClaritySlice=function(e){this.m_clarityslice=e},DataURL.prototype.getClaritySliceIndex=function(){return this.m_clarityslice&&""!==this.m_clarityslice?this.m_clarityslice.getSliceIndex():""},DataURL.prototype.getClaritySliceCount=function(){return this.m_clarityslice&&""!==this.m_clarityslice?this.m_clarityslice.getSliceCount():""},DataURL.prototype.setUrl=function(e){this.m_url=e},DataURL.prototype.getUrl=function(){return this.checkForPublishWSDLServer(),this.m_url},DataURL.prototype.checkForPublishWSDLServer=function(){var e,t;(/n\w{4}hWSDL/.test(this.m_type)||"web"==this.m_type)&&""!=(e=this.getDashboard().getDashboardOptions().getPublishWSDLServer())&&null!=e&&"null"!=e&&0<(t="object"!=typeof this.m_url?this.m_url.split("/"):[]).length&&""!=this.m_url&&this.setUrl(e+"/"+t[t.length-1])},DataURL.prototype.setDataType=function(e){this.m_datatype=e||"JSON"},DataURL.prototype.getDataType=function(){return this.m_datatype},DataURL.prototype.setSOAPEndPoint=function(e){this.m_soapendpoint=e},DataURL.prototype.getSOAPEndPoint=function(){return this.m_soapendpoint},DataURL.prototype.getPredictiveJsonDef=function(){return this.m_predictivejsondef},DataURL.prototype.getSkipFilterValues=function(){return this.m_skipfiltervalues},DataURL.prototype.setKeys=function(){var e,t=[];if(""!==this.getCon())for(e in this.getCon().getClauseMap())t.push(e);this.m_keys=t},DataURL.prototype.getKeys=function(){return this.m_keys},DataURL.prototype.getValues=function(e){var t=[],a=(this.setDashboard(e),"");if(""!==this.getCon()){var r,o,i=this.getCon().getClauseMap();for(r in i){if(0==i[r].indexOf("@"))for(var s=this.getDashboard().getFlashVars().getParam(),n=0;n<s.length;n++)s[n].getName()==i[r].substring(1,i[r].length)&&(a=s[n].getValue());else 0==i[r].indexOf("{")?(o=[(o=i[r].substring(1,i[r].length-1).split(".")).shift(),o.join(".")],null!=this.getDashboard().getGlobalVariable()&&null!=this.getDashboard().getGlobalVariable().map[o[0]]&&(a=this.getDashboard().getGlobalVariable().map[o[0]].map[o[1]])):a=0==i[r].indexOf("'")?i[r].substring(1,i[r].length-1):i[r];this.m_clausevalues[r]=a="Value"==a?"":a,t.push(a)}}return t},DataURL.prototype.getGlobalKey=function(){return this.getId()},DataURL.prototype.setDashboard=function(e){this.m_dashboard=e},DataURL.prototype.getDashboard=function(){return this.m_dashboard},DataURL.prototype.getClauseData=function(){return this.m_clausevalues},OfflineDataProvider.prototype=new DataURL,OfflineDataProvider.prototype.getDataFromConnection=function(e,t){t({dataSetValues:e,dataObject:this.getOffLineData(),status:{isDataReceived:!0}})},OfflineDataProvider.prototype.getOffLineData=function(){var e=this.getXmlData();return null!=(e="Array"==this.m_datatype?this.getArrayData(e):e)?(this.m_fieldName=this.getFieldNames(),this.m_allFieldName=this.getAlFieldsFromJSONData(e),this.m_completeParsedData=e,this.m_completeParsedDataLowerCase=e,this.m_con_clauseMap=this.getCon().getClauseMap(),this.m_con_clauseMapLength=Object.keys(this.m_con_clauseMap).length,this.m_dataSetValues.setXmlData(e),0<this.m_con_clauseMapLength?this.getFilteredData():e):new Object},OfflineDataProvider.prototype.getArrayData=function(e){for(var t=[],a=e,r=1;r<a.length;r++){for(var o={},i=0;i<a[r].length;i++)o[a[0][i]]=a[r][i];t.push(o)}return e=[],e=t},OfflineDataProvider.prototype.getAlFieldsFromJSONData=function(e){var t=new Object;if(null!=e)for(var a=0;a<e.length;a++)for(r in e[a])t[r]="";var r,o=[];for(r in t)o.push(r);return o},OfflineDataProvider.prototype.notify=function(){var e=this.getXmlData();this.m_fieldName=this.getFieldNames(),this.m_allFieldName=this.getAlFieldsFromXMLData(e),this.m_completeParsedData=this.parseXMLData(e),this.m_completeParsedDataLowerCase=this.parseXMLDataWithAllField(e),this.getData()},OfflineDataProvider.prototype.getXmlData=function(){return this.m_dashboard.getXMLData(this.getId())},OfflineDataProvider.prototype.getAlFieldsFromXMLData=function(e){var t,r=new Object,e=$(e).find("Records"),a=($(e).find("Record").each(function(){for(var e=$(this).find("*"),t=0;t<e.length;t++){var a=e[t].tagName.toLowerCase();r[a]=""}}),[]);for(t in r)a.push(t);return a},OfflineDataProvider.prototype.parseXMLData=function(e){var o=this,i=[],e=$(e).find("Records");return this.m_numberOfRecords=0,$(e).find("Record").each(function(){for(var e=new Object,t=0;t<o.m_fieldName.length;t++){var a=o.m_fieldName[t],r=$(this).find(a).text();e[a]=r}i[o.m_numberOfRecords]=e,o.m_numberOfRecords++}),i},OfflineDataProvider.prototype.parseXMLDataWithAllField=function(e){var o=this,i=[],e=$(e).find("Records"),s=0;return $(e).find("Record").each(function(){for(var e=new Object,t=0;t<o.m_allFieldName.length;t++){var a=o.m_allFieldName[t].toLowerCase(),r=$(this).find(a).text();e[a]=r}i[s]=e,s++}),i},OfflineDataProvider.prototype.getData=function(){this.m_con_clauseMap=this.getCon().getClauseMap(),this.m_con_clauseMapLength=Object.keys(this.m_con_clauseMap).length;var e=this.getXmlData();this.m_dataSetValues.setXmlData(e),0<this.m_con_clauseMapLength?(e=this.getFilteredData(),this.updateDataSet(e)):this.updateDataSet(this.m_completeParsedData),this.m_dataSetValues.updateVirtualDataSet()},OfflineDataProvider.prototype.updateDataSet=function(e){this.m_dataSetValues.setDataInMap(e),this.m_dataSetValues.setNumberOfRecord(this.m_numberOfRecords),this.m_dataSetValues.notifyDataUpdate()},OfflineDataProvider.prototype.getFilteredData=function(){var e=[];this.setClauseData();for(var t=0;t<this.m_completeParsedData.length;t++){var a=this.isFilterConditionSatisfied(t);IsBoolean(a)&&e.push(this.m_completeParsedData[t])}return e},OfflineDataProvider.prototype.getLowerCaseClauseMap=function(e){var t,a={};for(t in e)a[t.toLowerCase()]=e[t];return a},OfflineDataProvider.prototype.isFilterConditionSatisfied=function(e){for(var t=this.getLowerCaseClauseMap(this.m_con_clauseMap),a=0;a<this.m_allFieldName.length;a++){var r=this.m_allFieldName[a];if(void 0!==t[r.toLowerCase()]){var o=this.m_completeParsedDataLowerCase[e][r],i=(null!=o&&(o=(o+"").trim()),this.m_clausevalues[r.toLowerCase()]),s=[],n=!1;if(1<(s=(""+(i=null!=(i="Value"==i?"":i)?i.trim():i)).split(",")).length){for(var l=0;l<s.length;l++)s[l]=s[l].trim(),o!=s[l]&&"null"!=s[l]&&o!=i||(n=!0);if(0==n)return!1}else if("null"!=i&&""!=i&&o!=i)return!1}}return!0},OfflineDataProvider.prototype.getValueOfClause=function(e){var t,a=e;return 0==e.indexOf("{")?(t=[(t=e.substring(1,e.length-1).split(".")).shift(),t.join(".")],null!=this.m_dashboard.getGlobalVariable()&&null!=this.m_dashboard.getGlobalVariable().map[t[0]]&&(a=this.m_dashboard.getGlobalVariable().map[t[0]].map[t[1]])):0==e.indexOf("'")&&(a=e.substring(1,e.length-1)),a},OfflineDataProvider.prototype.setClauseData=function(){var e,t=this.getLowerCaseClauseMap(this.m_con_clauseMap);for(e in t)this.m_clausevalues[e]=this.getValueOfClause(t[e.toLowerCase()])+""},OnlineDataProvider.prototype=new DataURL,OnlineDataProvider.prototype.getDataFromConnection=function(e,t){var a=this.getValues(this.m_dashboard);this.getWebService().setDataType(this.getDataType()),this.getWebService().callWebservice(a,e,t)},OnlineDataProvider.prototype.getData=function(){var e=this.getValues(this.m_dashboard);this.getWebService().setDataType(this.getDataType()),this.getWebService().callWebservice(e,this.updateDataSet)},DerivedDataProvider.prototype=new DataURL,DerivedDataProvider.prototype.init=function(){DataURL.prototype.init.call(this),this.registerCallBacksInSuperConnections()},DerivedDataProvider.prototype.getDataFromConnection=function(e,t){e={dataSetValues:e,dataObject:this.getMergedData(),status:{isDataReceived:!0}};this.m_dataDirty?(this.m_registeredCallBack=t,this.m_registeredCallBackData=e):t(e)},DerivedDataProvider.prototype.getData=function(e,t){},DerivedDataProvider.prototype.registerCallBacksInSuperConnections=function(){if(this.m_parentsource&&this.m_childsource)for(var e=0;e<this.m_dashboard.m_DataProviders.m_dataurl.length;e++){var t=this.m_dashboard.m_DataProviders.m_dataurl[e];t.m_id!=this.m_parentsource&&t.m_id!=this.m_childsource||t.registerNotifyCallBack(this.dataRecieve.bind(this))}},DerivedDataProvider.prototype.dataRecieve=function(e,t){return this.m_dataDirty=!0,e==this.m_parentsource?(this.m_parentData=t,this.m_parentDataReady=!0):e==this.m_childsource&&(this.m_childData=t,this.m_childDataReady=!0),this.m_parentDataReady&&this.m_childDataReady?this.deriveData():void 0},DerivedDataProvider.prototype.deriveData=function(){var e=this.m_parentData,t=this.m_childData,a=[];if(void 0!==this.m_deriveconditions&&void 0!==this.m_deriveconditions.criteria[0]&&e&&t)try{var r=this.m_deriveconditions.criteria[0].split("&&");this.m_deriveconditionsarray=[];for(var o=0;o<r.length;o++){this.m_deriveconditionsarray[o]={};var i=0<r[o].indexOf("==")?"==":"!=",s=r[o].split(i);this.m_deriveconditionsarray[o].leftid=s[0].split(".")[1].trim(),this.m_deriveconditionsarray[o].rightid=s[1].split(".")[1].trim(),this.m_deriveconditionsarray[o].operator=i}a=this.leftJoin(e,t,this)}catch(e){}this.mergedData=a,this.m_dataDirty=!1,this.notifyCallBack()},DerivedDataProvider.prototype.leftJoin=function(e,a,o){var i=[];return _.each(e,function(t){var r,e=_.filter(a,function(e){return o.evaluteCriteria(t,e,o.m_deriveconditionsarray)});0==e.length&&(r={},_.each(a[0],function(e,t){r[t]=null}),e=[{}]),_.each(e,function(e){var a={};_.each(t,function(e,t){a[t]=e}),_.isEmpty(e)&&(e=r),_.each(e,function(e,t){t in a?a[t+"_R"]=e:a[t]=e}),i.push(a)})}),i},DerivedDataProvider.prototype.evaluteCriteria=function(e,t,a){for(var r=!0,o=0;o<a.length&&0!=(r="=="==a[o].operator?e[a[o].leftid]==t[a[o].rightid]:e[a[o].leftid]!=t[a[o].rightid]);o++);return r},DerivedDataProvider.prototype.notifyCallBack=function(){this.m_registeredCallBack&&(this.m_registeredCallBackData.dataObject=this.mergedData,this.m_registeredCallBack(this.m_registeredCallBackData))},DerivedDataProvider.prototype.evalCriteria=function(d1,d2){var scr="var "+this.m_parentsource+"="+JSON.stringify(d1)+";var "+this.m_childsource+"="+JSON.stringify(d2);return scr+=";"+this.m_deriveconditions.criteria[0],eval(scr)},DerivedDataProvider.prototype.createData=function(e,t,a,r){a=a||{};for(var o=0;o<this.m_fieldSet.length;o++)this.m_fieldSet[o].m_parentconnection==t?a[this.m_fieldSet[o].m_name]=e[this.m_fieldSet[o].m_parentfield]||void 0:r&&(a[this.m_fieldSet[o].m_name]=e[this.m_fieldSet[o].m_parentfield]||"null");return a},DerivedDataProvider.prototype.getMergedData=function(){return this.mergedData},ClaritySlice.prototype.getSliceIndex=function(){return this.m_sliceindex},ClaritySlice.prototype.getSliceCount=function(){return this.m_slicecount},ClaritySort.prototype.getColumns=function(){return this.m_columns},ClaritySort.prototype.getSortField=function(){this.m_sortfield=[];for(var e=0;e<this.m_columns.length;e++)this.m_sortfield.push(this.m_columns[e].sortField);return this.m_sortfield},ClaritySort.prototype.getSortDirection=function(){this.m_sortdirection=[];for(var e=0;e<this.m_columns.length;e++)this.m_sortdirection.push(this.m_columns[e].sortDirection);return this.m_sortdirection},FieldSet.prototype.getName=function(){return this.m_name},FieldSet.prototype.getType=function(){return this.m_type},FieldSet.prototype.getDisplayName=function(){return this.m_displayname},LanguageMapping.prototype=new DataURL,LanguageMapping.prototype.init=function(e){this.m_dataUrl=e,this.m_connectionId=this.m_dataUrl.getId(),this.m_fieldName=this.m_dataUrl.m_fieldNamesArray},LanguageMapping.prototype.getSource=function(){return this.m_source},LanguageMapping.prototype.update=function(e,t){this.m_XMLData=e;e=this.parseDataInDataSetValues(e);this.setDataInMap(e);for(var a=0;a<this.m_registerdWidgets.length;a++)this.m_registerdWidgets[a].notifyLanuageMapping(this)},LanguageMapping.prototype.parseDataInDataSetValues=function(e){var o=this,i=[],t="",a="",e=(/n\w{4}hWSDL/.test(this.m_dataUrl.m_type)||"web"==this.m_dataUrl.m_type?(t="records",a="record"):"clarityWSDL"==this.m_dataUrl.m_type&&(t="Records",a="Record"),$(e).find(t));return this.m_numberOfRecords=0,$(e).find(a).each(function(){for(var e=new Object,t=0;t<o.m_fieldName.length;t++){var a=o.m_fieldName[t],r=$(this).find(a).text();e[a]=r}i[o.m_numberOfRecords]=e,o.m_numberOfRecords++}),i},LanguageMapping.prototype.setDataInMap=function(e){this.m_fieldNameValues=e},Con.prototype.setdefaultclauseMap=function(e,t){this.defaultclauseMap[e]=t},Con.prototype.getdefaultMapfromCon=function(){return this.defaultclauseMap},Con.prototype.getdefaultclauseMap=function(){for(var e=[],t=this.m_defaultclause.split(","),a=0;a<t.length;a++)e[a]=t[a].split("="),this.defaultclauseMap[e[a][0]]=e[a][1].substring(1,e[a][1].length-1),this.keyArr[a]=e[a][0];return this.defaultclauseMap},Con.prototype.getDefaultclause=function(){return this.m_defaultclause},Con.prototype.getClause=function(){return this.m_clause},Con.prototype.getClauseMap=function(){if(null!=this.m_clausemap&&""!=this.m_clausemap)return this.clauseMap=this.m_clausemap,this.m_clausemap;if(0<(r=this.m_clause).length)try{for(var e=(e=r.match(/'[^']*'/g))||[],t=0;t<e.length;t++)var a=e[t].replace(/,/g,"~~"),r=r.replace(e[t],a);for(var o=r.split(","),i=[],s=0;s<o.length;s++){var n=o[s].replace(/~~/g,",");i[s]=n.split("="),this.clauseMap[i[s][0]]=i[s][1]}}catch(e){}return this.clauseMap},DefaultValues.prototype.setDefaultValuesNameValueMap=function(e,t){this.m_defaultValuesNameValueMap[e]=t},DefaultValues.prototype.getDefaultValuesNameValueMap=function(){return this.m_defaultValuesNameValueMap},DataProvider.prototype.getId=function(){return this.m_id},DataSetExpressions.prototype.setDataSetExpression=function(e){this.m_dataSetExpression.push(e),this.setDataSetExpressionMap(e),this.m_dataSetCount++,e.m_count=this.m_dataSetCount},DataSetExpressions.prototype.getDataSetExpression=function(){return this.m_dataSetExpression},DataSetExpressions.prototype.setDataSetExpressionMap=function(e){this.m_dataSetExpressionMap[e.m_datasource+""+e.m_id]=e},DataSetExpressions.prototype.getDataSetExpressionbyID=function(e){return this.m_dataSetExpressionMap[e]},DataSetExpression.prototype.getId=function(){return this.m_id},DataSetExpression.prototype.setId=function(e){this.m_id=e},DataSetExpression.prototype.getExpressionScript=function(){return this.m_expressionScript},DataSetExpression.prototype.setExpressionScript=function(e){this.m_expressionScript=e},DataSetExpression.prototype.getVariables=function(){return this.m_Variable},DataSetExpression.prototype.setVariables=function(e){this.m_Variable.push(e)},DataSetExpressionVariable.prototype.getName=function(){return this.m_name},DataSetExpressionVariable.prototype.setName=function(e){this.m_name=e},DataSetExpressionVariable.prototype.getValue=function(){return this.m_value},DataSetExpressionVariable.prototype.setValue=function(e){this.m_value=e},DataSetExpressionscript.prototype.getExpressionScript=function(){return this.m_expressionScript},DataSetExpressionscript.prototype.setExpressionScript=function(e){this.m_expressionScript=e};
//# sourceMappingURL=chartingFramework.min.js.map